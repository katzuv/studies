{
  "topic_metadata": {
    "id": 4027,
    "title": "Can you hide ticks in Lilaq, but preserve their labels?",
    "slug": "can-you-hide-ticks-in-lilaq-but-preserve-their-labels",
    "posts_count": 6,
    "created_at": "2025-05-11T12:56:29.944Z",
    "last_posted_at": "2025-05-11T20:13:22.688Z",
    "views": 78,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Mc-Zen",
    "tags": [
      "lilaq"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 291
  },
  "posts": [
    {
      "id": 12254,
      "post_number": 1,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T12:56:30.159Z",
      "updated_at": "2025-05-11T19:59:48.574Z",
      "cooked": "<p>In <a href=\"https://forum.typst.app/t/how-to-reproduce-an-image-in-typst/4018/7\" class=\"inline-onebox\">How to reproduce a stress diagram image in Typst? - #7 by Andrew</a> I used</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show: lq.set-tick(stroke: 0pt)\n</code></pre>\n<p>in addition to</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">  xaxis: (ticks: range(x-max + 1, step: 80), subticks: 1),\n</code></pre>\n<p>I extensively searched and believed that I can just do <code>tick-stroke: none</code> in <code>xaxis</code>, but the only option I found is to use a ‚Äúshow-set‚Äù rule outside the diagram definition. Is there an easier way to do this? I want it to be contained in the <code>lq.diagram()</code> like the rest of the things.</p>\n<p>Seems related: <a href=\"https://github.com/lilaq-project/lilaq/issues/25\" class=\"inline-onebox\">Add ticking tutorial ¬∑ Issue #25 ¬∑ lilaq-project/lilaq ¬∑ GitHub</a>.</p>",
      "raw": "In https://forum.typst.app/t/how-to-reproduce-an-image-in-typst/4018/7?u=andrew I used\n\n```typ\n#show: lq.set-tick(stroke: 0pt)\n```\n\nin addition to\n\n```typc\n  xaxis: (ticks: range(x-max + 1, step: 80), subticks: 1),\n```\n\nI extensively searched and believed that I can just do `tick-stroke: none` in `xaxis`, but the only option I found is to use a \"show-set\" rule outside the diagram definition. Is there an easier way to do this? I want it to be contained in the `lq.diagram()` like the rest of the things.\n\nSeems related: https://github.com/lilaq-project/lilaq/issues/25.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 51.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12271,
      "post_number": 2,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-05-11T16:30:42.902Z",
      "updated_at": "2025-05-11T16:30:42.902Z",
      "cooked": "<p>Indeed, writing</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show: lq.set-tick(inset: 0pt)\n</code></pre>\n<p>would be the preferred way. I recommend separating content from styling wherever possible in order to avoid polluting the plotting code and to easily switch out styles.</p>\n<p>Within diagram code, this is actually not possible. This is part of the design of Lilaq: we avoid repetitive arguments that are passed on and on to nested elements; instead the user can directly speak to an element through set and show rules.</p>",
      "raw": "Indeed, writing\n```typ\n#show: lq.set-tick(inset: 0pt)\n```\nwould be the preferred way. I recommend separating content from styling wherever possible in order to avoid polluting the plotting code and to easily switch out styles. \n\nWithin diagram code, this is actually not possible. This is part of the design of Lilaq: we avoid repetitive arguments that are passed on and on to nested elements; instead the user can directly speak to an element through set and show rules.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 26.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 12298,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T20:02:03.142Z",
      "updated_at": "2025-05-11T20:02:03.142Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Mc-Zen\" data-post=\"2\" data-topic=\"4027\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/mc-zen/48/234_2.png\" class=\"avatar\"> Mc-Zen:</div>\n<blockquote>\n<p>Indeed, writing</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show: lq.set-tick(inset: 0pt)\n</code></pre>\n<p>would be the preferred way.</p>\n</blockquote>\n</aside>\n<p>Where does the indeed part come from? I wrote <code>stroke</code>, not <code>inset</code>. But I did see that you can also change <code>inset</code>. But this way the stroke will be so short, that it doesn‚Äôt exist, instead of so thin.</p>",
      "raw": "[quote=\"Mc-Zen, post:2, topic:4027\"]\nIndeed, writing\n\n```typ\n#show: lq.set-tick(inset: 0pt)\n```\n\nwould be the preferred way.\n[/quote]\n\nWhere does the indeed part come from? I wrote `stroke`, not `inset`. But I did see that you can also change `inset`. But this way the stroke will be so short, that it doesn't exist, instead of so thin.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 25,
      "score": 5.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12304,
      "post_number": 4,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-05-11T20:08:00.336Z",
      "updated_at": "2025-05-11T20:08:00.336Z",
      "cooked": "<p>Stroke would not work here because it cannot be <code>none</code>. Except if you set it to a transparent color.</p>",
      "raw": "Stroke would not work here because it cannot be `none`. Except if you set it to a transparent color.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 12305,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T20:10:23.100Z",
      "updated_at": "2025-05-11T20:10:23.100Z",
      "cooked": "<p>Uhhh, so is <code>inset</code>. By short and thin, I was talking about <code>0pt</code>.</p>",
      "raw": "Uhhh, so is `inset`. By short and thin, I was talking about `0pt`.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 3.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12308,
      "post_number": 6,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-05-11T20:13:22.688Z",
      "updated_at": "2025-05-11T20:13:22.688Z",
      "cooked": "<p>Sorry, you wrote <code>stroke: 0pt</code> (I had in mind <code>stroke: none</code>). Nevermind.</p>",
      "raw": "Sorry, you wrote `stroke: 0pt` (I had in mind `stroke: none`). Nevermind.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    }
  ],
  "scraped_at": "2025-06-10T09:48:01.665677"
}
{
  "topic_metadata": {
    "id": 4028,
    "title": "How to set every stroke to black in Lilaq?",
    "slug": "how-to-set-every-stroke-to-black-in-lilaq",
    "posts_count": 10,
    "created_at": "2025-05-11T13:10:15.851Z",
    "last_posted_at": "2025-05-11T20:14:48.022Z",
    "views": 76,
    "like_count": 4,
    "reply_count": 8,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 7,
    "accepted_answer_username": "Andrew",
    "tags": [
      "lilaq"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 1152
  },
  "posts": [
    {
      "id": 12256,
      "post_number": 1,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T13:10:15.999Z",
      "updated_at": "2025-05-11T13:10:15.999Z",
      "cooked": "<p>In <a href=\"https://forum.typst.app/t/how-to-reproduce-an-image-in-typst/4018/7\" class=\"inline-onebox\">How to Reproduce an Image in Typst? - #7 by Andrew</a>, I had to set <code>stroke</code> to <code>black</code> for grid, plot, scatter, and rect, because default is not black. Is there a magic way to set everything to black or some global-like setting that will do the same? I don‚Äôt want to trash the definition of things with such trivial styling that I want to be default anyway. Gotta keep it short and pretty.</p>",
      "raw": "In https://forum.typst.app/t/how-to-reproduce-an-image-in-typst/4018/7?u=andrew, I had to set `stroke` to `black` for grid, plot, scatter, and rect, because default is not black. Is there a magic way to set everything to black or some global-like setting that will do the same? I don't want to trash the definition of things with such trivial styling that I want to be default anyway. Gotta keep it short and pretty.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 22.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12269,
      "post_number": 2,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-05-11T16:18:20.654Z",
      "updated_at": "2025-05-11T16:18:20.654Z",
      "cooked": "<p>Hi, the plot types like plot, scatter (although currently not rect because this is sortof extra ‚àí this can be discussed though) inherit their default stroke from <code>lq.style</code>. However, this one can currently only be <code>set</code> within style cycles, see <a href=\"https://lilaq.org/docs/tutorials/cycles\" rel=\"noopener nofollow ugc\">Using style cycles ‚àí Lilaq</a>. This is because of the lack of user-definable types in Typst. In the future, you will be able to write <code>set lq.style(stroke: black)</code>.</p>\n<p>The grid is separate and will always need to be set individually. You can read this tutorial for ideas on separating styling from content: <a href=\"https://lilaq.org/docs/tutorials/styling-and-themes\" rel=\"noopener nofollow ugc\">Styling and themes ‚àí Lilaq</a>.</p>",
      "raw": "Hi, the plot types like plot, scatter (although currently not rect because this is sortof extra ‚àí this can be discussed though) inherit their default stroke from `lq.style`. However, this one can currently only be `set` within style cycles, see [Using style cycles ‚àí Lilaq](https://lilaq.org/docs/tutorials/cycles). This is because of the lack of user-definable types in Typst. In the future, you will be able to write `set lq.style(stroke: black)`. \n\n\nThe grid is separate and will always need to be set individually. You can read this tutorial for ideas on separating styling from content: [Styling and themes ‚àí Lilaq](https://lilaq.org/docs/tutorials/styling-and-themes).",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 34,
      "score": 41.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 12275,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T17:11:22.007Z",
      "updated_at": "2025-05-11T19:44:31.581Z",
      "cooked": "<p>Scatter doesn‚Äôt inherit it. Also, it‚Äôs not only within style cycles.</p>\n<details><summary>Code</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/lilaq:0.2.0\" as lq\n\n#let f(x) = calc.tan(20deg) * x + 34\n\n#show: lq.set-tick(stroke: 0pt)\n#show: lq.set-grid(stroke: black)\n#set lq.style(stroke: black, fill: white)\n#let lq-rect = lq.rect.with(stroke: black, fill: white)\n\n#let y-max = 400\n#let x-max = 640\n#lq.diagram(\n  width: 15cm,\n  height: 15cm * y-max / x-max,\n  ylim: (0, y-max),\n  xlim: (0, x-max),\n  yaxis: (ticks: range(y-max + 1, step: 80), subticks: 1),\n  xaxis: (ticks: range(x-max + 1, step: 80), subticks: 1),\n  grid: (stroke-sub: 0.5pt),\n\n  let xs = lq.linspace(0, 590),\n  lq.plot(xs, xs.map(f), stroke: 0.5pt, mark: none),\n\n  let xs = (100, 200, 300, 400),\n  lq.scatter(xs, xs.map(f), size: 6mm),\n\n  lq.scatter((320,), (138,), size: 3mm),\n\n  lq-rect(400, 320, width: 160, height: 80),\n)\n</code></pre>\n</details>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/b/bccc881c817cd5982878e4120c323b9e8c1b4467.png\" data-download-href=\"https://forum.typst.app/uploads/default/bccc881c817cd5982878e4120c323b9e8c1b4467\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/b/bccc881c817cd5982878e4120c323b9e8c1b4467_2_345x228.png\" alt=\"image\" data-base62-sha1=\"qWbYeFAmR9ByPTDnkI0Lwt24G3B\" width=\"345\" height=\"228\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/b/bccc881c817cd5982878e4120c323b9e8c1b4467_2_345x228.png, https://forum.typst.app/uploads/default/optimized/2X/b/bccc881c817cd5982878e4120c323b9e8c1b4467_2_517x342.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/b/bccc881c817cd5982878e4120c323b9e8c1b4467_2_690x456.png 2x\" data-dominant-color=\"181818\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">720√ó477 19.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Scatter doesn't inherit it. Also, it's not only within style cycles.\n\n<details><summary>Code</summary>\n\n```typ\n#import \"@preview/lilaq:0.2.0\" as lq\n\n#let f(x) = calc.tan(20deg) * x + 34\n\n#show: lq.set-tick(stroke: 0pt)\n#show: lq.set-grid(stroke: black)\n#set lq.style(stroke: black, fill: white)\n#let lq-rect = lq.rect.with(stroke: black, fill: white)\n\n#let y-max = 400\n#let x-max = 640\n#lq.diagram(\n  width: 15cm,\n  height: 15cm * y-max / x-max,\n  ylim: (0, y-max),\n  xlim: (0, x-max),\n  yaxis: (ticks: range(y-max + 1, step: 80), subticks: 1),\n  xaxis: (ticks: range(x-max + 1, step: 80), subticks: 1),\n  grid: (stroke-sub: 0.5pt),\n\n  let xs = lq.linspace(0, 590),\n  lq.plot(xs, xs.map(f), stroke: 0.5pt, mark: none),\n\n  let xs = (100, 200, 300, 400),\n  lq.scatter(xs, xs.map(f), size: 6mm),\n\n  lq.scatter((320,), (138,), size: 3mm),\n\n  lq-rect(400, 320, width: 160, height: 80),\n)\n```\n\n</details>\n\n![image|690x457, 50%](upload://qWbYeFAmR9ByPTDnkI0Lwt24G3B.png)",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 11.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12276,
      "post_number": 4,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-05-11T17:27:02.228Z",
      "updated_at": "2025-05-11T17:28:23.412Z",
      "cooked": "<blockquote>\n<p>Scatter doesn‚Äôt inherit it.</p>\n</blockquote>\n<p>Oh yeah right, it‚Äôs because scatter has no lines/shapes. Marks and their fill/stroke are controlled by <code>lq.mark</code> in that context. This behaviour is the result of a very long process ‚àí there are a few tradeoffs.</p>\n<blockquote>\n<p>Also, it‚Äôs not only within style cycles.</p>\n</blockquote>\n<p>Well, yes but style is just an alias for <code>std.circle</code> <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"> so circles will be affected then for other things outside the diagram if you don‚Äôt scope it. But yes, it technically works, I forgot about that.</p>",
      "raw": "> Scatter doesn‚Äôt inherit it.\n\nOh yeah right, it's because scatter has no lines/shapes. Marks and their fill/stroke are controlled by `lq.mark` in that context. This behaviour is the result of a very long process ‚àí there are a few tradeoffs. \n\n> Also, it‚Äôs not only within style cycles.\n\nWell, yes but style is just an alias for `std.circle` üòÖ so circles will be affected then for other things outside the diagram if you don't scope it. But yes, it technically works, I forgot about that.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 10.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 12281,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T18:13:33.032Z",
      "updated_at": "2025-05-11T18:13:33.032Z",
      "cooked": "<p>I don‚Äôt understand how to use this mark thing to set <code>stroke</code>/<code>color</code> for scatter. I think it‚Äôs broken or something. And how would you style an ellipse?</p>",
      "raw": "I don't understand how to use this mark thing to set `stroke`/`color` for scatter. I think it's broken or something. And how would you style an ellipse?",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12289,
      "post_number": 6,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-05-11T19:19:53.490Z",
      "updated_at": "2025-05-11T19:19:53.490Z",
      "cooked": "<p>It is indeed broken for <code>lq.scatter</code> and I just fixed it on main. The ellipse cannot be styled globally as of now. It belongs to the set of <em>primitive drawing functions</em> and they don‚Äôt obey the style cycle (yet).</p>\n<p>We can however change this behaviour. I feel like ellipse, rect etc should still not take part in the style cycle but they could respond to changes in <code>lq.style</code>.</p>",
      "raw": "It is indeed broken for `lq.scatter` and I just fixed it on main. The ellipse cannot be styled globally as of now. It belongs to the set of _primitive drawing functions_ and they don't obey the style cycle (yet). \n\nWe can however change this behaviour. I feel like ellipse, rect etc should still not take part in the style cycle but they could respond to changes in `lq.style`.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 124.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 12294,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T19:43:20.102Z",
      "updated_at": "2025-05-11T20:22:41.540Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Mc-Zen\" data-post=\"6\" data-topic=\"4028\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/mc-zen/48/234_2.png\" class=\"avatar\"> Mc-Zen:</div>\n<blockquote>\n<p>It is indeed broken for <code>lq.scatter</code> and I just fixed it on main.</p>\n</blockquote>\n</aside>\n<p>Hmm, I still can‚Äôt style it with the global set rule, but with <code>cycle</code> it does work.</p>\n<details><summary>Code</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@local/lilaq:0.3.0\" as lq\n// #import \"@preview/lilaq:0.2.0\" as lq\n\n#let f(x) = calc.tan(20deg) * x + 34\n\n#set lq.style(stroke: black, fill: white) // Now it's not needed with cycle.\n#set lq.mark(stroke: black, fill: white) // Doesn't work.\n#show: lq.set-tick(stroke: 0pt)\n#show: lq.set-grid(stroke: black)\n#show: lq.set-diagram(cycle: (\n  it =&gt; {\n    set lq.mark(stroke: black, fill: white)\n    it\n  },\n))\n#let lq-rect = lq.rect.with(stroke: black, fill: white)\n\n#let y-max = 400\n#let x-max = 640\n#lq.diagram(\n  width: 15cm,\n  height: 15cm * y-max / x-max,\n  ylim: (0, y-max),\n  xlim: (0, x-max),\n  yaxis: (ticks: range(y-max + 1, step: 80), subticks: 1),\n  xaxis: (ticks: range(x-max + 1, step: 80), subticks: 1),\n  grid: (stroke-sub: 0.5pt),\n\n  let xs = lq.linspace(0, 590),\n  lq.plot(xs, xs.map(f), stroke: 0.5pt, mark: none),\n\n  let xs = (100, 200, 300, 400),\n  lq.scatter(xs, xs.map(f), size: 6mm),\n\n  lq.scatter((320,), (138,), size: 3mm),\n\n  lq-rect(400, 320, width: 160, height: 80),\n)\n</code></pre>\n</details>\n<p>For some reason, adding empty cycle closure sets plot line color to black. Is this a backup style? Though if I use <code>set lq.style(stroke: green)</code>, then it does still change the plot line color. So‚Ä¶ is this a bug that <code>lq.style</code> works globally, but <code>lq.mark</code> doesn‚Äôt?</p>\n<details><summary>Solution (for now)</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@local/lilaq:0.3.0\" as lq // @preview/lilaq:0.3.1/0.4.0\n// #import \"@preview/lilaq:0.2.0\" as lq\n\n#let f(x) = calc.tan(20deg) * x + 34\n\n#let lq-rect = lq.rect.with(stroke: black, fill: white) // Separately, but might work with lq.style in future.\n#set lq.style(stroke: black) // With cycle defaults to black, but can be set to other color.\n#show: lq.set-grid(stroke: black)\n#show: lq.set-diagram(cycle: (\n  it =&gt; {\n    set lq.mark(stroke: black, fill: white) // For scatter. In future can be used globally.\n    it\n  },\n))\n\n#let y-max = 400\n#let x-max = 640\n#lq.diagram(\n  width: 15cm,\n  height: 15cm * y-max / x-max,\n  ylim: (0, y-max),\n  xlim: (0, x-max),\n  yaxis: (tick-distance: 80, subticks: 1),\n  xaxis: (tick-distance: 80, subticks: 1),\n  grid: (stroke-sub: 0.5pt),\n\n  let xs = lq.linspace(0, 590),\n  lq.plot(xs, xs.map(f), stroke: 0.5pt, mark: none),\n\n  let xs = (100, 200, 300, 400),\n  lq.scatter(xs, xs.map(f), size: 6mm),\n\n  lq.scatter((320,), (138,), size: 3mm),\n\n  lq-rect(400, 320, width: 160, height: 80),\n)\n</code></pre>\n</details>",
      "raw": "[quote=\"Mc-Zen, post:6, topic:4028\"]\nIt is indeed broken for `lq.scatter` and I just fixed it on main.\n[/quote]\n\nHmm, I still can't style it with the global set rule, but with `cycle` it does work.\n\n<details><summary>Code</summary>\n\n```typ\n#import \"@local/lilaq:0.3.0\" as lq\n// #import \"@preview/lilaq:0.2.0\" as lq\n\n#let f(x) = calc.tan(20deg) * x + 34\n\n#set lq.style(stroke: black, fill: white) // Now it's not needed with cycle.\n#set lq.mark(stroke: black, fill: white) // Doesn't work.\n#show: lq.set-tick(stroke: 0pt)\n#show: lq.set-grid(stroke: black)\n#show: lq.set-diagram(cycle: (\n  it => {\n    set lq.mark(stroke: black, fill: white)\n    it\n  },\n))\n#let lq-rect = lq.rect.with(stroke: black, fill: white)\n\n#let y-max = 400\n#let x-max = 640\n#lq.diagram(\n  width: 15cm,\n  height: 15cm * y-max / x-max,\n  ylim: (0, y-max),\n  xlim: (0, x-max),\n  yaxis: (ticks: range(y-max + 1, step: 80), subticks: 1),\n  xaxis: (ticks: range(x-max + 1, step: 80), subticks: 1),\n  grid: (stroke-sub: 0.5pt),\n\n  let xs = lq.linspace(0, 590),\n  lq.plot(xs, xs.map(f), stroke: 0.5pt, mark: none),\n\n  let xs = (100, 200, 300, 400),\n  lq.scatter(xs, xs.map(f), size: 6mm),\n\n  lq.scatter((320,), (138,), size: 3mm),\n\n  lq-rect(400, 320, width: 160, height: 80),\n)\n```\n\n</details>\n\nFor some reason, adding empty cycle closure sets plot line color to black. Is this a backup style? Though if I use `set lq.style(stroke: green)`, then it does still change the plot line color. So... is this a bug that `lq.style` works globally, but `lq.mark` doesn't?\n\n\n<details><summary>Solution (for now)</summary>\n\n```typ\n#import \"@local/lilaq:0.3.0\" as lq // @preview/lilaq:0.3.1/0.4.0\n// #import \"@preview/lilaq:0.2.0\" as lq\n\n#let f(x) = calc.tan(20deg) * x + 34\n\n#let lq-rect = lq.rect.with(stroke: black, fill: white) // Separately, but might work with lq.style in future.\n#set lq.style(stroke: black) // With cycle defaults to black, but can be set to other color.\n#show: lq.set-grid(stroke: black)\n#show: lq.set-diagram(cycle: (\n  it => {\n    set lq.mark(stroke: black, fill: white) // For scatter. In future can be used globally.\n    it\n  },\n))\n\n#let y-max = 400\n#let x-max = 640\n#lq.diagram(\n  width: 15cm,\n  height: 15cm * y-max / x-max,\n  ylim: (0, y-max),\n  xlim: (0, x-max),\n  yaxis: (tick-distance: 80, subticks: 1),\n  xaxis: (tick-distance: 80, subticks: 1),\n  grid: (stroke-sub: 0.5pt),\n\n  let xs = lq.linspace(0, 590),\n  lq.plot(xs, xs.map(f), stroke: 0.5pt, mark: none),\n\n  let xs = (100, 200, 300, 400),\n  lq.scatter(xs, xs.map(f), size: 6mm),\n\n  lq.scatter((320,), (138,), size: 3mm),\n\n  lq-rect(400, 320, width: 160, height: 80),\n)\n```\n\n</details>",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 26,
      "score": 10.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12299,
      "post_number": 8,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-05-11T20:02:29.338Z",
      "updated_at": "2025-05-11T20:02:29.338Z",
      "cooked": "<p>yes, that was what I was referring to earlier ‚àí they don‚Äôt really work globally because they are just aliases for built-in types and I cheated a little to make it work. I was a little suprised that <code>lq.style</code> actually works but it makes sense because I don‚Äôt touch that one.</p>\n<p>This is also why it default to black. The default ellipse stroke is black, I think.</p>",
      "raw": "yes, that was what I was referring to earlier ‚àí they don't really work globally because they are just aliases for built-in types and I cheated a little to make it work. I was a little suprised that `lq.style` actually works but it makes sense because I don't touch that one. \n\nThis is also why it default to black. The default ellipse stroke is black, I think.",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 12307,
      "post_number": 9,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T20:13:01.472Z",
      "updated_at": "2025-05-11T20:13:13.525Z",
      "cooked": "<p>So‚Ä¶ Should the docs say that you shouldn‚Äôt use global mark/style set rule? For mark, it just doesn‚Äôt work, so to avoid confusion both shouldn‚Äôt be used globally.</p>",
      "raw": "So... Should the docs say that you shouldn't use global mark/style set rule? For mark, it just doesn't work, so to avoid confusion both shouldn't be used globally.",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12309,
      "post_number": 10,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-05-11T20:14:48.022Z",
      "updated_at": "2025-05-11T20:14:48.022Z",
      "cooked": "<p>I want them to be used globally eventually. It‚Äôs just a limitation of the current implementation (due to the sad fact that user-defined types still don‚Äôt exist).</p>",
      "raw": "I want them to be used globally eventually. It's just a limitation of the current implementation (due to the sad fact that user-defined types still don't exist).",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 19.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    }
  ],
  "scraped_at": "2025-06-10T09:48:00.906330"
}
{
  "topic_metadata": {
    "id": 4033,
    "title": "How to generate sections and content from csv?",
    "slug": "how-to-generate-sections-and-content-from-csv",
    "posts_count": 4,
    "created_at": "2025-05-11T18:14:43.745Z",
    "last_posted_at": "2025-05-13T18:58:43.745Z",
    "views": 64,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 738
  },
  "posts": [
    {
      "id": 12282,
      "post_number": 1,
      "username": "Michael",
      "name": "",
      "created_at": "2025-05-11T18:14:43.915Z",
      "updated_at": "2025-05-13T18:57:13.990Z",
      "cooked": "<p>For an event schedule I‚Äôd like to take date from a csv table and generate sections by location and within those sections list all events ordered by date.</p>\n<p>Suppose I have the following .csv:</p>\n<pre data-code-wrap=\"csv\"><code class=\"lang-csv\">title,date,city\nEvent1,2025-10-11T19:00,\"Amsterdam\"\nEvent2,2025-10-01T15:00,\"Amsterdam\"\nEvent3,2025-10-17T19:00,\"New York\"\nEvent4,2025-10-01T19:30,\"New York\"\n...\n</code></pre>\n<p>I‚Äôd like to get a document like this</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= Amsterdam\n== 01/10/2025\n- Event2\n- ...\n- \n== 11/10/2025\n- Event 1\n- ...\n\n= New York\n...\n</code></pre>\n<p>I‚Äôve already imported the csv and parsed the times into datetime objects so I have an array of dicts like this:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">events\n\n(\n  (\n    title: \"Event2\",\n    date: datetime(\n      year: 2025,\n      month: 10,\n      day: 1,\n      hour: 15,\n      minute: 0,\n      second: 0,\n    ),\n    city: \"Amsterdam\",\n  ),\n  (\n  title: \"Event4\",\n...\n)\n</code></pre>\n<p>From this also was able to generate an array of unique cities</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let cities = ()\n#for event in events{\n  cities.push(event.at(\"city\"))\n}\n#let unique_cities = cities.dedup().sorted()\n</code></pre>\n<p>and use it to generate the city sections</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#for unique_city in unique_cities{\n\n  set page(...\n  )\n\n  // Section Heading for each city\n  align(center, text(heading(unique_city), size: 1.5em))\n\n// Get events for unique city and show them using the event template\n\nfor (title, date, city) in events {\n  if city == unique_city{\n  show: event.with(title: title, date: date, city: city)}\n}\n\n}\n</code></pre>\n<p>Now I am stuck at filtering events by city and then generating subsections for unique dates within a city. Also I suspect I‚Äôm doing this all in a very roundabout way. If someone could point me in the right direction I‚Äôd be grateful.</p>",
      "raw": "For an event schedule I'd like to take date from a csv table and generate sections by location and within those sections list all events ordered by date.\n\nSuppose I have the following .csv:\n\n````csv \ntitle,date,city\nEvent1,2025-10-11T19:00,\"Amsterdam\"\nEvent2,2025-10-01T15:00,\"Amsterdam\"\nEvent3,2025-10-17T19:00,\"New York\"\nEvent4,2025-10-01T19:30,\"New York\"\n...\n````\n\nI'd like to get a document like this\n\n\n```typ\n= Amsterdam\n== 01/10/2025\n- Event2\n- ...\n- \n== 11/10/2025\n- Event 1\n- ...\n\n= New York\n...\n```\n\nI've already imported the csv and parsed the times into datetime objects so I have an array of dicts like this:\n\n\n\n```typc\nevents\n\n(\n  (\n    title: \"Event2\",\n    date: datetime(\n      year: 2025,\n      month: 10,\n      day: 1,\n      hour: 15,\n      minute: 0,\n      second: 0,\n    ),\n    city: \"Amsterdam\",\n  ),\n  (\n  title: \"Event4\",\n...\n)\n```\n\nFrom this also was able to generate an array of unique cities \n\n```typ\n#let cities = ()\n#for event in events{\n  cities.push(event.at(\"city\"))\n}\n#let unique_cities = cities.dedup().sorted()\n```\nand use it to generate the city sections\n\n```typ\n#for unique_city in unique_cities{\n\n  set page(...\n  )\n\n  // Section Heading for each city\n  align(center, text(heading(unique_city), size: 1.5em))\n\n// Get events for unique city and show them using the event template\n\nfor (title, date, city) in events {\n  if city == unique_city{\n  show: event.with(title: title, date: date, city: city)}\n}\n\n}\n```\n\nNow I am stuck at filtering events by city and then generating subsections for unique dates within a city. Also I suspect I'm doing this all in a very roundabout way. If someone could point me in the right direction I'd be grateful.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 29.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1569
    },
    {
      "id": 12285,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-05-11T18:45:42.957Z",
      "updated_at": "2025-05-11T18:55:46.203Z",
      "cooked": "<p>I would create a nested dictionary where the first key is each city and it‚Äôs value is another dict with key the date and value an array of cities:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let cities-and-events = (:)\n\n#for (event, date, city) in csv(\"data.csv\").slice(1) {\n  let city-map = cities-and-events.at(city, default: (:))\n  let date-events = city-map.at(date, default: ())\n  city-map.insert(date, date-events + (event,))\n  cities-and-events.insert(city, city-map)\n}\n</code></pre>\n<details>\n<summary>\nSummary</summary>\n<pre><code class=\"lang-auto\">(\n  Amsterdam: (\n    \"2025-10-11T19:00\": (\"Event1\",),\n    \"2025-10-01T15:00\": (\"Event2\",),\n  ),\n  \"New York\": (\n    \"2025-10-17T19:00\": (\"Event3\",),\n    \"2025-10-01T19:30\": (\"Event4\",),\n  ),\n)\n</code></pre>\n<p>The output would look like this</p>\n</details>\n<p>Then you can iterate through the dictionaries and style/format them as you wish:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#for (city, event-dict) in cities-and-events.pairs() [\n  #heading(level: 1, city)  // or `= #city`\n  \n  #for (date, event) in event-dict.pairs() [\n    #heading(level: 2, date)\n    #list(..event)\n  ]\n  \n]\n</code></pre>\n<details>\n<summary>\nSummary</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/6ecde1d8d1194c018c4ce8408eab353b5f9a9f53.png\" data-download-href=\"https://forum.typst.app/uploads/default/6ecde1d8d1194c018c4ce8408eab353b5f9a9f53\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/6/6ecde1d8d1194c018c4ce8408eab353b5f9a9f53_2_308x499.png\" alt=\"image\" data-base62-sha1=\"fOdCAlMvEFxkRuttkJFXrstDqYb\" width=\"308\" height=\"499\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/6/6ecde1d8d1194c018c4ce8408eab353b5f9a9f53_2_308x499.png, https://forum.typst.app/uploads/default/original/2X/6/6ecde1d8d1194c018c4ce8408eab353b5f9a9f53.png 1.5x, https://forum.typst.app/uploads/default/original/2X/6/6ecde1d8d1194c018c4ce8408eab353b5f9a9f53.png 2x\" data-dominant-color=\"ECECEC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">328√ó531 42.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nOutput</p>\n</details>\n<p>I‚Äôll leave the parsing of the dates up to you since it seems you already managed to do that. Note that my solution <a href=\"https://en.wikipedia.org/wiki/FIFO_(computing_and_electronics)\">does not sort the inputs</a></p>",
      "raw": "I would create a nested dictionary where the first key is each city and it's value is another dict with key the date and value an array of cities:\n\n```typst\n#let cities-and-events = (:)\n\n#for (event, date, city) in csv(\"data.csv\").slice(1) {\n  let city-map = cities-and-events.at(city, default: (:))\n  let date-events = city-map.at(date, default: ())\n  city-map.insert(date, date-events + (event,))\n  cities-and-events.insert(city, city-map)\n}\n```\n\n[details=\"Summary\"]\n```\n(\n  Amsterdam: (\n    \"2025-10-11T19:00\": (\"Event1\",),\n    \"2025-10-01T15:00\": (\"Event2\",),\n  ),\n  \"New York\": (\n    \"2025-10-17T19:00\": (\"Event3\",),\n    \"2025-10-01T19:30\": (\"Event4\",),\n  ),\n)\n```\nThe output would look like this\n[/details]\n\nThen you can iterate through the dictionaries and style/format them as you wish:\n```typst\n#for (city, event-dict) in cities-and-events.pairs() [\n  #heading(level: 1, city)  // or `= #city`\n  \n  #for (date, event) in event-dict.pairs() [\n    #heading(level: 2, date)\n    #list(..event)\n  ]\n  \n]\n```\n\n[details=\"Summary\"]\n![image|308x499](upload://fOdCAlMvEFxkRuttkJFXrstDqYb.png)\nOutput\n[/details]\n\nI'll leave the parsing of the dates up to you since it seems you already managed to do that. Note that my solution [does not sort the inputs](https://en.wikipedia.org/wiki/FIFO_(computing_and_electronics))",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 4.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 12287,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T18:54:22.111Z",
      "updated_at": "2025-05-14T21:51:09.102Z",
      "cooked": "<p>Hello. This is an interesting problem. The only problem is sorting, though here it‚Äôs not that hard, since you can use default lexicographic sort for any data. But if you have sorted rows, then you can omit it. The only missing part is <code>group-by()</code>, which isn‚Äôt that hard to implement:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let group-by(data, key) = {\n  let grouped-data = (:)\n  for row in data {\n    let value = row.at(key)\n    _ = row.remove(key)\n    grouped-data += ((value): grouped-data.at(value, default: ()) + (row,))\n  }\n  grouped-data\n}\n\n\n#let file = ```csv\ntitle,date,city\nEvent1,2025-10-11T19:00,\"Amsterdam\"\nEvent2,2025-10-01T15:00,\"Amsterdam\"\nEvent3,2025-10-17T19:00,\"New York\"\nEvent4,2025-10-01T19:30,\"New York\"\nEvent5,2025-10-01T19:30,\"New York\"\n```.text\n\n#let data = csv(bytes(file), row-type: dictionary)\n#let per-city-data = group-by(data.sorted(key: it =&gt; it.city), \"city\")\n#let per-city-per-date-data = for (city, data) in per-city-data {\n  ((city): group-by(data.sorted(key: it =&gt; (it.date, it.title)), \"date\"))\n}\n\n#for (city, per-date-events) in per-city-per-date-data {\n  heading(city)\n  for (date, events) in per-date-events [\n    == #date\n    #list(..events.map(x =&gt; x.values()).flatten())\n  ]\n}\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/b/b5abdecd88ee797d78ae71ae3e410aa911f32b1b.png\" data-download-href=\"https://forum.typst.app/uploads/default/b5abdecd88ee797d78ae71ae3e410aa911f32b1b\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/b/b5abdecd88ee797d78ae71ae3e410aa911f32b1b_2_132x250.png\" alt=\"image\" data-base62-sha1=\"pV8EsFZESda1C749AFuakwn7R4n\" width=\"132\" height=\"250\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/b/b5abdecd88ee797d78ae71ae3e410aa911f32b1b_2_132x250.png, https://forum.typst.app/uploads/default/optimized/2X/b/b5abdecd88ee797d78ae71ae3e410aa911f32b1b_2_198x375.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/b/b5abdecd88ee797d78ae71ae3e410aa911f32b1b_2_264x500.png 2x\" data-dominant-color=\"1F1F1F\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">333√ó627 37.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>At <code>== #date</code> you can format the date however you want. See <a href=\"https://github.com/typst/typst/issues/4107\" class=\"inline-onebox\">Add support for parsing datetimes from strings ¬∑ Issue #4107 ¬∑ typst/typst ¬∑ GitHub</a>.</p>",
      "raw": "Hello. This is an interesting problem. The only problem is sorting, though here it's not that hard, since you can use default lexicographic sort for any data. But if you have sorted rows, then you can omit it. The only missing part is `group-by()`, which isn't that hard to implement:\n\n```typ\n#let group-by(data, key) = {\n  let grouped-data = (:)\n  for row in data {\n    let value = row.at(key)\n    _ = row.remove(key)\n    grouped-data += ((value): grouped-data.at(value, default: ()) + (row,))\n  }\n  grouped-data\n}\n\n\n#let file = ```csv\ntitle,date,city\nEvent1,2025-10-11T19:00,\"Amsterdam\"\nEvent2,2025-10-01T15:00,\"Amsterdam\"\nEvent3,2025-10-17T19:00,\"New York\"\nEvent4,2025-10-01T19:30,\"New York\"\nEvent5,2025-10-01T19:30,\"New York\"\n```.text\n\n#let data = csv(bytes(file), row-type: dictionary)\n#let per-city-data = group-by(data.sorted(key: it => it.city), \"city\")\n#let per-city-per-date-data = for (city, data) in per-city-data {\n  ((city): group-by(data.sorted(key: it => (it.date, it.title)), \"date\"))\n}\n\n#for (city, per-date-events) in per-city-per-date-data {\n  heading(city)\n  for (date, events) in per-date-events [\n    == #date\n    #list(..events.map(x => x.values()).flatten())\n  ]\n}\n```\n\n![image|265x500, 50%](upload://pV8EsFZESda1C749AFuakwn7R4n.png)\n\nAt `== #date` you can format the date however you want. See https://github.com/typst/typst/issues/4107.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 104.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12402,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-05-13T18:58:43.745Z",
      "updated_at": "2025-05-13T18:58:43.745Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/michael\">@Michael</a>, don‚Äôt forget to tick <img src=\"https://forum.typst.app/images/emoji/apple/ballot_box_with_check.png?v=12\" title=\":ballot_box_with_check:\" class=\"emoji\" alt=\":ballot_box_with_check:\" loading=\"lazy\" width=\"20\" height=\"20\"> one of the responses if you got a satisfying answer. The answer you choose should usually be the response that you found most correct/helpful/comprehensive for the question you asked. If something is missing, please let us know what so we can resolve your issue. Thanks!</p>",
      "raw": "Hi @Michael, don‚Äôt forget to tick :ballot_box_with_check: one of the responses if you got a satisfying answer. The answer you choose should usually be the response that you found most correct/helpful/comprehensive for the question you asked. If something is missing, please let us know what so we can resolve your issue. Thanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:48:00.185422"
}
{
  "topic_metadata": {
    "id": 4035,
    "title": "How to remove/hide the ticks on the right and top spines of diagram in Lilaq?",
    "slug": "how-to-remove-hide-the-ticks-on-the-right-and-top-spines-of-diagram-in-lilaq",
    "posts_count": 3,
    "created_at": "2025-05-11T20:02:54.988Z",
    "last_posted_at": "2025-05-11T20:11:15.498Z",
    "views": 31,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Mc-Zen",
    "tags": [
      "lilaq"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 121
  },
  "posts": [
    {
      "id": 12300,
      "post_number": 1,
      "username": "jasonychoi",
      "name": "",
      "created_at": "2025-05-11T20:02:55.150Z",
      "updated_at": "2025-05-11T20:02:55.150Z",
      "cooked": "<p>Is it possible to remove or hide the ticks and subticks on the right and top spines, as highlighted below? One step further, can I remove/hide the right and top spines together with the ticks?</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/7/77e937c01a6dd43ace5a269d61806993d7675a3f.png\" data-download-href=\"https://forum.typst.app/uploads/default/77e937c01a6dd43ace5a269d61806993d7675a3f\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/7/77e937c01a6dd43ace5a269d61806993d7675a3f_2_641x499.png\" alt=\"image\" data-base62-sha1=\"h6Mu7gFZwwoEmkBWZA2U3RzuKh9\" width=\"641\" height=\"499\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/7/77e937c01a6dd43ace5a269d61806993d7675a3f_2_641x499.png, https://forum.typst.app/uploads/default/original/2X/7/77e937c01a6dd43ace5a269d61806993d7675a3f.png 1.5x, https://forum.typst.app/uploads/default/original/2X/7/77e937c01a6dd43ace5a269d61806993d7675a3f.png 2x\" data-dominant-color=\"F6F2F2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">744√ó580 43.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Is it possible to remove or hide the ticks and subticks on the right and top spines, as highlighted below? One step further, can I remove/hide the right and top spines together with the ticks?\n\n![image|641x499](upload://h6Mu7gFZwwoEmkBWZA2U3RzuKh9.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 28.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1580
    },
    {
      "id": 12301,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T20:04:48.030Z",
      "updated_at": "2025-05-11T20:05:56.251Z",
      "cooked": "<p>Hello. You can use <a href=\"https://lilaq.org/docs/reference/axis#mirror\"><code>axis.mirror</code></a> for that. Set it to <code>false</code>. You can also look at <a href=\"https://lilaq.org/docs/examples/schoolbook-style\" class=\"inline-onebox\">Schoolbook style ‚àí Lilaq</a>.</p>",
      "raw": "Hello. You can use [`axis.mirror`](https://lilaq.org/docs/reference/axis#mirror) for that. Set it to `false`. You can also look at https://lilaq.org/docs/examples/schoolbook-style.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 16,
      "score": 23.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12306,
      "post_number": 3,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-05-11T20:11:15.498Z",
      "updated_at": "2025-05-11T20:11:50.889Z",
      "cooked": "<p>The relevant tutorial is this one: <a href=\"https://lilaq.org/docs/tutorials/axis#placement-and-mirrors\" rel=\"noopener nofollow ugc\">Axis configuration ‚àí Lilaq (placement and mirrors)</a></p>\n<p>If you want to hide it with spines and everything then use <code>mirror: false</code> as <a class=\"mention\" href=\"/u/andrew\">@Andrew</a> wrote. If you want to keep the spines, use <code>mirror: (ticks: false)</code>.</p>",
      "raw": "The relevant tutorial is this one: [Axis configuration ‚àí Lilaq (placement and mirrors)](https://lilaq.org/docs/tutorials/axis#placement-and-mirrors)\n\nIf you want to hide it with spines and everything then use `mirror: false` as @Andrew wrote. If you want to keep the spines, use `mirror: (ticks: false)`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 8.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 9
    }
  ],
  "scraped_at": "2025-06-10T09:47:59.485236"
}
{
  "topic_metadata": {
    "id": 4044,
    "title": "How to distribute column widths equally for specific rows in a table?",
    "slug": "how-to-distribute-column-widths-equally-for-specific-rows-in-a-table",
    "posts_count": 9,
    "created_at": "2025-05-12T10:09:51.993Z",
    "last_posted_at": "2025-05-13T22:09:42.060Z",
    "views": 111,
    "like_count": 7,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Andrew",
    "tags": [
      "tables"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 2345
  },
  "posts": [
    {
      "id": 12329,
      "post_number": 1,
      "username": "BigBigi",
      "name": "BigBigi",
      "created_at": "2025-05-12T10:09:52.138Z",
      "updated_at": "2025-05-14T21:39:16.852Z",
      "cooked": "<p>Hi everyone,</p>\n<p>I‚Äôm trying to create a taxonomy table in Typst that has two main parts per row:</p>\n<ol>\n<li>A <strong>dimension</strong> column on the left: same layout for every row.</li>\n<li>A <strong>characteristics</strong> section on the right: varies per row in terms of how many columns are needed.</li>\n</ol>\n<p>I am trying to achieve that the dimension column should keep its width automatically based on the text. For the characteristic columns, the remaining space should be equally distributed for each row.</p>\n<p>In Word, it‚Äôs quite simple:</p>\n<ul>\n<li>Create a table with the max number of columns,</li>\n<li>Merge any extra cells in rows with fewer characteristics,</li>\n<li>Select the relevant cells and click ‚ÄúDistribute Columns‚Äù. Word automatically spreads the content evenly across the available space. Here is how it should look (the relevant part is marked red):<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/28466c679646e26603ad9004b8a93321be10f787.png\" data-download-href=\"https://forum.typst.app/uploads/default/28466c679646e26603ad9004b8a93321be10f787\" title=\"Screenshot 2025-05-12 120657\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/28466c679646e26603ad9004b8a93321be10f787_2_690x258.png\" alt=\"Screenshot 2025-05-12 120657\" data-base62-sha1=\"5KhYMyZxxfVGX11a7Bfczb1wziL\" width=\"690\" height=\"258\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/28466c679646e26603ad9004b8a93321be10f787_2_690x258.png, https://forum.typst.app/uploads/default/optimized/2X/2/28466c679646e26603ad9004b8a93321be10f787_2_1035x387.png 1.5x, https://forum.typst.app/uploads/default/original/2X/2/28466c679646e26603ad9004b8a93321be10f787.png 2x\" data-dominant-color=\"D9D1D1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-05-12 120657</span><span class=\"informations\">1310√ó490 50.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></li>\n</ul>\n<p>I‚Äôd like to replicate this behavior in Typst but I am a new user. I‚Äôve experimented with <code>table()</code>, but I‚Äôm struggling to automatically size the first (dimension) column and then <strong>equally divide</strong> the remaining space per row based on how many characteristic cells exist in that row. Also, some cells use rotated (90¬∞) text, which adds to the layout complexity.</p>\n<p>Is there a way to:</p>\n<ul>\n<li>Use <code>auto</code> width for the first column,</li>\n<li>Dynamically calculate and distribute the remaining width across a variable number of columns per row?</li>\n</ul>\n<p>Here is a simplified example of what I‚Äôm currently working with:</p>\n<pre><code class=\"lang-auto\">#show table: set text(9pt)\n#pad(x: -3.5em,\n    table(\n        columns: 8,\n        align: center + horizon,\n        stroke: 0.5pt,\n        table.cell(colspan: 3, fill: black, text([*Dimension*], fill: white)),\n        table.vline(start: 1, stroke: 1pt),\n        table.cell(colspan: 5, fill: black, text([*Characteristic*], fill: white)),\n        table.cell(rowspan: 6, rotate(-90deg, reflow: true,[Technical])),\n        table.cell(rowspan: 3, rotate(-90deg, reflow: true,[Interaction])),\n        [*Input*],\n        [Text],\n        [Image],\n        [Audio],\n        table.cell(colspan: 2)[Video],\n        [*Output*],\n        [Text],\n        [Image],\n        [Audio],\n        [Video],\n        [3D-Model],\n        [*Interface*],\n        [Web],\n        [Mobile],\n        [Desktop],\n        [API],\n        [Integrated],\n        table.cell(rowspan: 2, rotate(-90deg, reflow: true,[Work])),\n        [*Type of task*],\n        [Information processing],\n        [Problem solving],\n        [Social],\n        table.cell(colspan: 2)[Physical],\n        [*Method*],\n        [Autonom],\n        [Teamwork],\n        table.cell(colspan: 3)[Routine],\n        table.cell(rowspan: 1, rotate(-90deg, reflow: true,[Use cases])),\n        [*AI use*],\n        [Generation of text],\n        [Programming],\n        [Translation],\n        [Research and education],\n        [Inspiration and creativity],\n    )\n)\n</code></pre>\n<p>This would be the current output:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/c/c00f0a2a9c4bbc18251efb0577842b244f7076fe.png\" data-download-href=\"https://forum.typst.app/uploads/default/c00f0a2a9c4bbc18251efb0577842b244f7076fe\" title=\"Screenshot 2025-05-12 120514\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/c/c00f0a2a9c4bbc18251efb0577842b244f7076fe_2_690x231.png\" alt=\"Screenshot 2025-05-12 120514\" data-base62-sha1=\"rp1TB9vbdMSp8dovzE2C1TjSNm6\" width=\"690\" height=\"231\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/c/c00f0a2a9c4bbc18251efb0577842b244f7076fe_2_690x231.png, https://forum.typst.app/uploads/default/original/2X/c/c00f0a2a9c4bbc18251efb0577842b244f7076fe.png 1.5x, https://forum.typst.app/uploads/default/original/2X/c/c00f0a2a9c4bbc18251efb0577842b244f7076fe.png 2x\" data-dominant-color=\"E0E0E0\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-05-12 120514</span><span class=\"informations\">1002√ó336 30.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Any suggestions or examples would be greatly appreciated! Thanks in advance.</p>",
      "raw": "Hi everyone,\n\nI'm trying to create a taxonomy table in Typst that has two main parts per row:\n\n1. A **dimension** column on the left: same layout for every row.\n2. A **characteristics** section on the right: varies per row in terms of how many columns are needed.\n\nI am trying to achieve that the dimension column should keep its width automatically based on the text. For the characteristic columns, the remaining space should be equally distributed for each row.\n\n\nIn Word, it's quite simple:\n* Create a table with the max number of columns,\n* Merge any extra cells in rows with fewer characteristics,\n* Select the relevant cells and click ‚ÄúDistribute Columns‚Äù. Word automatically spreads the content evenly across the available space. Here is how it should look (the relevant part is marked red):\n![Screenshot 2025-05-12 120657|690x258](upload://5KhYMyZxxfVGX11a7Bfczb1wziL.png)\n\n\n\nI‚Äôd like to replicate this behavior in Typst but I am a new user. I‚Äôve experimented with `table()`, but I‚Äôm struggling to automatically size the first (dimension) column and then **equally divide** the remaining space per row based on how many characteristic cells exist in that row. Also, some cells use rotated (90¬∞) text, which adds to the layout complexity.\n\nIs there a way to:\n\n* Use `auto` width for the first column,\n* Dynamically calculate and distribute the remaining width across a variable number of columns per row?\n\nHere is a simplified example of what I'm currently working with:\n\n\n```\n#show table: set text(9pt)\n#pad(x: -3.5em,\n    table(\n        columns: 8,\n        align: center + horizon,\n        stroke: 0.5pt,\n        table.cell(colspan: 3, fill: black, text([*Dimension*], fill: white)),\n        table.vline(start: 1, stroke: 1pt),\n        table.cell(colspan: 5, fill: black, text([*Characteristic*], fill: white)),\n        table.cell(rowspan: 6, rotate(-90deg, reflow: true,[Technical])),\n        table.cell(rowspan: 3, rotate(-90deg, reflow: true,[Interaction])),\n        [*Input*],\n        [Text],\n        [Image],\n        [Audio],\n        table.cell(colspan: 2)[Video],\n        [*Output*],\n        [Text],\n        [Image],\n        [Audio],\n        [Video],\n        [3D-Model],\n        [*Interface*],\n        [Web],\n        [Mobile],\n        [Desktop],\n        [API],\n        [Integrated],\n        table.cell(rowspan: 2, rotate(-90deg, reflow: true,[Work])),\n        [*Type of task*],\n        [Information processing],\n        [Problem solving],\n        [Social],\n        table.cell(colspan: 2)[Physical],\n        [*Method*],\n        [Autonom],\n        [Teamwork],\n        table.cell(colspan: 3)[Routine],\n        table.cell(rowspan: 1, rotate(-90deg, reflow: true,[Use cases])),\n        [*AI use*],\n        [Generation of text],\n        [Programming],\n        [Translation],\n        [Research and education],\n        [Inspiration and creativity],\n    )\n)\n```\nThis would be the current output:\n![Screenshot 2025-05-12 120514|690x231](upload://rp1TB9vbdMSp8dovzE2C1TjSNm6.png)\n\nAny suggestions or examples would be greatly appreciated! Thanks in advance.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 154.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1583
    },
    {
      "id": 12339,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-05-12T12:48:18.127Z",
      "updated_at": "2025-05-12T13:06:28.729Z",
      "cooked": "<p>You could use a grid for each row of the column of distributed cells. You would then treat everything as a single cell from the perspective of the table. This allows you to distribute the cells without measuring anything (other than the number of cells/elements in each row).</p>\n<p>Some notes/warnings and things I have noticed so far:</p>\n<ol>\n<li>You have to share the style of the table with the grid inside the function <code>distributed-cells()</code>. This is not an issue as long as you use variables for align, stroke, inset etc‚Ä¶</li>\n<li>The outer stroke of the distribute cells is currently drawn by the table and the grid. I don‚Äôt know if my brain is playing tricks on me here, but it does look like the lines are too thick. If that is bothering you as well, you can only draw the inner lines in the grid.</li>\n<li>Currently the table will collapse if your page width is set to auto since both the column widths inside the grid and the width of the column ‚ÄúCharacteristic‚Äù in the table use the fractional length <code>1fr</code>. This will not be an issue if your paper size is set to A4 or if you are wrapping the table in a block to specify the width.</li>\n</ol>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let distribute-cells(..cells) = table.cell(inset: 0pt,\n  grid(\n    columns: (1fr,) * cells.pos().len(),\n    align: center + horizon,\n    stroke: 1pt,\n    inset: 5pt,\n    ..cells,\n  )\n)\n\n#table(\n  columns: (auto, 1fr),\n  align: center + horizon,\n  stroke: 1pt,\n  table.header(\"Dimension\", \"Characteristic\"),\n  \"Input\", distribute-cells(\"Text\", \"Image\", \"Audio\", \"Video\"),\n  \"Output\", distribute-cells(\"Text\", \"Image\", \"Audio\", \"Video\", \"3D-Model\"),\n  \"Type of task\", distribute-cells(\"Information processing\", \"Problem solving\", \"Social\", \"Physical\"),\n)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/b/b44a972cbc94716c5da19e243f3c3c56b028c115.png\" data-download-href=\"https://forum.typst.app/uploads/default/b44a972cbc94716c5da19e243f3c3c56b028c115\" title=\"forum_4044_distribute-columns-in-table\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/b/b44a972cbc94716c5da19e243f3c3c56b028c115_2_690x167.png\" alt=\"forum_4044_distribute-columns-in-table\" data-base62-sha1=\"pIVKKWeWEhANT8QabP3X6y17f9j\" width=\"690\" height=\"167\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/b/b44a972cbc94716c5da19e243f3c3c56b028c115_2_690x167.png, https://forum.typst.app/uploads/default/original/2X/b/b44a972cbc94716c5da19e243f3c3c56b028c115.png 1.5x, https://forum.typst.app/uploads/default/original/2X/b/b44a972cbc94716c5da19e243f3c3c56b028c115.png 2x\" data-dominant-color=\"E6E6E6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">forum_4044_distribute-columns-in-table</span><span class=\"informations\">850√ó206 75.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "You could use a grid for each row of the column of distributed cells. You would then treat everything as a single cell from the perspective of the table. This allows you to distribute the cells without measuring anything (other than the number of cells/elements in each row).\n\nSome notes/warnings and things I have noticed so far:\n1. You have to share the style of the table with the grid inside the function `distributed-cells()`. This is not an issue as long as you use variables for align, stroke, inset etc...\n2. The outer stroke of the distribute cells is currently drawn by the table and the grid. I don't know if my brain is playing tricks on me here, but it does look like the lines are too thick. If that is bothering you as well, you can only draw the inner lines in the grid.\n3. Currently the table will collapse if your page width is set to auto since both the column widths inside the grid and the width of the column \"Characteristic\" in the table use the fractional length `1fr`. This will not be an issue if your paper size is set to A4 or if you are wrapping the table in a block to specify the width.\n\n```typ\n#let distribute-cells(..cells) = table.cell(inset: 0pt,\n  grid(\n    columns: (1fr,) * cells.pos().len(),\n    align: center + horizon,\n    stroke: 1pt,\n    inset: 5pt,\n    ..cells,\n  )\n)\n\n#table(\n  columns: (auto, 1fr),\n  align: center + horizon,\n  stroke: 1pt,\n  table.header(\"Dimension\", \"Characteristic\"),\n  \"Input\", distribute-cells(\"Text\", \"Image\", \"Audio\", \"Video\"),\n  \"Output\", distribute-cells(\"Text\", \"Image\", \"Audio\", \"Video\", \"3D-Model\"),\n  \"Type of task\", distribute-cells(\"Information processing\", \"Problem solving\", \"Social\", \"Physical\"),\n)\n```\n\n![forum_4044_distribute-columns-in-table|690x167](upload://pIVKKWeWEhANT8QabP3X6y17f9j.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 18,
      "score": 23.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 12340,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-12T13:07:12.721Z",
      "updated_at": "2025-05-12T13:07:12.721Z",
      "cooked": "<p>Hello. Have you looked at <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>?</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p>If your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ ‚Ä¶ ````. It will then look like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n</code></pre>\n<p>If you need to highlight a code or math mode snippet instead, the language tags <code>typc</code> and <code>typm</code> do that, respectively.</p>\n</blockquote>\n</aside>",
      "raw": "Hello. Have you looked at https://forum.typst.app/t/how-to-post-in-the-questions-category/11?\n\n[quote=\"reknih, post:1, topic:11\"]\nIf your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ ... ````. It will then look like this:\n\n```typ\n#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n```\n\nIf you need to highlight a code or math mode snippet instead, the language tags `typc` and `typm` do that, respectively.\n[/quote]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12342,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-12T13:38:11.634Z",
      "updated_at": "2025-05-13T22:27:59.161Z",
      "cooked": "<p>Since table cell dimensions are soft, by default you can‚Äôt fill cell‚Äôs full height by stretching inner content, as it will just stretch the parent cell. You can provide it a point of reference to patch this, which is a compromise, but the implementation is very simple:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(margin: 1cm)\n#show table: set text(9pt)\n\n#let sideways = rotate.with(-90deg, reflow: true)\n#let subtable(tallest: none, ..args) = table.cell(inset: 0pt, context {\n  let rows = auto\n  if tallest != none { rows = measure(tallest).height + table.inset * 2 }\n  layout(size =&gt; table(\n    columns: (1fr,) * args.pos().len(),\n    rows: rows,\n    table.hline(stroke: 0pt),\n    ..args,\n    table.hline(stroke: 0pt),\n  ))\n})\n\n\n// Will break nested tables, can be fixed with grids.\n// #show table.cell.where(y: 0): strong\n// #show table.cell.where(y: 0): set text(white)\n\n// For nested tables to look the same.\n#set table(align: center + horizon, stroke: 0.5pt)\n\n#table(\n  columns: 4,\n  table.header(\n    table.cell(colspan: 3, fill: black, text(white)[*Dimension*]),\n    table.cell(fill: black, text(white)[*Characteristic*]),\n  ),\n  table.cell(rowspan: 6, sideways[Technical]),\n  table.cell(rowspan: 3, sideways[Interaction]),\n  [*Input*],\n  subtable([Text], [Image], [Audio], [Video]),\n  [*Output*],\n  subtable([Text], [Image], [Audio], [Video], [3D-Model]),\n  [*Interface*],\n  subtable([Web], [Mobile], [Desktop], [API], [Integrated]),\n  table.cell(rowspan: 2, sideways[Work]),\n  [*Type of task*],\n  subtable([Information processing], [Problem solving], [Social], [Physical]),\n  [*Method*],\n  subtable([Autonom], [Teamwork], [Routine]),\n  table.cell(rowspan: 1, sideways[Use cases]),\n  [*AI use*],\n  subtable(\n    tallest: sideways[Use cases],\n    [Generation of text],\n    [Programming],\n    [Translation],\n    [Research and education],\n    [Inspiration and creativity],\n  ),\n)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/6a1f6b2085372ab75dcb0f3f9f421cae58cd8fd1.png\" data-download-href=\"https://forum.typst.app/uploads/default/6a1f6b2085372ab75dcb0f3f9f421cae58cd8fd1\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/6/6a1f6b2085372ab75dcb0f3f9f421cae58cd8fd1_2_690x192.png\" alt=\"image\" data-base62-sha1=\"f8NVo4LNqWeIPoHVK3YBwU0t4BP\" width=\"690\" height=\"192\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/6/6a1f6b2085372ab75dcb0f3f9f421cae58cd8fd1_2_690x192.png, https://forum.typst.app/uploads/default/original/2X/6/6a1f6b2085372ab75dcb0f3f9f421cae58cd8fd1.png 1.5x, https://forum.typst.app/uploads/default/original/2X/6/6a1f6b2085372ab75dcb0f3f9f421cae58cd8fd1.png 2x\" data-dominant-color=\"303030\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">914√ó255 46.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Without <code>tallest</code> point of reference, it will look like this:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/1/19b0fb45fd9b6a094f11312e10fa9bc9b252281e.png\" data-download-href=\"https://forum.typst.app/uploads/default/19b0fb45fd9b6a094f11312e10fa9bc9b252281e\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/1/19b0fb45fd9b6a094f11312e10fa9bc9b252281e_2_690x189.png\" alt=\"image\" data-base62-sha1=\"3Fh7jpX53UZb61onAgJwhCkeeYe\" width=\"690\" height=\"189\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/1/19b0fb45fd9b6a094f11312e10fa9bc9b252281e_2_690x189.png, https://forum.typst.app/uploads/default/original/2X/1/19b0fb45fd9b6a094f11312e10fa9bc9b252281e.png 1.5x, https://forum.typst.app/uploads/default/original/2X/1/19b0fb45fd9b6a094f11312e10fa9bc9b252281e.png 2x\" data-dominant-color=\"313131\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">913√ó251 46.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>This works for width because of point 3 in <a href=\"https://forum.typst.app/t/how-to-distribute-column-widths-equally-for-specific-rows-in-a-table/4044/2\" class=\"inline-onebox\">How to distribute column widths equally for specific rows in a table - #2 by janekfleper</a>.</p>\n<p>But I have a spreadsheet-like document where I want to cross some cells. There is a trick that <a class=\"mention\" href=\"/u/tinger\">@Tinger</a> showed me a long time ago. You can pin cell corners without disturbing it, and then use the concrete location data for absolute anchoring. This way, it becomes trivial to get the current cell‚Äôs height:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let make-label(counter, alignment, n: auto) = {\n  assert(alignment in (top, bottom))\n  let counter-name = repr(counter).split(\"\\\"\").at(1)\n  let alignment-str = repr(alignment)\n  let n = if n == auto { str(counter.get().first()) } else { str(n) }\n  label(counter-name + \".\" + n + \".\" + alignment-str)\n}\n\n#let cell-counter = counter(\"cell-counter\")\n\n#let pin-corner(counter, alignment) = context {\n  place(alignment)[#metadata(none)#make-label(counter, alignment)]\n}\n\n#let pin-top-bottom(counter) = {\n  pin-corner(counter, top)\n  pin-corner(counter, bottom)\n}\n\n#let cross-cell(counter, body, ..args) = table.cell(\n  counter.step() + pin-top-bottom(counter) + body,\n  ..args,\n)\n\n#let get-pinned-corners(counter) = {\n  let cell-inset = if table.cell.inset == auto { 5pt } else { cell.inset }\n  let adjusted-position(pos, alignment) = {\n    (pos.x - page.margin, pos.y - page.margin)\n  }\n  let n = counter.get().first()\n  let (top, bottom) = (top, bottom).map(alignment =&gt; {\n    adjusted-position(\n      locate(make-label(counter, alignment, n: n)).position(),\n      alignment,\n    )\n  })\n  (top.last(), bottom.last())\n}\n</code></pre>\n<p>Now using <code>cross-cell</code> and <code>get-pinned-top-bottom-y</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let subtable(..args) = cross-cell(inset: 0pt, cell-counter, context {\n  let (y1, y2) = get-pinned-top-bottom-y(cell-counter)\n  layout(size =&gt; table(\n    columns: (1fr,) * args.pos().len(),\n    rows: y2 - y1,\n    table.hline(stroke: 0pt),\n    ..args,\n    table.hline(stroke: 0pt),\n  ))\n})\n</code></pre>\n<p>And you get the same result, fully automatically.</p>\n<details><summary>Full example</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(margin: 1cm)\n#show table: set text(9pt)\n\n#let make-label(counter, alignment, n: auto) = {\n  assert(alignment in (top, bottom))\n  let counter-name = repr(counter).split(\"\\\"\").at(1)\n  let alignment-str = repr(alignment)\n  let n = if n == auto { str(counter.get().first()) } else { str(n) }\n  label(counter-name + \".\" + n + \".\" + alignment-str)\n}\n\n#let cell-counter = counter(\"cell-counter\")\n\n#let pin-corner(counter, alignment) = context {\n  place(alignment)[#metadata(none)#make-label(counter, alignment)]\n}\n\n#let pin-top-bottom(counter) = {\n  pin-corner(counter, top)\n  pin-corner(counter, bottom)\n}\n\n#let cross-cell(counter, body, ..args) = table.cell(\n  counter.step() + pin-top-bottom(counter) + body,\n  ..args,\n)\n\n#let get-pinned-top-bottom-y(counter) = {\n  let cell-inset = if table.cell.inset == auto { 5pt } else { cell.inset }\n  let adjusted-position(pos, alignment) = {\n    (pos.x - page.margin, pos.y - page.margin)\n  }\n  let n = counter.get().first()\n  let (top, bottom) = (top, bottom).map(alignment =&gt; {\n    adjusted-position(\n      locate(make-label(counter, alignment, n: n)).position(),\n      alignment,\n    )\n  })\n  (top.last(), bottom.last())\n}\n\n#let sideways = rotate.with(-90deg, reflow: true)\n#let subtable(..args) = cross-cell(inset: 0pt, cell-counter, context {\n  let (y1, y2) = get-pinned-top-bottom-y(cell-counter)\n  layout(size =&gt; table(\n    columns: (1fr,) * args.pos().len(),\n    rows: y2 - y1,\n    table.hline(stroke: 0pt),\n    ..args,\n    table.hline(stroke: 0pt),\n  ))\n})\n\n\n// Will break nested tables, can be fixed with grids.\n// #show table.cell.where(y: 0): strong\n// #show table.cell.where(y: 0): set text(white)\n\n// For nested tables to look the same.\n#set table(align: center + horizon, stroke: 0.5pt)\n\n#table(\n  columns: 4,\n  table.header(\n    table.cell(colspan: 3, fill: black, text(white)[*Dimension*]),\n    table.cell(fill: black, text(white)[*Characteristic*]),\n  ),\n  table.cell(rowspan: 6, sideways[Technical]),\n  table.cell(rowspan: 3, sideways[Interaction]),\n  [*Input*],\n  subtable([Text], [Image], [Audio], [Video]),\n  [*Output*],\n  subtable([Text], [Image], [Audio], [Video], [3D-Model]),\n  [*Interface*],\n  subtable([Web], [Mobile], [Desktop], [API], [Integrated]),\n  table.cell(rowspan: 2, sideways[Work]),\n  [*Type of task*],\n  subtable([Information processing], [Problem solving], [Social], [Physical]),\n  [*Method*],\n  subtable([Autonom], [Teamwork], [Routine]),\n  table.cell(rowspan: 1, sideways[Use cases]),\n  [*AI use*],\n  subtable(\n    [Generation of text],\n    [Programming],\n    [Translation],\n    [Research and education],\n    [Inspiration and creativity],\n  ),\n)\n</code></pre>\n</details>",
      "raw": "Since table cell dimensions are soft, by default you can't fill cell's full height by stretching inner content, as it will just stretch the parent cell. You can provide it a point of reference to patch this, which is a compromise, but the implementation is very simple:\n\n```typ\n#set page(margin: 1cm)\n#show table: set text(9pt)\n\n#let sideways = rotate.with(-90deg, reflow: true)\n#let subtable(tallest: none, ..args) = table.cell(inset: 0pt, context {\n  let rows = auto\n  if tallest != none { rows = measure(tallest).height + table.inset * 2 }\n  layout(size => table(\n    columns: (1fr,) * args.pos().len(),\n    rows: rows,\n    table.hline(stroke: 0pt),\n    ..args,\n    table.hline(stroke: 0pt),\n  ))\n})\n\n\n// Will break nested tables, can be fixed with grids.\n// #show table.cell.where(y: 0): strong\n// #show table.cell.where(y: 0): set text(white)\n\n// For nested tables to look the same.\n#set table(align: center + horizon, stroke: 0.5pt)\n\n#table(\n  columns: 4,\n  table.header(\n    table.cell(colspan: 3, fill: black, text(white)[*Dimension*]),\n    table.cell(fill: black, text(white)[*Characteristic*]),\n  ),\n  table.cell(rowspan: 6, sideways[Technical]),\n  table.cell(rowspan: 3, sideways[Interaction]),\n  [*Input*],\n  subtable([Text], [Image], [Audio], [Video]),\n  [*Output*],\n  subtable([Text], [Image], [Audio], [Video], [3D-Model]),\n  [*Interface*],\n  subtable([Web], [Mobile], [Desktop], [API], [Integrated]),\n  table.cell(rowspan: 2, sideways[Work]),\n  [*Type of task*],\n  subtable([Information processing], [Problem solving], [Social], [Physical]),\n  [*Method*],\n  subtable([Autonom], [Teamwork], [Routine]),\n  table.cell(rowspan: 1, sideways[Use cases]),\n  [*AI use*],\n  subtable(\n    tallest: sideways[Use cases],\n    [Generation of text],\n    [Programming],\n    [Translation],\n    [Research and education],\n    [Inspiration and creativity],\n  ),\n)\n```\n\n![image|690x192](upload://f8NVo4LNqWeIPoHVK3YBwU0t4BP.png)\n\nWithout `tallest` point of reference, it will look like this:\n\n![image|690x189](upload://3Fh7jpX53UZb61onAgJwhCkeeYe.png)\n\nThis works for width because of point 3 in https://forum.typst.app/t/how-to-distribute-column-widths-equally-for-specific-rows-in-a-table/4044/2?u=andrew.\n\nBut I have a spreadsheet-like document where I want to cross some cells. There is a trick that @Tinger showed me a long time ago. You can pin cell corners without disturbing it, and then use the concrete location data for absolute anchoring. This way, it becomes trivial to get the current cell's height:\n\n```typ\n#let make-label(counter, alignment, n: auto) = {\n  assert(alignment in (top, bottom))\n  let counter-name = repr(counter).split(\"\\\"\").at(1)\n  let alignment-str = repr(alignment)\n  let n = if n == auto { str(counter.get().first()) } else { str(n) }\n  label(counter-name + \".\" + n + \".\" + alignment-str)\n}\n\n#let cell-counter = counter(\"cell-counter\")\n\n#let pin-corner(counter, alignment) = context {\n  place(alignment)[#metadata(none)#make-label(counter, alignment)]\n}\n\n#let pin-top-bottom(counter) = {\n  pin-corner(counter, top)\n  pin-corner(counter, bottom)\n}\n\n#let cross-cell(counter, body, ..args) = table.cell(\n  counter.step() + pin-top-bottom(counter) + body,\n  ..args,\n)\n\n#let get-pinned-corners(counter) = {\n  let cell-inset = if table.cell.inset == auto { 5pt } else { cell.inset }\n  let adjusted-position(pos, alignment) = {\n    (pos.x - page.margin, pos.y - page.margin)\n  }\n  let n = counter.get().first()\n  let (top, bottom) = (top, bottom).map(alignment => {\n    adjusted-position(\n      locate(make-label(counter, alignment, n: n)).position(),\n      alignment,\n    )\n  })\n  (top.last(), bottom.last())\n}\n```\n\nNow using `cross-cell` and `get-pinned-top-bottom-y`:\n\n```typ\n#let subtable(..args) = cross-cell(inset: 0pt, cell-counter, context {\n  let (y1, y2) = get-pinned-top-bottom-y(cell-counter)\n  layout(size => table(\n    columns: (1fr,) * args.pos().len(),\n    rows: y2 - y1,\n    table.hline(stroke: 0pt),\n    ..args,\n    table.hline(stroke: 0pt),\n  ))\n})\n```\n\nAnd you get the same result, fully automatically.\n\n<details><summary>Full example</summary>\n\n```typ\n#set page(margin: 1cm)\n#show table: set text(9pt)\n\n#let make-label(counter, alignment, n: auto) = {\n  assert(alignment in (top, bottom))\n  let counter-name = repr(counter).split(\"\\\"\").at(1)\n  let alignment-str = repr(alignment)\n  let n = if n == auto { str(counter.get().first()) } else { str(n) }\n  label(counter-name + \".\" + n + \".\" + alignment-str)\n}\n\n#let cell-counter = counter(\"cell-counter\")\n\n#let pin-corner(counter, alignment) = context {\n  place(alignment)[#metadata(none)#make-label(counter, alignment)]\n}\n\n#let pin-top-bottom(counter) = {\n  pin-corner(counter, top)\n  pin-corner(counter, bottom)\n}\n\n#let cross-cell(counter, body, ..args) = table.cell(\n  counter.step() + pin-top-bottom(counter) + body,\n  ..args,\n)\n\n#let get-pinned-top-bottom-y(counter) = {\n  let cell-inset = if table.cell.inset == auto { 5pt } else { cell.inset }\n  let adjusted-position(pos, alignment) = {\n    (pos.x - page.margin, pos.y - page.margin)\n  }\n  let n = counter.get().first()\n  let (top, bottom) = (top, bottom).map(alignment => {\n    adjusted-position(\n      locate(make-label(counter, alignment, n: n)).position(),\n      alignment,\n    )\n  })\n  (top.last(), bottom.last())\n}\n\n#let sideways = rotate.with(-90deg, reflow: true)\n#let subtable(..args) = cross-cell(inset: 0pt, cell-counter, context {\n  let (y1, y2) = get-pinned-top-bottom-y(cell-counter)\n  layout(size => table(\n    columns: (1fr,) * args.pos().len(),\n    rows: y2 - y1,\n    table.hline(stroke: 0pt),\n    ..args,\n    table.hline(stroke: 0pt),\n  ))\n})\n\n\n// Will break nested tables, can be fixed with grids.\n// #show table.cell.where(y: 0): strong\n// #show table.cell.where(y: 0): set text(white)\n\n// For nested tables to look the same.\n#set table(align: center + horizon, stroke: 0.5pt)\n\n#table(\n  columns: 4,\n  table.header(\n    table.cell(colspan: 3, fill: black, text(white)[*Dimension*]),\n    table.cell(fill: black, text(white)[*Characteristic*]),\n  ),\n  table.cell(rowspan: 6, sideways[Technical]),\n  table.cell(rowspan: 3, sideways[Interaction]),\n  [*Input*],\n  subtable([Text], [Image], [Audio], [Video]),\n  [*Output*],\n  subtable([Text], [Image], [Audio], [Video], [3D-Model]),\n  [*Interface*],\n  subtable([Web], [Mobile], [Desktop], [API], [Integrated]),\n  table.cell(rowspan: 2, sideways[Work]),\n  [*Type of task*],\n  subtable([Information processing], [Problem solving], [Social], [Physical]),\n  [*Method*],\n  subtable([Autonom], [Teamwork], [Routine]),\n  table.cell(rowspan: 1, sideways[Use cases]),\n  [*AI use*],\n  subtable(\n    [Generation of text],\n    [Programming],\n    [Translation],\n    [Research and education],\n    [Inspiration and creativity],\n  ),\n)\n```\n\n</details>",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 21,
      "score": 44.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12357,
      "post_number": 5,
      "username": "BigBigi",
      "name": "BigBigi",
      "created_at": "2025-05-12T19:24:51.678Z",
      "updated_at": "2025-05-12T19:24:51.678Z",
      "cooked": "<p>Thank you both very much for your quick and detailed answers!</p>\n<p>I had time to go through both examples, and I think <a class=\"mention\" href=\"/u/andrew\">@Andrew</a>‚Äôs solution is the most robust since it handles the borders correctly and flexible in terms of height as well. I have two follow-up questions regarding this approach:</p>\n<ol>\n<li>Does your solution only work if the table is placed on a separate page, or is it also possible to embed the table between regular text?</li>\n<li>I‚Äôm also having trouble adapting the page setup to use my own margins. In your example, you set all margins to 1cm, but when I try to use my own custom setup, I get the error: <strong><code>Cannot subtract dictionary from length</code></strong>.</li>\n</ol>\n<p>Here‚Äôs the page setup I‚Äôm using in my <code>main.typ</code> file (now correctly formatted, sorry about before):</p>\n<pre><code class=\"lang-auto\">#set page(\n  margin: (top: 2.5cm, bottom: 2cm, left: 2.5cm, right: 3cm),\n  header: context {\n    if counter(page).get().first() &gt; 1 [\n      #set text(10pt, baseline: 8pt)\n      #set align(right)\n      Seite\n      #counter(page).display()\n    ]\n  }\n  + if counter(page).get().first() &gt; 1 [\n    #line(\n    length: 100%,\n    stroke: 0.5pt)\n  ]\n)\n</code></pre>\n<p>Any ideas on how I can adapt the margin settings in your solution to work with my own page configuration?</p>\n<p>Thanks again for your support, I really appreciate it!</p>",
      "raw": "Thank you both very much for your quick and detailed answers!\n\nI had time to go through both examples, and I think @Andrew‚Äôs solution is the most robust since it handles the borders correctly and flexible in terms of height as well. I have two follow-up questions regarding this approach:\n\n1. Does your solution only work if the table is placed on a separate page, or is it also possible to embed the table between regular text?\n2. I'm also having trouble adapting the page setup to use my own margins. In your example, you set all margins to 1cm, but when I try to use my own custom setup, I get the error: **`Cannot subtract dictionary from length`**. \n\nHere‚Äôs the page setup I‚Äôm using in my `main.typ` file (now correctly formatted, sorry about before):\n```\n#set page(\n  margin: (top: 2.5cm, bottom: 2cm, left: 2.5cm, right: 3cm),\n  header: context {\n    if counter(page).get().first() > 1 [\n      #set text(10pt, baseline: 8pt)\n      #set align(right)\n      Seite\n      #counter(page).display()\n    ]\n  }\n  + if counter(page).get().first() > 1 [\n    #line(\n    length: 100%,\n    stroke: 0.5pt)\n  ]\n)\n```\nAny ideas on how I can adapt the margin settings in your solution to work with my own page configuration?\n\nThanks again for your support, I really appreciate it!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1583
    },
    {
      "id": 12366,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-13T05:59:52.052Z",
      "updated_at": "2025-05-13T05:59:52.052Z",
      "cooked": "<p>First of all, did you skip <a href=\"https://forum.typst.app/t/how-to-distribute-column-widths-equally-for-specific-rows-in-a-table/4044/3\" class=\"inline-onebox\">How to distribute column widths equally for specific rows in a table - #3 by Andrew</a>? Your code blocks clearly don‚Äôt use correct syntax highlighting.</p>\n<hr>\n<aside class=\"quote no-group\" data-username=\"BigBigi\" data-post=\"5\" data-topic=\"4044\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/b/B14C00/48.png\" class=\"avatar\"> BigBigi:</div>\n<blockquote>\n<p>Does your solution only work if the table is placed on a separate page, or is it also possible to embed the table between regular text?</p>\n</blockquote>\n</aside>\n<p>It doesn‚Äôt matter if there is text around or not. It might even work when row cells are split across pages. Actually, no. The y coordinates are from different pages, so the difference will make the row height very big. But I guess it can be also handled.</p>\n<aside class=\"quote no-group\" data-username=\"BigBigi\" data-post=\"5\" data-topic=\"4044\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/b/B14C00/48.png\" class=\"avatar\"> BigBigi:</div>\n<blockquote>\n<p>you set all margins to 1cm, but when I try to use my own custom setup, I get the error: <strong><code>Cannot subtract dictionary from length</code></strong>.</p>\n</blockquote>\n</aside>\n<p>Just change the margin reference to your margin setup:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">(pos.x - page.margin, pos.y - page.margin)\n</code></pre>",
      "raw": "First of all, did you skip https://forum.typst.app/t/how-to-distribute-column-widths-equally-for-specific-rows-in-a-table/4044/3?u=andrew? Your code blocks clearly don't use correct syntax highlighting.\n\n---\n\n[quote=\"BigBigi, post:5, topic:4044\"]\nDoes your solution only work if the table is placed on a separate page, or is it also possible to embed the table between regular text?\n[/quote]\n\nIt doesn't matter if there is text around or not. It might even work when row cells are split across pages. Actually, no. The y coordinates are from different pages, so the difference will make the row height very big. But I guess it can be also handled.\n\n[quote=\"BigBigi, post:5, topic:4044\"]\nyou set all margins to 1cm, but when I try to use my own custom setup, I get the error: **`Cannot subtract dictionary from length`**.\n[/quote]\n\nJust change the margin reference to your margin setup:\n\n```typc\n(pos.x - page.margin, pos.y - page.margin)\n```",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 18,
      "score": 18.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12389,
      "post_number": 7,
      "username": "BigBigi",
      "name": "BigBigi",
      "created_at": "2025-05-13T16:01:33.528Z",
      "updated_at": "2025-05-13T16:01:33.528Z",
      "cooked": "<p>Sorry again for the formatting issues, I think I‚Äôve got it now.</p>\n<p>Thank you very much for your tips. I was able to adjust the margins as needed, and the table now splits nicely across pages. The only thing still missing is that the 90-degree rotated texts aren‚Äôt repeated on new pages, but I don‚Äôt really care.</p>\n<p>I just have one last question:<br>\nCurrently, all the text in the table cells is justified, which I‚Äôd like to avoid. I tried using:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show table: set par(justify: false)\n</code></pre>\n<p>However, this causes the text inside the table cells to not wrap properly anymore.</p>\n<p>Is there a way to disable justification while still allowing the text to wrap correctly inside the cells?</p>",
      "raw": "Sorry again for the formatting issues, I think I‚Äôve got it now.\n\nThank you very much for your tips. I was able to adjust the margins as needed, and the table now splits nicely across pages. The only thing still missing is that the 90-degree rotated texts aren't repeated on new pages, but I don't really care.\n\nI just have one last question:\nCurrently, all the text in the table cells is justified, which I‚Äôd like to avoid. I tried using:\n\n```typ \n#show table: set par(justify: false)\n```\n\nHowever, this causes the text inside the table cells to not wrap properly anymore.\n\nIs there a way to disable justification while still allowing the text to wrap correctly inside the cells?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 17,
      "score": 23.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1583
    },
    {
      "id": 12390,
      "post_number": 8,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-13T16:26:21.889Z",
      "updated_at": "2025-05-13T16:26:21.889Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"BigBigi\" data-post=\"7\" data-topic=\"4044\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/b/B14C00/48.png\" class=\"avatar\"> BigBigi:</div>\n<blockquote>\n<p>The only thing still missing is that the 90-degree rotated texts aren‚Äôt repeated on new pages, but I don‚Äôt really care.</p>\n</blockquote>\n</aside>\n<p>Does any other program duplicates cell‚Äôs content when split between pages? You can ask to add this.</p>\n<aside class=\"quote no-group\" data-username=\"BigBigi\" data-post=\"7\" data-topic=\"4044\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/b/B14C00/48.png\" class=\"avatar\"> BigBigi:</div>\n<blockquote>\n<p>Is there a way to disable justification while still allowing the text to wrap correctly inside the cells?</p>\n</blockquote>\n</aside>\n<p><a href=\"https://typst.app/docs/reference/text/text/#parameters-hyphenate\"><code>text.hyphenate</code></a></p>",
      "raw": "[quote=\"BigBigi, post:7, topic:4044\"]\nThe only thing still missing is that the 90-degree rotated texts aren‚Äôt repeated on new pages, but I don‚Äôt really care.\n[/quote]\n\nDoes any other program duplicates cell's content when split between pages? You can ask to add this.\n\n[quote=\"BigBigi, post:7, topic:4044\"]\nIs there a way to disable justification while still allowing the text to wrap correctly inside the cells?\n[/quote]\n\n[`text.hyphenate`](https://typst.app/docs/reference/text/text/#parameters-hyphenate)",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 16,
      "score": 23.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12416,
      "post_number": 9,
      "username": "BigBigi",
      "name": "BigBigi",
      "created_at": "2025-05-13T22:09:42.060Z",
      "updated_at": "2025-05-13T22:09:42.060Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"8\" data-topic=\"4044\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p><a href=\"https://typst.app/docs/reference/text/text/#parameters-hyphenate\"><code>text.hyphenate</code></a></p>\n</blockquote>\n</aside>\n<p>This did the trick, I just had to add:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set text(hyphenate: true)\n</code></pre>\n<p>Thank you again for your great support, you helped me a lot!</p>",
      "raw": "[quote=\"Andrew, post:8, topic:4044, full:true\"]\n\n[`text.hyphenate`](https://typst.app/docs/reference/text/text/#parameters-hyphenate)\n[/quote]\n\nThis did the trick, I just had to add:\n```typ\n#set text(hyphenate: true)\n```\n\nThank you again for your great support, you helped me a lot!",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 15,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1583
    }
  ],
  "scraped_at": "2025-06-10T09:47:58.760863"
}
{
  "topic_metadata": {
    "id": 4046,
    "title": "How can I automate level 1 headings always occur on a new recto page?",
    "slug": "how-can-i-automate-level-1-headings-always-occur-on-a-new-recto-page",
    "posts_count": 5,
    "created_at": "2025-05-12T10:27:31.721Z",
    "last_posted_at": "2025-05-13T19:22:51.849Z",
    "views": 80,
    "like_count": 1,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 349
  },
  "posts": [
    {
      "id": 12331,
      "post_number": 1,
      "username": "Mark_Hilton",
      "name": "Mark Hilton",
      "created_at": "2025-05-12T10:27:31.840Z",
      "updated_at": "2025-05-12T10:27:31.840Z",
      "cooked": "<p>I have the following code for heading 1:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(\n  level: 1\n): it =&gt; block(sticky: true, width: 100%)[\n  #set align(center)\n  #set text(24pt, weight: \"regular\")\n  #smallcaps(it.body)\n]\n</code></pre>\n<p>I want these to begin a recto page (think Chapter start), so at the moment, I include the line:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#pagebreak(weak: true, to: \"odd\")\n</code></pre>\n<p>before each <code>= Heading text</code> within the text itself.</p>\n<p>Is it possible, and if so how, to modify the <code>#show</code> rule to incorporate the new page command immediately before the heading, so as to obviate the need of repeating it throughout the document?</p>\n<p>Many thanks.</p>\n<p><img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji only-emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nMark</p>",
      "raw": "I have the following code for heading 1:\n\n```typ\n#show heading.where(\n  level: 1\n): it => block(sticky: true, width: 100%)[\n  #set align(center)\n  #set text(24pt, weight: \"regular\")\n  #smallcaps(it.body)\n]\n```\n\nI want these to begin a recto page (think Chapter start), so at the moment, I include the line:\n\n```typ\n#pagebreak(weak: true, to: \"odd\")\n```\nbefore each `= Heading text` within the text itself.\n\nIs it possible, and if so how, to modify the `#show` rule to incorporate the new page command immediately before the heading, so as to obviate the need of repeating it throughout the document?\n\nMany thanks.\n\n:slight_smile: \n Mark",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 105.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1276
    },
    {
      "id": 12337,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-12T12:38:59.234Z",
      "updated_at": "2025-05-12T12:41:32.591Z",
      "cooked": "<p>Don‚Äôt use show rules unless you have to, especially if you put set rules inside. You will face <a href=\"https://forum.typst.app/t/which-show-rule-takes-precedence/3904\" class=\"inline-onebox\">Which show rule takes precedence?</a> or <a href=\"https://github.com/typst/typst/issues/6219\" class=\"inline-onebox\">Set rule inside show rule (closure) for the same element gets applied for table/grid ¬∑ Issue #6219 ¬∑ typst/typst ¬∑ GitHub</a>.</p>\n<p>Prioritize show-set rules and keep show rules minimal/non-hacky:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): set align(center)\n#show heading.where(level: 1): set text(24pt, weight: \"regular\")\n#show heading.where(level: 1): smallcaps\n#show heading.where(level: 1): it =&gt; pagebreak(weak: true, to: \"odd\") + it\n\n= Chapter A\n#lorem(50)\n\n= Chapter B\n#lorem(50)\n</code></pre>\n<p>This is the most idiomatic way, but since show rules are used, you won‚Äôt be able to un-smallcaps or un-pagebreak level 1 heading, unless this is set inside a non-root scope. But at least all other heading features/behavior will work.</p>",
      "raw": "Don't use show rules unless you have to, especially if you put set rules inside. You will face https://forum.typst.app/t/which-show-rule-takes-precedence/3904 or https://github.com/typst/typst/issues/6219.\n\nPrioritize show-set rules and keep show rules minimal/non-hacky:\n\n```typ\n#show heading.where(level: 1): set align(center)\n#show heading.where(level: 1): set text(24pt, weight: \"regular\")\n#show heading.where(level: 1): smallcaps\n#show heading.where(level: 1): it => pagebreak(weak: true, to: \"odd\") + it\n\n= Chapter A\n#lorem(50)\n\n= Chapter B\n#lorem(50)\n```\n\nThis is the most idiomatic way, but since show rules are used, you won't be able to un-smallcaps or un-pagebreak level 1 heading, unless this is set inside a non-root scope. But at least all other heading features/behavior will work.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 15.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12347,
      "post_number": 3,
      "username": "Mark_Hilton",
      "name": "Mark Hilton",
      "created_at": "2025-05-12T15:32:38.476Z",
      "updated_at": "2025-05-12T15:33:08.504Z",
      "cooked": "<p>Thank you. That does just what I want.</p>\n<p>As for my code, that was based on the example given in the ‚ÄòAdvanced Styling‚Äô section of the Tutorial‚Äîwith input from <a class=\"mention\" href=\"/u/pgbiel\">@PgBiel</a> in answer to a related question! I guess one of the problems with Typst being still very much in development is that the Tutorial doesn‚Äôt get updated to match so quickly.</p>\n<p><img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji only-emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nMark</p>",
      "raw": "Thank you. That does just what I want.\n\nAs for my code, that was based on the example given in the ‚ÄòAdvanced Styling‚Äô section of the Tutorial‚Äîwith input from @PgBiel in answer to a related question! I guess one of the problems with Typst being still very much in development is that the Tutorial doesn't get updated to match so quickly. \n\n:slight_smile: \n Mark",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 29.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1276
    },
    {
      "id": 12349,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-12T15:52:51.597Z",
      "updated_at": "2025-05-13T20:03:05.992Z",
      "cooked": "<p>Thank you for context, I‚Äôll look into it.</p>\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/typst/issues/6273\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/issues/6273\" target=\"_blank\" rel=\"noopener\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/typst/issues/6273\" target=\"_blank\" rel=\"noopener\">Non-idiomatic advanced heading styling in documentation</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2025-05-12\" data-time=\"16:00:04\" data-timezone=\"UTC\">04:00PM - 12 May 25 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/Andrew15-5\" target=\"_blank\" rel=\"noopener\">\n          <img alt=\"Andrew15-5\" src=\"https://forum.typst.app/uploads/default/original/1X/8c66fc8b1c207ba90488266df18b206a61b1fc49.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"707C3A\">\n          Andrew15-5\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          docs\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">### Description\n\nUnder https://typst.app/docs/tutorial/advanced-styling/#columns<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">‚Ä¶</a></span><span class=\"excerpt hidden\">-and-headings, there is\n\n```typ\n#show heading.where(\n  level: 1\n): it =&gt; block(width: 100%)[\n  #set align(center)\n  #set text(13pt, weight: \"regular\")\n  #smallcaps(it.body)\n]\n\n#show heading.where(\n  level: 2\n): it =&gt; text(\n  size: 11pt,\n  weight: \"regular\",\n  style: \"italic\",\n  it.body + [.],\n)\n```\n\nWhich might be good enough in isolation, but it gives a bad example for new users, as you always should prefer show-set rules over show rules. It's not idiomatic, nor the formatting is good.\n\nThis example can lead to inability to further style, or sometimes not being able to style in the first place. See [this](https://forum.typst.app/t/which-show-rule-takes-precedence/3904?u=andrew) and [this](https://github.com/typst/typst/issues/6219).\n\nIs this example so old, or was this not considered?\n\n[Context](https://forum.typst.app/t/how-can-i-automate-level-1-headings-always-occur-on-a-new-recto-page/4046?u=andrew)</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Thank you for context, I'll look into it.\n\nhttps://github.com/typst/typst/issues/6273",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 4.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12403,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-05-13T19:22:51.849Z",
      "updated_at": "2025-05-13T19:22:51.849Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/mark_hilton\">@Mark_Hilton</a>, glad you got a satisfying answer! Please don‚Äôt forget to mark it as the solution, so that others can more easily find it later.</p>",
      "raw": "Hi @Mark_Hilton, glad you got a satisfying answer! Please don‚Äôt forget to mark it as the solution, so that others can more easily find it later.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:47:57.975481"
}
{
  "topic_metadata": {
    "id": 4047,
    "title": "How to automatically add * before headings?",
    "slug": "how-to-automatically-add-before-headings",
    "posts_count": 10,
    "created_at": "2025-05-12T10:59:25.159Z",
    "last_posted_at": "2025-05-16T14:39:28.646Z",
    "views": 106,
    "like_count": 1,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 7,
    "accepted_answer_username": "HuangMI",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 686
  },
  "posts": [
    {
      "id": 12332,
      "post_number": 1,
      "username": "HuangMI",
      "name": "HuangMI",
      "created_at": "2025-05-12T10:59:25.322Z",
      "updated_at": "2025-05-13T00:49:06.723Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1\")\n#show heading: set heading()\n= ÊúâÁêÜÊï∞\n== Ê≠£Êï∞ÂíåË¥üÊï∞\n== Ê≠£Êï∞ÂíåË¥üÊï∞\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/3/3224dbfa16102adb1a8126bb8d647b021a92e0d7.png\" alt=\"image\" data-base62-sha1=\"79AQl0JXAYCBk6PPWMYAQXyuRWD\" width=\"315\" height=\"232\"></p>",
      "raw": "```typ\n#set heading(numbering: \"1.1\")\n#show heading: set heading()\n= ÊúâÁêÜÊï∞\n== Ê≠£Êï∞ÂíåË¥üÊï∞\n== Ê≠£Êï∞ÂíåË¥üÊï∞\n```\n![image|315x232](upload://79AQl0JXAYCBk6PPWMYAQXyuRWD.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 66.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1479
    },
    {
      "id": 12333,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-05-12T12:00:10.038Z",
      "updated_at": "2025-05-12T13:22:32.148Z",
      "cooked": "<p>There are two options here, I will leave it up to you to select the one that best suits your requirements.</p>\n<p>You can use a show rule for the headings to insert the asterisk between the numbering and body of each heading. You can adjust the spacing around the asterisk with spaces inside the string or with the horizontal spacing function <code>h()</code>.<br>\nEdit: Manually recreating the counter value with <code>numbering()</code> and the heading location is unnecessary, see the reply by <a class=\"mention\" href=\"/u/andrew\">@Andrew</a>. You can just use <code>counter(heading).display()</code> to get the correct output for the current heading.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading: it =&gt; block(counter(heading).display() + \"*\" + it.body)\n</code></pre>\n<p>The second option is to include the asterisk in the numbering. Compared to the first option the asterisk will then be automatically included wherever the heading numbering shows up, e.g. also in references to headings or in the outline.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let asterisk-numbering(..n) = numbering(\"1.1\", ..n) + \"*\"\n#set heading(numbering: asterisk-numbering)\n</code></pre>",
      "raw": "There are two options here, I will leave it up to you to select the one that best suits your requirements.\n\nYou can use a show rule for the headings to insert the asterisk between the numbering and body of each heading. You can adjust the spacing around the asterisk with spaces inside the string or with the horizontal spacing function `h()`.\nEdit: Manually recreating the counter value with `numbering()` and the heading location is unnecessary, see the reply by @Andrew. You can just use `counter(heading).display()` to get the correct output for the current heading.\n\n```typ\n#show heading: it => block(counter(heading).display() + \"*\" + it.body)\n```\n\nThe second option is to include the asterisk in the numbering. Compared to the first option the asterisk will then be automatically included wherever the heading numbering shows up, e.g. also in references to headings or in the outline.\n\n```typ\n#let asterisk-numbering(..n) = numbering(\"1.1\", ..n) + \"*\"\n#set heading(numbering: asterisk-numbering)\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 36.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 12335,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-12T12:27:54.072Z",
      "updated_at": "2025-05-12T12:27:54.072Z",
      "cooked": "<p><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a> :</p>\n<aside class=\"quote no-group\">\n<blockquote>\n<p>If your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ ‚Ä¶ ````. It will then look like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n</code></pre>\n<p>If you need to highlight a code or math mode snippet instead, the language tags <code>typc</code> and <code>typm</code> do that, respectively.</p>\n</blockquote>\n</aside>",
      "raw": "https://forum.typst.app/t/how-to-post-in-the-questions-category/11 :\n[quote]\nIf your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ ... ````. It will then look like this:\n\n```typ\n#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n```\n\nIf you need to highlight a code or math mode snippet instead, the language tags `typc` and `typm` do that, respectively.\n[/quote]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 30.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12336,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-12T12:30:30.940Z",
      "updated_at": "2025-05-12T12:30:30.940Z",
      "cooked": "<p>Why overcomplicate?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1\")\n#show heading: it =&gt; block[#counter(heading).display()#h(0.3em)\\*#it.body]\n</code></pre>\n<p>This is, if not all headings features are needed. Actual heading show rule is very big.</p>",
      "raw": "Why overcomplicate?\n\n```typ\n#set heading(numbering: \"1.1\")\n#show heading: it => block[#counter(heading).display()#h(0.3em)\\*#it.body]\n```\n\nThis is, if not all headings features are needed. Actual heading show rule is very big.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 30.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12479,
      "post_number": 5,
      "username": "HuangMI",
      "name": "HuangMI",
      "created_at": "2025-05-15T04:58:03.751Z",
      "updated_at": "2025-05-15T04:58:03.751Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"4\" data-topic=\"4047\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>This is, if not all headings features are needed. Actual heading show rule is very big.</p>\n</blockquote>\n</aside>\n<p>I don‚Äôt understand this very well</p>",
      "raw": "[quote=\"Andrew, post:4, topic:4047\"]\nThis is, if not all headings features are needed. Actual heading show rule is very big.\n[/quote]\n\nI don't understand this very well",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 20,
      "score": 19.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1479
    },
    {
      "id": 12491,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-15T10:27:00.615Z",
      "updated_at": "2025-05-15T10:32:25.400Z",
      "cooked": "<p>See <a href=\"https://github.com/typst/typst/issues/5095#issuecomment-2812970888\" class=\"inline-onebox\">Add default typst implementation code where possible ¬∑ Issue #5095 ¬∑ typst/typst ¬∑ GitHub</a> for full heading re-implementation in Typst. I guess, basically, it doesn‚Äôt respond to overridden <code>numbering</code> and ignore <code>hanging-indent</code> (and <code>text.dir</code>). And no HTML support.</p>",
      "raw": "See https://github.com/typst/typst/issues/5095#issuecomment-2812970888 for full heading re-implementation in Typst. I guess, basically, it doesn't respond to overridden `numbering` and ignore `hanging-indent` (and `text.dir`). And no HTML support.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 44.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12565,
      "post_number": 7,
      "username": "HuangMI",
      "name": "HuangMI",
      "created_at": "2025-05-16T02:29:44.532Z",
      "updated_at": "2025-05-16T02:38:43.336Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// #set heading(numbering: \"1.1\")\n#show heading: it =&gt; {\n  if it.body.has(\"text\") and it.body.text.first() != \"*\" {\n    heading(\n      \"*\" + it.body, \n      level: it.level,\n      numbering: \"1.1\", \n    )\n  } else {\n    it\n  }\n}\n= ÊúâÁêÜÊï∞\n== Ê≠£Êï∞ÂíåË¥üÊï∞\n== Ê≠£Êï∞ÂíåË¥üÊï∞\n</code></pre>\n<p>If I don‚Äôt comment out this line <code>#set heading(numbering: \"1.1\")</code> , the result won‚Äôt be as expected. However, I don‚Äôt understand how it works internally‚ÄîI can only look at the Rust source code to figure it out. Why isn‚Äôt this heading outline functionality provided as part of the standard library? I‚Äôm not sure what Typst‚Äôs reasoning is for this design.</p>",
      "raw": "```typ\n// #set heading(numbering: \"1.1\")\n#show heading: it => {\n  if it.body.has(\"text\") and it.body.text.first() != \"*\" {\n    heading(\n      \"*\" + it.body, \n      level: it.level,\n      numbering: \"1.1\", \n    )\n  } else {\n    it\n  }\n}\n= ÊúâÁêÜÊï∞\n== Ê≠£Êï∞ÂíåË¥üÊï∞\n== Ê≠£Êï∞ÂíåË¥üÊï∞\n```\n\nIf I don't comment out this line `#set heading(numbering: \"1.1\")` , the result won't be as expected. However, I don‚Äôt understand how it works internally‚ÄîI can only look at the Rust source code to figure it out. Why isn‚Äôt this heading outline functionality provided as part of the standard library? I‚Äôm not sure what Typst‚Äôs reasoning is for this design.",
      "reply_to_post_number": null,
      "reply_count": 3,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 68.8,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1479
    },
    {
      "id": 12581,
      "post_number": 8,
      "username": "HuangMI",
      "name": "HuangMI",
      "created_at": "2025-05-16T11:17:38.166Z",
      "updated_at": "2025-05-16T11:19:27.042Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/andrew\">@Andrew</a> <a class=\"mention\" href=\"/u/janekfleper\">@janekfleper</a></p>",
      "raw": "@Andrew @janekfleper",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1479
    },
    {
      "id": 12584,
      "post_number": 9,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-05-16T11:59:37.919Z",
      "updated_at": "2025-05-16T11:59:37.919Z",
      "cooked": "<p>You are creating every heading twice with your current show rule. If you hover over <code>it.body</code> in the if statement, you can see that it shows every section twice. Once with the initial body and once with <code>\"*\"  + body</code>. With the set rule for the heading numbering, you are then incrementing the heading counter twice for each heading. Without the set rule only the inner heading has a numbering and the heading counter is only incremented once. The outer heading will have numbering set to <code>none</code> which does not increment the counter.</p>",
      "raw": "You are creating every heading twice with your current show rule. If you hover over `it.body` in the if statement, you can see that it shows every section twice. Once with the initial body and once with `\"*\"  + body`. With the set rule for the heading numbering, you are then incrementing the heading counter twice for each heading. Without the set rule only the inner heading has a numbering and the heading counter is only incremented once. The outer heading will have numbering set to `none` which does not increment the counter.",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 14,
      "score": 2.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 12593,
      "post_number": 10,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-16T14:39:28.646Z",
      "updated_at": "2025-05-16T20:45:06.343Z",
      "cooked": "<p>Not sure how this can be a solution if you are saying that it doesn‚Äôt really work. Here is a proper solution:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1\")\n#show heading: it =&gt; {\n  if it.body.func() != text and it.body.children.first() == [\\*] { return it }\n  let number = if it.numbering != none [#counter(heading).display()#h(0.3em)]\n  block[#number\\*#it.body]\n}\n\n= ÊúâÁêÜÊï∞\n== \\*Ê≠£Êï∞ÂíåË¥üÊï∞\n== Ê≠£Êï∞ÂíåË¥üÊï∞\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/75f4c030576b696ac14b1c9a655615534937ea37.png\" alt=\"image\" data-base62-sha1=\"gPueSRFEZ4Mx2gCIPMPDZwu80ED\" width=\"136\" height=\"101\"></p>\n<p>It works with and without the set rule. But you should only use <code>=</code> syntax. Otherwise, the solution will be slightly longer.</p>\n<p>I would just not add an asterisk in the heading in the first place. Then <a href=\"https://forum.typst.app/t/how-to-automatically-add-before-headings/4047/4\" class=\"inline-onebox\">How to automatically add * before headings? - #4 by Andrew</a> just works.</p>",
      "raw": "Not sure how this can be a solution if you are saying that it doesn't really work. Here is a proper solution:\n\n```typ\n#set heading(numbering: \"1.1\")\n#show heading: it => {\n  if it.body.func() != text and it.body.children.first() == [\\*] { return it }\n  let number = if it.numbering != none [#counter(heading).display()#h(0.3em)]\n  block[#number\\*#it.body]\n}\n\n= ÊúâÁêÜÊï∞\n== \\*Ê≠£Êï∞ÂíåË¥üÊï∞\n== Ê≠£Êï∞ÂíåË¥üÊï∞\n```\n\n![image|136x101](upload://gPueSRFEZ4Mx2gCIPMPDZwu80ED.png)\n\nIt works with and without the set rule. But you should only use `=` syntax. Otherwise, the solution will be slightly longer.\n\nI would just not add an asterisk in the heading in the first place. Then https://forum.typst.app/t/how-to-automatically-add-before-headings/4047/4?u=andrew just works.",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 13,
      "score": 7.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:57.248636"
}
{
  "topic_metadata": {
    "id": 4049,
    "title": "How to add caption to fletcher diagram?",
    "slug": "how-to-add-caption-to-fletcher-diagram",
    "posts_count": 3,
    "created_at": "2025-05-12T12:41:10.900Z",
    "last_posted_at": "2025-05-13T12:48:21.525Z",
    "views": 72,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "fletcher"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 173
  },
  "posts": [
    {
      "id": 12338,
      "post_number": 1,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-12T12:41:11.040Z",
      "updated_at": "2025-05-14T21:39:52.270Z",
      "cooked": "<p>Hi All,<br>\nI have added a diagram using fletcher package. I would like to add caption below the diagram. Does fletcher package support caption inclusion under the diagram?</p>\n<p>Thank you.</p>",
      "raw": "Hi All,\nI have added a diagram using fletcher package. I would like to add caption below the diagram. Does fletcher package support caption inclusion under the diagram?\n\nThank you.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 74.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12341,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-05-12T13:35:12.895Z",
      "updated_at": "2025-05-12T13:35:26.226Z",
      "cooked": "<p>In order to add a caption to anything in Typst you have to wrap in a <code>figure()</code>, see <a href=\"https://typst.app/docs/reference/model/figure/\" class=\"inline-onebox\">Figure Function ‚Äì Typst Documentation</a>. This works for images, tables and really any other type of content, including fletcher diagrams.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let my-diagram = \"something you made with fletcher\"\n\n#figure(\n  my-diagram,\n  caption: \"This is the caption of my fletcher diagram\"\n)\n</code></pre>\n<p>I would also like to ask you to move your post to the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category and to change the title to an actual question you would ask a friend about Typst. See the following post about the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category if you want to know more:</p><aside class=\"quote quote-modified\" data-post=\"1\" data-topic=\"11\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\">\n    <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">How to post in the Questions category</a> <a class=\"badge-category__wrapper \" href=\"/c/questions/5\"><span data-category-id=\"5\" style=\"--category-badge-color: #F7C000; --category-badge-text-color: #fdfdfd;\" data-drop-close=\"true\" class=\"badge-category \" title=\"Your questions about using Typst and the web app go in this category.\"><span class=\"badge-category__name\">Questions</span></span></a>\n  </div>\n  <blockquote>\n    Your questions about using Typst and the web app go in this category. \nThis category should be a useful resource for both those who post questions and those who later search it for answers. To get there, we ask you to keep in mind the following if you ask a question: \n<a name=\"p-29-the-basics-1\" class=\"anchor\" href=\"#p-29-the-basics-1\"></a>The Basics\nEach post should contain one distinct question on Typst. If you have multiple questions, do not hesitate to create multiple posts! Posts that are discussions or otherwise not questions looking for help should go into the‚Ä¶\n  </blockquote>\n</aside>\n",
      "raw": "In order to add a caption to anything in Typst you have to wrap in a `figure()`, see https://typst.app/docs/reference/model/figure/. This works for images, tables and really any other type of content, including fletcher diagrams.\n\n```typ\n#let my-diagram = \"something you made with fletcher\"\n\n#figure(\n  my-diagram,\n  caption: \"This is the caption of my fletcher diagram\"\n)\n```\n\nI would also like to ask you to move your post to the #questions category and to change the title to an actual question you would ask a friend about Typst. See the following post about the #questions category if you want to know more:\nhttps://forum.typst.app/t/how-to-post-in-the-questions-category/11",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 21,
      "score": 39.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 12386,
      "post_number": 3,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-13T12:48:21.525Z",
      "updated_at": "2025-05-13T12:48:21.525Z",
      "cooked": "<p>Thank you for your support.</p>\n<aside class=\"quote no-group\" data-username=\"janekfleper\" data-post=\"2\" data-topic=\"4049\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/j/8F38B1/48.png\" class=\"avatar\"> janekfleper:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">#figure(\n  my-diagram,\n  caption: \"This is the caption of my fletcher diagram\"\n)\n</code></pre>\n</blockquote>\n</aside>",
      "raw": "Thank you for your support.\n\n[quote=\"janekfleper, post:2, topic:4049\"]\n```\n#figure(\n  my-diagram,\n  caption: \"This is the caption of my fletcher diagram\"\n)\n```\n[/quote]",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 17,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    }
  ],
  "scraped_at": "2025-06-10T09:47:56.506559"
}
{
  "topic_metadata": {
    "id": 4052,
    "title": "How can I align the top of all letters in a given word?",
    "slug": "how-can-i-align-the-top-of-all-letters-in-a-given-word",
    "posts_count": 6,
    "created_at": "2025-05-12T15:07:23.319Z",
    "last_posted_at": "2025-05-13T09:22:08.379Z",
    "views": 64,
    "like_count": 0,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "Andrew",
    "tags": [
      "text-formatting",
      "alignment"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 347
  },
  "posts": [
    {
      "id": 12346,
      "post_number": 1,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-05-12T15:07:23.511Z",
      "updated_at": "2025-05-13T19:30:05.378Z",
      "cooked": "<p>I‚Äôd like to typeset ‚ÄúFooBar‚Äù in an otherwise normal text paragraph, but vertically aligning the top of each glyph instead of the bottom. Is there a simple way to achieve this in a manner which will not depend on the font size and family currently in use?</p>",
      "raw": "I'd like to typeset \"FooBar\" in an otherwise normal text paragraph, but vertically aligning the top of each glyph instead of the bottom. Is there a simple way to achieve this in a manner which will not depend on the font size and family currently in use?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 5.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 12348,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-12T15:49:32.495Z",
      "updated_at": "2025-05-12T15:49:32.495Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/t4t:0.4.2\": get\n\n#let glyph-wise-top-align(body) = {\n  set text(top-edge: \"bounds\")\n  context {\n    let clusters = get.text(body).clusters()\n    let max-height = calc.max(..clusters.map(c =&gt; measure(c).height))\n    clusters.map(c =&gt; box(height: max-height, c)).join()\n  }\n}\n\n#glyph-wise-top-align[FooBar]\n\n#glyph-wise-top-align[(more, complex --- text)]\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/1/18b801f4d8309c0958f4ab1333e3b3b0af655b30.png\" alt=\"image\" data-base62-sha1=\"3wFH18YbkFXmloAbUEDQFtCZqUw\" width=\"219\" height=\"79\"></p>",
      "raw": "```typ\n#import \"@preview/t4t:0.4.2\": get\n\n#let glyph-wise-top-align(body) = {\n  set text(top-edge: \"bounds\")\n  context {\n    let clusters = get.text(body).clusters()\n    let max-height = calc.max(..clusters.map(c => measure(c).height))\n    clusters.map(c => box(height: max-height, c)).join()\n  }\n}\n\n#glyph-wise-top-align[FooBar]\n\n#glyph-wise-top-align[(more, complex --- text)]\n```\n\n![image|219x79](upload://3wFH18YbkFXmloAbUEDQFtCZqUw.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 10.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12359,
      "post_number": 3,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-05-12T20:04:51.997Z",
      "updated_at": "2025-05-12T20:04:51.997Z",
      "cooked": "<p>Thanks, but this seems to ignore any resizing of glyphs:</p>\n<p><code>FOO#text(size: 0.5em)[B]AR</code> yields:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/b/bfebf20c8a648dfe0468c9d92ffe2663cffc14f9.png\" alt=\"foobar1\" data-base62-sha1=\"rnOHSExVj822AsrUgi4u1PhZnrb\" width=\"155\" height=\"33\"></p>\n<p>While <code>#glyph-wise-top-align[FOO#text(size: 0.5em)[B]AR]</code> yields:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/6/6c252e2881a5ac6b7f0c4c45144abaa033a171e4.png\" alt=\"foobar2\" data-base62-sha1=\"fqHdXQnVbKcVqi8kSl2bUSz9SyE\" width=\"163\" height=\"30\"></p>",
      "raw": "Thanks, but this seems to ignore any resizing of glyphs:\n\n`FOO#text(size: 0.5em)[B]AR` yields:\n\n![foobar1|310x67, 50%](upload://rnOHSExVj822AsrUgi4u1PhZnrb.png)\n\nWhile `#glyph-wise-top-align[FOO#text(size: 0.5em)[B]AR]` yields:\n\n![foobar2|327x60, 50%](upload://fqHdXQnVbKcVqi8kSl2bUSz9SyE.png)",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 10.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 12368,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-13T06:15:05.152Z",
      "updated_at": "2025-05-13T06:15:05.152Z",
      "cooked": "<p>Show me how you actually want to use it. Changing font size for just a single glyph doesn‚Äôt look practical. You would have to create a custom parsing function that handles <code>styled</code> element for individual glyphs or a group of them.</p>",
      "raw": "Show me how you actually want to use it. Changing font size for just a single glyph doesn't look practical. You would have to create a custom parsing function that handles `styled` element for individual glyphs or a group of them.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12374,
      "post_number": 5,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-05-13T08:16:35.283Z",
      "updated_at": "2025-05-13T08:16:35.283Z",
      "cooked": "<p>I want to define a logotype, something along the lines of <code>\\LaTeX</code>, that would look like this:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/b/bfebf20c8a648dfe0468c9d92ffe2663cffc14f9.png\" alt=\"foobar1\" data-base62-sha1=\"rnOHSExVj822AsrUgi4u1PhZnrb\" width=\"155\" height=\"33\"></p>\n<p>but with the top of the smaller ‚ÄúB‚Äù aligned with the top of the other glyphs.</p>\n<p>In documents, I would then use <code>#mylogo</code> to insert the logotype, and the output would ideally pick up the current font size and family.</p>",
      "raw": "I want to define a logotype, something along the lines of `\\LaTeX`, that would look like this:\n\n![foobar1|310x67, 50%](upload://rnOHSExVj822AsrUgi4u1PhZnrb.png)\n\nbut with the top of the smaller \"B\" aligned with the top of the other glyphs.\n\nIn documents, I would then use `#mylogo` to insert the logotype, and the output would ideally pick up the current font size and family.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 12375,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-13T09:22:08.379Z",
      "updated_at": "2025-05-13T16:29:50.691Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let glyph-wise-top-align(body) = {\n  let clusters = body\n    .children\n    .map(x =&gt; if x.func() == text { x.text.clusters() } else { x })\n    .flatten()\n  set text(top-edge: \"bounds\", weight: \"bold\")\n  context {\n    let max-height = calc.max(..clusters.map(c =&gt; measure(c).height))\n    clusters.map(box.with(height: max-height)).join()\n  }\n}\n\n#let small = text.with(0.5em)\n#let my-logo = glyph-wise-top-align[FOO#small[B]AR]\n\n#my-logo\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/7da6b098f82c40d95311c4b661bb3939fe8c30ed.png\" alt=\"image\" data-base62-sha1=\"hVyOxlZfodUDfNR7SbpztaqbqA5\" width=\"107\" height=\"34\"></p>\n<hr>\n<p>There is <a href=\"https://typst.app/universe/package/metalogo\" class=\"inline-onebox\">metalogo ‚Äì Typst Universe</a>, but AFAIK it‚Äôs not perfect.</p>",
      "raw": "```typ\n#let glyph-wise-top-align(body) = {\n  let clusters = body\n    .children\n    .map(x => if x.func() == text { x.text.clusters() } else { x })\n    .flatten()\n  set text(top-edge: \"bounds\", weight: \"bold\")\n  context {\n    let max-height = calc.max(..clusters.map(c => measure(c).height))\n    clusters.map(box.with(height: max-height)).join()\n  }\n}\n\n#let small = text.with(0.5em)\n#let my-logo = glyph-wise-top-align[FOO#small[B]AR]\n\n#my-logo\n```\n\n![image|107x34](upload://hVyOxlZfodUDfNR7SbpztaqbqA5.png)\n\n---\n\nThere is https://typst.app/universe/package/metalogo, but AFAIK it's not perfect.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:55.696425"
}
{
  "topic_metadata": {
    "id": 4055,
    "title": "How do I avoid splitting footnote on multiple pages?",
    "slug": "how-do-i-avoid-splitting-footnote-on-multiple-pages",
    "posts_count": 2,
    "created_at": "2025-05-12T19:19:01.896Z",
    "last_posted_at": "2025-05-13T03:32:01.580Z",
    "views": 42,
    "like_count": 4,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "layout",
      "footnotes"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 362
  },
  "posts": [
    {
      "id": 12356,
      "post_number": 1,
      "username": "runemarholt",
      "name": "Rune Marholt",
      "created_at": "2025-05-12T19:19:02.048Z",
      "updated_at": "2025-05-12T19:24:58.631Z",
      "cooked": "<p>It appears, that the default behavior of footnotes are that they are split on multiple pages, if the other page content becomes to long. Here is a minimal example to reproduce it:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= A\n#lorem(200)\n#footnote[#text(red)[#lorem(800)]]\n#lorem(200)\n= B\n#lorem(200)\n#lorem(200)\n#lorem(200)\n</code></pre>\n<p>In itself, there is room for the footnote to be displayed on a single page, but since the text prior to the display of the footnote together with the footnote itself takes up more than one page, the footnote is split over two pages. How do I delay the displaying of the footnote to the next page, such that it fits on one page and is not split into multiple pages?</p>",
      "raw": "It appears, that the default behavior of footnotes are that they are split on multiple pages, if the other page content becomes to long. Here is a minimal example to reproduce it:\n```typ\n= A\n#lorem(200)\n#footnote[#text(red)[#lorem(800)]]\n#lorem(200)\n= B\n#lorem(200)\n#lorem(200)\n#lorem(200)\n```\nIn itself, there is room for the footnote to be displayed on a single page, but since the text prior to the display of the footnote together with the footnote itself takes up more than one page, the footnote is split over two pages. How do I delay the displaying of the footnote to the next page, such that it fits on one page and is not split into multiple pages?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 53.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 267
    },
    {
      "id": 12365,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-05-13T03:32:01.580Z",
      "updated_at": "2025-05-13T03:32:17.762Z",
      "cooked": "<p>In principle, <code>block(breakable: false)[content]</code> prevents any content from being split, so the following would work‚Ä¶</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#footnote(block(breakable: false, text(red)[#lorem(800)]))\n</code></pre>\n<p>However, it would end up separating your text from the footnote number, as a block triggers a paragraph break. In the case of really long text, they can end up in separate pages. Using a <code>box</code> instead (which is unbreakable and stays in the same paragraph) helps:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#footnote(box(text(red)[#lorem(800)]))\n</code></pre>\n<p>But there will still be a linebreak between the footnote number and its body. If that would be undesirable, the best solution then is</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// At the TOP of your document:\n#show footnote.entry: block.with(breakable: false)\n\n#footnote(text(red)[#lorem(800)])\n</code></pre>\n<p>which doesn‚Äôt affect the text in the entry and instead ensures the entry as a whole is unbreakable.</p>\n<hr>\n<p>Note that the solution above will force all entries to be unbreakable. Here‚Äôs one way to only pick a few of them.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show footnote.entry: it =&gt; if it.note.at(\"label\", default: none) == &lt;unbreakable&gt; { block(breakable: false, it) } else { it }\n\n= A\n#lorem(200)\n#footnote(text(red)[#lorem(800)])&lt;unbreakable&gt;\n#lorem(200)\n= B\n#lorem(200)\n// This one will be breakable\n#footnote(text(blue)[#lorem(800)])\n#lorem(200)\n</code></pre>\n<details>\n<summary><strong>Results</strong></summary>\n<p>\n</p><p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/1/1fc9f9c500480df76fcbfb9f58ab045252d7c87c.png\" data-download-href=\"https://forum.typst.app/uploads/default/1fc9f9c500480df76fcbfb9f58ab045252d7c87c\" title=\"unbreakable in red\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/1/1fc9f9c500480df76fcbfb9f58ab045252d7c87c_2_436x500.png\" alt=\"unbreakable in red\" data-base62-sha1=\"4xdx0IrDgHTJvpqi4SIWGphL0mM\" width=\"436\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/1/1fc9f9c500480df76fcbfb9f58ab045252d7c87c_2_436x500.png, https://forum.typst.app/uploads/default/optimized/2X/1/1fc9f9c500480df76fcbfb9f58ab045252d7c87c_2_654x750.png 1.5x, https://forum.typst.app/uploads/default/original/2X/1/1fc9f9c500480df76fcbfb9f58ab045252d7c87c.png 2x\" data-dominant-color=\"FEEBEA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">unbreakable in red</span><span class=\"informations\">752√ó862 386 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/e65abdecb05a60b2f9e8444363f63d430c645f87.png\" data-download-href=\"https://forum.typst.app/uploads/default/e65abdecb05a60b2f9e8444363f63d430c645f87\" title=\"breakable in blue\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/e65abdecb05a60b2f9e8444363f63d430c645f87_2_588x500.png\" alt=\"breakable in blue\" data-base62-sha1=\"wROen5iPXqeOwRZZxR5Km0SWYmP\" width=\"588\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/e65abdecb05a60b2f9e8444363f63d430c645f87_2_588x500.png, https://forum.typst.app/uploads/default/original/2X/e/e65abdecb05a60b2f9e8444363f63d430c645f87.png 1.5x, https://forum.typst.app/uploads/default/original/2X/e/e65abdecb05a60b2f9e8444363f63d430c645f87.png 2x\" data-dominant-color=\"E2EFFA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">breakable in blue</span><span class=\"informations\">706√ó600 327 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/3/3e2e258f6389d7a3785c48354c3c1d916d800d94.png\" data-download-href=\"https://forum.typst.app/uploads/default/3e2e258f6389d7a3785c48354c3c1d916d800d94\" title=\"breakable in blue 2\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/3/3e2e258f6389d7a3785c48354c3c1d916d800d94_2_452x500.png\" alt=\"breakable in blue 2\" data-base62-sha1=\"8S4tgAzAhqExZ6FROVPuDOEJTWk\" width=\"452\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/3/3e2e258f6389d7a3785c48354c3c1d916d800d94_2_452x500.png, https://forum.typst.app/uploads/default/optimized/2X/3/3e2e258f6389d7a3785c48354c3c1d916d800d94_2_678x750.png 1.5x, https://forum.typst.app/uploads/default/original/2X/3/3e2e258f6389d7a3785c48354c3c1d916d800d94.png 2x\" data-dominant-color=\"F7FAFD\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">breakable in blue 2</span><span class=\"informations\">716√ó791 140 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p></p>\n</details>",
      "raw": "In principle, `block(breakable: false)[content]` prevents any content from being split, so the following would work...\n\n```typ\n#footnote(block(breakable: false, text(red)[#lorem(800)]))\n```\n\nHowever, it would end up separating your text from the footnote number, as a block triggers a paragraph break. In the case of really long text, they can end up in separate pages. Using a `box` instead (which is unbreakable and stays in the same paragraph) helps:\n\n```typ\n#footnote(box(text(red)[#lorem(800)]))\n```\n\nBut there will still be a linebreak between the footnote number and its body. If that would be undesirable, the best solution then is\n\n```typ\n// At the TOP of your document:\n#show footnote.entry: block.with(breakable: false)\n\n#footnote(text(red)[#lorem(800)])\n```\n\nwhich doesn't affect the text in the entry and instead ensures the entry as a whole is unbreakable.\n\n---\nNote that the solution above will force all entries to be unbreakable. Here's one way to only pick a few of them.\n\n```typ\n#show footnote.entry: it => if it.note.at(\"label\", default: none) == <unbreakable> { block(breakable: false, it) } else { it }\n\n= A\n#lorem(200)\n#footnote(text(red)[#lorem(800)])<unbreakable>\n#lorem(200)\n= B\n#lorem(200)\n// This one will be breakable\n#footnote(text(blue)[#lorem(800)])\n#lorem(200)\n```\n\n<details>\n<summary><strong>Results</strong></summary>\n<p>\n\n![unbreakable in red|436x500](upload://4xdx0IrDgHTJvpqi4SIWGphL0mM.png)\n\n![breakable in blue|588x500](upload://wROen5iPXqeOwRZZxR5Km0SWYmP.png)\n\n![breakable in blue 2|452x500](upload://8S4tgAzAhqExZ6FROVPuDOEJTWk.png)\n\n\n</p>\n</details>",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 4,
      "reads": 16,
      "score": 63.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:47:54.957414"
}
{
  "topic_metadata": {
    "id": 4059,
    "title": "Is there a way to override math symbol shorthands",
    "slug": "is-there-a-way-to-override-math-symbol-shorthands",
    "posts_count": 2,
    "created_at": "2025-05-13T06:24:57.181Z",
    "last_posted_at": "2025-05-13T06:28:42.008Z",
    "views": 36,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "math",
      "symbols"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 25
  },
  "posts": [
    {
      "id": 12371,
      "post_number": 1,
      "username": "mndtr",
      "name": "mndtr",
      "created_at": "2025-05-13T06:24:57.270Z",
      "updated_at": "2025-05-13T19:25:39.761Z",
      "cooked": "<p>I would like to have <code>‚©æ</code> instead of <code>‚â•</code> via <code>&gt;=</code> command.</p>",
      "raw": "I would like to have `‚©æ` instead of `‚â•` via `>=` command.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 43.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1586
    },
    {
      "id": 12372,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-13T06:28:42.008Z",
      "updated_at": "2025-05-13T06:28:42.008Z",
      "cooked": "<p>Use <a href=\"https://typst.app/universe/package/quick-maths\" class=\"inline-onebox\">quick-maths ‚Äì Typst Universe</a> and <a href=\"https://typst.app/docs/reference/symbols/sym/\">https://typst.app/docs/reference/symbols/sym/</a>.</p>",
      "raw": "Use https://typst.app/universe/package/quick-maths and https://typst.app/docs/reference/symbols/sym/.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 17,
      "score": 18.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:54.228580"
}
{
  "topic_metadata": {
    "id": 4062,
    "title": "How to avoid horizontal stacks shifting margins?",
    "slug": "how-to-avoid-horizontal-stacks-shifting-margins",
    "posts_count": 7,
    "created_at": "2025-05-13T11:07:22.385Z",
    "last_posted_at": "2025-05-14T18:16:55.155Z",
    "views": 49,
    "like_count": 4,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Andrew",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 548
  },
  "posts": [
    {
      "id": 12379,
      "post_number": 1,
      "username": "retroflexivity",
      "name": "",
      "created_at": "2025-05-13T11:07:22.530Z",
      "updated_at": "2025-05-13T11:19:02.231Z",
      "cooked": "<p>I am not certain whether it is intended or a bug, but, when using <code>stack</code> with a horizontal direction, max width is calculated for each element independently, resulting in a shifted right page margin.</p>\n<p>E.g. the following code</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">this is a #h(1fr) normal paragraph\n#stack(dir: ltr, \"(1) \", [this is a #h(1fr) stack])\n</code></pre>\n<p>results in the following placing:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/c/cfab358c57ef34b48091620f11b4f00428fa50b5.png\" data-download-href=\"https://forum.typst.app/uploads/default/cfab358c57ef34b48091620f11b4f00428fa50b5\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/c/cfab358c57ef34b48091620f11b4f00428fa50b5_2_690x72.png\" alt=\"image\" data-base62-sha1=\"tD7EjV8fenPkQm0fgUhFAYPp0lT\" width=\"690\" height=\"72\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/c/cfab358c57ef34b48091620f11b4f00428fa50b5_2_690x72.png, https://forum.typst.app/uploads/default/original/2X/c/cfab358c57ef34b48091620f11b4f00428fa50b5.png 1.5x, https://forum.typst.app/uploads/default/original/2X/c/cfab358c57ef34b48091620f11b4f00428fa50b5.png 2x\" data-dominant-color=\"FCFCFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">917√ó96 11.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>The right margin of the stack is shifted to the right by the width of <code>(1) </code>. (should be noted that this is not <code>fr</code>-specific and affects line breaking as well)</p>\n<p>If this is indeed intended, my question is, what, if not <code>stack</code>, should be used for creation of e.g. custom list-like layouts?</p>",
      "raw": "I am not certain whether it is intended or a bug, but, when using `stack` with a horizontal direction, max width is calculated for each element independently, resulting in a shifted right page margin.\n\nE.g. the following code\n```typ\nthis is a #h(1fr) normal paragraph\n#stack(dir: ltr, \"(1) \", [this is a #h(1fr) stack])\n```\nresults in the following placing:\n\n![image|690x72](upload://tD7EjV8fenPkQm0fgUhFAYPp0lT.png)\n\nThe right margin of the stack is shifted to the right by the width of `(1) `. (should be noted that this is not `fr`-specific and affects line breaking as well)\n\nIf this is indeed intended, my question is, what, if not `stack`, should be used for creation of e.g. custom list-like layouts?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 14.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1590
    },
    {
      "id": 12381,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-13T11:16:59.835Z",
      "updated_at": "2025-05-13T11:20:20.425Z",
      "cooked": "<p>Hello. Please read <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a> before posting a question (from <a href=\"https://forum.typst.app/t/welcome-to-the-typst-forum/5\">the pinned topic</a>).</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p>If your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ ‚Ä¶ ````. It will then look like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n</code></pre>\n<p>If you need to highlight a code or math mode snippet instead, the language tags <code>typc</code> and <code>typm</code> do that, respectively.</p>\n</blockquote>\n</aside>",
      "raw": "Hello. Please read https://forum.typst.app/t/how-to-post-in-the-questions-category/11 before posting a question (from [the pinned topic](https://forum.typst.app/t/welcome-to-the-typst-forum/5)).\n\n[quote=\"reknih, post:1, topic:11\"]\nIf your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ ... ````. It will then look like this:\n\n```typ\n#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n```\n\nIf you need to highlight a code or math mode snippet instead, the language tags `typc` and `typm` do that, respectively.\n[/quote]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 18,
      "score": 18.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12382,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-13T11:25:26.896Z",
      "updated_at": "2025-05-13T12:24:30.343Z",
      "cooked": "<p>Hmm, I think it is a bug, since by default everything must follow the set margins. You should open an issue about it.</p>\n<aside class=\"quote no-group\" data-username=\"retroflexivity\" data-post=\"1\" data-topic=\"4062\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/r/B9312D/48.png\" class=\"avatar\"> retroflexivity:</div>\n<blockquote>\n<p>If this is indeed intended, my question is, what, if not <code>stack</code>, should be used for creation of e.g. custom list-like layouts?</p>\n</blockquote>\n</aside>\n<p>It depends on how your list layout supposed to work. Internally, lists are implemented through grid. <a href=\"https://github.com/typst/typst/blob/ad539ef4ed0551a7eb22f7c9c0ab1c0fd1b59209/crates/typst-layout/src/lists.rs?plain=1#L156-L168\" class=\"inline-onebox\">typst/crates/typst-layout/src/lists.rs at ad539ef4ed0551a7eb22f7c9c0ab1c0fd1b59209 ¬∑ typst/typst ¬∑ GitHub</a></p>\n<hr>\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/typst/issues/6275\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/issues/6275\" target=\"_blank\" rel=\"noopener\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/typst/issues/6275\" target=\"_blank\" rel=\"noopener\">Horizontal stacks shift right margin</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2025-05-13\" data-time=\"11:41:05\" data-timezone=\"UTC\">11:41AM - 13 May 25 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/retroflexivity\" target=\"_blank\" rel=\"noopener\">\n          <img alt=\"retroflexivity\" src=\"https://forum.typst.app/uploads/default/original/2X/a/a26717168c90776752b0e26a8e637a97b25bb5df.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"ECE0C5\">\n          retroflexivity\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          bug\n        </span>\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          layout\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">### Description\n\nWhen using `stack` with a horizontal direction, max width seems<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">‚Ä¶</a></span><span class=\"excerpt hidden\"> to be equal to the stack's max width for every element, resulting in a shifted right page margin.\n\nE.g. the following code\n```typ\nthis is a #h(1fr) normal paragraph\n#stack(dir: ltr, \"(1) \", [this is a #h(1fr) stack])\n```\nresults in the following layout:\n\n![Image](https://github.com/user-attachments/assets/6c0cd70e-37bc-43d8-88ec-a945e7778947)\n\n\nThe right margin of the stack is shifted to the right by the width of `(1) `.\n\n### Operating system\n\nLinux\n\n### Typst version\n\n- [x] I am using the latest version of Typst</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Hmm, I think it is a bug, since by default everything must follow the set margins. You should open an issue about it.\n\n[quote=\"retroflexivity, post:1, topic:4062\"]\nIf this is indeed intended, my question is, what, if not `stack`, should be used for creation of e.g. custom list-like layouts?\n[/quote]\n\nIt depends on how your list layout supposed to work. Internally, lists are implemented through grid. https://github.com/typst/typst/blob/ad539ef4ed0551a7eb22f7c9c0ab1c0fd1b59209/crates/typst-layout/src/lists.rs?plain=1#L156-L168\n\n---\n\nhttps://github.com/typst/typst/issues/6275",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12383,
      "post_number": 4,
      "username": "retroflexivity",
      "name": "",
      "created_at": "2025-05-13T11:35:34.734Z",
      "updated_at": "2025-05-13T11:35:34.734Z",
      "cooked": "<p>Thank you! Grids do seem more suitable, and avoid the bug.</p>\n<p>I‚Äôll file an issue right away.</p>",
      "raw": "Thank you! Grids do seem more suitable, and avoid the bug.\n\nI'll file an issue right away.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 23.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1590
    },
    {
      "id": 12456,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-05-14T14:46:58.357Z",
      "updated_at": "2025-05-14T14:46:58.357Z",
      "cooked": "<p>Also relevant, <a href=\"https://discord.com/channels/1054443721975922748/1296208677371379813\">this Discord discussion</a>:</p>\n<aside class=\"quote no-group\" data-username=\"laurmaedje\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/laurmaedje/48/14_2.png\" class=\"avatar\"> laurmaedje:</div>\n<blockquote>\n<p>TLDR: Stacks haven‚Äôt really been touched in ~2 years and are wonky and broken</p>\n<p>‚Äì <a href=\"https://discord.com/channels/1054443721975922748/1296208677371379813/1296209145623740489\">Discord</a>, <span class=\"discourse-local-date\" data-date=\"2024-10-16\" data-email-preview=\"2024-10-16T00:00:00Z UTC\">2024-10-16T00:00:00Z</span></p>\n</blockquote>\n</aside>\n<p>It‚Äôs definitely still an issue, but I‚Äôd just prefer grid out of principle. I‚Äôm not aware of something that can be done with a stack, but not a grid.</p>",
      "raw": "Also relevant, [this Discord discussion](https://discord.com/channels/1054443721975922748/1296208677371379813):\n\n[quote=\"laurmaedje\"]\nTLDR: Stacks haven't really been touched in ~2 years and are wonky and broken\n\n-- [Discord](https://discord.com/channels/1054443721975922748/1296208677371379813/1296209145623740489), [date=2024-10-16]\n[/quote]\n\nIt's definitely still an issue, but I'd just prefer grid out of principle. I'm not aware of something that can be done with a stack, but not a grid.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 16,
      "score": 23.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 12465,
      "post_number": 6,
      "username": "retroflexivity",
      "name": "",
      "created_at": "2025-05-14T18:10:11.023Z",
      "updated_at": "2025-05-14T18:10:11.023Z",
      "cooked": "<p>Yeah, I‚Äôve switched to a grid already and it‚Äôs working great, thank you</p>\n<p>Which leads me to a question: why is stack a thing anyway, given there is grid?</p>\n<p>(sorry if it‚Äôs not ok to bump a closed topic)</p>",
      "raw": "Yeah, I've switched to a grid already and it's working great, thank you\n\nWhich leads me to a question: why is stack a thing anyway, given there is grid?\n\n(sorry if it's not ok to bump a closed topic)",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 8.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1590
    },
    {
      "id": 12468,
      "post_number": 7,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-05-14T18:16:55.155Z",
      "updated_at": "2025-05-14T18:16:55.155Z",
      "cooked": "<p>It‚Äôs just a small follow-up, so not too bad imo.</p>\n<p>I assume just history. At some point the two functions were considered to be solutions for different use cases (and the defaults of the two may still support that view), but once grid became the ‚Äúdominant‚Äù tool for this kind of task, development of stack stalled. Since you have to actively spend effort to remove something (not just the code, deprecation first and then updating the docs) it just didn‚Äôt happen yet.</p>",
      "raw": "It's just a small follow-up, so not too bad imo.\n\nI assume just history. At some point the two functions were considered to be solutions for different use cases (and the defaults of the two may still support that view), but once grid became the \"dominant\" tool for this kind of task, development of stack stalled. Since you have to actively spend effort to remove something (not just the code, deprecation first and then updating the docs) it just didn't happen yet.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 15,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:47:53.516768"
}
{
  "topic_metadata": {
    "id": 4071,
    "title": "Which semver rules are enforced for versions of published packages?",
    "slug": "which-semver-rules-are-enforced-for-versions-of-published-packages",
    "posts_count": 8,
    "created_at": "2025-05-13T18:01:14.941Z",
    "last_posted_at": "2025-05-17T17:38:59.947Z",
    "views": 67,
    "like_count": 3,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "Lumi",
    "tags": [
      "packages",
      "package-authoring"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 1440
  },
  "posts": [
    {
      "id": 12398,
      "post_number": 1,
      "username": "Lumi",
      "name": "",
      "created_at": "2025-05-13T18:01:15.096Z",
      "updated_at": "2025-05-14T03:45:43.605Z",
      "cooked": "<p>When publishing a typst package, the guidelines say package-versioning should follow SemVer, which I have two questions about:</p>\n<ol>\n<li>typst still being in version 0.x.y, and frequently introducing breaking changes (which is not bad!), is it permitted to publish a package with major version larger than 0?</li>\n<li>As brought up in <a href=\"https://github.com/cetz-package/cetz/issues/867\" rel=\"noopener nofollow ugc\">a discussion for CeTZ</a>, if a package has major version 0 and publishes breaking changes, only incrementing the patch version is SemVer-compliant. However, many software-systems, e.g. <a href=\"https://doc.rust-lang.org/cargo/reference/semver.html#change-categories\" rel=\"noopener nofollow ugc\">cargo</a>, extend the SemVer-spec by saying that, while in version 0.y.z, increments in the y-version can be treated as major releases (breaking changes), and increments in the z-version can be treated as minor releases. In version 0.0.z, incrementing z is always a major release. Would it make sense to adopt a similar rule for typst packages?</li>\n</ol>",
      "raw": "When publishing a typst package, the guidelines say package-versioning should follow SemVer, which I have two questions about:\n\n1. typst still being in version 0.x.y, and frequently introducing breaking changes (which is not bad!), is it permitted to publish a package with major version larger than 0?\n1. As brought up in [a discussion for CeTZ](https://github.com/cetz-package/cetz/issues/867), if a package has major version 0 and publishes breaking changes, only incrementing the patch version is SemVer-compliant. However, many software-systems, e.g. [cargo](https://doc.rust-lang.org/cargo/reference/semver.html#change-categories), extend the SemVer-spec by saying that, while in version 0.y.z, increments in the y-version can be treated as major releases (breaking changes), and increments in the z-version can be treated as minor releases. In version 0.0.z, incrementing z is always a major release. Would it make sense to adopt a similar rule for typst packages?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 14.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1500
    },
    {
      "id": 12405,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-13T19:49:06.276Z",
      "updated_at": "2025-05-13T19:49:06.276Z",
      "cooked": "<ol>\n<li>A lot of packages have new major version incremented (including <a href=\"https://codeberg.org/Andrew15-5/text-dirr\" class=\"inline-onebox\">Andrew15-5/text-dirr: Get resolved value for `text.dir`. - Codeberg.org</a>). You are not tied to Typst‚Äôs version.</li>\n<li>I don‚Äôt think any additional rules should be applied or added, but you can open an issue about this.</li>\n</ol>\n<p>Just be aware of breaking changes and properly document them. I guess you already know how SemVer works.</p>",
      "raw": "1. A lot of packages have new major version incremented (including https://codeberg.org/Andrew15-5/text-dirr). You are not tied to Typst's version.\n2. I don't think any additional rules should be applied or added, but you can open an issue about this.\n\nJust be aware of breaking changes and properly document them. I guess you already know how SemVer works.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12407,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-05-13T19:50:37.912Z",
      "updated_at": "2025-05-14T08:35:58.361Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Lumi\" data-post=\"1\" data-topic=\"4071\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/l/007AFF/48.png\" class=\"avatar\"> Lumi:</div>\n<blockquote>\n<p>is it permitted to publish a package with major version larger than 0?</p>\n</blockquote>\n</aside>\n<p>It is, and there are several such packages. Looking through announcements on this forum: <a href=\"https://forum.typst.app/t/frame-it-v1-0-0-framing-for-theorems-definitions-customizable-beautiful-seamless/2213\" class=\"inline-onebox\">Frame-it v1.0.0: Framing for Theorems, Definitions, ‚Ä¶ ‚Äì Customizable, Beautiful, Seamless</a> and <a href=\"https://forum.typst.app/t/codly-v1-1-0-beautiful-and-easy-code-blocks/1935\" class=\"inline-onebox\">Codly v1.1.0: beautiful and easy code blocks</a>, for example.</p>\n<p>Regarding the second question ‚Äì rant incoming: I treat my own packages (which are all 0.x so far) like cargo and try to avoid breaking changes in patch version changes. It‚Äôs important to remember that Semver is only a convention; if we as a community de facto conform to that interpretation, that becomes what Typst package versions mean. Likewise, if we use three-component versions but don‚Äôt adhere to semver, there‚Äôs no tool inherently stopping us from doing so (but let‚Äôs hope we don‚Äôt go there).</p>\n<p>And since it‚Äôs tangentially relevant: package versions (currently) can‚Äôt specify pre-releases, etc., so Typst does not implement full semver anyway.</p>\n<p>Typst‚Äôs stance on compatibility is (currently) more strict anyway: you have to always specify full package versions. What would be a ‚Äúnon-breaking change‚Äù to a programmer may be a breaking change to an author; let‚Äôs say changing some font size. Suddenly your pages look horrible because a paragraph takes an extra line. So you could argue that Typst ignores Semver‚Äôs definition of compatibility anyway.</p>\n<p>&lt;/rant&gt;</p>\n<p>To come back to your question more directly:</p>\n<aside class=\"quote no-group\" data-username=\"Lumi\" data-post=\"1\" data-topic=\"4071\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/l/007AFF/48.png\" class=\"avatar\"> Lumi:</div>\n<blockquote>\n<p>Would it make sense to adopt a similar rule for typst packages?</p>\n</blockquote>\n</aside>\n<p>I personally adopted that rule, and while I don‚Äôt know about others‚Äô intentions, the Typst ecosystem broadly feels like this. I‚Äôm not sure if we really need to formalize this, since I‚Äôm not sure what practical difference it would make. Two reasons against it I can see would be 1) package authors are open source authors, and I wouldn‚Äôt want to force this rule on someone who feels it‚Äôs a nuisance to them, and 2) if a package is unpredictable with breaking changes, that may impact its adoption anyway, so I think that creates enough regulation on its own.</p>",
      "raw": "[quote=\"Lumi, post:1, topic:4071\"]\nis it permitted to publish a package with major version larger than 0?\n[/quote]\n\nIt is, and there are several such packages. Looking through announcements on this forum: https://forum.typst.app/t/frame-it-v1-0-0-framing-for-theorems-definitions-customizable-beautiful-seamless/2213 and https://forum.typst.app/t/codly-v1-1-0-beautiful-and-easy-code-blocks/1935, for example.\n\nRegarding the second question -- rant incoming: I treat my own packages (which are all 0.x so far) like cargo and try to avoid breaking changes in patch version changes. It's important to remember that Semver is only a convention; if we as a community de facto conform to that interpretation, that becomes what Typst package versions mean. Likewise, if we use three-component versions but don't adhere to semver, there's no tool inherently stopping us from doing so (but let's hope we don't go there).\n\nAnd since it's tangentially relevant: package versions (currently) can't specify pre-releases, etc., so Typst does not implement full semver anyway.\n\nTypst's stance on compatibility is (currently) more strict anyway: you have to always specify full package versions. What would be a \"non-breaking change\" to a programmer may be a breaking change to an author; let's say changing some font size. Suddenly your pages look horrible because a paragraph takes an extra line. So you could argue that Typst ignores Semver's definition of compatibility anyway.\n\n\\</rant>\n\nTo come back to your question more directly:\n\n[quote=\"Lumi, post:1, topic:4071\"]\nWould it make sense to adopt a similar rule for typst packages?\n[/quote]\n\nI personally adopted that rule, and while I don't know about others' intentions, the Typst ecosystem broadly feels like this. I'm not sure if we really need to formalize this, since I'm not sure what practical difference it would make. Two reasons against it I can see would be 1) package authors are open source authors, and I wouldn't want to force this rule on someone who feels it's a nuisance to them, and 2) if a package is unpredictable with breaking changes, that may impact its adoption anyway, so I think that creates enough regulation on its own.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 1,
      "reads": 21,
      "score": 29.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 12410,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-13T19:59:13.132Z",
      "updated_at": "2025-05-13T19:59:35.742Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"SillyFreak\" data-post=\"3\" data-topic=\"4071\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/sillyfreak/48/1483_2.png\" class=\"avatar\"> SillyFreak:</div>\n<blockquote>\n<p>So you could argue that Typst ignores Semver‚Äôs definition of compatibility anyway.</p>\n</blockquote>\n</aside>\n<p>Typst is in its 0 major version, so any change is fine, moreover changelog always documents all breaking changes. The packages on the other hand, well I would assume that any visual change is breaking, because of the nature of documents. So if a package treats such changes as not breaking, then that‚Äôs the package‚Äôs fault. <span class=\"spoiler\">Typst catching strays out of nowhere.</span></p>\n<p>P.S. Using Tytanic will quickly show you what is a breaking change and what isn‚Äôt. Which is a great tool to use anyway.</p>",
      "raw": "[quote=\"SillyFreak, post:3, topic:4071\"]\nSo you could argue that Typst ignores Semver‚Äôs definition of compatibility anyway.\n[/quote]\n\nTypst is in its 0 major version, so any change is fine, moreover changelog always documents all breaking changes. The packages on the other hand, well I would assume that any visual change is breaking, because of the nature of documents. So if a package treats such changes as not breaking, then that's the package's fault. [spoiler]Typst catching strays out of nowhere.[/spoiler]\n\nP.S. Using Tytanic will quickly show you what is a breaking change and what isn't. Which is a great tool to use anyway.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12415,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-05-13T20:58:19.974Z",
      "updated_at": "2025-05-13T20:58:19.974Z",
      "cooked": "<p>I‚Äôm aware of all that. I was just saying, since the package repo says ‚ÄúPackage versioning should follow <a href=\"https://semver.org/\">SemVer</a>.‚Äù*, the fact that Typst doesn‚Äôt use semver compatibility could be considered a mismatch between the docs (that sentence) and what Typst actually does.</p>\n<p>*actually I misremembered and thought that the statement was stronger, something like ‚ÄúTypst uses SemVer for packages‚Äù, in which case that hypothetical criticism would make a bit more sense.</p>",
      "raw": "I'm aware of all that. I was just saying, since the package repo says \"Package versioning should follow [SemVer](https://semver.org/).\"\\*, the fact that Typst doesn't use semver compatibility could be considered a mismatch between the docs (that sentence) and what Typst actually does.\n\n\\*actually I misremembered and thought that the statement was stronger, something like \"Typst uses SemVer for packages\", in which case that hypothetical criticism would make a bit more sense.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 12433,
      "post_number": 6,
      "username": "Lumi",
      "name": "",
      "created_at": "2025-05-14T10:23:50.075Z",
      "updated_at": "2025-05-14T10:23:50.075Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"SillyFreak\" data-post=\"3\" data-topic=\"4071\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/sillyfreak/48/1483_2.png\" class=\"avatar\"> SillyFreak:</div>\n<blockquote>\n<p>I‚Äôm not sure if we really need to formalize this, since I‚Äôm not sure what practical difference it would make.</p>\n</blockquote>\n</aside>\n<p>Currently, if a package is on version 0.x.y, increments in <code>x</code> carry no further specified meaning compared to increments in <code>y</code>. If <code>x&gt;0</code>, then breaking changes can be published, despite only incrementing <code>y</code>. Again, such an action is semver-compliant, but not compliant with e.g. cargo‚Äôs semver-rules.</p>\n<p>A practical difference is that, when updating your packages, you might expect ‚Äì and I did, when updating CeTZ ‚Äì that a package updating from <code>0.3.2</code> to <code>0.3.3</code> does <em>not</em> introduce any breaking API-changes. CeTZ <em>did</em> have a (small) <a href=\"https://github.com/cetz-package/cetz/blob/b60e7e970d7a9d004f5c5f377b32282225ca2df5/CHANGES.md?plain=1#L7\" rel=\"noopener nofollow ugc\">breaking change</a>, which surprised me.</p>\n<p>‚ÄúVisual-changes are breaking-changes‚Äù is a good point. I can imagine people having different intuitions about that, some agreeing that it‚Äôs a breaking-change while others disagreeing. If I open an issue in the typst-package-repo about semver, I should bring that up as well. Thank you all!</p>",
      "raw": "[quote=\"SillyFreak, post:3, topic:4071\"]\nI‚Äôm not sure if we really need to formalize this, since I‚Äôm not sure what practical difference it would make.\n[/quote]\n\nCurrently, if a package is on version 0.x.y, increments in `x` carry no further specified meaning compared to increments in `y`. If `x>0`, then breaking changes can be published, despite only incrementing `y`. Again, such an action is semver-compliant, but not compliant with e.g. cargo's semver-rules.\n\nA practical difference is that, when updating your packages, you might expect -- and I did, when updating CeTZ -- that a package updating from `0.3.2` to `0.3.3` does _not_ introduce any breaking API-changes. CeTZ _did_ have a (small) [breaking change](https://github.com/cetz-package/cetz/blob/b60e7e970d7a9d004f5c5f377b32282225ca2df5/CHANGES.md?plain=1#L7), which surprised me.\n\n\"Visual-changes are breaking-changes\" is a good point. I can imagine people having different intuitions about that, some agreeing that it's a breaking-change while others disagreeing. If I open an issue in the typst-package-repo about semver, I should bring that up as well. Thank you all!",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 20,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1500
    },
    {
      "id": 12445,
      "post_number": 7,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-05-14T10:58:22.276Z",
      "updated_at": "2025-05-14T10:58:22.276Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Lumi\" data-post=\"6\" data-topic=\"4071\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/l/007AFF/48.png\" class=\"avatar\"> Lumi:</div>\n<blockquote>\n<p>Currently, if a package is on version 0.x.y, increments in <code>x</code> carry no further specified meaning compared to increments in <code>y</code>. If <code>x&gt;0</code>, then breaking changes can be published, despite only incrementing <code>y</code>. Again, such an action is semver-compliant, but not compliant with e.g. cargo‚Äôs semver-rules.</p>\n</blockquote>\n</aside>\n<p>I just want to note: the <em>reality</em> is that packages can be released that break either semver‚Äôs or cargo-style-semver‚Äôs compatibility conventions. This is true for Universe (where a review for breaking changes would be infeasible), as well as for <a href=\"http://crates.io\">crates.io</a> (where no review happens). The difference is that, since Cargo resolves crate versions, users will notice the breaking changes <em>without having changed anything</em>.</p>\n<p>So to state my opinion bluntly: since Typst does not resolve compatible versions, what we <em>declare</em> these versions to mean doesn‚Äôt matter that much. That‚Äôs what I meant by saying ‚ÄúI‚Äôm not sure what <em>practical</em> difference it would make.‚Äù</p>\n<aside class=\"quote no-group\" data-username=\"Lumi\" data-post=\"6\" data-topic=\"4071\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/l/007AFF/48.png\" class=\"avatar\"> Lumi:</div>\n<blockquote>\n<p>A practical difference is that, when updating your packages, you might expect ‚Äì and I did, when updating CeTZ ‚Äì that a package updating from <code>0.3.2</code> to <code>0.3.3</code> does <em>not</em> introduce any breaking API-changes. CeTZ <em>did</em> have a (small) <a href=\"https://github.com/cetz-package/cetz/blob/b60e7e970d7a9d004f5c5f377b32282225ca2df5/CHANGES.md?plain=1#L7\">breaking change </a>, which surprised me.</p>\n</blockquote>\n</aside>\n<p>With all that said, yes that would surprise me too. I understand people who are reluctant to go beyond major version 1, 2, 3 and thus we have zerover, but I don‚Äôt see much reason to shy away from 0.4, 0.5, 0.6, so I would just follow the cargo conventions. But in the end, since updating depencencies in Typst <em>is</em> manual, I do it relatively deliberately, and stumbling over a breaking change is not something that worries me too much. I see it this way: if I don‚Äôt need a new feature, I can simply not upgrade. And if I do need it, I need to fix breakage no matter what the version number introducing that feature is.</p>",
      "raw": "[quote=\"Lumi, post:6, topic:4071\"]\nCurrently, if a package is on version 0.x.y, increments in `x` carry no further specified meaning compared to increments in `y`. If `x>0`, then breaking changes can be published, despite only incrementing `y`. Again, such an action is semver-compliant, but not compliant with e.g. cargo‚Äôs semver-rules.\n[/quote]\n\nI just want to note: the _reality_ is that packages can be released that break either semver's or cargo-style-semver's compatibility conventions. This is true for Universe (where a review for breaking changes would be infeasible), as well as for crates.io (where no review happens). The difference is that, since Cargo resolves crate versions, users will notice the breaking changes _without having changed anything_.\n\nSo to state my opinion bluntly: since Typst does not resolve compatible versions, what we _declare_ these versions to mean doesn't matter that much. That's what I meant by saying \"I‚Äôm not sure what _practical_ difference it would make.\"\n\n[quote=\"Lumi, post:6, topic:4071\"]\nA practical difference is that, when updating your packages, you might expect ‚Äì and I did, when updating CeTZ ‚Äì that a package updating from `0.3.2` to `0.3.3` does *not* introduce any breaking API-changes. CeTZ *did* have a (small) [breaking change ](https://github.com/cetz-package/cetz/blob/b60e7e970d7a9d004f5c5f377b32282225ca2df5/CHANGES.md?plain=1#L7), which surprised me.\n[/quote]\n\nWith all that said, yes that would surprise me too. I understand people who are reluctant to go beyond major version 1, 2, 3 and thus we have zerover, but I don't see much reason to shy away from 0.4, 0.5, 0.6, so I would just follow the cargo conventions. But in the end, since updating depencencies in Typst _is_ manual, I do it relatively deliberately, and stumbling over a breaking change is not something that worries me too much. I see it this way: if I don't need a new feature, I can simply not upgrade. And if I do need it, I need to fix breakage no matter what the version number introducing that feature is.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 18,
      "score": 8.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 12673,
      "post_number": 8,
      "username": "Lumi",
      "name": "",
      "created_at": "2025-05-17T17:38:59.947Z",
      "updated_at": "2025-05-17T17:41:56.010Z",
      "cooked": "<p>To summarise:</p>\n<ol>\n<li>Packages with major version &gt; 0 exist and are not prohibited.</li>\n<li>In version 0.y.z, treating increments in y as major and increments in z as minor is good and useful, but not enforced.</li>\n<li>Visual changes (in the rendered document) are usually not breaking, but use your best judgment.</li>\n</ol>\n<p>Thank you to everyone who followed this thread, and to Laurenz for answering my questions in the related <a href=\"https://github.com/typst/packages/issues/2387\" rel=\"noopener nofollow ugc\">issue in the typst-packages repo</a>.</p>",
      "raw": "To summarise:\n\n1. Packages with major version > 0 exist and are not prohibited.\n2. In version 0.y.z, treating increments in y as major and increments in z as minor is good and useful, but not enforced.\n3. Visual changes (in the rendered document) are usually not breaking, but use your best judgment.\n\nThank you to everyone who followed this thread, and to Laurenz for answering my questions in the related [issue in the typst-packages repo](https://github.com/typst/packages/issues/2387).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 15,
      "score": 63.0,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1500
    }
  ],
  "scraped_at": "2025-06-10T09:47:52.801917"
}
{
  "topic_metadata": {
    "id": 4076,
    "title": "How to properly align symbols in math mode When limits() function is used?",
    "slug": "how-to-properly-align-symbols-in-math-mode-when-limits-function-is-used",
    "posts_count": 5,
    "created_at": "2025-05-13T20:49:38.487Z",
    "last_posted_at": "2025-05-14T18:15:03.797Z",
    "views": 49,
    "like_count": 1,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "math",
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 653
  },
  "posts": [
    {
      "id": 12414,
      "post_number": 1,
      "username": "Paul744",
      "name": "Paul",
      "created_at": "2025-05-13T20:49:38.625Z",
      "updated_at": "2025-05-14T17:01:55.463Z",
      "cooked": "<p>As a minimal example of what I‚Äôm referring to, consider:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let dd = math.upright(\"d\")\n#let Re = math.upright(\"Re\")\n\n#math.equation(block: true, numbering: none, $\n    integral_(RR^(1, d - 1)) frac(1, (l_(E)^(2) + m^(2))^(A)) frac(dd^(d) l_(E), (2 pi)^(d)) &amp;= 1/(Gamma(A)) integral_(RR^(1, d - 1)) integral_(0)^(infinity) s^(A - 1) e^(-s(l_(E)^(2) + m^(2))) dd s thin frac(dd^(d) l_(E), (2 pi)^(d)) \\\n    &amp;limits(=)^(Re(d) &gt; 0) (2 pi^(d/2))/(Gamma(A) (2 pi)^(d) thin Gamma(d/2)) Gamma(d/2)/2 integral_(0)^(infinity) s^(A - 1) e^(-s m^(2)) s^(-d/2) dd s \\\n$)\n</code></pre>\n<p>If one renders this example calculation, one will find that the alignment in the line with ‚Äú&amp;limits(=)^(Re(d) &gt; 0)‚Äù will align the start of the text with the start of the other equalities, and similarly for the next line. Is there a way to ensure the alignment always works with the equality and not the superscripts?</p>\n<p>I tried moving the ‚Äú&amp;‚Äù inside the limits(), but that didn‚Äôt work for me.</p>",
      "raw": "As a minimal example of what I'm referring to, consider:\n\n```typst\n#let dd = math.upright(\"d\")\n#let Re = math.upright(\"Re\")\n\n#math.equation(block: true, numbering: none, $\n    integral_(RR^(1, d - 1)) frac(1, (l_(E)^(2) + m^(2))^(A)) frac(dd^(d) l_(E), (2 pi)^(d)) &= 1/(Gamma(A)) integral_(RR^(1, d - 1)) integral_(0)^(infinity) s^(A - 1) e^(-s(l_(E)^(2) + m^(2))) dd s thin frac(dd^(d) l_(E), (2 pi)^(d)) \\\n    &limits(=)^(Re(d) > 0) (2 pi^(d/2))/(Gamma(A) (2 pi)^(d) thin Gamma(d/2)) Gamma(d/2)/2 integral_(0)^(infinity) s^(A - 1) e^(-s m^(2)) s^(-d/2) dd s \\\n$)\n```\n\nIf one renders this example calculation, one will find that the alignment in the line with \"&limits(=)^(Re(d) > 0)\" will align the start of the text with the start of the other equalities, and similarly for the next line. Is there a way to ensure the alignment always works with the equality and not the superscripts?\n\nI tried moving the \"&\" inside the limits(), but that didn't work for me.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 24.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 788
    },
    {
      "id": 12417,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-13T22:22:31.023Z",
      "updated_at": "2025-05-14T17:40:45.187Z",
      "cooked": "<p>Your minimal example doesn‚Äôt compile, it‚Äôs also very big for what you are asking. See <a href=\"https://sscce.org/\">https://sscce.org/</a>. And you don‚Äôt need the <code>limits</code> call. You can open an issue for this, as I don‚Äôt see any native solution.</p>\n<p>Here is a hack:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.attach: it =&gt; {\n  let attachments = it.fields()\n  let base = attachments.remove(\"base\")\n  if base != $=$.body { return it }\n  let top = attachments.remove(\"t\")\n  if not attachments.values().all(x =&gt; x == none) { return it }\n  top = $script(top)$\n  base\n  context {\n    let width = measure(top).width\n    let space = measure(\" \").width\n\n    // place(dx: -space * 2 - width / 2, dy: -1.15em, top)\n\n    place(dx: -space - width / 2, dy: -1.15em, top)\n    h(width / 2)\n  }\n}\n</code></pre>\n<details><summary>Full example</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set math.equation(numbering: \"(1)\")\n\n#let dd = math.upright(\"d\")\n#let Re = $upright(\"Re\")$\n\n#show math.attach: it =&gt; {\n  let attachments = it.fields()\n  let base = attachments.remove(\"base\")\n  if base != $=$.body { return it }\n  let top = attachments.remove(\"t\")\n  if not attachments.values().all(x =&gt; x == none) { return it }\n  base\n  top = $script(top)$\n  context {\n    let width = measure(top).width\n    let w = measure(\" \").width\n\n    // place(dx: -w * 2 - width / 2, dy: -1.15em, top)\n\n    place(dx: -w - width / 2, dy: -1.15em, top)\n    h(width / 2)\n  }\n}\n\n#[\n  #set math.equation(numbering: none)\n  $\n    integral_(RR^(1, d - 1)) frac(1, (l_E^2 + m^2)^A) frac(dd^d l_E, (2 pi)^d)\n    &amp;= 1 / Gamma(A) integral_(RR^(1, d - 1)) integral_0^oo s^(A - 1) e^(-s(l_E^2 + m^2)) dd s thin frac(dd^d l_E, (2 pi)^d) \\\n    &amp;=^(Re(d) &gt; 0) (2 pi^(d / 2)) / (Gamma(A) (2 pi)^d thin Gamma(d / 2)) Gamma(d / 2) / 2 integral_0^oo s^(A - 1) e^(-s m^2) s^(-d / 2) dd s \\\n  $\n]\n</code></pre>\n</details>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/c/c7dcd4026cac022c56b2af9b1a4be0d282b46e96.png\" alt=\"image\" data-base62-sha1=\"sw48BrPs7vwJS5xy1lcs1KLk9ro\" width=\"449\" height=\"99\"></p>\n<hr>\n<aside class=\"quote no-group\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p>It would be great if you could post the <strong>smallest possible code samples</strong> that allow people to see what your problem is.</p>\n</blockquote>\n</aside>",
      "raw": "Your minimal example doesn't compile, it's also very big for what you are asking. See https://sscce.org/. And you don't need the `limits` call. You can open an issue for this, as I don't see any native solution.\n\nHere is a hack:\n\n```typ\n#show math.attach: it => {\n  let attachments = it.fields()\n  let base = attachments.remove(\"base\")\n  if base != $=$.body { return it }\n  let top = attachments.remove(\"t\")\n  if not attachments.values().all(x => x == none) { return it }\n  top = $script(top)$\n  base\n  context {\n    let width = measure(top).width\n    let space = measure(\" \").width\n\n    // place(dx: -space * 2 - width / 2, dy: -1.15em, top)\n\n    place(dx: -space - width / 2, dy: -1.15em, top)\n    h(width / 2)\n  }\n}\n```\n\n<details><summary>Full example</summary>\n\n```typ\n#set math.equation(numbering: \"(1)\")\n\n#let dd = math.upright(\"d\")\n#let Re = $upright(\"Re\")$\n\n#show math.attach: it => {\n  let attachments = it.fields()\n  let base = attachments.remove(\"base\")\n  if base != $=$.body { return it }\n  let top = attachments.remove(\"t\")\n  if not attachments.values().all(x => x == none) { return it }\n  base\n  top = $script(top)$\n  context {\n    let width = measure(top).width\n    let w = measure(\" \").width\n\n    // place(dx: -w * 2 - width / 2, dy: -1.15em, top)\n\n    place(dx: -w - width / 2, dy: -1.15em, top)\n    h(width / 2)\n  }\n}\n\n#[\n  #set math.equation(numbering: none)\n  $\n    integral_(RR^(1, d - 1)) frac(1, (l_E^2 + m^2)^A) frac(dd^d l_E, (2 pi)^d)\n    &= 1 / Gamma(A) integral_(RR^(1, d - 1)) integral_0^oo s^(A - 1) e^(-s(l_E^2 + m^2)) dd s thin frac(dd^d l_E, (2 pi)^d) \\\n    &=^(Re(d) > 0) (2 pi^(d / 2)) / (Gamma(A) (2 pi)^d thin Gamma(d / 2)) Gamma(d / 2) / 2 integral_0^oo s^(A - 1) e^(-s m^2) s^(-d / 2) dd s \\\n  $\n]\n```\n\n</details>\n\n![image|449x99](upload://sw48BrPs7vwJS5xy1lcs1KLk9ro.png)\n\n---\n\n[quote=\"reknih, post:1, topic:11\"]\nIt would be great if you could post the **smallest possible code samples** that allow people to see what your problem is.\n[/quote]",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 14.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12459,
      "post_number": 3,
      "username": "Paul744",
      "name": "Paul",
      "created_at": "2025-05-14T17:02:50.274Z",
      "updated_at": "2025-05-14T17:02:50.274Z",
      "cooked": "<p>Thank you. And I fixed the original post, including the missing <span class=\"hashtag-raw\">#let</span> dd command and cutting down on the example size.</p>",
      "raw": "Thank you. And I fixed the original post, including the missing #let dd command and cutting down on the example size.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 18,
      "score": 23.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 788
    },
    {
      "id": 12462,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-14T17:43:53.295Z",
      "updated_at": "2025-05-14T17:43:53.295Z",
      "cooked": "<p>Nice. I don‚Äôt know if you‚Äôve noticed it, but you also don‚Äôt need the countless parentheses around simple super-/subscript values. You shouldn‚Äôt overcomplicate an already complex expression. You can also move out repetitive chunks and name them. If the name is short and descriptive, then it should improve overall readability.</p>",
      "raw": "Nice. I don't know if you've noticed it, but you also don't need the countless parentheses around simple super-/subscript values. You shouldn't overcomplicate an already complex expression. You can also move out repetitive chunks and name them. If the name is short and descriptive, then it should improve overall readability.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 8.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12467,
      "post_number": 5,
      "username": "Paul744",
      "name": "Paul",
      "created_at": "2025-05-14T18:15:03.797Z",
      "updated_at": "2025-05-14T18:15:03.797Z",
      "cooked": "<p>I am aware regarding the parentheses. I‚Äôve always just included the extra from the outset, since I find myself regularly enough needing to go back and add more to the subscripts, requiring the parentheses anyways. I think of it as saving time up front, but as I get better, I‚Äôll probably work on anticipating when I really need them.</p>",
      "raw": "I am aware regarding the parentheses. I've always just included the extra from the outset, since I find myself regularly enough needing to go back and add more to the subscripts, requiring the parentheses anyways. I think of it as saving time up front, but as I get better, I'll probably work on anticipating when I really need them.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 788
    }
  ],
  "scraped_at": "2025-06-10T09:47:52.046575"
}
{
  "topic_metadata": {
    "id": 4080,
    "title": "How does ..array work? (splat/spread?)",
    "slug": "how-does-array-work-splat-spread",
    "posts_count": 3,
    "created_at": "2025-05-14T03:56:56.463Z",
    "last_posted_at": "2025-05-14T12:32:10.034Z",
    "views": 57,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "vmartel08",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 248
  },
  "posts": [
    {
      "id": 12424,
      "post_number": 1,
      "username": "William",
      "name": "William",
      "created_at": "2025-05-14T03:56:56.612Z",
      "updated_at": "2025-05-14T03:56:56.612Z",
      "cooked": "<p>I don‚Äôt know where to find it in the docs as it is hard to search for. It seams like something like splat in ruby, but I don‚Äôt know how to use it other than repeatedly expanding an array into a grid. I‚Äôm trying to understand its uses on a deeper level though.</p>\n<p>working code</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#grid(\n  ..(4,8,8,9,89,6,66).map(str)\n)\n</code></pre>\n<p>non working code:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#{..(4,8,8,9,89,6,66).map(str)}\n\n#{(4,8,8,9,89,6,66).map(str)..\" \"}  // would unpack to a string in ruby ex [7,7,9,9]*\" \"\n</code></pre>\n<p>I do not know what would allow one to work and the other to not. If anyone could help explain the nuances of this operator or even how to search it in docs, I‚Äôd be grateful.</p>",
      "raw": "I don't know where to find it in the docs as it is hard to search for. It seams like something like splat in ruby, but I don't know how to use it other than repeatedly expanding an array into a grid. I'm trying to understand its uses on a deeper level though.\n\nworking code\n``` typst\n#grid(\n  ..(4,8,8,9,89,6,66).map(str)\n)\n```\n\nnon working code:\n``` typst\n#{..(4,8,8,9,89,6,66).map(str)}\n\n#{(4,8,8,9,89,6,66).map(str)..\" \"}  // would unpack to a string in ruby ex [7,7,9,9]*\" \"\n```\n\nI do not know what would allow one to work and the other to not. If anyone could help explain the nuances of this operator or even how to search it in docs, I'd be grateful.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 70.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1356
    },
    {
      "id": 12425,
      "post_number": 2,
      "username": "vmartel08",
      "name": "Vincent Martel",
      "created_at": "2025-05-14T06:06:49.942Z",
      "updated_at": "2025-05-14T06:08:35.848Z",
      "cooked": "<p>Hi there,</p>\n<p>Lots of examples in the docs if you search for <em>spread</em> or <em>sink</em>.</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/foundations/arguments/#spreading\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/foundations/arguments/#spreading\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/foundations/arguments/#spreading\" target=\"_blank\" rel=\"noopener\">Arguments Type ‚Äì Typst Documentation</a></h3>\n\n  <p>Documentation for the Arguments type.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>But used in other examples like the <a href=\"https://typst.app/docs/guides/table-guide/\" class=\"inline-onebox\">Table guide ‚Äì Typst Documentation</a> and many forum posts.</p>",
      "raw": "Hi there,\n\nLots of examples in the docs if you search for *spread* or *sink*. \n\nhttps://typst.app/docs/reference/foundations/arguments/#spreading\n\nBut used in other examples like the https://typst.app/docs/guides/table-guide/ and many forum posts.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 27,
      "score": 35.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 936
    },
    {
      "id": 12449,
      "post_number": 3,
      "username": "William",
      "name": "William",
      "created_at": "2025-05-14T12:32:10.034Z",
      "updated_at": "2025-05-14T12:32:10.034Z",
      "cooked": "<p>Thank you. I was having real trouble finding it searching ‚Äú‚Ä¶ typst‚Äù and ‚Äúsplat typst‚Äù and looking through the array documentation.</p>\n<p>I‚Äôd asked Claude.ai and it called it spread but I didn‚Äôt realize that would be the search term that I wanted, so I just asked here.</p>\n<p>Anyway, thank you for answering here. It should hopefully help anyone who searches ‚Äúsplat typst‚Äù in the future.</p>",
      "raw": "Thank you. I was having real trouble finding it searching \".. typst\" and \"splat typst\" and looking through the array documentation. \n\nI'd asked Claude.ai and it called it spread but I didn't realize that would be the search term that I wanted, so I just asked here.\n\nAnyway, thank you for answering here. It should hopefully help anyone who searches \"splat typst\" in the future.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 19.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1356
    }
  ],
  "scraped_at": "2025-06-10T09:47:51.315737"
}
{
  "topic_metadata": {
    "id": 4087,
    "title": "How can I change text color in nested texts?",
    "slug": "how-can-i-change-text-color-in-nested-texts",
    "posts_count": 3,
    "created_at": "2025-05-14T10:40:51.883Z",
    "last_posted_at": "2025-05-16T10:30:55.279Z",
    "views": 93,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Andrew_Duncan",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 355
  },
  "posts": [
    {
      "id": 12443,
      "post_number": 1,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-14T10:40:51.986Z",
      "updated_at": "2025-05-16T13:56:46.909Z",
      "cooked": "<p>Hi,</p>\n<p>I have a stack of 3 rectangles, and a text in each rectangle. The code is as follows:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#stack(\n  dir: ttb,\n  rect(width: 200pt, height: 80pt)[\n    #text(size: 12pt)[This is the text(red)[first] rectangle with random text.]\n  ],\n  rect(width: 200pt, height: 80pt)[\n    #text(size: 12pt)[This is the text(red)[second] rectangle with random text.]\n  ],  \n  rect(width: 200pt, height: 80pt)[\n    #text(size: 12pt)[This is the text(red)[third] rectangle with random text.]\n  ],\n)\n</code></pre>\n<p>I am trying to change the color of the nested text (e.g <code>#text(size: 12pt)[This is the text(red)[first] rectangle with random text.]</code>). Typst does not recognize the inner text and print <code>text(red)[first]</code><br>\nwith no color applied.</p>\n<p>Thank you.</p>",
      "raw": "Hi,\n\nI have a stack of 3 rectangles, and a text in each rectangle. The code is as follows:\n```\n#stack(\n  dir: ttb,\n  rect(width: 200pt, height: 80pt)[\n    #text(size: 12pt)[This is the text(red)[first] rectangle with random text.]\n  ],\n  rect(width: 200pt, height: 80pt)[\n    #text(size: 12pt)[This is the text(red)[second] rectangle with random text.]\n  ],  \n  rect(width: 200pt, height: 80pt)[\n    #text(size: 12pt)[This is the text(red)[third] rectangle with random text.]\n  ],\n)\n```\n\nI am trying to change the color of the nested text (e.g `#text(size: 12pt)[This is the text(red)[first] rectangle with random text.]`). Typst does not recognize the inner text and print `text(red)[first]`\nwith no color applied.\n\nThank you.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 125.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12454,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-05-14T14:15:10.477Z",
      "updated_at": "2025-05-14T14:19:07.481Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/andrew_duncan\">@Andrew_Duncan</a>, please familiarize yourself with the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a>, particularly the part about formatting code:</p>\n<aside class=\"quote no-group\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p>If your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in <code>```typ ... ```</code>. It will then look like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n</code></pre>\n</blockquote>\n</aside>\n<p>As you can see the code in your post is not readable and would not have encouraged our helpful community to engage with your issue.</p>\n<p>I will move this post to <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> for you, but I expect you to</p>\n<ul>\n<li>properly format both the question and your answer,</li>\n<li>add the <a class=\"hashtag-cooked\" href=\"/tag/text-formatting\" data-type=\"tag\" data-slug=\"text-formatting\" data-id=\"56\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>text-formatting</span></a> tag to your question,</li>\n<li>accept <img src=\"https://forum.typst.app/images/emoji/apple/ballot_box_with_check.png?v=12\" title=\":ballot_box_with_check:\" class=\"emoji\" alt=\":ballot_box_with_check:\" loading=\"lazy\" width=\"20\" height=\"20\"> your own answer,</li>\n<li>as well as accept an answer on your previous post <a href=\"https://forum.typst.app/t/how-to-add-caption-to-fletcher-diagram/4049\" class=\"inline-onebox\">How to add caption to fletcher diagram</a></li>\n</ul>",
      "raw": "Hi @Andrew_Duncan, please familiarize yourself with the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11), particularly the part about formatting code:\n\n[quote=\"reknih, post:1, topic:11\"]\nIf your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ ... ``` `. It will then look like this:\n\n```typ\n#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n```\n[/quote]\n\nAs you can see the code in your post is not readable and would not have encouraged our helpful community to engage with your issue.\n\nI will move this post to #questions for you, but I expect you to\n- properly format both the question and your answer,\n- add the #text-formatting tag to your question,\n- accept :ballot_box_with_check: your own answer,\n- as well as accept an answer on your previous post https://forum.typst.app/t/how-to-add-caption-to-fletcher-diagram/4049",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 12580,
      "post_number": 4,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-16T10:30:55.279Z",
      "updated_at": "2025-05-16T13:58:26.906Z",
      "cooked": "<p>Hi,</p>\n<p>Please see below my typ formatted answer:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#stack(\n  dir: ttb,\n  rect(width: 200pt, height: 80pt)[\n    #text(size: 12pt)[This is the #text(red)[first] rectangle with random text.]\n  ],\n  rect(width: 200pt, height: 80pt)[\n    #text(size: 12pt)[This is the #text(red)[second] rectangle with random text.]\n  ],  \n  rect(width: 200pt, height: 80pt)[\n    #text(size: 12pt)[This is the #text(red)[third] rectangle with random text.]\n  ],\n)\n</code></pre>",
      "raw": "Hi,\n\nPlease see below my typ formatted answer:\n````typ\n#stack(\n  dir: ttb,\n  rect(width: 200pt, height: 80pt)[\n    #text(size: 12pt)[This is the #text(red)[first] rectangle with random text.]\n  ],\n  rect(width: 200pt, height: 80pt)[\n    #text(size: 12pt)[This is the #text(red)[second] rectangle with random text.]\n  ],  \n  rect(width: 200pt, height: 80pt)[\n    #text(size: 12pt)[This is the #text(red)[third] rectangle with random text.]\n  ],\n)\n ````",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 17,
      "score": 48.4,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1560
    }
  ],
  "scraped_at": "2025-06-10T09:47:50.455344"
}
{
  "topic_metadata": {
    "id": 4094,
    "title": "How would I limit ticks to integer values in lilaq?",
    "slug": "how-would-i-limit-ticks-to-integer-values-in-lilaq",
    "posts_count": 4,
    "created_at": "2025-05-14T22:34:39.136Z",
    "last_posted_at": "2025-05-15T10:18:53.848Z",
    "views": 51,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Mc-Zen",
    "tags": [
      "lilaq"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 341
  },
  "posts": [
    {
      "id": 12477,
      "post_number": 1,
      "username": "Gaweringo",
      "name": "Gaweringo",
      "created_at": "2025-05-14T22:34:39.534Z",
      "updated_at": "2025-05-14T22:34:39.534Z",
      "cooked": "<p>I would like to have the smallest step of my diagrams <code>xaxis</code> be <code>1</code>. Meaning that if the <code>xaxis</code> goes from 0 to 1, lilaq does not insert ticks at 0.2, 0.4, 0.6, ‚Ä¶</p>\n<p>What I currently have:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/b/b80977bfb895fd3df4bfa884439f23acb703e51f.png\" alt=\"X-axis with ticks at decimal values\" data-base62-sha1=\"qg48CWO3ZnXlljw32yC64bmggCH\" width=\"438\" height=\"102\"></p>\n<p>What I want to have:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/1/1d965bec863a581cf7a5f0006d16a47ad4b29dd0.png\" alt=\"Desired x-axis with only ticks at integer values\" data-base62-sha1=\"4dJZlz9VyqxtrFiJhw065gyorrW\" width=\"441\" height=\"101\"></p>\n<p>I tried setting <code>subticks</code> to <code>none</code>.<br>\n<code>tick-distance: 1</code>, which is what I did for the desired image, but if the values get larger, a tick for every integer value is too much.</p>\n<p>Any ideas on how this can be achieved?</p>",
      "raw": "I would like to have the smallest step of my diagrams `xaxis` be `1`. Meaning that if the `xaxis` goes from 0 to 1, lilaq does not insert ticks at 0.2, 0.4, 0.6, ...\n\nWhat I currently have:\n![X-axis with ticks at decimal values|438x102](upload://qg48CWO3ZnXlljw32yC64bmggCH.png)\n\nWhat I want to have:\n![Desired x-axis with only ticks at integer values|441x101](upload://4dJZlz9VyqxtrFiJhw065gyorrW.png)\n\nI tried setting `subticks` to `none`.  \n`tick-distance: 1`, which is what I did for the desired image, but if the values get larger, a tick for every integer value is too much.\n\nAny ideas on how this can be achieved?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 45.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 770
    },
    {
      "id": 12478,
      "post_number": 2,
      "username": "vmartel08",
      "name": "Vincent Martel",
      "created_at": "2025-05-14T22:56:58.792Z",
      "updated_at": "2025-05-14T23:39:28.193Z",
      "cooked": "<p>Hi there <a class=\"mention\" href=\"/u/gaweringo\">@Gaweringo</a>,</p>\n<p>Yes it is possible. For the x axis only you can try:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/lilaq:0.3.0\" as lq\n\n#lq.diagram(\n  xaxis: (\n    lim: (0,1), \n    tick-distance: 1, \n    subticks: 0\n  ),\n) \n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/d/dfc6579444e8410f7fba9fd72c001507ee41163d.png\" data-download-href=\"https://forum.typst.app/uploads/default/dfc6579444e8410f7fba9fd72c001507ee41163d\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/d/dfc6579444e8410f7fba9fd72c001507ee41163d_2_690x473.png\" alt=\"image\" data-base62-sha1=\"vVBq9PCADhVqJLB2cKZBGd4sNvT\" width=\"690\" height=\"473\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/d/dfc6579444e8410f7fba9fd72c001507ee41163d_2_690x473.png, https://forum.typst.app/uploads/default/original/2X/d/dfc6579444e8410f7fba9fd72c001507ee41163d.png 1.5x, https://forum.typst.app/uploads/default/original/2X/d/dfc6579444e8410f7fba9fd72c001507ee41163d.png 2x\" data-dominant-color=\"040404\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">777√ó533 25.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hi there @Gaweringo,\n\nYes it is possible. For the x axis only you can try:\n```typ\n#import \"@preview/lilaq:0.3.0\" as lq\n\n#lq.diagram(\n  xaxis: (\n    lim: (0,1), \n    tick-distance: 1, \n    subticks: 0\n  ),\n) \n```\n![image|690x473](upload://vVBq9PCADhVqJLB2cKZBGd4sNvT.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 30.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 936
    },
    {
      "id": 12480,
      "post_number": 3,
      "username": "Gaweringo",
      "name": "Gaweringo",
      "created_at": "2025-05-15T06:46:12.394Z",
      "updated_at": "2025-05-15T06:46:59.873Z",
      "cooked": "<p>Yeah, but it becomes a problem, if the limit gets bigger:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/lilaq:0.3.0\" as lq\n\n#lq.diagram(\n  xaxis: (\n    lim: (0,150), \n    tick-distance: 1, \n    subticks: 0\n  ),\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/8/8239f4070f46d643db7e610c12d560dd70fcbdf3.png\" alt=\"Diagram with tick distance 1 and limit 150\" data-base62-sha1=\"iA2eAPh6ClKQjA3qSAFfR4yg5cn\" width=\"562\" height=\"371\"></p>\n<p>I have now made the <code>tick-distance</code> dependent on the maximum x value of my data:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let xtick-distance = calc.max(1, calc.round(calc.max(..x)/5))\n</code></pre>\n<p>And lilaq seems to still automatically make the ticks be nice values (which is exactly what I want in this case, but is not what I expected), as for the data in the image below, the max value is 144, thus <code>xtick-distance</code> would be 29, and not 30:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/79407a43a2ba457717d7a5ef4f79375c3116667e.png\" alt=\"tick-distance for xaxis based on max x value\" data-base62-sha1=\"hiDUP9BlkY1bHN8ETfDFrGF3APs\" width=\"428\" height=\"110\"></p>",
      "raw": "Yeah, but it becomes a problem, if the limit gets bigger:\n\n```typ\n#import \"@preview/lilaq:0.3.0\" as lq\n\n#lq.diagram(\n  xaxis: (\n    lim: (0,150), \n    tick-distance: 1, \n    subticks: 0\n  ),\n)\n```\n\n![Diagram with tick distance 1 and limit 150|562x371](upload://iA2eAPh6ClKQjA3qSAFfR4yg5cn.png)\n\nI have now made the `tick-distance` dependent on the maximum x value of my data:\n```typ\n#let xtick-distance = calc.max(1, calc.round(calc.max(..x)/5))\n```\nAnd lilaq seems to still automatically make the ticks be nice values (which is exactly what I want in this case, but is not what I expected), as for the data in the image below, the max value is 144, thus `xtick-distance` would be 29, and not 30:\n\n![tick-distance for xaxis based on max x value|428x110](upload://hiDUP9BlkY1bHN8ETfDFrGF3APs.png)",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 14.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 770
    },
    {
      "id": 12490,
      "post_number": 4,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-05-15T10:18:53.848Z",
      "updated_at": "2025-05-15T10:18:53.848Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/gaweringo\">@Gaweringo</a> ,</p>\n<p>You can either let Lilaq decide on the tick-distance or pass it manually. There is no in-between.</p>\n<p>What you could try is to compute the range of the axis (<code>max - min</code>) and only set the tick-distance to <code>1</code> for small ranges but leave it at <code>auto</code> if the range is sufficiently large.</p>",
      "raw": "Hi @Gaweringo ,\n\nYou can either let Lilaq decide on the tick-distance or pass it manually. There is no in-between. \n\nWhat you could try is to compute the range of the axis (`max - min`) and only set the tick-distance to `1` for small ranges but leave it at `auto` if the range is sufficiently large.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 18,
      "score": 33.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 9
    }
  ],
  "scraped_at": "2025-06-10T09:47:49.705214"
}
{
  "topic_metadata": {
    "id": 4096,
    "title": "How to hide y-axis in Cetz Plot to make a timeline?",
    "slug": "how-to-hide-y-axis-in-cetz-plot-to-make-a-timeline",
    "posts_count": 7,
    "created_at": "2025-05-15T07:15:18.126Z",
    "last_posted_at": "2025-05-15T23:46:12.475Z",
    "views": 72,
    "like_count": 1,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "jwolf",
    "tags": [
      "cetz"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 369
  },
  "posts": [
    {
      "id": 12482,
      "post_number": 1,
      "username": "NeoPrim",
      "name": "",
      "created_at": "2025-05-15T07:15:18.363Z",
      "updated_at": "2025-05-15T23:45:50.626Z",
      "cooked": "<p>I‚Äôd like to hide the y-axis in order to make a timeline with Cetz Plot</p>\n<p>Something like:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/e/e68f2ed396847b18f7c0df7095fc1d43354ed638.png\" alt=\"Screenshot 2025-05-15 at 15.12.22\" data-base62-sha1=\"wTCAlizTMnfBiAG3mMb4lDVleju\" width=\"619\" height=\"159\"></p>",
      "raw": "I'd like to hide the y-axis in order to make a timeline with Cetz Plot\n\nSomething like:\n![Screenshot 2025-05-15 at 15.12.22|619x159](upload://wTCAlizTMnfBiAG3mMb4lDVleju.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 35.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1600
    },
    {
      "id": 12487,
      "post_number": 2,
      "username": "NeoPrim",
      "name": "",
      "created_at": "2025-05-15T08:49:53.295Z",
      "updated_at": "2025-05-15T08:55:27.695Z",
      "cooked": "<p>This is what I have so far:</p>\n<pre data-code-wrap=\"ty\"><code class=\"lang-ty\">#cetz.canvas({\n    import cetz.draw: *\n    import cetz-plot: *\n\n    plot.plot(\n      size: (14,2),\n      axis-style: \"school-book\",\n      x-tick-step: none, \n      y-tick-step: none, \n      x-ticks: ((1, []), (2, []), (3, [])),\n      x-label: [time],\n      y-label: none,\n      x-min: 0, x-max: 3,\n      y-min: -1, y-max: 1,\n      axes: (\n        stroke: black,\n        tick: (stroke: black),\n      ),\n      name: \"plot\",\n    {\n      plot.add(((0,0), (3,0)), style: (stroke: black))\n      plot.add-anchor(\"production\", (1.1,0))\n      plot.add-anchor(\"sales\", (1.9,0))\n      \n      plot.add-anchor(\"beginning-inventory\", (1,-0.25))\n      plot.add-anchor(\"ending-inventory\", (2,-0.25))\n\n      plot.annotate({\n        content((0.5, -0.5), [day $t - 1$])\n      })\n\n      plot.annotate({\n        content((1.5, -0.5), [day $t$])\n      })\n      plot.annotate({\n        content((2.5, -0.5), [day $t + 1$])\n      })\n      \n    }\n  )\n  line(\"plot.production\", ((), \"|-\", (0, 1.5)), mark: (start: \"&gt;\", fill: black), name: \"productionline\")\n  content(\"productionline.end\", [production], anchor: \"south\", padding: .1)\n\n  line(\"plot.sales\", ((), \"|-\", (0, 1.5)), mark: (start: \"&gt;\", fill: black), name: \"salesline\")\n  content(\"salesline.end\", [sales], anchor: \"south\", padding: .1)\n  \n  line(\"plot.beginning-inventory\", ((), \"|-\", (0, 0.1)), mark: (start: \"&gt;\", fill: black), name: \"beginning-inventoryline\")\n  content(\"beginning-inventoryline.end\", [beginning\\ inventory], anchor: \"north\", padding: 0.1)\n  \n  line(\"plot.ending-inventory\", ((), \"|-\", (0, 0.1)), mark: (start: \"&gt;\", fill: black), name: \"ending-inventoryline\")\n  content(\"ending-inventoryline.end\", [beginning\\ inventory], anchor: \"north\", padding: 0.1)\n  })\n</code></pre>\n<p>I would like to hide the y-axis</p>",
      "raw": "This is what I have so far:\n\n```ty\n#cetz.canvas({\n    import cetz.draw: *\n    import cetz-plot: *\n\n    plot.plot(\n      size: (14,2),\n      axis-style: \"school-book\",\n      x-tick-step: none, \n      y-tick-step: none, \n      x-ticks: ((1, []), (2, []), (3, [])),\n      x-label: [time],\n      y-label: none,\n      x-min: 0, x-max: 3,\n      y-min: -1, y-max: 1,\n      axes: (\n        stroke: black,\n        tick: (stroke: black),\n      ),\n      name: \"plot\",\n    {\n      plot.add(((0,0), (3,0)), style: (stroke: black))\n      plot.add-anchor(\"production\", (1.1,0))\n      plot.add-anchor(\"sales\", (1.9,0))\n      \n      plot.add-anchor(\"beginning-inventory\", (1,-0.25))\n      plot.add-anchor(\"ending-inventory\", (2,-0.25))\n\n      plot.annotate({\n        content((0.5, -0.5), [day $t - 1$])\n      })\n\n      plot.annotate({\n        content((1.5, -0.5), [day $t$])\n      })\n      plot.annotate({\n        content((2.5, -0.5), [day $t + 1$])\n      })\n      \n    }\n  )\n  line(\"plot.production\", ((), \"|-\", (0, 1.5)), mark: (start: \">\", fill: black), name: \"productionline\")\n  content(\"productionline.end\", [production], anchor: \"south\", padding: .1)\n\n  line(\"plot.sales\", ((), \"|-\", (0, 1.5)), mark: (start: \">\", fill: black), name: \"salesline\")\n  content(\"salesline.end\", [sales], anchor: \"south\", padding: .1)\n  \n  line(\"plot.beginning-inventory\", ((), \"|-\", (0, 0.1)), mark: (start: \">\", fill: black), name: \"beginning-inventoryline\")\n  content(\"beginning-inventoryline.end\", [beginning\\ inventory], anchor: \"north\", padding: 0.1)\n  \n  line(\"plot.ending-inventory\", ((), \"|-\", (0, 0.1)), mark: (start: \">\", fill: black), name: \"ending-inventoryline\")\n  content(\"ending-inventoryline.end\", [beginning\\ inventory], anchor: \"north\", padding: 0.1)\n  })\n```\n\nI would like to hide the y-axis",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1600
    },
    {
      "id": 12489,
      "post_number": 3,
      "username": "jwolf",
      "name": "Johannes Wolf",
      "created_at": "2025-05-15T09:48:25.786Z",
      "updated_at": "2025-05-15T16:57:29.647Z",
      "cooked": "<p>You can hide it by setting the stroke thickness to 0:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">set-style(axes: (y: (stroke: 0pt)))\n</code></pre>\n<p>Setting <code>stroke: none</code> does not work for some reason (bug).</p>",
      "raw": "You can hide it by setting the stroke thickness to 0:\n```\nset-style(axes: (y: (stroke: 0pt)))\n```\n\nSetting `stroke: none` does not work for some reason (bug).",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 72
    },
    {
      "id": 12493,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-15T10:36:10.038Z",
      "updated_at": "2025-05-15T10:36:10.038Z",
      "cooked": "<p>But why are you also setting the black color?</p>",
      "raw": "But why are you also setting the black color?",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12543,
      "post_number": 5,
      "username": "jwolf",
      "name": "Johannes Wolf",
      "created_at": "2025-05-15T16:57:44.936Z",
      "updated_at": "2025-05-15T16:57:44.936Z",
      "cooked": "<p>Because I did not know you could pass a length.</p>",
      "raw": "Because I did not know you could pass a length.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 24.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 72
    },
    {
      "id": 12551,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-15T20:55:13.389Z",
      "updated_at": "2025-05-15T20:55:13.389Z",
      "cooked": "<p>But you are the package author. Some packages do require passing color and thickness.</p>",
      "raw": "But you are the package author. Some packages do require passing color and thickness.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 3.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12563,
      "post_number": 7,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-05-15T23:46:12.475Z",
      "updated_at": "2025-05-15T23:46:12.475Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/neoprim\">@NeoPrim</a>, welcome to the forum! I‚Äôve changed your question post‚Äôs title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your title is a question you‚Äôd ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @NeoPrim, welcome to the forum! I‚Äôve changed your question post‚Äôs title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your title is a question you‚Äôd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:47:48.975210"
}
{
  "topic_metadata": {
    "id": 4105,
    "title": "How to display \"Chapter X\" above level 1 heading name?",
    "slug": "how-to-display-chapter-x-above-level-1-heading-name",
    "posts_count": 3,
    "created_at": "2025-05-15T12:40:36.964Z",
    "last_posted_at": "2025-05-15T13:54:06.604Z",
    "views": 56,
    "like_count": 4,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Andrew",
    "tags": [
      "styling"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 361
  },
  "posts": [
    {
      "id": 12511,
      "post_number": 1,
      "username": "nice_trie",
      "name": "",
      "created_at": "2025-05-15T12:40:37.062Z",
      "updated_at": "2025-05-15T14:05:33.128Z",
      "cooked": "<p>When I type a new depth 1 heading e.g. <code>= Discussion</code> , I want to create something that looks like this:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/a/aabd696d66ea1b140b70bf19d798f8d3179a2a9d.png\" alt=\"image\" data-base62-sha1=\"omqYWqnGaIn3m3hyRMlmmHPcaLz\" width=\"461\" height=\"215\"></p>\n<p>Here is the code I currently have:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">// Pagebreak on new chap start\n#show heading.where(level: 1): it =&gt; {\n  set text(28pt)\n  pagebreak(weak: true) + it\n}\n</code></pre>\n<p>which results in simply:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/4/46dccc837c162e893247a799c4d7475791975614.png\" alt=\"image\" data-base62-sha1=\"a6StUackmFgIIQoWdx8tlG9WdHS\" width=\"288\" height=\"74\"></p>\n<p>I‚Äôm not sure how to extract the chapter number (e.g. 7, in this case) from <code>it</code></p>",
      "raw": "When I type a new depth 1 heading e.g. `= Discussion` , I want to create something that looks like this:\n![image|461x215](upload://omqYWqnGaIn3m3hyRMlmmHPcaLz.png)\n\nHere is the code I currently have:\n\n```typst\n// Pagebreak on new chap start\n#show heading.where(level: 1): it => {\n  set text(28pt)\n  pagebreak(weak: true) + it\n}\n```\n\nwhich results in simply:\n\n![image|288x74](upload://a6StUackmFgIIQoWdx8tlG9WdHS.png)\n\nI'm not sure how to extract the chapter number (e.g. 7, in this case) from `it`",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 50.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1603
    },
    {
      "id": 12533,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-05-15T13:39:56.615Z",
      "updated_at": "2025-05-15T13:40:20.564Z",
      "cooked": "<p>You can get the heading number from the <a href=\"https://typst.app/docs/reference/introspection/counter/\"><code>counter()</code></a>. And if you only want the actual title of the heading, you can access this with <code>it.body</code>.</p>\n<p>The show rule below should be close to your requirements. You can still change the font sizes (or other properties) by wrapping ‚ÄúChapter N‚Äù in the <code>text()</code> function. Ideally you would use a relative size, e.g. <code>0.9em</code> to automatically scale the annotation ‚ÄúChapter N‚Äù with the font size of the heading.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1\")\n\n#show heading.where(level: 1): it =&gt; block[\n  Chapter #counter(heading).display()\n \n  #it.body\n]\n\n= Discussion\n</code></pre>",
      "raw": "You can get the heading number from the [`counter()`](https://typst.app/docs/reference/introspection/counter/). And if you only want the actual title of the heading, you can access this with `it.body`.\n\nThe show rule below should be close to your requirements. You can still change the font sizes (or other properties) by wrapping \"Chapter N\" in the `text()` function. Ideally you would use a relative size, e.g. `0.9em` to automatically scale the annotation \"Chapter N\" with the font size of the heading.\n\n```\n#set heading(numbering: \"1.1\")\n\n#show heading.where(level: 1): it => block[\n  Chapter #counter(heading).display()\n \n  #it.body\n]\n\n= Discussion\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 25,
      "score": 35.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 12536,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-15T13:54:06.604Z",
      "updated_at": "2025-05-15T13:56:58.814Z",
      "cooked": "<p>Hello. The image shows 2 text parts that use different font size, while you‚Äôre only specifying one. Which one is supposed to be 28 pt? Do you need to have both of these texts appear on the same page?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1\")\n#show heading.where(level: 1): set text(28pt)\n\n#show heading.where(level: 1): it =&gt; {\n  block(sticky: true, below: 2em)[Chapter #counter(heading).display()]\n  text(1.5em, it.body)\n}\n\n// #show heading.where(level: 1): it =&gt; {\n//   block(sticky: true, below: 1.5em, {\n//     text(0.65em)[Chapter #counter(heading).display()]\n//   })\n//   it.body\n// }\n\n= Discussion\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/9/99873e7b4719422b653e702afbacb4c18342cca6.png\" alt=\"image\" data-base62-sha1=\"lUaOlyst0T9j1xgGhbKFW7FByiW\" width=\"281\" height=\"150\"></p>\n<p>If you are using <code>pagebreak</code>, then I guess you don‚Äôt need <code>sticky</code>, then you can use this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1\")\n#show heading.where(level: 1): set text(28pt)\n#show heading.where(level: 1): it =&gt; {\n  pagebreak(weak: true)\n  block(below: 2em)[Chapter #counter(heading).display()]\n  text(1.5em, it.body)\n}\n\n// #show heading.where(level: 1): it =&gt; {\n//   pagebreak(weak: true)\n//   block(below: 1.5em, text(0.65em)[Chapter #counter(heading).display()])\n//   it.body\n// }\n\n= Discussion\n</code></pre>",
      "raw": "Hello. The image shows 2 text parts that use different font size, while you're only specifying one. Which one is supposed to be 28 pt? Do you need to have both of these texts appear on the same page?\n\n```typ\n#set heading(numbering: \"1.1\")\n#show heading.where(level: 1): set text(28pt)\n\n#show heading.where(level: 1): it => {\n  block(sticky: true, below: 2em)[Chapter #counter(heading).display()]\n  text(1.5em, it.body)\n}\n\n// #show heading.where(level: 1): it => {\n//   block(sticky: true, below: 1.5em, {\n//     text(0.65em)[Chapter #counter(heading).display()]\n//   })\n//   it.body\n// }\n\n= Discussion\n```\n\n![image|281x150](upload://lUaOlyst0T9j1xgGhbKFW7FByiW.png)\n\nIf you are using `pagebreak`, then I guess you don't need `sticky`, then you can use this:\n\n```typ\n#set heading(numbering: \"1.1\")\n#show heading.where(level: 1): set text(28pt)\n#show heading.where(level: 1): it => {\n  pagebreak(weak: true)\n  block(below: 2em)[Chapter #counter(heading).display()]\n  text(1.5em, it.body)\n}\n\n// #show heading.where(level: 1): it => {\n//   pagebreak(weak: true)\n//   block(below: 1.5em, text(0.65em)[Chapter #counter(heading).display()])\n//   it.body\n// }\n\n= Discussion\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 20,
      "score": 34.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:48.235263"
}
{
  "topic_metadata": {
    "id": 4106,
    "title": "How can I update the figure counter ignoring the figures with `supplement: none`?",
    "slug": "how-can-i-update-the-figure-counter-ignoring-the-figures-with-supplement-none",
    "posts_count": 8,
    "created_at": "2025-05-15T16:24:22.668Z",
    "last_posted_at": "2025-05-17T05:19:23.061Z",
    "views": 81,
    "like_count": 5,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 1303
  },
  "posts": [
    {
      "id": 12542,
      "post_number": 1,
      "username": "ivaquero",
      "name": "ivaquero",
      "created_at": "2025-05-15T16:24:22.828Z",
      "updated_at": "2025-05-16T07:34:19.786Z",
      "cooked": "<p>Hi friends, I create two figures using <code>supbar</code> and <code>lilaq</code> package, but I want counter to ignore the first one (I want the caption to be Figure 1 ‚Ä¶), what should I do?</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/b/b76bd89dfcb0e8436f69b5863c134855ade62b10.png\" data-download-href=\"https://forum.typst.app/uploads/default/b76bd89dfcb0e8436f69b5863c134855ade62b10\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/b/b76bd89dfcb0e8436f69b5863c134855ade62b10_2_690x251.png\" alt=\"image\" data-base62-sha1=\"qaCr3CuBZfYLKcazKjBJug9y9yM\" width=\"690\" height=\"251\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/b/b76bd89dfcb0e8436f69b5863c134855ade62b10_2_690x251.png, https://forum.typst.app/uploads/default/original/2X/b/b76bd89dfcb0e8436f69b5863c134855ade62b10.png 1.5x, https://forum.typst.app/uploads/default/original/2X/b/b76bd89dfcb0e8436f69b5863c134855ade62b10.png 2x\" data-dominant-color=\"F9F9FA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">730√ó266 18.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>The complete code is as follows</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/lilaq:0.3.0\" as lq\n#import \"@preview/tiptoe:0.3.0\"\n#import \"@preview/subpar:0.2.2\": grid as sgrid\n\n#let (x, y, y2) = lq.load-txt(read(\"data/homegeneity.csv\"))\n\n\n#let peak(value, distance) = value &gt; 0 and distance &lt; 5pt\n\n#let trans-linear(\n  x,\n  y,\n  y2,\n  ylim-base,\n  supplement: none,\n  caption: none,\n  width: 100pt,\n  column: 60pt,\n  gutter: 50pt,\n) = sgrid(\n  figure(\n    ..if caption == none { (numbering: it =&gt; 0) },\n    lq.diagram(\n      width: width,\n      height: width * .5,\n      lq.plot(x, y, mark: none),\n      xlim: (x.at(0), x.at(-1)),\n      ylim: (ylim-base.at(0), ylim-base.at(-1) + ylim-base.at(-1) / 10),\n      xaxis: (position: 0, tip: none, ticks: none),\n      yaxis: (position: 0, tip: none, filter: peak),\n    ),\n  ),\n  figure(\n    ..if caption == none { (numbering: it =&gt; 0) },\n    lq.diagram(\n      width: width,\n      height: width * .5,\n      lq.place(x.at(-1) * .5, y.at(-1) * .5)[$h(x)$],\n      lq.rect(\n        x.at(-1) * .3,\n        y.at(-1) * .3,\n        width: x.at(-1) * .4,\n        height: y.at(-1) * .4,\n      ),\n      lq.line(\n        tip: tiptoe.stealth,\n        (x.at(-1) * .7, y.at(-1) * .5),\n        (x.at(-1) * .9, y.at(-1) * .5),\n      ),\n      lq.line(\n        tip: tiptoe.stealth,\n        (x.at(-1) * .1, y.at(-1) * .5),\n        (x.at(-1) * .3, y.at(-1) * .5),\n      ),\n      xlim: (x.at(0), x.at(-1)),\n      ylim: (y.at(0), y.at(-1) + y.at(-1) / 10),\n      xaxis: (stroke: none, ticks: none),\n      yaxis: (stroke: none, ticks: none),\n    ),\n  ),\n  figure(\n    lq.diagram(\n      width: width,\n      height: width * .5,\n      lq.plot(x, y2, mark: none),\n      xlim: (x.at(0), x.at(-1)),\n      ylim: (ylim-base.at(0), ylim-base.at(-1) + ylim-base.at(-1) / 10),\n      xaxis: (position: 0, tip: none, ticks: none),\n      yaxis: (position: 0, tip: none, filter: peak),\n    ),\n  ),\n  columns: (column,) * 3,\n  gutter: gutter,\n  kind: \"\",\n  supplement: supplement,\n  caption: caption,\n)\n\n\n#trans-linear(\n  x,\n  y,\n  y2,\n  lq.vec.multiply(y2, 2),\n  supplement: none,\n  caption: none,\n)\n#trans-linear(\n  x,\n  lq.vec.multiply(y, 2),\n  lq.vec.multiply(y2, 2),\n  lq.vec.multiply(y2, 2),\n  supplement: \"Figure\",\n  caption: \"Homegeneity\",\n)\n</code></pre>\n<p>The data is in csv format</p>\n<pre data-code-wrap=\"csv\"><code class=\"lang-csv\">0,0,0\n1,0,0\n2,0,0\n3,0,0\n4,0,0\n5,0,0\n5.5,0.95,0.8\n6,1,1\n7,1,0.9\n8,1,0.6\n9,1,0.9\n10,1,1\n11,1,0.7\n12,1,0.65\n13,1,0.8\n14,1,1\n15,1,0.9\n16,1,1\n17,1,1\n18,1,1\n19,1,1\n20,1,1\n</code></pre>",
      "raw": "Hi friends, I create two figures using `supbar` and `lilaq` package, but I want counter to ignore the first one (I want the caption to be Figure 1 ...), what should I do?\n\n![image|690x251](upload://qaCr3CuBZfYLKcazKjBJug9y9yM.png)\n\nThe complete code is as follows\n\n```typst\n#import \"@preview/lilaq:0.3.0\" as lq\n#import \"@preview/tiptoe:0.3.0\"\n#import \"@preview/subpar:0.2.2\": grid as sgrid\n\n#let (x, y, y2) = lq.load-txt(read(\"data/homegeneity.csv\"))\n\n\n#let peak(value, distance) = value > 0 and distance < 5pt\n\n#let trans-linear(\n  x,\n  y,\n  y2,\n  ylim-base,\n  supplement: none,\n  caption: none,\n  width: 100pt,\n  column: 60pt,\n  gutter: 50pt,\n) = sgrid(\n  figure(\n    ..if caption == none { (numbering: it => 0) },\n    lq.diagram(\n      width: width,\n      height: width * .5,\n      lq.plot(x, y, mark: none),\n      xlim: (x.at(0), x.at(-1)),\n      ylim: (ylim-base.at(0), ylim-base.at(-1) + ylim-base.at(-1) / 10),\n      xaxis: (position: 0, tip: none, ticks: none),\n      yaxis: (position: 0, tip: none, filter: peak),\n    ),\n  ),\n  figure(\n    ..if caption == none { (numbering: it => 0) },\n    lq.diagram(\n      width: width,\n      height: width * .5,\n      lq.place(x.at(-1) * .5, y.at(-1) * .5)[$h(x)$],\n      lq.rect(\n        x.at(-1) * .3,\n        y.at(-1) * .3,\n        width: x.at(-1) * .4,\n        height: y.at(-1) * .4,\n      ),\n      lq.line(\n        tip: tiptoe.stealth,\n        (x.at(-1) * .7, y.at(-1) * .5),\n        (x.at(-1) * .9, y.at(-1) * .5),\n      ),\n      lq.line(\n        tip: tiptoe.stealth,\n        (x.at(-1) * .1, y.at(-1) * .5),\n        (x.at(-1) * .3, y.at(-1) * .5),\n      ),\n      xlim: (x.at(0), x.at(-1)),\n      ylim: (y.at(0), y.at(-1) + y.at(-1) / 10),\n      xaxis: (stroke: none, ticks: none),\n      yaxis: (stroke: none, ticks: none),\n    ),\n  ),\n  figure(\n    lq.diagram(\n      width: width,\n      height: width * .5,\n      lq.plot(x, y2, mark: none),\n      xlim: (x.at(0), x.at(-1)),\n      ylim: (ylim-base.at(0), ylim-base.at(-1) + ylim-base.at(-1) / 10),\n      xaxis: (position: 0, tip: none, ticks: none),\n      yaxis: (position: 0, tip: none, filter: peak),\n    ),\n  ),\n  columns: (column,) * 3,\n  gutter: gutter,\n  kind: \"\",\n  supplement: supplement,\n  caption: caption,\n)\n\n\n#trans-linear(\n  x,\n  y,\n  y2,\n  lq.vec.multiply(y2, 2),\n  supplement: none,\n  caption: none,\n)\n#trans-linear(\n  x,\n  lq.vec.multiply(y, 2),\n  lq.vec.multiply(y2, 2),\n  lq.vec.multiply(y2, 2),\n  supplement: \"Figure\",\n  caption: \"Homegeneity\",\n)\n```\n\nThe data is in csv format\n\n```csv\n0,0,0\n1,0,0\n2,0,0\n3,0,0\n4,0,0\n5,0,0\n5.5,0.95,0.8\n6,1,1\n7,1,0.9\n8,1,0.6\n9,1,0.9\n10,1,1\n11,1,0.7\n12,1,0.65\n13,1,0.8\n14,1,1\n15,1,0.9\n16,1,1\n17,1,1\n18,1,1\n19,1,1\n20,1,1\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 134.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1204
    },
    {
      "id": 12544,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-05-15T18:08:46.276Z",
      "updated_at": "2025-05-15T21:17:21.517Z",
      "cooked": "<p>You can set the first figure‚Äôs numbering to <code>none</code> as unnumbered figures won‚Äôt step the counter. To put this in the <code>trans-linear</code> function, you can make this conditional based on whether the <code>caption</code> parameter is <code>none</code>.</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">figure(\n  ..if caption == none { (numbering: none) },\n  lq.diagram(..)\n)\n</code></pre>\n<p>This may look a bit odd because of the <a href=\"https://typst.app/docs/reference/foundations/arguments/#spreading\">spread operator</a>, but it‚Äôs necessary as it allows the default figure numbering to still be used when the caption is not <code>none</code>.</p>\n<hr>\n<p>Edit: I kind of missed the <code>subpar</code> part of the question, but it turns out that this answer still works. Ideally, you would set the numbering of the <code>sgrid</code> to <code>none</code>, but that‚Äôs not allowed by the package. Also, I‚Äôm wondering if the <code>trans-linear</code> function couldn‚Äôt just return a single figure containing a grid, since this doesn‚Äôt seem to be using any subfigure features like sub-numbering.</p>",
      "raw": "You can set the first figure's numbering to `none` as unnumbered figures won't step the counter. To put this in the `trans-linear` function, you can make this conditional based on whether the `caption` parameter is `none`.\n```typc\nfigure(\n  ..if caption == none { (numbering: none) },\n  lq.diagram(..)\n)\n```\nThis may look a bit odd because of the [spread operator](https://typst.app/docs/reference/foundations/arguments/#spreading), but it's necessary as it allows the default figure numbering to still be used when the caption is not `none`.\n\n---\n\nEdit: I kind of missed the `subpar` part of the question, but it turns out that this answer still works. Ideally, you would set the numbering of the `sgrid` to `none`, but that's not allowed by the package. Also, I'm wondering if the `trans-linear` function couldn't just return a single figure containing a grid, since this doesn't seem to be using any subfigure features like sub-numbering.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 22,
      "score": 39.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 12552,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-15T21:02:05.694Z",
      "updated_at": "2025-05-15T21:02:05.694Z",
      "cooked": "<p>See <a href=\"https://sscce.org/\">https://sscce.org/</a>.</p>\n<aside class=\"quote no-group\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p>It would be great if you could post the <strong>smallest possible code samples</strong> that allow people to see what your problem is.</p>\n</blockquote>\n</aside>\n<p>Your example is big and incomplete, therefore doesn‚Äôt compile. The question is about figure numbers, so the figure content should be removed completely. You can use simple text or <code>rect()</code> instead.</p>",
      "raw": "See https://sscce.org/.\n\n[quote=\"reknih, post:1, topic:11\"]\nIt would be great if you could post the **smallest possible code samples** that allow people to see what your problem is.\n[/quote]\n\nYour example is big and incomplete, therefore doesn't compile. The question is about figure numbers, so the figure content should be removed completely. You can use simple text or `rect()` instead.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 29.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12570,
      "post_number": 5,
      "username": "ivaquero",
      "name": "ivaquero",
      "created_at": "2025-05-16T07:35:45.058Z",
      "updated_at": "2025-05-16T07:35:45.058Z",
      "cooked": "<p>Thank you, I tried, however, <code>supbar</code> requires the number &gt;=0</p>\n<p>Can this be achieved by show rules?</p>",
      "raw": "Thank you, I tried, however, `supbar` requires the number >=0\n\nCan this be achieved by show rules?",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 3.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1204
    },
    {
      "id": 12572,
      "post_number": 6,
      "username": "ivaquero",
      "name": "ivaquero",
      "created_at": "2025-05-16T07:46:15.067Z",
      "updated_at": "2025-05-16T07:48:54.943Z",
      "cooked": "<p>Thanks for advice. I updated the code, it‚Äôs complete now. (My first thought was my goal can be achieved by some show rules, which might not be involved with the data or the imported packages).</p>\n<p>The current code is based on <code>supar</code> package for a sub-figure layout,  <code>supar</code> uses figure objects, so using <code>rect()</code> does not change the things.</p>",
      "raw": "Thanks for advice. I updated the code, it‚Äôs complete now. (My first thought was my goal can be achieved by some show rules, which might not be involved with the data or the imported packages).\n\nThe current code is based on `supar` package for a sub-figure layout,  `supar` uses figure objects, so using `rect()` does not change the things.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 8.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1204
    },
    {
      "id": 12604,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-16T19:14:15.450Z",
      "updated_at": "2025-05-16T19:25:46.803Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"ivaquero\" data-post=\"6\" data-topic=\"4106\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/i/0A3649/48.png\" class=\"avatar\"> ivaquero:</div>\n<blockquote>\n<p>The current code is based on <code>supar</code> package for a sub-figure layout, <code>supar</code> uses figure objects, so using <code>rect()</code> does not change the things.</p>\n</blockquote>\n</aside>\n<p>It does change the things. The context is providing the <strong>smallest possible code samples</strong>.</p>\n<aside class=\"quote no-group\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p>It would be great if you could post the <strong>smallest possible code samples</strong> that allow people to see what your problem is.</p>\n</blockquote>\n</aside>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/subpar:0.2.2\": grid as sgrid\n\n#let trans-linear(caption: none, column: 60pt) = sgrid(\n  columns: (column,) * 3,\n  caption: caption,\n  figure(rect[left]),\n  figure(rect[center]),\n  figure(rect[right]),\n)\n\n#trans-linear(caption: none)\n#trans-linear(caption: \"Homegeneity\")\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/9/9b4042301a28bd80df6b7896705069c264f43766.png\" alt=\"image\" data-base62-sha1=\"m9pGeBUWDBiMivgvK8JVkrnr9zg\" width=\"224\" height=\"95\"></p>\n<p>This is much more manageable and easy to understand.</p>",
      "raw": "[quote=\"ivaquero, post:6, topic:4106\"]\nThe current code is based on `supar` package for a sub-figure layout, `supar` uses figure objects, so using `rect()` does not change the things.\n[/quote]\n\nIt does change the things. The context is providing the **smallest possible code samples**.\n\n[quote=\"reknih, post:1, topic:11\"]\nIt would be great if you could post the **smallest possible code samples** that allow people to see what your problem is.\n[/quote]\n\n```typ\n#import \"@preview/subpar:0.2.2\": grid as sgrid\n\n#let trans-linear(caption: none, column: 60pt) = sgrid(\n  columns: (column,) * 3,\n  caption: caption,\n  figure(rect[left]),\n  figure(rect[center]),\n  figure(rect[right]),\n)\n\n#trans-linear(caption: none)\n#trans-linear(caption: \"Homegeneity\")\n```\n\n![image|299x127, 75%](upload://m9pGeBUWDBiMivgvK8JVkrnr9zg.png)\n\nThis is much more manageable and easy to understand.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 15,
      "score": 8.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12605,
      "post_number": 8,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-16T19:24:59.948Z",
      "updated_at": "2025-05-16T19:25:59.150Z",
      "cooked": "<p>I didn‚Äôt dive deep into this, but since some direct changes are impossible, there is also an explicit counter update:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/subpar:0.2.2\": grid as sgrid\n\n#let trans-linear(caption: none, column: 60pt) = {\n  sgrid(\n    columns: (column,) * 3,\n    caption: caption,\n    figure(rect[left]),\n    figure(rect[center]),\n    figure(rect[right]),\n  )\n  if caption == none { counter(figure.where(kind: image)).update(n =&gt; n - 1) }\n}\n\n#trans-linear(caption: none)\n#trans-linear(caption: \"Homegeneity\")\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/4/461863a1f34a2eb13ee7375d8025f31db372fe12.png\" alt=\"image\" data-base62-sha1=\"a05FWA0cDiR6jTxmuzXUGmNvI6m\" width=\"229\" height=\"100\"></p>\n<p>I just don‚Äôt know about the kind. If it‚Äôs just the standard <code>image</code> kind, then it‚Äôs all should be good, otherwise you might need some additional tweaking.</p>",
      "raw": "I didn't dive deep into this, but since some direct changes are impossible, there is also an explicit counter update:\n\n```typ\n#import \"@preview/subpar:0.2.2\": grid as sgrid\n\n#let trans-linear(caption: none, column: 60pt) = {\n  sgrid(\n    columns: (column,) * 3,\n    caption: caption,\n    figure(rect[left]),\n    figure(rect[center]),\n    figure(rect[right]),\n  )\n  if caption == none { counter(figure.where(kind: image)).update(n => n - 1) }\n}\n\n#trans-linear(caption: none)\n#trans-linear(caption: \"Homegeneity\")\n```\n\n![image|306x134, 75%](upload://a05FWA0cDiR6jTxmuzXUGmNvI6m.png)\n\nI just don't know about the kind. If it's just the standard `image` kind, then it's all should be good, otherwise you might need some additional tweaking.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 15,
      "score": 23.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12649,
      "post_number": 9,
      "username": "ivaquero",
      "name": "ivaquero",
      "created_at": "2025-05-17T05:19:23.061Z",
      "updated_at": "2025-05-17T07:27:56.655Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/andrew\">@Andrew</a>, thank you for your investigation, it gives me some helpful hints.</p>\n<p>I solved the problem by counting a different kind</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let trans-linear(\n  x,\n  y,\n  y2,\n  ylim-base,\n  kind: image,\n  supplement: \"Figure\",\n  caption: none,\n  width: 100pt,\n  column: 60pt,\n  gutter: 50pt,\n) = {\n  sgrid(\n    lq.diagram(\n      width: width,\n      height: width * .5,\n      lq.plot(x, y, mark: none),\n      xlim: (x.at(0), x.at(-1)),\n      ylim: (ylim-base.at(0), ylim-base.at(-1) + ylim-base.at(-1) / 10),\n      xaxis: (position: 0, tip: none, ticks: none),\n      yaxis: (position: 0, tip: none, filter: peak),\n    ),\n    lq.diagram(\n      width: width,\n      height: width * .5,\n      lq.place(x.at(-1) * .5, y.at(-1) * .5)[$h(x)$],\n      lq.rect(\n        x.at(-1) * .3,\n        y.at(-1) * .3,\n        width: x.at(-1) * .4,\n        height: y.at(-1) * .4,\n      ),\n      lq.line(\n        tip: tiptoe.stealth,\n        (x.at(-1) * .7, y.at(-1) * .5),\n        (x.at(-1) * .9, y.at(-1) * .5),\n      ),\n      lq.line(\n        tip: tiptoe.stealth,\n        (x.at(-1) * .1, y.at(-1) * .5),\n        (x.at(-1) * .3, y.at(-1) * .5),\n      ),\n      xlim: (x.at(0), x.at(-1)),\n      ylim: (y.at(0), y.at(-1) + y.at(-1) / 10),\n      xaxis: (stroke: none, ticks: none),\n      yaxis: (stroke: none, ticks: none),\n    ),\n    lq.diagram(\n      width: width,\n      height: width * .5,\n      lq.plot(x, y2, mark: none),\n      xlim: (x.at(0), x.at(-1)),\n      ylim: (ylim-base.at(0), ylim-base.at(-1) + ylim-base.at(-1) / 10),\n      xaxis: (position: 0, tip: none, ticks: none),\n      yaxis: (position: 0, tip: none, filter: peak),\n    ),\n    columns: (column,) * 3,\n    gutter: gutter,\n    kind: kind,\n    supplement: supplement,\n    caption: caption,\n  )\n  if caption == none { counter(figure.where(kind: \"skip\")).update(n =&gt; n - 1) }\n}\n</code></pre>\n<p>then calling</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#trans-linear(\n  x,\n  y,\n  y2,\n  lq.vec.multiply(y2, 2),\n  kind: \"skip\",\n)\n#trans-linear(\n  x,\n  lq.vec.multiply(y, 2),\n  lq.vec.multiply(y2, 2),\n  lq.vec.multiply(y2, 2),\n  caption: \"Homegeneity\",\n)\n</code></pre>",
      "raw": "@Andrew, thank you for your investigation, it gives me some helpful hints. \n\nI solved the problem by counting a different kind\n\n```typst\n#let trans-linear(\n  x,\n  y,\n  y2,\n  ylim-base,\n  kind: image,\n  supplement: \"Figure\",\n  caption: none,\n  width: 100pt,\n  column: 60pt,\n  gutter: 50pt,\n) = {\n  sgrid(\n    lq.diagram(\n      width: width,\n      height: width * .5,\n      lq.plot(x, y, mark: none),\n      xlim: (x.at(0), x.at(-1)),\n      ylim: (ylim-base.at(0), ylim-base.at(-1) + ylim-base.at(-1) / 10),\n      xaxis: (position: 0, tip: none, ticks: none),\n      yaxis: (position: 0, tip: none, filter: peak),\n    ),\n    lq.diagram(\n      width: width,\n      height: width * .5,\n      lq.place(x.at(-1) * .5, y.at(-1) * .5)[$h(x)$],\n      lq.rect(\n        x.at(-1) * .3,\n        y.at(-1) * .3,\n        width: x.at(-1) * .4,\n        height: y.at(-1) * .4,\n      ),\n      lq.line(\n        tip: tiptoe.stealth,\n        (x.at(-1) * .7, y.at(-1) * .5),\n        (x.at(-1) * .9, y.at(-1) * .5),\n      ),\n      lq.line(\n        tip: tiptoe.stealth,\n        (x.at(-1) * .1, y.at(-1) * .5),\n        (x.at(-1) * .3, y.at(-1) * .5),\n      ),\n      xlim: (x.at(0), x.at(-1)),\n      ylim: (y.at(0), y.at(-1) + y.at(-1) / 10),\n      xaxis: (stroke: none, ticks: none),\n      yaxis: (stroke: none, ticks: none),\n    ),\n    lq.diagram(\n      width: width,\n      height: width * .5,\n      lq.plot(x, y2, mark: none),\n      xlim: (x.at(0), x.at(-1)),\n      ylim: (ylim-base.at(0), ylim-base.at(-1) + ylim-base.at(-1) / 10),\n      xaxis: (position: 0, tip: none, ticks: none),\n      yaxis: (position: 0, tip: none, filter: peak),\n    ),\n    columns: (column,) * 3,\n    gutter: gutter,\n    kind: kind,\n    supplement: supplement,\n    caption: caption,\n  )\n  if caption == none { counter(figure.where(kind: \"skip\")).update(n => n - 1) }\n}\n```\n\nthen calling\n\n```typst\n#trans-linear(\n  x,\n  y,\n  y2,\n  lq.vec.multiply(y2, 2),\n  kind: \"skip\",\n)\n#trans-linear(\n  x,\n  lq.vec.multiply(y, 2),\n  lq.vec.multiply(y2, 2),\n  lq.vec.multiply(y2, 2),\n  caption: \"Homegeneity\",\n)\n```",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 13,
      "score": 17.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1204
    }
  ],
  "scraped_at": "2025-06-10T09:47:47.535718"
}
{
  "topic_metadata": {
    "id": 4118,
    "title": "How to use Arabic and Roman page numbers in one document?",
    "slug": "how-to-use-arabic-and-roman-page-numbers-in-one-document",
    "posts_count": 6,
    "created_at": "2025-05-16T07:42:27.674Z",
    "last_posted_at": "2025-05-17T06:27:51.816Z",
    "views": 59,
    "like_count": 0,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "numbering",
      "page"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 807
  },
  "posts": [
    {
      "id": 12571,
      "post_number": 1,
      "username": "Methan1075",
      "name": "",
      "created_at": "2025-05-16T07:42:27.848Z",
      "updated_at": "2025-05-16T07:42:27.848Z",
      "cooked": "<p>Hi everyone,</p>\n<p>I‚Äôm new to Typst and are trying so set up the page numbering in my document. For each chapter I have a separate .typ document, which I include in the main.typ with the <span class=\"hashtag-raw\">#include</span> function as you see in the following snippet.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// first section\n\n#include \"deckblatt.typ\"\n#pagebreak()\n\n#include \"sperrvermerk.typ\"\n#pagebreak()\n\n#include \"danksagung.typ\"\n#pagebreak()\n\n#include \"inhaltsverzeichnis.typ\"\n#pagebreak()\n\n#include \"abkuerzungsverzeichnis.typ\"\n#pagebreak()\n\n#include \"abbildungsverzeichnis.typ\"\n#pagebreak()\n\n// main section\n\n#include \"einleitung.typ\"\n#pagebreak()\n\n// last section\n\n#include \"versicherung.typ\"\n#pagebreak()\n\n#include \"anhang.typ\"\n</code></pre>\n<p>In the main.typ I want to set up the page numbering, which should look like this: the first section (as shown in the snippet) should have Roman page numbers. Arabic page numbers should be used in the main section, but these should start with ‚Äú1‚Äù. The last section should again have Roman page numbers, which should continue counting from where they left off in the first section.<br>\nPreferably this should not be done using static page numbers, but it should be possible for me to specify from which section or which <code>#include</code> function which page numbers are used.<br>\nI‚Äôve already tried it with <code>#label</code> in the included documents and <code>#location(ref())</code> in main.typ, but that didn‚Äôt work.</p>\n<p>Do you have any idea for a possible solution?</p>",
      "raw": "Hi everyone,\n\nI'm new to Typst and are trying so set up the page numbering in my document. For each chapter I have a separate .typ document, which I include in the main.typ with the #include function as you see in the following snippet.\n\n```\n// first section\n\n#include \"deckblatt.typ\"\n#pagebreak()\n\n#include \"sperrvermerk.typ\"\n#pagebreak()\n\n#include \"danksagung.typ\"\n#pagebreak()\n\n#include \"inhaltsverzeichnis.typ\"\n#pagebreak()\n\n#include \"abkuerzungsverzeichnis.typ\"\n#pagebreak()\n\n#include \"abbildungsverzeichnis.typ\"\n#pagebreak()\n\n// main section\n\n#include \"einleitung.typ\"\n#pagebreak()\n\n// last section\n\n#include \"versicherung.typ\"\n#pagebreak()\n\n#include \"anhang.typ\"\n```\nIn the main.typ I want to set up the page numbering, which should look like this: the first section (as shown in the snippet) should have Roman page numbers. Arabic page numbers should be used in the main section, but these should start with ‚Äú1‚Äù. The last section should again have Roman page numbers, which should continue counting from where they left off in the first section.\nPreferably this should not be done using static page numbers, but it should be possible for me to specify from which section or which ```#include``` function which page numbers are used.\nI've already tried it with ```#label``` in the included documents and ```#location(ref())``` in main.typ, but that didn't work.\n\nDo you have any idea for a possible solution?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 44.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1606
    },
    {
      "id": 12589,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-05-16T14:21:41.817Z",
      "updated_at": "2025-05-16T14:23:35.106Z",
      "cooked": "<p>For the first switch from Roman numerals to Arabic numerals you can call the set rule for the <a href=\"https://typst.app/docs/reference/layout/page/#parameters-numbering\">page numbering</a> (again) and reset the page counter to 1. This is also shown as the example in the documentation for the counter, see <a href=\"https://typst.app/docs/reference/introspection/counter/#page-counter\">here</a>.</p>\n<p>The second switch is a bit more complicated since you want to continue with the roman page count from the first section. I would propose to customize the page numbering to add the page counter at the end of the first section to the current page counter. I added a single metadata element here to mark the end of the first section.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(numbering: \"I\")\n#include \"first-section.typ\"\n#metadata(\"end-of-first-section\") &lt;end-of-first-section&gt;\n\n#set page(numbering: \"1\")\n#counter(page).update(1)\n#include \"main.typ\"\n\n#let last-section-numbering(..n) = context {\n  let offset = counter(page).at(&lt;end-of-first-section&gt;).at(0)\n  numbering(\"I\", n.at(0) + offset)\n}\n#set page(numbering: last-section-numbering)\n#counter(page).update(1)\n#include \"last-section.typ\"\n</code></pre>",
      "raw": "For the first switch from Roman numerals to Arabic numerals you can call the set rule for the [page numbering](https://typst.app/docs/reference/layout/page/#parameters-numbering) (again) and reset the page counter to 1. This is also shown as the example in the documentation for the counter, see [here](https://typst.app/docs/reference/introspection/counter/#page-counter).\n\nThe second switch is a bit more complicated since you want to continue with the roman page count from the first section. I would propose to customize the page numbering to add the page counter at the end of the first section to the current page counter. I added a single metadata element here to mark the end of the first section.\n\n```\n#set page(numbering: \"I\")\n#include \"first-section.typ\"\n#metadata(\"end-of-first-section\") <end-of-first-section>\n\n#set page(numbering: \"1\")\n#counter(page).update(1)\n#include \"main.typ\"\n\n#let last-section-numbering(..n) = context {\n  let offset = counter(page).at(<end-of-first-section>).at(0)\n  numbering(\"I\", n.at(0) + offset)\n}\n#set page(numbering: last-section-numbering)\n#counter(page).update(1)\n#include \"last-section.typ\"\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 8.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 12596,
      "post_number": 3,
      "username": "Methan1075",
      "name": "",
      "created_at": "2025-05-16T15:35:54.937Z",
      "updated_at": "2025-05-16T15:35:54.937Z",
      "cooked": "<p>Thanks for your answer, the solution seems to be almost right!<br>\nThere‚Äôs only one little problem: after applying your code, the first section ends with page VII, but the last section starts with IX, so there‚Äôs is one page ‚Äúmissing‚Äù. I added <code>-1</code> behind the <code>offset</code> in <code>numbering(\"I\", n.at(0) + offset)</code>, so the final result is <code>numbering(\"I\", n.at(0) + offset -1)</code>. With that, everything works well. Is this a good solution or do you want to correct it in another way?</p>",
      "raw": "Thanks for your answer, the solution seems to be almost right!\nThere's only one little problem: after applying your code, the first section ends with page VII, but the last section starts with IX, so there's is one page \"missing\". I added ```-1``` behind the ```offset``` in ```numbering(\"I\", n.at(0) + offset)```, so the final result is ```numbering(\"I\", n.at(0) + offset -1)```. With that, everything works well. Is this a good solution or do you want to correct it in another way?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 8.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1606
    },
    {
      "id": 12597,
      "post_number": 4,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-05-16T16:29:13.557Z",
      "updated_at": "2025-05-16T17:06:37.367Z",
      "cooked": "<p>I think this is just caused by the order of the metadata label and the page breaks that you put between the sections in your initial post. I can reproduce your issue with the following code where the metadata comes after the page break. This causes the page counter to be incremented again even though the next page already uses the Arabic numbers starting at 1.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(numbering: \"I\")\n#include \"first-section.typ\"\n#pagebreak()\n#metadata(\"end-of-first-section\") &lt;end-of-first-section&gt;\n</code></pre>\n<p>If you put the metadata before the page break, it should work without the manual offset.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(numbering: \"I\")\n#include \"first-section.typ\"\n#metadata(\"end-of-first-section\") &lt;end-of-first-section&gt;\n#pagebreak()\n</code></pre>\n<p>If this does not fix your issue, please post a minimal working example that reproduces the issue. You can use <a href=\"https://typst.app/docs/reference/text/lorem/\"><code>lorem()</code></a> to just add some text instead of including the section files that only you have access to.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(numbering: \"I\")\n#lorem(1000)\n#metadata(\"end-of-first-section\") &lt;end-of-first-section&gt;\n#pagebreak()\n...\n</code></pre>",
      "raw": "I think this is just caused by the order of the metadata label and the page breaks that you put between the sections in your initial post. I can reproduce your issue with the following code where the metadata comes after the page break. This causes the page counter to be incremented again even though the next page already uses the Arabic numbers starting at 1.\n\n```\n#set page(numbering: \"I\")\n#include \"first-section.typ\"\n#pagebreak()\n#metadata(\"end-of-first-section\") <end-of-first-section>\n```\n\nIf you put the metadata before the page break, it should work without the manual offset.\n\n```\n#set page(numbering: \"I\")\n#include \"first-section.typ\"\n#metadata(\"end-of-first-section\") <end-of-first-section>\n#pagebreak()\n```\n\nIf this does not fix your issue, please post a minimal working example that reproduces the issue. You can use [`lorem()`](https://typst.app/docs/reference/text/lorem/) to just add some text instead of including the section files that only you have access to.\n\n```\n#set page(numbering: \"I\")\n#lorem(1000)\n#metadata(\"end-of-first-section\") <end-of-first-section>\n#pagebreak()\n...\n```",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 8.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 12606,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-16T19:46:48.680Z",
      "updated_at": "2025-05-16T19:47:36.231Z",
      "cooked": "<p>Hi. In essence, you want something like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 5cm, height: 2cm, footer-descent: 0pt, margin: 3mm)\n#set pagebreak(weak: true)\n\n#set page(numbering: \"I\")\n\n= I First section\n#pagebreak()\n\n#let saved-page = state(\"saved-page\")\n#context saved-page.update(counter(page).get())\n#set page(numbering: \"1\")\n#counter(page).update(1)\n\n= 1 Main section\n#pagebreak()\n\n= 2 Main section\n#pagebreak()\n\n#set page(numbering: \"I\")\n#context counter(page).update(saved-page.get())\n\n= II Last section\n#pagebreak()\n\n= III Last section\n</code></pre>\n<p>You can create a bunch of wrappers, but if it‚Äôs in the main file that doesn‚Äôt have anything, then I think it‚Äôs fine to leave it as is, because it explains itself pretty well. You can add intention comments.</p>",
      "raw": "Hi. In essence, you want something like this:\n\n```typ\n#set page(width: 5cm, height: 2cm, footer-descent: 0pt, margin: 3mm)\n#set pagebreak(weak: true)\n\n#set page(numbering: \"I\")\n\n= I First section\n#pagebreak()\n\n#let saved-page = state(\"saved-page\")\n#context saved-page.update(counter(page).get())\n#set page(numbering: \"1\")\n#counter(page).update(1)\n\n= 1 Main section\n#pagebreak()\n\n= 2 Main section\n#pagebreak()\n\n#set page(numbering: \"I\")\n#context counter(page).update(saved-page.get())\n\n= II Last section\n#pagebreak()\n\n= III Last section\n```\n\nYou can create a bunch of wrappers, but if it's in the main file that doesn't have anything, then I think it's fine to leave it as is, because it explains itself pretty well. You can add intention comments.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12650,
      "post_number": 6,
      "username": "Methan1075",
      "name": "",
      "created_at": "2025-05-17T06:27:51.816Z",
      "updated_at": "2025-05-17T06:27:51.816Z",
      "cooked": "<p>Hi, that was exactly the solution I needed. Now it works. Thank you very much!</p>",
      "raw": "Hi, that was exactly the solution I needed. Now it works. Thank you very much!",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 11,
      "score": 2.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1606
    }
  ],
  "scraped_at": "2025-06-10T09:47:46.795331"
}
{
  "topic_metadata": {
    "id": 4119,
    "title": "How to resize an included cetz/fletcher chart in a figure to a specific width?",
    "slug": "how-to-resize-an-included-cetz-fletcher-chart-in-a-figure-to-a-specific-width",
    "posts_count": 3,
    "created_at": "2025-05-16T09:10:01.862Z",
    "last_posted_at": "2025-05-16T20:29:07.535Z",
    "views": 77,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Andrew",
    "tags": [
      "layout",
      "graphics"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 420
  },
  "posts": [
    {
      "id": 12575,
      "post_number": 1,
      "username": "joffdd",
      "name": "Joff",
      "created_at": "2025-05-16T09:10:02.071Z",
      "updated_at": "2025-05-16T17:17:33.347Z",
      "cooked": "<p>I have created a <code>cetz</code> chart (in fact, using the <code>fletcher</code> package for convenience) and have saved it in a seperate .typ file. This is what the file <code>assets/chart1.typ</code> contains:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/fletcher:0.5.7\" as fletcher: diagram, node, edge, shapes\n#diagram(\n  // ... nodes &amp; edges go here\n)\n</code></pre>\n<p>In my main document, I place the chart like this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#figure(\n  include \"assets/chart1.typ\",\n  caption: [Figure caption here.]\n) &lt;fig:chart1&gt;\n</code></pre>\n<p>I would like to have a handy option for setting the desired chart‚Äôs width, e.g., 90% of the document width, as I would do with images placed in a figure. I tried this but it has no effect:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#figure(\n  block(include \"assets/chart1.typ\", width: 90%),\n  caption: [Figure caption here.]\n) &lt;fig:chart1&gt;\n</code></pre>\n<p>I‚Äôve found this <a href=\"https://github.com/cetz-package/cetz/discussions/689\" rel=\"noopener nofollow ugc\">suggestion</a> but don‚Äôt understand how to implement it in my case.</p>",
      "raw": "I have created a `cetz` chart (in fact, using the `fletcher` package for convenience) and have saved it in a seperate .typ file. This is what the file `assets/chart1.typ` contains:\n\n```typst\n#import \"@preview/fletcher:0.5.7\" as fletcher: diagram, node, edge, shapes\n#diagram(\n  // ... nodes & edges go here\n)\n```\n\nIn my main document, I place the chart like this:\n\n```typst\n#figure(\n  include \"assets/chart1.typ\",\n  caption: [Figure caption here.]\n) <fig:chart1>\n```\n\nI would like to have a handy option for setting the desired chart's width, e.g., 90% of the document width, as I would do with images placed in a figure. I tried this but it has no effect:\n\n```typst\n#figure(\n  block(include \"assets/chart1.typ\", width: 90%),\n  caption: [Figure caption here.]\n) <fig:chart1>\n```\n\nI've found this [suggestion](https://github.com/cetz-package/cetz/discussions/689) but don't understand how to implement it in my case.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 210.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1494
    },
    {
      "id": 12599,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-05-16T16:57:42.404Z",
      "updated_at": "2025-05-16T16:57:42.404Z",
      "cooked": "<p>Do you just want to scale the entire diagram (including the line widths etc‚Ä¶) or do you want to change the cell-size of the fletcher diagram to get the correct width of the diagram while conserving all other sizes?</p>",
      "raw": "Do you just want to scale the entire diagram (including the line widths etc...) or do you want to change the cell-size of the fletcher diagram to get the correct width of the diagram while conserving all other sizes?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 12609,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-16T20:29:07.535Z",
      "updated_at": "2025-05-16T20:31:43.362Z",
      "cooked": "<p>The easiest and most straightforward way to scale is to use <a href=\"https://typst.app/docs/reference/layout/scale/\"><code>scale</code></a> with <code>reflow: true</code>, since it‚Äôs not yet on by default.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/fletcher:0.5.7\": diagram, edge, node\n#set scale(reflow: true)\n\n#let diagram1 = diagram({\n  node((0, 0))[$A$]\n  edge(\"-&gt;\")\n  node((1, 0))[$B$]\n})\n\n#figure(scale(100%, diagram1), caption: [Figure caption here.])\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/3/303d777c47182758a27b293d47537b6ab98f0c47.png\" data-download-href=\"https://forum.typst.app/uploads/default/303d777c47182758a27b293d47537b6ab98f0c47\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/3/303d777c47182758a27b293d47537b6ab98f0c47_2_690x46.png\" alt=\"image\" data-base62-sha1=\"6SKBQCRcO1agtzJHELEIwvpTBvV\" width=\"690\" height=\"46\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/3/303d777c47182758a27b293d47537b6ab98f0c47_2_690x46.png, https://forum.typst.app/uploads/default/original/2X/3/303d777c47182758a27b293d47537b6ab98f0c47.png 1.5x, https://forum.typst.app/uploads/default/original/2X/3/303d777c47182758a27b293d47537b6ab98f0c47.png 2x\" data-dominant-color=\"3E3E3D\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">738√ó50 3.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>But if you insist on a specific width‚Ä¶</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/fletcher:0.5.7\": diagram, edge, node\n\n#let scale-to-width(width, body) = layout(page-size =&gt; {\n  let size = measure(body, ..page-size)\n  let target-width = if type(width) == ratio {\n    page-size.width * width\n  } else if type(width) == relative {\n    page-size.width * width.ratio + width.length\n  } else {\n    width\n  }\n  let multiplier = target-width.to-absolute() / size.width\n  scale(reflow: true, multiplier * 100%, body)\n})\n\n#let diagram1 = diagram({\n  node((0, 0))[$A$]\n  edge(\"-&gt;\")\n  node((1, 0))[$B$]\n})\n\n#align(center, rect(width: 2em, stroke: 1pt))\n#figure(scale-to-width(2em, diagram1), caption: [Figure caption here.])\n#figure(scale-to-width(50% + 50pt, diagram1), caption: [Figure caption here.])\n#figure(scale-to-width(100%, diagram1), caption: [Figure caption here.])\n#line(length: 100%)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/1/1234cbb78ecb0170e90c7ef520334064e198b0ef.png\" data-download-href=\"https://forum.typst.app/uploads/default/1234cbb78ecb0170e90c7ef520334064e198b0ef\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/1/1234cbb78ecb0170e90c7ef520334064e198b0ef_2_690x280.png\" alt=\"image\" data-base62-sha1=\"2B3HWWCEAmPPHdxBeeGlwk1D68f\" width=\"690\" height=\"280\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/1/1234cbb78ecb0170e90c7ef520334064e198b0ef_2_690x280.png, https://forum.typst.app/uploads/default/original/2X/1/1234cbb78ecb0170e90c7ef520334064e198b0ef.png 1.5x, https://forum.typst.app/uploads/default/original/2X/1/1234cbb78ecb0170e90c7ef520334064e198b0ef.png 2x\" data-dominant-color=\"434342\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">738√ó300 19.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>P.S. Thankfully, <code>figure</code> does not create a new container, or probably just not a rigid/fixed container, so we can still fetch the page‚Äôs size from the inside.</p>",
      "raw": "The easiest and most straightforward way to scale is to use [`scale`](https://typst.app/docs/reference/layout/scale/) with `reflow: true`, since it's not yet on by default.\n\n```typ\n#import \"@preview/fletcher:0.5.7\": diagram, edge, node\n#set scale(reflow: true)\n\n#let diagram1 = diagram({\n  node((0, 0))[$A$]\n  edge(\"->\")\n  node((1, 0))[$B$]\n})\n\n#figure(scale(100%, diagram1), caption: [Figure caption here.])\n```\n\n![image|690x46](upload://6SKBQCRcO1agtzJHELEIwvpTBvV.png)\n\nBut if you insist on a specific width...\n\n```typ\n#import \"@preview/fletcher:0.5.7\": diagram, edge, node\n\n#let scale-to-width(width, body) = layout(page-size => {\n  let size = measure(body, ..page-size)\n  let target-width = if type(width) == ratio {\n    page-size.width * width\n  } else if type(width) == relative {\n    page-size.width * width.ratio + width.length\n  } else {\n    width\n  }\n  let multiplier = target-width.to-absolute() / size.width\n  scale(reflow: true, multiplier * 100%, body)\n})\n\n#let diagram1 = diagram({\n  node((0, 0))[$A$]\n  edge(\"->\")\n  node((1, 0))[$B$]\n})\n\n#align(center, rect(width: 2em, stroke: 1pt))\n#figure(scale-to-width(2em, diagram1), caption: [Figure caption here.])\n#figure(scale-to-width(50% + 50pt, diagram1), caption: [Figure caption here.])\n#figure(scale-to-width(100%, diagram1), caption: [Figure caption here.])\n#line(length: 100%)\n```\n\n![image|690x280](upload://2B3HWWCEAmPPHdxBeeGlwk1D68f.png)\n\nP.S. Thankfully, `figure` does not create a new container, or probably just not a rigid/fixed container, so we can still fetch the page's size from the inside.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 20,
      "score": 39.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:46.075308"
}
