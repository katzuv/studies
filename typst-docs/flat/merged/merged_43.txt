{
  "topic_metadata": {
    "id": 984,
    "title": "How to customize figure captions with subpar in 0.12?",
    "slug": "how-to-customize-figure-captions-with-subpar-in-0-12",
    "posts_count": 7,
    "created_at": "2024-10-08T12:21:57.322Z",
    "last_posted_at": "2024-10-08T18:33:42.370Z",
    "views": 439,
    "like_count": 4,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "Tinger",
    "tags": [
      "figures"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 540
  },
  "posts": [
    {
      "id": 3561,
      "post_number": 1,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-10-08T12:21:57.481Z",
      "updated_at": "2024-10-08T12:21:57.481Z",
      "cooked": "<p>I want figure captions with bold supplement+number+separator, but the following code does not seem to work well with the subpar package in the Typst 0.12 Testing version:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/subpar:0.1.1\"\n\n#show figure.caption: it =&gt; context box(\n  inset: (left: 1em, right: 1em),\n  align(left)[\n    *#it.supplement~#it.counter.display()#it.separator*#it.body\n  ]\n)\n\n#subpar.grid(\n  figure(\n    box(stroke: 1pt, inset: 5pt)[This is a figure],\n    caption: [This is a caption]\n  ),\n  figure(\n    box(stroke: 1pt, inset: 5pt)[This is a figure],\n    caption: [This is a caption]\n  ),\n  columns: (1fr, 1fr),\n  caption: [These are two subfigures.],\n  placement: auto,\n  label: &lt;fig1&gt;,\n)\n\n#figure(\n  box(stroke: 1pt, inset: 5pt)[This is a figure],\n  caption: [This is a caption]\n) &lt;fig2&gt;\n</code></pre>\n<p>This is the result with 0.12 (the subpar figure has number 0):</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/abb2fa410a42d9344b8e2f85de9b16d082e1e1f2.png\" alt=\"image\" data-base62-sha1=\"ouV6vXPmSJ1Pmr5nu2WzFA8TmDw\" width=\"496\" height=\"165\"></p>\n<p>This is the result with 0.11.1 (the subpar figure has number 1):</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/7975591213939b1c9a726546f89def6a8674a664.png\" alt=\"image\" data-base62-sha1=\"hktbP5msQhm7fxhbRBHYZpLL3fu\" width=\"480\" height=\"161\"></p>\n<p>How to fix this?</p>",
      "raw": "I want figure captions with bold supplement+number+separator, but the following code does not seem to work well with the subpar package in the Typst 0.12 Testing version:\n\n```typ\n#import \"@preview/subpar:0.1.1\"\n\n#show figure.caption: it => context box(\n  inset: (left: 1em, right: 1em),\n  align(left)[\n    *#it.supplement~#it.counter.display()#it.separator*#it.body\n  ]\n)\n\n#subpar.grid(\n  figure(\n    box(stroke: 1pt, inset: 5pt)[This is a figure],\n    caption: [This is a caption]\n  ),\n  figure(\n    box(stroke: 1pt, inset: 5pt)[This is a figure],\n    caption: [This is a caption]\n  ),\n  columns: (1fr, 1fr),\n  caption: [These are two subfigures.],\n  placement: auto,\n  label: <fig1>,\n)\n\n#figure(\n  box(stroke: 1pt, inset: 5pt)[This is a figure],\n  caption: [This is a caption]\n) <fig2>\n```\n\nThis is the result with 0.12 (the subpar figure has number 0):\n\n![image|496x165](upload://ouV6vXPmSJ1Pmr5nu2WzFA8TmDw.png)\n\nThis is the result with 0.11.1 (the subpar figure has number 1):\n\n![image|480x161](upload://hktbP5msQhm7fxhbRBHYZpLL3fu.png)\n\nHow to fix this?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 1827.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 3562,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-08T12:35:37.234Z",
      "updated_at": "2024-10-08T12:35:37.234Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"talb\" data-post=\"1\" data-topic=\"984\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/talb/48/463_2.png\" class=\"avatar\"> talb:</div>\n<blockquote>\n<p>How to fix this?</p>\n</blockquote>\n</aside>\n<p>Wait until <a class=\"mention\" href=\"/u/tinger\">@Tinger</a> updates the package for v0.12 which hasn’t yet officially released. The issue is the new interaction between <code>counter.display()</code> and floating figures: <a href=\"https://forum.typst.app/t/how-to-customize-the-style-of-equation-numbering/641/8\" class=\"inline-onebox\">How to customize the style of equation numbering? - #8 by xkevio</a></p>",
      "raw": "[quote=\"talb, post:1, topic:984\"]\nHow to fix this?\n[/quote]\n Wait until @Tinger updates the package for v0.12 which hasn't yet officially released. The issue is the new interaction between `counter.display()` and floating figures: https://forum.typst.app/t/how-to-customize-the-style-of-equation-numbering/641/8",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 2,
      "reads": 55,
      "score": 91.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3563,
      "post_number": 3,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-10-08T12:38:06.431Z",
      "updated_at": "2024-10-08T12:38:06.431Z",
      "cooked": "<p>Thanks. Should I report the bugs I encounter in 0.12 directly as GitHub issues to avoid polluting the forum?</p>",
      "raw": "Thanks. Should I report the bugs I encounter in 0.12 directly as GitHub issues to avoid polluting the forum?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 15.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 3564,
      "post_number": 4,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-08T12:39:18.236Z",
      "updated_at": "2024-10-08T12:39:32.132Z",
      "cooked": "<p>This you would have to report to the <code>subpar</code> repository as this new behavior isn’t actually a bug (in Typst) but technically correct now. The fact that <code>counter.display()</code> worked before with floating figures was apparently only a coincidence.</p>",
      "raw": "This you would have to report to the `subpar` repository as this new behavior isn't actually a bug (in Typst) but technically correct now. The fact that `counter.display()` worked before with floating figures was apparently only a coincidence.",
      "reply_to_post_number": 3,
      "reply_count": 3,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 40.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3565,
      "post_number": 5,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-10-08T12:40:44.791Z",
      "updated_at": "2024-10-08T12:40:44.791Z",
      "cooked": "<p>Yes of course, I meant filing an issue to the corresponding package.</p>",
      "raw": "Yes of course, I meant filing an issue to the corresponding package.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 49,
      "score": 34.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 3566,
      "post_number": 6,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-10-08T12:56:55.172Z",
      "updated_at": "2024-10-08T12:56:55.172Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"xkevio\" data-post=\"4\" data-topic=\"984\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/xkevio/48/37_2.png\" class=\"avatar\"> xkevio:</div>\n<blockquote>\n<p>This you would have to report to the <code>subpar</code> repository as this new behavior isn’t actually a bug (in Typst) but technically correct now. The fact that <code>counter.display()</code> worked before with floating figures was apparently only a coincidence.</p>\n</blockquote>\n</aside>\n<p>Indeed and that also gives us a hint at a solution. Because, this also reproduces the issue:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure.caption: it =&gt; context box(\n  inset: (left: 1em, right: 1em),\n  align(left)[\n    *#it.supplement~#it.counter.display()#it.separator*#it.body\n  ]\n)\n\n#figure(\n  box(stroke: 1pt, inset: 5pt)[This is a figure],\n  caption: [This is a caption],\n  placement: auto,\n)\n</code></pre>\n<p>In both cases the solution is to nest the <code>caption</code> show rule inside a <code>figure</code> show rule and using that figure’s location to get the correct counter value, as seen here:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure: fig =&gt; {\n  show figure.caption: it =&gt; context box(\n    inset: (left: 1em, right: 1em),\n    align(left)[\n      *#it.supplement~#numbering(it.numbering, ..it.counter.at(fig.location()))#it.separator*#it.body\n    ]\n  )\n\n  fig\n}\n</code></pre>\n<p>This fixes the issue for both cases, hope that helps. :)</p>",
      "raw": "[quote=\"xkevio, post:4, topic:984, full:true\"]\nThis you would have to report to the `subpar` repository as this new behavior isn’t actually a bug (in Typst) but technically correct now. The fact that `counter.display()` worked before with floating figures was apparently only a coincidence.\n[/quote]\n\nIndeed and that also gives us a hint at a solution. Because, this also reproduces the issue:\n```typ\n#show figure.caption: it => context box(\n  inset: (left: 1em, right: 1em),\n  align(left)[\n    *#it.supplement~#it.counter.display()#it.separator*#it.body\n  ]\n)\n\n#figure(\n  box(stroke: 1pt, inset: 5pt)[This is a figure],\n  caption: [This is a caption],\n  placement: auto,\n)\n```\n\nIn both cases the solution is to nest the `caption` show rule inside a `figure` show rule and using that figure's location to get the correct counter value, as seen here:\n```typ\n#show figure: fig => {\n  show figure.caption: it => context box(\n    inset: (left: 1em, right: 1em),\n    align(left)[\n      *#it.supplement~#numbering(it.numbering, ..it.counter.at(fig.location()))#it.separator*#it.body\n    ]\n  )\n\n  fig\n}\n```\n\nThis fixes the issue for both cases, hope that helps. :)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 47,
      "score": 74.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 3577,
      "post_number": 7,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-08T18:33:42.370Z",
      "updated_at": "2024-10-08T18:33:42.370Z",
      "cooked": "<p>Let’s put it this way: Using the figure‘s location is definitely the most correct. The other thing working was more by accident than design. That said, its probably still the more desirable behavior. Having said that it is not a regression was sugarcoating on my end.</p>\n<p>I’m still thinking through how exactly it should work, but it will probably change again, though I’m not sure whether in time for the release.</p>",
      "raw": "Let’s put it this way: Using the figure‘s location is definitely the most correct. The other thing working was more by accident than design. That said, its probably still the more desirable behavior. Having said that it is not a regression was sugarcoating on my end.\n\nI’m still thinking through how exactly it should work, but it will probably change again, though I’m not sure whether in time for the release.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 37.6,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    }
  ],
  "scraped_at": "2025-06-10T09:57:10.983929"
}
{
  "topic_metadata": {
    "id": 985,
    "title": "How to justify Gloassarium glossary with Typst 0.12-rc1?",
    "slug": "how-to-justify-gloassarium-glossary-with-typst-0-12-rc1",
    "posts_count": 2,
    "created_at": "2024-10-08T15:55:11.363Z",
    "last_posted_at": "2024-10-08T16:24:46.017Z",
    "views": 62,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "fdekerm",
    "tags": [
      "glossarium"
    ],
    "category_id": 5,
    "participant_count": 1,
    "word_count": 98
  },
  "posts": [
    {
      "id": 3570,
      "post_number": 1,
      "username": "fdekerm",
      "name": "François de Kermenguy",
      "created_at": "2024-10-08T15:55:11.496Z",
      "updated_at": "2024-10-10T16:15:22.150Z",
      "cooked": "<p>Hello everyone,<br>\nSwitching to Typst 0.12, my glossary generated with <a href=\"https://typst.app/universe/package/glossarium\">GLoassarium</a> is no longer left-justified. I’ve had a look at the package code and modified a few things, but it’s impossible to do as in 0.11. Is there a method “external” to the packahe to justify the gloassaire?</p>\n<p>merci!<br>\nfdekerm</p>\n<p>With 0.11:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/8eca79d277122b47318e8714d21b2122f595d243.png\" data-download-href=\"https://forum.typst.app/uploads/default/8eca79d277122b47318e8714d21b2122f595d243\" title=\"374619367-9d59590c-8f7d-438b-bf00-a1406302b379\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/8eca79d277122b47318e8714d21b2122f595d243_2_690x404.png\" alt=\"374619367-9d59590c-8f7d-438b-bf00-a1406302b379\" data-base62-sha1=\"knbBph6JyTM4SmcdXtEedFqkeor\" width=\"690\" height=\"404\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/8eca79d277122b47318e8714d21b2122f595d243_2_690x404.png, https://forum.typst.app/uploads/default/original/1X/8eca79d277122b47318e8714d21b2122f595d243.png 1.5x, https://forum.typst.app/uploads/default/original/1X/8eca79d277122b47318e8714d21b2122f595d243.png 2x\" data-dominant-color=\"FBFBFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">374619367-9d59590c-8f7d-438b-bf00-a1406302b379</span><span class=\"informations\">765×449 39.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>With 0.12-rc1<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/c9e79da150a00b5c806316e5fb66ab97d0d7238f.png\" data-download-href=\"https://forum.typst.app/uploads/default/c9e79da150a00b5c806316e5fb66ab97d0d7238f\" title=\"374619153-8a48809e-5d5f-42f2-8122-ef408def8f54\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/c9e79da150a00b5c806316e5fb66ab97d0d7238f_2_690x385.png\" alt=\"374619153-8a48809e-5d5f-42f2-8122-ef408def8f54\" data-base62-sha1=\"sO8cLRFzjUWWzNjr3q40uSPBKJF\" width=\"690\" height=\"385\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/c9e79da150a00b5c806316e5fb66ab97d0d7238f_2_690x385.png, https://forum.typst.app/uploads/default/optimized/1X/c9e79da150a00b5c806316e5fb66ab97d0d7238f_2_1035x577.png 1.5x, https://forum.typst.app/uploads/default/original/1X/c9e79da150a00b5c806316e5fb66ab97d0d7238f.png 2x\" data-dominant-color=\"FCFBFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">374619153-8a48809e-5d5f-42f2-8122-ef408def8f54</span><span class=\"informations\">1244×695 81.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hello everyone, \nSwitching to Typst 0.12, my glossary generated with [GLoassarium](https://typst.app/universe/package/glossarium) is no longer left-justified. I've had a look at the package code and modified a few things, but it's impossible to do as in 0.11. Is there a method “external” to the packahe to justify the gloassaire?\n\nmerci!\nfdekerm\n\nWith 0.11:\n![374619367-9d59590c-8f7d-438b-bf00-a1406302b379|690x404](upload://knbBph6JyTM4SmcdXtEedFqkeor.png)\n\nWith 0.12-rc1\n![374619153-8a48809e-5d5f-42f2-8122-ef408def8f54|690x385](upload://sO8cLRFzjUWWzNjr3q40uSPBKJF.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 80.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 3571,
      "post_number": 2,
      "username": "fdekerm",
      "name": "François de Kermenguy",
      "created_at": "2024-10-08T16:24:46.017Z",
      "updated_at": "2024-10-08T16:24:46.017Z",
      "cooked": "<p>solved here: <a href=\"https://github.com/typst-community/glossarium/issues/63\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">(0.12-rc1) Unjustified glossary · Issue #63 · typst-community/glossarium · GitHub</a></p>",
      "raw": "solved here: https://github.com/typst-community/glossarium/issues/63",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 136
    }
  ],
  "scraped_at": "2025-06-10T09:57:10.243662"
}
{
  "topic_metadata": {
    "id": 997,
    "title": "How to customize or remove the dash in block quotes?",
    "slug": "how-to-customize-or-remove-the-dash-in-block-quotes",
    "posts_count": 3,
    "created_at": "2024-10-09T18:23:05.229Z",
    "last_posted_at": "2024-10-10T07:23:32.089Z",
    "views": 245,
    "like_count": 5,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 451
  },
  "posts": [
    {
      "id": 3625,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-09T18:23:05.413Z",
      "updated_at": "2024-10-10T09:37:07.476Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#quote(attribution: \"John Doe\", block: true)[\n  Lorem ipsum dolor sit amet.\n]\n</code></pre>\n<p>is rendered as</p>\n<pre data-code-wrap=\"none\"><code class=\"lang-none\">Lorem ipsum dolor sit amet.\n                                    &lt;em dash&gt; John Doe\n</code></pre>\n<p>Is it possible to customize that em dash? For example:</p>\n<ul>\n<li>to remove the space character next to it, so that it will be <strong>—John Doe</strong></li>\n<li>to remove the em dash, so that it will be simply <strong>John Doe</strong></li>\n<li>to replace the em dash with the en dash</li>\n</ul>",
      "raw": "```typ\n#quote(attribution: \"John Doe\", block: true)[\n  Lorem ipsum dolor sit amet.\n]\n```\n\nis rendered as\n\n```none\nLorem ipsum dolor sit amet.\n                                    <em dash> John Doe\n```\n\nIs it possible to customize that em dash? For example:\n\n- to remove the space character next to it, so that it will be **—John Doe**\n- to remove the em dash, so that it will be simply **John Doe**\n- to replace the em dash with the en dash",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 1376.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 3637,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-10T05:57:52.996Z",
      "updated_at": "2024-10-10T05:59:10.271Z",
      "cooked": "<p>Hello,<br>\nYou might be interested in reading about <a href=\"https://typst.app/docs/tutorial/formatting/#show-rules\">show rules</a>. You can pretty much <em>do anything</em> if you set your mind to it in Typst.<br>\nIn this case, customizing the behaviour of <a href=\"https://typst.app/docs/reference/model/quote/#parameters-attribution\"><code>quote.attribution</code></a> is relatively straightforward.</p>\n<ul>\n<li>The attribution must be aligned opposite of the text direction, hence we use <a href=\"https://typst.app/docs/reference/layout/alignment/\"><code>end</code></a></li>\n<li>Your request concerns exclusively block quotes, so the show rule must be <code>show quote.where(block:true)</code>, see <a href=\"https://typst.app/docs/reference/foundations/function/#definitions-where\"><code>where</code></a>.</li>\n<li>Afterwards, we just reconstruct the original block quote.\n<ul>\n<li>The width of the box by default is set to <code>auto</code>, so we must use <a href=\"https://typst.app/docs/reference/layout/block/#parameters-width\"><code>width: 100%</code></a></li>\n<li>There is padding in the original block quote, so we can pad the content using <a href=\"https://typst.app/docs/reference/layout/block/#parameters-inset\"><code>inset: 1em</code></a></li>\n<li>We take into account the original <a href=\"https://typst.app/docs/reference/model/quote/#parameters-quotes\">quotes</a> parameter and simply write on different lines the body, and the attribution.</li>\n</ul>\n</li>\n</ul>\n<p>See the code below!</p>\n<p>P.S.: don’t hesitate to change your post title to fit the guidelines, see <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#quote(attribution: \"John Doe\", block: true)[\n  Lorem ipsum dolor sit amet.\n]\n\n#show quote.where(block: true): it =&gt; {\n  let attribution = if it.attribution != none { \n    align(end, [--- #it.attribution])\n    align(end, [---#it.attribution])\n    align(end, [#it.attribution])\n    align(end, [-- #it.attribution])\n  }\n  block(\n    width: 100%,\n    inset: 1em, \n    if it.quotes == true [ \n      #quote(it.body) \n      #attribution\n    ] else [ \n      #it.body \n      #attribution\n    ]\n  ) \n}\n\n#quote(attribution: \"John Doe\", quotes: false, block: true)[\n  Lorem ipsum dolor sit amet.\n]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/0ea8b0a854c9feac34dd9f9374f3730cafd3442b.png\" data-download-href=\"https://forum.typst.app/uploads/default/0ea8b0a854c9feac34dd9f9374f3730cafd3442b\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/0ea8b0a854c9feac34dd9f9374f3730cafd3442b_2_690x460.png\" alt=\"image\" data-base62-sha1=\"25G6hKnzqZSKkPxJhJsD3oARdBF\" width=\"690\" height=\"460\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/0ea8b0a854c9feac34dd9f9374f3730cafd3442b_2_690x460.png, https://forum.typst.app/uploads/default/optimized/1X/0ea8b0a854c9feac34dd9f9374f3730cafd3442b_2_1035x690.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/0ea8b0a854c9feac34dd9f9374f3730cafd3442b_2_1380x920.png 2x\" data-dominant-color=\"FBFBFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1772×1182 68 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hello,\nYou might be interested in reading about [show rules](https://typst.app/docs/tutorial/formatting/#show-rules). You can pretty much *do anything* if you set your mind to it in Typst.\nIn this case, customizing the behaviour of [`quote.attribution`](https://typst.app/docs/reference/model/quote/#parameters-attribution) is relatively straightforward.\n\n- The attribution must be aligned opposite of the text direction, hence we use [`end`](https://typst.app/docs/reference/layout/alignment/)\n- Your request concerns exclusively block quotes, so the show rule must be `show quote.where(block:true)`, see [`where`](https://typst.app/docs/reference/foundations/function/#definitions-where).\n- Afterwards, we just reconstruct the original block quote.\n   - The width of the box by default is set to `auto`, so we must use [`width: 100%`](https://typst.app/docs/reference/layout/block/#parameters-width)\n   -  There is padding in the original block quote, so we can pad the content using [`inset: 1em`](https://typst.app/docs/reference/layout/block/#parameters-inset)\n   - We take into account the original [quotes](https://typst.app/docs/reference/model/quote/#parameters-quotes) parameter and simply write on different lines the body, and the attribution.\n\nSee the code below! \n\nP.S.: don't hesitate to change your post title to fit the guidelines, see https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\n```typ\n#quote(attribution: \"John Doe\", block: true)[\n  Lorem ipsum dolor sit amet.\n]\n\n#show quote.where(block: true): it => {\n  let attribution = if it.attribution != none { \n    align(end, [--- #it.attribution])\n    align(end, [---#it.attribution])\n    align(end, [#it.attribution])\n    align(end, [-- #it.attribution])\n  }\n  block(\n    width: 100%,\n    inset: 1em, \n    if it.quotes == true [ \n      #quote(it.body) \n      #attribution\n    ] else [ \n      #it.body \n      #attribution\n    ]\n  ) \n}\n\n#quote(attribution: \"John Doe\", quotes: false, block: true)[\n  Lorem ipsum dolor sit amet.\n]\n```\n![image|690x460](upload://25G6hKnzqZSKkPxJhJsD3oARdBF.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 26,
      "score": 115.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3641,
      "post_number": 3,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-10T07:23:32.089Z",
      "updated_at": "2024-10-10T07:24:28.706Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> gave the right answer I think. But if you’re looking for a quick fix for some quotes, and these quotes don’t use the em-dash in the body, you can use the following:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show quote: it =&gt; {\n  show sym.dash.em: sym.dash.en\n  it\n}\n</code></pre>\n<p>This replaces the em-dash with an en-dash, but you can also add spaces or whatever. But it’s a hack since it will also affect em-dashes in the quote body.</p>",
      "raw": "@quachpas gave the right answer I think. But if you're looking for a quick fix for some quotes, and these quotes don't use the em-dash in the body, you can use the following:\n\n```typ\n#show quote: it => {\n  show sym.dash.em: sym.dash.en\n  it\n}\n```\n\nThis replaces the em-dash with an en-dash, but you can also add spaces or whatever. But it's a hack since it will also affect em-dashes in the quote body.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 22,
      "score": 34.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:57:09.534957"
}
{
  "topic_metadata": {
    "id": 999,
    "title": "How to change spacing between list items?",
    "slug": "how-to-change-spacing-between-list-items",
    "posts_count": 4,
    "created_at": "2024-10-10T01:27:47.203Z",
    "last_posted_at": "2024-10-13T17:51:26.599Z",
    "views": 430,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Blaz",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 316
  },
  "posts": [
    {
      "id": 3630,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-10T01:27:47.356Z",
      "updated_at": "2024-10-12T20:08:26.942Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let leading_and_spacing = 1em\n#set par(first-line-indent: 1em, justify: true, leading: leading_and_spacing)\n#show par: set block(spacing: leading_and_spacing)\n\n#show enum: set par(first-line-indent: 0em)\n#show list: set par(first-line-indent: 0em)\n\n#show enum: set par(leading: 0.5em)\n#show enum: set block(above: 2em, below: 2em, spacing: 2em) // doesn't make any effect?\n\n// --\n\n#lorem(20)\n\n#lorem(20)\n\n#pad(left: 1em, [\n  + #lorem(20)\n\n    #lorem(20)\n    + #lorem(10)\n    + #lorem(10)\n  + #lorem(20)\n  + #lorem(20)\n])\n\n#lorem(20)\n\n#lorem(20)\n</code></pre>\n<p>Currenlty, the output is like this:</p>\n<blockquote>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/36bfc5999f1242ed4cf4bccb18d5bdcb15bfb445.png\" data-download-href=\"https://forum.typst.app/uploads/default/36bfc5999f1242ed4cf4bccb18d5bdcb15bfb445\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/36bfc5999f1242ed4cf4bccb18d5bdcb15bfb445_2_690x429.png\" alt=\"image\" data-base62-sha1=\"7OkEtb8dmFioAMN15HghN3hYWQR\" width=\"690\" height=\"429\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/36bfc5999f1242ed4cf4bccb18d5bdcb15bfb445_2_690x429.png, https://forum.typst.app/uploads/default/optimized/1X/36bfc5999f1242ed4cf4bccb18d5bdcb15bfb445_2_1035x643.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/36bfc5999f1242ed4cf4bccb18d5bdcb15bfb445_2_1380x858.png 2x\" data-dominant-color=\"E8E8E8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1626×1012 220 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</blockquote>\n<p>Is it possible to change how far list items are one from another? That is, is it possible to make the list look like this:</p>\n<blockquote>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/cc59a927bffdb0a1eae1d8ef63504f2555ef6b16.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/cc59a927bffdb0a1eae1d8ef63504f2555ef6b16\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/cc59a927bffdb0a1eae1d8ef63504f2555ef6b16_2_690x458.jpeg\" alt=\"image\" data-base62-sha1=\"t9Lv4SEXydo8rwGZXhAzrn8geiy\" width=\"690\" height=\"458\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/cc59a927bffdb0a1eae1d8ef63504f2555ef6b16_2_690x458.jpeg, https://forum.typst.app/uploads/default/optimized/1X/cc59a927bffdb0a1eae1d8ef63504f2555ef6b16_2_1035x687.jpeg 1.5x, https://forum.typst.app/uploads/default/original/1X/cc59a927bffdb0a1eae1d8ef63504f2555ef6b16.jpeg 2x\" data-dominant-color=\"E9E9E9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1220×810 194 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</blockquote>",
      "raw": "```typ\n#let leading_and_spacing = 1em\n#set par(first-line-indent: 1em, justify: true, leading: leading_and_spacing)\n#show par: set block(spacing: leading_and_spacing)\n\n#show enum: set par(first-line-indent: 0em)\n#show list: set par(first-line-indent: 0em)\n\n#show enum: set par(leading: 0.5em)\n#show enum: set block(above: 2em, below: 2em, spacing: 2em) // doesn't make any effect?\n\n// --\n\n#lorem(20)\n\n#lorem(20)\n\n#pad(left: 1em, [\n  + #lorem(20)\n\n    #lorem(20)\n    + #lorem(10)\n    + #lorem(10)\n  + #lorem(20)\n  + #lorem(20)\n])\n\n#lorem(20)\n\n#lorem(20)\n```\n\nCurrenlty, the output is like this:\n\n> ![image|690x429](upload://7OkEtb8dmFioAMN15HghN3hYWQR.png)\n\nIs it possible to change how far list items are one from another? That is, is it possible to make the list look like this:\n\n> ![image|690x458](upload://t9Lv4SEXydo8rwGZXhAzrn8geiy.jpeg)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 1989.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 3635,
      "post_number": 2,
      "username": "Blaz",
      "name": "Blaz",
      "created_at": "2024-10-10T05:28:14.688Z",
      "updated_at": "2024-10-10T05:28:14.688Z",
      "cooked": "<p>See the <a href=\"https://typst.app/docs/reference/model/enum/#parameters-spacing\">spacing parameter</a> of enum.</p>",
      "raw": "See the [spacing parameter](https://typst.app/docs/reference/model/enum/#parameters-spacing) of enum.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 44,
      "score": 33.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 98
    },
    {
      "id": 3649,
      "post_number": 3,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-10T10:16:13.496Z",
      "updated_at": "2024-10-10T10:16:13.496Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/blaz\">@Blaz</a>, thanks, now it looks much better. Here is the current version:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let leading_and_spacing = 1em\n#set par(first-line-indent: 1em, justify: true, leading: leading_and_spacing)\n#show par: set block(spacing: leading_and_spacing)\n\n#show enum: set par(first-line-indent: 0em)\n#show enum: set par(leading: 0.5em)\n#set enum(spacing: 1em)\n\n// --\n\n#lorem(20)\n\n#lorem(20)\n\n#pad(left: 1em, [\n  + #lorem(20)\n\n    #lorem(20)\n\n    + #lorem(10)\n\n    + #lorem(10)\n\n  + #lorem(20)\n\n  + #lorem(20)\n])\n\n#lorem(20)\n\n#lorem(20)\n</code></pre>\n<blockquote>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/1317a7d1291a8635e087ac840775f67630589b4e.png\" data-download-href=\"https://forum.typst.app/uploads/default/1317a7d1291a8635e087ac840775f67630589b4e\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/1317a7d1291a8635e087ac840775f67630589b4e_2_689x474.png\" alt=\"image\" data-base62-sha1=\"2ITKJbe0uxHvFt3yx93jwZCdXPM\" width=\"689\" height=\"474\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/1317a7d1291a8635e087ac840775f67630589b4e_2_689x474.png, https://forum.typst.app/uploads/default/optimized/1X/1317a7d1291a8635e087ac840775f67630589b4e_2_1033x711.png 1.5x, https://forum.typst.app/uploads/default/original/1X/1317a7d1291a8635e087ac840775f67630589b4e.png 2x\" data-dominant-color=\"EAEAEA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1206×830 209 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</blockquote>\n<p>Currently, the appearance is exactly what I tried to achieve. But if I change the numbers from</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show enum: set par(leading: 0.5em)\n#set enum(spacing: 1em)\n</code></pre>\n<p>to, for example, <code>2em</code> and <code>5em</code> respectively,</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show enum: set par(leading: 2em)\n#set enum(spacing: 5em)\n</code></pre>\n<p>the spacing doesn’t look consistent anymore:</p>\n<blockquote>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/4228b89049911127a73f4054f4a3389e99982976.png\" data-download-href=\"https://forum.typst.app/uploads/default/4228b89049911127a73f4054f4a3389e99982976\" title=\"Screenshot 2024-10-10 at 1.06.25 PM\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/4228b89049911127a73f4054f4a3389e99982976_2_460x500.png\" alt=\"Screenshot 2024-10-10 at 1.06.25 PM\" data-base62-sha1=\"9rgKX0v5aazQ1vzjpmO1LZA1E8e\" width=\"460\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/4228b89049911127a73f4054f4a3389e99982976_2_460x500.png, https://forum.typst.app/uploads/default/optimized/1X/4228b89049911127a73f4054f4a3389e99982976_2_690x750.png 1.5x, https://forum.typst.app/uploads/default/original/1X/4228b89049911127a73f4054f4a3389e99982976.png 2x\" data-dominant-color=\"F3F3F2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2024-10-10 at 1.06.25 PM</span><span class=\"informations\">866×940 143 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</blockquote>\n<p>How is it possible to increase the spacing where I added red arrows to 5em?</p>",
      "raw": "@Blaz, thanks, now it looks much better. Here is the current version:\n\n```typ\n#let leading_and_spacing = 1em\n#set par(first-line-indent: 1em, justify: true, leading: leading_and_spacing)\n#show par: set block(spacing: leading_and_spacing)\n\n#show enum: set par(first-line-indent: 0em)\n#show enum: set par(leading: 0.5em)\n#set enum(spacing: 1em)\n\n// --\n\n#lorem(20)\n\n#lorem(20)\n\n#pad(left: 1em, [\n  + #lorem(20)\n\n    #lorem(20)\n\n    + #lorem(10)\n\n    + #lorem(10)\n\n  + #lorem(20)\n\n  + #lorem(20)\n])\n\n#lorem(20)\n\n#lorem(20)\n```\n\n> ![image|689x474](upload://2ITKJbe0uxHvFt3yx93jwZCdXPM.png)\n\nCurrently, the appearance is exactly what I tried to achieve. But if I change the numbers from\n\n```typ\n#show enum: set par(leading: 0.5em)\n#set enum(spacing: 1em)\n```\n\nto, for example, `2em` and `5em` respectively,\n\n```typ\n#show enum: set par(leading: 2em)\n#set enum(spacing: 5em)\n```\n\nthe spacing doesn't look consistent anymore:\n\n> ![Screenshot 2024-10-10 at 1.06.25 PM|460x500](upload://9rgKX0v5aazQ1vzjpmO1LZA1E8e.png)\n\nHow is it possible to increase the spacing where I added red arrows to 5em?",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 23.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 3827,
      "post_number": 4,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-13T17:51:26.599Z",
      "updated_at": "2024-10-13T17:51:26.599Z",
      "cooked": "<p>A follow-up topic: <a href=\"https://forum.typst.app/t/how-to-change-spacing-between-list-item-paragraphs/1060\" class=\"inline-onebox\">How to change spacing between list item paragraphs?</a></p>",
      "raw": "A follow-up topic: https://forum.typst.app/t/how-to-change-spacing-between-list-item-paragraphs/1060",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 10.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    }
  ],
  "scraped_at": "2025-06-10T09:57:08.809654"
}
= cbor

Reads structured data from a CBOR file.

The file must contain a valid CBOR serialization. Mappings will be converted into Typst dictionaries, and sequences will be converted into Typst arrays. Strings and booleans will be converted into the Typst equivalents, null-values (`null`, `~` or empty ``) will be converted into `none`, and numbers will be converted to floats or integers depending on whether they are whole numbers.

Be aware that integers larger than 263-1 will be converted to floating point numbers, which may result in an approximative value.

== Parameters

```
cbor(
  str: str | bytes
) -> bytes
```

=== `source`: str | bytes (Required, Positional)

A #link("/docs/reference/syntax/#paths")[path] to a CBOR file or raw CBOR bytes.

== Definitions

=== `decode`

Reads structured data from CBOR bytes.

```
decode(
  bytes: bytes
) -> bytes
```

==== `data`: bytes (Required, Positional)

CBOR data.

=== `encode`

Encode structured data into CBOR bytes.

```
encode(
  any
) -> bytes
```

==== `value`: any (Required, Positional)

Value to be encoded.
= csv

Reads structured data from a CSV file.

The CSV file will be read and parsed into a 2-dimensional array of strings: Each row in the CSV file will be represented as an array of strings, and all rows will be collected into a single array. Header rows will not be stripped.

== Example

```typst
#let results = csv("example.csv")

#table(
  columns: 2,
  [*Condition*], [*Result*],
  ..results.flatten(),
)
```

== Parameters

```
csv(
  str: str | bytes,
  delimiter: str,
  row-type: type
) -> array
```

=== `source`: str | bytes (Required, Positional)

A #link("/docs/reference/syntax/#paths")[path] to a CSV file or raw CSV bytes.

=== `delimiter`: str

The delimiter that separates columns in the CSV file. Must be a single ASCII character.

Default: `","`

=== `row-type`: type

How to represent the file's rows.

- If set to `array`, each row is represented as a plain array of strings.
- If set to `dictionary`, each row is represented as a dictionary mapping from header keys to strings. This option only makes sense when a header row is present in the CSV file.

Default: `array`

== Definitions

=== `decode`

Reads structured data from a CSV string/bytes.

```
decode(
  str: str | bytes,
  delimiter: str,
  row-type: type
) -> array
```

==== `data`: str | bytes (Required, Positional)

CSV data.

==== `delimiter`: str

The delimiter that separates columns in the CSV file. Must be a single ASCII character.

Default: `","`

==== `row-type`: type

How to represent the file's rows.

- If set to `array`, each row is represented as a plain array of strings.
- If set to `dictionary`, each row is represented as a dictionary mapping from header keys to strings. This option only makes sense when a header row is present in the CSV file.

Default: `array`
= json

Reads structured data from a JSON file.

The file must contain a valid JSON value, such as object or array. JSON objects will be converted into Typst dictionaries, and JSON arrays will be converted into Typst arrays. Strings and booleans will be converted into the Typst equivalents, `null` will be converted into `none`, and numbers will be converted to floats or integers depending on whether they are whole numbers.

Be aware that integers larger than 263-1 will be converted to floating point numbers, which may result in an approximative value.

The function returns a dictionary, an array or, depending on the JSON file, another JSON data type.

The JSON files in the example contain objects with the keys `temperature`, `unit`, and `weather`.

== Example

```typst
#let forecast(day) = block[
  #box(square(
    width: 2cm,
    inset: 8pt,
    fill: if day.weather == "sunny" {
      yellow
    } else {
      aqua
    },
    align(
      bottom + right,
      strong(day.weather),
    ),
  ))
  #h(6pt)
  #set text(22pt, baseline: -8pt)
  #day.temperature °#day.unit
]

#forecast(json("monday.json"))
#forecast(json("tuesday.json"))
```

== Parameters

```
json(
  str: str | bytes
) -> bytes
```

=== `source`: str | bytes (Required, Positional)

A #link("/docs/reference/syntax/#paths")[path] to a JSON file or raw JSON bytes.

== Definitions

=== `decode`

Reads structured data from a JSON string/bytes.

```
decode(
  str: str | bytes
) -> bytes
```

==== `data`: str | bytes (Required, Positional)

JSON data.

=== `encode`

Encodes structured data into a JSON string.

```
encode(
  any,
  pretty: bool
) -> str
```

==== `value`: any (Required, Positional)

Value to be encoded.

==== `pretty`: bool

Whether to pretty print the JSON with newlines and indentation.

Default: `true`
= read

Reads plain text or data from a file.

By default, the file will be read as UTF-8 and returned as a #link("/docs/reference/foundations/str/")[string].

If you specify `encoding: none`, this returns raw #link("/docs/reference/foundations/bytes/")[bytes] instead.

== Example

```typst
An example for a HTML file: \
#let text = read("example.html")
#raw(text, lang: "html")

Raw bytes:
#read("tiger.jpg", encoding: none)
```

== Parameters

```
read(
  str: str,
  encoding: none | str
) -> bytes
```

=== `path`: str (Required, Positional)

Path to a file.

For more details, see the #link("/docs/reference/syntax/#paths")[Paths section].

=== `encoding`: none | str

The encoding to read the file with.

If set to `none`, this function returns raw bytes.

Default: `"utf8"`
= toml

Reads structured data from a TOML file.

The file must contain a valid TOML table. TOML tables will be converted into Typst dictionaries, and TOML arrays will be converted into Typst arrays. Strings, booleans and datetimes will be converted into the Typst equivalents and numbers will be converted to floats or integers depending on whether they are whole numbers.

The TOML file in the example consists of a table with the keys `title`, `version`, and `authors`.

== Example

```typst
#let details = toml("details.toml")

Title: #details.title \
Version: #details.version \
Authors: #(details.authors
  .join(", ", last: " and "))
```

== Parameters

```
toml(
  str: str | bytes
) -> bytes
```

=== `source`: str | bytes (Required, Positional)

A #link("/docs/reference/syntax/#paths")[path] to a TOML file or raw TOML bytes.

== Definitions

=== `decode`

Reads structured data from a TOML string/bytes.

```
decode(
  str: str | bytes
) -> bytes
```

==== `data`: str | bytes (Required, Positional)

TOML data.

=== `encode`

Encodes structured data into a TOML string.

```
encode(
  any,
  pretty: bool
) -> str
```

==== `value`: any (Required, Positional)

Value to be encoded.

==== `pretty`: bool

Whether to pretty-print the resulting TOML.

Default: `true`
= xml

Reads structured data from an XML file.

The XML file is parsed into an array of dictionaries and strings. XML nodes can be elements or strings. Elements are represented as dictionaries with the following keys:

- `tag`: The name of the element as a string.
- `attrs`: A dictionary of the element's attributes as strings.
- `children`: An array of the element's child nodes.

The XML file in the example contains a root `news` tag with multiple `article` tags. Each article has a `title`, `author`, and `content` tag. The `content` tag contains one or more paragraphs, which are represented as `p` tags.

== Example

```typst
#let find-child(elem, tag) = {
  elem.children
    .find(e => "tag" in e and e.tag == tag)
}

#let article(elem) = {
  let title = find-child(elem, "title")
  let author = find-child(elem, "author")
  let pars = find-child(elem, "content")

  [= #title.children.first()]
  text(10pt, weight: "medium")[
    Published by
    #author.children.first()
  ]

  for p in pars.children {
    if type(p) == dictionary {
      parbreak()
      p.children.first()
    }
  }
}

#let data = xml("example.xml")
#for elem in data.first().children {
  if type(elem) == dictionary {
    article(elem)
  }
}
```

== Parameters

```
xml(
  str: str | bytes
) -> bytes
```

=== `source`: str | bytes (Required, Positional)

A #link("/docs/reference/syntax/#paths")[path] to an XML file or raw XML bytes.

== Definitions

=== `decode`

Reads structured data from an XML string/bytes.

```
decode(
  str: str | bytes
) -> bytes
```

==== `data`: str | bytes (Required, Positional)

XML data.
= yaml

Reads structured data from a YAML file.

The file must contain a valid YAML object or array. YAML mappings will be converted into Typst dictionaries, and YAML sequences will be converted into Typst arrays. Strings and booleans will be converted into the Typst equivalents, null-values (`null`, `~` or empty ``) will be converted into `none`, and numbers will be converted to floats or integers depending on whether they are whole numbers. Custom YAML tags are ignored, though the loaded value will still be present.

Be aware that integers larger than 263-1 will be converted to floating point numbers, which may give an approximative value.

The YAML files in the example contain objects with authors as keys, each with a sequence of their own submapping with the keys "title" and "published"

== Example

```typst
#let bookshelf(contents) = {
  for (author, works) in contents {
    author
    for work in works [
      - #work.title (#work.published)
    ]
  }
}

#bookshelf(
  yaml("scifi-authors.yaml")
)
```

== Parameters

```
yaml(
  str: str | bytes
) -> bytes
```

=== `source`: str | bytes (Required, Positional)

A #link("/docs/reference/syntax/#paths")[path] to a YAML file or raw YAML bytes.

== Definitions

=== `decode`

Reads structured data from a YAML string/bytes.

```
decode(
  str: str | bytes
) -> bytes
```

==== `data`: str | bytes (Required, Positional)

YAML data.

=== `encode`

Encode structured data into a YAML string.

```
encode(
  any
) -> str
```

==== `value`: any (Required, Positional)

Value to be encoded.
= highlight

Highlights text with a background color.

== Example

```typst
This is #highlight[important].
```

== Parameters

```
highlight(
  fill: none | color | gradient | tiling,
  stroke: none | length | color | gradient | stroke | tiling | dictionary,
  top-edge: length | str,
  bottom-edge: length | str,
  extent: length,
  radius: relative | dictionary,
  content: content
) -> content
```

=== `fill`: none | color | gradient | tiling (Settable)

The color to highlight the text with.

Default: `rgb("#fffd11a1")`

*Example:*
```typst
This is #highlight(
  fill: blue
)[highlighted with blue].
```

=== `stroke`: none | length | color | gradient | stroke | tiling | dictionary (Settable)

The highlight's border color. See the #link("/docs/reference/visualize/rect/#parameters-stroke")[rectangle's documentation] for more details.

Default: `(:)`

*Example:*
```typst
This is a #highlight(
  stroke: fuchsia
)[stroked highlighting].
```

=== `top-edge`: length | str (Settable)

The top end of the background rectangle.

Default: `"ascender"`

*Example:*
```typst
#set highlight(top-edge: "ascender")
#highlight[a] #highlight[aib]

#set highlight(top-edge: "x-height")
#highlight[a] #highlight[aib]
```

=== `bottom-edge`: length | str (Settable)

The bottom end of the background rectangle.

Default: `"descender"`

*Example:*
```typst
#set highlight(bottom-edge: "descender")
#highlight[a] #highlight[ap]

#set highlight(bottom-edge: "baseline")
#highlight[a] #highlight[ap]
```

=== `extent`: length (Settable)

The amount by which to extend the background to the sides beyond (or within if negative) the content.

Default: `0pt`

*Example:*
```typst
A long #highlight(extent: 4pt)[background].
```

=== `radius`: relative | dictionary (Settable)

How much to round the highlight's corners. See the #link("/docs/reference/visualize/rect/#parameters-radius")[rectangle's documentation] for more details.

Default: `(:)`

*Example:*
```typst
Listen #highlight(
  radius: 5pt, extent: 2pt
)[carefully], it will be on the test.
```

=== `body`: content (Required, Positional)

The content that should be highlighted.
= linebreak

Inserts a line break.

Advances the paragraph to the next line. A single trailing line break at the end of a paragraph is ignored, but more than one creates additional empty lines.

== Example

```typst
*Date:* 26.12.2022 \
*Topic:* Infrastructure Test \
*Severity:* High \
```

== Syntax

This function also has dedicated syntax: To insert a line break, simply write a backslash followed by whitespace. This always creates an unjustified break.

== Parameters

```
linebreak(
  justify: bool
) -> content
```

=== `justify`: bool (Settable)

Whether to justify the line before the break.

This is useful if you found a better line break opportunity in your justified text than Typst did.

Default: `false`

*Example:*
```typst
#set par(justify: true)
#let jb = linebreak(justify: true)

I have manually tuned the #jb
line breaks in this paragraph #jb
for an _interesting_ result. #jb
```
= lorem

Creates blind text.

This function yields a Latin-like _Lorem Ipsum_ blind text with the given number of words. The sequence of words generated by the function is always the same but randomly chosen. As usual for blind texts, it does not make any sense. Use it as a placeholder to try layouts.

== Example

```typst
= Blind Text
#lorem(30)

= More Blind Text
#lorem(15)
```

== Parameters

```
lorem(
  int: int
) -> str
```

=== `words`: int (Required, Positional)

The length of the blind text in words.
= lower

Converts a string or content to lowercase.

== Example

```typst
#lower("ABC") \
#lower[*My Text*] \
#lower[already low]
```

== Parameters

```
lower(
  str: str | content
) -> content
```

=== `text`: str | content (Required, Positional)

The text to convert to lowercase.
= overline

Adds a line over text.

== Example

```typst
#overline[A line over text.]
```

== Parameters

```
overline(
  stroke: auto | length | color | gradient | stroke | tiling | dictionary,
  offset: auto | length,
  extent: length,
  evade: bool,
  background: bool,
  content: content
) -> content
```

=== `stroke`: auto | length | color | gradient | stroke | tiling | dictionary (Settable)

How to #link("/docs/reference/visualize/stroke/")[stroke] the line.

If set to `auto`, takes on the text's color and a thickness defined in the current font.

Default: `auto`

*Example:*
```typst
#set text(fill: olive)
#overline(
  stroke: green.darken(20%),
  offset: -12pt,
  [The Forest Theme],
)
```

=== `offset`: auto | length (Settable)

The position of the line relative to the baseline. Read from the font tables if `auto`.

Default: `auto`

*Example:*
```typst
#overline(offset: -1.2em)[
  The Tale Of A Faraway Line II
]
```

=== `extent`: length (Settable)

The amount by which to extend the line beyond (or within if negative) the content.

Default: `0pt`

*Example:*
```typst
#set overline(extent: 4pt)
#set underline(extent: 4pt)
#overline(underline[Typography Today])
```

=== `evade`: bool (Settable)

Whether the line skips sections in which it would collide with the glyphs.

Default: `true`

*Example:*
```typst
#overline(
  evade: false,
  offset: -7.5pt,
  stroke: 1pt,
  extent: 3pt,
  [Temple],
)
```

=== `background`: bool (Settable)

Whether the line is placed behind the content it overlines.

Default: `false`

*Example:*
```typst
#set overline(stroke: (thickness: 1em, paint: maroon, cap: "round"))
#overline(background: true)[This is stylized.] \
#overline(background: false)[This is partially hidden.]
```

=== `body`: content (Required, Positional)

The content to add a line over.
= raw

Raw text with optional syntax highlighting.

Displays the text verbatim and in a monospace font. This is typically used to embed computer code into your document.

== Example

```typst
Adding `rbx` to `rcx` gives
the desired result.

What is ```rust fn main()``` in Rust
would be ```c int main()``` in C.

```rust
fn main() {
    println!("Hello World!");
}
```

This has ``` `backticks` ``` in it
(but the spaces are trimmed). And
``` here``` the leading space is
also trimmed.
```

You can also construct a #link("/docs/reference/text/raw/")[raw] element programmatically from a string (and provide the language tag via the optional #link("/docs/reference/text/raw/#parameters-lang")[lang] argument).

```typst
#raw("fn " + "main() {}", lang: "rust")
```

== Syntax

This function also has dedicated syntax. You can enclose text in 1 or 3+ backticks (```) to make it raw. Two backticks produce empty raw text. This works both in markup and code.

When you use three or more backticks, you can additionally specify a language tag for syntax highlighting directly after the opening backticks. Within raw blocks, everything (except for the language tag, if applicable) is rendered as is, in particular, there are no escape sequences.

The language tag is an identifier that directly follows the opening backticks only if there are three or more backticks. If your text starts with something that looks like an identifier, but no syntax highlighting is needed, start the text with a single space (which will be trimmed) or use the single backtick syntax. If your text should start or end with a backtick, put a space before or after it (it will be trimmed).

== Parameters

```
raw(
  str: str,
  block: bool,
  lang: none | str,
  align: alignment,
  syntaxes: str | bytes | array,
  theme: none | auto | str | bytes,
  tab-size: int
) -> content
```

=== `text`: str (Required, Positional)

The raw text.

You can also use raw blocks creatively to create custom syntaxes for your automations.

*Example:*
```typst
// Parse numbers in raw blocks with the
// `mydsl` tag and sum them up.
#show raw.where(lang: "mydsl"): it => {
  let sum = 0
  for part in it.text.split("+") {
    sum += int(part.trim())
  }
  sum
}

```mydsl
1 + 2 + 3 + 4 + 5
```
```

=== `block`: bool (Settable)

Whether the raw text is displayed as a separate block.

In markup mode, using one-backtick notation makes this `false`. Using three-backtick notation makes it `true` if the enclosed content contains at least one line break.

Default: `false`

*Example:*
```typst
// Display inline code in a small box
// that retains the correct baseline.
#show raw.where(block: false): box.with(
  fill: luma(240),
  inset: (x: 3pt, y: 0pt),
  outset: (y: 3pt),
  radius: 2pt,
)

// Display block code in a larger block
// with more padding.
#show raw.where(block: true): block.with(
  fill: luma(240),
  inset: 10pt,
  radius: 4pt,
)

With `rg`, you can search through your files quickly.
This example searches the current directory recursively
for the text `Hello World`:

```bash
rg "Hello World"
```
```

=== `lang`: none | str (Settable)

The language to syntax-highlight in.

Apart from typical language tags known from Markdown, this supports the `"typ"`, `"typc"`, and `"typm"` tags for #link("/docs/reference/syntax/#markup")[Typst markup], #link("/docs/reference/syntax/#code")[Typst code], and #link("/docs/reference/syntax/#math")[Typst math], respectively.

Default: `none`

*Example:*
```typst
```typ
This is *Typst!*
```

This is ```typ also *Typst*```, but inline!
```

=== `align`: alignment (Settable)

The horizontal alignment that each line in a raw block should have. This option is ignored if this is not a raw block (if specified `block: false` or single backticks were used in markup mode).

By default, this is set to `start`, meaning that raw text is aligned towards the start of the text direction inside the block by default, regardless of the current context's alignment (allowing you to center the raw block itself without centering the text inside it, for example).

Default: `start`

*Example:*
```typst
#set raw(align: center)

```typc
let f(x) = x
code = "centered"
```
```

=== `syntaxes`: str | bytes | array (Settable)

Additional syntax definitions to load. The syntax definitions should be in the #link("https://www.sublimetext.com/docs/syntax.html")[sublime-syntax file format].

You can pass any of the following values:

- A path string to load a syntax file from the given path. For more details about paths, see the #link("/docs/reference/syntax/#paths")[Paths section].
- Raw bytes from which the syntax should be decoded.
- An array where each item is one the above.

Default: `()`

*Example:*
```typst
#set raw(syntaxes: "SExpressions.sublime-syntax")

```sexp
(defun factorial (x)
  (if (zerop x)
    ; with a comment
    1
    (* x (factorial (- x 1)))))
```
```

=== `theme`: none | auto | str | bytes (Settable)

The theme to use for syntax highlighting. Themes should be in the #link("https://www.sublimetext.com/docs/color_schemes_tmtheme.html")[tmTheme file format].

You can pass any of the following values:

- `none`: Disables syntax highlighting.
- `auto`: Highlights with Typst's default theme.
- A path string to load a theme file from the given path. For more details about paths, see the #link("/docs/reference/syntax/#paths")[Paths section].
- Raw bytes from which the theme should be decoded.

Applying a theme only affects the color of specifically highlighted text. It does not consider the theme's foreground and background properties, so that you retain control over the color of raw text. You can apply the foreground color yourself with the #link("/docs/reference/text/text/")[text] function and the background with a #link("/docs/reference/layout/block/#parameters-fill")[filled block]. You could also use the #link("/docs/reference/data-loading/xml/")[xml] function to extract these properties from the theme.

Default: `auto`

*Example:*
```typst
#set raw(theme: "halcyon.tmTheme")
#show raw: it => block(
  fill: rgb("#1d2433"),
  inset: 8pt,
  radius: 5pt,
  text(fill: rgb("#a2aabc"), it)
)

```typ
= Chapter 1
#let hi = "Hello World"
```
```

=== `tab-size`: int (Settable)

The size for a tab stop in spaces. A tab is replaced with enough spaces to align with the next multiple of the size.

Default: `2`

*Example:*
```typst
#set raw(tab-size: 8)
```tsv
Year	Month	Day
2000	2	3
2001	2	1
2002	3	10
```
```

== Definitions

=== `line`

A highlighted line of raw text.

This is a helper element that is synthesized by #link("/docs/reference/text/raw/")[raw] elements.

It allows you to access various properties of the line, such as the line number, the raw non-highlighted text, the highlighted text, and whether it is the first or last line of the raw block.

```
line(
  int: int,
  int: int,
  str: str,
  content: content
) -> content
```

==== `number`: int (Required, Positional)

The line number of the raw line inside of the raw block, starts at 1.

==== `count`: int (Required, Positional)

The total number of lines in the raw block.

==== `text`: str (Required, Positional)

The line of raw text.

==== `body`: content (Required, Positional)

The highlighted raw text.
= smallcaps

Displays text in small capitals.

== Example

```typst
Hello \
#smallcaps[Hello]
```

== Smallcaps fonts

By default, this uses the `smcp` and `c2sc` OpenType features on the font. Not all fonts support these features. Sometimes, smallcaps are part of a dedicated font. This is, for example, the case for the _Latin Modern_ family of fonts. In those cases, you can use a show-set rule to customize the appearance of the text in smallcaps:

In the future, this function will support synthesizing smallcaps from normal letters, but this is not yet implemented.

== Smallcaps headings

You can use a #link("/docs/reference/styling/#show-rules")[show rule] to apply smallcaps formatting to all your headings. In the example below, we also center-align our headings and disable the standard bold font.

```typst
#set par(justify: true)
#set heading(numbering: "I.")

#show heading: smallcaps
#show heading: set align(center)
#show heading: set text(
  weight: "regular"
)

= Introduction
#lorem(40)
```

== Parameters

```
smallcaps(
  all: bool,
  content: content
) -> content
```

=== `all`: bool (Settable)

Whether to turn uppercase letters into small capitals as well.

Unless overridden by a show rule, this enables the `c2sc` OpenType feature.

Default: `false`

*Example:*
```typst
#smallcaps(all: true)[UNICEF] is an
agency of #smallcaps(all: true)[UN].
```

=== `body`: content (Required, Positional)

The content to display in small capitals.
= smartquote

A language-aware quote that reacts to its context.

Automatically turns into an appropriate opening or closing quote based on the active #link("/docs/reference/text/text/#parameters-lang")[text language].

== Example

```typst
"This is in quotes."

#set text(lang: "de")
"Das ist in Anführungszeichen."

#set text(lang: "fr")
"C'est entre guillemets."
```

== Syntax

This function also has dedicated syntax: The normal quote characters (`'` and `"`). Typst automatically makes your quotes smart.

== Parameters

```
smartquote(
  double: bool,
  enabled: bool,
  alternative: bool,
  quotes: auto | str | array | dictionary
) -> content
```

=== `double`: bool (Settable)

Whether this should be a double quote.

Default: `true`

=== `enabled`: bool (Settable)

Whether smart quotes are enabled.

To disable smartness for a single quote, you can also escape it with a backslash.

Default: `true`

*Example:*
```typst
#set smartquote(enabled: false)

These are "dumb" quotes.
```

=== `alternative`: bool (Settable)

Whether to use alternative quotes.

Does nothing for languages that don't have alternative quotes, or if explicit quotes were set.

Default: `false`

*Example:*
```typst
#set text(lang: "de")
#set smartquote(alternative: true)

"Das ist in anderen Anführungszeichen."
```

=== `quotes`: auto | str | array | dictionary (Settable)

The quotes to use.

- When set to `auto`, the appropriate single quotes for the #link("/docs/reference/text/text/#parameters-lang")[text language] will be used. This is the default.
- Custom quotes can be passed as a string, array, or dictionary of either string: a string consisting of two characters containing the opening and closing double quotes (characters here refer to Unicode grapheme clusters) array: an array containing the opening and closing double quotes dictionary: an array containing the double and single quotes, each specified as either auto, string, or array

Default: `auto`

*Example:*
```typst
#set text(lang: "de")
'Das sind normale Anführungszeichen.'

#set smartquote(quotes: "()")
"Das sind eigene Anführungszeichen."

#set smartquote(quotes: (single: ("[[", "]]"),  double: auto))
'Das sind eigene Anführungszeichen.'
```
= strike

Strikes through text.

== Example

```typst
This is #strike[not] relevant.
```

== Parameters

```
strike(
  stroke: auto | length | color | gradient | stroke | tiling | dictionary,
  offset: auto | length,
  extent: length,
  background: bool,
  content: content
) -> content
```

=== `stroke`: auto | length | color | gradient | stroke | tiling | dictionary (Settable)

How to #link("/docs/reference/visualize/stroke/")[stroke] the line.

If set to `auto`, takes on the text's color and a thickness defined in the current font.

_Note:_ Please don't use this for real redaction as you can still copy paste the text.

Default: `auto`

*Example:*
```typst
This is #strike(stroke: 1.5pt + red)[very stricken through]. \
This is #strike(stroke: 10pt)[redacted].
```

=== `offset`: auto | length (Settable)

The position of the line relative to the baseline. Read from the font tables if `auto`.

This is useful if you are unhappy with the offset your font provides.

Default: `auto`

*Example:*
```typst
#set text(font: "Inria Serif")
This is #strike(offset: auto)[low-ish]. \
This is #strike(offset: -3.5pt)[on-top].
```

=== `extent`: length (Settable)

The amount by which to extend the line beyond (or within if negative) the content.

Default: `0pt`

*Example:*
```typst
This #strike(extent: -2pt)[skips] parts of the word.
This #strike(extent: 2pt)[extends] beyond the word.
```

=== `background`: bool (Settable)

Whether the line is placed behind the content.

Default: `false`

*Example:*
```typst
#set strike(stroke: red)
#strike(background: true)[This is behind.] \
#strike(background: false)[This is in front.]
```

=== `body`: content (Required, Positional)

The content to strike through.
= sub

Renders text in subscript.

The text is rendered smaller and its baseline is lowered.

== Example

```typst
Revenue#sub[yearly]
```

== Parameters

```
sub(
  typographic: bool,
  baseline: length,
  size: length,
  content: content
) -> content
```

=== `typographic`: bool (Settable)

Whether to prefer the dedicated subscript characters of the font.

If this is enabled, Typst first tries to transform the text to subscript codepoints. If that fails, it falls back to rendering lowered and shrunk normal letters.

Default: `true`

*Example:*
```typst
N#sub(typographic: true)[1]
N#sub(typographic: false)[1]
```

=== `baseline`: length (Settable)

The baseline shift for synthetic subscripts. Does not apply if `typographic` is true and the font has subscript codepoints for the given `body`.

Default: `0.2em`

=== `size`: length (Settable)

The font size for synthetic subscripts. Does not apply if `typographic` is true and the font has subscript codepoints for the given `body`.

Default: `0.6em`

=== `body`: content (Required, Positional)

The text to display in subscript.
= super

Renders text in superscript.

The text is rendered smaller and its baseline is raised.

== Example

```typst
1#super[st] try!
```

== Parameters

```
super(
  typographic: bool,
  baseline: length,
  size: length,
  content: content
) -> content
```

=== `typographic`: bool (Settable)

Whether to prefer the dedicated superscript characters of the font.

If this is enabled, Typst first tries to transform the text to superscript codepoints. If that fails, it falls back to rendering raised and shrunk normal letters.

Default: `true`

*Example:*
```typst
N#super(typographic: true)[1]
N#super(typographic: false)[1]
```

=== `baseline`: length (Settable)

The baseline shift for synthetic superscripts. Does not apply if `typographic` is true and the font has superscript codepoints for the given `body`.

Default: `-0.5em`

=== `size`: length (Settable)

The font size for synthetic superscripts. Does not apply if `typographic` is true and the font has superscript codepoints for the given `body`.

Default: `0.6em`

=== `body`: content (Required, Positional)

The text to display in superscript.
