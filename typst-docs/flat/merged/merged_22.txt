{
  "topic_metadata": {
    "id": 2984,
    "title": "How to use `where` selector on multiple \"levels\" of an element?",
    "slug": "how-to-use-where-selector-on-multiple-levels-of-an-element",
    "posts_count": 3,
    "created_at": "2025-02-25T14:55:26.695Z",
    "last_posted_at": "2025-02-25T15:22:03.968Z",
    "views": 110,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 143
  },
  "posts": [
    {
      "id": 9050,
      "post_number": 1,
      "username": "Leon",
      "name": "Leon",
      "created_at": "2025-02-25T14:55:26.798Z",
      "updated_at": "2025-03-07T21:25:30.668Z",
      "cooked": "<p>I’d like to make level 1 entries in an outline bold, but only if the outline contains headings, not figures or anything else:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show outline.where(target: heading.where(outlined: true)).entry.where(level: 1): it =&gt; {\n  set text(weight: \"bold\")\n}\n</code></pre>\n<p>Unfortunately, this doesn’t seem to be allowed: <code>cannot access fields on type selector</code></p>\n<p>Is there a way to get around this?</p>",
      "raw": "I'd like to make level 1 entries in an outline bold, but only if the outline contains headings, not figures or anything else:\n```typst\n#show outline.where(target: heading.where(outlined: true)).entry.where(level: 1): it => {\n  set text(weight: \"bold\")\n}\n```\n\nUnfortunately, this doesn't seem to be allowed: `cannot access fields on type selector`\n\nIs there a way to get around this?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 341.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1252
    },
    {
      "id": 9054,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-25T15:11:56.233Z",
      "updated_at": "2025-02-25T15:11:56.233Z",
      "cooked": "<p>Hi, welcome to the Typst forum!</p>\n<p>I think normally the solution should be</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.where(target: heading): it =&gt; {\n  show outline.entry.where(level: 1): set text(weight: \"bold\")\n  it\n}\n</code></pre>\n<p>but due to <a href=\"https://github.com/typst/typst/issues/4741\">a bug</a> you need to wrap <code>heading</code> in a <code>selector</code> call:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.where(target: selector(heading)): it =&gt; {\n  show outline.entry.where(level: 1): set text(weight: \"bold\")\n  it\n}\n</code></pre>",
      "raw": "Hi, welcome to the Typst forum!\n\nI think normally the solution should be\n\n```typ\n#show outline.where(target: heading): it => {\n  show outline.entry.where(level: 1): set text(weight: \"bold\")\n  it\n}\n```\n\nbut due to [a bug](https://github.com/typst/typst/issues/4741) you need to wrap `heading` in a `selector` call:\n\n```typ\n#show outline.where(target: selector(heading)): it => {\n  show outline.entry.where(level: 1): set text(weight: \"bold\")\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 32,
      "score": 41.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9055,
      "post_number": 3,
      "username": "Leon",
      "name": "Leon",
      "created_at": "2025-02-25T15:22:03.968Z",
      "updated_at": "2025-02-25T15:22:03.968Z",
      "cooked": "<p>Thank you very much for your quick reply :)</p>",
      "raw": "Thank you very much for your quick reply :)",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 21.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1252
    }
  ],
  "scraped_at": "2025-06-10T09:51:08.178673"
}
{
  "topic_metadata": {
    "id": 2992,
    "title": "How to set headers and page numbers with alternating text on even and odd pages?",
    "slug": "how-to-set-headers-and-page-numbers-with-alternating-text-on-even-and-odd-pages",
    "posts_count": 14,
    "created_at": "2025-02-26T02:28:34.921Z",
    "last_posted_at": "2025-05-09T17:13:00.368Z",
    "views": 320,
    "like_count": 3,
    "reply_count": 9,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 10,
    "accepted_answer_username": "Thiago_Pereira",
    "tags": [
      "scripting",
      "header-footer"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 1065
  },
  "posts": [
    {
      "id": 9069,
      "post_number": 1,
      "username": "indoor_plant",
      "name": "",
      "created_at": "2025-02-26T02:28:35.003Z",
      "updated_at": "2025-05-09T17:45:16.318Z",
      "cooked": "<p>I want to set my book template to show even pages aligned left with “# | chapter number” and odd pages aligned right with “book title | #”, but I can’t quite figure out how within the header/page numbering documentation.</p>\n<p>most likely will need separate sections for each chapter, but that’s fine.</p>\n<p>also want the page numbers to start on the first chapter (page 7 in the file) and preferably be hidden on blank pages</p>",
      "raw": "I want to set my book template to show even pages aligned left with \"# | chapter number\" and odd pages aligned right with \"book title | #\", but I can't quite figure out how within the header/page numbering documentation.\n\nmost likely will need separate sections for each chapter, but that's fine.\n\nalso want the page numbers to start on the first chapter (page 7 in the file) and preferably be hidden on blank pages",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 830.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1257
    },
    {
      "id": 9072,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-26T08:19:52.242Z",
      "updated_at": "2025-02-26T08:19:52.242Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/indoor_plant\">@indoor_plant</a>, welcome! Have you looked at <a href=\"https://github.com/tingerrr/hydra\">hydra</a>? I think this will suit your needs.</p>\n<p>Also, don’t hesitate to take a look at <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>! <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hello @indoor_plant, welcome! Have you looked at [hydra](https://github.com/tingerrr/hydra)? I think this will suit your needs.\n\nAlso, don't hesitate to take a look at https://forum.typst.app/t/how-to-post-in-the-questions-category/11! :smiley:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 51,
      "score": 15.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9079,
      "post_number": 3,
      "username": "Thiago_Pereira",
      "name": "Thiago Pereira Meirelles",
      "created_at": "2025-02-26T12:13:48.399Z",
      "updated_at": "2025-02-26T12:29:56.930Z",
      "cooked": "<p>I use the following snippet in my template:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">set page(header: context {\n    let page = counter(page).get().first()\n    let body = if calc.odd(page) [Section #chapter_num #section_num #h(0.5cm) #section #h(0.5cm) *#str(page)*]\n      else [*#str(page)* #h(0.5cm) Chapter #chapter_num #h(0.5cm) #chapter]\n    let alignment = if calc.odd(page) { right } else { left }\n    align(alignment, body)\n  }\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/0/08748b86291da6231df4ed8bc7dbf0a36cb193cd.png\" alt=\"image\" data-base62-sha1=\"1cNw0GMe8BCII9zCXuHCr89JDWZ\" width=\"614\" height=\"109\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/0/040e7125aa3b0133ee72b0584d0d56dee7eb8667.png\" alt=\"image\" data-base62-sha1=\"zSQNRYZtMN5Wr7o8o22EdLkQon\" width=\"604\" height=\"72\"></p>",
      "raw": "I use the following snippet in my template:\n\n```typst\nset page(header: context {\n    let page = counter(page).get().first()\n    let body = if calc.odd(page) [Section #chapter_num #section_num #h(0.5cm) #section #h(0.5cm) *#str(page)*]\n      else [*#str(page)* #h(0.5cm) Chapter #chapter_num #h(0.5cm) #chapter]\n    let alignment = if calc.odd(page) { right } else { left }\n    align(alignment, body)\n  }\n```\n\n![image|614x109](upload://1cNw0GMe8BCII9zCXuHCr89JDWZ.png)\n\n![image|604x72](upload://zSQNRYZtMN5Wr7o8o22EdLkQon.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 51,
      "score": 40.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1260
    },
    {
      "id": 9092,
      "post_number": 4,
      "username": "indoor_plant",
      "name": "",
      "created_at": "2025-02-26T16:25:09.824Z",
      "updated_at": "2025-02-26T16:25:09.824Z",
      "cooked": "<p>hi, thanks! been fiddling with hydra and reading the documentation on it but I’m still not seeing where I can actually define header info?</p>\n<p>typst seems to not accept “hydra” as a variable despite having the <span class=\"mention\">@import</span> string included</p>",
      "raw": "hi, thanks! been fiddling with hydra and reading the documentation on it but I'm still not seeing where I can actually define header info? \n\ntypst seems to not accept \"hydra\" as a variable despite having the @import string included",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 24.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1257
    },
    {
      "id": 9093,
      "post_number": 5,
      "username": "indoor_plant",
      "name": "",
      "created_at": "2025-02-26T16:26:05.324Z",
      "updated_at": "2025-02-26T16:26:05.324Z",
      "cooked": "<p>thanks - would you mind sharing the code where you defined those chapter_num and section_num variables?</p>",
      "raw": "thanks - would you mind sharing the code where you defined those chapter_num and section_num variables?",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1257
    },
    {
      "id": 9094,
      "post_number": 6,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-26T16:29:11.874Z",
      "updated_at": "2025-02-26T16:29:11.874Z",
      "cooked": "<p>Can you provide what you’ve been working on? You can wrap code here using three ```typ on a new line, and closing by three backticks too.</p>",
      "raw": "Can you provide what you've been working on? You can wrap code here using three ```typ on a new line, and closing by three backticks too.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 28.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9095,
      "post_number": 7,
      "username": "indoor_plant",
      "name": "",
      "created_at": "2025-02-26T16:35:39.309Z",
      "updated_at": "2025-02-26T16:35:39.309Z",
      "cooked": "<p>sure, this is what I grabbed from hydra</p>\n<pre><code class=\"lang-auto\">#import \"@preview/hydra:0.6.0\": hydra\n\n#set page(\n  paper: \"a5\", \n  margin: (inside: 1.25in, outside: .75in, y: 1in),\n  numbering: \"1\", \n  number-align: top,\n  header: context {\n  if calc.odd(here().page()) {\n    align(right, emph(hydra(1)))\n  } else {\n    align(left, emph(hydra(2)))\n  }\n})</code></pre>",
      "raw": "sure, this is what I grabbed from hydra \n\n```\n#import \"@preview/hydra:0.6.0\": hydra\n\n#set page(\n  paper: \"a5\", \n  margin: (inside: 1.25in, outside: .75in, y: 1in),\n  numbering: \"1\", \n  number-align: top,\n  header: context {\n  if calc.odd(here().page()) {\n    align(right, emph(hydra(1)))\n  } else {\n    align(left, emph(hydra(2)))\n  }\n})",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 23.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1257
    },
    {
      "id": 9096,
      "post_number": 8,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-26T16:50:00.281Z",
      "updated_at": "2025-02-26T16:58:34.284Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"indoor_plant\" data-post=\"4\" data-topic=\"2992\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/i/85291D/48.png\" class=\"avatar\"> indoor_plant:</div>\n<blockquote>\n<p>where I can actually define header info</p>\n</blockquote>\n</aside>\n<p>You can define the header struct in the <code>header</code> parameter of <code>page</code>. From your example right now, you have</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">context {\n  if calc.odd(here().page()) {\n    align(right, emph(hydra(1)))\n  } else {\n    align(left, emph(hydra(2)))\n  }\n}\n</code></pre>\n<p>which gives you alternating  chapter/section header.<br>\nIf you want a struct more like <code>title | #</code>, then you can use</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">context {\n  let h = (\n    counter(page).display(),\n    h(1fr),\n    hydra(1)\n  )\n  if calc.odd(here().page()) { h.join() } else { h.rev().join() }\n}\n</code></pre>\n<p>which will give you alternating page number/ title.</p>\n<aside class=\"quote no-group\" data-username=\"indoor_plant\" data-post=\"1\" data-topic=\"2992\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/i/85291D/48.png\" class=\"avatar\"> indoor_plant:</div>\n<blockquote>\n<p>also want the page numbers to start on the first chapter (page 7 in the file)</p>\n</blockquote>\n</aside>\n<p>That’s as simple as using</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(numbering: none)\n</code></pre>\n<p>when you don’t want any numbering! Once your chapters start, you can re-enable numbering.</p>\n<aside class=\"quote no-group\" data-username=\"indoor_plant\" data-post=\"1\" data-topic=\"2992\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/i/85291D/48.png\" class=\"avatar\"> indoor_plant:</div>\n<blockquote>\n<p>preferably be hidden on blank pages</p>\n</blockquote>\n</aside>\n<p>I don’t think it’s possible to detect blank page? Except if you introduce one with a hard <code>pagebreak()</code>. In which case, you can set page numbering to none before breaking the page and re-enable it afterwards.</p>",
      "raw": "[quote=\"indoor_plant, post:4, topic:2992\"]\nwhere I can actually define header info\n[/quote]\n\nYou can define the header struct in the `header` parameter of `page`. From your example right now, you have\n```typc\ncontext {\n  if calc.odd(here().page()) {\n    align(right, emph(hydra(1)))\n  } else {\n    align(left, emph(hydra(2)))\n  }\n}\n```\nwhich gives you alternating  chapter/section header.\nIf you want a struct more like `title | #`, then you can use \n```typc\ncontext {\n  let h = (\n    counter(page).display(),\n    h(1fr),\n    hydra(1)\n  )\n  if calc.odd(here().page()) { h.join() } else { h.rev().join() }\n}\n```\nwhich will give you alternating page number/ title.\n\n[quote=\"indoor_plant, post:1, topic:2992\"]\nalso want the page numbers to start on the first chapter (page 7 in the file)\n[/quote]\n\nThat's as simple as using\n```typ \n#set page(numbering: none)\n```\nwhen you don't want any numbering! Once your chapters start, you can re-enable numbering.\n\n[quote=\"indoor_plant, post:1, topic:2992\"]\npreferably be hidden on blank pages\n[/quote]\nI don't think it's possible to detect blank page? Except if you introduce one with a hard `pagebreak()`. In which case, you can set page numbering to none before breaking the page and re-enable it afterwards.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 2,
      "like_count": 0,
      "reads": 44,
      "score": 33.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9097,
      "post_number": 9,
      "username": "indoor_plant",
      "name": "",
      "created_at": "2025-02-26T16:56:37.341Z",
      "updated_at": "2025-02-26T16:56:37.341Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"quachpas\" data-post=\"8\" data-topic=\"2992\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/q/662200/48.png\" class=\"avatar\"> quachpas:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">context {\n  let h = (\n    counter(page).display(),\n    h(1fr),\n    hydra(1)\n  )\n  if calc.odd(here().page()) { h.join() } else { h.rev().join() }\n}\n</code></pre>\n</blockquote>\n</aside>\n<p>that gives me alternating page numbers but again, there is no variable for defining the title or section info - is that just something I set up outside the header? that’s the piece I’m lost on.</p>",
      "raw": "[quote=\"quachpas, post:8, topic:2992\"]\n```\ncontext {\n  let h = (\n    counter(page).display(),\n    h(1fr),\n    hydra(1)\n  )\n  if calc.odd(here().page()) { h.join() } else { h.rev().join() }\n}\n```\n[/quote]\n\nthat gives me alternating page numbers but again, there is no variable for defining the title or section info - is that just something I set up outside the header? that's the piece I'm lost on.",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 38,
      "score": 27.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1257
    },
    {
      "id": 9099,
      "post_number": 10,
      "username": "Thiago_Pereira",
      "name": "Thiago Pereira Meirelles",
      "created_at": "2025-02-26T17:10:28.332Z",
      "updated_at": "2025-02-26T17:10:28.332Z",
      "cooked": "<p>My use is very simple, so I simply type <code>#let chapter_num = \"3\"</code><br>\nin the beginning of the document like a medieval man <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">.</p>\n<p>I set a <code>template.typ</code> like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let conf(\n  chapter: none,\n  chapter_num: none,\n  section: none,\n  section_num: none,\n  doc,\n) = {\n  set heading(numbering: \"1A\")\n  set page(\n    header: context {\n      let page = counter(page).get().first()\n      let body = if calc.odd(page) [Section #chapter_num#section_num #h(0.5cm) #section #h(0.5cm) *#str(page)*] else [*#str(page)* #h(0.5cm) Chapter #chapter_num #h(0.5cm) #chapter]\n      let alignment = if calc.odd(page) { right } else { left }\n      align(alignment, body)\n    },\n  )\n\n  doc\n}\n</code></pre>\n<p>and write one file for section like <code>Chapter_1A.typ</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let chapter = \"Vector Spaces\"\n#let chapter_num = \"1\"\n#let section = $RR^n \"and\" CC^n$\n#let section_num = \"A\"\n\n#import \"../template.typ\": *\n#show: conf.with(\n  chapter: chapter,\n  chapter_num: chapter_num,\n  section: section,\n  section_num: section_num,\n)\n\n#heading(level: 1)[#chapter]\n#heading(level: 2)[#section]\n#heading(level: 3, numbering: none)[Definitions and Theorems]\n\n#lorem(100)\n</code></pre>\n<p>Finally, I <code>#include</code> every file in a <code>main.typ</code>.</p>\n<p>I don’t know if this is good practice (very new to Typst).</p>",
      "raw": "My use is very simple, so I simply type `#let chapter_num = \"3\"`\nin the beginning of the document like a medieval man :sweat_smile:.\n\nI set a `template.typ` like\n\n```typ\n#let conf(\n  chapter: none,\n  chapter_num: none,\n  section: none,\n  section_num: none,\n  doc,\n) = {\n  set heading(numbering: \"1A\")\n  set page(\n    header: context {\n      let page = counter(page).get().first()\n      let body = if calc.odd(page) [Section #chapter_num#section_num #h(0.5cm) #section #h(0.5cm) *#str(page)*] else [*#str(page)* #h(0.5cm) Chapter #chapter_num #h(0.5cm) #chapter]\n      let alignment = if calc.odd(page) { right } else { left }\n      align(alignment, body)\n    },\n  )\n\n  doc\n}\n```\n\nand write one file for section like `Chapter_1A.typ`:\n\n```typ\n#let chapter = \"Vector Spaces\"\n#let chapter_num = \"1\"\n#let section = $RR^n \"and\" CC^n$\n#let section_num = \"A\"\n\n#import \"../template.typ\": *\n#show: conf.with(\n  chapter: chapter,\n  chapter_num: chapter_num,\n  section: section,\n  section_num: section_num,\n)\n\n#heading(level: 1)[#chapter]\n#heading(level: 2)[#section]\n#heading(level: 3, numbering: none)[Definitions and Theorems]\n\n#lorem(100)\n```\n\nFinally, I `#include` every file in a `main.typ`.\n\nI don't know if this is good practice (very new to Typst).",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 32.8,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1260
    },
    {
      "id": 9101,
      "post_number": 11,
      "username": "indoor_plant",
      "name": "",
      "created_at": "2025-02-26T17:40:57.012Z",
      "updated_at": "2025-02-26T17:40:57.012Z",
      "cooked": "<p>very new myself, so I appreciate you sharing! ty! <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "very new myself, so I appreciate you sharing! ty! :slight_smile:",
      "reply_to_post_number": 10,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 22.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1257
    },
    {
      "id": 9116,
      "post_number": 12,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-27T10:04:46.224Z",
      "updated_at": "2025-02-27T10:05:08.422Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"indoor_plant\" data-post=\"9\" data-topic=\"2992\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/i/85291D/48.png\" class=\"avatar\"> indoor_plant:</div>\n<blockquote>\n<p>there is no variable for defining the title or section info</p>\n</blockquote>\n</aside>\n<p>Ah! I see your problem. What <code>hydra</code> does internally is query the current chapter <code>hydra(1)</code>, or section <code>hydra(2)</code>, i.e. <code>heading(level: 1)</code> or <code>heading(level: 2)</code>.</p>\n<p>There is no variable for that, everything is done using <a href=\"https://typst.app/docs/reference/introspection/query/\"><code>query</code></a>.</p>\n<p>Hence, all you need to do is write your headings as usual, and the page header will be evaluated every time it needs to be (on every page). The contextual expression in  the page header parameter will output on each page the return value of <code>hydra(1)</code> or <code>hydra(2)</code>, i.e. the current chapter or section.</p>",
      "raw": "[quote=\"indoor_plant, post:9, topic:2992\"]\nthere is no variable for defining the title or section info\n[/quote]\n\nAh! I see your problem. What `hydra` does internally is query the current chapter `hydra(1)`, or section `hydra(2)`, i.e. `heading(level: 1)` or `heading(level: 2)`.\n\nThere is no variable for that, everything is done using [`query`](https://typst.app/docs/reference/introspection/query/).\n\nHence, all you need to do is write your headings as usual, and the page header will be evaluated every time it needs to be (on every page). The contextual expression in  the page header parameter will output on each page the return value of `hydra(1)` or `hydra(2)`, i.e. the current chapter or section.",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 36,
      "score": 21.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9321,
      "post_number": 13,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-03T15:39:11.627Z",
      "updated_at": "2025-03-03T15:39:11.627Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/indoor_plant\">@indoor_plant</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>For future posts, make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>In addition, please let us know if you’d like further help, or mark an answer as a solution. Thanks <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @indoor_plant, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nFor future posts, make sure your title is a question you’d ask to a friend about Typst. :wink:\n\nIn addition, please let us know if you'd like further help, or mark an answer as a solution. Thanks :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 5.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 12196,
      "post_number": 14,
      "username": "Mark_Hilton",
      "name": "Mark Hilton",
      "created_at": "2025-05-09T17:13:00.368Z",
      "updated_at": "2025-05-09T17:13:00.368Z",
      "cooked": "<p>I know this is an old thread which was solved for the OP, but I have been trying <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> code for alternating pages, but the problem I got was that the page number was on the inner margin, with the heading text on the outer when they should be the other way round with the page number at the outer margin.</p>\n<p>After much fumbling around I realised that the easiest way would be to change the last line of the code to read <code>calc-even</code> rather than <code>calc-odd</code>, which does as needed.</p>\n<p><img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji only-emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nMark</p>",
      "raw": "I know this is an old thread which was solved for the OP, but I have been trying @quachpas code for alternating pages, but the problem I got was that the page number was on the inner margin, with the heading text on the outer when they should be the other way round with the page number at the outer margin.\n\nAfter much fumbling around I realised that the easiest way would be to change the last line of the code to read `calc-even` rather than `calc-odd`, which does as needed.\n\n:slight_smile: \n Mark",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 18.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1276
    }
  ],
  "scraped_at": "2025-06-10T09:51:07.250163"
}
{
  "topic_metadata": {
    "id": 3001,
    "title": "How to prevent a table cell from being split across pages?",
    "slug": "how-to-prevent-a-table-cell-from-being-split-across-pages",
    "posts_count": 3,
    "created_at": "2025-02-26T13:10:11.799Z",
    "last_posted_at": "2025-03-03T15:29:18.173Z",
    "views": 99,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "layout",
      "tables"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 154
  },
  "posts": [
    {
      "id": 9081,
      "post_number": 1,
      "username": "Aurelien",
      "name": "Aurélien",
      "created_at": "2025-02-26T13:10:11.941Z",
      "updated_at": "2025-03-03T15:28:36.189Z",
      "cooked": "<p>Hello,<br>\nI have a problem with my table. When a line is too long and exceed on another page, it will just split the line on the two pages instead of starting the line of the table on the next page. Someone know if it’s possible to fix it and how ?</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/54b2c7d4c34b8819c2b0487869e31a9866fe68f8.png\" data-download-href=\"https://forum.typst.app/uploads/default/54b2c7d4c34b8819c2b0487869e31a9866fe68f8\" title=\"Sans titre\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/54b2c7d4c34b8819c2b0487869e31a9866fe68f8_2_595x500.png\" alt=\"Sans titre\" data-base62-sha1=\"c5h8SkpVGPudGaAPyxHlPdXIOWQ\" width=\"595\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/54b2c7d4c34b8819c2b0487869e31a9866fe68f8_2_595x500.png, https://forum.typst.app/uploads/default/original/2X/5/54b2c7d4c34b8819c2b0487869e31a9866fe68f8.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/54b2c7d4c34b8819c2b0487869e31a9866fe68f8.png 2x\" data-dominant-color=\"F9F9F9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Sans titre</span><span class=\"informations\">777×652 46.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hello,\nI have a problem with my table. When a line is too long and exceed on another page, it will just split the line on the two pages instead of starting the line of the table on the next page. Someone know if it's possible to fix it and how ?\n\n![Sans titre|595x500](upload://c5h8SkpVGPudGaAPyxHlPdXIOWQ.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 365.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1261
    },
    {
      "id": 9085,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-26T14:17:44.605Z",
      "updated_at": "2025-02-26T14:17:44.605Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/aurelien\">@Aurelien</a>, welcome! I think you’re looking for <a href=\"https://typst.app/docs/reference/model/table/#definitions-cell-breakable\">table.cell(breakable)</a>.</p>\n<p>Don’t hesitate to read <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a> and update your topic accordingly :)</p>",
      "raw": "Hello @Aurelien, welcome! I think you're looking for [table.cell(breakable)](https://typst.app/docs/reference/model/table/#definitions-cell-breakable).\n\nDon't hesitate to read https://forum.typst.app/t/how-to-post-in-the-questions-category/11 and update your topic accordingly :)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 4.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9316,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-03T15:29:18.173Z",
      "updated_at": "2025-03-03T15:29:33.278Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/aurelien\">@Aurelien</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>For future posts, make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Aurelien, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nFor future posts, make sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 9,
      "score": 1.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:51:06.488139"
}
{
  "topic_metadata": {
    "id": 3003,
    "title": "How to switch between multiple images without changing the slide numbering using Touying?",
    "slug": "how-to-switch-between-multiple-images-without-changing-the-slide-numbering-using-touying",
    "posts_count": 5,
    "created_at": "2025-02-26T13:29:05.336Z",
    "last_posted_at": "2025-02-27T15:35:29.322Z",
    "views": 157,
    "like_count": 4,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Electron_Wizard",
    "tags": [
      "touying",
      "polylux"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 378
  },
  "posts": [
    {
      "id": 9083,
      "post_number": 1,
      "username": "TTWLLL",
      "name": "TTWLLL",
      "created_at": "2025-02-26T13:29:05.435Z",
      "updated_at": "2025-02-27T15:34:45.980Z",
      "cooked": "<p>I’ve generated a sequence of drawio SVG files that are intended to serve as steps for an animation. My goal is to play these in succession to demonstrate the flow of each step. Currently, I’m using a rather basic workaround with Touying. I think the <code>#pause</code> command doesn’t replace the previous figure with a new one as needed.</p>\n<p>I’m reaching out to inquire if there’s a more efficient or elegant solution for animating these series of figures. If the current workaround is the only available option, I’d like to know how I can fix the slide number ID so that it remains the same while multiple step-slides are being displayed.</p>\n<p>Here’s a sample of my current workaround:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">== TestTitle\n#figure(image(\"step0.svg\"))\n== TestTitle\n#figure(image(\"step1.svg\"))\n== TestTitle\n#figure(image(\"step2.svg\")) \n</code></pre>",
      "raw": "I've generated a sequence of drawio SVG files that are intended to serve as steps for an animation. My goal is to play these in succession to demonstrate the flow of each step. Currently, I'm using a rather basic workaround with Touying. I think the `#pause` command doesn't replace the previous figure with a new one as needed.\n\nI'm reaching out to inquire if there's a more efficient or elegant solution for animating these series of figures. If the current workaround is the only available option, I'd like to know how I can fix the slide number ID so that it remains the same while multiple step-slides are being displayed.\n\nHere's a sample of my current workaround:\n```typst\n== TestTitle\n#figure(image(\"step0.svg\"))\n== TestTitle\n#figure(image(\"step1.svg\"))\n== TestTitle\n#figure(image(\"step2.svg\")) \n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 392.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1262
    },
    {
      "id": 9102,
      "post_number": 2,
      "username": "TTWLLL",
      "name": "TTWLLL",
      "created_at": "2025-02-26T18:48:32.773Z",
      "updated_at": "2025-02-26T18:48:54.540Z",
      "cooked": "<p>Find a better solution in Touying having <code>  config: config-common(freeze-slide-counter: true)</code>:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">== TestTitle\n#figure(image(\"step0.svg\"))\n\n#slide(\n  title: \"TestTitle\",\n  config: config-common(freeze-slide-counter: true)\n)[\n#figure(image(\"step1.svg\"))\n]\n\n</code></pre>",
      "raw": "Find a better solution in Touying having `  config: config-common(freeze-slide-counter: true)`:\n\n```typst\n== TestTitle\n#figure(image(\"step0.svg\"))\n\n#slide(\n  title: \"TestTitle\",\n  config: config-common(freeze-slide-counter: true)\n)[\n#figure(image(\"step1.svg\"))\n]\n\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 11.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1262
    },
    {
      "id": 9112,
      "post_number": 3,
      "username": "Electron_Wizard",
      "name": "Electron Wizard",
      "created_at": "2025-02-27T09:00:07.401Z",
      "updated_at": "2025-02-27T09:00:07.401Z",
      "cooked": "<p>Hey TTWLLL,</p>\n<p>Touying has a neat <code>#alternatives</code> function (see the Touying-docs <a href=\"https://touying-typ.github.io/docs/0.2.x/dynamic/complex#alternatives\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Complex Animations | Touying</a>) which allows doing that:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/touying:0.6.1\": *\n#import themes.simple: *\n\n#show: simple-theme.with(aspect-ratio: \"16-9\")\n#set image(height: 80%)\n\n#slide(repeat: 3, self =&gt; [\n  #let (alternatives) = utils.methods(self)\n\n  === Hello\n  #alternatives[#image(\"cat1.jpg\")][#image(\"cat2.jpg\")][#image(\"cat3.jpg\")]\n])\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/a/a24afa3117f54d2f862e597809a84fb620ded5fa.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/a24afa3117f54d2f862e597809a84fb620ded5fa\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/a/a24afa3117f54d2f862e597809a84fb620ded5fa_2_290x500.jpeg\" alt=\"image\" data-base62-sha1=\"n9HZhglbZkH5gB7I5hW9vkluvma\" width=\"290\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/a/a24afa3117f54d2f862e597809a84fb620ded5fa_2_290x500.jpeg, https://forum.typst.app/uploads/default/original/2X/a/a24afa3117f54d2f862e597809a84fb620ded5fa.jpeg 1.5x, https://forum.typst.app/uploads/default/original/2X/a/a24afa3117f54d2f862e597809a84fb620ded5fa.jpeg 2x\" data-dominant-color=\"DEDCD9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">419×721 32.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>It might take some fiddling around with the sizing of the images, but this should do it. The page number also does not get incremented!</p>\n<p>Hope this helps!</p>\n<hr>\n<p>Also regarding posting in the <em>Questions</em> category: the title of the post need to be a question (<a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>) and I can’t change your title, else I would have done that. So it would be great if you could change the title to something like “How to switch between multiple images without changing the slide numbering using Touying?” or something else.</p>",
      "raw": "Hey TTWLLL,\n\nTouying has a neat `#alternatives` function (see the Touying-docs https://touying-typ.github.io/docs/0.2.x/dynamic/complex#alternatives) which allows doing that:\n\n```typst\n#import \"@preview/touying:0.6.1\": *\n#import themes.simple: *\n\n#show: simple-theme.with(aspect-ratio: \"16-9\")\n#set image(height: 80%)\n\n#slide(repeat: 3, self => [\n  #let (alternatives) = utils.methods(self)\n\n  === Hello\n  #alternatives[#image(\"cat1.jpg\")][#image(\"cat2.jpg\")][#image(\"cat3.jpg\")]\n])\n```\n\n![image|290x500](upload://n9HZhglbZkH5gB7I5hW9vkluvma.jpeg)\n\nIt might take some fiddling around with the sizing of the images, but this should do it. The page number also does not get incremented!\n\nHope this helps!\n\n---\n\nAlso regarding posting in the _Questions_ category: the title of the post need to be a question (https://forum.typst.app/t/how-to-post-in-the-questions-category/11) and I can't change your title, else I would have done that. So it would be great if you could change the title to something like \"How to switch between multiple images without changing the slide numbering using Touying?\" or something else.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 25,
      "score": 50.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 997
    },
    {
      "id": 9131,
      "post_number": 4,
      "username": "TTWLLL",
      "name": "TTWLLL",
      "created_at": "2025-02-27T15:33:07.849Z",
      "updated_at": "2025-02-27T15:33:07.849Z",
      "cooked": "<p>Thanks.<br>\nI found myself can not change the title and the first thread. I could only change my second reply to myself.</p>",
      "raw": "Thanks.\nI found myself can not change the title and the first thread. I could only change my second reply to myself.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1262
    },
    {
      "id": 9132,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-27T15:35:29.322Z",
      "updated_at": "2025-02-27T15:35:29.322Z",
      "cooked": "<p>I changed it for you ;)</p>",
      "raw": "I changed it for you ;)",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 21,
      "score": 34.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:51:05.628427"
}
{
  "topic_metadata": {
    "id": 3008,
    "title": "How can I work around move apparently making blocks unbreakable?",
    "slug": "how-can-i-work-around-move-apparently-making-blocks-unbreakable",
    "posts_count": 3,
    "created_at": "2025-02-26T15:13:02.131Z",
    "last_posted_at": "2025-02-26T16:05:48.236Z",
    "views": 60,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "layout",
      "placement"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 359
  },
  "posts": [
    {
      "id": 9089,
      "post_number": 1,
      "username": "LyesSaadi",
      "name": "Lyes Saadi",
      "created_at": "2025-02-26T15:13:02.271Z",
      "updated_at": "2025-03-07T21:30:41.151Z",
      "cooked": "<p>Hello everyone !</p>\n<p>I am creating my own template where I have environments which look like this:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/50e71c59c538eab755779cfad77d28ef0f9c8332.png\" data-download-href=\"https://forum.typst.app/uploads/default/50e71c59c538eab755779cfad77d28ef0f9c8332\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/50e71c59c538eab755779cfad77d28ef0f9c8332_2_690x94.png\" alt=\"image\" data-base62-sha1=\"bxHlHS7hleT5VTlyMYT4i6am5Ts\" width=\"690\" height=\"94\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/50e71c59c538eab755779cfad77d28ef0f9c8332_2_690x94.png, https://forum.typst.app/uploads/default/optimized/2X/5/50e71c59c538eab755779cfad77d28ef0f9c8332_2_1035x141.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/50e71c59c538eab755779cfad77d28ef0f9c8332.png 2x\" data-dominant-color=\"E2E2E2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1247×170 46.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>where the background of the environment extends until the limit of the page</p>\n<p>This is done by having a block which takes the width + 2*margin inside a move which moves the block on the left by margin:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let environment(body, name: \"Environment\", subtitle: none, counter: auto, follows: false, boxed: true, margin: 2.5cm, scheme: light) = [\n  #v(10pt)\n\n  #move(block(\n    width: 100% + 2*margin,\n    inset: (left: margin, right: margin, top: 1em, bottom: 1em),\n    fill: scheme.env.bg,\n    stroke: (top: scheme.env.stroke, bottom: scheme.env.stroke),\n    breakable: true,\n    text(fill: scheme.env.fg)[\n      #place(\n        block(\n          fill: scheme.env.bg,\n          inset: .4em,\n          radius: .2em,\n          stroke: scheme.env.title-stroke,\n        )[\n          #text(\n            name + if counter != none { \" \" + count(counter, follows) } + if subtitle != none { \":\" },\n            weight: if not follows { \"bold\" } else { \"regular\" },\n            style: if follows { \"italic\" } else { \"normal\" },\n            fill: scheme.env.fg\n          )\n          #if cite != none {\n            subtitle\n          }\n        ],\n        dx: -3em, dy: -1.8em\n      )\n    \n      #body\n    ]),\n  dx: -margin)\n]\n</code></pre>\n<p>But, this obviously makes the environment unbreakable, which create issues with long proofs:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/ed7d1d20650d9cd216458f276e7b84cc3213d15a.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/ed7d1d20650d9cd216458f276e7b84cc3213d15a\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/ed7d1d20650d9cd216458f276e7b84cc3213d15a_2_354x500.jpeg\" alt=\"image\" data-base62-sha1=\"xSVdmttohzHk8YKzX5BwwJyKYP0\" width=\"354\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/ed7d1d20650d9cd216458f276e7b84cc3213d15a_2_354x500.jpeg, https://forum.typst.app/uploads/default/optimized/2X/e/ed7d1d20650d9cd216458f276e7b84cc3213d15a_2_531x750.jpeg 1.5x, https://forum.typst.app/uploads/default/optimized/2X/e/ed7d1d20650d9cd216458f276e7b84cc3213d15a_2_708x1000.jpeg 2x\" data-dominant-color=\"DBDBDB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1013×1427 224 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>My ideas on how to solve this would be:</p>\n<ul>\n<li>To have the background being managed by a <code>#place</code>, which would be extremely hacky.</li>\n<li>To have the page’s margin set to 0 and applying an inset to everything else.</li>\n<li>???</li>\n</ul>\n<p>I wanted to ask the community to see if anyone had any other better solution or tips on how to proceed !</p>",
      "raw": "Hello everyone !\n\nI am creating my own template where I have environments which look like this:\n\n![image|690x94](upload://bxHlHS7hleT5VTlyMYT4i6am5Ts.png)\n\nwhere the background of the environment extends until the limit of the page\n\nThis is done by having a block which takes the width + 2*margin inside a move which moves the block on the left by margin:\n\n```typst\n#let environment(body, name: \"Environment\", subtitle: none, counter: auto, follows: false, boxed: true, margin: 2.5cm, scheme: light) = [\n  #v(10pt)\n\n  #move(block(\n    width: 100% + 2*margin,\n    inset: (left: margin, right: margin, top: 1em, bottom: 1em),\n    fill: scheme.env.bg,\n    stroke: (top: scheme.env.stroke, bottom: scheme.env.stroke),\n    breakable: true,\n    text(fill: scheme.env.fg)[\n      #place(\n        block(\n          fill: scheme.env.bg,\n          inset: .4em,\n          radius: .2em,\n          stroke: scheme.env.title-stroke,\n        )[\n          #text(\n            name + if counter != none { \" \" + count(counter, follows) } + if subtitle != none { \":\" },\n            weight: if not follows { \"bold\" } else { \"regular\" },\n            style: if follows { \"italic\" } else { \"normal\" },\n            fill: scheme.env.fg\n          )\n          #if cite != none {\n            subtitle\n          }\n        ],\n        dx: -3em, dy: -1.8em\n      )\n    \n      #body\n    ]),\n  dx: -margin)\n]\n```\n\nBut, this obviously makes the environment unbreakable, which create issues with long proofs:\n\n![image|354x500](upload://xSVdmttohzHk8YKzX5BwwJyKYP0.jpeg)\n\nMy ideas on how to solve this would be:\n- To have the background being managed by a `#place`, which would be extremely hacky.\n- To have the page's margin set to 0 and applying an inset to everything else.\n- ???\n\nI wanted to ask the community to see if anyone had any other better solution or tips on how to proceed !",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 105.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1265
    },
    {
      "id": 9090,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-26T15:53:52.481Z",
      "updated_at": "2025-02-26T15:53:52.481Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/lyessaadi\">@LyesSaadi</a>,</p>\n<p>I didn’t try it with your example as it does not work standalone, but I think it should work if you replace <code>move</code>  with <code>pad</code>, with on the left <code>-margin</code> and on the right positive <code>margin</code>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">pad(\n  left: -margin,\n  right: margin,\n  ...\n)\n</code></pre>",
      "raw": "Hi @LyesSaadi,\n\nI didn't try it with your example as it does not work standalone, but I think it should work if you replace `move`  with `pad`, with on the left `-margin` and on the right positive `margin`.\n\n```typ\npad(\n  left: -margin,\n  right: margin,\n  ...\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 24.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9091,
      "post_number": 3,
      "username": "LyesSaadi",
      "name": "Lyes Saadi",
      "created_at": "2025-02-26T16:05:48.236Z",
      "updated_at": "2025-02-26T16:05:48.236Z",
      "cooked": "<p>Indeed ! Didn’t think of that ! Thanks ! It works like a charm !</p>\n<p>Now the only thing remaining I’d like to solve would be to try having it extends the background to the end of the page when it crosses pages:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/529f2f450d67dac3d4af9f02f1b00adb10fad7df.png\" data-download-href=\"https://forum.typst.app/uploads/default/529f2f450d67dac3d4af9f02f1b00adb10fad7df\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/529f2f450d67dac3d4af9f02f1b00adb10fad7df_2_690x287.png\" alt=\"image\" data-base62-sha1=\"bMUcEBmmiljAvQrbhZnaTh0QIlp\" width=\"690\" height=\"287\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/529f2f450d67dac3d4af9f02f1b00adb10fad7df_2_690x287.png, https://forum.typst.app/uploads/default/optimized/2X/5/529f2f450d67dac3d4af9f02f1b00adb10fad7df_2_1035x430.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/529f2f450d67dac3d4af9f02f1b00adb10fad7df.png 2x\" data-dominant-color=\"DEDEDE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1086×453 92.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Or maybe having it redisplay the title on the upper border ?</p>\n<p>But, at this point, I’m just bickering <img src=\"https://forum.typst.app/images/emoji/apple/stuck_out_tongue.png?v=12\" title=\":stuck_out_tongue:\" class=\"emoji\" alt=\":stuck_out_tongue:\" loading=\"lazy\" width=\"20\" height=\"20\">.</p>",
      "raw": "Indeed ! Didn't think of that ! Thanks ! It works like a charm !\n\nNow the only thing remaining I'd like to solve would be to try having it extends the background to the end of the page when it crosses pages:\n\n![image|690x287](upload://bMUcEBmmiljAvQrbhZnaTh0QIlp.png)\n\nOr maybe having it redisplay the title on the upper border ?\n\nBut, at this point, I'm just bickering :stuck_out_tongue:.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 5.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1265
    }
  ],
  "scraped_at": "2025-06-10T09:51:04.908026"
}
{
  "topic_metadata": {
    "id": 3013,
    "title": "What's the use of shebang with Typst?",
    "slug": "whats-the-use-of-shebang-with-typst",
    "posts_count": 4,
    "created_at": "2025-02-27T04:14:30.536Z",
    "last_posted_at": "2025-02-27T10:21:22.554Z",
    "views": 142,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "quachpas",
    "tags": [
      "tooling",
      "syntax",
      "cli"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 223
  },
  "posts": [
    {
      "id": 9105,
      "post_number": 1,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-27T04:14:30.605Z",
      "updated_at": "2025-03-07T21:32:28.094Z",
      "cooked": "<p>Hi,</p>\n<p>With Typst 0.13.0 a syntax change introduced: <em>A shebang <code>#!</code> at the very start of a file is now ignored</em>.</p>\n<p>Perhaps there’s no use for the shebang right now. How this feature could be used with a compiled language like Typst even in the future?</p>",
      "raw": "Hi,\n\nWith Typst 0.13.0 a syntax change introduced: _A shebang `#!` at the very start of a file is now ignored_.\n\nPerhaps there's no use for the shebang right now. How this feature could be used with a compiled language like Typst even in the future?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 51,
      "score": 75.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    },
    {
      "id": 9110,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-27T08:27:39.249Z",
      "updated_at": "2025-02-27T08:28:44.280Z",
      "cooked": "<p>You can already use it, for example if you have <code>file.typ</code> with the following content:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#!/path/to/typst compile\n\nText.\n</code></pre>\n<p>and if you make this file executable, then you can do <code>./file.typ</code> and it will compile the PDF.</p>\n<p>Note that everything after the executable on the shebang line is taken as a single argument. So if you need to pass additional options to the compiler (e.g. to compile to SVG), you’ll need to write a wrapper script that calls Typst with the right options, and refer to this wrapper script in the shebang line.</p>",
      "raw": "You can already use it, for example if you have `file.typ` with the following content:\n\n```typst\n#!/path/to/typst compile\n\nText.\n```\n\nand if you make this file executable, then you can do `./file.typ` and it will compile the PDF.\n\nNote that everything after the executable on the shebang line is taken as a single argument. So if you need to pass additional options to the compiler (e.g. to compile to SVG), you'll need to write a wrapper script that calls Typst with the right options, and refer to this wrapper script in the shebang line.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 19.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9115,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-27T10:01:09.725Z",
      "updated_at": "2025-02-27T10:09:56.818Z",
      "cooked": "<p>If you need more arguments, you can just use <code>env -S</code>, see <a href=\"https://www.gnu.org/software/coreutils/manual/html_node/env-invocation.html#g_t_002dS_002f_002d_002dsplit_002dstring-usage-in-scripts\" class=\"inline-onebox\">env invocation (GNU Coreutils 9.6)</a>.</p>\n<p>EDIT: for example</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#!/bin/env -S /usr/bin/typst compile -f png --pages 1 --open swayimg\n</code></pre>",
      "raw": "If you need more arguments, you can just use `env -S`, see https://www.gnu.org/software/coreutils/manual/html_node/env-invocation.html#g_t_002dS_002f_002d_002dsplit_002dstring-usage-in-scripts.\n\nEDIT: for example\n```typ\n#!/bin/env -S /usr/bin/typst compile -f png --pages 1 --open swayimg\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 44,
      "score": 28.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9117,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-27T10:21:22.554Z",
      "updated_at": "2025-02-27T10:21:22.554Z",
      "cooked": "<p>I think that might not work as expected on MacOS though as it actually parses the shebang into multiple words? (And what I said in my previous comment was also Linux specific)</p>",
      "raw": "I think that might not work as expected on MacOS though as it actually parses the shebang into multiple words? (And what I said in my previous comment was also Linux specific)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 8.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:51:04.198183"
}
{
  "topic_metadata": {
    "id": 3027,
    "title": "How can I tack something to an equation?",
    "slug": "how-can-i-tack-something-to-an-equation",
    "posts_count": 2,
    "created_at": "2025-02-27T15:52:07.438Z",
    "last_posted_at": "2025-02-27T16:25:34.305Z",
    "views": 40,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 245
  },
  "posts": [
    {
      "id": 9135,
      "post_number": 1,
      "username": "engifar",
      "name": "",
      "created_at": "2025-02-27T15:52:07.620Z",
      "updated_at": "2025-02-27T15:52:07.620Z",
      "cooked": "<p>Hello, I have the following code:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">Wegen $x^2 + 4x + 5 = (x+2)^2 + 1 &gt; 0$ gilt nach dem Satz über die Partialbruchzerlegung, dass\n$\n    (2x^3 + 8x^2 + 16x + 16) / (x^4 + 6x^3 + 14x^2 + 14x + 5) = A / (x+1) + B / ((x+1)^2) + (C x + D) / (x^2 + 4x + 5) quad (*)\n$\nfür geeignete $A$, $B$, $C$, $D in RR$. Es gilt:\n$\n    (*) quad &lt;=&gt; quad 2x^3 + 8x^2 + 16x + 16 = A(x+1)(x^2 + 4x + 5) + B(x^2 + 4x + 5) + (C x + D)(x+1)^2\n$\n</code></pre>\n<p>This puts a star at the end of the first equation, but also causes the entire equation to shift to the left, because the block gets wider and gets centered. The same applies to the second equation. I’d like to tack the equations like in LaTeX, where the equation isn’t affected but the star is just put at the very end (or beginning) of the line, not affecting the equation placement. Is that possible in Typst?</p>",
      "raw": "Hello, I have the following code:\n```typ\nWegen $x^2 + 4x + 5 = (x+2)^2 + 1 > 0$ gilt nach dem Satz über die Partialbruchzerlegung, dass\n$\n    (2x^3 + 8x^2 + 16x + 16) / (x^4 + 6x^3 + 14x^2 + 14x + 5) = A / (x+1) + B / ((x+1)^2) + (C x + D) / (x^2 + 4x + 5) quad (*)\n$\nfür geeignete $A$, $B$, $C$, $D in RR$. Es gilt:\n$\n    (*) quad <=> quad 2x^3 + 8x^2 + 16x + 16 = A(x+1)(x^2 + 4x + 5) + B(x^2 + 4x + 5) + (C x + D)(x+1)^2\n$\n```\n\nThis puts a star at the end of the first equation, but also causes the entire equation to shift to the left, because the block gets wider and gets centered. The same applies to the second equation. I'd like to tack the equations like in LaTeX, where the equation isn't affected but the star is just put at the very end (or beginning) of the line, not affecting the equation placement. Is that possible in Typst?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 15.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1229
    },
    {
      "id": 9137,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-27T16:25:34.305Z",
      "updated_at": "2025-02-27T16:25:34.305Z",
      "cooked": "<p>Hello, you can try to use the <a href=\"https://typst.app/docs/reference/math/equation/#parameters-numbering\">numbering</a> parameter of equation!</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">Wegen $x^2 + 4x + 5 = (x+2)^2 + 1 &gt; 0$ gilt nach dem Satz über die Partialbruchzerlegung, dass\n#math.equation(numbering: \"(*)\", block: true, $\n    (2x^3 + 8x^2 + 16x + 16) / (x^4 + 6x^3 + 14x^2 + 14x + 5) = A / (x+1) + B / ((x+1)^2) + (C x + D) / (x^2 + 4x + 5)\n$)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/ee2e12acd4f8bfd71c666bbf0f24c77755ac633d.png\" data-download-href=\"https://forum.typst.app/uploads/default/ee2e12acd4f8bfd71c666bbf0f24c77755ac633d\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/ee2e12acd4f8bfd71c666bbf0f24c77755ac633d_2_690x90.png\" alt=\"image\" data-base62-sha1=\"xZ2lCOk7nu5rpUMt1Vshyi3pveR\" width=\"690\" height=\"90\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/ee2e12acd4f8bfd71c666bbf0f24c77755ac633d_2_690x90.png, https://forum.typst.app/uploads/default/original/2X/e/ee2e12acd4f8bfd71c666bbf0f24c77755ac633d.png 1.5x, https://forum.typst.app/uploads/default/original/2X/e/ee2e12acd4f8bfd71c666bbf0f24c77755ac633d.png 2x\" data-dominant-color=\"F3F3F3\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">751×99 18 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hello, you can try to use the [numbering](https://typst.app/docs/reference/math/equation/#parameters-numbering) parameter of equation!\n```typ\nWegen $x^2 + 4x + 5 = (x+2)^2 + 1 > 0$ gilt nach dem Satz über die Partialbruchzerlegung, dass\n#math.equation(numbering: \"(*)\", block: true, $\n    (2x^3 + 8x^2 + 16x + 16) / (x^4 + 6x^3 + 14x^2 + 14x + 5) = A / (x+1) + B / ((x+1)^2) + (C x + D) / (x^2 + 4x + 5)\n$)\n```\n![image|690x90](upload://xZ2lCOk7nu5rpUMt1Vshyi3pveR.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 25,
      "score": 35.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:51:03.488138"
}
{
  "topic_metadata": {
    "id": 3031,
    "title": "How to add center-aligned columns in math mode?",
    "slug": "how-to-add-center-aligned-columns-in-math-mode",
    "posts_count": 3,
    "created_at": "2025-02-27T18:49:42.010Z",
    "last_posted_at": "2025-03-03T15:36:53.235Z",
    "views": 139,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "layout",
      "math"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 135
  },
  "posts": [
    {
      "id": 9140,
      "post_number": 1,
      "username": "jeanas",
      "name": "Jean Abou Samra",
      "created_at": "2025-02-27T18:49:42.118Z",
      "updated_at": "2025-03-03T15:36:12.570Z",
      "cooked": "<p>In math mode, <code>&amp;</code> creates alternatively left-aligned and right-aligned columns. Is it possible to make a column centered?</p>",
      "raw": "In math mode, `&` creates alternatively left-aligned and right-aligned columns. Is it possible to make a column centered?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 420.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 485
    },
    {
      "id": 9157,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-28T09:43:42.225Z",
      "updated_at": "2025-02-28T09:43:42.225Z",
      "cooked": "<p>Hello and welcome <a class=\"mention\" href=\"/u/jeanas\">@jeanas</a>, don’t hesitate to read <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a> and change your topic’s title appropriately, and optionally add some tags.</p>\n<p>As for center-aligning equations, you can do that using a <a href=\"https://typst.app/docs/reference/layout/grid/\">grid</a> instead, as pure equations only alternate alignment left and right.</p>\n<p>eg</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#grid(\n    align: (center, center),\n    row-gutter: 1em,\n    column-gutter: .5em,\n    columns: 2,\n    $a + b$, $=1$,\n    $d$, $=2$\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/78caa52277d6d15df8968dbdd6c559f713a8a199.png\" alt=\"image\" data-base62-sha1=\"hezsBXaEfCYZ1zBijnriIIHe6UN\" width=\"238\" height=\"160\"></p>",
      "raw": "Hello and welcome @jeanas, don't hesitate to read https://forum.typst.app/t/how-to-post-in-the-questions-category/11 and change your topic's title appropriately, and optionally add some tags.\n\nAs for center-aligning equations, you can do that using a [grid](https://typst.app/docs/reference/layout/grid/) instead, as pure equations only alternate alignment left and right.\n\neg\n```typ\n#grid(\n    align: (center, center),\n    row-gutter: 1em,\n    column-gutter: .5em,\n    columns: 2,\n    $a + b$, $=1$,\n    $d$, $=2$\n)\n```\n![image|238x160](upload://hezsBXaEfCYZ1zBijnriIIHe6UN.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 20.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9320,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-03T15:36:53.235Z",
      "updated_at": "2025-03-03T15:36:53.235Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/jeanas\">@jeanas</a>, please let us know if <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a>’s answer solved your problem (and, if so, mark it as a solution) or you’d like more help. Thank you!</p>",
      "raw": "Hey @jeanas, please let us know if @quachpas's answer solved your problem (and, if so, mark it as a solution) or you'd like more help. Thank you!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:51:02.729221"
}
{
  "topic_metadata": {
    "id": 3032,
    "title": "How to Hack Together an Author-Date sorting for Bibliography?",
    "slug": "how-to-hack-together-an-author-date-sorting-for-bibliography",
    "posts_count": 5,
    "created_at": "2025-02-27T19:19:38.169Z",
    "last_posted_at": "2025-03-01T09:52:48.240Z",
    "views": 177,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "literature"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 833
  },
  "posts": [
    {
      "id": 9141,
      "post_number": 1,
      "username": "Paul744",
      "name": "Paul",
      "created_at": "2025-02-27T19:19:38.270Z",
      "updated_at": "2025-03-09T10:19:30.453Z",
      "cooked": "<p>From <a href=\"https://github.com/typst/typst/issues/3913\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Ability to select how a bibliography is sorted · Issue #3913 · typst/typst · GitHub</a>, <a href=\"https://github.com/typst/typst/issues/5914\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">No alphabetic sorting of bibliography in author-date style · Issue #5914 · typst/typst · GitHub</a>, and <a href=\"https://github.com/typst/typst/issues/942\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Bibliography customization from within Typst · Issue #942 · typst/typst · GitHub</a>, my understanding is that typst does not yet support the ability to select a Bibliography/citation style (in my case alphanumeric for both) while altering the sorting from the default first-appearance method.</p>\n<p>I eagerly wait for the day when this does get implemented, but I am lost when trying to figure out if there is a way to hack together a way of getting the sorting right. I have heard about creating something like a hidden module to insert citations without them appearing, but details weren’t given and I couldn’t follow on how to do that.</p>\n<p>Thus, is there a way for now to hack together an author-date sorting to the bibliography?</p>",
      "raw": "From https://github.com/typst/typst/issues/3913, https://github.com/typst/typst/issues/5914, and https://github.com/typst/typst/issues/942, my understanding is that typst does not yet support the ability to select a Bibliography/citation style (in my case alphanumeric for both) while altering the sorting from the default first-appearance method.\n\nI eagerly wait for the day when this does get implemented, but I am lost when trying to figure out if there is a way to hack together a way of getting the sorting right. I have heard about creating something like a hidden module to insert citations without them appearing, but details weren't given and I couldn't follow on how to do that.\n\nThus, is there a way for now to hack together an author-date sorting to the bibliography?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 351.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 788
    },
    {
      "id": 9158,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-28T10:09:24.200Z",
      "updated_at": "2025-02-28T10:09:24.200Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Paul744\" data-post=\"1\" data-topic=\"3032\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/5D25C6/48.png\" class=\"avatar\"> Paul744:</div>\n<blockquote>\n<p>my understanding is that typst does not yet support the ability to select a Bibliography/citation style (in my case alphanumeric for both) while altering the sorting from the default first-appearance method.</p>\n</blockquote>\n</aside>\n<p>Hello <a class=\"mention\" href=\"/u/paul744\">@Paul744</a>, I’m having trouble following your thoughts. I think there is a misconception, you cannot load a style and define a custom sorting, because sorting is defined by the style.</p>\n<p>For example, by selecting the “alphanumeric” style, you would load the following CSL style <a href=\"https://github.com/typst/hayagriva/blob/main/styles/alphanumeric.csl\" class=\"inline-onebox\">hayagriva/styles/alphanumeric.csl at main · typst/hayagriva · GitHub</a> (if I’m not wrong) which defines sorting as</p>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">    &lt;sort&gt;\n      &lt;key variable=\"author\" /&gt;\n      &lt;key variable=\"issued\" /&gt;\n    &lt;/sort&gt;\n</code></pre>\n<p>The CSL spec can be read <a href=\"https://docs.citationstyles.org/en/stable/specification.html#sorting\">here</a>.</p>\n<p>If you want author-date sorting, you need to load a style that sorts in this way, e.g., chicago-author-date. Below, they sort using three different keys <a href=\"https://github.com/citation-style-language/styles/blob/2121f982285735b70d079deb4852119eee57144c/chicago-author-date.csl#L141\">“contributors”</a>, <a href=\"https://github.com/citation-style-language/styles/blob/2121f982285735b70d079deb4852119eee57144c/chicago-author-date.csl#L519\">“date-sort”</a> and “title”.</p>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">    &lt;sort&gt;\n      &lt;key macro=\"contributors\"/&gt;\n      &lt;key macro=\"date-sort\"/&gt;\n      &lt;key variable=\"title\"/&gt;\n    &lt;/sort&gt;\n</code></pre>\n<p>I also think that it’s not easy to customize bibliography layout currently in Typst, because there is no dedicated interface, but since there is a standard (CSL), I think it’s the proper way to support customization.</p>\n<p>Also, <strong>not everything should be done in Typst</strong>.</p>\n<aside class=\"quote no-group\" data-username=\"Paul744\" data-post=\"1\" data-topic=\"3032\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/5D25C6/48.png\" class=\"avatar\"> Paul744:</div>\n<blockquote>\n<p>Thus, is there a way for now to hack together an author-date sorting to the bibliography?</p>\n</blockquote>\n</aside>\n<p>tl;dr: best hack is to define your own sorting in the CSL file. You can use the fantastic <a href=\"https://editor.citationstyles.org/visualEditor/\">visualEditor</a> here! (or mash together different styles).</p>\n<p>Hopefully, my explanation was on topic, please tell me if I misunderstood your question!</p>\n<p>P.S.: I think a good way to support custom sorting would be to allow taking into account biblatex’s <code>sortkey</code>.</p>",
      "raw": "[quote=\"Paul744, post:1, topic:3032\"]\nmy understanding is that typst does not yet support the ability to select a Bibliography/citation style (in my case alphanumeric for both) while altering the sorting from the default first-appearance method.\n[/quote]\n\nHello @Paul744, I'm having trouble following your thoughts. I think there is a misconception, you cannot load a style and define a custom sorting, because sorting is defined by the style.\n\nFor example, by selecting the \"alphanumeric\" style, you would load the following CSL style https://github.com/typst/hayagriva/blob/main/styles/alphanumeric.csl (if I'm not wrong) which defines sorting as\n\n```xml\n    <sort>\n      <key variable=\"author\" />\n      <key variable=\"issued\" />\n    </sort>\n```\n\nThe CSL spec can be read [here](https://docs.citationstyles.org/en/stable/specification.html#sorting).\n\nIf you want author-date sorting, you need to load a style that sorts in this way, e.g., chicago-author-date. Below, they sort using three different keys [\"contributors\"](https://github.com/citation-style-language/styles/blob/2121f982285735b70d079deb4852119eee57144c/chicago-author-date.csl#L141), [\"date-sort\"](https://github.com/citation-style-language/styles/blob/2121f982285735b70d079deb4852119eee57144c/chicago-author-date.csl#L519) and \"title\".\n```xml\n    <sort>\n      <key macro=\"contributors\"/>\n      <key macro=\"date-sort\"/>\n      <key variable=\"title\"/>\n    </sort>\n```\n\nI also think that it's not easy to customize bibliography layout currently in Typst, because there is no dedicated interface, but since there is a standard (CSL), I think it's the proper way to support customization. \n\nAlso, **not everything should be done in Typst**.\n\n[quote=\"Paul744, post:1, topic:3032\"]\nThus, is there a way for now to hack together an author-date sorting to the bibliography?\n[/quote]\n\ntl;dr: best hack is to define your own sorting in the CSL file. You can use the fantastic [visualEditor](https://editor.citationstyles.org/visualEditor/) here! (or mash together different styles).\n\nHopefully, my explanation was on topic, please tell me if I misunderstood your question!\n\nP.S.: I think a good way to support custom sorting would be to allow taking into account biblatex's `sortkey`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 27,
      "score": 45.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9181,
      "post_number": 3,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-28T11:01:46.902Z",
      "updated_at": "2025-02-28T14:48:39.669Z",
      "cooked": "<p>to add to <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a>’s excellent answer, if you don’t want  to write your own .csl file, you can find a good implementation here: <a href=\"https://github.com/citation-style-language/styles/blob/master/din-1505-2-alphanumeric.csl\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">styles/din-1505-2-alphanumeric.csl at master · citation-style-language/styles · GitHub</a>. This is the .csl that I use, and it sorts the bibliography.</p>",
      "raw": "to add to @quachpas's excellent answer, if you don't want  to write your own .csl file, you can find a good implementation here: https://github.com/citation-style-language/styles/blob/master/din-1505-2-alphanumeric.csl. This is the .csl that I use, and it sorts the bibliography.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 20.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9198,
      "post_number": 4,
      "username": "Paul744",
      "name": "Paul",
      "created_at": "2025-02-28T15:53:50.290Z",
      "updated_at": "2025-03-09T09:56:30.462Z",
      "cooked": "<p>Thank you <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> and <a class=\"mention\" href=\"/u/aarnent\">@aarnent</a> for your explanations.</p>\n<p><a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> To clarify my point, when I say “while altering the sorting from the default …,” I’m thinking that selecting a new sorting method overrides the one present in the CSL file. If I remember correctly, that was an idea put forward on one of the Github issues, but I might be misremembering. My assumption was that was how LaTeX’s bibtex did it with:</p>\n<pre data-code-wrap=\"tex\"><code class=\"lang-tex\">\\usepackage[\n\tbackend = biber,\n\tstyle = alphabetic,\n\tsorting = nyt\n]{biblatex}\n</code></pre>\n<p>Regarding your point about not everything being done in Typst, while I do agree, formatting citations carefully is an integral-enough part of academic work that if one is going to jump ship from LaTeX, I imagine it could be a deal-breaker. At the very least, if modifying stuff like this isn’t planned, it’s something that should definitely be addressed in the page about moving from LaTeX to Typst, if it isn’t addressed already (I could very well have missed it).</p>\n<p>Also, thanks for bringing up the visual editor. I was not aware of that before, but that’s going straight into my bookmarks.</p>\n<p><a class=\"mention\" href=\"/u/aarnent\">@aarnent</a> Thanks for linking that. I’ll be sure to try it out.</p>",
      "raw": "Thank you @quachpas and @aarnent for your explanations.\n\n@quachpas To clarify my point, when I say \"while altering the sorting from the default ...,\" I'm thinking that selecting a new sorting method overrides the one present in the CSL file. If I remember correctly, that was an idea put forward on one of the Github issues, but I might be misremembering. My assumption was that was how LaTeX's bibtex did it with:\n\n```tex\n\\usepackage[\n\tbackend = biber,\n\tstyle = alphabetic,\n\tsorting = nyt\n]{biblatex}\n```\n\nRegarding your point about not everything being done in Typst, while I do agree, formatting citations carefully is an integral-enough part of academic work that if one is going to jump ship from LaTeX, I imagine it could be a deal-breaker. At the very least, if modifying stuff like this isn't planned, it's something that should definitely be addressed in the page about moving from LaTeX to Typst, if it isn't addressed already (I could very well have missed it).\n\nAlso, thanks for bringing up the visual editor. I was not aware of that before, but that's going straight into my bookmarks.\n\n@aarnent Thanks for linking that. I'll be sure to try it out.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 25.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 788
    },
    {
      "id": 9240,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-01T09:52:48.240Z",
      "updated_at": "2025-03-01T09:52:48.240Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Paul744\" data-post=\"4\" data-topic=\"3032\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/5D25C6/48.png\" class=\"avatar\"> Paul744:</div>\n<blockquote>\n<p>At the very least, if modifying stuff like this isn’t planned, it’s something that should definitely be addressed in the page about moving from LaTeX to Typst, if it isn’t addressed already (I could very well have missed it).</p>\n</blockquote>\n</aside>\n<p>Probably what is needed, it that the bibliography element exposes the entries. Then you could control the layout completely. A dependent PR is <a href=\"https://github.com/typst/typst/pull/5932\" class=\"inline-onebox\">Add `bibliography.entry` element by xkevio · Pull Request #5932 · typst/typst · GitHub</a> by <a class=\"mention\" href=\"/u/xkevio\">@xkevio</a>.</p>\n<p>Thinking on it, I think there is merit for that and it should be fairly straightforward to implement.</p>",
      "raw": "[quote=\"Paul744, post:4, topic:3032\"]\nAt the very least, if modifying stuff like this isn’t planned, it’s something that should definitely be addressed in the page about moving from LaTeX to Typst, if it isn’t addressed already (I could very well have missed it).\n[/quote]\n\nProbably what is needed, it that the bibliography element exposes the entries. Then you could control the layout completely. A dependent PR is https://github.com/typst/typst/pull/5932 by @xkevio.\n\nThinking on it, I think there is merit for that and it should be fairly straightforward to implement.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:51:02.019107"
}
{
  "topic_metadata": {
    "id": 3034,
    "title": "How to export Cetz diagrams in HTML?",
    "slug": "how-to-export-cetz-diagrams-in-html",
    "posts_count": 7,
    "created_at": "2025-02-27T20:14:22.309Z",
    "last_posted_at": "2025-03-03T15:34:09.270Z",
    "views": 164,
    "like_count": 3,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "cetz",
      "html"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 484
  },
  "posts": [
    {
      "id": 9144,
      "post_number": 1,
      "username": "Chrysoberyl",
      "name": "",
      "created_at": "2025-02-27T20:14:22.421Z",
      "updated_at": "2025-03-03T15:32:50.736Z",
      "cooked": "<p>With the new experimental HTML exporter, is there a way to export Cetz diagrams? Currently if I compile a document</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/cetz:0.3.2\"\n//#set page(width: auto, height: auto, margin: .5cm)\n\n#show math.equation: block.with(fill: white, inset: 1pt)\n\n#cetz.canvas(length: 3cm, {\n ...\n})\n</code></pre>\n<p>with <code>typst compile --features html --format html ...</code>, I get</p>\n<pre data-code-wrap=\"sh\"><code class=\"lang-sh\">warning: block was ignored during HTML export\n    ┌─ @preview/cetz:0.3.2/src/canvas.typ:18:90\n</code></pre>\n<p>I don’t see this explicitly mentioned on the roadmap for HTML, so I wonder if there is a way to do it. This would be very helpful for preparing lecture slides.</p>",
      "raw": "With the new experimental HTML exporter, is there a way to export Cetz diagrams? Currently if I compile a document\n```typst\n#import \"@preview/cetz:0.3.2\"\n//#set page(width: auto, height: auto, margin: .5cm)\n\n#show math.equation: block.with(fill: white, inset: 1pt)\n\n#cetz.canvas(length: 3cm, {\n ...\n})\n```\nwith `typst compile --features html --format html ...`, I get\n```sh\nwarning: block was ignored during HTML export\n    ┌─ @preview/cetz:0.3.2/src/canvas.typ:18:90\n```\nI don't see this explicitly mentioned on the roadmap for HTML, so I wonder if there is a way to do it. This would be very helpful for preparing lecture slides.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 334.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1277
    },
    {
      "id": 9145,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-27T20:20:05.054Z",
      "updated_at": "2025-02-27T20:22:15.879Z",
      "cooked": "<p>I haven’t used it myself yet, but that’s what this function is for:</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/html/frame/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/html/frame/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/html/frame/\" target=\"_blank\" rel=\"noopener\">Frame Function – Typst Documentation</a></h3>\n\n  <p>Documentation for the `frame` function.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>It designates part of the document as something that should use the regular Typst layouting. The result is included as an SVG image.</p>",
      "raw": "I haven't used it myself yet, but that's what this function is for:\n\nhttps://typst.app/docs/reference/html/frame/\n\nIt designates part of the document as something that should use the regular Typst layouting. The result is included as an SVG image.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 18.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 9146,
      "post_number": 3,
      "username": "Chrysoberyl",
      "name": "",
      "created_at": "2025-02-27T20:25:44.040Z",
      "updated_at": "2025-02-27T20:34:37.424Z",
      "cooked": "<p>Like <code>#html.frame(cetz.canvas(...))</code>?</p>",
      "raw": "Like `#html.frame(cetz.canvas(...))`?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 13.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1277
    },
    {
      "id": 9161,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-28T10:24:33.252Z",
      "updated_at": "2025-02-28T10:24:33.252Z",
      "cooked": "<p>Yes, here’s a complete example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.2\"\n\n#show figure.where(kind: \"cetz\"): it =&gt; {\n  if target() == \"html\" { html.frame(it) } else { it }\n}\n\n#let drawing(..args) = figure(\n  kind: \"cetz\",\n  supplement: none,\n  cetz.canvas(..args),\n)\n\n#drawing(length: 3cm, {\n  import cetz.draw:* \n  line((0, 0), (1, 1))\n  line((1, 0), (0, 1))\n})\n</code></pre>",
      "raw": "Yes, here's a complete example:\n\n```typ\n#import \"@preview/cetz:0.3.2\"\n\n#show figure.where(kind: \"cetz\"): it => {\n  if target() == \"html\" { html.frame(it) } else { it }\n}\n\n#let drawing(..args) = figure(\n  kind: \"cetz\",\n  supplement: none,\n  cetz.canvas(..args),\n)\n\n#drawing(length: 3cm, {\n  import cetz.draw:* \n  line((0, 0), (1, 1))\n  line((1, 0), (0, 1))\n})\n```",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 12.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9185,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-28T11:42:16.808Z",
      "updated_at": "2025-02-28T11:42:16.808Z",
      "cooked": "<p>hmm, I’m not sure I’d do it like that. If I’m not mistaken, that would include the caption in the frame and thus make it part of the SVG image (not selectable, at least in most browsers, and inconsistent with non-cetz figures). – oh! I just noticed that actually doesn’t <em>allow</em> you to add a caption since all args are passed to CeTZ.</p>\n<p>Also, the custom kind could lead to outline problems if the cetz drawing should be a regular image (or some other existing kind).</p>\n<p>I would rather define a wrapper function:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.2\"\n\n#let drawing(..args) = {\n  let canvas = cetz.canvas(..args)\n  context if target() == \"html\" {\n    html.frame(canvas)\n  } else {\n    canvas\n  }\n}\n\n#figure(\n  drawing(length: 3cm, {\n    import cetz.draw:* \n    line((0, 0), (1, 1))\n    line((1, 0), (0, 1))\n  }),\n)\n</code></pre>\n<p>Then you can still configure the figure element however it’s necessary. The only downside is that <code>drawing</code> is opaque due to context.</p>",
      "raw": "hmm, I'm not sure I'd do it like that. If I'm not mistaken, that would include the caption in the frame and thus make it part of the SVG image (not selectable, at least in most browsers, and inconsistent with non-cetz figures). -- oh! I just noticed that actually doesn't _allow_ you to add a caption since all args are passed to CeTZ.\n\nAlso, the custom kind could lead to outline problems if the cetz drawing should be a regular image (or some other existing kind).\n\nI would rather define a wrapper function:\n\n```typ\n#import \"@preview/cetz:0.3.2\"\n\n#let drawing(..args) = {\n  let canvas = cetz.canvas(..args)\n  context if target() == \"html\" {\n    html.frame(canvas)\n  } else {\n    canvas\n  }\n}\n\n#figure(\n  drawing(length: 3cm, {\n    import cetz.draw:* \n    line((0, 0), (1, 1))\n    line((1, 0), (0, 1))\n  }),\n)\n```\n\nThen you can still configure the figure element however it's necessary. The only downside is that `drawing` is opaque due to context.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 31.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 9188,
      "post_number": 6,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-28T12:30:25.392Z",
      "updated_at": "2025-02-28T12:31:14.283Z",
      "cooked": "<p>Here I use figure as a poor man’s custom type, so that cetz diagrams can be easily queried and configured with show rules. It’s not meant to include a caption. If the user wants the diagram in an actual figure, they’re expected to write <code>figure(drawing(...), caption: ...)</code>. But I also like your version, it’s a simpler example.</p>",
      "raw": "Here I use figure as a poor man's custom type, so that cetz diagrams can be easily queried and configured with show rules. It's not meant to include a caption. If the user wants the diagram in an actual figure, they're expected to write `figure(drawing(...), caption: ...)`. But I also like your version, it's a simpler example.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 51.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9319,
      "post_number": 7,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-03T15:34:09.270Z",
      "updated_at": "2025-03-03T15:34:09.270Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/chrysoberyl\">@Chrysoberyl</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>For future posts, make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Chrysoberyl, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nFor future posts, make sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 18,
      "score": 18.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:51:01.108486"
}
{
  "topic_metadata": {
    "id": 3042,
    "title": "How to specify custom underline strokes based on default stroke thickness?",
    "slug": "how-to-specify-custom-underline-strokes-based-on-default-stroke-thickness",
    "posts_count": 9,
    "created_at": "2025-02-28T10:13:21.528Z",
    "last_posted_at": "2025-03-05T13:32:35.838Z",
    "views": 148,
    "like_count": 1,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "aarnent",
    "tags": [
      "scripting",
      "styling"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 893
  },
  "posts": [
    {
      "id": 9159,
      "post_number": 1,
      "username": "wisperwind",
      "name": "",
      "created_at": "2025-02-28T10:13:21.648Z",
      "updated_at": "2025-03-03T15:43:49.786Z",
      "cooked": "<p>The <code>underline()</code> function uses a stroke thickness that is based on the font by default, e.g.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#underline(stroke: \"loosely-dotted\")[#lorem(10)]\n</code></pre>\n<p>I can define a custom stroke like so:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#underline(stroke: stroke(dash: (1pt, 2pt)))[#lorem(10)]\n</code></pre>\n<p>But there is no obvious way to define a custom stroke that also uses the font-derived thickness, i.e. something along the lines of</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#underline(\n  stroke: stroke(\n    dash: (default-thickness, 0.7 * default-thickness),\n  ),\n)[#lorem(10)]\n</code></pre>\n<p>Is there any existing method to achieve this? Or would this rather be a feature request?</p>",
      "raw": "The `underline()` function uses a stroke thickness that is based on the font by default, e.g.\n\n```typst\n#underline(stroke: \"loosely-dotted\")[#lorem(10)]\n```\n\nI can define a custom stroke like so:\n```typst\n#underline(stroke: stroke(dash: (1pt, 2pt)))[#lorem(10)]\n```\n\nBut there is no obvious way to define a custom stroke that also uses the font-derived thickness, i.e. something along the lines of\n\n```typst\n#underline(\n  stroke: stroke(\n    dash: (default-thickness, 0.7 * default-thickness),\n  ),\n)[#lorem(10)]\n```\n\nIs there any existing method to achieve this? Or would this rather be a feature request?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 467.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 750
    },
    {
      "id": 9183,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-28T11:22:29.263Z",
      "updated_at": "2025-02-28T11:22:29.263Z",
      "cooked": "<p>I’m unsure what you mean by “thickness”, but if you want to make the spacing be relative to the current font size you should use <a href=\"https://typst.app/docs/reference/layout/length/\">“em” length units</a> instead of “pt”.</p>\n<p>So something like</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#underline(stroke: stroke(\n  thickness: 0.1em,\n  dash: (1em, 0.7em)\n),)[#lorem(10)]\n</code></pre>\n<p>If you mean relative to font weight instead of font size, it’d probably be easiest to  do with a <a href=\"https://typst.app/docs/reference/context/\">context</a> expression</p>",
      "raw": "I'm unsure what you mean by \"thickness\", but if you want to make the spacing be relative to the current font size you should use [\"em\" length units](https://typst.app/docs/reference/layout/length/) instead of \"pt\".\n\nSo something like\n```typst\n#underline(stroke: stroke(\n  thickness: 0.1em,\n  dash: (1em, 0.7em)\n),)[#lorem(10)]\n```\n\nIf you mean relative to font weight instead of font size, it'd probably be easiest to  do with a [context](https://typst.app/docs/reference/context/) expression",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 12.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9184,
      "post_number": 3,
      "username": "wisperwind",
      "name": "",
      "created_at": "2025-02-28T11:39:16.838Z",
      "updated_at": "2025-02-28T11:39:16.838Z",
      "cooked": "<p>What I refer to by thickness is really just that: The default value for <a href=\"https://typst.app/docs/reference/visualize/stroke/#constructor-thickness\"><code>stroke.thickness</code></a> that <a href=\"https://github.com/typst/typst/blob/cfb3b1a2709107f0f06f89ea25cabc939cec15e5/crates/typst-library/src/visualize/stroke.rs#L504\" rel=\"noopener nofollow ugc\">Typst will choose</a> when using, say, <code>stroke(dash: \"loosely-dotted\")</code>.</p>\n<p>So, in other words, what I’m asking is the default value for <code>stroke.thickness</code> in the context of an <code>underline</code>. Maybe, that’s just a documentation issue (if it turns out to be something like <code>0.1em</code> as you suggest). But if it’s somehow derived differently from other font metrics, I’d be curious if and how the default value can be obtained in code.</p>",
      "raw": "What I refer to by thickness is really just that: The default value for [`stroke.thickness`](https://typst.app/docs/reference/visualize/stroke/#constructor-thickness) that [Typst will choose](https://github.com/typst/typst/blob/cfb3b1a2709107f0f06f89ea25cabc939cec15e5/crates/typst-library/src/visualize/stroke.rs#L504) when using, say, `stroke(dash: \"loosely-dotted\")`.\n\nSo, in other words, what I'm asking is the default value for `stroke.thickness` in the context of an `underline`. Maybe, that's just a documentation issue (if it turns out to be something like `0.1em` as you suggest). But if it's somehow derived differently from other font metrics, I'd be curious if and how the default value can be obtained in code.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 11.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 750
    },
    {
      "id": 9186,
      "post_number": 4,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-28T12:02:54.507Z",
      "updated_at": "2025-02-28T12:02:54.507Z",
      "cooked": "<p>Your second link points to the definition of the dash pattern, which doesn’t adjust the thickness. All it does is adjust the length and spacing of the underlined dashes.</p>\n<p>From the first link, it states that the thickness is derived as follows: “If set to <code>auto</code>, the value is inherited, defaulting to <code>1pt</code>.”</p>",
      "raw": "Your second link points to the definition of the dash pattern, which doesn't adjust the thickness. All it does is adjust the length and spacing of the underlined dashes.\n\nFrom the first link, it states that the thickness is derived as follows: \"If set to `auto`, the value is inherited, defaulting to `1pt`.\"",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 11.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9187,
      "post_number": 5,
      "username": "wisperwind",
      "name": "",
      "created_at": "2025-02-28T12:12:49.519Z",
      "updated_at": "2025-02-28T12:12:49.519Z",
      "cooked": "<p>Sorry, it seems that I haven’t described sufficiently precise what my goal is:</p>\n<p>For underlines, the default is different, namely <a href=\"https://typst.app/docs/reference/text/underline/#parameters-stroke\">it is based on the font</a>, not simply 1pt. This becomes obvious when changing font size: The line thickness will scale as well in this situation.</p>\n<p>You’re right that the dash pattern is in principle independent of stroke thickness. However, as the link to the Typst source code shows, it is in fact based on the thickness for dotted patterns (by setting dash length = thickness to obtain dots).</p>\n<p>What I want to achieve is</p>\n<ul>\n<li>keep the default thickness of the underline, which depends on the font in some undocumented way</li>\n<li>have a dash pattern with dots, i.e. set the first element of the pattern array to the same value as the thickness</li>\n<li>adjust the dot spacing, i.e. the second value of the pattern array, to be different from both the <code>dotted</code>, <code>loosely-dotted</code> and <code>densely-dotted</code> defaults (because I don’t like their looks)</li>\n</ul>",
      "raw": "Sorry, it seems that I haven't described sufficiently precise what my goal is:\n\nFor underlines, the default is different, namely [it is based on the font](https://typst.app/docs/reference/text/underline/#parameters-stroke), not simply 1pt. This becomes obvious when changing font size: The line thickness will scale as well in this situation.\n\nYou're right that the dash pattern is in principle independent of stroke thickness. However, as the link to the Typst source code shows, it is in fact based on the thickness for dotted patterns (by setting dash length = thickness to obtain dots).\n\nWhat I want to achieve is\n- keep the default thickness of the underline, which depends on the font in some undocumented way\n- have a dash pattern with dots, i.e. set the first element of the pattern array to the same value as the thickness\n- adjust the dot spacing, i.e. the second value of the pattern array, to be different from both the `dotted`, `loosely-dotted` and `densely-dotted` defaults (because I don't like their looks)",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 11.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 750
    },
    {
      "id": 9191,
      "post_number": 6,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-28T13:25:00.647Z",
      "updated_at": "2025-02-28T13:25:00.647Z",
      "cooked": "<p>Ah I understand now, sorry for the confusion.</p>\n<p>Indeed if you pass a troke to the underline function, the thickness default is based on the font thickness, or <a href=\"https://github.com/typst/typst/blob/cfb3b1a2709107f0f06f89ea25cabc939cec15e5/crates/typst-library/src/text/font/mod.rs#L244\" rel=\"noopener nofollow ugc\">defaulted to 0.06em</a>.</p>\n<p>Because this value is based on the actual font you are using (i.e. some fonts will set it to different values), the pt/em value is not exposed through typst.</p>\n<p>You can, however, use <a href=\"https://typst.app/docs/reference/visualize/stroke/#constructor-dash\">the string “dot” for a length equal to the line thickness</a> in stroke, so something like this would work:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#underline(stroke: stroke(\n  // works\n  dash: (\"dot\", 7pt)\n),)[#lorem(10)]\n</code></pre>\n<p>Downside with this is that you can’t set it to 0.7 times the thickness, so this wouldn’t work</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#underline(stroke: stroke(\n  // does not work\n  dash: (\"dot\",  0.7 * \"dot\")\n),)[#lorem(10)]\n</code></pre>\n<p>It seems the best way to achieve “relative thickness” would be through trial and error, or by <a href=\"https://fontdrop.info/\" rel=\"noopener nofollow ugc\">exploring the .otf</a> themselves. Maybe somebody else knows a better solution.</p>",
      "raw": "Ah I understand now, sorry for the confusion.\n\nIndeed if you pass a troke to the underline function, the thickness default is based on the font thickness, or [defaulted to 0.06em](https://github.com/typst/typst/blob/cfb3b1a2709107f0f06f89ea25cabc939cec15e5/crates/typst-library/src/text/font/mod.rs#L244). \n\nBecause this value is based on the actual font you are using (i.e. some fonts will set it to different values), the pt/em value is not exposed through typst.\n\nYou can, however, use [the string \"dot\" for a length equal to the line thickness](https://typst.app/docs/reference/visualize/stroke/#constructor-dash) in stroke, so something like this would work:\n```typst\n#underline(stroke: stroke(\n  // works\n  dash: (\"dot\", 7pt)\n),)[#lorem(10)]\n```\n\nDownside with this is that you can't set it to 0.7 times the thickness, so this wouldn't work\n```typst\n#underline(stroke: stroke(\n  // does not work\n  dash: (\"dot\",  0.7 * \"dot\")\n),)[#lorem(10)]\n```\n\nIt seems the best way to achieve \"relative thickness\" would be through trial and error, or by [exploring the .otf](https://fontdrop.info/) themselves. Maybe somebody else knows a better solution.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 51.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9210,
      "post_number": 7,
      "username": "wisperwind",
      "name": "",
      "created_at": "2025-02-28T17:37:21.887Z",
      "updated_at": "2025-02-28T17:37:21.887Z",
      "cooked": "<p>Nice, thanks, this is actually very helpful already: I’m pretty happy with <code>dash: (\"dot\", \"dot\")</code> in this case, which is even denser than <code>densely-dotted</code> for the font in question.</p>\n<p>I completely missed the info on <code>\"dot\"</code> when reading the documentation. I’ll probably open a GitHub issue, asking to amend the docs slightly: I feel like it would be helpful if the actual values for the shorthands would be specified. (e.g. <code>densely-dotted</code> is <code>(\"dot\", 1pt)</code> but if I wanted to slightly tweak that, I currently need to first read the Typst source to figure out what <code>densely-dotted</code> corresponds to.)</p>",
      "raw": "Nice, thanks, this is actually very helpful already: I'm pretty happy with `dash: (\"dot\", \"dot\")` in this case, which is even denser than `densely-dotted` for the font in question.\n\nI completely missed the info on `\"dot\"` when reading the documentation. I'll probably open a GitHub issue, asking to amend the docs slightly: I feel like it would be helpful if the actual values for the shorthands would be specified. (e.g. `densely-dotted` is `(\"dot\", 1pt)` but if I wanted to slightly tweak that, I currently need to first read the Typst source to figure out what `densely-dotted` corresponds to.)",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 10.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 750
    },
    {
      "id": 9213,
      "post_number": 8,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-28T18:23:26.416Z",
      "updated_at": "2025-02-28T18:23:26.416Z",
      "cooked": "<p>No problem. I agree that the docs could do with some improvement, and it would also be nice if instead of <code>\"dot\"</code> we had something concrete like <code>underline.thickness</code> which we could use <code>set</code> rules on, and that we could e.g. multiply (it wouldn’t quite work like this because of the way stroke is implemented, but still). Of course, this would be a separate issue</p>",
      "raw": "No problem. I agree that the docs could do with some improvement, and it would also be nice if instead of `\"dot\"` we had something concrete like `underline.thickness` which we could use `set` rules on, and that we could e.g. multiply (it wouldn't quite work like this because of the way stroke is implemented, but still). Of course, this would be a separate issue",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9413,
      "post_number": 9,
      "username": "wisperwind",
      "name": "",
      "created_at": "2025-03-05T13:32:35.838Z",
      "updated_at": "2025-03-05T13:32:35.838Z",
      "cooked": "<p>see <a href=\"https://github.com/typst/typst/issues/5982\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">`stroke` documentation does not provide definitions for dash pattern shorthands · Issue #5982 · typst/typst · GitHub</a></p>",
      "raw": "see https://github.com/typst/typst/issues/5982",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 8.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 750
    }
  ],
  "scraped_at": "2025-06-10T09:51:00.388739"
}
{
  "topic_metadata": {
    "id": 3044,
    "title": "Is it possible to force inline math block to align vertically with equal sign",
    "slug": "is-it-possible-to-force-inline-math-block-to-align-vertically-with-equal-sign",
    "posts_count": 3,
    "created_at": "2025-02-28T10:55:46.702Z",
    "last_posted_at": "2025-02-28T12:30:30.329Z",
    "views": 56,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "aarnent",
    "tags": [
      "math",
      "latex-migration"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 209
  },
  "posts": [
    {
      "id": 9180,
      "post_number": 1,
      "username": "louveta",
      "name": "louveta",
      "created_at": "2025-02-28T10:55:46.819Z",
      "updated_at": "2025-02-28T11:03:49.319Z",
      "cooked": "<p>Hi,</p>\n<p>I have a math equation that contains a fraction with uneven height in the numerator and denominator:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$forall F in cal(F), y_(t+1)(F) = y_(t)(F)(1+ eta |chi_t (F)|)$ where $eta = (sqrt(ln(m)))/(n sqrt((ln(m n log(n) / 4)))log(m)log(n))$\n</code></pre>\n<p>This results in a line where the fraction floats above the line:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/26df9c2abc09608acce140357e9a95eb0221ce43.png\" data-download-href=\"https://forum.typst.app/uploads/default/26df9c2abc09608acce140357e9a95eb0221ce43\" title=\"2025-02-28-114536_hyprshot\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/26df9c2abc09608acce140357e9a95eb0221ce43_2_690x66.png\" alt=\"2025-02-28-114536_hyprshot\" data-base62-sha1=\"5xTe1k0QFaKlTaPw8DkGt3WRfxN\" width=\"690\" height=\"66\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/26df9c2abc09608acce140357e9a95eb0221ce43_2_690x66.png, https://forum.typst.app/uploads/default/optimized/2X/2/26df9c2abc09608acce140357e9a95eb0221ce43_2_1035x99.png 1.5x, https://forum.typst.app/uploads/default/original/2X/2/26df9c2abc09608acce140357e9a95eb0221ce43.png 2x\" data-dominant-color=\"F0F0F0\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">2025-02-28-114536_hyprshot</span><span class=\"informations\">1164×112 22 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Is it possible to align the fraction part with the rest of the line as would happen in latex:</p>\n<pre><code class=\"lang-auto\">$\\forall F \\in \\mathcal{F}, y_{t+1}(F) = y_{t}(F)(1+ \\eta |\\chi_t (F)|)$ where $\\eta = \\frac{\\sqrt{\\ln(m)}}{n \\sqrt{\\ln(m n \\frac{\\log(n)}{4})}\\log(m)\\log(n)}$\n</code></pre>\n<p>would produce:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/8/82fc2a22dfded17ea9f9cbe7dafbd469da375b3d.png\" data-download-href=\"https://forum.typst.app/uploads/default/82fc2a22dfded17ea9f9cbe7dafbd469da375b3d\" title=\"2025-02-28-120302_hyprshot\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/8/82fc2a22dfded17ea9f9cbe7dafbd469da375b3d_2_690x60.png\" alt=\"2025-02-28-120302_hyprshot\" data-base62-sha1=\"iGKkxyCTukA9Aiml5pnNUaszioZ\" width=\"690\" height=\"60\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/8/82fc2a22dfded17ea9f9cbe7dafbd469da375b3d_2_690x60.png, https://forum.typst.app/uploads/default/optimized/2X/8/82fc2a22dfded17ea9f9cbe7dafbd469da375b3d_2_1035x90.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/8/82fc2a22dfded17ea9f9cbe7dafbd469da375b3d_2_1380x120.png 2x\" data-dominant-color=\"F0F0F0\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">2025-02-28-120302_hyprshot</span><span class=\"informations\">1559×137 27.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hi,\n\nI have a math equation that contains a fraction with uneven height in the numerator and denominator:\n\n```typ\n$forall F in cal(F), y_(t+1)(F) = y_(t)(F)(1+ eta |chi_t (F)|)$ where $eta = (sqrt(ln(m)))/(n sqrt((ln(m n log(n) / 4)))log(m)log(n))$\n```\n\nThis results in a line where the fraction floats above the line:\n\n![2025-02-28-114536_hyprshot|690x66](upload://5xTe1k0QFaKlTaPw8DkGt3WRfxN.png)\n\nIs it possible to align the fraction part with the rest of the line as would happen in latex:\n\n```\n$\\forall F \\in \\mathcal{F}, y_{t+1}(F) = y_{t}(F)(1+ \\eta |\\chi_t (F)|)$ where $\\eta = \\frac{\\sqrt{\\ln(m)}}{n \\sqrt{\\ln(m n \\frac{\\log(n)}{4})}\\log(m)\\log(n)}$\n```\n\nwould produce:\n\n![2025-02-28-120302_hyprshot|690x60](upload://iGKkxyCTukA9Aiml5pnNUaszioZ.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 125.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1281
    },
    {
      "id": 9182,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-28T11:06:12.204Z",
      "updated_at": "2025-02-28T11:06:12.204Z",
      "cooked": "<p>Hi and welcome to the forum!</p>\n<p>I’m unable to reproduce the behavior, the provided code snippet seems to align as intended in typst:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/b/b00d680cc7f241e4810444843c79a7a8754e5e8e.png\" alt=\"image\" data-base62-sha1=\"p7qKZEFEP5ogzfpKLkLHxADZ1YW\" width=\"398\" height=\"46\"></p>\n<p>Unless I misunderstood the question?</p>",
      "raw": "Hi and welcome to the forum!\n\nI'm unable to reproduce the behavior, the provided code snippet seems to align as intended in typst:\n\n![image|398x46](upload://p7qKZEFEP5ogzfpKLkLHxADZ1YW.png)\n\nUnless I misunderstood the question?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 15.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9189,
      "post_number": 3,
      "username": "louveta",
      "name": "louveta",
      "created_at": "2025-02-28T12:30:30.329Z",
      "updated_at": "2025-02-28T12:30:30.329Z",
      "cooked": "<p>Hi, thanks for your answer.</p>\n<p>You’re right the default behavior is what I wanted, this was due to an interaction with the template I use for this document and I forgot to test this in a clean environment.</p>",
      "raw": "Hi, thanks for your answer.\n\nYou're right the default behavior is what I wanted, this was due to an interaction with the template I use for this document and I forgot to test this in a clean environment.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 23,
      "score": 34.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1281
    }
  ],
  "scraped_at": "2025-06-10T09:50:59.671255"
}
{
  "topic_metadata": {
    "id": 3045,
    "title": "Does Typst Support Auto-Scaling Text to Fit a Box?",
    "slug": "does-typst-support-auto-scaling-text-to-fit-a-box",
    "posts_count": 2,
    "created_at": "2025-02-28T12:58:01.212Z",
    "last_posted_at": "2025-02-28T14:52:54.201Z",
    "views": 149,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Philipp",
    "tags": [
      "latex-migration"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 301
  },
  "posts": [
    {
      "id": 9190,
      "post_number": 1,
      "username": "Rama_Prakasha",
      "name": "Rama Prakasha",
      "created_at": "2025-02-28T12:58:01.290Z",
      "updated_at": "2025-03-07T21:41:28.947Z",
      "cooked": "<p>I’m working on a project where I need to fit variable-length text (e.g., addresses, labels, or descriptions) into fixed-size boxes within a grid layout. For example, I’m using boxes of a specific width and height (say, 8cm × 4.29cm) in a multi-column, multi-row setup on a custom page size. The text content varies widely in length, and I’ve been manually tweaking the font size (e.g., set text(size: 10pt)) and line spacing (set par(leading: 0.4em)) to avoid overflow or excessive empty space.</p>\n<p>In tools like LaTeX, packages such as tcolorbox with \\tcboxfit can automatically scale text to fit a box’s dimensions. Does Typst have a built-in feature or a recommended approach for auto-scaling text to fit a predefined box size? Ideally, I’d love a way to ensure the text dynamically adjusts-shrinking when it’s too long or enlarging when it’s too short- while staying legible and respecting the box boundaries.</p>\n<p>If this isn’t natively supported, has anyone implemented a workaround (e.g., via scripting or preprocessing)? I’d appreciate any tips, code examples, or pointers to relevant documentation. This could be super helpful for layouts like labels, cards, or any design with fixed containers and dynamic content.</p>\n<p>Thanks in advance!</p>",
      "raw": "I’m working on a project where I need to fit variable-length text (e.g., addresses, labels, or descriptions) into fixed-size boxes within a grid layout. For example, I’m using boxes of a specific width and height (say, 8cm × 4.29cm) in a multi-column, multi-row setup on a custom page size. The text content varies widely in length, and I’ve been manually tweaking the font size (e.g., set text(size: 10pt)) and line spacing (set par(leading: 0.4em)) to avoid overflow or excessive empty space.\n\nIn tools like LaTeX, packages such as tcolorbox with \\tcboxfit can automatically scale text to fit a box’s dimensions. Does Typst have a built-in feature or a recommended approach for auto-scaling text to fit a predefined box size? Ideally, I’d love a way to ensure the text dynamically adjusts-shrinking when it’s too long or enlarging when it’s too short- while staying legible and respecting the box boundaries.\n\nIf this isn’t natively supported, has anyone implemented a workaround (e.g., via scripting or preprocessing)? I’d appreciate any tips, code examples, or pointers to relevant documentation. This could be super helpful for layouts like labels, cards, or any design with fixed containers and dynamic content.\n\nThanks in advance!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 491.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1115
    },
    {
      "id": 9193,
      "post_number": 2,
      "username": "Philipp",
      "name": "Philipp",
      "created_at": "2025-02-28T14:52:54.201Z",
      "updated_at": "2025-02-28T14:52:54.201Z",
      "cooked": "<p>The question has come up before, and here is the answer:<br>\n<a href=\"https://forum.typst.app/t/how-to-auto-size-text-and-images/1290/3\"><strong>How to auto-size text and images</strong></a></p>\n<p>If you want your text to stay on a single line, there is the <a href=\"https://typst.app/universe/package/one-liner\"><strong>one-liner</strong></a> package:</p>\n<blockquote>\n<p>One-liner is a package containing a helper function to fit text to the available width, without wrapping, by adjusting the text size based upon the context.</p>\n</blockquote>",
      "raw": "The question has come up before, and here is the answer:  \n[**How to auto-size text and images**](https://forum.typst.app/t/how-to-auto-size-text-and-images/1290/3)\n\nIf you want your text to stay on a single line, there is the [**one-liner**](https://typst.app/universe/package/one-liner) package:\n> One-liner is a package containing a helper function to fit text to the available width, without wrapping, by adjusting the text size based upon the context.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 41.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 798
    }
  ],
  "scraped_at": "2025-06-10T09:50:58.959717"
}
{
  "topic_metadata": {
    "id": 3047,
    "title": "How can I remove the numbering from some outline entries?",
    "slug": "how-can-i-remove-the-numbering-from-some-outline-entries",
    "posts_count": 10,
    "created_at": "2025-02-28T15:15:11.971Z",
    "last_posted_at": "2025-03-06T13:02:47.832Z",
    "views": 440,
    "like_count": 8,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 10,
    "accepted_answer_username": "ma77hiaz",
    "tags": [
      "outline",
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 831
  },
  "posts": [
    {
      "id": 9195,
      "post_number": 1,
      "username": "ma77hiaz",
      "name": "Matthias Hersche",
      "created_at": "2025-02-28T15:15:12.165Z",
      "updated_at": "2025-03-09T14:30:16.154Z",
      "cooked": "<p>I am writing a documentation and I have specific requirements regarding the numbering.</p>\n<p>In the beginning, I have headings, which must not have a number, therefore I created a tag <code>&lt;unnumbered&gt;</code> and this code:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">  show heading.where(label: &lt;unnumbered&gt;): it =&gt; {\n    // Disable numbering for this heading\n    set heading(numbering: none)\n    block(\n      inset: (left: 0pt),\n      it.body,\n    )\n    // Decrease the heading counter after this unnumbered heading to prevent increment\n    counter(heading).update(n =&gt; n - 1)\n  }\n</code></pre>\n<p>I appended the label <code>&lt;unnumbered&gt;</code> to the heading “Abstract”, “Management Summary”, “Problem Statement” and “Part I - Technical Report”.</p>\n<p>Now my outline looks like this:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/f2fb1a0e763082ddc30660456701f43c0a1149df.png\" data-download-href=\"https://forum.typst.app/uploads/default/f2fb1a0e763082ddc30660456701f43c0a1149df\" title=\"Screenshot 2025-02-28 at 3.59.24 PM\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/f2fb1a0e763082ddc30660456701f43c0a1149df_2_690x283.png\" alt=\"Screenshot 2025-02-28 at 3.59.24 PM\" data-base62-sha1=\"yFvwUVnDpUqlKINCSuNSOoFjT6n\" width=\"690\" height=\"283\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/f2fb1a0e763082ddc30660456701f43c0a1149df_2_690x283.png, https://forum.typst.app/uploads/default/original/2X/f/f2fb1a0e763082ddc30660456701f43c0a1149df.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/f2fb1a0e763082ddc30660456701f43c0a1149df.png 2x\" data-dominant-color=\"F1F1F1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-02-28 at 3.59.24 PM</span><span class=\"informations\">898×369 45 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>This is the way I want it, generally. The numbering starts on the chapter “Introduction”</p>\n<p>But:<br>\nI want to hide the numbers of all of the outline entries that have the label <code>&lt;unnumbered&gt;</code> because they also don’t show a number in the document.<br>\nHow do I do that?</p>\n<p>I thought I could do it with something like this, but it didn’t work:<br>\n<code>#show outline.entry.where(label: &lt;unnumbered&gt;): // some code to remove numbers in outline</code></p>",
      "raw": "I am writing a documentation and I have specific requirements regarding the numbering.\n\nIn the beginning, I have headings, which must not have a number, therefore I created a tag `<unnumbered>` and this code:\n\n```typc\n  show heading.where(label: <unnumbered>): it => {\n    // Disable numbering for this heading\n    set heading(numbering: none)\n    block(\n      inset: (left: 0pt),\n      it.body,\n    )\n    // Decrease the heading counter after this unnumbered heading to prevent increment\n    counter(heading).update(n => n - 1)\n  }\n```\nI appended the label `<unnumbered>` to the heading \"Abstract\", \"Management Summary\", \"Problem Statement\" and \"Part I - Technical Report\".\n\nNow my outline looks like this:\n![Screenshot 2025-02-28 at 3.59.24 PM|690x283](upload://yFvwUVnDpUqlKINCSuNSOoFjT6n.png)\n\nThis is the way I want it, generally. The numbering starts on the chapter \"Introduction\"\n\nBut:\nI want to hide the numbers of all of the outline entries that have the label `<unnumbered>` because they also don't show a number in the document.\nHow do I do that?\n\nI thought I could do it with something like this, but it didn't work:\n`#show outline.entry.where(label: <unnumbered>): // some code to remove numbers in outline`",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 1964.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1282
    },
    {
      "id": 9196,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-28T15:37:19.144Z",
      "updated_at": "2025-02-28T15:37:19.144Z",
      "cooked": "<p>you could do something like this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show outline.entry: it =&gt; {\n  let no-nums = query(label(\"unnumbered\"))\n  if it.element in no-nums {\n    // style this as you wish\n    return [#it.body() #box(width: 1fr, repeat(gap: 0.15em)[.]) #it.page() \\ ]\n  }\n  it\n}\n</code></pre>",
      "raw": "you could do something like this:\n\n```typst\n#show outline.entry: it => {\n  let no-nums = query(label(\"unnumbered\"))\n  if it.element in no-nums {\n    // style this as you wish\n    return [#it.body() #box(width: 1fr, repeat(gap: 0.15em)[.]) #it.page() \\ ]\n  }\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 43.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9197,
      "post_number": 3,
      "username": "ma77hiaz",
      "name": "Matthias Hersche",
      "created_at": "2025-02-28T15:45:52.243Z",
      "updated_at": "2025-03-09T14:30:25.803Z",
      "cooked": "<p>Wow, this was quick! Thank you so much, it worked <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Just because I’m curious: Do you know why an approach like this doesn’t work:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry.where(label: &lt;unnumbered&gt;):\n</code></pre>\n<p>It seems like it’s not even able to select the outline entries with that label…</p>",
      "raw": "Wow, this was quick! Thank you so much, it worked :smiley: \n\nJust because I'm curious: Do you know why an approach like this doesn't work:\n```typ\n#show outline.entry.where(label: <unnumbered>):\n```\n\nIt seems like it's not even able to select the outline entries with that label...",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 18.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1282
    },
    {
      "id": 9200,
      "post_number": 4,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-28T16:21:11.664Z",
      "updated_at": "2025-02-28T16:21:11.664Z",
      "cooked": "<p>No problem! The reason why <code>#show outline.entry.where(label: &lt;unnumbered&gt;): {...}</code> doesn’t work is because <code>where</code> <a href=\"https://typst.app/docs/reference/foundations/function/#definitions-where\">filters for elements belonging to this function whose fields have the values of the given arguments</a>. As a <code>label</code> is it’s own type (i.e., you can’t do <code>#heading(\"my heading\", label: &lt;unnumbered&gt;)</code>), the show rule would not apply to any elements</p>",
      "raw": "No problem! The reason why `#show outline.entry.where(label: <unnumbered>): {...}` doesn't work is because `where` [filters for elements belonging to this function whose fields have the values of the given arguments](https://typst.app/docs/reference/foundations/function/#definitions-where). As a `label` is it's own type (i.e., you can't do `#heading(\"my heading\", label: <unnumbered>)`), the show rule would not apply to any elements",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 28.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9201,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-28T16:34:49.751Z",
      "updated_at": "2025-02-28T16:43:51.844Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/ma77hiaz\">@ma77hiaz</a>, welcome to our forum! I have edited the title of your question to follow our <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">guidelines</a>.</p>\n<p>I guess the headings themselves should have no numbering, I mean not only in the outline but also in the main text? For this you can make the headings by writing</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#heading(numbering:none, level: 1)[My Heading]\n</code></pre>\n<p>or if you prefer to use the markup syntax (<code>=</code>) for making the heading: you can do it in a <code>#[...]</code> scope with different settings than other headings:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#[\n  #set heading(numbering: none)\n  = My Heading\n]\n</code></pre>",
      "raw": "Hi @ma77hiaz, welcome to our forum! I have edited the title of your question to follow our [guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11).\n\nI guess the headings themselves should have no numbering, I mean not only in the outline but also in the main text? For this you can make the headings by writing\n\n```typ\n#heading(numbering:none, level: 1)[My Heading]\n```\n\nor if you prefer to use the markup syntax (`=`) for making the heading: you can do it in a `#[...]` scope with different settings than other headings:\n\n```typ\n#[\n  #set heading(numbering: none)\n  = My Heading\n]\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 39,
      "score": 67.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9203,
      "post_number": 6,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-28T16:43:30.492Z",
      "updated_at": "2025-02-28T16:45:58.572Z",
      "cooked": "<p>I’d rather say the problem is that the label is a field of the <code>heading</code> element, not the <code>outline.entry</code> element. For example to automatically remove the numbering from headings that have the label <code>&lt;unnumbered&gt;</code> (and that received a numbering from another set rule) you can do</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(label: &lt;unnumbered&gt;): set heading(numbering: none)\n</code></pre>\n<p>and in your solution, you can simplify the code a bit by accessing this label field:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; {\n  if it.element.at(\"label\", default: none) == &lt;unnumbered&gt; {\n    // style this as you wish\n    return [#it.body() #box(width: 1fr, repeat(gap: 0.15em)[.]) #it.page() \\ ]\n  }\n  it\n}\n</code></pre>\n<p>Something that indeed doesn’t work is to try setting the <code>numbering</code> in a show-it rule:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(label: &lt;unnumbered&gt;): it =&gt; {\n  set heading(numbering: none)\n  it\n}\n</code></pre>\n<p>Here’s it’s too late to change it like that since the <code>it</code> element is already materialized.</p>",
      "raw": "I'd rather say the problem is that the label is a field of the `heading` element, not the `outline.entry` element. For example to automatically remove the numbering from headings that have the label `<unnumbered>` (and that received a numbering from another set rule) you can do\n\n```typ\n#show heading.where(label: <unnumbered>): set heading(numbering: none)\n```\n\nand in your solution, you can simplify the code a bit by accessing this label field:\n\n```typ\n#show outline.entry: it => {\n  if it.element.at(\"label\", default: none) == <unnumbered> {\n    // style this as you wish\n    return [#it.body() #box(width: 1fr, repeat(gap: 0.15em)[.]) #it.page() \\ ]\n  }\n  it\n}\n```\n\nSomething that indeed doesn't work is to try setting the `numbering` in a show-it rule:\n\n```typ\n#show heading.where(label: <unnumbered>): it => {\n  set heading(numbering: none)\n  it\n}\n```\n\nHere's it's too late to change it like that since the `it` element is already materialized.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 37,
      "score": 47.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9204,
      "post_number": 7,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-28T16:49:42.632Z",
      "updated_at": "2025-02-28T16:51:35.266Z",
      "cooked": "<p>And to add to <a class=\"mention\" href=\"/u/sijo\">@sijo</a>’s answer you can also just set a numbering after all the unnumbered parts of the document.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#outline()\n\n= Unnumbered Heading\n\n#set heading(numbering: \"1.1\")\n\n= Numbered Heading\n</code></pre>\n<p>IMO the solution with labels seem a bit overengineered/unnecessarily complicated.</p>",
      "raw": "And to add to @sijo's answer you can also just set a numbering after all the unnumbered parts of the document.\n\n```typ\n#outline()\n\n= Unnumbered Heading\n\n#set heading(numbering: \"1.1\")\n\n= Numbered Heading\n```\nIMO the solution with labels seem a bit overengineered/unnecessarily complicated.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 32,
      "score": 41.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9431,
      "post_number": 8,
      "username": "ma77hiaz",
      "name": "Matthias Hersche",
      "created_at": "2025-03-06T08:01:12.945Z",
      "updated_at": "2025-03-06T08:01:12.945Z",
      "cooked": "<p>Thank you guys for all the explanation and suggestions, really appreciate it!</p>\n<p><a class=\"mention\" href=\"/u/sijo\">@sijo</a> , that’s an elegant solution, thanks!</p>\n<p><a class=\"mention\" href=\"/u/flokl\">@flokl</a> , I actually do need to have it the complicated way, because throughout the document I do have outline entries that need to be unnumbered. It’s basically “Sections” of the document which can’t have a number.</p>",
      "raw": "Thank you guys for all the explanation and suggestions, really appreciate it!\n\n@sijo , that's an elegant solution, thanks!\n\n@flokl , I actually do need to have it the complicated way, because throughout the document I do have outline entries that need to be unnumbered. It's basically \"Sections\" of the document which can't have a number.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 10.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1282
    },
    {
      "id": 9432,
      "post_number": 9,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2025-03-06T08:25:53.253Z",
      "updated_at": "2025-03-06T08:25:53.253Z",
      "cooked": "<p>As a final addendum to this pretty spot on analysis: It would be better to wrap the entry’s contents in a block rather than using a linebreak. That’s how the outline itself does it and it (a) keeps block spacing rules working, (b) means the entry is correctly identified as not a paragraph.</p>\n<p>Also <code>it.inner()</code> can be used to get ready-made contents with the body, filler, and page.</p>\n<p>So the total thing would be <code>block(it.inner())</code>.</p>",
      "raw": "As a final addendum to this pretty spot on analysis: It would be better to wrap the entry's contents in a block rather than using a linebreak. That's how the outline itself does it and it (a) keeps block spacing rules working, (b) means the entry is correctly identified as not a paragraph.\n\nAlso `it.inner()` can be used to get ready-made contents with the body, filler, and page.\n\nSo the total thing would be `block(it.inner())`.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 28,
      "score": 20.6,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 9440,
      "post_number": 10,
      "username": "ma77hiaz",
      "name": "Matthias Hersche",
      "created_at": "2025-03-06T13:02:47.832Z",
      "updated_at": "2025-03-09T14:30:38.416Z",
      "cooked": "<p>Wow, I’m blown away by the activity and the quality of the answers in this forum!</p>\n<p>So to summarize everything, the correct solution will look like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; {\n  if it.element.at(\"label\", default: none) == &lt;unnumbered&gt; {\n    return block(it.inner())\n  }\n  it\n}\n</code></pre>",
      "raw": "Wow, I'm blown away by the activity and the quality of the answers in this forum!\n\nSo to summarize everything, the correct solution will look like this:\n```typ\n#show outline.entry: it => {\n  if it.element.at(\"label\", default: none) == <unnumbered> {\n    return block(it.inner())\n  }\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 27,
      "score": 90.4,
      "accepted_answer": true,
      "trust_level": 0,
      "user_id": 1282
    }
  ],
  "scraped_at": "2025-06-10T09:50:58.248926"
}
{
  "topic_metadata": {
    "id": 3050,
    "title": "How can I set \"Keep with next\" for headings?",
    "slug": "how-can-i-set-keep-with-next-for-headings",
    "posts_count": 4,
    "created_at": "2025-02-28T17:02:10.236Z",
    "last_posted_at": "2025-02-28T20:57:28.168Z",
    "views": 130,
    "like_count": 6,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 454
  },
  "posts": [
    {
      "id": 9205,
      "post_number": 1,
      "username": "Mark_Hilton",
      "name": "Mark Hilton",
      "created_at": "2025-02-28T17:02:10.317Z",
      "updated_at": "2025-02-28T17:02:10.317Z",
      "cooked": "<p>Very new to Typst, but getting to grips with it. I do have a number of questions, but I’ll start with this.</p>\n<p>I have managed to set up my page the way I want and have 4 levels of headings. However, in a trial project (recipe book!) headings can get separated from the following paragraph by a page break.</p>\n<p>(As I’m new to the forum I can’t post a screenshot!)</p>\n<p>In word processor terms, I’d set all headings with “Keep with next” to avoid this. I have gone through all the documentation here on Typst, but can’t see an equivalent.</p>\n<p>Can someone please advise how it can be done, other than laboriously going through putting a page break before any heading where it happens?</p>\n<p>Thanks</p>",
      "raw": "Very new to Typst, but getting to grips with it. I do have a number of questions, but I'll start with this.\n\nI have managed to set up my page the way I want and have 4 levels of headings. However, in a trial project (recipe book!) headings can get separated from the following paragraph by a page break.\n\n(As I'm new to the forum I can't post a screenshot!)\n\nIn word processor terms, I'd set all headings with \"Keep with next\" to avoid this. I have gone through all the documentation here on Typst, but can't see an equivalent.\n\nCan someone please advise how it can be done, other than laboriously going through putting a page break before any heading where it happens?\n\nThanks",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 282.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1276
    },
    {
      "id": 9206,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-02-28T17:05:53.863Z",
      "updated_at": "2025-02-28T17:05:53.863Z",
      "cooked": "<p>Welcome to the forum <a class=\"mention\" href=\"/u/mark_hilton\">@Mark_Hilton</a>!</p>\n<p>What you request is the default behavior for headings. If you’re observing this behavior, it’s possible you used a faulty heading show rule which replaced the heading with its body (for example), perhaps in an attempt to customize the spacing from the heading number or some other reason. Make sure to wrap the heading show rule’s output in <code>block(sticky: true)[...]</code> to retain the orphan prevention behavior.</p>\n<p>If that doesn’t solve it, you could also be facing a bug, but let us know if that fixes it.</p>",
      "raw": "Welcome to the forum @Mark_Hilton!\n\nWhat you request is the default behavior for headings. If you're observing this behavior, it's possible you used a faulty heading show rule which replaced the heading with its body (for example), perhaps in an attempt to customize the spacing from the heading number or some other reason. Make sure to wrap the heading show rule's output in `block(sticky: true)[...]` to retain the orphan prevention behavior.\n\nIf that doesn't solve it, you could also be facing a bug, but let us know if that fixes it.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 36,
      "score": 42.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 9209,
      "post_number": 3,
      "username": "Mark_Hilton",
      "name": "Mark Hilton",
      "created_at": "2025-02-28T17:34:28.410Z",
      "updated_at": "2025-02-28T17:34:28.410Z",
      "cooked": "<p>Thank you so much. I’m not sure where the <code>block(sticky: true)</code> goes in the show rules for headings. You are right that I was customising the font sizes and it took me a long time to get it to work at all. What I had was:</p>\n<pre><code class=\"lang-auto\">#show heading.where(\n  level: 3\n): it =&gt;[\n  #set align(left)\n  #set text(16pt, weight: \"semibold\")\n  #(it.body)]\n</code></pre>\n<p>Changing it to:</p>\n<pre><code class=\"lang-auto\">#show heading.where(\n  level: 3\n): it =&gt;[\n  #set align(left)\n  #set text(16pt, weight: \"semibold\")\n  #block(it.body)]\n</code></pre>\n<p>seems to work to apply “Keep with next”, but I presume I have the <code>[</code> in the wrong place to add the <code>(sticky: true)</code>, even though I copied it from the “Advanced Styling” section of the tutorial.</p>",
      "raw": "Thank you so much. I'm not sure where the `block(sticky: true)` goes in the show rules for headings. You are right that I was customising the font sizes and it took me a long time to get it to work at all. What I had was:\n\n```\n#show heading.where(\n  level: 3\n): it =>[\n  #set align(left)\n  #set text(16pt, weight: \"semibold\")\n  #(it.body)]\n```\n\nChanging it to:\n\n```\n#show heading.where(\n  level: 3\n): it =>[\n  #set align(left)\n  #set text(16pt, weight: \"semibold\")\n  #block(it.body)]\n```\n\nseems to work to apply \"Keep with next\", but I presume I have the `[` in the wrong place to add the `(sticky: true)`, even though I copied it from the \"Advanced Styling\" section of the tutorial.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 37,
      "score": 32.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1276
    },
    {
      "id": 9227,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-02-28T20:57:28.168Z",
      "updated_at": "2025-02-28T20:57:52.410Z",
      "cooked": "<p>It’s true that simply adding a block will do it since headings have a set rule to set any blocks within them as sticky. But for future reference, you can just write <code>#block(sticky: true, it.body)</code> instead of just <code>#block(it.body)</code>, i.e. sticky is just a named parameter, whereas the body is a positional parameter.</p>\n<p>However, if all you want is to customize font sizes, I’d recommend writing the following instead of that show rule:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 3): set text(16pt, weight: \"semibold\")\n</code></pre>\n<p>(Addendum: You can write ```typ ``` to highlight your code as Typst syntax.)</p>\n<p>Glad you could solve it!</p>",
      "raw": "It's true that simply adding a block will do it since headings have a set rule to set any blocks within them as sticky. But for future reference, you can just write `#block(sticky: true, it.body)` instead of just `#block(it.body)`, i.e. sticky is just a named parameter, whereas the body is a positional parameter.\n\nHowever, if all you want is to customize font sizes, I'd recommend writing the following instead of that show rule:\n\n```typ\n#show heading.where(level: 3): set text(16pt, weight: \"semibold\")\n```\n\n(Addendum: You can write \\`\\`\\`typ \\`\\`\\` to highlight your code as Typst syntax.)\n\nGlad you could solve it!",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 33,
      "score": 91.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:50:57.512681"
}
{
  "topic_metadata": {
    "id": 3051,
    "title": "How do I display an array of a certain width(say eighteen 1's) in one line?",
    "slug": "how-do-i-display-an-array-of-a-certain-width-say-eighteen-1s-in-one-line",
    "posts_count": 3,
    "created_at": "2025-02-28T17:09:19.389Z",
    "last_posted_at": "2025-02-28T18:43:20.642Z",
    "views": 38,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 304
  },
  "posts": [
    {
      "id": 9207,
      "post_number": 1,
      "username": "feng",
      "name": "",
      "created_at": "2025-02-28T17:09:19.560Z",
      "updated_at": "2025-02-28T17:09:19.560Z",
      "cooked": "<p>Here are two arrays of numbers:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let a = (40,50,55,64,75,88,99,69,72,79,80,86,95)\n#a\n#let b = (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1)\n#b\n</code></pre>\n<p>Both can be dispayed in one line as expected, and the end of the array is still far from the right margin.<br>\nHowever, if you add one more dot/digit/number:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let a1 = (40,50,55,64,75,88,99,69,72,79,80,86,95.)\n#let a2 = (40,50,55,64,75,88,99,69,72,79,80,86,951)\n#let b1 = (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.)\n#let b2 = (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1)\n</code></pre>\n<p>the array will be displayed vertically, one number for each line.<br>\nIt seems that there’s a strict width limit for an array. I know I can display a long array in math mode and in some cases this feature makes reading easier. Just want to know if I can adjust the limit because it can be useful.</p>",
      "raw": "Here are two arrays of numbers:\n```typ\n#let a = (40,50,55,64,75,88,99,69,72,79,80,86,95)\n#a\n#let b = (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1)\n#b\n```\nBoth can be dispayed in one line as expected, and the end of the array is still far from the right margin. \nHowever, if you add one more dot/digit/number:\n```typ\n#let a1 = (40,50,55,64,75,88,99,69,72,79,80,86,95.)\n#let a2 = (40,50,55,64,75,88,99,69,72,79,80,86,951)\n#let b1 = (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.)\n#let b2 = (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1)\n```\nthe array will be displayed vertically, one number for each line.\nIt seems that there's a strict width limit for an array. I know I can display a long array in math mode and in some cases this feature makes reading easier. Just want to know if I can adjust the limit because it can be useful.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 108.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1283
    },
    {
      "id": 9208,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-28T17:31:36.072Z",
      "updated_at": "2025-02-28T17:34:24.022Z",
      "cooked": "<p>Your examples output the raw <code>array</code> type directly. You wouldn’t use this output for a final document directly, but rather during the documents/templates development for debugging.<br>\nTo display an array in a final document, I would do something like this.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let a = (40,50,55,64,75,88,99,69,72,79,80,86,95,66)\n(#a.map(str).join(\", \"))\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/e/e4d4145753e28db13fe960de06275c0dba8e446f.png\" alt=\"image\" data-base62-sha1=\"wEjeXXsAt4IeivXNLNUeN9hresn\" width=\"427\" height=\"46\"></p>\n<p>But to answer the question, there is no option to adjust the limit for the build in representation.</p>",
      "raw": "Your examples output the raw `array` type directly. You wouldn't use this output for a final document directly, but rather during the documents/templates development for debugging. \nTo display an array in a final document, I would do something like this. \n```typst\n#let a = (40,50,55,64,75,88,99,69,72,79,80,86,95,66)\n(#a.map(str).join(\", \"))\n```\n![image|427x46](upload://wEjeXXsAt4IeivXNLNUeN9hresn.png)\n\nBut to answer the question, there is no option to adjust the limit for the build in representation.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 16,
      "score": 43.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9226,
      "post_number": 4,
      "username": "feng",
      "name": "",
      "created_at": "2025-02-28T18:43:20.642Z",
      "updated_at": "2025-02-28T18:43:20.642Z",
      "cooked": "<p>Thank you so much! Looks like I’ve jumped some important parts in the tutorial <img src=\"https://forum.typst.app/images/emoji/apple/melting_face.png?v=12\" title=\":melting_face:\" class=\"emoji\" alt=\":melting_face:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Thank you so much! Looks like I’ve jumped some important parts in the tutorial :melting_face:",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1283
    }
  ],
  "scraped_at": "2025-06-10T09:50:56.813825"
}
{
  "topic_metadata": {
    "id": 3054,
    "title": "How to change heading numbering per level?",
    "slug": "how-to-change-heading-numbering-per-level",
    "posts_count": 3,
    "created_at": "2025-02-28T21:08:54.531Z",
    "last_posted_at": "2025-03-03T15:30:03.158Z",
    "views": 75,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 145
  },
  "posts": [
    {
      "id": 9229,
      "post_number": 1,
      "username": "Konstantin_Vogler",
      "name": "Konstantin Vogler",
      "created_at": "2025-02-28T21:08:54.653Z",
      "updated_at": "2025-03-03T15:27:42.912Z",
      "cooked": "<pre><code class=\"lang-auto\">#set heading(numbering: \"I. a.\")\n= Heading 1\n== Heading 2\n== Heading 3\n</code></pre>\n<p>the output of this code is:<br>\nI. Heading 1<br>\nI. a. Heading 2<br>\nI. b. Heading 3</p>\n<p>is it possible to get this?:<br>\nI. Heading 1<br>\na. Heading 2<br>\nb. Heading 3</p>\n<p>P.S.: Sorry for my bad english</p>",
      "raw": "```\n#set heading(numbering: \"I. a.\")\n= Heading 1\n== Heading 2\n== Heading 3\n```\nthe output of this code is:\nI. Heading 1\nI. a. Heading 2\nI. b. Heading 3\n\nis it possible to get this?:\nI. Heading 1\na. Heading 2\nb. Heading 3\n\nP.S.: Sorry for my bad english",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 125.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1285
    },
    {
      "id": 9231,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-28T21:42:01.787Z",
      "updated_at": "2025-02-28T21:42:01.787Z",
      "cooked": "<p>Welcome <a class=\"mention\" href=\"/u/konstantin_vogler\">@Konstantin_Vogler</a>,</p>\n<p>The simplest option is to use the <a href=\"https://typst.app/universe/package/numbly\">numbly</a> package.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/numbly:0.1.0\": numbly\n\n#set heading(numbering: numbly(\"{1:I}.\", \"{2:a}.\"))\n\n= Heading 1\n== Heading 2\n== Heading 3\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/8/88573c75a9c8d244c67c7ddb2f25db34a24ae36b.png\" alt=\"test\" data-base62-sha1=\"js7PZDeEOpFWilbcmLwlP8vXXBN\" width=\"283\" height=\"231\"></p>",
      "raw": "Welcome @Konstantin_Vogler,\n\nThe simplest option is to use the [numbly](https://typst.app/universe/package/numbly) package.\n\n```typst\n#import \"@preview/numbly:0.1.0\": numbly\n\n#set heading(numbering: numbly(\"{1:I}.\", \"{2:a}.\"))\n\n= Heading 1\n== Heading 2\n== Heading 3\n```\n\n![test|283x231](upload://js7PZDeEOpFWilbcmLwlP8vXXBN.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 45.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9317,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-03T15:30:03.158Z",
      "updated_at": "2025-03-03T15:30:03.158Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/konstantin_vogler\">@Konstantin_Vogler</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>For future posts, make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Konstantin_Vogler, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nFor future posts, make sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 9,
      "score": 1.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:50:56.119595"
}
{
  "topic_metadata": {
    "id": 3055,
    "title": "How do I use the rotate function in the CeTZ content environment?",
    "slug": "how-do-i-use-the-rotate-function-in-the-cetz-content-environment",
    "posts_count": 3,
    "created_at": "2025-02-28T21:29:32.259Z",
    "last_posted_at": "2025-02-28T21:59:34.183Z",
    "views": 86,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "cetz"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 151
  },
  "posts": [
    {
      "id": 9230,
      "post_number": 1,
      "username": "Johannes",
      "name": "Johannes",
      "created_at": "2025-02-28T21:29:32.329Z",
      "updated_at": "2025-03-07T21:44:39.027Z",
      "cooked": "<p>hey, I’m trying to use the rotate function in the CeTZ environment like this:</p>\n<p><span class=\"hashtag-raw\">#figure</span>(<br>\ncetz.canvas(<br>\n{<br>\nimport cetz.draw: *<br>\ncontent((0,0), rotate(90deg)[U])<br>\n}<br>\n)<br>\n)</p>\n<p>However, this doesn‘t work. I get this error message: Assertion failed: Rotate takes a single z-angle or angles (x, y, z or yaw, pitch, roll) as named arguments, got: arguments(90deg, [U])</p>\n<p>When using rotate outside the CeTZ environment, it does exactly what i would expect it to do. What am I missing? Is there maybe a better way of rotating text within CeTZ?<br>\nThanks!</p>",
      "raw": "hey, I’m trying to use the rotate function in the CeTZ environment like this:\n\n#figure(\ncetz.canvas(\n    {\n    import cetz.draw: *\n      content((0,0), rotate(90deg)[U])\n  }\n)\n)\n\nHowever, this doesn‘t work. I get this error message: Assertion failed: Rotate takes a single z-angle or angles (x, y, z or yaw, pitch, roll) as named arguments, got: arguments(90deg, [U])\n\nWhen using rotate outside the CeTZ environment, it does exactly what i would expect it to do. What am I missing? Is there maybe a better way of rotating text within CeTZ?\nThanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 378.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1129
    },
    {
      "id": 9232,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-28T21:56:12.928Z",
      "updated_at": "2025-02-28T21:58:45.256Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/johannes\">@Johannes</a>,</p>\n<p>cetz has a build in <a href=\"https://cetz-package.github.io/docs/api/draw-functions/shapes/content/\">angle argument</a>.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/cetz:0.3.2\"\n\n#figure(\n  cetz.canvas({\n    import cetz.draw: *\n    content((0,0), angle:90deg, [U])\n  })\n)\n</code></pre>\n<hr>\n<p>Please use backticks to format your code correctly on the forum.</p>\n<pre><code class=\"lang-auto\">```typst\n...\n```\n\n</code></pre>",
      "raw": "Hi @Johannes,\n\ncetz has a build in [angle argument](https://cetz-package.github.io/docs/api/draw-functions/shapes/content/).\n\n```typst\n#import \"@preview/cetz:0.3.2\"\n\n#figure(\n  cetz.canvas({\n    import cetz.draw: *\n    content((0,0), angle:90deg, [U])\n  })\n)\n```\n---\nPlease use backticks to format your code correctly on the forum.\n````\n```typst\n...\n```\n\n````",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 3.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9233,
      "post_number": 3,
      "username": "Johannes",
      "name": "Johannes",
      "created_at": "2025-02-28T21:59:34.183Z",
      "updated_at": "2025-02-28T21:59:34.183Z",
      "cooked": "<p>Thank you, works like a charm.</p>",
      "raw": "Thank you, works like a charm.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 16,
      "score": 18.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1129
    }
  ],
  "scraped_at": "2025-06-10T09:50:55.367924"
}
{
  "topic_metadata": {
    "id": 306,
    "title": "Why are paths always relative to the current file?",
    "slug": "why-are-paths-always-relative-to-the-current-file",
    "posts_count": 9,
    "created_at": "2024-09-16T07:40:35.276Z",
    "last_posted_at": "2024-12-28T13:50:10.813Z",
    "views": 1037,
    "like_count": 8,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "laurmaedje",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 6,
    "word_count": 699
  },
  "posts": [
    {
      "id": 1121,
      "post_number": 1,
      "username": "Lars",
      "name": "",
      "created_at": "2024-09-16T07:40:35.518Z",
      "updated_at": "2024-09-16T07:42:03.149Z",
      "cooked": "<p>Context: I was trying to implement a small function that reads and parses a file with some regex. The function just takes the path to the file and returns the parsed context as dictionary. I wanted to move this function into a package.</p>\n<p>/somewhere/else/lib.typ</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let parse-xyz(path) = {\n    let data = read(path)\n    …\n}\n</code></pre>\n<p>main.typ</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let values = import-xyz(\"my/path.xyz\");\n</code></pre>\n<p>After that I found out that the read call resolves the path relative to the file that contains the function (lib.typ) and not relative to the main.typ file that calls it. This is different from python and other scripting languages.</p>",
      "raw": "Context: I was trying to implement a small function that reads and parses a file with some regex. The function just takes the path to the file and returns the parsed context as dictionary. I wanted to move this function into a package.\n\n/somewhere/else/lib.typ\n```typ \n#let parse-xyz(path) = {\n    let data = read(path)\n    …\n}\n```\n\nmain.typ\n```typ \n#let values = import-xyz(\"my/path.xyz\");\n```\n\n\nAfter that I found out that the read call resolves the path relative to the file that contains the function (lib.typ) and not relative to the main.typ file that calls it. This is different from python and other scripting languages.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 106,
      "score": 4116.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 255
    },
    {
      "id": 1173,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-16T08:51:51.830Z",
      "updated_at": "2024-09-16T08:52:21.104Z",
      "cooked": "<p>Hello, if you start your path with <code>\"/\"</code> instead, the path should resolve relative to <code>--root</code>. The documentation should be updated to reflect this soon!</p>\n<blockquote>\n<p><code>#import \"/templates/lib.typ\"</code> will load the file <code>templates/lib.typ</code> relative to the <code>--root</code> .</p>\n</blockquote>\n<p>[1] <a href=\"https://github.com/typst/typst/issues/2608#issuecomment-1799021131\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">syntax for marking project root · Issue #2608 · typst/typst · GitHub</a><br>\n[2] <a href=\"https://github.com/typst/typst/pull/4892/files\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Clarify the path argument of the image element by kravchenkoloznia · Pull Request #4892 · typst/typst · GitHub</a></p>",
      "raw": "Hello, if you start your path with `\"/\"` instead, the path should resolve relative to `--root`. The documentation should be updated to reflect this soon!\n\n> `#import \"/templates/lib.typ\"` will load the file `templates/lib.typ` relative to the `--root` .\n\n[1] https://github.com/typst/typst/issues/2608#issuecomment-1799021131\n[2] https://github.com/typst/typst/pull/4892/files",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 97,
      "score": 94.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 1287,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-16T14:33:15.390Z",
      "updated_at": "2024-09-16T14:35:15.527Z",
      "cooked": "<p>Alternatively, if you need to use the relative path which isn’t necessarily the same as root-relative path, then you would have to use <code>read(\"my/path.xyz\")</code> as an argument to the <code>import-xyz()</code> function.</p>\n<p>You can add <code>#let r = read</code> to make <code>import-xyz(r(\"my/path.xyz\"))</code>, which will shorten the workaround code but most certainly reduce readability.</p>\n<p>I did face this problem in the past and had a few conversations about this (I think with <a class=\"mention\" href=\"/u/laurmaedje\">@laurmaedje</a>), but I don’t remember if this is a “limitation” or a “feature”.</p>",
      "raw": "Alternatively, if you need to use the relative path which isn't necessarily the same as root-relative path, then you would have to use `read(\"my/path.xyz\")` as an argument to the `import-xyz()` function.\n\nYou can add `#let r = read` to make `import-xyz(r(\"my/path.xyz\"))`, which will shorten the workaround code but most certainly reduce readability.\n\nI did face this problem in the past and had a few conversations about this (I think with @laurmaedje), but I don't remember if this is a \"limitation\" or a \"feature\".",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 92,
      "score": 53.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 1309,
      "post_number": 4,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-09-16T14:45:52.212Z",
      "updated_at": "2024-09-16T14:45:52.212Z",
      "cooked": "<p>The original reason why it is this way is that it’s made for markup and not code: When writing chapters of text, it is very natural to be able to use relative paths to include other chapters. Absolute paths with a leading slash provide an alternative, primarily useful for importing files shared across a whole project.</p>\n<p>However, as you’ve noticed, neither of those two properly handle the case of relative paths passed to utility functions or of any kind of path passed into a package. To properly solve this, we need a path type that is separate from a plain string and that remembers where it was created. Ideally, this path would be supplemented by syntax since its much more natural for syntax to be file-dependant than for a <code>path</code> function.</p>\n<p>For more discussion on this, see:</p>\n<ul>\n<li><a href=\"https://github.com/typst/typst/issues/971\" class=\"inline-onebox\">Strings and paths should be separate types · Issue #971 · typst/typst · GitHub</a></li>\n<li><a href=\"https://discord.com/channels/1054443721975922748/1178292717239926824\">Resources forge on Discord</a></li>\n</ul>",
      "raw": "The original reason why it is this way is that it's made for markup and not code: When writing chapters of text, it is very natural to be able to use relative paths to include other chapters. Absolute paths with a leading slash provide an alternative, primarily useful for importing files shared across a whole project.\n\nHowever, as you've noticed, neither of those two properly handle the case of relative paths passed to utility functions or of any kind of path passed into a package. To properly solve this, we need a path type that is separate from a plain string and that remembers where it was created. Ideally, this path would be supplemented by syntax since its much more natural for syntax to be file-dependant than for a `path` function.\n\nFor more discussion on this, see: \n- https://github.com/typst/typst/issues/971\n- [Resources forge on Discord](https://discord.com/channels/1054443721975922748/1178292717239926824)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 88,
      "score": 172.6,
      "accepted_answer": true,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 1424,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-16T18:48:46.380Z",
      "updated_at": "2024-09-16T20:25:12.109Z",
      "cooked": "<p>There actually is a way to work around this (and to be clear: <strong>it is hacky</strong> and kinda works <strong>by accident</strong>. it will <a href=\"https://discord.com/channels/1054443721975922748/1088371867913572452/1219621322922135592\" rel=\"noopener nofollow ugc\"><em>probably</em> work</a> until the path work mentioned by Laurenz is done, but no guarantees.)</p>\n<p>Here it is:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// /somewhere/else/lib.typ\n#let parse-xyz(..args) = {\n    let data = read(..args)\n    …\n}\n</code></pre>\n<p>&nbsp;</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// main.typ\n#let values = parse-xyz(\"my/path.xyz\");\n</code></pre>\n<p><code>args</code> is an <code>arguments</code> value, and such a value apparently remembers where it was constructed. So when <code>read()</code> gets all the arguments that <code>parse-xyz()</code> receives, these arguments are <em>still</em> relative to <code>main.typ</code>. Whether the loss in readability due to the arcaneness of this behavior is worth it for you is for you to decide <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "There actually is a way to work around this (and to be clear: **it is hacky** and kinda works **by accident**. it will [_probably_ work](https://discord.com/channels/1054443721975922748/1088371867913572452/1219621322922135592) until the path work mentioned by Laurenz is done, but no guarantees.)\n\nHere it is:\n\n```typ\n// /somewhere/else/lib.typ\n#let parse-xyz(..args) = {\n    let data = read(..args)\n    …\n}\n```\n&nbsp;\n```typ\n// main.typ\n#let values = parse-xyz(\"my/path.xyz\");\n```\n\n`args` is an `arguments` value, and such a value apparently remembers where it was constructed. So when `read()` gets all the arguments that `parse-xyz()` receives, these arguments are _still_ relative to `main.typ`. Whether the loss in readability due to the arcaneness of this behavior is worth it for you is for you to decide :wink:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 84,
      "score": 96.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 1437,
      "post_number": 6,
      "username": "Lars",
      "name": "",
      "created_at": "2024-09-16T20:25:27.705Z",
      "updated_at": "2024-09-16T20:25:27.705Z",
      "cooked": "<p>Nice hack, but to be honest I don’t think I like this <img src=\"https://forum.typst.app/images/emoji/apple/see_no_evil.png?v=12\" title=\":see_no_evil:\" class=\"emoji\" alt=\":see_no_evil:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nWhy does this even work?!?</p>",
      "raw": "Nice hack, but to be honest I don't think I like this 🙈 \nWhy does this even work?!?",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 78,
      "score": 30.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 255
    },
    {
      "id": 1438,
      "post_number": 7,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-09-16T20:27:31.628Z",
      "updated_at": "2024-09-16T20:27:31.628Z",
      "cooked": "<p>Arguments retain their source location for error messages and the same source location mechanism is used to resolve relative paths.</p>",
      "raw": "Arguments retain their source location for error messages and the same source location mechanism is used to resolve relative paths.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 77,
      "score": 15.4,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 6958,
      "post_number": 8,
      "username": "han190",
      "name": "Han Tang",
      "created_at": "2024-12-28T00:02:31.684Z",
      "updated_at": "2024-12-28T00:02:31.684Z",
      "cooked": "<p>Glad that I find a solution here, but this feels…very unintuitive since nearly all linux file systems (or windows nowadays) treat path that starts with a “/” as an absolute path but not a relative path.</p>",
      "raw": "Glad that I find a solution here, but this feels...very unintuitive since nearly all linux file systems (or windows nowadays) treat path that starts with a \"/\" as an absolute path but not a relative path.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 24.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 406
    },
    {
      "id": 6975,
      "post_number": 9,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-12-28T13:50:10.813Z",
      "updated_at": "2024-12-28T13:50:10.813Z",
      "cooked": "<p>If you want to stay with a Linux analogy, you can think of a Typst project’s sandbox being similar to a <a href=\"https://wiki.archlinux.org/title/Chroot\">chroot</a> environment. Once you execute chroot, an absolute path <em>will</em> be relative to a directory other than what is globally considered the filesystem root.</p>\n<p>Re Windows, isn’t an absolute path still relative to the current drive’s root? So absolute Windows paths also require some context to figure out their meaning.</p>",
      "raw": "If you want to stay with a Linux analogy, you can think of a Typst project's sandbox being similar to a [chroot](https://wiki.archlinux.org/title/Chroot) environment. Once you execute chroot, an absolute path _will_ be relative to a directory other than what is globally considered the filesystem root.\n\nRe Windows, isn't an absolute path still relative to the current drive's root? So absolute Windows paths also require some context to figure out their meaning.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 41,
      "score": 38.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:58:54.216041"
}
{
  "topic_metadata": {
    "id": 3060,
    "title": "How to set heading of some level not in outline",
    "slug": "how-to-set-heading-of-some-level-not-in-outline",
    "posts_count": 2,
    "created_at": "2025-03-01T09:12:02.189Z",
    "last_posted_at": "2025-03-01T10:04:46.344Z",
    "views": 30,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 46
  },
  "posts": [
    {
      "id": 9238,
      "post_number": 1,
      "username": "ajswjjddd",
      "name": "ajswjjddd",
      "created_at": "2025-03-01T09:12:02.315Z",
      "updated_at": "2025-03-01T09:12:02.315Z",
      "cooked": "<p>when I write my thesis template, in some part of it , the heading of level 2 shouldn’t be in the outline. I don’t find ways</p>",
      "raw": "when I write my thesis template, in some part of it , the heading of level 2 shouldn't be in the outline. I don't find ways",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 33.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 970
    },
    {
      "id": 9241,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-01T10:04:46.344Z",
      "updated_at": "2025-03-01T10:04:46.344Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/ajswjjddd\">@ajswjjddd</a>, you can use the <a href=\"https://typst.app/docs/reference/model/heading/#parameters-outlined\">outlined</a> parameter of heading.</p>",
      "raw": "Hello @ajswjjddd, you can use the [outlined](https://typst.app/docs/reference/model/heading/#parameters-outlined) parameter of heading.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:50:54.657894"
}
{
  "topic_metadata": {
    "id": 3061,
    "title": "How to justify long paragraphs only?",
    "slug": "how-to-justify-long-paragraphs-only",
    "posts_count": 4,
    "created_at": "2025-03-01T09:14:14.321Z",
    "last_posted_at": "2025-03-01T19:53:37.859Z",
    "views": 102,
    "like_count": 4,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout",
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 301
  },
  "posts": [
    {
      "id": 9239,
      "post_number": 1,
      "username": "Jarko",
      "name": "Jarko",
      "created_at": "2025-03-01T09:14:14.386Z",
      "updated_at": "2025-03-09T10:42:56.058Z",
      "cooked": "<p>How can I create a <span class=\"hashtag-raw\">#set</span> or <span class=\"hashtag-raw\">#show</span> rule to only justify long paragraphs?</p>\n<p>This could be based on the number of words or characters or lines.</p>\n<p>I have tried something like this, but nothing gets justified:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show par: it =&gt; context if measure(it).width &gt; 5000pt {\nset par(justify: true)\n  it\n} else {\n  it\n} \n#lorem(50)\n#lorem(100)\n#lorem(200)\n#lorem(300)\n</code></pre>",
      "raw": "How can I create a #set or #show rule to only justify long paragraphs?\n\nThis could be based on the number of words or characters or lines.\n\nI have tried something like this, but nothing gets justified:\n\n```typ \n#show par: it => context if measure(it).width > 5000pt {\nset par(justify: true)\n  it\n} else {\n  it\n} \n#lorem(50)\n#lorem(100)\n#lorem(200)\n#lorem(300)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 201.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1287
    },
    {
      "id": 9262,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-03-01T11:58:06.411Z",
      "updated_at": "2025-03-01T11:58:06.411Z",
      "cooked": "<p>Hmm, interesting. The code snippet you provided works for typst v.0.12, but v.0.13 changed how paragraphs work and for some reason this doesn’t work. I’m not 100% sure, but I think this is a bug (as e.g. changing <code>set par(justify: true)</code> → <code>set text(fill: blue)</code> produces the intended behavior)</p>\n<p>There is an unoptimal workaround, where you wrap the baragraph body in a <code>block</code> element:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show par: it =&gt; context if measure(it).width &gt; 5000pt {\n  set par(justify: true)\n  block[\n    #it.body\n  ]\n} else {\n  it\n}\n</code></pre>\n<p>Which works, but gets rid of paragraphs stylings for long paragraphs (e.g. <code>first-line-indent</code>s).</p>\n<p>Maybe somebody more knowledgeable can chime in with their thoughts</p>",
      "raw": "Hmm, interesting. The code snippet you provided works for typst v.0.12, but v.0.13 changed how paragraphs work and for some reason this doesn't work. I'm not 100% sure, but I think this is a bug (as e.g. changing `set par(justify: true)` -> `set text(fill: blue)` produces the intended behavior)\n\nThere is an unoptimal workaround, where you wrap the baragraph body in a `block` element:\n\n```typst\n#show par: it => context if measure(it).width > 5000pt {\n  set par(justify: true)\n  block[\n    #it.body\n  ]\n} else {\n  it\n}\n```\n\nWhich works, but gets rid of paragraphs stylings for long paragraphs (e.g. `first-line-indent`s).\n\nMaybe somebody more knowledgeable can chime in with their thoughts",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 31.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9266,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-03-01T13:43:36.018Z",
      "updated_at": "2025-03-01T13:45:07.370Z",
      "cooked": "<p>It doesn’t work because the element (<code>it</code>) in a show rule has already “materialized”, meaning that its styles and properties have already been set in stone. Any set rules <em>for the same element</em> then aren’t applied anymore (but rules for children are, thus <code>set text(..)</code> works inside). Instead, you need to create a new justified paragraph, which you can do like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show par: it =&gt; {\n  if it.justify {\n    // Already justified, so don't try to apply the show rule again.\n    return it\n  }\n  \n  context if measure(it).width &gt; 5000pt {\n    // Create a new paragraph with the same properties, but justified.\n    let fields = it.fields()\n    let body = fields.remove(\"body\")\n    par(..fields, justify: true, body)\n  } else {\n    it\n  }\n}\n</code></pre>",
      "raw": "It doesn't work because the element (`it`) in a show rule has already \"materialized\", meaning that its styles and properties have already been set in stone. Any set rules _for the same element_ then aren't applied anymore (but rules for children are, thus `set text(..)` works inside). Instead, you need to create a new justified paragraph, which you can do like this:\n\n```typ\n#show par: it => {\n  if it.justify {\n    // Already justified, so don't try to apply the show rule again.\n    return it\n  }\n  \n  context if measure(it).width > 5000pt {\n    // Create a new paragraph with the same properties, but justified.\n    let fields = it.fields()\n    let body = fields.remove(\"body\")\n    par(..fields, justify: true, body)\n  } else {\n    it\n  }\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 26,
      "score": 80.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 9277,
      "post_number": 4,
      "username": "Jarko",
      "name": "Jarko",
      "created_at": "2025-03-01T19:53:37.859Z",
      "updated_at": "2025-03-01T19:53:37.859Z",
      "cooked": "<p>Much appreciated. Thank you.</p>",
      "raw": "Much appreciated. Thank you.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1287
    }
  ],
  "scraped_at": "2025-06-10T09:50:53.943290"
}
{
  "topic_metadata": {
    "id": 3063,
    "title": "How to receive a user supplied path in a package function?",
    "slug": "how-to-receive-a-user-supplied-path-in-a-package-function",
    "posts_count": 4,
    "created_at": "2025-03-01T13:05:09.454Z",
    "last_posted_at": "2025-03-03T15:44:37.762Z",
    "views": 74,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "LordBaryhobal",
    "tags": [
      "packages"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 186
  },
  "posts": [
    {
      "id": 9264,
      "post_number": 1,
      "username": "Peio",
      "name": "",
      "created_at": "2025-03-01T13:05:09.596Z",
      "updated_at": "2025-03-03T15:44:19.597Z",
      "cooked": "<p>Hi everyone,</p>\n<p>I finally decided to try the package the system with my home cooked templates.</p>\n<p>One of the templates takes the path to an image as an argument. My problem is that all paths seems to be relative to the package folder rather than the  <code>.typ</code> file to compile.</p>\n<p>Is it possible to :</p>\n<ul>\n<li>Supply a path relative to the path of the file to compile, or failing that,</li>\n<li>Supply an absolute path  ?</li>\n</ul>\n<p>Many thanks.</p>",
      "raw": "Hi everyone,\n\nI finally decided to try the package the system with my home cooked templates. \n\nOne of the templates takes the path to an image as an argument. My problem is that all paths seems to be relative to the package folder rather than the  `.typ` file to compile.\n\nIs it possible to :\n- Supply a path relative to the path of the file to compile, or failing that,\n- Supply an absolute path  ?\n\nMany thanks.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 174.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1288
    },
    {
      "id": 9265,
      "post_number": 2,
      "username": "LordBaryhobal",
      "name": "Baryhobal",
      "created_at": "2025-03-01T13:29:53.780Z",
      "updated_at": "2025-03-01T13:29:53.780Z",
      "cooked": "<p>Packages cannot access project files, unless the package is installed inside of the project<br>\nIf you want to pass an image to your template, you will have to read it in your project and pass the image object to the template</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let img = image(\"my_nice_image.png\")\n#show: my-template.with(img)\n</code></pre>",
      "raw": "Packages cannot access project files, unless the package is installed inside of the project\nIf you want to pass an image to your template, you will have to read it in your project and pass the image object to the template\n\n```typ\n#let img = image(\"my_nice_image.png\")\n#show: my-template.with(img)\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 9.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 585
    },
    {
      "id": 9269,
      "post_number": 3,
      "username": "Peio",
      "name": "",
      "created_at": "2025-03-01T15:52:51.604Z",
      "updated_at": "2025-03-01T15:52:51.604Z",
      "cooked": "<p>Works like a charm thank you very much!</p>",
      "raw": "Works like a charm thank you very much!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1288
    },
    {
      "id": 9322,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-03T15:44:37.762Z",
      "updated_at": "2025-03-03T15:44:37.762Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/peio\">@Peio</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>For future posts, make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Peio, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nFor future posts, make sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:50:53.218115"
}
