{
  "topic_metadata": {
    "id": 822,
    "title": "How do I know what elements compose a function for styling purposes?",
    "slug": "how-do-i-know-what-elements-compose-a-function-for-styling-purposes",
    "posts_count": 12,
    "created_at": "2024-09-30T21:03:57.887Z",
    "last_posted_at": "2024-10-02T13:23:16.260Z",
    "views": 153,
    "like_count": 7,
    "reply_count": 8,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "styling"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 1305
  },
  "posts": [
    {
      "id": 3049,
      "post_number": 1,
      "username": "davystrong",
      "name": "David",
      "created_at": "2024-09-30T21:03:58.081Z",
      "updated_at": "2024-09-30T21:03:58.081Z",
      "cooked": "<p>I recently wanted to change the spacing between lines in a document. A quick Google search brought up <a href=\"https://stackoverflow.com/questions/76303403/how-to-change-spacing-between-lines-in-typst-template\" rel=\"noopener nofollow ugc\">this SO answer</a> which describes exactly what I wanted: spacing between lines can be set using the leading parameter and spacing between paragraphs can be set with the block’s spacing. Fairly logical once you know how.</p>\n<p>However, now I want to style a <code>quote</code>. For example, say I want to simply put the attribution in the middle (I know I could rewrite the <code>quote</code> function with a new show rule - that’s not what I want). How can I find the elements that make up a <code>quote</code> to style them like that. I.e. to change the spacing between paragraphs, I had to set a value for <code>block</code>. What is the equivalent for the attribution and, specifically, how can I find that without having to ask here?</p>",
      "raw": "I recently wanted to change the spacing between lines in a document. A quick Google search brought up [this SO answer](https://stackoverflow.com/questions/76303403/how-to-change-spacing-between-lines-in-typst-template) which describes exactly what I wanted: spacing between lines can be set using the leading parameter and spacing between paragraphs can be set with the block's spacing. Fairly logical once you know how.\n\nHowever, now I want to style a `quote`. For example, say I want to simply put the attribution in the middle (I know I could rewrite the `quote` function with a new show rule - that's not what I want). How can I find the elements that make up a `quote` to style them like that. I.e. to change the spacing between paragraphs, I had to set a value for `block`. What is the equivalent for the attribution and, specifically, how can I find that without having to ask here?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 308.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 504
    },
    {
      "id": 3070,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-01T11:29:13.589Z",
      "updated_at": "2024-10-01T11:29:13.589Z",
      "cooked": "<p>First a quick note: In the next release you won’t have to do <code>show par: set block(...)</code>, instead you will be able to do <code>set par(spacing: ...)</code> <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>You can’t always style things with set rules. For example the quote attribution alignment to the end of the line is <a href=\"https://github.com/typst/typst/blob/d03af848eb510a9ce0ad84db6714d27982c68717/crates/typst/src/model/quote.rs#L213\" rel=\"noopener nofollow ugc\">hardcoded in the source</a>. So you do need a show rule to build the quote yourself.</p>\n<p>As to how you can find out if you need a show rule or not, I also don’t think there’s a general way to do that currently (appart from looking at the source code).</p>",
      "raw": "First a quick note: In the next release you won't have to do `show par: set block(...)`, instead you will be able to do `set par(spacing: ...)` :slight_smile: \n\nYou can't always style things with set rules. For example the quote attribution alignment to the end of the line is [hardcoded in the source](https://github.com/typst/typst/blob/d03af848eb510a9ce0ad84db6714d27982c68717/crates/typst/src/model/quote.rs#L213). So you do need a show rule to build the quote yourself.\n\nAs to how you can find out if you need a show rule or not, I also don't think there's a general way to do that currently (appart from looking at the source code).",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 32.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3098,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-01T14:35:17.232Z",
      "updated_at": "2024-10-01T14:35:17.232Z",
      "cooked": "<p>For posterity, <a class=\"mention\" href=\"/u/sijo\">@sijo</a> is talking about the next <span class=\"hashtag-raw\">#v0-12-0</span>. In <a class=\"hashtag-cooked\" href=\"/tag/v0-11-1\" data-type=\"tag\" data-slug=\"v0-11-1\" data-id=\"110\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>v0-11-1</span></a>, the syntax is still <code>show par: set block(...)</code>. Andrew mentionned the specific PR <a href=\"https://forum.typst.app/t/why-bottom-pad-in-paragraph-breaks-left-pad-in-quote/600/12\">here</a>.</p>",
      "raw": "For posterity, @sijo is talking about the next #v0-12-0. In #v0-11-1, the syntax is still `show par: set block(...)`. Andrew mentionned the specific PR [here](https://forum.typst.app/t/why-bottom-pad-in-paragraph-breaks-left-pad-in-quote/600/12).",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 34,
      "score": 41.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3102,
      "post_number": 4,
      "username": "davystrong",
      "name": "David",
      "created_at": "2024-10-01T15:31:50.272Z",
      "updated_at": "2024-10-01T15:31:50.272Z",
      "cooked": "<p>Ok, I wonder how that could be better documented? Maybe not in this specific case where it’s hard coded, but in the general case. I’ll have a think about it and maybe submit a PR or BR.</p>\n<p>Regarding the PR mentioned, thanks! That explains some of the layout changes I encountered after switching to HEAD.</p>",
      "raw": "Ok, I wonder how that could be better documented? Maybe not in this specific case where it's hard coded, but in the general case. I'll have a think about it and maybe submit a PR or BR.\n\nRegarding the PR mentioned, thanks! That explains some of the layout changes I encountered after switching to HEAD.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 34,
      "score": 26.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 504
    },
    {
      "id": 3137,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T20:55:37.255Z",
      "updated_at": "2024-10-01T20:55:37.255Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"davystrong\" data-post=\"4\" data-topic=\"822\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/d/C2387F/48.png\" class=\"avatar\"> davystrong:</div>\n<blockquote>\n<p>Ok, I wonder how that could be better documented?</p>\n</blockquote>\n</aside>\n<p>That’s a great question! A lot of people often want to rebuild some element via a show rule to tweak something, but every time you fall into the same pitfall, like you did. I do think that documentation should have a Typst code for recreating every element (if possible). Can you please <a href=\"https://github.com/typst/typst/issues/new?assignees=&amp;labels=docs&amp;projects=&amp;template=3-docs.yml&amp;title=Write+a+short+and+descriptive+title%21\" rel=\"noopener nofollow ugc\">open a documentation issue</a>?</p>\n<p>This change to documentation will probably greatly increase the ease of tinkering for everybody. And you wouldn’t have to keep a backlog of all show rules you created yourself (for future use).</p>",
      "raw": "[quote=\"davystrong, post:4, topic:822\"]\nOk, I wonder how that could be better documented?\n[/quote]\n\nThat's a great question! A lot of people often want to rebuild some element via a show rule to tweak something, but every time you fall into the same pitfall, like you did. I do think that documentation should have a Typst code for recreating every element (if possible). Can you please [open a documentation issue](https://github.com/typst/typst/issues/new?assignees=&labels=docs&projects=&template=3-docs.yml&title=Write+a+short+and+descriptive+title%21)?\n\nThis change to documentation will probably greatly increase the ease of tinkering for everybody. And you wouldn't have to keep a backlog of all show rules you created yourself (for future use).",
      "reply_to_post_number": 4,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 1,
      "reads": 32,
      "score": 31.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3141,
      "post_number": 6,
      "username": "davystrong",
      "name": "David",
      "created_at": "2024-10-01T21:40:48.971Z",
      "updated_at": "2024-10-01T21:40:48.971Z",
      "cooked": "<p>I’ll aim to open a documentation issue, but I don’t like the idea of this having to be done manually every time an element is added or changed. However, for most elements automatically generating a code example is likely impractical, since any combination of arguments would map to any number of completely different results.</p>\n<p>Actually, when I said “documented” I was really thinking of something more like VS Code hover function. If I could define a <code>quote</code> in my document, then hover over it to see the equivalent typst code for that particular configuration of the function. Bonus points for a code action to generate the “identity” show function for the element.</p>\n<p>Does that sound interesting? Does it sound feasible? I assume this would require generating typst code from an AST. I realise the LSP isn’t provided by typst but I imagine the functionality required to do this would need to be added to the <code>typst-ide</code> crate.</p>",
      "raw": "I'll aim to open a documentation issue, but I don't like the idea of this having to be done manually every time an element is added or changed. However, for most elements automatically generating a code example is likely impractical, since any combination of arguments would map to any number of completely different results.\n\nActually, when I said \"documented\" I was really thinking of something more like VS Code hover function. If I could define a `quote` in my document, then hover over it to see the equivalent typst code for that particular configuration of the function. Bonus points for a code action to generate the \"identity\" show function for the element.\n\nDoes that sound interesting? Does it sound feasible? I assume this would require generating typst code from an AST. I realise the LSP isn't provided by typst but I imagine the functionality required to do this would need to be added to the `typst-ide` crate.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 11.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 504
    },
    {
      "id": 3148,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T22:52:41.531Z",
      "updated_at": "2024-10-01T23:49:27.365Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"davystrong\" data-post=\"6\" data-topic=\"822\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/d/C2387F/48.png\" class=\"avatar\"> davystrong:</div>\n<blockquote>\n<p>I’ll aim to open a documentation issue</p>\n</blockquote>\n</aside>\n<p>I’m looking forward to it.</p>\n<aside class=\"quote no-group\" data-username=\"davystrong\" data-post=\"6\" data-topic=\"822\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/d/C2387F/48.png\" class=\"avatar\"> davystrong:</div>\n<blockquote>\n<p>I don’t like the idea of this having to be done manually every time an element is added or changed. However, for most elements automatically generating a code example is likely impractical</p>\n</blockquote>\n</aside>\n<p>The way elements created internally in Rust isn’t something that changes regularly (you can try <code>git blame</code> and see when those line have been changed the last time). So recreating them manually once per element basically will be a one-time investment. Moreover, making this somehow automated isn’t a trivial task, so I think it is safe to say that this is out of the question for near future (or in general, IDK, I’m not the creator). Also, since normally the function/element related code is documented right above the Rust struct in the doc string, it would be pretty easy to update the show rule code example (for a specific element that had its internal representation changed).</p>\n<aside class=\"quote no-group\" data-username=\"davystrong\" data-post=\"6\" data-topic=\"822\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/d/C2387F/48.png\" class=\"avatar\"> davystrong:</div>\n<blockquote>\n<p>Actually, when I said “documented” I was really thinking of something more like VS Code hover function. If I could define a <code>quote</code> in my document, then hover over it to see the equivalent typst code for that particular configuration of the function. Bonus points for a code action to generate the “identity” show function for the element.</p>\n</blockquote>\n</aside>\n<aside class=\"quote no-group\" data-username=\"davystrong\" data-post=\"6\" data-topic=\"822\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/d/C2387F/48.png\" class=\"avatar\"> davystrong:</div>\n<blockquote>\n<p>I realise the LSP isn’t provided by typst but I imagine the functionality required to do this would need to be added to the <code>typst-ide</code> crate.</p>\n</blockquote>\n</aside>\n<p>I answered a similar/same question in <a href=\"https://forum.typst.app/t/how-can-i-document-my-own-user-defined-functions-variables/839\" class=\"inline-onebox\">How can I document my own user defined functions/variables?</a>. You should look into <a href=\"https://github.com/Myriad-Dreamin/tinymist\" rel=\"noopener nofollow ugc\">tinymist</a> for such feature (for now). Also a small note that <a href=\"https://typst.app/docs/reference/model/quote/\"><code>quote</code></a> is already a defined element. See <a href=\"https://forum.typst.app/t/how-can-i-access-shadowed-functions/821/3\" class=\"inline-onebox\">How can I access shadowed functions? - #3 by Eric</a>.</p>\n<aside class=\"quote no-group\" data-username=\"davystrong\" data-post=\"6\" data-topic=\"822\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/d/C2387F/48.png\" class=\"avatar\"> davystrong:</div>\n<blockquote>\n<p>Does that sound interesting? Does it sound feasible?</p>\n</blockquote>\n</aside>\n<p>Yes. IMO, no.</p>",
      "raw": "[quote=\"davystrong, post:6, topic:822\"]\nI’ll aim to open a documentation issue\n[/quote]\n\nI'm looking forward to it.\n\n[quote=\"davystrong, post:6, topic:822\"]\nI don’t like the idea of this having to be done manually every time an element is added or changed. However, for most elements automatically generating a code example is likely impractical\n[/quote]\n\nThe way elements created internally in Rust isn't something that changes regularly (you can try `git blame` and see when those line have been changed the last time). So recreating them manually once per element basically will be a one-time investment. Moreover, making this somehow automated isn't a trivial task, so I think it is safe to say that this is out of the question for near future (or in general, IDK, I'm not the creator). Also, since normally the function/element related code is documented right above the Rust struct in the doc string, it would be pretty easy to update the show rule code example (for a specific element that had its internal representation changed).\n\n[quote=\"davystrong, post:6, topic:822\"]\nActually, when I said “documented” I was really thinking of something more like VS Code hover function. If I could define a `quote` in my document, then hover over it to see the equivalent typst code for that particular configuration of the function. Bonus points for a code action to generate the “identity” show function for the element.\n[/quote]\n\n[quote=\"davystrong, post:6, topic:822\"]\nI realise the LSP isn’t provided by typst but I imagine the functionality required to do this would need to be added to the `typst-ide` crate.\n[/quote]\n\nI answered a similar/same question in https://forum.typst.app/t/how-can-i-document-my-own-user-defined-functions-variables/839. You should look into [tinymist](https://github.com/Myriad-Dreamin/tinymist) for such feature (for now). Also a small note that [`quote`](https://typst.app/docs/reference/model/quote/) is already a defined element. See https://forum.typst.app/t/how-can-i-access-shadowed-functions/821/3.\n\n[quote=\"davystrong, post:6, topic:822\"]\nDoes that sound interesting? Does it sound feasible?\n[/quote]\n\nYes. IMO, no.",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 31,
      "score": 16.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3157,
      "post_number": 8,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-02T06:02:56.531Z",
      "updated_at": "2024-10-02T06:02:56.531Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"5\" data-topic=\"822\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>I do think that documentation should have a Typst code for recreating every element (if possible).</p>\n</blockquote>\n</aside>\n<p>That seems like a great idea! I can already imagine LSP adopting the default and auto-generating a default show rule function, i.e. typing</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure: it =&gt; ...\n</code></pre>\n<p>would suggest a snippet in order to provide a default function that reproduces the default Typst behaviour.</p>",
      "raw": "[quote=\"Andrew, post:5, topic:822\"]\nI do think that documentation should have a Typst code for recreating every element (if possible).\n[/quote]\n\nThat seems like a great idea! I can already imagine LSP adopting the default and auto-generating a default show rule function, i.e. typing\n```typ\n#show figure: it => ...\n```\nwould suggest a snippet in order to provide a default function that reproduces the default Typst behaviour.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 27,
      "score": 40.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3194,
      "post_number": 9,
      "username": "davystrong",
      "name": "David",
      "created_at": "2024-10-02T09:02:35.444Z",
      "updated_at": "2024-10-02T09:02:35.444Z",
      "cooked": "<p>Created the <a href=\"https://github.com/typst/typst/issues/5095\" rel=\"noopener nofollow ugc\">issue</a>.</p>",
      "raw": "Created the [issue](https://github.com/typst/typst/issues/5095).",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 20.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 504
    },
    {
      "id": 3202,
      "post_number": 10,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T12:05:21.713Z",
      "updated_at": "2024-10-02T12:05:21.713Z",
      "cooked": "<p>Damn, that would be huge! <a class=\"mention\" href=\"/u/myriad-dreamin\">@Myriad-Dreamin</a>, <em>write that down, write that down!</em></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/8d7e80ca88c4f236e6b73382e7247ea8828e0d8e.jpeg\" alt=\"Write that down, write that down!\" data-base62-sha1=\"kbIm0rC26ohWFh3UAIFrAYKdHCS\" width=\"245\" height=\"162\"></p>",
      "raw": "Damn, that would be huge! @Myriad-Dreamin, *write that down, write that down!*\n\n![Write that down, write that down!|490x324, 50%](upload://kbIm0rC26ohWFh3UAIFrAYKdHCS.jpeg)",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 19.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3210,
      "post_number": 11,
      "username": "Myriad-Dreamin",
      "name": "Myriad-Dreamin",
      "created_at": "2024-10-02T12:59:40.377Z",
      "updated_at": "2024-10-02T12:59:40.377Z",
      "cooked": "<p>We now can easily access which styles are added to the element, but might not simply reference which exact show rules changes the element. Correct me if I wrongly get the requested feature.</p>",
      "raw": "We now can easily access which styles are added to the element, but might not simply reference which exact show rules changes the element. Correct me if I wrongly get the requested feature.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 20
    },
    {
      "id": 3214,
      "post_number": 12,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T13:23:16.260Z",
      "updated_at": "2024-10-02T13:23:16.260Z",
      "cooked": "<p><a href=\"https://forum.typst.app/t/how-do-i-know-what-elements-compose-a-function-for-styling-purposes/822/8\">Here</a> <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> is talking about a snippet suggestion from the LSP server (could perhaps also be a code action). A snippet includes a show rule for the specific element that can mirror how the element is created in the Rust code. Since tinymist is separate from the Typst itself, it can already start implementing and supporting it. But the caveat here is that not all elements can be fully recreated in Typst right now. And that someone has to manually write such show rules (as close to how it’s defined in Rust as possible). You might want to see the discussion in the created issue for more context.</p>",
      "raw": "[Here](https://forum.typst.app/t/how-do-i-know-what-elements-compose-a-function-for-styling-purposes/822/8) @quachpas is talking about a snippet suggestion from the LSP server (could perhaps also be a code action). A snippet includes a show rule for the specific element that can mirror how the element is created in the Rust code. Since tinymist is separate from the Typst itself, it can already start implementing and supporting it. But the caveat here is that not all elements can be fully recreated in Typst right now. And that someone has to manually write such show rules (as close to how it's defined in Rust as possible). You might want to see the discussion in the created issue for more context.",
      "reply_to_post_number": 11,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 8.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:43.894190"
}
{
  "topic_metadata": {
    "id": 824,
    "title": "How to split a list of calendar entries by month?",
    "slug": "how-to-split-a-list-of-calendar-entries-by-month",
    "posts_count": 5,
    "created_at": "2024-09-30T22:16:57.190Z",
    "last_posted_at": "2024-10-01T22:29:03.265Z",
    "views": 138,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 1102
  },
  "posts": [
    {
      "id": 3051,
      "post_number": 1,
      "username": "baptiste",
      "name": "baptiste",
      "created_at": "2024-09-30T22:16:57.294Z",
      "updated_at": "2024-10-01T00:54:54.510Z",
      "cooked": "<p>I’m thinking of formatting a yearly calendar of outreach events, starting with a Yaml list similar to this:</p>\n<pre><code class=\"lang-auto\">\"Oolong Day\":\n  Date: 2024-08-20\n  Lead: baptiste \n  Purpose: Sipping\n\n\"Steep learning curve\":\n  Date: 2024-08-28\n  Lead: Tea master \n  Purpose: Engagement\n\n\"Gong fu cha vs instant powder\":\n  Date: 2024-09-04\n  Lead: All\n  Purpose: Inform\n</code></pre>\n<p>I’ve started with a possible layout here:<br>\n<a href=\"https://typst.app/project/wJzR_45uyD6Fs2hyB0gfJM\"><img src=\"https://forum.typst.app/uploads/default/original/1X/5c2703997fa0f45777cf31a5bebc6fce676df424.png\" alt=\"Screenshot 2024-10-01 at 10.42.08\" data-base62-sha1=\"d9dvTOR7p8eEqj30iGjVs0fY4Ly\" width=\"610\" height=\"500\"></a></p>\n<p>but I’m not sure how to automatically grab the data corresponding to a given month, and insert it in the corresponding grid. Any tips? Ideally I’d end up with a list similar to:</p>\n<pre><code class=\"lang-auto\">(1: (&lt;event 1&gt;, &lt;event 2&gt;, ...),\n2: (&lt;event 1&gt;, &lt;event 2&gt;, ...),\n3: (&lt;event 1&gt;, &lt;event 2&gt;, ...),\n...\n12: (&lt;event 1&gt;, &lt;event 2&gt;, ...),\n)\n</code></pre>\n<p>and I could then just grab the n-th month set of events and insert those in the grid.</p>\n<p>I’ve tried:</p>\n<pre><code class=\"lang-auto\">#let el = yaml(\"dummy-events.yaml\")\n(\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\").map(month =&gt; #el.pairs().filter(it =&gt; it.at(1).Date.slice(5,7) == month))\n</code></pre>\n<p>but for some reason it complains that month isn’t known? (scoping issue within filter I guess)</p>",
      "raw": "I'm thinking of formatting a yearly calendar of outreach events, starting with a Yaml list similar to this:\n\n```\n\"Oolong Day\":\n  Date: 2024-08-20\n  Lead: baptiste \n  Purpose: Sipping\n\n\"Steep learning curve\":\n  Date: 2024-08-28\n  Lead: Tea master \n  Purpose: Engagement\n\n\"Gong fu cha vs instant powder\":\n  Date: 2024-09-04\n  Lead: All\n  Purpose: Inform\n``` \n\nI've started with a possible layout here:\n[![Screenshot 2024-10-01 at 10.42.08|610x500](upload://d9dvTOR7p8eEqj30iGjVs0fY4Ly.png)](https://typst.app/project/wJzR_45uyD6Fs2hyB0gfJM)\n\n\n\nbut I'm not sure how to automatically grab the data corresponding to a given month, and insert it in the corresponding grid. Any tips? Ideally I'd end up with a list similar to:\n\n```\n(1: (<event 1>, <event 2>, ...),\n2: (<event 1>, <event 2>, ...),\n3: (<event 1>, <event 2>, ...),\n...\n12: (<event 1>, <event 2>, ...),\n)\n```\n\nand I could then just grab the n-th month set of events and insert those in the grid.\n\nI've tried:\n\n```\n#let el = yaml(\"dummy-events.yaml\")\n(\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\").map(month => #el.pairs().filter(it => it.at(1).Date.slice(5,7) == month))\n```\nbut for some reason it complains that month isn't known? (scoping issue within filter I guess)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 306.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 85
    },
    {
      "id": 3073,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-01T11:41:53.487Z",
      "updated_at": "2024-10-01T11:41:53.487Z",
      "cooked": "<p>To fix the error you need to put the whole second line in code mode: put a <code>#</code> at the start and remove the <code>#</code> from <code>#el.pair</code>.</p>",
      "raw": "To fix the error you need to put the whole second line in code mode: put a `#` at the start and remove the `#` from `#el.pair`.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 26.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3121,
      "post_number": 3,
      "username": "baptiste",
      "name": "baptiste",
      "created_at": "2024-10-01T18:30:51.266Z",
      "updated_at": "2024-10-01T18:30:51.266Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"baptiste\" data-post=\"1\" data-topic=\"824\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/b/441A5E/48.png\" class=\"avatar\"> baptiste:</div>\n<blockquote>\n<p><code>(\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\").map(month =&gt; #el.pairs().filter(it =&gt; it.at(1).Date.slice(5,7) == month))</code></p>\n</blockquote>\n</aside>\n<p>Thanks! I find this use of <code>#</code> to refer to code mode (but also variables in normal mode) endlessly confusing; somehow I’d made it work by adding a <code>#let variable = ...</code> at the start, which I guess does the same thing as <code>#()...</code>.</p>",
      "raw": "[quote=\"baptiste, post:1, topic:824\"]\n`(\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\").map(month => #el.pairs().filter(it => it.at(1).Date.slice(5,7) == month))`\n[/quote]\n\nThanks! I find this use of `#` to refer to code mode (but also variables in normal mode) endlessly confusing; somehow I'd made it work by adding a `#let variable = ...` at the start, which I guess does the same thing as `#()...`.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 26,
      "score": 10.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 85
    },
    {
      "id": 3127,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-01T19:24:09.564Z",
      "updated_at": "2024-10-01T19:24:31.280Z",
      "cooked": "<p>Yes exactly: when you start writing it’s always in markup mode. When you write the <code>#</code> character it enters code mode until the end of the command / parentheses / etc.  So <code>#(...)</code> enters code mode until the closing parenthesis, and <code>#let variable = ...</code> enters code mode until the end of the variable definition.</p>",
      "raw": "Yes exactly: when you start writing it's always in markup mode. When you write the `#` character it enters code mode until the end of the command / parentheses / etc.  So `#(...)` enters code mode until the closing parenthesis, and `#let variable = ...` enters code mode until the end of the variable definition.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 5.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3146,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T22:29:03.265Z",
      "updated_at": "2024-10-02T11:35:19.227Z",
      "cooked": "<p>For input, let’s use this (to make reproducible examples):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// #set page(width: 10cm, height: auto)\n#let yaml-string = \"\n\\\"Oolong Day\\\":\n  Date: 2024-08-20\n  Lead: baptiste\n  Purpose: Sipping\n\n\\\"Steep learning curve\\\":\n  Date: 2024-08-28\n  Lead: Tea master\n  Purpose: Engagement\n\n\\\"Gong fu cha vs instant powder\\\":\n  Date: 2024-09-04\n  Lead: All\n  Purpose: Inform\n\"\n#let dict = yaml.decode(yaml-string)\n#dict\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/4fc4f374385a8fa165ac69041d9b40cef2e5a9a2.png\" alt=\"image\" data-base62-sha1=\"bnFGvUhvxXsdeZyMBghsWroMMIq\" width=\"259\" height=\"258\"></p>\n</details>\n<p>If you want to use 2-char string like you did here:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#(\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\").map(month =&gt; dict.pairs().filter(it =&gt; it.at(1).Date.slice(5,7) == month))\n</code></pre>\n<p>Then you can do something like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let format-month(n) = (\"0\" + str(n)).slice(-2)\n#let months = range(12).map(i =&gt; format-month(i + 1))\n#let belongs-to-month(month) = ((k, v)) =&gt; v.Date.slice(5, 7) == month\n\n// This returns `array` of pairs per event\n// (`array` of `array`/tuple of `str` and `dictionary`).\n#let get-related-events(month) = dict.pairs().filter(belongs-to-month(month))\n#let per-month-events = months.map(get-related-events)\n#per-month-events\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/2d8cbcdd1f480dd4d87defa5fb547f67f1528ba6.png\" data-download-href=\"https://forum.typst.app/uploads/default/2d8cbcdd1f480dd4d87defa5fb547f67f1528ba6\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/2d8cbcdd1f480dd4d87defa5fb547f67f1528ba6_2_237x500.png\" alt=\"image\" data-base62-sha1=\"6uX0XdTSNTHm0nlsT1iUXQEYoqq\" width=\"237\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/2d8cbcdd1f480dd4d87defa5fb547f67f1528ba6_2_237x500.png, https://forum.typst.app/uploads/default/original/1X/2d8cbcdd1f480dd4d87defa5fb547f67f1528ba6.png 1.5x, https://forum.typst.app/uploads/default/original/1X/2d8cbcdd1f480dd4d87defa5fb547f67f1528ba6.png 2x\" data-dominant-color=\"111311\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">295×622 26.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>This will get you <code>array</code> where each element is <code>array</code> for a given month. Each such element contain events represented by a tuple (array of event name and its data).</p>\n<p>If you want to just group initial events into months without changing types:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let format-month(n) = (\"0\" + str(n)).slice(-2)\n#let belongs-to-month(month) = ((k, v)) =&gt; v.Date.slice(5, 7) == month\n#let pair-to-dict(pair) = { let (k, v) = pair; ((k): v) }\n// This returns `dictionary` per event (`array` of `dictionary`).\n#let get-related-events(month) = {\n  dict\n  .pairs()\n  .filter(belongs-to-month(month))\n  .map(pair-to-dict)\n  .fold((:), (v, acc) =&gt; acc + v)\n  // let d = dict\n  // .pairs()\n  // .filter(belongs-to-month(month))\n  // .map(pair-to-dict)\n  // .join()\n  // if d == none { (:) } else { d }\n}\n#let months = range(12).map(i =&gt; format-month(i + 1))\n#let per-month-events = months.map(get-related-events)\n#per-month-events\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/37b0e2f2738aff304177e0aa916ad9d6b1779d7b.png\" alt=\"image\" data-base62-sha1=\"7WFeMIbMSghFaSIMzFA3GTy4lx9\" width=\"273\" height=\"492\"></p>\n</details>\n<p>Here each month is an element of <code>array</code> which itself is a <code>dictionary</code> containing only necessary events.</p>\n<p>Looking at this:</p>\n<pre><code class=\"lang-plaintext\">(1: (&lt;event 1&gt;, &lt;event 2&gt;, ...),\n2: (&lt;event 1&gt;, &lt;event 2&gt;, ...),\n3: (&lt;event 1&gt;, &lt;event 2&gt;, ...),\n...\n12: (&lt;event 1&gt;, &lt;event 2&gt;, ...),\n)\n</code></pre>\n<p>This looks like a dictionary of type <code>(int, array)</code>. Unfortunately, in Typst, <a href=\"https://typst.app/docs/reference/foundations/dictionary/\"><code>dictionary</code></a> values are indexed by strings only, so you can’t have <code>int</code> keys. But the closest solution will still be:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let format-month(n) = (\"0\" + str(n)).slice(-2)\n#let pair-to-dict(pair) = { let (k, v) = pair; ((k): v) }\n#let belongs-to-month(month) = ((k, v)) =&gt; v.Date.slice(5, 7) == format-month(month)\n// This returns `dictionary` per event (`array` of `dictionary`).\n#let get-related-events(month) = {\n  (str(month): dict\n  .pairs()\n  .filter(belongs-to-month(month))\n  .map(pair-to-dict))\n}\n#let months = range(1, 13)\n#let month-events-dict = months.map(get-related-events).join()\n#month-events-dict\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/50cd7211d674aaab7a77e570e9dff275de8f627b.png\" data-download-href=\"https://forum.typst.app/uploads/default/50cd7211d674aaab7a77e570e9dff275de8f627b\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/50cd7211d674aaab7a77e570e9dff275de8f627b_2_235x500.png\" alt=\"image\" data-base62-sha1=\"bwOmuuvrXtfsLb6ODiaCxStUV8n\" width=\"235\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/50cd7211d674aaab7a77e570e9dff275de8f627b_2_235x500.png, https://forum.typst.app/uploads/default/original/1X/50cd7211d674aaab7a77e570e9dff275de8f627b.png 1.5x, https://forum.typst.app/uploads/default/original/1X/50cd7211d674aaab7a77e570e9dff275de8f627b.png 2x\" data-dominant-color=\"121411\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">281×596 28.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>But if you want to index by <code>int</code> rather than by <code>str</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let format-month(n) = (\"0\" + str(n)).slice(-2)\n#let pair-to-dict(pair) = { let (k, v) = pair; ((k): v) }\n#let belongs-to-month(month) = ((k, v)) =&gt; v.Date.slice(5, 7) == format-month(month)\n// This returns `array` of `dictionary`-events per month.\n#let get-related-events(month) = {\n  dict\n  .pairs()\n  .filter(belongs-to-month(month))\n  .map(pair-to-dict)\n}\n#let months = range(1, 13)\n#let month-events-dict = months.map(get-related-events)\n#month-events-dict\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/2d40af407499a3ca669b9d5decb90c8ca86feabe.png\" data-download-href=\"https://forum.typst.app/uploads/default/2d40af407499a3ca669b9d5decb90c8ca86feabe\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/2d40af407499a3ca669b9d5decb90c8ca86feabe_2_241x499.png\" alt=\"image\" data-base62-sha1=\"6sk4tGiAWBx5H0CKXZrsVnMzdpQ\" width=\"241\" height=\"499\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/2d40af407499a3ca669b9d5decb90c8ca86feabe_2_241x499.png, https://forum.typst.app/uploads/default/original/1X/2d40af407499a3ca669b9d5decb90c8ca86feabe.png 1.5x, https://forum.typst.app/uploads/default/original/1X/2d40af407499a3ca669b9d5decb90c8ca86feabe.png 2x\" data-dominant-color=\"121311\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">284×588 25.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>If you prefer to have less expressive/maintainable but much smaller code, here is a MWE:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 10cm, height: auto)\n#let yaml-string = \"\n\\\"Oolong Day\\\":\n  Date: 2024-08-20\n  Lead: baptiste\n  Purpose: Sipping\n\n\\\"Steep learning curve\\\":\n  Date: 2024-08-28\n  Lead: Tea master\n  Purpose: Engagement\n\n\\\"Gong fu cha vs instant powder\\\":\n  Date: 2024-09-04\n  Lead: All\n  Purpose: Inform\n\"\n#let dict = yaml.decode(yaml-string)\n#let month-events-dict = range(1, 13).map(month =&gt;\n  dict\n  .pairs()\n  .filter(\n    ((k, v)) =&gt; v.Date.slice(5, 7) == (\"0\" + str(month)).slice(-2)\n  )\n  .map(\n    ((k, v)) =&gt; ((k): v)\n  )\n)\n#month-events-dict\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/8adfac04a0c53136b5cd4c51651594fb6b9cc8de.png\" data-download-href=\"https://forum.typst.app/uploads/default/8adfac04a0c53136b5cd4c51651594fb6b9cc8de\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/8adfac04a0c53136b5cd4c51651594fb6b9cc8de_2_250x500.png\" alt=\"image\" data-base62-sha1=\"jOx6yUi4kgSwbE1pbzPYX8nW7CK\" width=\"250\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/8adfac04a0c53136b5cd4c51651594fb6b9cc8de_2_250x500.png, https://forum.typst.app/uploads/default/original/1X/8adfac04a0c53136b5cd4c51651594fb6b9cc8de.png 1.5x, https://forum.typst.app/uploads/default/original/1X/8adfac04a0c53136b5cd4c51651594fb6b9cc8de.png 2x\" data-dominant-color=\"111311\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">292×584 25.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>Ultimately, I think I provided enough examples so you can mix and match these solutions to get <em>yet another</em> output.</p>",
      "raw": "For input, let's use this (to make reproducible examples):\n\n```typ\n// #set page(width: 10cm, height: auto)\n#let yaml-string = \"\n\\\"Oolong Day\\\":\n  Date: 2024-08-20\n  Lead: baptiste\n  Purpose: Sipping\n\n\\\"Steep learning curve\\\":\n  Date: 2024-08-28\n  Lead: Tea master\n  Purpose: Engagement\n\n\\\"Gong fu cha vs instant powder\\\":\n  Date: 2024-09-04\n  Lead: All\n  Purpose: Inform\n\"\n#let dict = yaml.decode(yaml-string)\n#dict\n```\n\n[details=Output]\n![image|259x258](upload://bnFGvUhvxXsdeZyMBghsWroMMIq.png)\n[/details]\n\nIf you want to use 2-char string like you did here:\n\n```typ\n#(\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\").map(month => dict.pairs().filter(it => it.at(1).Date.slice(5,7) == month))\n```\n\nThen you can do something like this:\n\n```typ\n#let format-month(n) = (\"0\" + str(n)).slice(-2)\n#let months = range(12).map(i => format-month(i + 1))\n#let belongs-to-month(month) = ((k, v)) => v.Date.slice(5, 7) == month\n\n// This returns `array` of pairs per event\n// (`array` of `array`/tuple of `str` and `dictionary`).\n#let get-related-events(month) = dict.pairs().filter(belongs-to-month(month))\n#let per-month-events = months.map(get-related-events)\n#per-month-events\n```\n\n[details=Output]\n![image|237x500](upload://6uX0XdTSNTHm0nlsT1iUXQEYoqq.png)\n[/details]\n\nThis will get you `array` where each element is `array` for a given month. Each such element contain events represented by a tuple (array of event name and its data).\n\nIf you want to just group initial events into months without changing types:\n\n```typ\n#let format-month(n) = (\"0\" + str(n)).slice(-2)\n#let belongs-to-month(month) = ((k, v)) => v.Date.slice(5, 7) == month\n#let pair-to-dict(pair) = { let (k, v) = pair; ((k): v) }\n// This returns `dictionary` per event (`array` of `dictionary`).\n#let get-related-events(month) = {\n  dict\n  .pairs()\n  .filter(belongs-to-month(month))\n  .map(pair-to-dict)\n  .fold((:), (v, acc) => acc + v)\n  // let d = dict\n  // .pairs()\n  // .filter(belongs-to-month(month))\n  // .map(pair-to-dict)\n  // .join()\n  // if d == none { (:) } else { d }\n}\n#let months = range(12).map(i => format-month(i + 1))\n#let per-month-events = months.map(get-related-events)\n#per-month-events\n```\n\n[details=Output]\n![image|273x492](upload://7WFeMIbMSghFaSIMzFA3GTy4lx9.png)\n[/details]\n\nHere each month is an element of `array` which itself is a `dictionary` containing only necessary events.\n\nLooking at this:\n\n```plain\n(1: (<event 1>, <event 2>, ...),\n2: (<event 1>, <event 2>, ...),\n3: (<event 1>, <event 2>, ...),\n...\n12: (<event 1>, <event 2>, ...),\n)\n```\n\nThis looks like a dictionary of type `(int, array)`. Unfortunately, in Typst, [`dictionary`](https://typst.app/docs/reference/foundations/dictionary/) values are indexed by strings only, so you can't have `int` keys. But the closest solution will still be:\n\n```typ\n#let format-month(n) = (\"0\" + str(n)).slice(-2)\n#let pair-to-dict(pair) = { let (k, v) = pair; ((k): v) }\n#let belongs-to-month(month) = ((k, v)) => v.Date.slice(5, 7) == format-month(month)\n// This returns `dictionary` per event (`array` of `dictionary`).\n#let get-related-events(month) = {\n  (str(month): dict\n  .pairs()\n  .filter(belongs-to-month(month))\n  .map(pair-to-dict))\n}\n#let months = range(1, 13)\n#let month-events-dict = months.map(get-related-events).join()\n#month-events-dict\n```\n\n[details=Output]\n![image|235x500](upload://bwOmuuvrXtfsLb6ODiaCxStUV8n.png)\n[/details]\n\nBut if you want to index by `int` rather than by `str`:\n\n```typ\n#let format-month(n) = (\"0\" + str(n)).slice(-2)\n#let pair-to-dict(pair) = { let (k, v) = pair; ((k): v) }\n#let belongs-to-month(month) = ((k, v)) => v.Date.slice(5, 7) == format-month(month)\n// This returns `array` of `dictionary`-events per month.\n#let get-related-events(month) = {\n  dict\n  .pairs()\n  .filter(belongs-to-month(month))\n  .map(pair-to-dict)\n}\n#let months = range(1, 13)\n#let month-events-dict = months.map(get-related-events)\n#month-events-dict\n```\n\n[details=Output]\n![image|241x499](upload://6sk4tGiAWBx5H0CKXZrsVnMzdpQ.png)\n[/details]\n\nIf you prefer to have less expressive/maintainable but much smaller code, here is a MWE:\n\n```typ\n#set page(width: 10cm, height: auto)\n#let yaml-string = \"\n\\\"Oolong Day\\\":\n  Date: 2024-08-20\n  Lead: baptiste\n  Purpose: Sipping\n\n\\\"Steep learning curve\\\":\n  Date: 2024-08-28\n  Lead: Tea master\n  Purpose: Engagement\n\n\\\"Gong fu cha vs instant powder\\\":\n  Date: 2024-09-04\n  Lead: All\n  Purpose: Inform\n\"\n#let dict = yaml.decode(yaml-string)\n#let month-events-dict = range(1, 13).map(month =>\n  dict\n  .pairs()\n  .filter(\n    ((k, v)) => v.Date.slice(5, 7) == (\"0\" + str(month)).slice(-2)\n  )\n  .map(\n    ((k, v)) => ((k): v)\n  )\n)\n#month-events-dict\n```\n\n[details=Output]\n![image|250x500](upload://jOx6yUi4kgSwbE1pbzPYX8nW7CK.png)\n[/details]\n\nUltimately, I think I provided enough examples so you can mix and match these solutions to get *yet another* output.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 39.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:43.114160"
}
{
  "topic_metadata": {
    "id": 829,
    "title": "How do I change size and color of line numbering in codly?",
    "slug": "how-do-i-change-size-and-color-of-line-numbering-in-codly",
    "posts_count": 7,
    "created_at": "2024-10-01T08:57:18.282Z",
    "last_posted_at": "2025-03-21T07:25:50.213Z",
    "views": 294,
    "like_count": 3,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "Adrian_Weitkemper",
    "tags": [
      "scripting",
      "codly"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 639
  },
  "posts": [
    {
      "id": 3062,
      "post_number": 1,
      "username": "eduard",
      "name": "Eduard Antonovic Occhipinti",
      "created_at": "2024-10-01T08:57:18.398Z",
      "updated_at": "2024-10-01T08:57:18.398Z",
      "cooked": "<p>I know that the <code>codly</code> function accepts a <code>number-format</code> argument, but what would be the best way of making the numbering grey on a light grey background to better differentiate them from the actual code?</p>",
      "raw": "I know that the `codly` function accepts a `number-format` argument, but what would be the best way of making the numbering grey on a light grey background to better differentiate them from the actual code?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 1470.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 464
    },
    {
      "id": 3072,
      "post_number": 2,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2024-10-01T11:33:45.456Z",
      "updated_at": "2024-10-01T11:33:45.456Z",
      "cooked": "<p>Because I did not find a specific parameter for the styling of the numbering (apart from the the number-function argument), I tried to do something with that.<br>\nThere might be a more elegant way, but this is what I came up with:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/codly:1.0.0\": *\n#show: codly-init.with()\n#codly(zebra-fill: none)\n\n#codly(number-format: (n) =&gt; box(fill: luma(240))[#text(luma(100))[#str(n)]])\n\n```rust\npub fn main() {\n    println!(\"Hello, world!\");\n}\n``` // This comment is just because of formatting in the forum...\n\n</code></pre>\n<p>The result:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/f07c565a954813ad79bf01f94897af4a5fd18e7e.png\" alt=\"grafik\" data-base62-sha1=\"yjqZ1YTtCUmu7jb9eVs8e816MKW\" width=\"344\" height=\"97\"></p>\n<p>I can imagine this is not really what you are looking for, but maybe better than nothing for now. If you have questions about the code or something, feel free to ask :)</p>",
      "raw": "Because I did not find a specific parameter for the styling of the numbering (apart from the the number-function argument), I tried to do something with that. \nThere might be a more elegant way, but this is what I came up with: \n```typst\n#import \"@preview/codly:1.0.0\": *\n#show: codly-init.with()\n#codly(zebra-fill: none)\n\n#codly(number-format: (n) => box(fill: luma(240))[#text(luma(100))[#str(n)]])\n\n```rust\npub fn main() {\n    println!(\"Hello, world!\");\n}\n``` // This comment is just because of formatting in the forum...\n\n```\nThe result:\n![grafik|344x97](upload://yjqZ1YTtCUmu7jb9eVs8e816MKW.png)\n\n\nI can imagine this is not really what you are looking for, but maybe better than nothing for now. If you have questions about the code or something, feel free to ask :)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 30.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 3080,
      "post_number": 3,
      "username": "eduard",
      "name": "Eduard Antonovic Occhipinti",
      "created_at": "2024-10-01T12:37:22.006Z",
      "updated_at": "2024-10-01T12:37:22.006Z",
      "cooked": "<p>yes this kinda works, although I was thinking more of having the entire column where the numbers lie being light gray, kinda like you see in most text editors, I’m not really sure if there is a way to do so though but yours is already a good start, thanks for the suggestion!</p>",
      "raw": "yes this kinda works, although I was thinking more of having the entire column where the numbers lie being light gray, kinda like you see in most text editors, I'm not really sure if there is a way to do so though but yours is already a good start, thanks for the suggestion!",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 24.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 464
    },
    {
      "id": 3086,
      "post_number": 4,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2024-10-01T13:45:43.996Z",
      "updated_at": "2024-10-01T14:02:54.424Z",
      "cooked": "<p>I don’t know how to do that. I tried setting the height of the box, but then codly just adds space in between the lines. I looked through the documentation (of codly) briefly and I don’t think it is a thing at the moment. You could add a feature request/issue on <a href=\"https://github.com/Dherse/codly/issues\" rel=\"noopener nofollow ugc\">github</a> though so it might be added in the future.<br>\nIn case you are still thinking about changing the size of the numbers, here is an updated version with bigger text and bigger text highlighting:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/codly:1.0.0\": *\n#show: codly-init.with()\n#codly(zebra-fill: none)\n\n#codly(number-format: (n) =&gt; box(fill: luma(240), height: 1.5em, inset: 0.5em)[#text(luma(100), size: 1.5em)[#str(n)]])\n\n```rust\npub fn main() {\n    println!(\"Hello, world!\");\n}\n``` // This comment is just because of formatting in the forum...\n</code></pre>\n<p>I overlooked the size part because it was only in the headline. Sry for that <img src=\"https://forum.typst.app/images/emoji/apple/blush.png?v=12\" title=\":blush:\" class=\"emoji\" alt=\":blush:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "I don't know how to do that. I tried setting the height of the box, but then codly just adds space in between the lines. I looked through the documentation (of codly) briefly and I don't think it is a thing at the moment. You could add a feature request/issue on [github](https://github.com/Dherse/codly/issues) though so it might be added in the future. \nIn case you are still thinking about changing the size of the numbers, here is an updated version with bigger text and bigger text highlighting: \n```typst\n#import \"@preview/codly:1.0.0\": *\n#show: codly-init.with()\n#codly(zebra-fill: none)\n\n#codly(number-format: (n) => box(fill: luma(240), height: 1.5em, inset: 0.5em)[#text(luma(100), size: 1.5em)[#str(n)]])\n\n```rust\npub fn main() {\n    println!(\"Hello, world!\");\n}\n``` // This comment is just because of formatting in the forum...\n```\n\nI overlooked the size part because it was only in the headline. Sry for that :blush:",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 34.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 3090,
      "post_number": 5,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2024-10-01T14:00:31.245Z",
      "updated_at": "2024-10-01T14:06:07.263Z",
      "cooked": "<p>I actually found a way on accident <img src=\"https://forum.typst.app/images/emoji/apple/joy.png?v=12\" title=\":joy:\" class=\"emoji\" alt=\":joy:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nYou can add the <strong>outset</strong> property to the box (not inset) like this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/codly:1.0.0\": *\n#show: codly-init.with()\n#codly(zebra-fill: none)\n\n#codly(number-format: (n) =&gt; box(fill: luma(240), height: 1.5em, outset: 0.5em)[#text(luma(100), size: 1.5em)[#str(n)]])\n\n```rust\npub fn main() {\n    println!(\"Hello, world!\");\n}\n``` // you know the drill ;)\n</code></pre>\n<p>The result:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/570ce2a934215977014f3d3554fc8b6f28d4d768.png\" alt=\"grafik\" data-base62-sha1=\"cq5968O8ZbNrNmFQ6WFF7sYWdTO\" width=\"611\" height=\"97\"><br>\nThe outset does not effect the layout (so the surrounding styling) which makes it perfect for you usecase. It actually adds outset in the x and the y direction, so you might want to do something like <code>outset: (x: 0.5em, y: 1em)</code> depending on the size you want your numbering to be.<br>\nI’m still kind of a nooby as well, but now I got it :)</p>",
      "raw": "I actually found a way on accident :joy: \nYou can add the **outset** property to the box (not inset) like this: \n```typst\n#import \"@preview/codly:1.0.0\": *\n#show: codly-init.with()\n#codly(zebra-fill: none)\n\n#codly(number-format: (n) => box(fill: luma(240), height: 1.5em, outset: 0.5em)[#text(luma(100), size: 1.5em)[#str(n)]])\n\n```rust\npub fn main() {\n    println!(\"Hello, world!\");\n}\n``` // you know the drill ;)\n```\nThe result: \n![grafik|611x97](upload://cq5968O8ZbNrNmFQ6WFF7sYWdTO.png)\nThe outset does not effect the layout (so the surrounding styling) which makes it perfect for you usecase. It actually adds outset in the x and the y direction, so you might want to do something like `outset: (x: 0.5em, y: 1em)` depending on the size you want your numbering to be. \nI'm still kind of a nooby as well, but now I got it :)",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 79.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 3093,
      "post_number": 6,
      "username": "eduard",
      "name": "Eduard Antonovic Occhipinti",
      "created_at": "2024-10-01T14:15:36.109Z",
      "updated_at": "2024-10-01T14:19:04.077Z",
      "cooked": "<p>That’s kinda awesome, I like how hacky it is, thank you very much! I think this is a very popular style for raw blocks, I’ll look into making an issue on the <code>codly</code> Github about it</p>\n<p>edit:</p>\n<p>In practice, this approach breaks a bit easily but I don’t think there currently is a better way to do this, I’ll probably avoid the grey background for the moment</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/d19c6800a3dbf7f6ef8b8a044df138ce9b48d0a0.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/d19c6800a3dbf7f6ef8b8a044df138ce9b48d0a0\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/d19c6800a3dbf7f6ef8b8a044df138ce9b48d0a0_2_690x373.jpeg\" alt=\"image\" data-base62-sha1=\"tUiTbTbHtneExM26UC5YKVAGNY4\" width=\"690\" height=\"373\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/d19c6800a3dbf7f6ef8b8a044df138ce9b48d0a0_2_690x373.jpeg, https://forum.typst.app/uploads/default/optimized/1X/d19c6800a3dbf7f6ef8b8a044df138ce9b48d0a0_2_1035x559.jpeg 1.5x, https://forum.typst.app/uploads/default/optimized/1X/d19c6800a3dbf7f6ef8b8a044df138ce9b48d0a0_2_1380x746.jpeg 2x\" data-dominant-color=\"ECEBEC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1904×1032 208 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "That's kinda awesome, I like how hacky it is, thank you very much! I think this is a very popular style for raw blocks, I'll look into making an issue on the `codly` Github about it\n\nedit:\n\nIn practice, this approach breaks a bit easily but I don't think there currently is a better way to do this, I'll probably avoid the grey background for the moment\n\n![image|690x373](upload://tUiTbTbHtneExM26UC5YKVAGNY4.jpeg)",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 14.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 464
    },
    {
      "id": 10058,
      "post_number": 7,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-21T07:25:50.213Z",
      "updated_at": "2025-03-21T07:25:50.213Z",
      "cooked": "<p>Could you please provide the code? Maybe it is fixable. To me it looks like overflow which is put into the next line is causing the problem, because then you have one number for two lines of code.</p>",
      "raw": "Could you please provide the code? Maybe it is fixable. To me it looks like overflow which is put into the next line is causing the problem, because then you have one number for two lines of code.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 12,
      "score": 2.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    }
  ],
  "scraped_at": "2025-06-10T09:57:42.394444"
}
{
  "topic_metadata": {
    "id": 832,
    "title": "Has anyone seen a Zotero to Hyagriva plugin?",
    "slug": "has-anyone-seen-a-zotero-to-hyagriva-plugin",
    "posts_count": 3,
    "created_at": "2024-10-01T10:02:35.420Z",
    "last_posted_at": "2024-10-01T13:48:42.336Z",
    "views": 489,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "laurmaedje",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 123
  },
  "posts": [
    {
      "id": 3065,
      "post_number": 1,
      "username": "Daniel",
      "name": "Daniel Cook",
      "created_at": "2024-10-01T10:02:35.568Z",
      "updated_at": "2024-10-01T10:02:35.568Z",
      "cooked": "<p>Title says it all.</p>\n<p>Currently I used betterbibtex plugin for Zotero to export a biblatex file. I wonder if there is something similar but in hyagriva format.</p>\n<p>More information, I use a command in my makefile to curl the server from Zotero/betterbibtex and it gives me the result in biblatex format. Would be nice to have a tool that does this in hyagriva format.</p>\n<p>I tried searching online. Online search is bad now.</p>",
      "raw": "Title says it all.\n\nCurrently I used betterbibtex plugin for Zotero to export a biblatex file. I wonder if there is something similar but in hyagriva format.\n\nMore information, I use a command in my makefile to curl the server from Zotero/betterbibtex and it gives me the result in biblatex format. Would be nice to have a tool that does this in hyagriva format.\n\nI tried searching online. Online search is bad now.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 2179.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 94
    },
    {
      "id": 3066,
      "post_number": 2,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-01T10:06:06.357Z",
      "updated_at": "2024-10-01T10:06:06.357Z",
      "cooked": "<p>You could convert the biblatex to hayagriva using <a href=\"https://github.com/typst/hayagriva?tab=readme-ov-file#installation\">hayagriva’s CLI</a>. I’m not aware of a direct exporter for Zotero.</p>",
      "raw": "You could convert the biblatex to hayagriva using [hayagriva's CLI](https://github.com/typst/hayagriva?tab=readme-ov-file#installation). I'm not aware of a direct exporter for Zotero.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 99.4,
      "accepted_answer": true,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 3088,
      "post_number": 3,
      "username": "Daniel",
      "name": "Daniel Cook",
      "created_at": "2024-10-01T13:48:42.336Z",
      "updated_at": "2024-10-01T13:48:42.336Z",
      "cooked": "<p>Thank you. I prefer using hayagriva’s cleaner yaml format. I can easily add this to my makefile.</p>",
      "raw": "Thank you. I prefer using hayagriva's cleaner yaml format. I can easily add this to my makefile.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 43,
      "score": 58.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 94
    }
  ],
  "scraped_at": "2025-06-10T09:57:41.646695"
}
{
  "topic_metadata": {
    "id": 833,
    "title": "Is anybody able to use templates right now?",
    "slug": "is-anybody-able-to-use-templates-right-now",
    "posts_count": 4,
    "created_at": "2024-10-01T10:50:16.798Z",
    "last_posted_at": "2024-10-01T16:17:06.157Z",
    "views": 71,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Mathemensch",
    "tags": [
      "templates"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 52
  },
  "posts": [
    {
      "id": 3068,
      "post_number": 1,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2024-10-01T10:50:16.947Z",
      "updated_at": "2024-10-01T10:50:16.947Z",
      "cooked": "<p>When I try to use any template I get the following error:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/86f78517946fc11333fab450bb6b2dcb67e79d59.png\" data-download-href=\"https://forum.typst.app/uploads/default/86f78517946fc11333fab450bb6b2dcb67e79d59\" title=\"SCR-20241001-lmvx\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/86f78517946fc11333fab450bb6b2dcb67e79d59_2_690x103.png\" alt=\"SCR-20241001-lmvx\" data-base62-sha1=\"jfYhYBOZxydPvNgPraCsqsGdZln\" width=\"690\" height=\"103\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/86f78517946fc11333fab450bb6b2dcb67e79d59_2_690x103.png, https://forum.typst.app/uploads/default/optimized/1X/86f78517946fc11333fab450bb6b2dcb67e79d59_2_1035x154.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/86f78517946fc11333fab450bb6b2dcb67e79d59_2_1380x206.png 2x\" data-dominant-color=\"F0BFC2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">SCR-20241001-lmvx</span><span class=\"informations\">1492×224 49.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "When I try to use any template I get the following error:\n![SCR-20241001-lmvx|690x103](upload://jfYhYBOZxydPvNgPraCsqsGdZln.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 20.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 3069,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-10-01T11:00:27.153Z",
      "updated_at": "2024-10-01T11:00:27.153Z",
      "cooked": "<p>I just tried creating a document with the <code>minimalbc</code> template and it worked.</p>",
      "raw": "I just tried creating a document with the `minimalbc` template and it worked.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 10.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 3100,
      "post_number": 3,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2024-10-01T15:11:53.439Z",
      "updated_at": "2024-10-01T15:11:53.439Z",
      "cooked": "<p>Now it’s working.<br>\nMaybe a networking issue at my school.</p>",
      "raw": "Now it's working.\nMaybe a networking issue at my school.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 3104,
      "post_number": 4,
      "username": "Sinthoras",
      "name": "",
      "created_at": "2024-10-01T16:17:06.157Z",
      "updated_at": "2024-10-01T16:17:06.157Z",
      "cooked": "<p>Then you can probably categorize the post as solved.^^</p>",
      "raw": "Then you can probably categorize the post as solved.^^",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 3.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 511
    }
  ],
  "scraped_at": "2025-06-10T09:57:40.949060"
}
{
  "topic_metadata": {
    "id": 834,
    "title": "How to make a block quote with a border on the left side, like on GitHub?",
    "slug": "how-to-make-a-block-quote-with-a-border-on-the-left-side-like-on-github",
    "posts_count": 6,
    "created_at": "2024-10-01T11:31:43.204Z",
    "last_posted_at": "2024-10-01T20:51:56.477Z",
    "views": 259,
    "like_count": 9,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "gezepi",
    "tags": [],
    "category_id": 5,
    "participant_count": 6,
    "word_count": 357
  },
  "posts": [
    {
      "id": 3071,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-01T11:31:43.290Z",
      "updated_at": "2024-10-02T19:29:17.081Z",
      "cooked": "<p>How is it possible to make block quotes have left border, like e.g. on GitHub?</p>\n<blockquote>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/d5078826c08bc52fd76bef2d3300945bcf6e50ac.png\" alt=\"image\" data-base62-sha1=\"uoxPXEZqJcQGMKDr3bjMzIWAdbe\" width=\"250\" height=\"151\"></p>\n</blockquote>\n<p>I tried things like</p>\n<pre><code class=\"lang-auto\">#show quote.where(block: true): it =&gt; block(stroke: left + 2pt + gray, width: 100%)\n</code></pre>\n<p>but haven’t succeeded. Probably there is an error somewhere.</p>",
      "raw": "How is it possible to make block quotes have left border, like e.g. on GitHub?\n\n> ![image|334x202, 75%](upload://uoxPXEZqJcQGMKDr3bjMzIWAdbe.png)\n\nI tried things like\n\n```\n#show quote.where(block: true): it => block(stroke: left + 2pt + gray, width: 100%)\n```\n\nbut haven't succeeded. Probably there is an error somewhere.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 1057.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 3074,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-10-01T11:44:19.691Z",
      "updated_at": "2024-10-01T11:44:19.691Z",
      "cooked": "<p>You almost had it.  Here’s an example that works:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show quote.where(block: true): block.with(stroke: (left:2pt + gray, rest: none))\n\n#quote(block:true, lorem(50))\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/f1e2c21752e068e1362959dc6a417dac174e2682.png\" alt=\"image\" data-base62-sha1=\"yvOTE2zqwc1V0mThfDdzUm86JMu\" width=\"688\" height=\"148\"></p>\n</details>\n<p>One issue with your <code>show</code> code is that it consumes the content as <code>it</code>, but does not include it in what is returned.  You can choose to include it yourself, but that often requires rebuilding some styling.  By doing a <code>set</code> you can apply the styling you want over top the default.</p>",
      "raw": "You almost had it.  Here's an example that works:\n```typ\n#show quote.where(block: true): block.with(stroke: (left:2pt + gray, rest: none))\n\n#quote(block:true, lorem(50))\n```\n\n[details=\"Output\"]\n![image|688x148](upload://yvOTE2zqwc1V0mThfDdzUm86JMu.png)\n[/details]\n\nOne issue with your `show` code is that it consumes the content as `it`, but does not include it in what is returned.  You can choose to include it yourself, but that often requires rebuilding some styling.  By doing a `set` you can apply the styling you want over top the default.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 37,
      "score": 47.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 3120,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T18:24:27.231Z",
      "updated_at": "2024-10-01T18:24:27.231Z",
      "cooked": "<p>Alternatively, as to not wrap quote into a second block element:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#place(block(width: 100%, height: 100%, fill: gray))\n// #show quote.where(block: true): block.with(\n//   stroke: (left: 2pt + red, rest: none),\n// )\n#show quote.where(block: true): set block(\n  stroke: (left: 2pt + red, rest: none),\n  outset: (left: 1em),\n)\n#quote(block: true, lorem(50))\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/bca147f85784caf5bcdef8f13e64396aefc40658.png\" alt=\"image\" data-base62-sha1=\"qUHj4IpLY075i6MN1sxZXxyrA9O\" width=\"158\" height=\"184\"></p>\n<p><a href=\"https://typst.app/docs/reference/layout/block/#parameters-outset\"><code>outset</code></a> doesn’t affect the layout, so I think this is totally safe to do.</p>",
      "raw": "Alternatively, as to not wrap quote into a second block element:\n\n```typ\n#place(block(width: 100%, height: 100%, fill: gray))\n// #show quote.where(block: true): block.with(\n//   stroke: (left: 2pt + red, rest: none),\n// )\n#show quote.where(block: true): set block(\n  stroke: (left: 2pt + red, rest: none),\n  outset: (left: 1em),\n)\n#quote(block: true, lorem(50))\n```\n\n![image|158x184](upload://qUHj4IpLY075i6MN1sxZXxyrA9O.png)\n\n[`outset`](https://typst.app/docs/reference/layout/block/#parameters-outset) doesn't affect the layout, so I think this is totally safe to do.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 41.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3131,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-01T20:43:24.760Z",
      "updated_at": "2024-10-01T20:43:24.760Z",
      "cooked": "<p>One downside of this is unfortunately that you could accidentally style nested blocks as well. It’s probably not common in quotes, but if there’s for example a code block, a figure, or a heading in there, then that element will have a visible left border as well.</p>\n<p>I agree that it would be cleaner to not introduce a new block, if it weren’t for that.</p>",
      "raw": "One downside of this is unfortunately that you could accidentally style nested blocks as well. It's probably not common in quotes, but if there's for example a code block, a figure, or a heading in there, then that element will have a visible left border as well.\n\nI agree that it would be cleaner to not introduce a new block, if it weren't for that.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 31,
      "score": 61.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3133,
      "post_number": 5,
      "username": "maucejo",
      "name": "Mathieu Aucejo",
      "created_at": "2024-10-01T20:50:36.681Z",
      "updated_at": "2024-10-01T20:50:36.681Z",
      "cooked": "<p>Did you try <code>showybox</code> ?</p>",
      "raw": "Did you try `showybox` ?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 5.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 125
    },
    {
      "id": 3135,
      "post_number": 6,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-01T20:51:56.477Z",
      "updated_at": "2024-10-01T20:51:56.477Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"SillyFreak\" data-post=\"4\" data-topic=\"834\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/sillyfreak/48/1483_2.png\" class=\"avatar\"> SillyFreak:</div>\n<blockquote>\n<p>One downside of this is unfortunately that you could accidentally style nested blocks as well. It’s probably not common in quotes, but if there’s for example a code block, a figure, or a heading in there, then that element will have a visible left border as well.</p>\n</blockquote>\n</aside>\n<p>We desperately need non-recursive show-set. <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "[quote=\"SillyFreak, post:4, topic:834\"]\nOne downside of this is unfortunately that you could accidentally style nested blocks as well. It’s probably not common in quotes, but if there’s for example a code block, a figure, or a heading in there, then that element will have a visible left border as well.\n[/quote]\n\nWe desperately need non-recursive show-set. :slight_smile:",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 3,
      "reads": 30,
      "score": 81.0,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    }
  ],
  "scraped_at": "2025-06-10T09:57:40.244495"
}
{
  "topic_metadata": {
    "id": 838,
    "title": "How to add content overlapping left margin?",
    "slug": "how-to-add-content-overlapping-left-margin",
    "posts_count": 4,
    "created_at": "2024-10-01T13:55:28.616Z",
    "last_posted_at": "2024-10-01T20:44:27.525Z",
    "views": 194,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "layout",
      "latex-migration"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 1335
  },
  "posts": [
    {
      "id": 3089,
      "post_number": 1,
      "username": "lounres",
      "name": "Gleb Minaev",
      "created_at": "2024-10-01T13:55:28.740Z",
      "updated_at": "2024-10-10T14:43:49.022Z",
      "cooked": "<p>Hi, everyone!</p>\n<p>I have the following LaTeX document that I want to migrate to Typst.<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/5693fd80d75e1356a01e1885d1126b77569b227a.png\" data-download-href=\"https://forum.typst.app/uploads/default/5693fd80d75e1356a01e1885d1126b77569b227a\" title=\"изображение\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/5693fd80d75e1356a01e1885d1126b77569b227a_2_480x500.png\" alt=\"изображение\" data-base62-sha1=\"clU846HDSP54RvupF4tepYOeXto\" width=\"480\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/5693fd80d75e1356a01e1885d1126b77569b227a_2_480x500.png, https://forum.typst.app/uploads/default/optimized/1X/5693fd80d75e1356a01e1885d1126b77569b227a_2_720x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/5693fd80d75e1356a01e1885d1126b77569b227a_2_960x1000.png 2x\" data-dominant-color=\"EFEFEF\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">изображение</span><span class=\"informations\">1240×1291 369 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Right now, I’m stuck on adding triangles to the left from each “Определение” declaration (and just simple comments). I tried using the following</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let accent = [#context{h(-measure(sym.triangle.stroked.r).width)}#sym.triangle.stroked.r]\n</code></pre>\n<p>I thought writing</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#accent Слова могут быть как конечными, так и бесконечными (в одну или в обе стороны). В~дальнейшем, если не оговорено иное, под словами подразумеваются конечные слова.\n</code></pre>\n<p>should add horizontal shift of the whole line by width of the triangle. But result still looks a bit shifted to the right:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/5b60943acec942fdfa8ef2482be7a48a21c3b194.png\" alt=\"изображение\" data-base62-sha1=\"d2mmU1cyVAjYzdVjcu4NzVmM0iU\" width=\"362\" height=\"226\"></p>\n<p>Looks like the problem is the space symbol between the triangle and the text. But I would like to leave it and to just shift the line further to the left.</p>",
      "raw": "Hi, everyone!\n\nI have the following LaTeX document that I want to migrate to Typst.\n![изображение|480x500](upload://clU846HDSP54RvupF4tepYOeXto.png)\n\nRight now, I'm stuck on adding triangles to the left from each \"Определение\" declaration (and just simple comments). I tried using the following\n```typst\n#let accent = [#context{h(-measure(sym.triangle.stroked.r).width)}#sym.triangle.stroked.r]\n```\nI thought writing\n```typst\n#accent Слова могут быть как конечными, так и бесконечными (в одну или в обе стороны). В~дальнейшем, если не оговорено иное, под словами подразумеваются конечные слова.\n```\nshould add horizontal shift of the whole line by width of the triangle. But result still looks a bit shifted to the right:\n![изображение|362x226](upload://d2mmU1cyVAjYzdVjcu4NzVmM0iU.png)\n\nLooks like the problem is the space symbol between the triangle and the text. But I would like to leave it and to just shift the line further to the left.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 548.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 510
    },
    {
      "id": 3094,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-01T14:19:18.211Z",
      "updated_at": "2024-10-01T14:53:04.211Z",
      "cooked": "<p>You can use <code>place</code> to add content without affecting the layout of other content:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let accent = context place(\n  dx: -measure(sym.triangle.stroked.r).width - 0.5em,\n  sym.triangle.stroked.r,\n)\n#accent #lorem(30)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/1145b8daf7e6bacd8c93c391f57f2e227fd4d06e.png\" data-download-href=\"https://forum.typst.app/uploads/default/1145b8daf7e6bacd8c93c391f57f2e227fd4d06e\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/1145b8daf7e6bacd8c93c391f57f2e227fd4d06e_2_690x74.png\" alt=\"image\" data-base62-sha1=\"2sNuKcfJGXzG9wCQNTS2gy46D8i\" width=\"690\" height=\"74\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/1145b8daf7e6bacd8c93c391f57f2e227fd4d06e_2_690x74.png, https://forum.typst.app/uploads/default/original/1X/1145b8daf7e6bacd8c93c391f57f2e227fd4d06e.png 1.5x, https://forum.typst.app/uploads/default/original/1X/1145b8daf7e6bacd8c93c391f57f2e227fd4d06e.png 2x\" data-dominant-color=\"ECECEC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">783×84 24.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>(If using a fixed symbol like in this example, I would get rid of the <code>context</code> and <code>measure</code> and just tune the <code>-0.5em</code> to my liking.)</p>\n<p>I think this works fine if you use <code>place</code> at the start of a paragraph. In the middle of a paragraph it would break the paragraph in two. In this case you’d have to take extra precautions as documented <a href=\"https://github.com/typst/typst/blob/ae7787c8202cabf9d01c2d17bbc93c5d372dd842/crates/typst/src/layout/place.rs#L42\" rel=\"noopener nofollow ugc\">here</a> (this will be in the documentation of the next release i.e. typst 0.12.0).</p>",
      "raw": "You can use `place` to add content without affecting the layout of other content:\n\n```typ\n#let accent = context place(\n  dx: -measure(sym.triangle.stroked.r).width - 0.5em,\n  sym.triangle.stroked.r,\n)\n#accent #lorem(30)\n```\n\n![image|690x74](upload://2sNuKcfJGXzG9wCQNTS2gy46D8i.png)\n\n(If using a fixed symbol like in this example, I would get rid of the `context` and `measure` and just tune the `-0.5em` to my liking.)\n\nI think this works fine if you use `place` at the start of a paragraph. In the middle of a paragraph it would break the paragraph in two. In this case you'd have to take extra precautions as documented [here](https://github.com/typst/typst/blob/ae7787c8202cabf9d01c2d17bbc93c5d372dd842/crates/typst/src/layout/place.rs#L42) (this will be in the documentation of the next release i.e. typst 0.12.0).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 41,
      "score": 53.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3096,
      "post_number": 3,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-01T14:27:04.422Z",
      "updated_at": "2024-10-01T14:27:24.751Z",
      "cooked": "<p>Or you could use a trick that’s also mentioned in that new documentation: to get rid of the space caused by the space character in markup after <code>#accent</code>, add a weak horizontal spacing <code>h(0pt, weak: true)</code> at the end of your <code>accent</code> code.</p>",
      "raw": "Or you could use a trick that's also mentioned in that new documentation: to get rid of the space caused by the space character in markup after `#accent`, add a weak horizontal spacing `h(0pt, weak: true)` at the end of your `accent` code.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 7.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3132,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T20:44:27.525Z",
      "updated_at": "2024-10-04T20:26:55.272Z",
      "cooked": "<p>Hello, comrade! If you want to mirror your LaTeX output you can use <a href=\"https://typst.app/docs/reference/model/list/#parameters-marker\"><code>list.marker</code></a> to change the used marker (or set an array of markers for nested lists).</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/numberingx:0.0.1\"\n// #let date = state(\"lecture-date\")\n#let date = datetime(year: 2023, month: 3, day: 1)\n\n#set page(\n  margin: 2.2cm,\n  header: context [Листок #here().page()#h(1fr)#date.display(\"[month].[year]\")]\n  // header: context {\n  //   let d = if date.at(here()) != none {date.get().display(\"[month].[year]\")}\n  //   [Листок #here().page()#h(1fr)#d]\n  // }\n)\n#set text(12pt, lang: \"ru\")\n#set par(justify: true)\n#set list(marker: sym.triangle.stroked.r)\n#show heading: set align(center)\n#show heading: set block(spacing: 1.5em)\n\n// Doesn't work on the first page. :(\n// #date.update(datetime(year: 2023, month: 3, day: 1))\n\n= Многочлены и поля I. Корни и коэффициенты\n\n- Слова могут быть как конечными, так и бесконечными (в одну или в обе стороны).\n  В~дальнейшем, если не оговорено иное, под словами подразумеваются конечные\n  слова.\n\n- *Определение 1*. Монóм (от одной переменной, с коэффициентами в поле $K$) ---\n  это формальная запись вида $a x^n$ ($n$ --- целое неотрицательное число, $a$\n  --- элемент поля $K$, $x$ --- формальный символ).\n\n  #h(1em)_Кольцом многочленов_ от одной переменной над полем $K$ называется\n  множество $K[x]$ конечных формальных сумм мономов#footnote[примечание] с\n  естественными операциям#highlight[и].\n\n  *Задача 1*. Вычислите свободный член многочлена\n  $underbrace((...((x - 2)^2 - 2)^2... - 2)^2, 200 \"пар скобок\")$.\n\n  // *Задача 2*. а) Найдите сумму коэффициентов многочлена $(1 - x + x^2)^n$.\\\n  // б) $P$ --- ненулевой многочлен с действительными коэффициентами. Могут ли все\n  // коэффициенты многочлена $P(x)(x - 1)$ быть неотрицательны?\n\n  #set enum(numbering: numberingx.formatter(\"{lower-russian})\"))\n  *Задача 2*.\n  + Найдите сумму коэффициентов многочлена $(1 - x + x^2)^n$.\n  + $P$ --- ненулевой многочлен с действительными коэффициентами. Могут ли все\n    коэффициенты многочлена $P(x)(x - 1)$ быть неотрицательны?\n\n  *Задача 3*. Вычислите $mat(100;0) + 4mat(100;2) + ... + 2^100mat(100;100)$.\n\n  *Задача 4*.\n  + Пусть $A$, $B$ --- многочлены над полем $K$, $A != 0$. Докажите, что $B$\n    ровно одним образом можно представить в виде $A Q + R$, где $Q, R in K[x],\n    deg R &lt; deg A$ (степень нулевого многочлена мы считаем равной $-oo$).\n  + Верно ли это для многочленов над кольцом целых чисел?\n\n- *Определение 2*. Многочлены $Q$ и $R$ из предыдущей задачи называются,\n  соответственно, _неполным частным_ и _остатком_ при делении многочлена $B$ на\n  многочлен $A$.\n\n  *Задача 5*. Разделите с остатком $x^100$ на $x - 1$ и на $x + 1$.\n\n  *Задача 6*. Докажите, что остаток от деления многочлена на $(x - a)$ есть\n  значение этого многочлена в точке $a$ (\"теорема Безу\"). В частности, если\n  $x_0$ --- корень многочлена $P$, то $P$ делится на многочлен $(x - x_0)$.\n\n- *Определение 3*. Если многочлен $P$ делится на $(x - x_0)^k$, говорят, что\n  $x_0$ является корнем многочлена $P$ _кратности_ не менее $k$.\n\n  *Задача 7*. Докажите, что многочлен степени $n$ имеет не более $n$ корней.\n  Докажите, что если два многочлена степени не выше $n$ совпадают в $(n + 1)$\n  точке, то они равны.\n\n  *Задача 8*. Многочлен с действительными коэффициентами в целых точках\n  принимает целые значения. Обязательно ли все его коэффициенты целые?\n  Рациональные?\n\n  *Задача 9*. Приведите пример двух различных многочленов над каким-то полем $K$,\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<div align=\"center\">\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/6d9d9e507c91dc4e4b27d2e03fd6ae55c20513e7.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/6d9d9e507c91dc4e4b27d2e03fd6ae55c20513e7\" title=\"out\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/6d9d9e507c91dc4e4b27d2e03fd6ae55c20513e7_2_353x500.jpeg\" alt=\"out\" data-base62-sha1=\"fDHJTeTWSRDxCNuS79rvJCTG0w7\" width=\"353\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/6d9d9e507c91dc4e4b27d2e03fd6ae55c20513e7_2_353x500.jpeg, https://forum.typst.app/uploads/default/optimized/1X/6d9d9e507c91dc4e4b27d2e03fd6ae55c20513e7_2_529x750.jpeg 1.5x, https://forum.typst.app/uploads/default/optimized/1X/6d9d9e507c91dc4e4b27d2e03fd6ae55c20513e7_2_706x1000.jpeg 2x\" data-dominant-color=\"F3F3F3\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">out</span><span class=\"informations\">1191×1684 159 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</div>\n</details>\n<details>\n<summary>\nOutput (dark mode)</summary>\n<div align=\"center\">\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/f516b959323179d13e2d08caa9ad52d98c1262af.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/f516b959323179d13e2d08caa9ad52d98c1262af\" title=\"out_inverted\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/f516b959323179d13e2d08caa9ad52d98c1262af_2_353x500.jpeg\" alt=\"out_inverted\" data-base62-sha1=\"yY9Fj2eTgbNmk25TsGpdszXNmp1\" width=\"353\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/f516b959323179d13e2d08caa9ad52d98c1262af_2_353x500.jpeg, https://forum.typst.app/uploads/default/optimized/1X/f516b959323179d13e2d08caa9ad52d98c1262af_2_529x750.jpeg 1.5x, https://forum.typst.app/uploads/default/optimized/1X/f516b959323179d13e2d08caa9ad52d98c1262af_2_706x1000.jpeg 2x\" data-dominant-color=\"0D0D0D\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">out_inverted</span><span class=\"informations\">1191×1684 322 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</div>\n</details>\n<p>I found one typo, BTW. I highlighted it.</p>\n<p>As a side note, I want to say that the topic title doesn’t make sense to me, so you probably should rephrase the question or describe it to me and I will come up with something. :)</p>\n<hr>\n<h3><a name=\"p-3132-typst-v0120-update-1\" class=\"anchor\" href=\"#p-3132-typst-v0120-update-1\"></a>Typst v0.12.0 update</h3>\n<p>In case the date is updated multiple times in the document, now you can set this up with:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">...\n// #let date = state(\"lecture-date\", datetime(year: 2023, month: 3, day: 1))\n#let date = state(\"lecture-date\")\n\n#set page(\n  margin: 2.2cm,\n  // header: context [Листок #here().page()#h(1fr)#date.display(\"[month].[year]\")]\n  header: context {\n    let d = if date.at(here()) != none {date.get().display(\"[month].[year]\")}\n    [Листок #here().page()#h(1fr)#d]\n  }\n)\n...\n\n// Should be added before any content on the first page.\n#date.update(datetime(year: 2023, month: 3, day: 1))\n#pagebreak(weak: true) // Hack so that the update is seen on the first page.\n\n#lorem(1000) // First page content.\n\n// Update the \"current\" date:\n#date.update(datetime(year: 2023, month: 4, day: 1))\n// #pagebreak(weak: true) // Use this if you want to have a new \"lecture\"\n// to start at the top of a new page. Otherwise the new date will only show up\n// if this function call will be added on the first page.\n</code></pre>\n<p>If you don’t mind setting the date inside your set/show rules/template section, you can do this for the first page:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let date = state(\"lecture-date\", datetime(year: 2023, month: 3, day: 1))\n</code></pre>\n<p>Also using <a href=\"https://forum.typst.app/t/can-you-make-a-horizontal-enum-list/877/2\" class=\"inline-onebox\">Can you make a horizontal `enum`/`list`? - #2 by ludwig</a> as a reference I was able to perfectly copy the enum problem № 2 by still using the enum sugar syntax:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/numberingx:0.0.1\"\n\n#let horizontal-enum = it =&gt; {\n  it\n  .children\n  .enumerate(start: it.start)\n  .map(((n, child)) =&gt; numbering(it.numbering, n) + \" \" + child.body)\n  .join(linebreak())\n}\n\n#set page(margin: 2.2cm)\n#set text(12pt, lang: \"ru\")\n#set par(justify: true)\n#set list(marker: sym.triangle.stroked.r)\n\n- *Определение 1*. Монóм (от одной переменной, с коэффициентами в поле $K$) ---\n  это формальная запись вида $a x^n$ ($n$ --- целое неотрицательное число, $a$\n  --- элемент поля $K$, $x$ --- формальный символ).\n\n  #show enum: horizontal-enum\n  #set enum(numbering: numberingx.formatter(\"{lower-russian})\"))\n  *Задача 2*.\n  + Найдите сумму коэффициентов многочлена $(1 - x + x^2)^n$.\n  + $P$ --- ненулевой многочлен с действительными коэффициентами. Могут ли все\n    коэффициенты многочлена $P(x)(x - 1)$ быть неотрицательны?\n\n  *Задача 3*. Вычислите $mat(100;0) + 4mat(100;2) + ... + 2^100mat(100;100)$.\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/33823287a377a0617376b5d16bb2633006fa00b8.png\" alt=\"image\" data-base62-sha1=\"7lFirXS75FoitMlk8rHy2u8qAUE\" width=\"593\" height=\"189\"></p>\n<p>This one, however, also works in v0.11.1. You can put the <code>enum</code> set/show rules at the start of the file, but depending on your document structure/content you might want to avoid it.</p>",
      "raw": "Hello, comrade! If you want to mirror your LaTeX output you can use [`list.marker`](https://typst.app/docs/reference/model/list/#parameters-marker) to change the used marker (or set an array of markers for nested lists).\n\n```typ\n#import \"@preview/numberingx:0.0.1\"\n// #let date = state(\"lecture-date\")\n#let date = datetime(year: 2023, month: 3, day: 1)\n\n#set page(\n  margin: 2.2cm,\n  header: context [Листок #here().page()#h(1fr)#date.display(\"[month].[year]\")]\n  // header: context {\n  //   let d = if date.at(here()) != none {date.get().display(\"[month].[year]\")}\n  //   [Листок #here().page()#h(1fr)#d]\n  // }\n)\n#set text(12pt, lang: \"ru\")\n#set par(justify: true)\n#set list(marker: sym.triangle.stroked.r)\n#show heading: set align(center)\n#show heading: set block(spacing: 1.5em)\n\n// Doesn't work on the first page. :(\n// #date.update(datetime(year: 2023, month: 3, day: 1))\n\n= Многочлены и поля I. Корни и коэффициенты\n\n- Слова могут быть как конечными, так и бесконечными (в одну или в обе стороны).\n  В~дальнейшем, если не оговорено иное, под словами подразумеваются конечные\n  слова.\n\n- *Определение 1*. Монóм (от одной переменной, с коэффициентами в поле $K$) ---\n  это формальная запись вида $a x^n$ ($n$ --- целое неотрицательное число, $a$\n  --- элемент поля $K$, $x$ --- формальный символ).\n\n  #h(1em)_Кольцом многочленов_ от одной переменной над полем $K$ называется\n  множество $K[x]$ конечных формальных сумм мономов#footnote[примечание] с\n  естественными операциям#highlight[и].\n\n  *Задача 1*. Вычислите свободный член многочлена\n  $underbrace((...((x - 2)^2 - 2)^2... - 2)^2, 200 \"пар скобок\")$.\n\n  // *Задача 2*. а) Найдите сумму коэффициентов многочлена $(1 - x + x^2)^n$.\\\n  // б) $P$ --- ненулевой многочлен с действительными коэффициентами. Могут ли все\n  // коэффициенты многочлена $P(x)(x - 1)$ быть неотрицательны?\n\n  #set enum(numbering: numberingx.formatter(\"{lower-russian})\"))\n  *Задача 2*.\n  + Найдите сумму коэффициентов многочлена $(1 - x + x^2)^n$.\n  + $P$ --- ненулевой многочлен с действительными коэффициентами. Могут ли все\n    коэффициенты многочлена $P(x)(x - 1)$ быть неотрицательны?\n\n  *Задача 3*. Вычислите $mat(100;0) + 4mat(100;2) + ... + 2^100mat(100;100)$.\n\n  *Задача 4*.\n  + Пусть $A$, $B$ --- многочлены над полем $K$, $A != 0$. Докажите, что $B$\n    ровно одним образом можно представить в виде $A Q + R$, где $Q, R in K[x],\n    deg R < deg A$ (степень нулевого многочлена мы считаем равной $-oo$).\n  + Верно ли это для многочленов над кольцом целых чисел?\n\n- *Определение 2*. Многочлены $Q$ и $R$ из предыдущей задачи называются,\n  соответственно, _неполным частным_ и _остатком_ при делении многочлена $B$ на\n  многочлен $A$.\n\n  *Задача 5*. Разделите с остатком $x^100$ на $x - 1$ и на $x + 1$.\n\n  *Задача 6*. Докажите, что остаток от деления многочлена на $(x - a)$ есть\n  значение этого многочлена в точке $a$ (\"теорема Безу\"). В частности, если\n  $x_0$ --- корень многочлена $P$, то $P$ делится на многочлен $(x - x_0)$.\n\n- *Определение 3*. Если многочлен $P$ делится на $(x - x_0)^k$, говорят, что\n  $x_0$ является корнем многочлена $P$ _кратности_ не менее $k$.\n\n  *Задача 7*. Докажите, что многочлен степени $n$ имеет не более $n$ корней.\n  Докажите, что если два многочлена степени не выше $n$ совпадают в $(n + 1)$\n  точке, то они равны.\n\n  *Задача 8*. Многочлен с действительными коэффициентами в целых точках\n  принимает целые значения. Обязательно ли все его коэффициенты целые?\n  Рациональные?\n\n  *Задача 9*. Приведите пример двух различных многочленов над каким-то полем $K$,\n```\n\n[details=Output]\n\n<div align=center>\n\n![out|353x500](upload://fDHJTeTWSRDxCNuS79rvJCTG0w7.jpeg)\n</div>\n\n[/details]\n\n[details=Output (dark mode)]\n\n<div align=center>\n\n![out_inverted|353x500](upload://yY9Fj2eTgbNmk25TsGpdszXNmp1.jpeg)\n</div>\n\n[/details]\n\nI found one typo, BTW. I highlighted it.\n\nAs a side note, I want to say that the topic title doesn't make sense to me, so you probably should rephrase the question or describe it to me and I will come up with something. :)\n\n---\n\n### Typst v0.12.0 update\n\nIn case the date is updated multiple times in the document, now you can set this up with:\n\n```typ\n...\n// #let date = state(\"lecture-date\", datetime(year: 2023, month: 3, day: 1))\n#let date = state(\"lecture-date\")\n\n#set page(\n  margin: 2.2cm,\n  // header: context [Листок #here().page()#h(1fr)#date.display(\"[month].[year]\")]\n  header: context {\n    let d = if date.at(here()) != none {date.get().display(\"[month].[year]\")}\n    [Листок #here().page()#h(1fr)#d]\n  }\n)\n...\n\n// Should be added before any content on the first page.\n#date.update(datetime(year: 2023, month: 3, day: 1))\n#pagebreak(weak: true) // Hack so that the update is seen on the first page.\n\n#lorem(1000) // First page content.\n\n// Update the \"current\" date:\n#date.update(datetime(year: 2023, month: 4, day: 1))\n// #pagebreak(weak: true) // Use this if you want to have a new \"lecture\"\n// to start at the top of a new page. Otherwise the new date will only show up\n// if this function call will be added on the first page.\n```\n\nIf you don't mind setting the date inside your set/show rules/template section, you can do this for the first page:\n\n```typ\n#let date = state(\"lecture-date\", datetime(year: 2023, month: 3, day: 1))\n```\n\nAlso using https://forum.typst.app/t/can-you-make-a-horizontal-enum-list/877/2 as a reference I was able to perfectly copy the enum problem № 2 by still using the enum sugar syntax:\n\n\n```typ\n#import \"@preview/numberingx:0.0.1\"\n\n#let horizontal-enum = it => {\n  it\n  .children\n  .enumerate(start: it.start)\n  .map(((n, child)) => numbering(it.numbering, n) + \" \" + child.body)\n  .join(linebreak())\n}\n\n#set page(margin: 2.2cm)\n#set text(12pt, lang: \"ru\")\n#set par(justify: true)\n#set list(marker: sym.triangle.stroked.r)\n\n- *Определение 1*. Монóм (от одной переменной, с коэффициентами в поле $K$) ---\n  это формальная запись вида $a x^n$ ($n$ --- целое неотрицательное число, $a$\n  --- элемент поля $K$, $x$ --- формальный символ).\n\n  #show enum: horizontal-enum\n  #set enum(numbering: numberingx.formatter(\"{lower-russian})\"))\n  *Задача 2*.\n  + Найдите сумму коэффициентов многочлена $(1 - x + x^2)^n$.\n  + $P$ --- ненулевой многочлен с действительными коэффициентами. Могут ли все\n    коэффициенты многочлена $P(x)(x - 1)$ быть неотрицательны?\n\n  *Задача 3*. Вычислите $mat(100;0) + 4mat(100;2) + ... + 2^100mat(100;100)$.\n```\n\n![image|593x189](upload://7lFirXS75FoitMlk8rHy2u8qAUE.png)\n\nThis one, however, also works in v0.11.1. You can put the `enum` set/show rules at the start of the file, but depending on your document structure/content you might want to avoid it.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 27.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:39.484444"
}
{
  "topic_metadata": {
    "id": 839,
    "title": "How can I document my own user defined functions/variables?",
    "slug": "how-can-i-document-my-own-user-defined-functions-variables",
    "posts_count": 5,
    "created_at": "2024-10-01T14:05:31.323Z",
    "last_posted_at": "2024-10-02T08:07:27.743Z",
    "views": 316,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 302
  },
  "posts": [
    {
      "id": 3091,
      "post_number": 1,
      "username": "Sinthoras",
      "name": "",
      "created_at": "2024-10-01T14:05:31.507Z",
      "updated_at": "2024-10-01T14:05:31.507Z",
      "cooked": "<p>When I use a function from the standard library there are nice little hints in the autocompletion that tell me what the function does and what its arguments are and so on.</p>\n<p>In other programming languages there is a syntax for documentation comments that then show up in the autocompetion or the hint when hovering. (E.g. in Fortran a normal comment is <code>!</code> while a documentation comment is either <code>!!</code> or <code>!&gt;</code>)</p>\n<p>Is there a way to do this in typst and get documentation for user-defined functions in autocomplete?</p>",
      "raw": "When I use a function from the standard library there are nice little hints in the autocompletion that tell me what the function does and what its arguments are and so on.\n\nIn other programming languages there is a syntax for documentation comments that then show up in the autocompetion or the hint when hovering. (E.g. in Fortran a normal comment is `!` while a documentation comment is either `!!` or `!>`)\n\nIs there a way to do this in typst and get documentation for user-defined functions in autocomplete?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 1245.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 511
    },
    {
      "id": 3124,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T19:09:18.672Z",
      "updated_at": "2024-10-01T19:09:18.672Z",
      "cooked": "<p>I didn’t find any issue regarding user-defined stuff, so you probably can create one. Currently, a great solution is to use <a href=\"https://github.com/Myriad-Dreamin/tinymist\" rel=\"noopener nofollow ugc\">tinymist</a>. It already supports doc strings for the most part (<a href=\"https://github.com/Myriad-Dreamin/tinymist/releases/tag/v0.11.1\" rel=\"noopener nofollow ugc\">first introduced</a>):</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/c43b6a08f316e8f53d679d2c2ecea69d53c01ece.png\" alt=\"image\" data-base62-sha1=\"rZWSt7g3ewDY69MaRtgR9ftueV8\" width=\"204\" height=\"365\"></p>\n<p>It also supports showing type for completion tokens (<a href=\"https://github.com/Myriad-Dreamin/tinymist/releases/tag/v0.11.7\" rel=\"noopener nofollow ugc\">first introduced</a>):</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/6c72e874665a64bdd90da4e2a31ba87ecf4d91c1.png\" alt=\"image\" data-base62-sha1=\"ftnKSwl6fHuwGWHowiuarl3vUv7\" width=\"617\" height=\"192\"></p>",
      "raw": "I didn't find any issue regarding user-defined stuff, so you probably can create one. Currently, a great solution is to use [tinymist](https://github.com/Myriad-Dreamin/tinymist). It already supports doc strings for the most part ([first introduced](https://github.com/Myriad-Dreamin/tinymist/releases/tag/v0.11.1)):\n\n![image|204x365](upload://rZWSt7g3ewDY69MaRtgR9ftueV8.png)\n\nIt also supports showing type for completion tokens ([first introduced](https://github.com/Myriad-Dreamin/tinymist/releases/tag/v0.11.7)):\n\n![image|617x192](upload://ftnKSwl6fHuwGWHowiuarl3vUv7.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 51,
      "score": 50.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3126,
      "post_number": 3,
      "username": "Sinthoras",
      "name": "",
      "created_at": "2024-10-01T19:23:09.480Z",
      "updated_at": "2024-10-01T19:23:09.480Z",
      "cooked": "<p>Thanks for the remark on tinymist. I will try that out. :)</p>\n<p>Regarding the issue: I am actually not sure what kind of issue this is.<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/eab48284d49ff8009dfd0571e7cb00e9a6574a32.png\" data-download-href=\"https://forum.typst.app/uploads/default/eab48284d49ff8009dfd0571e7cb00e9a6574a32\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/eab48284d49ff8009dfd0571e7cb00e9a6574a32_2_690x178.png\" alt=\"image\" data-base62-sha1=\"xuit3qbaZPH7V8qzgH0JUWlRiJs\" width=\"690\" height=\"178\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/eab48284d49ff8009dfd0571e7cb00e9a6574a32_2_690x178.png, https://forum.typst.app/uploads/default/optimized/1X/eab48284d49ff8009dfd0571e7cb00e9a6574a32_2_1035x267.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/eab48284d49ff8009dfd0571e7cb00e9a6574a32_2_1380x356.png 2x\" data-dominant-color=\"11171C\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1657×429 59.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>It is definitely a thing for the web app but kind of also documentation.</p>",
      "raw": "Thanks for the remark on tinymist. I will try that out. :)\n\nRegarding the issue: I am actually not sure what kind of issue this is.\n![image|690x178](upload://xuit3qbaZPH7V8qzgH0JUWlRiJs.png)\n\nIt is definitely a thing for the web app but kind of also documentation.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 34.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 511
    },
    {
      "id": 3147,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T22:35:06.532Z",
      "updated_at": "2024-10-01T22:35:06.532Z",
      "cooked": "<p>I think it will fall into “Compiler Feature Request”. Later, an <code>ide</code> tag will be added by someone. Note that the web app uses Typst compiler under the hood (it is downloaded by the browser and all compilations are done on the client). It also uses <code>typst-ide</code> package for IDE stuff just like tinymist. (Although I think currently tinymist has a copy of that package to be able to access some private things.)</p>",
      "raw": "I think it will fall into \"Compiler Feature Request\". Later, an `ide` tag will be added by someone. Note that the web app uses Typst compiler under the hood (it is downloaded by the browser and all compilations are done on the client). It also uses `typst-ide` package for IDE stuff just like tinymist. (Although I think currently tinymist has a copy of that package to be able to access some private things.)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 37.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3191,
      "post_number": 5,
      "username": "Sinthoras",
      "name": "",
      "created_at": "2024-10-02T08:07:27.743Z",
      "updated_at": "2024-10-02T08:07:27.743Z",
      "cooked": "<p>Okay, filed an issue. Thank you :) <a href=\"https://github.com/typst/typst/issues/5094\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Introducce Syntax for Documenting user (and package author) defined functions. · Issue #5094 · typst/typst · GitHub</a></p>",
      "raw": "Okay, filed an issue. Thank you :) https://github.com/typst/typst/issues/5094",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 156.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 511
    }
  ],
  "scraped_at": "2025-06-10T09:57:38.734499"
}
{
  "topic_metadata": {
    "id": 846,
    "title": "How to make nested bulleted lists where content includes centered equations?",
    "slug": "how-to-make-nested-bulleted-lists-where-content-includes-centered-equations",
    "posts_count": 4,
    "created_at": "2024-10-01T17:41:42.055Z",
    "last_posted_at": "2025-01-23T10:45:35.252Z",
    "views": 507,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Andrew",
    "tags": [
      "layout",
      "math"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 480
  },
  "posts": [
    {
      "id": 3114,
      "post_number": 1,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-10-01T17:41:42.247Z",
      "updated_at": "2024-10-02T19:28:29.739Z",
      "cooked": "<p>If I type the following…</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">- This is my first equation: $ a + b + c = 100 $\n  - This is my second: $ d + e + f = 1 $\n</code></pre>\n<p>… I find that the first equation is centered from the beginning of the text content (the “This is my first equation” bit) til the end of the line, but that the second equation in the indented bullet is centered just underneath the text content (“This is my second”). Perhaps this behavior has its applications, but I would like to center all equations in the list along the same axis.</p>\n<p>If I try the following…</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">- This is my first equation: \n$ a + b + c = 100 $\n  - This is my second: \n  $ d + e + f = 1 $\n</code></pre>\n<p>… then the second bullet is not recognized as indented.</p>\n<p>Is there a bit of syntax that I’m missing here to be able to have nested lists without changing where equations are aligned? I could do something like I have below but it is pretty clunky.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">- This is my first equation: \n$ a + b + c = 100 $\n#list(indent: 10pt, marker: [-])[This is my second:]\n$ d + e + f = 1 $\n</code></pre>",
      "raw": "If I type the following...\n\n```typst\n- This is my first equation: $ a + b + c = 100 $\n  - This is my second: $ d + e + f = 1 $\n```\n\n... I find that the first equation is centered from the beginning of the text content (the \"This is my first equation\" bit) til the end of the line, but that the second equation in the indented bullet is centered just underneath the text content (\"This is my second\"). Perhaps this behavior has its applications, but I would like to center all equations in the list along the same axis.\n\nIf I try the following...\n\n```typst\n- This is my first equation: \n$ a + b + c = 100 $\n  - This is my second: \n  $ d + e + f = 1 $\n```\n... then the second bullet is not recognized as indented.\n\nIs there a bit of syntax that I'm missing here to be able to have nested lists without changing where equations are aligned? I could do something like I have below but it is pretty clunky.\n\n```typst\n- This is my first equation: \n$ a + b + c = 100 $\n#list(indent: 10pt, marker: [-])[This is my second:]\n$ d + e + f = 1 $\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 51,
      "score": 2035.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 177
    },
    {
      "id": 3136,
      "post_number": 2,
      "username": "maucejo",
      "name": "Mathieu Aucejo",
      "created_at": "2024-10-01T20:54:11.413Z",
      "updated_at": "2024-10-01T20:54:11.413Z",
      "cooked": "<p>I think the problem you are facing is related to a bad indentation. Can you try the following code ?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">- This is my first equation: \n   $ a + b + c = 100 $\n  - This is my second: \n    $ d + e + f = 1 $\n</code></pre>",
      "raw": "I think the problem you are facing is related to a bad indentation. Can you try the following code ?\n\n```typ\n- This is my first equation: \n   $ a + b + c = 100 $\n  - This is my second: \n    $ d + e + f = 1 $\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 51,
      "score": 30.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 125
    },
    {
      "id": 3140,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T21:15:06.966Z",
      "updated_at": "2024-10-02T11:21:52.963Z",
      "cooked": "<p>This is a know issue:</p>\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/typst/issues/529\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/issues/529\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/typst/issues/529\" target=\"_blank\" rel=\"noopener nofollow ugc\">Center alignment broken in lists</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2023-04-02\" data-time=\"15:06:33\" data-timezone=\"UTC\">03:06PM - 02 Apr 23 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/queensferryme\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n          <img alt=\"queensferryme\" src=\"https://forum.typst.app/uploads/default/original/1X/18806bfb7bb542751cfa132b29e641bc42db2b15.jpeg\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"5A7C99\">\n          queensferryme\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          bug\n        </span>\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          layout\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">Not sure if this a bug or actually an expected behavior. It seems the width of a<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\"> numbered list is not always 100% but instead restricted to the maximum width of its lines.\n\nTherefore, if you don't have a long (&gt;=100%) line in a numbered list, your math blocks in that list will not be placed at the horizontal center of the page. These math blocks are instead centered relative to the the parent numbered list. This is some what conterintuitive (at least from a previous LaTeX user's perspective).\n\nWith a long line:\n![](https://user-images.githubusercontent.com/41495669/229360499-58408e1e-e126-490d-8d4f-36f5cc95f179.png)\nWithout a long line:\n![](https://user-images.githubusercontent.com/41495669/229360573-c7c74075-eb5d-489b-b1af-aacc0b8f7ee7.png)\nTo reproduce:\n```\n= Question 1\n\n+ #set enum(numbering: \"(a)\")\n  + The constructed sequent is given as follows:\n    $ q arrow p, r arrow not p, q and r tack.long ((p and q) arrow not r) or ((p and r) arrow not q) $\n    //The constructed sequent has assumptions $X={A_1,A_2,A_3}$ and a conclusion $C$ where:\n    Without the long line:\n    $ A_1 &amp;= q arrow p\\\n      A_2 &amp;= r arrow not p\\\n      A_3 &amp;= q and r\\\n      C space &amp;= ((p and q) arrow not r) or ((p and r) arrow not q)\n    $\n```</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>In the comments, there are a few workarounds.</p>\n<div class=\"spoiler\">\n<p>Here is one:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation.where(block: true): block.with(width: 100%)\n- This is my first equation: $ a + b + c = 100 $\n  - This is my second: $ d + e + f = 1 $\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/3f2dcf4ba7975309798683380aba617e9293cf3b.png\" alt=\"image\" data-base62-sha1=\"90Ue6Myi1chLjMYLGxcrG7GJd6X\" width=\"655\" height=\"124\"></p>\n<p>But I would personally put the equation on a separate line, like I would do with a regular text:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation.where(block: true): block.with(width: 100%)\n- This is my first equation:\n\n  $ a + b + c = 100 $\n  - This is my second:\n\n    $ d + e + f = 1 $\n  - First paragraph\n\n    Second paragraph\n</code></pre>\n</div>\n<p>Edit:</p>\n<p>I guess this is a better solution:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation.where(block: true): eq =&gt; {\n  block(width: 100%, inset: 0pt, align(center, eq))\n}\n</code></pre>\n<p>Since the previous solution apparently <a href=\"https://github.com/typst/typst/issues/529#issuecomment-2387759630\" rel=\"noopener nofollow ugc\">breaks lists in automatically sized containers</a>.</p>",
      "raw": "This is a know issue:\n\nhttps://github.com/typst/typst/issues/529\n\nIn the comments, there are a few workarounds.\n[spoiler]\nHere is one:\n\n```typ\n#show math.equation.where(block: true): block.with(width: 100%)\n- This is my first equation: $ a + b + c = 100 $\n  - This is my second: $ d + e + f = 1 $\n```\n\n![image|655x124](upload://90Ue6Myi1chLjMYLGxcrG7GJd6X.png)\n\nBut I would personally put the equation on a separate line, like I would do with a regular text:\n\n```typ\n#show math.equation.where(block: true): block.with(width: 100%)\n- This is my first equation:\n\n  $ a + b + c = 100 $\n  - This is my second:\n\n    $ d + e + f = 1 $\n  - First paragraph\n\n    Second paragraph\n```\n[/spoiler]\n\nEdit:\n\nI guess this is a better solution:\n\n```typ\n#show math.equation.where(block: true): eq => {\n  block(width: 100%, inset: 0pt, align(center, eq))\n}\n```\n\nSince the previous solution apparently [breaks lists in automatically sized containers](https://github.com/typst/typst/issues/529#issuecomment-2387759630).",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 184.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 7799,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2025-01-23T10:45:35.252Z",
      "updated_at": "2025-01-23T10:46:06.718Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"3\" data-topic=\"846\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">#show math.equation.where(block: true): eq =&gt; {\n  block(width: 100%, inset: 0pt, align(center, eq))\n}\n</code></pre>\n</blockquote>\n</aside>\n<p>Unfortunately this interferes with the CeTZ anchor calculation:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.1\"\n\n#let fig = cetz.canvas({\n  import cetz.draw: *\n  line((0, 0), (1, 0))\n  content((), anchor: \"west\", $ O O O $)\n})\n\n#fig\n\n#show math.equation.where(block: true): eq =&gt; {\n  block(width: 100%, inset: 0pt, align(center, eq))\n}\n\n#fig\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/c/c8840c0558e6743d613b4ca185536cec0f92240e.png\" alt=\"image\" data-base62-sha1=\"sBQp0D1u4ELObcNmDPfYCM0WuJ0\" width=\"140\" height=\"94\"></p>\n<p>(I’m using block equations in CeTZ for the reasons mentioned in <a href=\"https://forum.typst.app/t/how-to-show-all-math-as-block-equations-by-default/890\" class=\"inline-onebox\">How to show all math as block equations by default?</a>)</p>",
      "raw": "[quote=\"Andrew, post:3, topic:846\"]\n```\n#show math.equation.where(block: true): eq => {\n  block(width: 100%, inset: 0pt, align(center, eq))\n}\n```\n[/quote]\n\nUnfortunately this interferes with the CeTZ anchor calculation:\n\n```typ\n#import \"@preview/cetz:0.3.1\"\n\n#let fig = cetz.canvas({\n  import cetz.draw: *\n  line((0, 0), (1, 0))\n  content((), anchor: \"west\", $ O O O $)\n})\n\n#fig\n\n#show math.equation.where(block: true): eq => {\n  block(width: 100%, inset: 0pt, align(center, eq))\n}\n\n#fig\n```\n\n![image|140x94](upload://sBQp0D1u4ELObcNmDPfYCM0WuJ0.png)\n\n(I'm using block equations in CeTZ for the reasons mentioned in https://forum.typst.app/t/how-to-show-all-math-as-block-equations-by-default/890?u=sijo)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 27,
      "score": 25.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:57:37.994659"
}
{
  "topic_metadata": {
    "id": 848,
    "title": "How do I write a function that displays a text in a box with a heading?",
    "slug": "how-do-i-write-a-function-that-displays-a-text-in-a-box-with-a-heading",
    "posts_count": 5,
    "created_at": "2024-10-01T19:20:04.635Z",
    "last_posted_at": "2024-10-02T06:30:21.975Z",
    "views": 599,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "Andrew",
    "tags": [],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 612
  },
  "posts": [
    {
      "id": 3125,
      "post_number": 1,
      "username": "Olaf",
      "name": "Olaf",
      "created_at": "2024-10-01T19:20:04.775Z",
      "updated_at": "2024-10-01T19:29:28.358Z",
      "cooked": "<p>I would like to have a function that displays any content in a box and provides it with a heading. The image shows an example (the text should not be painted over). The double border is not important to me. A single border is sufficient.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let my_box(title, content) = {\n    // ...\n}\n</code></pre>\n<p>And that’s how I wanted to use the function:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#my_box([This is a title]) [\n    - And here\n    - is the content\n]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/f5ef6ee4cbac17337da20e3878c392b7775675a6.png\" data-download-href=\"https://forum.typst.app/uploads/default/f5ef6ee4cbac17337da20e3878c392b7775675a6\" title=\"box-example\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/f5ef6ee4cbac17337da20e3878c392b7775675a6_2_690x227.png\" alt=\"box-example\" data-base62-sha1=\"z5DXJC7trEVapzpuuiBSMnHMfxs\" width=\"690\" height=\"227\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/f5ef6ee4cbac17337da20e3878c392b7775675a6_2_690x227.png, https://forum.typst.app/uploads/default/original/1X/f5ef6ee4cbac17337da20e3878c392b7775675a6.png 1.5x, https://forum.typst.app/uploads/default/original/1X/f5ef6ee4cbac17337da20e3878c392b7775675a6.png 2x\" data-dominant-color=\"D7DAD2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">box-example</span><span class=\"informations\">716×236 38.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "I would like to have a function that displays any content in a box and provides it with a heading. The image shows an example (the text should not be painted over). The double border is not important to me. A single border is sufficient.  \n\n```typ\n#let my_box(title, content) = {\n    // ...\n}\n```\n\nAnd that's how I wanted to use the function:\n\n\n```typ\n#my_box([This is a title]) [\n    - And here\n    - is the content\n]\n```\n\n![box-example|690x227](upload://z5DXJC7trEVapzpuuiBSMnHMfxs.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 2815.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 418
    },
    {
      "id": 3129,
      "post_number": 2,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2024-10-01T19:37:59.446Z",
      "updated_at": "2024-10-01T19:41:52.128Z",
      "cooked": "<p>Is this good enough?:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\"> #let my_box(title, body) = {\n    box(stroke: 1pt, outset: 2pt, title)\n    linebreak()\n    v(-9pt)\n    box(stroke: 1pt, outset: 2pt, body)\n}\n\n#my_box([This is a title])[\n    - And here\n    - is the content\n]\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/5556c85b5ae23b931c67b9b42bba296e0355a6e5.png\" alt=\"grafik\" data-base62-sha1=\"caWvZie3ERLR1E94Vii1e5xtxZj\" width=\"339\" height=\"181\"></p>\n<p>I wrote down the function call again, because it is important that there is no space between the closing round bracket and the opening “[” for Typst to understand that it should be the content of the function.<br>\nI think you could also add a slight offset to the title box and let the content begin a little bit lower if you want to mimic your example picture a bit more. If you need help with that, feel free to ask again :)</p>",
      "raw": "Is this good enough?: \n```typst\n #let my_box(title, body) = {\n    box(stroke: 1pt, outset: 2pt, title)\n    linebreak()\n    v(-9pt)\n    box(stroke: 1pt, outset: 2pt, body)\n}\n\n#my_box([This is a title])[\n    - And here\n    - is the content\n]\n```\n![grafik|339x181](upload://caWvZie3ERLR1E94Vii1e5xtxZj.png)\n\n\nI wrote down the function call again, because it is important that there is no space between the closing round bracket and the opening \"[\" for Typst to understand that it should be the content of the function.\nI think you could also add a slight offset to the title box and let the content begin a little bit lower if you want to mimic your example picture a bit more. If you need help with that, feel free to ask again :)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 24.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 3134,
      "post_number": 3,
      "username": "maucejo",
      "name": "Mathieu Aucejo",
      "created_at": "2024-10-01T20:51:34.381Z",
      "updated_at": "2024-10-01T20:51:42.098Z",
      "cooked": "<p><code>showybox</code> may fit your needs.</p>",
      "raw": "`showybox` may fit your needs.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 43,
      "score": 83.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 125
    },
    {
      "id": 3142,
      "post_number": 4,
      "username": "Blaz",
      "name": "Blaz",
      "created_at": "2024-10-01T21:41:33.798Z",
      "updated_at": "2024-10-01T23:59:46.491Z",
      "cooked": "<p>Here’s my attempt:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let my-box(title, content) = {\n  block(stroke: .5pt, inset: (x: 8pt, top: 16pt, bottom: 8pt))[\n    #place(top+left, dx: -12pt, dy: -20pt)[\n      #block(stroke: .5pt, inset: 4pt, fill: white, title)\n    ]\n    #content\n  ]\n}\n\n#my-box([Some title])[\n  - Here is\n  - the content.\n]\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/6f54c06873d7bb98a67847ed5364387ad6fc4343.png\" data-download-href=\"https://forum.typst.app/uploads/default/6f54c06873d7bb98a67847ed5364387ad6fc4343\" title=\"my-box\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/6f54c06873d7bb98a67847ed5364387ad6fc4343_2_690x424.png\" alt=\"my-box\" data-base62-sha1=\"fSSzSpMmtbmUGpiju29aiYLXzYn\" width=\"690\" height=\"424\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/6f54c06873d7bb98a67847ed5364387ad6fc4343_2_690x424.png, https://forum.typst.app/uploads/default/original/1X/6f54c06873d7bb98a67847ed5364387ad6fc4343.png 1.5x, https://forum.typst.app/uploads/default/original/1X/6f54c06873d7bb98a67847ed5364387ad6fc4343.png 2x\" data-dominant-color=\"EBEBEB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">my-box</span><span class=\"informations\">907×558 59.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>Edit: if the title is long and the content block is not wide enough, it will break and overlap the content block. One can combine <code>context</code> and <code>measure</code> to dynamically create the needed spacing:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let my-box(title, content) = {\n  let title-box = box(width: 60pt, stroke: .5pt, inset: 4pt, fill: white, title)\n  \n  context block(stroke: .5pt, inset: 8pt, breakable: false)[\n    #v(measure(title-box).height)\n    #place(top+left, dx: -12pt, dy: -12pt, title-box)\n    #content\n  ]\n}\n</code></pre>\n<p>The disadvantage of this is that the title box needs to have a fixed width, otherwise <code>measure</code> will assume infinite space and return 0.</p>",
      "raw": "Here's my attempt:\n\n```typ\n#let my-box(title, content) = {\n  block(stroke: .5pt, inset: (x: 8pt, top: 16pt, bottom: 8pt))[\n    #place(top+left, dx: -12pt, dy: -20pt)[\n      #block(stroke: .5pt, inset: 4pt, fill: white, title)\n    ]\n    #content\n  ]\n}\n\n#my-box([Some title])[\n  - Here is\n  - the content.\n]\n```\n[details=\"Output\"]\n![my-box|690x424](upload://fSSzSpMmtbmUGpiju29aiYLXzYn.png)\n[/details]\n\nEdit: if the title is long and the content block is not wide enough, it will break and overlap the content block. One can combine `context` and `measure` to dynamically create the needed spacing:\n```typ\n#let my-box(title, content) = {\n  let title-box = box(width: 60pt, stroke: .5pt, inset: 4pt, fill: white, title)\n  \n  context block(stroke: .5pt, inset: 8pt, breakable: false)[\n    #v(measure(title-box).height)\n    #place(top+left, dx: -12pt, dy: -12pt, title-box)\n    #content\n  ]\n}\n```\nThe disadvantage of this is that the title box needs to have a fixed width, otherwise `measure` will assume infinite space and return 0.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 58.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 98
    },
    {
      "id": 3162,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T06:30:21.975Z",
      "updated_at": "2024-10-02T11:33:22.708Z",
      "cooked": "<p>Indeed, showybox is a great package for this, but unfortunately it slightly lacks configuration flexibility. You can use shadow for this, but for shadow you can only set <code>fill</code>, but not <code>stroke</code>. Here I modified it (don’t know how long will the link last, maybe you should <a href=\"https://github.com/Pablo-Gonzalez-Calderon/showybox-package/issues\" rel=\"noopener nofollow ugc\">pitch the feature</a> to the author so it can be included in the official package version):<br>\n<a href=\"https://github.com/user-attachments/files/17220540/showybox.2.0.1.zip\" rel=\"noopener nofollow ugc\">showybox:2.0.1.zip</a></p>\n<p>With this I can do:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/showybox:2.0.1\": showybox\n#showybox(\n  width: 11cm,\n  frame: (title-color: white, radius: 0pt),\n  shadow: (color: black, offset: 0.2em),\n  title-style: (\n    color: black,\n    boxed-style: (\n      anchor: (x: start, y: top),\n      offset: (x: -1.4em, y: -0.4em),\n      radius: 0pt,\n    ),\n  ),\n  title: lorem(2),\n  lorem(25),\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/c8f1172d1b0faa9ce278dfd4035223e8215dd9eb.png\" alt=\"image\" data-base62-sha1=\"sFC1KigYWV0c3u8y5OkxlAp4ILF\" width=\"661\" height=\"180\"></p>\n<p>And here is my one-file solution:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let shadow-box(title, body, offset: 2pt, title-offset: 2pt) = {\n  let frame = block.with(\n    width: 11cm, // This probably should be removed.\n    inset: (top: 3em, rest: 0.7em),\n    fill: white,\n    stroke: black,\n  )\n  let title-frame = frame.with(width: auto, inset: 0.7em)\n  context {\n    let body-height = measure(frame(body)).height\n    place(dx: offset, dy: offset, frame(hide(body))) // shadow\n    frame(body)\n    place(dx: -offset, dy: -body-height - offset, title-frame(hide(title))) // shadow\n    let offset = title-offset + offset\n    place(dx: -offset, dy: -body-height - offset, title-frame(title))\n  }\n}\n\n#shadow-box(lorem(2), lorem(25))\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/8d1532714ff4419fdf760d21d54f180eeed545cd.png\" alt=\"image\" data-base62-sha1=\"k84JK2TuackGfoVd5fG9QeBM4G1\" width=\"666\" height=\"185\"></p>\n</details>",
      "raw": "Indeed, showybox is a great package for this, but unfortunately it slightly lacks configuration flexibility. You can use shadow for this, but for shadow you can only set `fill`, but not `stroke`. Here I modified it (don't know how long will the link last, maybe you should [pitch the feature](https://github.com/Pablo-Gonzalez-Calderon/showybox-package/issues) to the author so it can be included in the official package version):\n[showybox:2.0.1.zip](https://github.com/user-attachments/files/17220540/showybox.2.0.1.zip)\n\nWith this I can do:\n\n```typ\n#import \"@preview/showybox:2.0.1\": showybox\n#showybox(\n  width: 11cm,\n  frame: (title-color: white, radius: 0pt),\n  shadow: (color: black, offset: 0.2em),\n  title-style: (\n    color: black,\n    boxed-style: (\n      anchor: (x: start, y: top),\n      offset: (x: -1.4em, y: -0.4em),\n      radius: 0pt,\n    ),\n  ),\n  title: lorem(2),\n  lorem(25),\n)\n```\n\n![image|661x180](upload://sFC1KigYWV0c3u8y5OkxlAp4ILF.png)\n\nAnd here is my one-file solution:\n\n```typ\n#let shadow-box(title, body, offset: 2pt, title-offset: 2pt) = {\n  let frame = block.with(\n    width: 11cm, // This probably should be removed.\n    inset: (top: 3em, rest: 0.7em),\n    fill: white,\n    stroke: black,\n  )\n  let title-frame = frame.with(width: auto, inset: 0.7em)\n  context {\n    let body-height = measure(frame(body)).height\n    place(dx: offset, dy: offset, frame(hide(body))) // shadow\n    frame(body)\n    place(dx: -offset, dy: -body-height - offset, title-frame(hide(title))) // shadow\n    let offset = title-offset + offset\n    place(dx: -offset, dy: -body-height - offset, title-frame(title))\n  }\n}\n\n#shadow-box(lorem(2), lorem(25))\n```\n\n[details=Output]\n![image|666x185](upload://k84JK2TuackGfoVd5fG9QeBM4G1.png)\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 92.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:37.274789"
}
{
  "topic_metadata": {
    "id": 856,
    "title": "Why 'where(block: true)' doesn't work with 'set block'?",
    "slug": "why-where-block-true-doesnt-work-with-set-block",
    "posts_count": 3,
    "created_at": "2024-10-01T23:33:48.894Z",
    "last_posted_at": "2024-10-02T10:19:46.964Z",
    "views": 59,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 173
  },
  "posts": [
    {
      "id": 3150,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-01T23:33:48.977Z",
      "updated_at": "2024-10-01T23:33:48.977Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show quote: set block(above: 2em, below: 2em)\n\n#lorem(25)\n\n#quote[\n  inline quote\n]\n\n#lorem(25)\n\n#quote(block: true)[\n  block quote\n]\n\n#lorem(25)\n</code></pre>\n<p>How can make it work for block quotes only? I tried to replace <code>quote</code> with <code>quote.where(block: true)</code>, but thid didn’t help.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show quote.where(block: true): set block(above: 2em, below: 2em)\n</code></pre>\n<p>I also tried to replace <code>above: 2em, below: 2em</code> with <code>spacing: 2em</code>, but this didn’t help either.</p>",
      "raw": "```typ\n#show quote: set block(above: 2em, below: 2em)\n\n#lorem(25)\n\n#quote[\n  inline quote\n]\n\n#lorem(25)\n\n#quote(block: true)[\n  block quote\n]\n\n#lorem(25)\n```\n\nHow can make it work for block quotes only? I tried to replace `quote` with `quote.where(block: true)`, but thid didn't help.\n\n```typ\n#show quote.where(block: true): set block(above: 2em, below: 2em)\n```\n\nI also tried to replace `above: 2em, below: 2em` with `spacing: 2em`, but this didn't help either.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 45.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 3155,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T05:49:11.572Z",
      "updated_at": "2024-10-02T05:49:11.572Z",
      "cooked": "<p>It works for me using v0.11.1:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show quote.where(block: true): set block(spacing: 5em)\n// #show quote.where(block: true): block.with(spacing: 5em)\n// #show quote.where(block: true): set block(above: 5em, below: 5em)\n\n#lorem(25)\n\n#quote[\n  inline quote\n]\n\n#lorem(25)\n\n#quote(block: true)[\n  block quote\n]\n\n#lorem(25)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/cae3ecfb9f12ac147507dfed933a0e132de5c123.png\" data-download-href=\"https://forum.typst.app/uploads/default/cae3ecfb9f12ac147507dfed933a0e132de5c123\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/cae3ecfb9f12ac147507dfed933a0e132de5c123_2_690x380.png\" alt=\"image\" data-base62-sha1=\"sWQMdb2ao0nSmX2HdK8JfGhd2Lh\" width=\"690\" height=\"380\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/cae3ecfb9f12ac147507dfed933a0e132de5c123_2_690x380.png, https://forum.typst.app/uploads/default/original/1X/cae3ecfb9f12ac147507dfed933a0e132de5c123.png 1.5x, https://forum.typst.app/uploads/default/original/1X/cae3ecfb9f12ac147507dfed933a0e132de5c123.png 2x\" data-dominant-color=\"161616\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">776×428 48.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>But there is a small caveat: <a href=\"https://forum.typst.app/t/to-make-a-block-quote-with-a-border-on-the-left-side-like-on-github/834/4\" class=\"inline-onebox\">To make a block quote with a border on the left side, like on GitHub - #4 by SillyFreak</a>.</p>",
      "raw": "It works for me using v0.11.1:\n\n```typ\n#show quote.where(block: true): set block(spacing: 5em)\n// #show quote.where(block: true): block.with(spacing: 5em)\n// #show quote.where(block: true): set block(above: 5em, below: 5em)\n\n#lorem(25)\n\n#quote[\n  inline quote\n]\n\n#lorem(25)\n\n#quote(block: true)[\n  block quote\n]\n\n#lorem(25)\n```\n\n![image|690x380](upload://sWQMdb2ao0nSmX2HdK8JfGhd2Lh.png)\n\nBut there is a small caveat: https://forum.typst.app/t/to-make-a-block-quote-with-a-border-on-the-left-side-like-on-github/834/4.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 25.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3200,
      "post_number": 3,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-02T10:19:46.964Z",
      "updated_at": "2024-10-02T10:19:46.964Z",
      "cooked": "<p>Backlink to a related question: <a href=\"https://forum.typst.app/t/683\" class=\"inline-onebox\">How can I remove extra padding above and below block quotations?</a></p>",
      "raw": "Backlink to a related question: https://forum.typst.app/t/683",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    }
  ],
  "scraped_at": "2025-06-10T09:57:36.554617"
}
{
  "topic_metadata": {
    "id": 863,
    "title": "How to load a Zotero collection with Typst Pro?",
    "slug": "how-to-load-a-zotero-collection-with-typst-pro",
    "posts_count": 3,
    "created_at": "2024-10-02T07:14:12.822Z",
    "last_posted_at": "2024-10-02T08:26:53.944Z",
    "views": 725,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "web-app",
      "typst-pro"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 109
  },
  "posts": [
    {
      "id": 3186,
      "post_number": 1,
      "username": "Julian_Wassmann",
      "name": "Julian Waßmann",
      "created_at": "2024-10-02T07:14:12.921Z",
      "updated_at": "2024-10-02T19:04:07.094Z",
      "cooked": "<p>Hello,</p>\n<p>I successfully connected my account with Zotero (shown in account settings). How can I load the Zotero collection into a Typst Project using the Web App?</p>\n<p>I haven’t found any information, only on the Typst Pro Pricing site (“Pick which collection you want to link to each project”). Is this feature available yet?</p>\n<p>Thank you for your help!<br>\nJulian</p>",
      "raw": "Hello,\n\nI successfully connected my account with Zotero (shown in account settings). How can I load the Zotero collection into a Typst Project using the Web App?\n\nI haven't found any information, only on the Typst Pro Pricing site (\"Pick which collection you want to link to each project\"). Is this feature available yet?\n\nThank you for your help!\nJulian",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 3639.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 340
    },
    {
      "id": 3188,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2024-10-02T07:39:50.148Z",
      "updated_at": "2024-10-02T07:39:50.148Z",
      "cooked": "<p>Hi Julian,</p>\n<p>it’s a bit hidden. You can select the collection inside a project in the side menu “Files”.<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/25b000b1aa62977b85de5c76420bb72c86c39bd2.png\" alt=\"image\" data-base62-sha1=\"5noKwPnWlgj3X11SZFOYrS71M6S\" width=\"421\" height=\"224\"></p>",
      "raw": "Hi Julian,\n\nit's a bit hidden. You can select the collection inside a project in the side menu \"Files\". \n![image|421x224](upload://5noKwPnWlgj3X11SZFOYrS71M6S.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 46,
      "score": 269.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 3192,
      "post_number": 3,
      "username": "Julian_Wassmann",
      "name": "Julian Waßmann",
      "created_at": "2024-10-02T08:26:53.944Z",
      "updated_at": "2024-10-02T08:26:53.944Z",
      "cooked": "<p>Hi flokl,</p>\n<p>Thank you! It works now.</p>\n<p>In my opinion, it would be great if an instruction will be added to the docs.</p>",
      "raw": "Hi flokl,\n\nThank you! It works now.\n\nIn my opinion, it would be great if an instruction will be added to the docs.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 42,
      "score": 53.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 340
    }
  ],
  "scraped_at": "2025-06-10T09:57:35.683550"
}
{
  "topic_metadata": {
    "id": 866,
    "title": "How to include multiple headings in table using a function?",
    "slug": "how-to-include-multiple-headings-in-table-using-a-function",
    "posts_count": 8,
    "created_at": "2024-10-02T09:04:00.411Z",
    "last_posted_at": "2024-10-08T08:23:15.783Z",
    "views": 366,
    "like_count": 2,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Tinger",
    "tags": [
      "scripting",
      "tables",
      "context"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 763
  },
  "posts": [
    {
      "id": 3195,
      "post_number": 1,
      "username": "flixz02",
      "name": "",
      "created_at": "2024-10-02T09:04:00.584Z",
      "updated_at": "2024-10-10T16:12:15.881Z",
      "cooked": "<p>I want to create a function (in an extra typst file), which creates an table including first level headings using a loop. The following is what i have so far, but it only returns the titles of the heading and doesn’t put it into separate table cells. I also would like to omit some first level headings, for example the first one, which is the heading of the table of contents.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let title_headings() = {\n  table(\n    row-gutter: 1cm,\n    columns: (4fr, 1fr),\n    fill: (x, y) =&gt;\n      if x == 1 {\n        color.rgb(\"#aa0000\")\n      },\n    align: center + horizon,\n\n    context{\n      for element in query(heading.where(level: 1)) {\n        table.cell(text(size: 14pt, element.body))\n        table.cell(text(size: 26pt, fill: white, \"1\"))\n      }\n    }\n  )\n}\n</code></pre>\n<p>This function is included in a grid a template file like this. The template is then used in the main document</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#grid(\n      ...\n      [#title_headings()],\n      ...\n  )\n</code></pre>\n<p>The end result should look like this.<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/673bca6e9683908a049900cb30ff752a93a8627b.png\" alt=\"Screenshot 2024-10-02 105749\" data-base62-sha1=\"eJfhoqfFUXcSXWbbeiKA97odK9t\" width=\"320\" height=\"409\"></p>",
      "raw": "I want to create a function (in an extra typst file), which creates an table including first level headings using a loop. The following is what i have so far, but it only returns the titles of the heading and doesn't put it into separate table cells. I also would like to omit some first level headings, for example the first one, which is the heading of the table of contents.\n\n```typ\n#let title_headings() = {\n  table(\n    row-gutter: 1cm,\n    columns: (4fr, 1fr),\n    fill: (x, y) =>\n      if x == 1 {\n        color.rgb(\"#aa0000\")\n      },\n    align: center + horizon,\n\n    context{\n      for element in query(heading.where(level: 1)) {\n        table.cell(text(size: 14pt, element.body))\n        table.cell(text(size: 26pt, fill: white, \"1\"))\n      }\n    }\n  )\n}\n```\nThis function is included in a grid a template file like this. The template is then used in the main document\n```typ\n#grid(\n      ...\n      [#title_headings()],\n      ...\n  )\n```\nThe end result should look like this.\n![Screenshot 2024-10-02 105749|320x409](upload://eJfhoqfFUXcSXWbbeiKA97odK9t.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 1390.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 519
    },
    {
      "id": 3197,
      "post_number": 2,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-10-02T09:45:56.669Z",
      "updated_at": "2024-10-02T09:45:56.669Z",
      "cooked": "<p>Hi, welcome to the forum!</p>\n<p>A context expression is a single bit of content, which cannot be inspected anymore, the table gets this single bit of content and treats it as a single cell (See <a href=\"https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164\" class=\"inline-onebox\">Why is the value I receive from context always content?</a>). This means that if you need more than one cell out of the context expression you need to move your context further up, I’ve done that here by lifting it outside the table. Additionally looping over cells and just placing them next to each other will also just create a single long bit of content. The solution is to create an array of individual cells, which are then all applied as individual cells to table by the use of the spread operator <code>..</code>. Because the inner loop returned not one, but two cells, we flatten the inner arrays, otherwise we’d spread pairs of cells into the table, not cells itself.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let title-headings() = context table(\n  // ..\n  ..query(heading.where(level: 1))\n    .map(element =&gt; (\n      table.cell(text(size: 14pt, element.body)),\n      table.cell(text(size: 26pt, fill: white, \"1\")),\n    ))\n    .flatten()\n)\n</code></pre>",
      "raw": "Hi, welcome to the forum!\n\nA context expression is a single bit of content, which cannot be inspected anymore, the table gets this single bit of content and treats it as a single cell (See https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164). This means that if you need more than one cell out of the context expression you need to move your context further up, I've done that here by lifting it outside the table. Additionally looping over cells and just placing them next to each other will also just create a single long bit of content. The solution is to create an array of individual cells, which are then all applied as individual cells to table by the use of the spread operator `..`. Because the inner loop returned not one, but two cells, we flatten the inner arrays, otherwise we'd spread pairs of cells into the table, not cells itself.\n\n```typ\n#let title-headings() = context table(\n  // ..\n  ..query(heading.where(level: 1))\n    .map(element => (\n      table.cell(text(size: 14pt, element.body)),\n      table.cell(text(size: 26pt, fill: white, \"1\")),\n    ))\n    .flatten()\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 218.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 3209,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T12:46:07.554Z",
      "updated_at": "2024-10-02T13:06:55.303Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Tinger\" data-post=\"2\" data-topic=\"866\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/tinger/48/44_2.png\" class=\"avatar\"> Tinger:</div>\n<blockquote>\n<p>A context expression is a single bit of content, which cannot be inspected anymore</p>\n</blockquote>\n</aside>\n<p>I think you have used “anymore” here in such a way that makes it confusing. <a href=\"https://typst.app/docs/reference/context/\"><code>context</code></a> is <em>always</em> opaque and <strong>never</strong> can be inspected. So “anymore” here refers to “inside <code>context</code>” and “outside <code>context</code>”: you can inspect whatever is written in the <code>context</code> clause/block, but when you go outside (hehe), the <code>context</code>’s content can’t be inspected <em>anymore</em> (it becomes opaque).</p>\n<p>Also a few useful links:</p>\n<ul>\n<li><a href=\"https://typst.app/docs/reference/foundations/arguments/#spreading\">spread operator</a></li>\n<li><a href=\"https://typst.app/docs/reference/foundations/array/#definitions-flatten\"><code>array.flatten()</code></a></li>\n</ul>",
      "raw": "[quote=\"Tinger, post:2, topic:866\"]\nA context expression is a single bit of content, which cannot be inspected anymore\n[/quote]\n\nI think you have used \"anymore\" here in such a way that makes it confusing. [`context`](https://typst.app/docs/reference/context/) is *always* opaque and **never** can be inspected. So \"anymore\" here refers to \"inside `context`\" and \"outside `context`\": you can inspect whatever is written in the `context` clause/block, but when you go outside (hehe), the `context`'s content can't be inspected *anymore* (it becomes opaque).\n\nAlso a few useful links:\n- [spread operator](https://typst.app/docs/reference/foundations/arguments/#spreading)\n- [`array.flatten()`](https://typst.app/docs/reference/foundations/array/#definitions-flatten)",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 38,
      "score": 37.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3211,
      "post_number": 4,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-10-02T13:04:36.562Z",
      "updated_at": "2024-10-02T13:04:36.562Z",
      "cooked": "<p>Yes, that’s how it was meant, couldn’t have said it better!</p>",
      "raw": "Yes, that's how it was meant, couldn't have said it better!",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 37,
      "score": 27.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 3212,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T13:05:22.740Z",
      "updated_at": "2024-10-02T13:13:02.446Z",
      "cooked": "<p>Building on top of <a class=\"mention\" href=\"/u/tinger\">@Tinger</a>’s function, here is a code that should give you the output you desire:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set text(14pt, font: \"Libertinus Sans\")\n#let title-headings() = context table(\n  align: center + horizon,\n  row-gutter: 1em,\n  stroke: 0.5pt,\n  inset: (left: 5pt, rest: 1pt),\n  ..query(heading.where(level: 1))\n    .enumerate()\n    .map(((i, element)) =&gt; stack(\n      dir: ltr,\n      spacing: 1em,\n      text(element.body),\n      square(\n        fill: red,\n        stroke: black + 0.5pt,\n        text(white, size: 0.9em, str(i + 1))\n      )\n    ))\n    .flatten()\n)\n\n#title-headings()\n\n= Heading 1\n== Subtitle\n\n= Heading 2\n== Subtitle\n\n= Heading 3\n== Subtitle\n=== Subsubtitle\n\n= Heading 4\n== Subtitle\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/5d3dc95227c249e69713c43cc37256eba7efc912.png\" data-download-href=\"https://forum.typst.app/uploads/default/5d3dc95227c249e69713c43cc37256eba7efc912\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/5d3dc95227c249e69713c43cc37256eba7efc912_2_121x500.png\" alt=\"image\" data-base62-sha1=\"diQMsb85OMasQIxv8Zza7TP3hbI\" width=\"121\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/5d3dc95227c249e69713c43cc37256eba7efc912_2_121x500.png, https://forum.typst.app/uploads/default/original/1X/5d3dc95227c249e69713c43cc37256eba7efc912.png 1.5x, https://forum.typst.app/uploads/default/original/1X/5d3dc95227c249e69713c43cc37256eba7efc912.png 2x\" data-dominant-color=\"1B1817\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">175×720 25.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>If some padding/inset doesn’t look perfect, you can always tweak them to your liking. :)</p>\n<p>P.S. Not sure why <code>table.cell()</code> wrapper was used there, pretty sure it’s unnecessary.</p>",
      "raw": "Building on top of @Tinger's function, here is a code that should give you the output you desire:\n\n```typ\n#set text(14pt, font: \"Libertinus Sans\")\n#let title-headings() = context table(\n  align: center + horizon,\n  row-gutter: 1em,\n  stroke: 0.5pt,\n  inset: (left: 5pt, rest: 1pt),\n  ..query(heading.where(level: 1))\n    .enumerate()\n    .map(((i, element)) => stack(\n      dir: ltr,\n      spacing: 1em,\n      text(element.body),\n      square(\n        fill: red,\n        stroke: black + 0.5pt,\n        text(white, size: 0.9em, str(i + 1))\n      )\n    ))\n    .flatten()\n)\n\n#title-headings()\n\n= Heading 1\n== Subtitle\n\n= Heading 2\n== Subtitle\n\n= Heading 3\n== Subtitle\n=== Subsubtitle\n\n= Heading 4\n== Subtitle\n```\n\n![image|121x500](upload://diQMsb85OMasQIxv8Zza7TP3hbI.png)\n\nIf some padding/inset doesn't look perfect, you can always tweak them to your liking. :)\n\nP.S. Not sure why `table.cell()` wrapper was used there, pretty sure it's unnecessary.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 17.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3254,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-02T19:32:52.840Z",
      "updated_at": "2024-10-02T19:33:04.696Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/flixz02\">@flixz02</a>, thanks for your question! Could you maybe try to revise your post’s title so others can find it easier in the future? The <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines </a> recommend a complete question:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>I thought about editing the title myself, but I didn’t want to miss your intent – after all the problem revolved around <code>context</code> in addition to tables. I would also encourage you to add these labels (<a class=\"hashtag-cooked\" href=\"/tag/context\" data-type=\"tag\" data-slug=\"context\" data-id=\"61\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>context</span></a>, <a class=\"hashtag-cooked\" href=\"/tag/tables\" data-type=\"tag\" data-slug=\"tables\" data-id=\"53\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>tables</span></a>) while you’re doing so.</p>\n<p>Thank you!</p>",
      "raw": "Hi @flixz02, thanks for your question! Could you maybe try to revise your post’s title so others can find it easier in the future? The [question guidelines ](https://forum.typst.app/t/how-to-post-in-the-questions-category/11) recommend a complete question:\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nI thought about editing the title myself, but I didn't want to miss your intent -- after all the problem revolved around `context` in addition to tables. I would also encourage you to add these labels (#context, #tables) while you're doing so.\n\nThank you!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 27.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3531,
      "post_number": 7,
      "username": "flixz02",
      "name": "",
      "created_at": "2024-10-07T17:56:37.465Z",
      "updated_at": "2024-10-07T17:56:37.465Z",
      "cooked": "<p>Thanks to all of you for your help. Got it to work just the way I wanted <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\n<a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a> not sure how, if I don’t figure out how maybe you just do it.</p>",
      "raw": "Thanks to all of you for your help. Got it to work just the way I wanted :smiley: \n@SillyFreak not sure how, if I don't figure out how maybe you just do it.",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 35.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 519
    },
    {
      "id": 3544,
      "post_number": 8,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-10-08T08:23:15.783Z",
      "updated_at": "2024-10-08T08:23:15.783Z",
      "cooked": "<p>Glad we could help, could you mark one of the replies as a solution so others can find it easier?</p>",
      "raw": "Glad we could help, could you mark one of the replies as a solution so others can find it easier?",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 10.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 29
    }
  ],
  "scraped_at": "2025-06-10T09:57:34.964122"
}
{
  "topic_metadata": {
    "id": 869,
    "title": "How can I use a Base64 encoded image string?",
    "slug": "how-can-i-use-a-base64-encoded-image-string",
    "posts_count": 8,
    "created_at": "2024-10-02T12:09:47.670Z",
    "last_posted_at": "2025-03-23T18:41:36.956Z",
    "views": 454,
    "like_count": 3,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "Andrew",
    "tags": [
      "graphics"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 611
  },
  "posts": [
    {
      "id": 3203,
      "post_number": 1,
      "username": "ShaiQ",
      "name": "ShaiQ",
      "created_at": "2024-10-02T12:09:47.832Z",
      "updated_at": "2024-10-02T19:21:06.981Z",
      "cooked": "<p>I would like to embed an image that I have as a <strong>Base64</strong> encoded string directly into my Typst document. Normally, I can embed an image using the following syntax, but it only allows specific format only not string.</p>\n<pre><code class=\"lang-auto\">image(\"path/to/image.png\", width: 100%)\n</code></pre>",
      "raw": "I would like to embed an image that I have as a **Base64** encoded string directly into my Typst document. Normally, I can embed an image using the following syntax, but it only allows specific format only not string.\n\n```\nimage(\"path/to/image.png\", width: 100%)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 61,
      "score": 1832.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 468
    },
    {
      "id": 3205,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T12:14:01.375Z",
      "updated_at": "2024-10-02T12:14:01.375Z",
      "cooked": "<p>Can you clarify: you have a Base64 encoded image (of a format that is <em>currently supported</em> by Typst), and you want to insert it in a Typst document as a regular image, correct?</p>",
      "raw": "Can you clarify: you have a Base64 encoded image (of a format that is *currently supported* by Typst), and you want to insert it in a Typst document as a regular image, correct?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 107.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3206,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T12:26:53.157Z",
      "updated_at": "2024-10-02T17:10:08.581Z",
      "cooked": "<p>In case <a href=\"https://forum.typst.app/t/how-can-i-use-a-base64-encoded-image-string/869/2\">this is correct</a>, by using <a href=\"https://typst.app/universe/package/based\">based</a> package (love the name) you can easily achieve this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/based:0.1.0\": base64\n#set page(width: auto, height: auto, margin: 0pt)\n\n// `base64 -w 0 smile.png` (10x10):\n#let base64-encoded-image = \"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAC4jAAAuIwF4pT92AAAASUlEQVQYGa3OWwoAIAgEQNf739k0EjVCfxKCHtMqiEh0jcWjOKBAkQjPe7MFdun/IbRdDNb05nvolzWzEx0DdozK96W1PzjNHxcgphkBs9CoHwAAAABJRU5ErkJggg==\"\n#let raw-image = base64.decode(base64-encoded-image)\n\n#image.decode(raw-image, format: \"png\")\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/0ff442973006e419494d4964c825127524fd3ee6.png\" alt=\"image\" data-base62-sha1=\"2h8ubPBk7CG3NENEEYpTfOyTopg\" width=\"79\" height=\"65\"></p>\n<p><a href=\"https://typst.app/docs/reference/visualize/image/#definitions-decode\"><code>image.decode</code></a></p>",
      "raw": "In case [this is correct](https://forum.typst.app/t/how-can-i-use-a-base64-encoded-image-string/869/2), by using [based](https://typst.app/universe/package/based) package (love the name) you can easily achieve this:\n\n```typ\n#import \"@preview/based:0.1.0\": base64\n#set page(width: auto, height: auto, margin: 0pt)\n\n// `base64 -w 0 smile.png` (10x10):\n#let base64-encoded-image = \"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAC4jAAAuIwF4pT92AAAASUlEQVQYGa3OWwoAIAgEQNf739k0EjVCfxKCHtMqiEh0jcWjOKBAkQjPe7MFdun/IbRdDNb05nvolzWzEx0DdozK96W1PzjNHxcgphkBs9CoHwAAAABJRU5ErkJggg==\"\n#let raw-image = base64.decode(base64-encoded-image)\n\n#image.decode(raw-image, format: \"png\")\n```\n\n![image|79x65](upload://2h8ubPBk7CG3NENEEYpTfOyTopg.png)\n\n[`image.decode`](https://typst.app/docs/reference/visualize/image/#definitions-decode)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 67.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3235,
      "post_number": 4,
      "username": "ShaiQ",
      "name": "ShaiQ",
      "created_at": "2024-10-02T16:02:28.942Z",
      "updated_at": "2024-10-02T16:02:48.668Z",
      "cooked": "<p>Yes, indeed. I have a Base64 encoded image that I want to include in a Typst document as a standard image.<br>\nThis code snippet successfully solves the issue<br>\nThanks!</p>",
      "raw": "Yes, indeed. I have a Base64 encoded image that I want to include in a Typst document as a standard image. \nThis code snippet successfully solves the issue\nThanks!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 56,
      "score": 41.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 468
    },
    {
      "id": 9747,
      "post_number": 5,
      "username": "Said",
      "name": "Said",
      "created_at": "2025-03-13T09:10:59.791Z",
      "updated_at": "2025-03-19T16:49:40.863Z",
      "cooked": "<p>You shouldn’t use based if you have a document with a lot of pictures. I am testing with a document with 35 pictures in base64 format. Using based it takes 60 seconds to generate the pdf and just using</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">image.decode(\"&lt;svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"&gt;&lt;image xlink:href=\\\"data:image/jpg;base64,\" + foto.Foto + \"\\\" /&gt;&lt;/svg&gt;\")\n</code></pre>\n<p>it takes less than 1 second. I provided the base64 string through the variable <code>foto.Foto</code> because it’s part of a for each loop.</p>",
      "raw": "You shouldn't use based if you have a document with a lot of pictures. I am testing with a document with 35 pictures in base64 format. Using based it takes 60 seconds to generate the pdf and just using \n```typc\nimage.decode(\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"><image xlink:href=\\\"data:image/jpg;base64,\" + foto.Foto + \"\\\" /></svg>\")\n```\nit takes less than 1 second. I provided the base64 string through the variable `foto.Foto` because it's part of a for each loop.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 39,
      "score": 42.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1346
    },
    {
      "id": 10132,
      "post_number": 6,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-03-23T16:42:34.362Z",
      "updated_at": "2025-03-23T16:42:34.362Z",
      "cooked": "<p>Did you use version 0.2.0 of based when it took 60 seconds? I know that 0.1.0 was incredibly slow, but I switched to a wasm plugin for 0.2.0, which improved performance by a lot.</p>",
      "raw": "Did you use version 0.2.0 of based when it took 60 seconds? I know that 0.1.0 was incredibly slow, but I switched to a wasm plugin for 0.2.0, which improved performance by a lot.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 26.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 10134,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-23T18:35:03.828Z",
      "updated_at": "2025-03-23T18:35:03.828Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Said\" data-post=\"5\" data-topic=\"869\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/220F66/48.png\" class=\"avatar\"> Said:</div>\n<blockquote>\n<p>You shouldn’t use based if you have a document with a lot of pictures.</p>\n</blockquote>\n</aside>\n<p>You shouldn’t embed (big/many) images into a Typst document by encoding it in a different format. That is clearly not how it is meant to be used, and obviously any data manipulation such as decoding Base64 to bytes will take some CPU cycles to finish. The SVG hack sounds interesting, though it might have some downsides, but I’m not an SVG nerd.</p>\n<aside class=\"quote no-group\" data-username=\"Eric\" data-post=\"6\" data-topic=\"869\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/eric/48/87_2.png\" class=\"avatar\"> Eric:</div>\n<blockquote>\n<p>I switched to a wasm plugin for 0.2.0, which improved performance by a lot.</p>\n</blockquote>\n</aside>\n<p>Hold on, I thought that WASM code should be always slower than the native Typst code. What’s the catch?</p>",
      "raw": "[quote=\"Said, post:5, topic:869\"]\nYou shouldn’t use based if you have a document with a lot of pictures.\n[/quote]\n\nYou shouldn't embed (big/many) images into a Typst document by encoding it in a different format. That is clearly not how it is meant to be used, and obviously any data manipulation such as decoding Base64 to bytes will take some CPU cycles to finish. The SVG hack sounds interesting, though it might have some downsides, but I'm not an SVG nerd.\n\n[quote=\"Eric, post:6, topic:869\"]\nI switched to a wasm plugin for 0.2.0, which improved performance by a lot.\n[/quote]\n\nHold on, I thought that WASM code should be always slower than the native Typst code. What's the catch?",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 2,
      "like_count": 0,
      "reads": 30,
      "score": 16.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10135,
      "post_number": 8,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-23T18:41:36.956Z",
      "updated_at": "2025-03-30T12:38:01.632Z",
      "cooked": "<p>Wow, I can no longer edit my own message… Anyway, I wanted to make an update.</p>\n<p>First is, of course, update the <code>based</code> package version, but the second point is that now <a href=\"https://typst.app/docs/reference/visualize/image/#definitions-decode\"><code>image.decode</code></a> is deprecated, and you should pass <code>bytes</code> directly, i.e.:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#image(base64.decode(base64-encoded-image))\n</code></pre>\n<p>I’ve also noticed that you don’t have to specify the format anymore, I assume it will auto-detect any format correctly, just like it does when you provide a path to the image.</p>\n<details><summary>Complete solution</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/based:0.2.0\": base64\n#set page(width: auto, height: auto, margin: 0pt)\n\n// `base64 -w 0 smile.png` (10x10):\n#let base64-encoded-image = \"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAC4jAAAuIwF4pT92AAAASUlEQVQYGa3OWwoAIAgEQNf739k0EjVCfxKCHtMqiEh0jcWjOKBAkQjPe7MFdun/IbRdDNb05nvolzWzEx0DdozK96W1PzjNHxcgphkBs9CoHwAAAABJRU5ErkJggg==\"\n#let raw-image = base64.decode(base64-encoded-image)\n\n#image(raw-image)\n</code></pre>\n</details>",
      "raw": "Wow, I can no longer edit my own message... Anyway, I wanted to make an update.\n\nFirst is, of course, update the `based` package version, but the second point is that now [`image.decode`](https://typst.app/docs/reference/visualize/image/#definitions-decode) is deprecated, and you should pass `bytes` directly, i.e.:\n\n```typ\n#image(base64.decode(base64-encoded-image))\n```\n\nI've also noticed that you don't have to specify the format anymore, I assume it will auto-detect any format correctly, just like it does when you provide a path to the image.\n\n<details><summary>Complete solution</summary>\n\n```typ\n#import \"@preview/based:0.2.0\": base64\n#set page(width: auto, height: auto, margin: 0pt)\n\n// `base64 -w 0 smile.png` (10x10):\n#let base64-encoded-image = \"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAC4jAAAuIwF4pT92AAAASUlEQVQYGa3OWwoAIAgEQNf739k0EjVCfxKCHtMqiEh0jcWjOKBAkQjPe7MFdun/IbRdDNb05nvolzWzEx0DdozK96W1PzjNHxcgphkBs9CoHwAAAABJRU5ErkJggg==\"\n#let raw-image = base64.decode(base64-encoded-image)\n\n#image(raw-image)\n```\n\n</details>",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 20.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:34.253694"
}
{
  "topic_metadata": {
    "id": 870,
    "title": "How can I use different page number locations on alternating pages?",
    "slug": "how-can-i-use-different-page-number-locations-on-alternating-pages",
    "posts_count": 2,
    "created_at": "2024-10-02T13:19:30.284Z",
    "last_posted_at": "2024-10-02T13:36:57.883Z",
    "views": 451,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "numbering",
      "page"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 261
  },
  "posts": [
    {
      "id": 3213,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-02T13:19:30.441Z",
      "updated_at": "2024-10-02T19:25:46.785Z",
      "cooked": "<p>How is it possible to place page numbers at the top left corners of odd pages and top right corners of even pages?</p>\n<pre data-code-wrap=\"none\"><code class=\"lang-none\">┌───────╥───────┐ ┌───────╥───────┐\n│ 1     ║     2 │ │ 3     ║     4 │\n│       ║       │ │       ║       │\n│       ║       │ │       ║       │\n│       ║       │ │       ║       │\n└───────╨───────┘ └───────╨───────┘\n</code></pre>\n<p>Or maybe the other way around, which is in fact a more correct way to number pages according to book design traditions:</p>\n<pre><code class=\"lang-auto\">┌───────┐ ┌───────╥───────┐ ┌───────╥───────┐\n│     1 │ │ 2     ║     3 │ │ 4     ║     5 │\n│       │ │       ║       │ │       ║       │\n│       │ │       ║       │ │       ║       │\n│       │ │       ║       │ │       ║       │\n└───────┘ └───────╨───────┘ └───────╨───────┘\n</code></pre>\n<p>( <em><a href=\"https://typst.app/docs/guides/page-setup-guide\" class=\"inline-onebox\">Page setup guide – Typst Documentation</a></em> documentation page doesn’t seem to mention this trick. The closest thing I have found there is:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(header: context {\n  if counter(page).get().first() &gt; 1 [\n    ...\n  ]\n})\n</code></pre>\n<p>Which can probably be changed like “if page number is divisible by 2, then it is even; otherwise, it is odd”. But then, how to implement this if/else in code? )</p>",
      "raw": "How is it possible to place page numbers at the top left corners of odd pages and top right corners of even pages?\n\n``` none\n┌───────╥───────┐ ┌───────╥───────┐\n│ 1     ║     2 │ │ 3     ║     4 │\n│       ║       │ │       ║       │\n│       ║       │ │       ║       │\n│       ║       │ │       ║       │\n└───────╨───────┘ └───────╨───────┘\n```\n\nOr maybe the other way around, which is in fact a more correct way to number pages according to book design traditions:\n\n```\n┌───────┐ ┌───────╥───────┐ ┌───────╥───────┐\n│     1 │ │ 2     ║     3 │ │ 4     ║     5 │\n│       │ │       ║       │ │       ║       │\n│       │ │       ║       │ │       ║       │\n│       │ │       ║       │ │       ║       │\n└───────┘ └───────╨───────┘ └───────╨───────┘\n```\n\n( *https://typst.app/docs/guides/page-setup-guide* documentation page doesn't seem to mention this trick. The closest thing I have found there is:\n\n```typ\n#set page(header: context {\n  if counter(page).get().first() > 1 [\n    ...\n  ]\n})\n```\n\nWhich can probably be changed like \"if page number is divisible by 2, then it is even; otherwise, it is odd\". But then, how to implement this if/else in code? )",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 55,
      "score": 1631.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 3217,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T13:36:57.883Z",
      "updated_at": "2024-10-02T13:36:57.883Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(height: auto)\n\n// Starting from left:\n// #set page(header: context {\n//   let page = counter(page).get().first()\n//   let body = if calc.odd(page) [odd ] else [even ] + str(page)\n//   let alignment = if calc.odd(page) { left } else { right }\n//   align(alignment, body)\n// })\n\n// Starting from right (book style):\n#set page(header: context {\n  let page = counter(page).get().first()\n  let body = if calc.odd(page) [odd ] else [even ] + str(page)\n  let alignment = if calc.odd(page) { right } else { left }\n  align(alignment, body)\n})\n\n#range(5).map(_ =&gt; pagebreak()).join()\n</code></pre>\n<div align=\"center\">\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/cc27c2e1e39f379dff226b47d1166bd517983d97.png\" data-download-href=\"https://forum.typst.app/uploads/default/cc27c2e1e39f379dff226b47d1166bd517983d97\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/cc27c2e1e39f379dff226b47d1166bd517983d97_2_335x500.png\" alt=\"image\" data-base62-sha1=\"t82AHWtbnsEx3OCPEOoI2rER4az\" width=\"335\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/cc27c2e1e39f379dff226b47d1166bd517983d97_2_335x500.png, https://forum.typst.app/uploads/default/optimized/1X/cc27c2e1e39f379dff226b47d1166bd517983d97_2_502x750.png 1.5x, https://forum.typst.app/uploads/default/original/1X/cc27c2e1e39f379dff226b47d1166bd517983d97.png 2x\" data-dominant-color=\"030303\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">612×911 6.96 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</div>\n<p>This can be simplified to:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(header: context {\n  let page = counter(page).get().first()\n  align(if calc.odd(page) { right } else { left })[#page]\n})\n</code></pre>\n<p>I have a feeling that this might be achieved in some even easier way, but nothing else comes to mind.</p>",
      "raw": "```typ\n#set page(height: auto)\n\n// Starting from left:\n// #set page(header: context {\n//   let page = counter(page).get().first()\n//   let body = if calc.odd(page) [odd ] else [even ] + str(page)\n//   let alignment = if calc.odd(page) { left } else { right }\n//   align(alignment, body)\n// })\n\n// Starting from right (book style):\n#set page(header: context {\n  let page = counter(page).get().first()\n  let body = if calc.odd(page) [odd ] else [even ] + str(page)\n  let alignment = if calc.odd(page) { right } else { left }\n  align(alignment, body)\n})\n\n#range(5).map(_ => pagebreak()).join()\n```\n\n<div align=center>\n\n![image|335x500](upload://t82AHWtbnsEx3OCPEOoI2rER4az.png)\n</div>\n\nThis can be simplified to:\n\n```typ\n#set page(header: context {\n  let page = counter(page).get().first()\n  align(if calc.odd(page) { right } else { left })[#page]\n})\n```\n\nI have a feeling that this might be achieved in some even easier way, but nothing else comes to mind.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 53,
      "score": 465.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:33.516931"
}
{
  "topic_metadata": {
    "id": 873,
    "title": "How can I map an array of math mode characters to text?",
    "slug": "how-can-i-map-an-array-of-math-mode-characters-to-text",
    "posts_count": 4,
    "created_at": "2024-10-02T13:37:01.789Z",
    "last_posted_at": "2024-10-02T14:18:27.791Z",
    "views": 570,
    "like_count": 4,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting",
      "math"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 469
  },
  "posts": [
    {
      "id": 3218,
      "post_number": 1,
      "username": "Steven",
      "name": "Steven",
      "created_at": "2024-10-02T13:37:02.000Z",
      "updated_at": "2024-10-03T02:14:11.536Z",
      "cooked": "<p>What is the correct way to use <code>map</code> to render math mode? For example, I would like to print</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">1, 2, 3, a, b\n</code></pre>\n<p>to the document.</p>\n<p>I have tried the following</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">\n#text[#(1, 2, 3, $alpha$, $beta$).map(\n    x =&gt; x\n)]\n\n#(1, 2, 3, $alpha$, $beta$).map(\n    x =&gt; text[#x]\n)\n\n#(1, 2, 3, $alpha$, $beta$).map(\n    x =&gt; text[$#x$]\n)\n\n</code></pre>\n<p>However, the math blocks are not rendered as text<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/87cbc6b75ac3b9e276dd227ce67ec5eca6db8136.png\" data-download-href=\"https://forum.typst.app/uploads/default/87cbc6b75ac3b9e276dd227ce67ec5eca6db8136\" title=\"Screenshot 2024-10-02 at 21.34.50\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/87cbc6b75ac3b9e276dd227ce67ec5eca6db8136_2_353x500.png\" alt=\"Screenshot 2024-10-02 at 21.34.50\" data-base62-sha1=\"jnj2UYL2eWp82bvHEy3bgvat9nE\" width=\"353\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/87cbc6b75ac3b9e276dd227ce67ec5eca6db8136_2_353x500.png, https://forum.typst.app/uploads/default/original/1X/87cbc6b75ac3b9e276dd227ce67ec5eca6db8136.png 1.5x, https://forum.typst.app/uploads/default/original/1X/87cbc6b75ac3b9e276dd227ce67ec5eca6db8136.png 2x\" data-dominant-color=\"F7F6F7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2024-10-02 at 21.34.50</span><span class=\"informations\">434×614 62.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "What is the correct way to use `map` to render math mode? For example, I would like to print \n\n```typ\n1, 2, 3, a, b\n```\n to the document.\n\n\nI have tried the following\n\n```typ\n\n#text[#(1, 2, 3, $alpha$, $beta$).map(\n    x => x\n)]\n\n#(1, 2, 3, $alpha$, $beta$).map(\n    x => text[#x]\n)\n\n#(1, 2, 3, $alpha$, $beta$).map(\n    x => text[$#x$]\n)\n\n```\n\nHowever, the math blocks are not rendered as text\n![Screenshot 2024-10-02 at 21.34.50|353x500](upload://jnj2UYL2eWp82bvHEy3bgvat9nE.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 2884.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 522
    },
    {
      "id": 3220,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T14:00:34.841Z",
      "updated_at": "2024-10-02T14:19:29.524Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$#(1, 2, 3, $alpha$, $beta$).intersperse(\",\").map(x =&gt; [#x]).join()$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/7d1e6e0cc3b572a0979086fdc4efdebd3fec0e71.png\" alt=\"image\" data-base62-sha1=\"hQQSwUcseEIsUQkFlIhucXyQQuZ\" width=\"225\" height=\"83\"></p>\n<p>One of the key problems you are having is that you get an <code>array</code> and not a <code>content</code>. Currently, <code>content</code> can be represented by a few (hidden) types: <code>context</code>, <code>sequence</code>, <code>styled</code>. <a href=\"https://typst.app/docs/reference/context/\"><code>context</code></a> is something you can look up, but the other two normally only can be discovered when tinkering/hacking. <code>sequence</code> is a sequence of elements (something that can be implicitly converted to <code>content</code>), while <code>styled</code> is when you add some set/show rules to your document.</p>\n<p>You can use <a href=\"https://typst.app/docs/reference/foundations/repr/\"><code>repr()</code></a> (and <code>.func()</code>/<code>type()</code>) to look deeper at how things work:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let list = (1, 2, 3, $alpha$, $beta$)\n#repr(list) // `array`\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/c4a84ac67451fdab615793b33724238a31fc608d.png\" alt=\"image\" data-base62-sha1=\"s3I9cfOg37riJebm2oHrIk35AZL\" width=\"300\" height=\"200\"></p>\n<hr>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let list = (1, 2, 3, $alpha$, $beta$)\n// `array` (commas inserted between all elements)\n#repr(list.intersperse(\",\"))\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/238b5a92d7eef4d27a6ef0a989c343919e0bcb6a.png\" alt=\"image\" data-base62-sha1=\"54rh5s3G3VekJs79BIm21yQ1BQ6\" width=\"299\" height=\"315\"></p>\n<hr>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let list = (1, 2, 3, $alpha$, $beta$)\n// `array` where all elements of type `content`\n// You can't join `content`/`str` with `int`.\n#repr(list.intersperse(\",\").map(x =&gt; [#x]))\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/94e682cf81135ee000bf92209b6b969a049748e5.png\" alt=\"image\" data-base62-sha1=\"lfex3jBzRLRrJfPi61gCXnvH2qp\" width=\"298\" height=\"297\"></p>\n<hr>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let list = (1, 2, 3, $alpha$, $beta$)\n#repr(list.intersperse(\",\").map(x =&gt; [#x]).join()) // `sequence`\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/f714b2b74424f0ec8c079c2de2d60088480c5515.png\" alt=\"image\" data-base62-sha1=\"zfMhoZq3JRhQ8V09rc3AQqfquUJ\" width=\"294\" height=\"305\"></p>\n<p>I want to make an explicit note that in the future the way <code>content</code> is internally defined can be changed and these <code>sequence</code> and <code>styled</code> can become inaccessible or disappear altogether. But for now a few packages and solutions do depend on them, but these are all considered hacks, since there were no intention that users will use the functions directly.</p>\n<p>Edit:</p>\n<p>As was correctly pointed out by <a class=\"mention\" href=\"/u/eric\">@Eric</a> the <a href=\"https://typst.app/docs/reference/foundations/array/#definitions-intersperse\"><code>intersperse()</code></a> here is exessive as <a href=\"https://typst.app/docs/reference/foundations/array/#definitions-join\"><code>array.join()</code></a> has an optional positional <code>separator</code> argument (that can have any type). This brings the MRE down to:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$#(1, 2, 3, $alpha$, $beta$).map(x =&gt; [#x]).join[,]$\n</code></pre>",
      "raw": "```typ\n$#(1, 2, 3, $alpha$, $beta$).intersperse(\",\").map(x => [#x]).join()$\n```\n\n![image|225x83](upload://hQQSwUcseEIsUQkFlIhucXyQQuZ.png)\n\nOne of the key problems you are having is that you get an `array` and not a `content`. Currently, `content` can be represented by a few (hidden) types: `context`, `sequence`, `styled`. [`context`](https://typst.app/docs/reference/context/) is something you can look up, but the other two normally only can be discovered when tinkering/hacking. `sequence` is a sequence of elements (something that can be implicitly converted to `content`), while `styled` is when you add some set/show rules to your document.\n\nYou can use [`repr()`](https://typst.app/docs/reference/foundations/repr/) (and `.func()`/`type()`) to look deeper at how things work:\n\n```typ\n#let list = (1, 2, 3, $alpha$, $beta$)\n#repr(list) // `array`\n```\n\n![image|400x267, 75%](upload://s3I9cfOg37riJebm2oHrIk35AZL.png)\n\n---\n\n```typ\n#let list = (1, 2, 3, $alpha$, $beta$)\n// `array` (commas inserted between all elements)\n#repr(list.intersperse(\",\"))\n```\n\n![image|399x420, 75%](upload://54rh5s3G3VekJs79BIm21yQ1BQ6.png)\n\n---\n\n```typ\n#let list = (1, 2, 3, $alpha$, $beta$)\n// `array` where all elements of type `content`\n// You can't join `content`/`str` with `int`.\n#repr(list.intersperse(\",\").map(x => [#x]))\n```\n\n![image|398x397, 75%](upload://lfex3jBzRLRrJfPi61gCXnvH2qp.png)\n\n---\n\n```typ\n#let list = (1, 2, 3, $alpha$, $beta$)\n#repr(list.intersperse(\",\").map(x => [#x]).join()) // `sequence`\n```\n\n![image|392x407, 75%](upload://zfMhoZq3JRhQ8V09rc3AQqfquUJ.png)\n\nI want to make an explicit note that in the future the way `content` is internally defined can be changed and these `sequence` and `styled` can become inaccessible or disappear altogether. But for now a few packages and solutions do depend on them, but these are all considered hacks, since there were no intention that users will use the functions directly.\n\nEdit:\n\nAs was correctly pointed out by @Eric the [`intersperse()`](https://typst.app/docs/reference/foundations/array/#definitions-intersperse) here is exessive as [`array.join()`](https://typst.app/docs/reference/foundations/array/#definitions-join) has an optional positional `separator` argument (that can have any type). This brings the MRE down to:\n\n```typ\n$#(1, 2, 3, $alpha$, $beta$).map(x => [#x]).join[,]$\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 42,
      "score": 98.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3221,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-02T14:12:58.923Z",
      "updated_at": "2024-10-02T14:12:58.923Z",
      "cooked": "<p>No need for the <code>intersperse</code>, as you can do that with <code>join</code> too:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let list = (1, 2, 3, $alpha$, $beta$)\n#list.map(x =&gt; [#x]).join[, ]\n</code></pre>",
      "raw": "No need for the `intersperse`, as you can do that with `join` too:\n```typ\n#let list = (1, 2, 3, $alpha$, $beta$)\n#list.map(x => [#x]).join[, ]\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 31,
      "score": 91.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 3222,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T14:18:27.791Z",
      "updated_at": "2024-10-02T14:21:06.373Z",
      "cooked": "<p>Completely forgot about that, thank you. I used too much of <code>.join()</code> recently, so for me the optional argument was non-existent.</p>",
      "raw": "Completely forgot about that, thank you. I used too much of `.join()` recently, so for me the optional argument was non-existent.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:32.704718"
}
{
  "topic_metadata": {
    "id": 875,
    "title": "Is there a way to remove automatic scaling of nested braces/brackets/parentheses in math mode?",
    "slug": "is-there-a-way-to-remove-automatic-scaling-of-nested-braces-brackets-parentheses-in-math-mode",
    "posts_count": 12,
    "created_at": "2024-10-02T15:01:58.250Z",
    "last_posted_at": "2024-10-04T13:57:42.672Z",
    "views": 460,
    "like_count": 9,
    "reply_count": 7,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 1330
  },
  "posts": [
    {
      "id": 3224,
      "post_number": 1,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T15:01:58.377Z",
      "updated_at": "2024-10-02T15:01:58.377Z",
      "cooked": "<p>I’m pretty sure I’ve seen something like this before, but I can’t remember anything. I’m not even sure this is possible. Is it? If so, then how would I do it?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$((...((x - 2)^2 - 2)^2... - 2)^2)$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/e391af1643865807dfa2a366a61caa39060bc30e.png\" alt=\"image\" data-base62-sha1=\"wtavKONZ5ROVSCUytV2zPSIr12C\" width=\"309\" height=\"76\"></p>\n<p>Basically, I want to have all the parentheses to have the same standard size. I’ve looked at <code>lr</code> as my immediate guess, but it looks like that you should use it explicitly, and it doesn’t affect symbols that were inserted without its use.</p>",
      "raw": "I'm pretty sure I've seen something like this before, but I can't remember anything. I'm not even sure this is possible. Is it? If so, then how would I do it?\n\n```typ\n$((...((x - 2)^2 - 2)^2... - 2)^2)$\n```\n\n![image|619x153, 50%](upload://wtavKONZ5ROVSCUytV2zPSIr12C.png)\n\nBasically, I want to have all the parentheses to have the same standard size. I've looked at `lr` as my immediate guess, but it looks like that you should use it explicitly, and it doesn't affect symbols that were inserted without its use.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 62,
      "score": 1542.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3225,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-02T15:07:47.659Z",
      "updated_at": "2024-10-02T15:07:47.659Z",
      "cooked": "<p>Isn’t that a set rule on lr?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set math.lr(size: 1em)\n$ ((...((x - 2)^2 - 2)^2... - 2)^2) $\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/068c9c7c2eae90cd80271c155cb101b7e59e2dcd.png\" alt=\"image\" data-base62-sha1=\"VW7D7aLKCsM65AyjHVCESXlMMB\" width=\"314\" height=\"64\"></p>",
      "raw": "Isn't that a set rule on lr?\n```typ\n#set math.lr(size: 1em)\n$ ((...((x - 2)^2 - 2)^2... - 2)^2) $\n```\n![image|314x64](upload://VW7D7aLKCsM65AyjHVCESXlMMB.png)",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 60,
      "score": 167.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3228,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T15:34:08.540Z",
      "updated_at": "2024-10-02T15:39:04.104Z",
      "cooked": "<p>Oh, I think it didn’t work because I used <code>#set math.lr(size: 100%)</code>. Not sure I would call <code>1em</code> an obvious value for <a href=\"https://typst.app/docs/reference/math/lr#functions-lr-parameters-size\"><code>size</code></a>, but now I know. Thanks.</p>\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/typst/issues/5098\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/issues/5098\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/typst/issues/5098\" target=\"_blank\" rel=\"noopener nofollow ugc\">Consider adding an example to `math.lr.size`</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-10-02\" data-time=\"15:38:35\" data-timezone=\"UTC\">03:38PM - 02 Oct 24 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/Andrew15-5\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n          <img alt=\"Andrew15-5\" src=\"https://forum.typst.app/uploads/default/original/1X/8c66fc8b1c207ba90488266df18b206a61b1fc49.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"707C3A\">\n          Andrew15-5\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          docs\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">### Description\n\nAfter I got a solution here: https://forum.typst.app/t/is-there<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\">-a-way-to-remove-automatic-scaling-of-nested-braces-brackets-parentheses-in-math-mode/875/2, I think that this code snippet is the perfect candidate for an example for https://typst.app/docs/reference/math/lr#functions-lr-parameters-size.\n\n```typ\n#set math.lr(size: 1em)\n```\n\n[Above](https://typst.app/docs/reference/math/lr) there is already an example of `lr(size: 50%)` which is what I tried to do at first to achieve my goal (with `100%`), but it didn't change anything.</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Oh, I think it didn't work because I used `#set math.lr(size: 100%)`. Not sure I would call `1em` an obvious value for [`size`](https://typst.app/docs/reference/math/lr#functions-lr-parameters-size), but now I know. Thanks.\n\nhttps://github.com/typst/typst/issues/5098",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 59,
      "score": 16.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3230,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-02T15:41:02.727Z",
      "updated_at": "2024-10-02T16:07:32.480Z",
      "cooked": "<p>The <span class=\"bbcode-s\">accent</span> superscript position looks like a bug though, right? They should ideally all be at the same height.</p>",
      "raw": "The [s]accent[/s] superscript position looks like a bug though, right? They should ideally all be at the same height.",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 2,
      "reads": 56,
      "score": 121.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 3233,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T15:48:37.028Z",
      "updated_at": "2024-10-02T15:48:37.028Z",
      "cooked": "<p>You mean the superscript numbers? Yeah, I suppose it is, unless there is “a more correct” solution. I didn’t even notice until now.</p>",
      "raw": "You mean the superscript numbers? Yeah, I suppose it is, unless there is \"a more correct\" solution. I didn't even notice until now.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 10.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3237,
      "post_number": 6,
      "username": "ludwig",
      "name": "",
      "created_at": "2024-10-02T16:51:04.555Z",
      "updated_at": "2024-10-02T16:51:04.555Z",
      "cooked": "<p>I think the correct way is to escape the brackets, i.e. writing <code>\\(</code> and <code>\\)</code>. That way, the superscript positions are also correct.</p>",
      "raw": "I think the correct way is to escape the brackets, i.e. writing `\\(` and `\\)`. That way, the superscript positions are also correct.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 51,
      "score": 60.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 300
    },
    {
      "id": 3238,
      "post_number": 7,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-02T17:01:16.557Z",
      "updated_at": "2024-10-02T17:01:22.360Z",
      "cooked": "<p>Hmmm seems like superscripts (and probably subscripts) positions are computed at some point before the set rule is in effect? It does seem inefficient, if the computations happen all the same despite identical lr size.</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"Andrew\" data-post=\"3\" data-topic=\"875\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>Oh, I think it didn’t work because I used <code>#set math.lr(size: 100%)</code>. Not sure I would call <code>1em</code> an obvious value for <a href=\"https://typst.app/docs/reference/math/lr#functions-lr-parameters-size\"><code>size</code></a>, but now I know. Thanks.</p>\n<p><a href=\"https://github.com/typst/typst/issues/5098\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Consider adding an example to `math.lr.size` · Issue #5098 · typst/typst · GitHub</a></p>\n</blockquote>\n</aside>\n<p>Yes, my experience so far has been the same. The difference between relative and length is usually very fine. In this case, looks like em works!</p>",
      "raw": "Hmmm seems like superscripts (and probably subscripts) positions are computed at some point before the set rule is in effect? It does seem inefficient, if the computations happen all the same despite identical lr size.\n\n[quote=\"Andrew, post:3, topic:875\"]\nOh, I think it didn’t work because I used `#set math.lr(size: 100%)`. Not sure I would call `1em` an obvious value for [`size`](https://typst.app/docs/reference/math/lr#functions-lr-parameters-size), but now I know. Thanks.\n\nhttps://github.com/typst/typst/issues/5098\n[/quote]\n\nYes, my experience so far has been the same. The difference between relative and length is usually very fine. In this case, looks like em works!",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 49,
      "score": 9.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3241,
      "post_number": 8,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T17:15:47.052Z",
      "updated_at": "2024-10-02T17:15:47.052Z",
      "cooked": "<p>That’s fine, but this is not an automated solution like I imagined (set/show rule) and it does make the code less readable. Cool that at least superscript position is correct.</p>",
      "raw": "That's fine, but this is not an automated solution like I imagined (set/show rule) and it does make the code less readable. Cool that at least superscript position is correct.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 13.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3242,
      "post_number": 9,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T17:25:03.295Z",
      "updated_at": "2024-10-02T17:25:03.295Z",
      "cooked": "<p>Let’s see how it goes:</p>\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/typst/issues/5101\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/issues/5101\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/typst/issues/5101\" target=\"_blank\" rel=\"noopener nofollow ugc\">Superscript text doesn't move down when parentheses scaling is decreased</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-10-02\" data-time=\"17:24:09\" data-timezone=\"UTC\">05:24PM - 02 Oct 24 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/Andrew15-5\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n          <img alt=\"Andrew15-5\" src=\"https://forum.typst.app/uploads/default/original/1X/8c66fc8b1c207ba90488266df18b206a61b1fc49.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"707C3A\">\n          Andrew15-5\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          bug\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">### Description\n\nI'm not sure if it's a bug, but using show rule from https://gi<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\">thub.com/typst/typst/issues/5098 doesn't reset superscript to the natural height:\n\n```typ\n#set math.lr(size: 1em)\n$ ((...((x - 2)^2 - 2)^2... - 2)^2) $\n```\n\n![image](https://github.com/user-attachments/assets/3661da6c-a604-4070-aead-94bbfd352a44)\n\nThere is a sudden improvement (?) when using a version from 2024-09-28:\n\n![image](https://github.com/user-attachments/assets/deb86ebe-9371-44db-b250-7c27dd0f766c)\n\n[First mentioned](https://forum.typst.app/t/is-there-a-way-to-remove-automatic-scaling-of-nested-braces-brackets-parentheses-in-math-mode/875/4)\n\n### Reproduction URL\n\n_No response_\n\n### Operating system\n\nLinux\n\n### Typst version\n\n- [X] I am using the latest version of Typst</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Let's see how it goes:\n\nhttps://github.com/typst/typst/issues/5101",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 8.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3303,
      "post_number": 10,
      "username": "mkorje",
      "name": "Max",
      "created_at": "2024-10-03T11:26:46.457Z",
      "updated_at": "2024-10-03T11:28:59.550Z",
      "cooked": "<p>There’s quite a bit happening “behind the scenes”, and so I think explaining what’s actually happening in the code might make things clearer.</p>\n<hr>\n<p>When delimiters are automatically matched, what this really means is that an implicit <code>math.lr</code> function call is created, with the size set to <code>auto</code>. e.g.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$((...((x - 2)^2 - 2)^2... - 2)^2)$\n</code></pre>\n<p>gets turned into</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$lr((lr((...lr((lr((x - 2), size: #auto)^2 - 2), size: #auto)^2... - 2), size: #auto)^2), size: #auto)$\n</code></pre>\n<p>(technically these aren’t equivalent, but that doesn’t matter here).</p>\n<p>Now the size of <code>auto</code> means that the compiler stretches the delimiters to the total height of the contents in the <code>lr</code> function call’s <code>body</code>. When you use a relative size, like <code>100%</code>, this is relative to the aforementioned <code>auto</code> size calculated. So the set rule <code> #set math.lr(size: 100%)</code> won’t do anything, as you’re telling it to set the size to be 100% of the automatic size!</p>\n<hr>\n<p>Regarding the incorrect looking superscript position when using <code>#set math.lr(size: 1em)</code>, this isn’t really a bug.  Like with the automatic delimiter matching, when you write the superscript <code>...^2</code> an implicit <code>math.attach</code> function call is created. The expression preceding the <code>^2</code> is wrapped into the <code>base</code> of the <code>attach</code> function call. e.g.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$lr((lr((...lr((lr((x - 2), size: #auto)^2 - 2), size: #auto)^2... - 2), size: #auto)^2), size: #auto)$\n</code></pre>\n<p>becomes</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$lr((attach(lr((...attach(lr((attach(lr((x - 2), size: #auto), tr: 2) - 2), size: #auto), tr: 2)... - 2), size: #auto), tr: 2)), size: #auto)$\n</code></pre>\n<p>The position of the scripts is calculated based on the total height of the <code>base</code> in the <code>attach</code> function call. So when using <code>#set math.lr(size: 1em)</code>, the height of the body in the attach calls isn’t changing, despite the brackets no longer scaling. Thus, the superscript positions don’t change and end up looking incorrect.</p>\n<p>I wouldn’t consider this a bug because the intended output is unclear. Consider the example below:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set math.lr(size: 1em)\n$ ((x - 2)^2 - 2)^2 $\n$ (-2 + (x - 2)^2)^2 $\n</code></pre>\n<p><img src=\"/uploads/default/original/1X/7b5116af270ae1a6f5a9cbba0484b74ad58e47b6.jpeg\" alt=\"Rendering of the above Typst code.\" data-base62-sha1=\"hAUsxOS3Aik263qvnGezfIgBxYi\" width=\"345\" height=\"237\"></p>\n<p>The outer <code>attach</code>’s <code>base</code> in each equation have the same height. But while in the first equation it would make sense for the superscript to be lower, in the second it isn’t so clear. How should the compiler infer the height relative to which the superscript positioning is done? At what distance from the superscript should it decide to no longer include that element’s height in the positioning? More on this at the end.</p>\n<p>As <a class=\"mention\" href=\"/u/ludwig\">@ludwig</a> said, the correct way to do this is to escape the brackets, ensuring the implicit <code>lr</code> isn’t created. By escaping the brackets, this also means the body of the <code>attach</code> function call is just the bracket itself. So you end up getting the correct superscript positions.</p>\n<hr>\n<p>The original behaviour desired, not wanting the delimiters to get larger, is part of <a href=\"https://github.com/typst/typst/issues/360\" class=\"inline-onebox-loading\" rel=\"noopener nofollow ugc\">https://github.com/typst/typst/issues/360</a> in my opinion. The crux of that issue is solving how the interactions between delimiters and the rest of math (attachments, etc.)  should work when we prefer the height of the delimiters over the height of the body within it (and <em>when</em> this should even happen!). Implementing this is quite tricky, as well as figuring out clear rules for the behaviour. It’s a tough problem to solve, but doable I think.</p>",
      "raw": "There's quite a bit happening \"behind the scenes\", and so I think explaining what's actually happening in the code might make things clearer.\n\n-- --\n\nWhen delimiters are automatically matched, what this really means is that an implicit `math.lr` function call is created, with the size set to `auto`. e.g.\n```typ\n$((...((x - 2)^2 - 2)^2... - 2)^2)$\n```\ngets turned into\n```typ\n$lr((lr((...lr((lr((x - 2), size: #auto)^2 - 2), size: #auto)^2... - 2), size: #auto)^2), size: #auto)$\n```\n(technically these aren't equivalent, but that doesn't matter here).\n\nNow the size of `auto` means that the compiler stretches the delimiters to the total height of the contents in the `lr` function call's `body`. When you use a relative size, like `100%`, this is relative to the aforementioned `auto` size calculated. So the set rule ` #set math.lr(size: 100%)` won't do anything, as you're telling it to set the size to be 100% of the automatic size!\n\n-- --\n\nRegarding the incorrect looking superscript position when using `#set math.lr(size: 1em)`, this isn't really a bug.  Like with the automatic delimiter matching, when you write the superscript `...^2` an implicit `math.attach` function call is created. The expression preceding the `^2` is wrapped into the `base` of the `attach` function call. e.g.\n```typ\n$lr((lr((...lr((lr((x - 2), size: #auto)^2 - 2), size: #auto)^2... - 2), size: #auto)^2), size: #auto)$\n```\nbecomes\n ```typ\n$lr((attach(lr((...attach(lr((attach(lr((x - 2), size: #auto), tr: 2) - 2), size: #auto), tr: 2)... - 2), size: #auto), tr: 2)), size: #auto)$\n```\nThe position of the scripts is calculated based on the total height of the `base` in the `attach` function call. So when using `#set math.lr(size: 1em)`, the height of the body in the attach calls isn't changing, despite the brackets no longer scaling. Thus, the superscript positions don't change and end up looking incorrect.\n\nI wouldn't consider this a bug because the intended output is unclear. Consider the example below:\n```typ\n#set math.lr(size: 1em)\n$ ((x - 2)^2 - 2)^2 $\n$ (-2 + (x - 2)^2)^2 $\n```\n![Rendering of the above Typst code.|690x474, 50%](upload://hAUsxOS3Aik263qvnGezfIgBxYi.jpeg)\n\nThe outer `attach`'s `base` in each equation have the same height. But while in the first equation it would make sense for the superscript to be lower, in the second it isn't so clear. How should the compiler infer the height relative to which the superscript positioning is done? At what distance from the superscript should it decide to no longer include that element's height in the positioning? More on this at the end.\n\nAs @ludwig said, the correct way to do this is to escape the brackets, ensuring the implicit `lr` isn't created. By escaping the brackets, this also means the body of the `attach` function call is just the bracket itself. So you end up getting the correct superscript positions.\n\n-- --\n\nThe original behaviour desired, not wanting the delimiters to get larger, is part of https://github.com/typst/typst/issues/360 in my opinion. The crux of that issue is solving how the interactions between delimiters and the rest of math (attachments, etc.)  should work when we prefer the height of the delimiters over the height of the body within it (and _when_ this should even happen!). Implementing this is quite tricky, as well as figuring out clear rules for the behaviour. It's a tough problem to solve, but doable I think.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 45,
      "score": 384.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 76
    },
    {
      "id": 3306,
      "post_number": 11,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-03T12:13:50.313Z",
      "updated_at": "2024-10-03T12:15:21.622Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"mkorje\" data-post=\"10\" data-topic=\"875\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/mkorje/48/726_2.png\" class=\"avatar\"> mkorje:</div>\n<blockquote>\n<p>The outer <code>attach</code>’s <code>base</code> in each equation have the same height. But while in the first equation it would make sense for the superscript to be lower, in the second it isn’t so clear.</p>\n</blockquote>\n</aside>\n<p>I think lining up all superscripts makes sense in both cases. Visually, superscript has to attach near the top of a parenthesis. Since all parentheses have the same height, all the superscripts next to them must be typeset at the same height.</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"mkorje\" data-post=\"10\" data-topic=\"875\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/mkorje/48/726_2.png\" class=\"avatar\"> mkorje:</div>\n<blockquote>\n<p>The original behaviour desired, not wanting the delimiters to get larger, is part of <a href=\"https://github.com/typst/typst/issues/360\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Smarter parentheses sizing · Issue #360 · typst/typst · GitHub</a> in my opinion.</p>\n</blockquote>\n</aside>\n<p>The way I see it, the linked issue is about changing the default parentheses scaling in certain scenarios. The question in the topic, however, is to be able to <em>disable</em> the scaling completely. But it’s true that they both share the same domain, i.e., something that has to do with parentheses scaling.</p>\n<p>We probably should wait for <a class=\"mention\" href=\"/u/laurmaedje\">@laurmaedje</a> to respond (here on in the issue).</p>",
      "raw": "[quote=\"mkorje, post:10, topic:875\"]\nThe outer `attach`’s `base` in each equation have the same height. But while in the first equation it would make sense for the superscript to be lower, in the second it isn’t so clear.\n[/quote]\n\nI think lining up all superscripts makes sense in both cases. Visually, superscript has to attach near the top of a parenthesis. Since all parentheses have the same height, all the superscripts next to them must be typeset at the same height.\n\n[quote=\"mkorje, post:10, topic:875\"]\nThe original behaviour desired, not wanting the delimiters to get larger, is part of https://github.com/typst/typst/issues/360 in my opinion.\n[/quote]\n\nThe way I see it, the linked issue is about changing the default parentheses scaling in certain scenarios. The question in the topic, however, is to be able to *disable* the scaling completely. But it's true that they both share the same domain, i.e., something that has to do with parentheses scaling.\n\nWe probably should wait for @laurmaedje to respond (here on in the issue).",
      "reply_to_post_number": 10,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 41,
      "score": 78.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3407,
      "post_number": 12,
      "username": "mkorje",
      "name": "Max",
      "created_at": "2024-10-04T13:57:42.672Z",
      "updated_at": "2024-10-04T13:57:42.672Z",
      "cooked": "<p>I took the Smarter parentheses sizing issue to mean adding an option for that behaviour, as an alternative to the current default of scaling to match the height. So in this regard, I think being able to disable scaling completely can also fall under the scope of that issue.</p>\n<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"11\" data-topic=\"875\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>I think lining up all superscripts makes sense in both cases. Visually, superscript has to attach near the top of a parenthesis. Since all parentheses have the same height, all the superscripts next to them must be typeset at the same height.</p>\n</blockquote>\n</aside>\n<p>I see what you mean, but <code>attach</code> is intended to place scripts with regards to its entire <code>base</code>. If you want it to only be placed with regard to the parenthesis, it alone should be the <code>base</code> then in the <code>attach</code> function call. I think changing it to behave as you describe would be fickle, and probably cause undesirable behaviour sometimes.</p>",
      "raw": "I took the Smarter parentheses sizing issue to mean adding an option for that behaviour, as an alternative to the current default of scaling to match the height. So in this regard, I think being able to disable scaling completely can also fall under the scope of that issue.\n\n[quote=\"Andrew, post:11, topic:875\"]\nI think lining up all superscripts makes sense in both cases. Visually, superscript has to attach near the top of a parenthesis. Since all parentheses have the same height, all the superscripts next to them must be typeset at the same height.\n[/quote]\n\nI see what you mean, but `attach` is intended to place scripts with regards to its entire `base`. If you want it to only be placed with regard to the parenthesis, it alone should be the `base` then in the `attach` function call. I think changing it to behave as you describe would be fickle, and probably cause undesirable behaviour sometimes.",
      "reply_to_post_number": 11,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 37,
      "score": 57.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 76
    }
  ],
  "scraped_at": "2025-06-10T09:57:31.964223"
}
{
  "topic_metadata": {
    "id": 876,
    "title": "How can i display rounded numbers with a specific number of digits in a table? Or, how to turn content into numbers?",
    "slug": "how-can-i-display-rounded-numbers-with-a-specific-number-of-digits-in-a-table-or-how-to-turn-content-into-numbers",
    "posts_count": 7,
    "created_at": "2024-10-02T15:22:43.732Z",
    "last_posted_at": "2024-10-03T19:55:31.474Z",
    "views": 596,
    "like_count": 9,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "tables",
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1183
  },
  "posts": [
    {
      "id": 3226,
      "post_number": 1,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-10-02T15:22:43.856Z",
      "updated_at": "2024-10-03T19:19:18.382Z",
      "cooked": "<p>I’m on the latest development version of typst</p>\n<pre><code class=\"lang-auto\">❯ typst --version\ntypst 0.11.0 (fcdccc9c)\n</code></pre>\n<p>I have a table with numbers generated by another program, and I’d like to get them all to display as float values with 4 decimal places. For example</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#table(columns:2,\n[Thing], [number],\n[a],     [0.01],\n[b],     [0],\n[c],     [-0.005],\n[d],     [-0.0000001])\n</code></pre>\n<p>I would like to display the same as</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#table(columns:2,\n[Thing], [number],\n[a],     [0.0100],\n[b],     [0.0000],\n[c],     [-0.0050],\n[d],     [-0.0000])\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/9f181bf8435047c709ef62c5e2f971c2ab193ae9.png\" alt=\"image\" data-base62-sha1=\"mHpzrphUQGzQvd1rRidOJQjD8kV\" width=\"258\" height=\"275\"></p>\n<p>At first, I thought I wanted the <code>#calc.round()</code> function and was trying to make some <code>#show</code> rules, but having a couple of problems. The first is that, even if I add the function manually, <code>#calc.round()</code> doesn’t do exactly what I want</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#table(columns:2,\n[Thing], [number],\n[a],     [#calc.round(0.01, digits:4)],\n[b],     [#calc.round(0, digits:4)],\n[c],     [#calc.round(-0.005, digits:4)],\n[d],     [#calc.round(-0.0000001, digits:4)])\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/770006bf8284729e83b2c7c7703aa9a18e3b8003.png\" alt=\"image\" data-base62-sha1=\"gYIShgm8XT0qTeifMK5c8SVm4Ar\" width=\"246\" height=\"285\"></p>\n<p>The second is that I can’t figure out how to get this via a show rule. The closest I got (I think) is something like</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show table.cell: it =&gt; {\n    if it.x == 1 and it.y != 0 {\n        calc.round(float(it))\n    }\n    else {\n        it\n    }\n}\n</code></pre>\n<p>or the same without the call to <code>float()</code>, and i get</p>\n<pre><code class=\"lang-auto\">error: expected float, boolean, integer, decimal, ratio, or string, found content\n     ┌─ manuscript/main.typ:1076:25\n     │\n1076 │         calc.round(float(it))\n     │                          ^^\n</code></pre>\n<p>My lack of understanding clearly goes deeper, because I also attempted to use the <a href=\"https://github.com/PgBiel/typst-oxifmt\" rel=\"noopener nofollow ugc\">Oxifmt package</a> and</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/oxifmt:0.2.1\": strfmt\n#table(columns:2,\n[Thing], [number],\n[a],     [#strfmt(\"{0:.4}\", 0.01)],\n[b],     [#strfmt(\"{0:.4}\", 0)],\n[c],     [#strfmt(\"{0:.4}\", -0.005)],\n[d],     [#strfmt(\"{0:.4}\", -0.000001)])\n</code></pre>\n<p>Does the right thing (other than the integer 0, but I can get around that), but when I tried it in a show rule it didn’t work.</p>",
      "raw": "I'm on the latest development version of typst\n\n```\n❯ typst --version\ntypst 0.11.0 (fcdccc9c)\n```\n\nI have a table with numbers generated by another program, and I'd like to get them all to display as float values with 4 decimal places. For example\n\n```typst\n#table(columns:2,\n[Thing], [number],\n[a],     [0.01],\n[b],     [0],\n[c],     [-0.005],\n[d],     [-0.0000001])\n```\n\nI would like to display the same as\n\n```typst\n#table(columns:2,\n[Thing], [number],\n[a],     [0.0100],\n[b],     [0.0000],\n[c],     [-0.0050],\n[d],     [-0.0000])\n```\n\n![image|258x275](upload://mHpzrphUQGzQvd1rRidOJQjD8kV.png)\n\nAt first, I thought I wanted the `#calc.round()` function and was trying to make some `#show` rules, but having a couple of problems. The first is that, even if I add the function manually, `#calc.round()` doesn't do exactly what I want\n\n```typst\n#table(columns:2,\n[Thing], [number],\n[a],     [#calc.round(0.01, digits:4)],\n[b],     [#calc.round(0, digits:4)],\n[c],     [#calc.round(-0.005, digits:4)],\n[d],     [#calc.round(-0.0000001, digits:4)])\n```\n\n![image|246x285](upload://gYIShgm8XT0qTeifMK5c8SVm4Ar.png)\n\nThe second is that I can't figure out how to get this via a show rule. The closest I got (I think) is something like \n\n```typst\n#show table.cell: it => {\n    if it.x == 1 and it.y != 0 {\n        calc.round(float(it))\n    }\n    else {\n        it\n    }\n}\n```\n\nor the same without the call to `float()`, and i get \n\n```\nerror: expected float, boolean, integer, decimal, ratio, or string, found content\n     ┌─ manuscript/main.typ:1076:25\n     │\n1076 │         calc.round(float(it))\n     │                          ^^\n```\n\nMy lack of understanding clearly goes deeper, because I also attempted to use the [Oxifmt package](https://github.com/PgBiel/typst-oxifmt) and\n\n```typst\n#import \"@preview/oxifmt:0.2.1\": strfmt\n#table(columns:2,\n[Thing], [number],\n[a],     [#strfmt(\"{0:.4}\", 0.01)],\n[b],     [#strfmt(\"{0:.4}\", 0)],\n[c],     [#strfmt(\"{0:.4}\", -0.005)],\n[d],     [#strfmt(\"{0:.4}\", -0.000001)])\n```\n\nDoes the right thing (other than the integer 0, but I can get around that), but when I tried it in a show rule it didn't work.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 58,
      "score": 2946.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3240,
      "post_number": 2,
      "username": "ludwig",
      "name": "",
      "created_at": "2024-10-02T17:07:42.709Z",
      "updated_at": "2024-10-02T17:07:42.709Z",
      "cooked": "<p>I advice to do it differently. It seems that you know exactly the structure of the tables you want to create. If you succeed to create the table-show-rule, you would have problems to create other tables. Furthermore, working with the content type can be challenging.</p>\n<p>I would create a function, which gets the data in the structure and <strong>type</strong> you want it to. I.e.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let num-table(..args) = {\n  let header = args.pos().slice(0, 2)\n  let body = args.pos().slice(2)\n  \n  table(\n    columns: 2,\n    table.header(..header),\n    ..body.chunks(2).map(((t, n)) =&gt; (\n      t, str(calc.round(n, digits: 4))\n    )).flatten()\n  )\n}\n\n#num-table(\n[Thing], [number],\n[a],     0.0100,\n[b],     0.0000,\n[c],     -0.0050,\n[d],     -0.0000)\n</code></pre>",
      "raw": "I advice to do it differently. It seems that you know exactly the structure of the tables you want to create. If you succeed to create the table-show-rule, you would have problems to create other tables. Furthermore, working with the content type can be challenging.\n\nI would create a function, which gets the data in the structure and **type** you want it to. I.e.\n\n```typ\n#let num-table(..args) = {\n  let header = args.pos().slice(0, 2)\n  let body = args.pos().slice(2)\n  \n  table(\n    columns: 2,\n    table.header(..header),\n    ..body.chunks(2).map(((t, n)) => (\n      t, str(calc.round(n, digits: 4))\n    )).flatten()\n  )\n}\n\n#num-table(\n[Thing], [number],\n[a],     0.0100,\n[b],     0.0000,\n[c],     -0.0050,\n[d],     -0.0000)\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 51,
      "score": 24.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 300
    },
    {
      "id": 3250,
      "post_number": 3,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-10-02T19:13:16.976Z",
      "updated_at": "2024-10-02T19:13:16.976Z",
      "cooked": "<p>Definitely could do this, but in my actual use-case, I have multiple tables with slightly different (and much more complicated) structure, eg</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#figure(\n    caption:[*Longitudinal FSEA, visit 2 stool -&gt; visit 3 VEP*],\n    table(\n        columns: 5,\n        stroke: 0.5pt,\n        table.hline(stroke: 2pt),\n    [Gene set], [Feature], [Component], [Enrichment], [Q value],\n    table.cell(fill: rgb(\"#89CDD8\"))[GABA synthesis],\n        [latency],\n            [N1], [-0.376215897], [0.107325],\n    table.cell(rowspan:3, fill: rgb(\"#89CDD8\"))[Glutamate synthesis],\n        table.cell(rowspan:2)[latency],\n            [N1], [-0.16762197], [0.160915663],\n            [P1], [0.297968912], [0.0159],\n        [amplitude],\n            [P1], [0.23424529], [0.03816],\n    table.cell(rowspan:2, fill: rgb(\"#89CDD8\"))[Glutamate degradation],\n        [latency],\n            [P1], [0.317418013], [0.14045],\n        [amplitude],\n            [N2], [0.282946442], [0.187555102],\n    table.cell(rowspan:2, fill: rgb(\"#82B574\"))[Tryptophan synthesis],\n        table.cell(rowspan:2)[amplitude],\n            [N1], [-0.155489037], [0.060834783],\n            [P1], [0.186539112], [0.029353846],\n//...\n))\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/01faad0d88a1299b1223398f241845d149c9211a.png\" data-download-href=\"https://forum.typst.app/uploads/default/01faad0d88a1299b1223398f241845d149c9211a\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/01faad0d88a1299b1223398f241845d149c9211a_2_690x287.png\" alt=\"image\" data-base62-sha1=\"hvxZEAMIEVJwC2ekM3XGqf3wFk\" width=\"690\" height=\"287\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/01faad0d88a1299b1223398f241845d149c9211a_2_690x287.png, https://forum.typst.app/uploads/default/optimized/1X/01faad0d88a1299b1223398f241845d149c9211a_2_1035x430.png 1.5x, https://forum.typst.app/uploads/default/original/1X/01faad0d88a1299b1223398f241845d149c9211a.png 2x\" data-dominant-color=\"C6D8D7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1071×446 90.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Definitely could do this, but in my actual use-case, I have multiple tables with slightly different (and much more complicated) structure, eg\n\n```typst\n#figure(\n    caption:[*Longitudinal FSEA, visit 2 stool -> visit 3 VEP*],\n    table(\n        columns: 5,\n        stroke: 0.5pt,\n        table.hline(stroke: 2pt),\n    [Gene set], [Feature], [Component], [Enrichment], [Q value],\n    table.cell(fill: rgb(\"#89CDD8\"))[GABA synthesis],\n        [latency],\n            [N1], [-0.376215897], [0.107325],\n    table.cell(rowspan:3, fill: rgb(\"#89CDD8\"))[Glutamate synthesis],\n        table.cell(rowspan:2)[latency],\n            [N1], [-0.16762197], [0.160915663],\n            [P1], [0.297968912], [0.0159],\n        [amplitude],\n            [P1], [0.23424529], [0.03816],\n    table.cell(rowspan:2, fill: rgb(\"#89CDD8\"))[Glutamate degradation],\n        [latency],\n            [P1], [0.317418013], [0.14045],\n        [amplitude],\n            [N2], [0.282946442], [0.187555102],\n    table.cell(rowspan:2, fill: rgb(\"#82B574\"))[Tryptophan synthesis],\n        table.cell(rowspan:2)[amplitude],\n            [N1], [-0.155489037], [0.060834783],\n            [P1], [0.186539112], [0.029353846],\n//...\n))\n```\n\n![image|690x287](upload://hvxZEAMIEVJwC2ekM3XGqf3wFk.png)",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 24.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3259,
      "post_number": 6,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-03T03:22:43.508Z",
      "updated_at": "2024-10-03T03:23:22.375Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"kescobo\" data-post=\"3\" data-topic=\"876\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/k/19798D/48.png\" class=\"avatar\"> kescobo:</div>\n<blockquote>\n<p>Definitely could do this, but in my actual use-case, I have multiple tables with slightly different (and much more complicated) structure</p>\n</blockquote>\n</aside>\n<p>Relating to this, and also tying into your title (“Or, how to turn content into numbers?”): don’t specify your data as content (i.e. with <code>[ ]</code>) directly, only convert it to content when it’s fully processed. <a class=\"mention\" href=\"/u/ludwig\">@ludwig</a>’s suggestion was in the right direction: you’d specify your data as a float (which can be rounded), use oxifmt’s <code>strfmt</code> function to round it to a certain amount of decimals, and only then you convert it to content (by just passing the final string to the table).<br>\nTheir suggested <code>num-table</code> function would only apply this to the second column, but it should be easy enough to generalize this to all floats (or even integers) you specify to the table, regardless of the table’s structure:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/oxifmt:0.2.1\": strfmt\n\n#let num-table(..args) = {\n  table(\n    ..args.pos().map(n =&gt; {\n        if type(n) == float or type(n) == int {\n          // float(n) to ensure integers like '0' are also formatted\n          strfmt(\"{:.4}\", float(n))\n        } else {\n          // Not a number, don't format\n          n\n        }\n      }),\n\n    ..args.named()\n  )\n}\n\n#num-table(\n  columns: 3,\n  table.header([Thing], [number], [other]),\n  [a],     0.0100,  0.5,\n  [b],     0.0000,  0.6,\n  [c],     -0.0050, 0.7,\n  [d],     -0.0000, 0\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/fa02c8af820e817fc0d4828098c7880ada157baa.png\" alt=\"output: every number is formatted\" data-base62-sha1=\"zFHkAMMAkFVjG34yyA4BQbsSrJE\" width=\"271\" height=\"197\"></p>",
      "raw": "[quote=\"kescobo, post:3, topic:876\"]\nDefinitely could do this, but in my actual use-case, I have multiple tables with slightly different (and much more complicated) structure\n[/quote]\n\nRelating to this, and also tying into your title (\"Or, how to turn content into numbers?\"): don't specify your data as content (i.e. with `[ ]`) directly, only convert it to content when it's fully processed. @ludwig's suggestion was in the right direction: you'd specify your data as a float (which can be rounded), use oxifmt's `strfmt` function to round it to a certain amount of decimals, and only then you convert it to content (by just passing the final string to the table).\nTheir suggested `num-table` function would only apply this to the second column, but it should be easy enough to generalize this to all floats (or even integers) you specify to the table, regardless of the table's structure:\n\n```typ\n#import \"@preview/oxifmt:0.2.1\": strfmt\n\n#let num-table(..args) = {\n  table(\n    ..args.pos().map(n => {\n        if type(n) == float or type(n) == int {\n          // float(n) to ensure integers like '0' are also formatted\n          strfmt(\"{:.4}\", float(n))\n        } else {\n          // Not a number, don't format\n          n\n        }\n      }),\n\n    ..args.named()\n  )\n}\n\n#num-table(\n  columns: 3,\n  table.header([Thing], [number], [other]),\n  [a],     0.0100,  0.5,\n  [b],     0.0000,  0.6,\n  [c],     -0.0050, 0.7,\n  [d],     -0.0000, 0\n)\n```\n![output: every number is formatted|271x197](upload://zFHkAMMAkFVjG34yyA4BQbsSrJE.png)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 44,
      "score": 188.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 3261,
      "post_number": 7,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2024-10-03T06:18:06.550Z",
      "updated_at": "2024-10-03T06:18:06.550Z",
      "cooked": "<p>Hi, this also sounds like something that <a href=\"https://github.com/Mc-Zen/zero\" rel=\"noopener nofollow ugc\">Zero</a> can do for you.</p>\n<h2><a name=\"p-3261-roundtruncate-and-pad-numbers-1\" class=\"anchor\" href=\"#p-3261-roundtruncate-and-pad-numbers-1\"></a>Round/truncate and pad numbers</h2>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/zero:0.1.0\": ztable\n\n#ztable(\n  columns:2,\n  format: (none, (digits: 4)),\n  [Thing], [number ],\n  [a],     [0.01],\n  [b],     [0],\n  [c],     [-0.005],\n  [d],     [-0.0000001]\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/d6b493dbd5b922b7cf428b20b4380c1c9fae8b00.png\" alt=\"image\" data-base62-sha1=\"uDn3Zkzug4iVMq7rOUqX7IHp6dq\" width=\"175\" height=\"175\"></p>\n<p>This will set the number of digits for all numbers in the second column. Note that no rounding but just truncation is performed here. You can additionally configure rounding by passing <code>(round: (mode: \"places\", precision: 4))</code> instead of <code>(digits: 4)</code>.</p>\n<p>Note that this also aligns all numbers at the decimal point, so the minus sign won’t become a problem.</p>\n<p><em>On a side note: I don’t know your precise use-case but if you add trailing 0’s to a value in a scientific context of measured quantities, it suggests that your measurement precision is higher (than it maybe was). You might want to be aware of this in that case.</em></p>\n<h2><a name=\"p-3261-just-align-the-numbers-2\" class=\"anchor\" href=\"#p-3261-just-align-the-numbers-2\"></a>Just align the numbers</h2>\n<p>If you just want the alignment, then</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#ztable(\n  columns: 2,\n  format: (none, auto),\n  [Thing], [number ],\n  [a],     [0.01],\n ...\n)\n</code></pre>\n<p>will do the trick.<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/919dbb3d300ae4fb95734b48e2a7aca90e050994.png\" alt=\"image\" data-base62-sha1=\"kMbaC2sOWFTg4rsTWcKxgoOTbuY\" width=\"210\" height=\"167\"><br>\nOr if you still want to round the numbers that are too long:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#ztable(\n  columns: 2,\n  format: (none, (round: (mode: \"places\", precision: 4, pad: false))),\n  [Thing], [number ],\n  [a],     [0.01],\n ...\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/918a58e0a2e0ffb976c56913f8da130c0f42c616.png\" alt=\"image\" data-base62-sha1=\"kLvDIL5OYCDa3C2gvGOYurmgRSK\" width=\"162\" height=\"167\"></p>",
      "raw": "Hi, this also sounds like something that [Zero](https://github.com/Mc-Zen/zero) can do for you. \n\n## Round/truncate and pad numbers\n\n```typ\n#import \"@preview/zero:0.1.0\": ztable\n\n#ztable(\n  columns:2,\n  format: (none, (digits: 4)),\n  [Thing], [number ],\n  [a],     [0.01],\n  [b],     [0],\n  [c],     [-0.005],\n  [d],     [-0.0000001]\n)\n```\n![image|234x234, 75%](upload://uDn3Zkzug4iVMq7rOUqX7IHp6dq.png)\n\nThis will set the number of digits for all numbers in the second column. Note that no rounding but just truncation is performed here. You can additionally configure rounding by passing `(round: (mode: \"places\", precision: 4))` instead of `(digits: 4)`. \n\nNote that this also aligns all numbers at the decimal point, so the minus sign won't become a problem. \n\n_On a side note: I don't know your precise use-case but if you add trailing 0's to a value in a scientific context of measured quantities, it suggests that your measurement precision is higher (than it maybe was). You might want to be aware of this in that case._\n\n## Just align the numbers\n\nIf you just want the alignment, then\n```typ\n#ztable(\n  columns: 2,\n  format: (none, auto),\n  [Thing], [number ],\n  [a],     [0.01],\n ...\n)\n```\nwill do the trick. \n![image|281x223, 75%](upload://kMbaC2sOWFTg4rsTWcKxgoOTbuY.png)\nOr if you still want to round the numbers that are too long:\n```typ\n#ztable(\n  columns: 2,\n  format: (none, (round: (mode: \"places\", precision: 4, pad: false))),\n  [Thing], [number ],\n  [a],     [0.01],\n ...\n)\n```\n![image|217x223, 75%](upload://kLvDIL5OYCDa3C2gvGOYurmgRSK.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 5,
      "reads": 36,
      "score": 141.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 3356,
      "post_number": 8,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-10-03T19:33:47.001Z",
      "updated_at": "2024-10-03T19:33:47.001Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Mc-Zen\" data-post=\"7\" data-topic=\"876\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/mc-zen/48/234_2.png\" class=\"avatar\"> Mc-Zen:</div>\n<blockquote>\n<p>something that Zero can do for you.</p>\n</blockquote>\n</aside>\n<p>Oh, this looks great, thanks! I decided to flag the previous post as the answer, because it answers the question I asked a bit more directly, but I definitely think I will use Zero in my actual document <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "[quote=\"Mc-Zen, post:7, topic:876\"]\nsomething that Zero can do for you.\n[/quote]\n\nOh, this looks great, thanks! I decided to flag the previous post as the answer, because it answers the question I asked a bit more directly, but I definitely think I will use Zero in my actual document :wink:",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 27,
      "score": 35.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3359,
      "post_number": 9,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2024-10-03T19:55:31.474Z",
      "updated_at": "2024-10-03T19:55:31.474Z",
      "cooked": "<p>Sure :)</p>\n<p>By the way, starting tomorrow (or the day after), I recommend using <code>zero:0.2.0</code> which features significant performance upgrades. I released the new version today and presumably it will be merged to the package manager in a day or so.</p>",
      "raw": "Sure :) \n\nBy the way, starting tomorrow (or the day after), I recommend using `zero:0.2.0` which features significant performance upgrades. I released the new version today and presumably it will be merged to the package manager in a day or so.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 27,
      "score": 35.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    }
  ],
  "scraped_at": "2025-06-10T09:57:31.214495"
}
{
  "topic_metadata": {
    "id": 880,
    "title": "Tables: It is possible to inherit from 'set table' horizontal align only?",
    "slug": "tables-it-is-possible-to-inherit-from-set-table-horizontal-align-only",
    "posts_count": 3,
    "created_at": "2024-10-02T17:28:19.981Z",
    "last_posted_at": "2024-10-03T07:48:38.621Z",
    "views": 75,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "tables"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 341
  },
  "posts": [
    {
      "id": 3243,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-02T17:28:20.101Z",
      "updated_at": "2024-10-02T18:41:42.327Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set table(align: horizon + start)\n\n// Works fine, but since `start` is already specified in `#set`,\n// I would prefer to not specify it once again.\n#figure(\n  table(\n    columns: 2,\n    table.header([Monday], [Tuesday]),\n    align: top + start,\n\n    [\n      - Lorem ipsum\n      - Lorem ipsum dolor\n    ],\n\n    [\n      - Lorem ipsum\n      - Lorem ipsum dolor\n      - Lorem ipsum\n      - Lorem ipsum dolor\n    ]\n  )\n)\n</code></pre>\n<p>At the top of the document, I have</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set table(align: horizon + start)\n</code></pre>\n<p>And then somewhere in the middle of the document I have a table for which I prefer to use <code>align: top + start</code>.</p>\n<p>Is it possible to make it inherit <code>start</code> from <code>set table</code> instead of specifying it once again? I tried</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">align: top + auto\n</code></pre>\n<p>but this produces an error.</p>",
      "raw": "```typ\n#set table(align: horizon + start)\n\n// Works fine, but since `start` is already specified in `#set`,\n// I would prefer to not specify it once again.\n#figure(\n  table(\n    columns: 2,\n    table.header([Monday], [Tuesday]),\n    align: top + start,\n\n    [\n      - Lorem ipsum\n      - Lorem ipsum dolor\n    ],\n\n    [\n      - Lorem ipsum\n      - Lorem ipsum dolor\n      - Lorem ipsum\n      - Lorem ipsum dolor\n    ]\n  )\n)\n```\n\nAt the top of the document, I have\n\n```typ\n#set table(align: horizon + start)\n```\n\nAnd then somewhere in the middle of the document I have a table for which I prefer to use `align: top + start`.\n\nIs it possible to make it inherit `start` from `set table` instead of specifying it once again? I tried\n\n```typ\nalign: top + auto\n```\n\nbut this produces an error.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 210.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 3245,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T17:40:35.271Z",
      "updated_at": "2024-10-02T17:42:25.059Z",
      "cooked": "<p>I’m fairly confident that for alignment you have to repeat both parts. It probably has to do with implicit defaults. Like when you write <code>top</code> it implicitly adds a default <code>center</code>. So, no, not possible. I might be wrong as I never faced this or haven’t faced enough to be 100% sure.</p>\n<p>To be honest, I think this applies to any type. <code>stroke</code> has the same story: you can’t just make it <code>2em + yellow</code> and then somewhere set it to <code>red</code> and expect it to also be <code>2em</code>. Although I haven’t tried this with <code>stroke</code> as <code>dictionary</code>, maybe if you set <code>(paint: blue, thickness: 4pt)</code>, then you can preserve <code>(thickness: 4pt)</code> by specifying just <code>(paint: red)</code>.</p>",
      "raw": "I'm fairly confident that for alignment you have to repeat both parts. It probably has to do with implicit defaults. Like when you write `top` it implicitly adds a default `center`. So, no, not possible. I might be wrong as I never faced this or haven't faced enough to be 100% sure.\n\nTo be honest, I think this applies to any type. `stroke` has the same story: you can't just make it `2em + yellow` and then somewhere set it to `red` and expect it to also be `2em`. Although I haven't tried this with `stroke` as `dictionary`, maybe if you set `(paint: blue, thickness: 4pt)`, then you can preserve `(thickness: 4pt)` by specifying just `(paint: red)`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 24.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3289,
      "post_number": 3,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-03T07:48:38.621Z",
      "updated_at": "2024-10-03T07:49:08.626Z",
      "cooked": "<p>What you can do is access the current <code>table.align</code> value to make the new value. For this you need a context:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set table(align: horizon + start)\n\n#figure(\n  context table(\n    columns: 2,\n    table.header([Monday], [Tuesday]),\n    align: top + table.align.x,\n    [\n      - Lorem ipsum\n      - Lorem ipsum dolor\n    ],\n\n    [\n      - Lorem ipsum\n      - Lorem ipsum dolor\n      - Lorem ipsum\n      - Lorem ipsum dolor\n    ]\n  )\n)\n</code></pre>\n<p><a class=\"mention\" href=\"/u/andrew\">@Andrew</a> for stroke I just checked and it turns out each value <em>is</em> inherited! (see documentation <a href=\"https://typst.app/docs/reference/visualize/stroke/#simple-strokes\">here</a>). For example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set line(length: 1cm, stroke: (paint: blue, thickness: 4pt))\n#line()\n\n#set line(stroke: red)\n#line()\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/7c60a477bec51da233ce6d071069696556049016.png\" alt=\"image\" data-base62-sha1=\"hKigeuuQgRLHd9Pr0itIrMK8aeG\" width=\"101\" height=\"61\"></p>",
      "raw": "What you can do is access the current `table.align` value to make the new value. For this you need a context:\n\n```typ\n#set table(align: horizon + start)\n\n#figure(\n  context table(\n    columns: 2,\n    table.header([Monday], [Tuesday]),\n    align: top + table.align.x,\n    [\n      - Lorem ipsum\n      - Lorem ipsum dolor\n    ],\n\n    [\n      - Lorem ipsum\n      - Lorem ipsum dolor\n      - Lorem ipsum\n      - Lorem ipsum dolor\n    ]\n  )\n)\n```\n\n@Andrew for stroke I just checked and it turns out each value _is_ inherited! (see documentation [here](https://typst.app/docs/reference/visualize/stroke/#simple-strokes)). For example:\n\n```typ\n#set line(length: 1cm, stroke: (paint: blue, thickness: 4pt))\n#line()\n\n#set line(stroke: red)\n#line()\n```\n\n![image|101x61](upload://hKigeuuQgRLHd9Pr0itIrMK8aeG.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 24.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:57:30.387230"
}
{
  "topic_metadata": {
    "id": 890,
    "title": "How to show all math as block equations by default?",
    "slug": "how-to-show-all-math-as-block-equations-by-default",
    "posts_count": 4,
    "created_at": "2024-10-03T08:49:01.569Z",
    "last_posted_at": "2024-10-03T12:14:11.360Z",
    "views": 230,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "sijo",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 290
  },
  "posts": [
    {
      "id": 3300,
      "post_number": 1,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-03T08:49:01.720Z",
      "updated_at": "2024-10-03T08:49:01.720Z",
      "cooked": "<p>Can I setup things to have all <code>$...$</code> math show as block equations?</p>\n<p>Use case: for CeTZ figures I need all math to have correct bounding boxes, otherwise things like <code>fill: white</code> don’t work as expected. But having to write always things like <code>$ P $</code> instead of <code>$P$</code> is annoying and easy to forget. So I’d like to change the default in particular files or scopes, to have <code>$...$</code> produce block equations.</p>\n<p>I tried <code>#set math.equation(block: true)</code> but the spacing in <code>$...$</code> takes precedence.</p>\n<p>Here’s an example of what I want to fix:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.2.2\"\n\n#let opaque(it) = block(fill: white, inset: 1pt, it)\n\n#cetz.canvas({\n  import cetz.draw: *\n  line((-1, 1), (1, -1))\n  content((-0.4, 0.4), opaque($|x|$))\n  content((0.4, -0.4), opaque($ |x| $))\n})\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/14429461379a3eb9c73c0b280560c6f29472b76e.png\" alt=\"image\" data-base62-sha1=\"2Tec7JVQgFfhyM7ijYsX0PNBKfc\" width=\"134\" height=\"123\"></p>\n<p>I’d like the <code>$|x|$</code> (top-left) to render the same as <code>$ |x| $</code>.</p>",
      "raw": "Can I setup things to have all `$...$` math show as block equations?\n\nUse case: for CeTZ figures I need all math to have correct bounding boxes, otherwise things like `fill: white` don't work as expected. But having to write always things like `$ P $` instead of `$P$` is annoying and easy to forget. So I'd like to change the default in particular files or scopes, to have `$...$` produce block equations.\n\nI tried `#set math.equation(block: true)` but the spacing in `$...$` takes precedence.\n\nHere's an example of what I want to fix:\n\n```typ\n#import \"@preview/cetz:0.2.2\"\n\n#let opaque(it) = block(fill: white, inset: 1pt, it)\n\n#cetz.canvas({\n  import cetz.draw: *\n  line((-1, 1), (1, -1))\n  content((-0.4, 0.4), opaque($|x|$))\n  content((0.4, -0.4), opaque($ |x| $))\n})\n```\n\n![image|134x123](upload://2Tec7JVQgFfhyM7ijYsX0PNBKfc.png)\n\nI'd like the `$|x|$` (top-left) to render the same as `$ |x| $`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 803.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3302,
      "post_number": 2,
      "username": "sitandr",
      "name": "sitandr",
      "created_at": "2024-10-03T10:00:36.267Z",
      "updated_at": "2024-10-03T10:00:36.267Z",
      "cooked": "<p>I know only one solution for that, but it is quite hacky. See this <a href=\"https://sitandr.github.io/typst-examples-book/book/typstonomicon/math_display.html\" rel=\"noopener nofollow ugc\">chapter of Typstonomicon</a>.</p>\n<p>Note that would just make all math <code>display size</code> math, not center aligned block, but that seems okay for your usecase. Though it’s not hard to add alignment or anything to this snippet.</p>",
      "raw": "I know only one solution for that, but it is quite hacky. See this [chapter of Typstonomicon](https://sitandr.github.io/typst-examples-book/book/typstonomicon/math_display.html).\n\nNote that would just make all math `display size` math, not center aligned block, but that seems okay for your usecase. Though it's not hard to add alignment or anything to this snippet.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 22.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 19
    },
    {
      "id": 3304,
      "post_number": 3,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-03T11:47:32.392Z",
      "updated_at": "2024-10-03T11:48:21.530Z",
      "cooked": "<p>Thanks! Using display size is not enough: the equation is still inline so it still has the wrong bounding box. But your link gave me the idea for a solution that seems to work:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation.where(block: false): math.equation.with(block: true)\n</code></pre>",
      "raw": "Thanks! Using display size is not enough: the equation is still inline so it still has the wrong bounding box. But your link gave me the idea for a solution that seems to work:\n\n```typ\n#show math.equation.where(block: false): math.equation.with(block: true)\n```",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 36.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3307,
      "post_number": 4,
      "username": "sitandr",
      "name": "sitandr",
      "created_at": "2024-10-03T12:14:11.360Z",
      "updated_at": "2024-10-03T12:14:11.360Z",
      "cooked": "<p>That’s cool, I was sure it wouldn’t work.</p>\n<p>It seems it wasn’t working earlier, but is working after the update that fixed show rules. Good to know.</p>",
      "raw": "That's cool, I was sure it wouldn't work.\n\nIt seems it wasn't working earlier, but is working after the update that fixed show rules. Good to know.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 21.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 19
    }
  ],
  "scraped_at": "2025-06-10T09:57:29.635132"
}
{
  "topic_metadata": {
    "id": 891,
    "title": "How can I change the spacing between lines of a math.equation in \"block\" mode?",
    "slug": "how-can-i-change-the-spacing-between-lines-of-a-math-equation-in-block-mode",
    "posts_count": 4,
    "created_at": "2024-10-03T12:09:02.633Z",
    "last_posted_at": "2024-10-28T19:14:40.840Z",
    "views": 436,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "layout",
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 252
  },
  "posts": [
    {
      "id": 3305,
      "post_number": 1,
      "username": "Bryn",
      "name": "Bryn Humberstone",
      "created_at": "2024-10-03T12:09:02.780Z",
      "updated_at": "2024-10-10T14:37:18.818Z",
      "cooked": "<p>I would like to change the spacing above and below the lines in a <code>math</code> equation, but I do not know how to do it.</p>\n<p>I have three other rules set which reflect how I want my spacing to look but I cannot work out a way to get the <code>math.equation</code> to have a different spacing.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set par(leading: 1.45em)\n#show raw: set par(leading: 1.7em)\n#show par: set block(spacing: 1.5em)\n#show math.equation.where(block: true): // not sure what goes here\n</code></pre>",
      "raw": "I would like to change the spacing above and below the lines in a `math` equation, but I do not know how to do it. \n\nI have three other rules set which reflect how I want my spacing to look but I cannot work out a way to get the `math.equation` to have a different spacing.\n\n```typ \n#set par(leading: 1.45em)\n#show raw: set par(leading: 1.7em)\n#show par: set block(spacing: 1.5em)\n#show math.equation.where(block: true): // not sure what goes here\n ```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 2090.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 389
    },
    {
      "id": 3308,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-03T12:52:57.406Z",
      "updated_at": "2024-10-03T12:52:57.406Z",
      "cooked": "<p>Similar to paragraphs:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation.where(block: true): set block(spacing: 1.5em)\n</code></pre>\n<p>My understanding of block spacing is incomplete, but I think that the spacing between two blocks is the maximum of the upper block’s <code>below</code> and the lower block’s <code>above</code>. So if you already have a <code>par</code> show rule and then add an <code>equation</code> rule, you may not see the difference as the spacing was already increased.</p>",
      "raw": "Similar to paragraphs:\n\n```typ\n#show math.equation.where(block: true): set block(spacing: 1.5em)\n```\n\nMy understanding of block spacing is incomplete, but I think that the spacing between two blocks is the maximum of the upper block's `below` and the lower block's `above`. So if you already have a `par` show rule and then add an `equation` rule, you may not see the difference as the spacing was already increased.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 53,
      "score": 30.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 4778,
      "post_number": 3,
      "username": "Bryn",
      "name": "Bryn Humberstone",
      "created_at": "2024-10-28T19:12:39.476Z",
      "updated_at": "2024-10-28T19:13:40.545Z",
      "cooked": "<p>I think that this solution just sets the spacing above and below an equation. I was unclear, but I meant the actual spacing between lines within an equation that has line breaks.</p>\n<p>So, if I have the two-line equation below, I would like to customise the spacing between the first line (x = 4 + 3) and the second line (= 7)</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// mystery rule goes here: #show ?: ?\n$\nx &amp;= 4 + 3 \\\n  &amp;= 7\n$\n</code></pre>",
      "raw": "I think that this solution just sets the spacing above and below an equation. I was unclear, but I meant the actual spacing between lines within an equation that has line breaks.\n\nSo, if I have the two-line equation below, I would like to customise the spacing between the first line (x = 4 + 3) and the second line (= 7)\n\n```typ\n// mystery rule goes here: #show ?: ?\n$\nx &= 4 + 3 \\\n  &= 7\n$\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 41.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 389
    },
    {
      "id": 4779,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-28T19:14:40.840Z",
      "updated_at": "2024-10-28T19:14:40.840Z",
      "cooked": "<p>Ah! that would be:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation.where(block: true): set par(leading: 1.5em)\n$\nx &amp;= 4 + 3 \\\n  &amp;= 7\n$\n</code></pre>\n<p><img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji only-emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Ah! that would be:\n```typ\n#show math.equation.where(block: true): set par(leading: 1.5em)\n$\nx &= 4 + 3 \\\n  &= 7\n$\n```\n\n:slight_smile:",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 86.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:57:28.886849"
}
{
  "topic_metadata": {
    "id": 904,
    "title": "How to create a pagebreak before every depth 1 heading except for the outline?",
    "slug": "how-to-create-a-pagebreak-before-every-depth-1-heading-except-for-the-outline",
    "posts_count": 5,
    "created_at": "2024-10-03T16:24:46.790Z",
    "last_posted_at": "2024-10-04T15:38:32.849Z",
    "views": 631,
    "like_count": 7,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout",
      "page"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 274
  },
  "posts": [
    {
      "id": 3344,
      "post_number": 1,
      "username": "skittles1412",
      "name": "skittles1412",
      "created_at": "2024-10-03T16:24:46.893Z",
      "updated_at": "2024-10-10T14:41:07.456Z",
      "cooked": "<p>Say I have something like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// some show rule here\nstuff here\n#outline()\nmore stuff\n= My first heading\n</code></pre>\n<p>What show rule can help me add a <code>#pagebreak(weak: true)</code> before things like “My first heading” but not the outline?</p>\n<p>Currently I have something like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(depth: 1): body =&gt; {    \n  pagebreak(weak: true)\n  body\n}\n</code></pre>\n<p>but this also seems to put a pagebreak before the outline.</p>",
      "raw": "Say I have something like\n```typ\n// some show rule here\nstuff here\n#outline()\nmore stuff\n= My first heading\n```\n\nWhat show rule can help me add a `#pagebreak(weak: true)` before things like \"My first heading\" but not the outline?\n\nCurrently I have something like\n```typ\n#show heading.where(depth: 1): body => {    \n  pagebreak(weak: true)\n  body\n}\n```\nbut this also seems to put a pagebreak before the outline.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 57,
      "score": 2976.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 528
    },
    {
      "id": 3346,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-03T18:32:20.500Z",
      "updated_at": "2024-10-03T18:32:20.500Z",
      "cooked": "<p>Would it be an option to just put the show rule after the outline?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">stuff here\n#outline()\nmore stuff\n\n#show heading.where(depth: 1): ...\n\n= My first heading\n</code></pre>\n<p>If this is not possible (maybe because you’re editing a template), you could use a state to store whether you are currently in the outline, and use that to determine whether you want to insert a page break:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline: it =&gt; {\n  state(\"in-outline\").update(true)\n  it\n  state(\"in-outline\").update(false)\n}\n\n#show heading.where(depth: 1): it =&gt; {\n  if not state(\"in-outline\", false).get() {\n    pagebreak(weak: true)\n  }\n  it\n}\n</code></pre>",
      "raw": "Would it be an option to just put the show rule after the outline?\n```typ\nstuff here\n#outline()\nmore stuff\n\n#show heading.where(depth: 1): ...\n\n= My first heading\n```\n\nIf this is not possible (maybe because you're editing a template), you could use a state to store whether you are currently in the outline, and use that to determine whether you want to insert a page break:\n```typ\n#show outline: it => {\n  state(\"in-outline\").update(true)\n  it\n  state(\"in-outline\").update(false)\n}\n\n#show heading.where(depth: 1): it => {\n  if not state(\"in-outline\", false).get() {\n    pagebreak(weak: true)\n  }\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 55,
      "score": 66.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 3347,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-03T19:16:44.606Z",
      "updated_at": "2024-10-04T05:17:14.634Z",
      "cooked": "<p>Although <a class=\"mention\" href=\"/u/eric\">@Eric</a>’s answer is more targeted, maybe the following works for you:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(depth: 1, outlined: true): ...\n</code></pre>\n<p>Since the outline itself isn’t outlined, it will not be affected. Of course, this is only an option if a) you have no other non-outlined level 1 headings or b) this is actually closer to what you want. If it’s only a), I would probably still prefer Eric’s solution.</p>",
      "raw": "Although @Eric's answer is more targeted, maybe the following works for you:\n```typ\n#show heading.where(depth: 1, outlined: true): ...\n```\nSince the outline itself isn't outlined, it will not be affected. Of course, this is only an option if a) you have no other non-outlined level 1 headings or b) this is actually closer to what you want. If it's only a), I would probably still prefer Eric's solution.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 51,
      "score": 50.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3401,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-04T08:31:26.489Z",
      "updated_at": "2024-10-04T08:31:26.489Z",
      "cooked": "<p>This suggests the following slightly hacky solution <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline: set heading(supplement: [Outline])\n#show heading.where(depth: 1): it =&gt; {\n  if it.supplement != [Outline] {\n    pagebreak(weak: true)\n  }\n  it\n}\n</code></pre>",
      "raw": "This suggests the following slightly hacky solution :slight_smile: \n```typ\n#show outline: set heading(supplement: [Outline])\n#show heading.where(depth: 1): it => {\n  if it.supplement != [Outline] {\n    pagebreak(weak: true)\n  }\n  it\n}\n```",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 40,
      "score": 43.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3411,
      "post_number": 5,
      "username": "skittles1412",
      "name": "skittles1412",
      "created_at": "2024-10-04T15:38:32.849Z",
      "updated_at": "2024-10-04T15:38:32.849Z",
      "cooked": "<p>Thank you all for the help!</p>",
      "raw": "Thank you all for the help!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 32.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 528
    }
  ],
  "scraped_at": "2025-06-10T09:57:28.184070"
}
