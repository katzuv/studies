{
  "topic_metadata": {
    "id": 1960,
    "title": "How can I add the top level heading title to the header of each page?",
    "slug": "how-can-i-add-the-top-level-heading-title-to-the-header-of-each-page",
    "posts_count": 6,
    "created_at": "2024-12-03T01:25:13.691Z",
    "last_posted_at": "2025-04-10T15:26:02.410Z",
    "views": 158,
    "like_count": 4,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Mr_study",
    "tags": [
      "styling",
      "header-footer"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 174
  },
  "posts": [
    {
      "id": 6268,
      "post_number": 1,
      "username": "Mr_study",
      "name": "Mr study",
      "created_at": "2024-12-03T01:25:13.850Z",
      "updated_at": "2025-04-18T15:26:05.956Z",
      "cooked": "<p>How can I add the top level heading title to the header of each page?</p>\n<p>Example image:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/246557c7a7a5c93ea53c6478f72743d3e01b6e4b.png\" data-download-href=\"https://forum.typst.app/uploads/default/246557c7a7a5c93ea53c6478f72743d3e01b6e4b\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/246557c7a7a5c93ea53c6478f72743d3e01b6e4b_2_690x127.png\" alt=\"image\" data-base62-sha1=\"5bYjx9HACHMV8IxaKe7GJHo1F9x\" width=\"690\" height=\"127\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/246557c7a7a5c93ea53c6478f72743d3e01b6e4b_2_690x127.png, https://forum.typst.app/uploads/default/original/2X/2/246557c7a7a5c93ea53c6478f72743d3e01b6e4b.png 1.5x, https://forum.typst.app/uploads/default/original/2X/2/246557c7a7a5c93ea53c6478f72743d3e01b6e4b.png 2x\" data-dominant-color=\"F8F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">988×183 21 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "How can I add the top level heading title to the header of each page?\n\nExample image:\n![image|690x127](upload://5bYjx9HACHMV8IxaKe7GJHo1F9x.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 431.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 789
    },
    {
      "id": 6269,
      "post_number": 2,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-12-03T04:03:04.035Z",
      "updated_at": "2024-12-03T04:03:04.035Z",
      "cooked": "<p>Check this package: <a href=\"https://typst.app/universe/package/hydra\">hydra</a></p>",
      "raw": "Check this package: [hydra](https://typst.app/universe/package/hydra)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 26.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 6270,
      "post_number": 3,
      "username": "Mr_study",
      "name": "Mr study",
      "created_at": "2024-12-03T05:57:19.609Z",
      "updated_at": "2024-12-03T05:57:19.609Z",
      "cooked": "<p>Thank you. With your suggestion i got it to work with the following hydra command:</p>\n<pre><code class=\"lang-auto\">#set page(paper: \"a4\", margin: (inside: 3cm, outside:   3cm, y: 1.75cm), header: context {\n  if counter(page).get().first() &gt; 3{  align(left, emph(hydra(1)))\n  line(length: 100%)\n  }\n})\n</code></pre>",
      "raw": "Thank you. With your suggestion i got it to work with the following hydra command:\n\n``` \n#set page(paper: \"a4\", margin: (inside: 3cm, outside:   3cm, y: 1.75cm), header: context {\n  if counter(page).get().first() > 3{  align(left, emph(hydra(1)))\n  line(length: 100%)\n  }\n})\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 28,
      "score": 50.6,
      "accepted_answer": true,
      "trust_level": 0,
      "user_id": 789
    },
    {
      "id": 10882,
      "post_number": 4,
      "username": "PhiloSoPh",
      "name": "S.",
      "created_at": "2025-04-10T13:39:50.220Z",
      "updated_at": "2025-04-10T13:39:50.220Z",
      "cooked": "<p>using this, the displayed heading in the header is always one heading behind… Any idea on how to fix that?<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/8/87efa485e4f9be25b51b482161d16673bc493fd9.png\" data-download-href=\"https://forum.typst.app/uploads/default/87efa485e4f9be25b51b482161d16673bc493fd9\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/8/87efa485e4f9be25b51b482161d16673bc493fd9_2_690x246.png\" alt=\"image\" data-base62-sha1=\"joxTdj9uoXZ7VIg5vPotRBhsdOV\" width=\"690\" height=\"246\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/8/87efa485e4f9be25b51b482161d16673bc493fd9_2_690x246.png, https://forum.typst.app/uploads/default/original/2X/8/87efa485e4f9be25b51b482161d16673bc493fd9.png 1.5x, https://forum.typst.app/uploads/default/original/2X/8/87efa485e4f9be25b51b482161d16673bc493fd9.png 2x\" data-dominant-color=\"F8F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">728×260 29.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "using this, the displayed heading in the header is always one heading behind.. Any idea on how to fix that?\n![image|690x246](upload://joxTdj9uoXZ7VIg5vPotRBhsdOV.png)",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 8.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1439
    },
    {
      "id": 10885,
      "post_number": 5,
      "username": "flokl",
      "name": "",
      "created_at": "2025-04-10T14:40:20.807Z",
      "updated_at": "2025-04-10T14:40:37.457Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/philosoph\">@PhiloSoPh</a> , it seems like you have something between the page start and the heading. Maybe <code>v()</code> for the spacing above the heading? Not sure how your show rule for headings looks like, but to make hydra work you either use <code>#show heading: pad.with(top: 3cm)</code> or do something like <code>#show heading: it =&gt; block(v(3cm) + it)</code> which is mentioned in the hydra manual.</p>",
      "raw": "@PhiloSoPh , it seems like you have something between the page start and the heading. Maybe `v()` for the spacing above the heading? Not sure how your show rule for headings looks like, but to make hydra work you either use `#show heading: pad.with(top: 3cm)` or do something like `#show heading: it => block(v(3cm) + it)` which is mentioned in the hydra manual.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 17,
      "score": 28.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 10890,
      "post_number": 6,
      "username": "PhiloSoPh",
      "name": "S.",
      "created_at": "2025-04-10T15:26:02.410Z",
      "updated_at": "2025-04-10T15:26:02.410Z",
      "cooked": "<p>Thank you! That was the case, and now it works :)</p>",
      "raw": "Thank you! That was the case, and now it works :)",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1439
    }
  ],
  "scraped_at": "2025-06-10T09:54:09.400857"
}
{
  "topic_metadata": {
    "id": 1963,
    "title": "How can I set the numbering of equation starting from a number larger than 1?",
    "slug": "how-can-i-set-the-numbering-of-equation-starting-from-a-number-larger-than-1",
    "posts_count": 4,
    "created_at": "2024-12-03T10:01:54.773Z",
    "last_posted_at": "2024-12-05T12:07:53.740Z",
    "views": 103,
    "like_count": 0,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Marco",
    "tags": [
      "math",
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 134
  },
  "posts": [
    {
      "id": 6276,
      "post_number": 1,
      "username": "shhuang",
      "name": "",
      "created_at": "2024-12-03T10:01:54.902Z",
      "updated_at": "2024-12-07T18:08:54.355Z",
      "cooked": "<p>For example, I want the numbering of equations to start from “(2)”. Is it possible?</p>",
      "raw": "For example, I want the numbering of equations to start from \"(2)\". Is it possible?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 205.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 556
    },
    {
      "id": 6278,
      "post_number": 2,
      "username": "Marco",
      "name": "Marco",
      "created_at": "2024-12-03T12:04:24.191Z",
      "updated_at": "2024-12-05T12:05:46.583Z",
      "cooked": "<p>Yes you can.</p>\n<p>You can set specific counters, in this case equation, using the <a href=\"https://typst.app/docs/reference/introspection/counter/\">counter function</a>.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">// enable numbering\n#set math.equation(numbering: \"(1)\")\n\n// set the counter for equations\n// 1 indicates there is already 1 equation so the next use of an equation will selfupdate to 2.\n#counter(math.equation).update(1)\n\nAs Einstein wrote:\n\n$ E= M C^2 $\n</code></pre>\n<p>Edited because of the reply by <a class=\"mention\" href=\"/u/jbirnick\">@jbirnick</a></p>",
      "raw": "Yes you can.\n\nYou can set specific counters, in this case equation, using the [counter function](https://typst.app/docs/reference/introspection/counter/). \n\n```typst\n// enable numbering\n#set math.equation(numbering: \"(1)\")\n\n// set the counter for equations\n// 1 indicates there is already 1 equation so the next use of an equation will selfupdate to 2.\n#counter(math.equation).update(1)\n\nAs Einstein wrote:\n\n$ E= M C^2 $\n```\n\nEdited because of the reply by @jbirnick",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 20.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 720
    },
    {
      "id": 6339,
      "post_number": 3,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-12-04T17:30:41.942Z",
      "updated_at": "2024-12-04T17:30:49.766Z",
      "cooked": "<p>You don’t need the <code>context</code> in front of the counter update.</p>",
      "raw": "You don't need the `context` in front of the counter update.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 6359,
      "post_number": 4,
      "username": "Marco",
      "name": "Marco",
      "created_at": "2024-12-05T12:07:53.740Z",
      "updated_at": "2024-12-05T12:07:53.740Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/jbirnick\">@jbirnick</a>,</p>\n<p>you are right that <code>#counter(math.equation).update(1)</code> does not need context.</p>\n<p>I was confused because the <code>#context counter(math.equation).get()</code> does need context.</p>\n<p>I’ve edited my original anwser.</p>",
      "raw": "Hi @jbirnick,\n\nyou are right that `#counter(math.equation).update(1)` does not need context.\n\nI was confused because the `#context counter(math.equation).get()` does need context.\n\nI've edited my original anwser.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 720
    }
  ],
  "scraped_at": "2025-06-10T09:54:08.661095"
}
{
  "topic_metadata": {
    "id": 1965,
    "title": "Is it possible to change a colour of a template?",
    "slug": "is-it-possible-to-change-a-colour-of-a-template",
    "posts_count": 3,
    "created_at": "2024-12-03T13:04:48.739Z",
    "last_posted_at": "2024-12-05T02:47:05.931Z",
    "views": 105,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "NNS",
    "tags": [
      "styling",
      "templates"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 89
  },
  "posts": [
    {
      "id": 6281,
      "post_number": 1,
      "username": "Rodrigo",
      "name": "Rodrigo",
      "created_at": "2024-12-03T13:04:48.854Z",
      "updated_at": "2024-12-07T18:11:40.241Z",
      "cooked": "<p>I am in love with this template: <a href=\"https://typst.app/universe/package/fireside\" class=\"inline-onebox\">fireside – Typst Universe</a></p>\n<p>But when it comes the time to print the documents, it will probably get very expensive.</p>\n<p><strong>Any way to quickly change every background to white</strong>, download to pdf, and put the colour back to the original?</p>",
      "raw": "I am in love with this template: https://typst.app/universe/package/fireside\n\nBut when it comes the time to print the documents, it will probably get very expensive. \n\n\n**Any way to quickly change every background to white**, download to pdf, and put the colour back to the original?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 201.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 884
    },
    {
      "id": 6288,
      "post_number": 2,
      "username": "NNS",
      "name": "Nikolai Neff-Sarnow",
      "created_at": "2024-12-03T17:13:43.816Z",
      "updated_at": "2024-12-03T17:13:43.816Z",
      "cooked": "<p>Use <code>background: white</code> as additional parameter</p>",
      "raw": "Use `background: white` as additional parameter",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 5.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 754
    },
    {
      "id": 6349,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-12-05T02:47:05.931Z",
      "updated_at": "2024-12-05T02:47:05.931Z",
      "cooked": "<p>Welcome to the forum <a class=\"mention\" href=\"/u/rodrigo\">@Rodrigo</a>! I noticed you accidentally posted your question in the <a class=\"hashtag-cooked\" href=\"/c/general/4\" data-type=\"category\" data-slug=\"general\" data-id=\"4\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>General</span></a> category, so I’ve moved it to the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category. Please keep this in mind in the future! <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Welcome to the forum @Rodrigo! I noticed you accidentally posted your question in the #general category, so I've moved it to the #questions category. Please keep this in mind in the future! :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:54:07.941259"
}
{
  "topic_metadata": {
    "id": 1968,
    "title": "How to check if content contains multiple paragraphs?",
    "slug": "how-to-check-if-content-contains-multiple-paragraphs",
    "posts_count": 4,
    "created_at": "2024-12-03T14:24:34.325Z",
    "last_posted_at": "2024-12-04T15:01:13.738Z",
    "views": 123,
    "like_count": 4,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "miles-1",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 254
  },
  "posts": [
    {
      "id": 6285,
      "post_number": 1,
      "username": "Florent_Becker",
      "name": "Florent Becker",
      "created_at": "2024-12-03T14:24:34.456Z",
      "updated_at": "2024-12-07T18:13:07.187Z",
      "cooked": "<p>Hi, I have a function <code>answer(it)</code> which takes some content as its parameter. It should typeset its content with the leading text “Answer”. I’d like to be able to check whether <code>it</code> contains one or several paragraphs, so as to put the header on its own line if there are several paragraphs, and within the paragraph if there is only one. Essentially, I’d like to do this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">if is-single-paragraph(it) {[ *Answer:* it]\n} else {\n[*Answer*\n\n it]\n}\n</code></pre>\n<p>How can I write <code>is-single-paragraph</code>? Alternatively, is it possible to check whether the first variants fits on one physical line and replace it with the second otherwise?</p>",
      "raw": "Hi, I have a function `answer(it)` which takes some content as its parameter. It should typeset its content with the leading text \"Answer\". I’d like to be able to check whether `it` contains one or several paragraphs, so as to put the header on its own line if there are several paragraphs, and within the paragraph if there is only one. Essentially, I’d like to do this:\n```typst\nif is-single-paragraph(it) {[ *Answer:* it]\n} else {\n[*Answer*\n\n it]\n}\n```\n\nHow can I write `is-single-paragraph`? Alternatively, is it possible to check whether the first variants fits on one physical line and replace it with the second otherwise?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 377.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 885
    },
    {
      "id": 6291,
      "post_number": 2,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-12-03T22:04:20.422Z",
      "updated_at": "2024-12-04T15:01:28.116Z",
      "cooked": "<p>Here’s a function that can check this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let is-multiple-paragraph(txt) = {\n  return \"children\" in txt.fields() and parbreak() in txt.children\n}\n</code></pre>\n<p>If you’re interested in how I figured this out, I first used <code>repr[*Answer* it]</code> and another one with a paragraph break to see what was there. Then I used <code>[*Answer* it].fields()</code> to see what attributes could be accessed. I saw that the <code>children</code> attribute included <code>parbreak()</code> if there was a paragraph break.</p>\n<p>Also, quick tip, you don’t need curly braces <code>{}</code> around markdown brackets <code>[]</code> in an <code>if</code> statement if that’s what you’re returning <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Here's a function that can check this:\n\n```typst\n#let is-multiple-paragraph(txt) = {\n  return \"children\" in txt.fields() and parbreak() in txt.children\n}\n```\n\nIf you're interested in how I figured this out, I first used `repr[*Answer* it]` and another one with a paragraph break to see what was there. Then I used `[*Answer* it].fields()` to see what attributes could be accessed. I saw that the `children` attribute included `parbreak()` if there was a paragraph break.\n\nAlso, quick tip, you don't need curly braces `{}` around markdown brackets `[]` in an `if` statement if that's what you're returning :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 35,
      "score": 57.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 177
    },
    {
      "id": 6317,
      "post_number": 3,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-12-04T07:52:07.266Z",
      "updated_at": "2024-12-04T07:52:07.266Z",
      "cooked": "<p>The function works great in my quick testing, but the name doesn’t match the logic of it.  It should either be renamed to something like <code>is-multiple-paragraphs()</code>, or the output should be negated.</p>",
      "raw": "The function works great in my quick testing, but the name doesn't match the logic of it.  It should either be renamed to something like `is-multiple-paragraphs()`, or the output should be negated.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 26.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 6328,
      "post_number": 4,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-12-04T15:01:13.738Z",
      "updated_at": "2024-12-04T15:01:13.738Z",
      "cooked": "<p>duh, sorry. Will edit my answer!</p>",
      "raw": "duh, sorry. Will edit my answer!",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 5.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 177
    }
  ],
  "scraped_at": "2025-06-10T09:54:07.230123"
}
{
  "topic_metadata": {
    "id": 1975,
    "title": "How to conditionally define a 'watermark' variable?",
    "slug": "how-to-conditionally-define-a-watermark-variable",
    "posts_count": 4,
    "created_at": "2024-12-04T04:30:29.759Z",
    "last_posted_at": "2024-12-04T06:30:05.142Z",
    "views": 197,
    "like_count": 5,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "NNS",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 275
  },
  "posts": [
    {
      "id": 6296,
      "post_number": 1,
      "username": "Brent",
      "name": "Brent",
      "created_at": "2024-12-04T04:30:29.919Z",
      "updated_at": "2024-12-04T06:28:15.516Z",
      "cooked": "<p>I want to have a conditional watermark based on a command line parameter but am having trouble with the watermark variable being out of scope in the <code>#set page</code> call.  Is there way to do this?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#if sys.inputs.watermark == \"true\" [\n  #let watermark = rotate(24deg, text(185pt, fill: rgb(\"FF0000\"))[*SAMPLE*])\n] else [\n  #let watermark = none\n]\n\n#set page(\n  paper: \"a4\",\n  numbering: \"1\",\n  flipped: true,\n  margin: 1cm,\n  foreground: watermark\n)\n</code></pre>",
      "raw": "I want to have a conditional watermark based on a command line parameter but am having trouble with the watermark variable being out of scope in the `#set page` call.  Is there way to do this?\n\n```typ\n#if sys.inputs.watermark == \"true\" [\n  #let watermark = rotate(24deg, text(185pt, fill: rgb(\"FF0000\"))[*SAMPLE*])\n] else [\n  #let watermark = none\n]\n\n#set page(\n  paper: \"a4\",\n  numbering: \"1\",\n  flipped: true,\n  margin: 1cm,\n  foreground: watermark\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 753.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 888
    },
    {
      "id": 6314,
      "post_number": 2,
      "username": "NNS",
      "name": "Nikolai Neff-Sarnow",
      "created_at": "2024-12-04T05:41:32.354Z",
      "updated_at": "2024-12-04T05:43:22.780Z",
      "cooked": "<p>try setting the variable before the conditional:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let watermark = none\n#if sys.inputs.watermark == \"true\" { \nwatermark = rotate(24deg, text(185pt, fill: rgb(“FF0000”))[SAMPLE])\n}\n#set page(\npaper: \"a4\",\nnumbering: \"1\",\nflipped: true,\nmargin: 1cm,\nforeground: watermark\n)\n</code></pre>",
      "raw": "try setting the variable before the conditional:\n```typst\n#let watermark = none\n#if sys.inputs.watermark == \"true\" { \nwatermark = rotate(24deg, text(185pt, fill: rgb(“FF0000”))[SAMPLE])\n}\n#set page(\npaper: \"a4\",\nnumbering: \"1\",\nflipped: true,\nmargin: 1cm,\nforeground: watermark\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 39,
      "score": 62.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 754
    },
    {
      "id": 6315,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-12-04T06:27:14.716Z",
      "updated_at": "2024-12-04T06:28:00.380Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/brent\">@Brent</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>I’ve also updated your post to use ```typ ``` around your Typst source code for better display, as <a class=\"mention\" href=\"/u/nns\">@NNS</a> did in their answer. It’s a neat trick! <img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Brent, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your title is a question you’d ask to a friend about Typst. :wink:\n\nI've also updated your post to use \\`\\`\\`typ \\`\\`\\` around your Typst source code for better display, as @NNS did in their answer. It's a neat trick! :smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 36,
      "score": 112.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 6316,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-12-04T06:30:05.142Z",
      "updated_at": "2024-12-04T06:30:05.142Z",
      "cooked": "<p>You can “factor out” the variable definition, because each block in Typst joins and returns each line in it. For example, <code>#let x = { [a]; [b]; [c] }</code> (where <code>;</code> is equivalent to writing them in separate lines) will be the same as <code>#let x = [abc]</code>. With that in mind, we can write this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let watermark = if sys.inputs.watermark == \"true\" {\n  // 'rotate(...)' is returned by this block\n  rotate(24deg, text(185pt, fill: rgb(\"FF0000\"))[*SAMPLE*])\n} else {\n  // 'none' is returned by this block\n  none\n}\n\n#set page(\n  paper: \"a4\",\n  numbering: \"1\",\n  flipped: true,\n  margin: 1cm,\n  foreground: watermark\n)\n</code></pre>",
      "raw": "You can \"factor out\" the variable definition, because each block in Typst joins and returns each line in it. For example, `#let x = { [a]; [b]; [c] }` (where `;` is equivalent to writing them in separate lines) will be the same as `#let x = [abc]`. With that in mind, we can write this:\n\n```typ\n#let watermark = if sys.inputs.watermark == \"true\" {\n  // 'rotate(...)' is returned by this block\n  rotate(24deg, text(185pt, fill: rgb(\"FF0000\"))[*SAMPLE*])\n} else {\n  // 'none' is returned by this block\n  none\n}\n\n#set page(\n  paper: \"a4\",\n  numbering: \"1\",\n  flipped: true,\n  margin: 1cm,\n  foreground: watermark\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 37,
      "score": 37.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:54:06.531638"
}
{
  "topic_metadata": {
    "id": 1978,
    "title": "How to implement sub-numbering for custom figures and equations?",
    "slug": "how-to-implement-sub-numbering-for-custom-figures-and-equations",
    "posts_count": 7,
    "created_at": "2024-12-04T12:43:20.752Z",
    "last_posted_at": "2024-12-09T08:48:33.622Z",
    "views": 256,
    "like_count": 3,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "miles-1",
    "tags": [
      "scripting",
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 579
  },
  "posts": [
    {
      "id": 6322,
      "post_number": 1,
      "username": "Ido",
      "name": "",
      "created_at": "2024-12-04T12:43:20.884Z",
      "updated_at": "2024-12-04T18:26:17.255Z",
      "cooked": "<p>After reading a post here about this topic for equations where the first number of the numbering should be from the level 1 heading I found this solution:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set heading(numbering: \"1.\")\n#show heading.where(level:1): it =&gt; {\n  counter(math.equation).update(0)\n  it\n}\n\n#set math.equation(\n  numbering: it =&gt; {\n    let count = counter(heading.where(level: 1)).at(here()).first()\n    if count &gt;0 {\n      numbering(\"(1.1)\", count, it)\n    } else {\n      numbering(\"(1)\",it)\n    }\n  }\n)\n</code></pre>\n<p>How I can implement it also for this custom figure (theorem):</p>\n<pre><code class=\"lang-auto\">#show figure.where(kind: \"thm\"): it =&gt; [\n  / #it.supplement #context(it.counter.display(it.numbering)).: #it.body\n]\n#let thm(it) = figure(\n  kind: \"thm\",\n  supplement: \"Theorem\",\n  caption: none,\n  placement: none, \n  it\n) \n</code></pre>\n<p>What will be the most correct way to implement a thing like this? Any tips on making this numbering function to be more generic or to define the theorem better would help a lot!</p>",
      "raw": "After reading a post here about this topic for equations where the first number of the numbering should be from the level 1 heading I found this solution:\n```typst\n#set heading(numbering: \"1.\")\n#show heading.where(level:1): it => {\n  counter(math.equation).update(0)\n  it\n}\n\n#set math.equation(\n  numbering: it => {\n    let count = counter(heading.where(level: 1)).at(here()).first()\n    if count >0 {\n      numbering(\"(1.1)\", count, it)\n    } else {\n      numbering(\"(1)\",it)\n    }\n  }\n)\n```\nHow I can implement it also for this custom figure (theorem):\n```\n#show figure.where(kind: \"thm\"): it => [\n  / #it.supplement #context(it.counter.display(it.numbering)).: #it.body\n]\n#let thm(it) = figure(\n  kind: \"thm\",\n  supplement: \"Theorem\",\n  caption: none,\n  placement: none, \n  it\n) \n```\nWhat will be the most correct way to implement a thing like this? Any tips on making this numbering function to be more generic or to define the theorem better would help a lot!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 722.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 875
    },
    {
      "id": 6337,
      "post_number": 2,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-12-04T17:22:25.968Z",
      "updated_at": "2024-12-04T23:13:02.019Z",
      "cooked": "<p>Setting the <a href=\"https://typst.app/docs/reference/model/figure/\">kind</a> argument will automatically generate a counter. I learned a bit more since the last post (e.g., <code>.get()</code> is the same as <code>.at(here())</code>).</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set heading(numbering: \"1\")\n\n#show heading.where(level:1): it =&gt; {\n  counter(figure.where(kind: \"thm\")).update(0)\n  it\n}\n\n#show figure.where(kind: \"thm\"): it =&gt; {\n  let num = numbering(\n    \"1.1\",\n    counter(heading).get().first(),\n    it.counter.get().first()\n  )\n  [/ #it.supplement #num: #it.body]\n}\n\n#let thm(it) = figure(\n  kind: \"thm\",\n  supplement: \"Theorem\",\n  // default values of caption &amp; placement are already none :)\n  it\n)\n\n\n= one chapter\n\n#thm(lorem(20))\n#thm(lorem(20))\n#thm(lorem(20))\n#thm(lorem(20))\n\n= another chapter\n\n#thm(lorem(20))\n#thm(lorem(20))\n#thm(lorem(20))\n#thm(lorem(20))\n</code></pre>\n<p>Follow-up question though… I had never seen the <code>[\\ text:]</code> styling before for bolding. Where is that from? Is it just another way to bold text?</p>",
      "raw": "Setting the [kind](https://typst.app/docs/reference/model/figure/) argument will automatically generate a counter. I learned a bit more since the last post (e.g., `.get()` is the same as `.at(here())`).\n\n```typst\n#set heading(numbering: \"1\")\n\n#show heading.where(level:1): it => {\n  counter(figure.where(kind: \"thm\")).update(0)\n  it\n}\n\n#show figure.where(kind: \"thm\"): it => {\n  let num = numbering(\n    \"1.1\",\n    counter(heading).get().first(),\n    it.counter.get().first()\n  )\n  [/ #it.supplement #num: #it.body]\n}\n\n#let thm(it) = figure(\n  kind: \"thm\",\n  supplement: \"Theorem\",\n  // default values of caption & placement are already none :)\n  it\n)\n\n\n= one chapter\n\n#thm(lorem(20))\n#thm(lorem(20))\n#thm(lorem(20))\n#thm(lorem(20))\n\n= another chapter\n\n#thm(lorem(20))\n#thm(lorem(20))\n#thm(lorem(20))\n#thm(lorem(20))\n```\n\nFollow-up question though... I had never seen the `[\\ text:]` styling before for bolding. Where is that from? Is it just another way to bold text?",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 47.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 177
    },
    {
      "id": 6341,
      "post_number": 3,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-12-04T17:42:18.878Z",
      "updated_at": "2024-12-04T17:42:18.878Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/miles-1\">@miles-1</a> The slash syntax is for <a href=\"https://typst.app/docs/reference/model/terms/\">term lists</a>.</p>\n<p><a class=\"mention\" href=\"/u/ido\">@Ido</a> As you may already know, there are packages like <a href=\"https://typst.app/universe/package/great-theorems\">great-theorems</a> which take care of all of this.</p>",
      "raw": "@miles-1 The slash syntax is for [term lists](https://typst.app/docs/reference/model/terms/).\n\n@Ido As you may already know, there are packages like [great-theorems](https://typst.app/universe/package/great-theorems) which take care of all of this.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 31.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 6342,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-12-04T18:26:21.994Z",
      "updated_at": "2024-12-04T18:26:21.994Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/ido\">@Ido</a>! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>For future posts, make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Ido! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nFor future posts, make sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 26.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 6419,
      "post_number": 5,
      "username": "Ido",
      "name": "",
      "created_at": "2024-12-08T08:18:53.234Z",
      "updated_at": "2024-12-08T08:18:53.234Z",
      "cooked": "<p>Thanks a lot! I am having some rough time adding the if statement to this implementation for the figure numbering… any help on that?</p>",
      "raw": "Thanks a lot! I am having some rough time adding the if statement to this implementation for the figure numbering... any help on that?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 15.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 875
    },
    {
      "id": 6426,
      "post_number": 6,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-12-08T20:10:00.821Z",
      "updated_at": "2024-12-08T20:10:00.821Z",
      "cooked": "<p>If I’m understanding your initial code correctly, you want to make all theorems before the first header just have a theorem counter number (e.g., <code>(1)</code>), and all theorems after a header to have that header’s number and the theorem counter number (e.g., <code>(1.1)</code>), yes? If that’s the case, inside your <code>show</code> rule for <code>thm</code> figures, you will want to:</p>\n<ul>\n<li>save current header count in a variable (e.g., <code>let header_count = ...</code>)</li>\n<li>save current theorem count in a variable (e.g., <code>let thm_count = ...</code>)</li>\n<li>use an <code>if</code> statement to use one of the two <code>numbering</code> uses based on <code>header_count</code>, and save its result to a variable (e.g., <code>let num = if header_count &gt; 0 {...} else {...}</code>)</li>\n</ul>\n<p>Give that a try!</p>",
      "raw": "If I'm understanding your initial code correctly, you want to make all theorems before the first header just have a theorem counter number (e.g., `(1)`), and all theorems after a header to have that header's number and the theorem counter number (e.g., `(1.1)`), yes? If that's the case, inside your `show` rule for `thm` figures, you will want to:\n- save current header count in a variable (e.g., `let header_count = ...`)\n- save current theorem count in a variable (e.g., `let thm_count = ...`)\n- use an `if` statement to use one of the two `numbering` uses based on `header_count`, and save its result to a variable (e.g., `let num = if header_count > 0 {...} else {...}`)\n\nGive that a try!",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 95.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 177
    },
    {
      "id": 6439,
      "post_number": 7,
      "username": "Ido",
      "name": "",
      "created_at": "2024-12-09T08:48:33.622Z",
      "updated_at": "2024-12-09T08:48:33.622Z",
      "cooked": "<p>Something like this?</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show figure.where(kind: \"thm\"): it =&gt; {\n    let header_count = counter(heading.where(level: 1)).get().first()\n    let thm_count = it.counter.get().first()\n    let thm_num = if header_count &gt; 0 {\n      numbering(\"1.1.\",header_count,thm_count)\n    } else {\n      numbering(\"1.\",thm_count)\n    }\n    set align(left)\n    terms[/ #it.supplement #thm_num: #it.body]\n}\n</code></pre>\n<p>Thanks a lot!!</p>",
      "raw": "Something like this?\n```typst\n#show figure.where(kind: \"thm\"): it => {\n    let header_count = counter(heading.where(level: 1)).get().first()\n    let thm_count = it.counter.get().first()\n    let thm_num = if header_count > 0 {\n      numbering(\"1.1.\",header_count,thm_count)\n    } else {\n      numbering(\"1.\",thm_count)\n    }\n    set align(left)\n    terms[/ #it.supplement #thm_num: #it.body]\n}\n```\nThanks a lot!!",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 875
    }
  ],
  "scraped_at": "2025-06-10T09:54:05.731170"
}
{
  "topic_metadata": {
    "id": 1982,
    "title": "Can I use the syntax of Typst only, and define custom primitive commands?",
    "slug": "can-i-use-the-syntax-of-typst-only-and-define-custom-primitive-commands",
    "posts_count": 6,
    "created_at": "2024-12-04T14:57:13.677Z",
    "last_posted_at": "2024-12-05T05:15:37.278Z",
    "views": 158,
    "like_count": 5,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "jbirnick",
    "tags": [],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 647
  },
  "posts": [
    {
      "id": 6327,
      "post_number": 1,
      "username": "OrthoPole",
      "name": "OrthoPole",
      "created_at": "2024-12-04T14:57:13.780Z",
      "updated_at": "2024-12-04T14:57:13.780Z",
      "cooked": "<p>I like the syntax of Typst, and want to use it for something else.</p>\n<p>Just like TeX having several extensions like Plain TeX, LaTeX, etc., can I define a different set of “primitive commands” (i don’t know whether Typst has something like that), and apply it to other scenarios than building a pdf document (e.g., building a html document instead)?</p>",
      "raw": "I like the syntax of Typst, and want to use it for something else.\n\nJust like TeX having several extensions like Plain TeX, LaTeX, etc., can I define a different set of \"primitive commands\" (i don't know whether Typst has something like that), and apply it to other scenarios than building a pdf document (e.g., building a html document instead)?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 289.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 889
    },
    {
      "id": 6330,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-12-04T15:55:19.200Z",
      "updated_at": "2024-12-04T15:56:43.700Z",
      "cooked": "<p>I’m not sure I can answer your general question, can you give more details what you mean by “primitive commands”?</p>\n<p>For creating HTML documents specifically, that is on the <a href=\"https://typst.app/docs/roadmap/\">roadmap</a> and is tracked by this GitHub issue: <a href=\"https://github.com/typst/typst/issues/5512\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Tracking issue: HTML export · Issue #5512 · typst/typst · GitHub</a></p>\n<p>I don’t remember where I read this but I think it’s also planned to allow the creation of types by the user, and this will let us use <code>set</code> rules on them.  Maybe this is closer to what you’re looking for?<br>\nThis is mentioned as “Custom types (that work with set and show rules” on the roadmap.</p>",
      "raw": "I'm not sure I can answer your general question, can you give more details what you mean by \"primitive commands\"?\n\nFor creating HTML documents specifically, that is on the [roadmap](https://typst.app/docs/roadmap/) and is tracked by this GitHub issue: https://github.com/typst/typst/issues/5512\n\nI don't remember where I read this but I think it's also planned to allow the creation of types by the user, and this will let us use `set` rules on them.  Maybe this is closer to what you're looking for?\nThis is mentioned as \"Custom types (that work with set and show rules\" on the roadmap.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 48,
      "score": 74.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 6331,
      "post_number": 3,
      "username": "OrthoPole",
      "name": "OrthoPole",
      "created_at": "2024-12-04T16:05:38.844Z",
      "updated_at": "2024-12-04T16:05:38.844Z",
      "cooked": "<p>I’m not sure how Typst works. In my mind, every code are parsed into functions and values, and after executing them recursively, some “primitive” functions are finally called, which means these functions cannot be implemented in the language of Typst. Then Typst executes these functions using a more basic implementation, like writing some data into the pdf document.</p>\n<p>If this is the case, what I want to do is to define a different set of primitive functions, using my own implementation, and then build a whole system on it.</p>",
      "raw": "I'm not sure how Typst works. In my mind, every code are parsed into functions and values, and after executing them recursively, some \"primitive\" functions are finally called, which means these functions cannot be implemented in the language of Typst. Then Typst executes these functions using a more basic implementation, like writing some data into the pdf document.\n\nIf this is the case, what I want to do is to define a different set of primitive functions, using my own implementation, and then build a whole system on it.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 24.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 889
    },
    {
      "id": 6340,
      "post_number": 4,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-12-04T17:36:04.564Z",
      "updated_at": "2024-12-04T17:36:04.564Z",
      "cooked": "<p>I still don’t understand what the final product is that you are trying to achieve. Do you want to export to a different format?</p>\n<p>You can read <a href=\"https://docs.rs/typst/latest/typst/\" rel=\"noopener nofollow ugc\">here</a> how Typst roughly works. In particular, it parses and evaluates your source code to something called <code>Content</code>, which maybe is the “intermediate representation” that you are looking for. This content is then either exported to HTML or layouted in to Frames (1 page = 1 frame) which can be exported to PNG/SVG/PDF.</p>",
      "raw": "I still don't understand what the final product is that you are trying to achieve. Do you want to export to a different format?\n\nYou can read [here](https://docs.rs/typst/latest/typst/) how Typst roughly works. In particular, it parses and evaluates your source code to something called `Content`, which maybe is the \"intermediate representation\" that you are looking for. This content is then either exported to HTML or layouted in to Frames (1 page = 1 frame) which can be exported to PNG/SVG/PDF.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 29.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 6350,
      "post_number": 5,
      "username": "OrthoPole",
      "name": "OrthoPole",
      "created_at": "2024-12-05T03:25:27.883Z",
      "updated_at": "2024-12-05T03:28:48.016Z",
      "cooked": "<p>Thank you for your answers. They do help me a lot.</p>\n<p>My main goal is to use Typst to write notes on my own website.<br>\nHowever, Typst is designed to build a pdf document, instead of HTML.<br>\nSo I want to redefine the commands to product HTML instead.</p>\n<p>For example, I want to write something like this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">= This is a header // &lt;h1&gt;This is a header&lt;/h1&gt;\nThis is a paragraph // &lt;p&gt;This is a paragraph&lt;/p&gt;\n$x^2 + y^2 = z^2$ // Mathjax or something else\n</code></pre>\n<p>I think the basic structure of pdf document and HTML is different. PDF documents are controlled by positions and sizes (actually IDK) while HTML are rendered by document flows. This difference possibly makes producing HTML directly using Typst impossible.</p>\n<p>Therefore, I want to rewrite the basic commands in Typst to produce HTML instead of PDF, while preserving the syntax.</p>\n<p>From your answer, I think what I should do is to do only the first two steps, and parse the <code>Content</code> to HTML directly? I will look for more references later.</p>",
      "raw": "Thank you for your answers. They do help me a lot.\n\nMy main goal is to use Typst to write notes on my own website.\nHowever, Typst is designed to build a pdf document, instead of HTML.\nSo I want to redefine the commands to product HTML instead.\n\nFor example, I want to write something like this:\n```typst\n= This is a header // <h1>This is a header</h1>\nThis is a paragraph // <p>This is a paragraph</p>\n$x^2 + y^2 = z^2$ // Mathjax or something else\n```\nI think the basic structure of pdf document and HTML is different. PDF documents are controlled by positions and sizes (actually IDK) while HTML are rendered by document flows. This difference possibly makes producing HTML directly using Typst impossible. \n\nTherefore, I want to rewrite the basic commands in Typst to produce HTML instead of PDF, while preserving the syntax.\n\nFrom your answer, I think what I should do is to do only the first two steps, and parse the `Content` to HTML directly? I will look for more references later.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 33.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 889
    },
    {
      "id": 6351,
      "post_number": 6,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-12-05T05:15:37.278Z",
      "updated_at": "2024-12-05T05:18:02.074Z",
      "cooked": "<p>Yeah but as mentioned before, what you are trying to achieve is actually currently implemented by the maintainers of Typst.</p>\n<p>Someone already posted the tracking issue: <a href=\"https://github.com/typst/typst/issues/5512\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Tracking issue: HTML export · Issue #5512 · typst/typst · GitHub</a></p>\n<p>With the git version of Typst you can already export very basic documents to HTML. It will become better over the next weeks and months. Applications like blogging are explicitly in the mind of the creators, just have a look at the tracking issue above, where “blog” is literally mentioned.</p>\n<p>And someone just posted here on the Forum that he is already using Typst to generate his website: <a href=\"https://forum.typst.app/t/my-website-is-now-built-with-typsts-new-experimental-html-exporter/1988/1\" class=\"inline-onebox\">My website is now built with Typst's new experimental HTML exporter</a></p>",
      "raw": "Yeah but as mentioned before, what you are trying to achieve is actually currently implemented by the maintainers of Typst.\n\nSomeone already posted the tracking issue: https://github.com/typst/typst/issues/5512\n\nWith the git version of Typst you can already export very basic documents to HTML. It will become better over the next weeks and months. Applications like blogging are explicitly in the mind of the creators, just have a look at the tracking issue above, where \"blog\" is literally mentioned.\n\nAnd someone just posted here on the Forum that he is already using Typst to generate his website: https://forum.typst.app/t/my-website-is-now-built-with-typsts-new-experimental-html-exporter/1988/1",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 41,
      "score": 28.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    }
  ],
  "scraped_at": "2025-06-10T09:54:04.511801"
}
{
  "topic_metadata": {
    "id": 1985,
    "title": "How to have first line indent in a new paragraph after a math block?",
    "slug": "how-to-have-first-line-indent-in-a-new-paragraph-after-a-math-block",
    "posts_count": 2,
    "created_at": "2024-12-04T20:24:56.320Z",
    "last_posted_at": "2024-12-04T23:48:44.864Z",
    "views": 225,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "miles-1",
    "tags": [
      "layout",
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 289
  },
  "posts": [
    {
      "id": 6344,
      "post_number": 1,
      "username": "CKB",
      "name": "CKB",
      "created_at": "2024-12-04T20:24:56.494Z",
      "updated_at": "2024-12-04T20:24:56.494Z",
      "cooked": "<p>Hello. I always use first line indents for my paragraphs. When I write equations in an article, sometimes I add a new paragraph immediately after a math block, like this:</p>\n<pre><code class=\"lang-auto\">    Lorem ipsum dolor sit amet \n             a^2+b^2=c\n    New paragraph should be indented. Lorem ipsum dolor sit amet\n</code></pre>\n<p>Right now Typst seems to not support this, and doesn’t indent my new paragraph after the math block no matter what I do. Here’s what I’ve tried:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set par(first-line-indent: 2em)\n#lorem(30)\n$ A xor B dot.circle C = D^2 mod F^2 $\n\n#parbreak()\nNew paragraph (No indent)\n\nSecond paragraph (Indent appears)\n</code></pre>\n<p>If I were writing in markdown, I would’ve just put a tab before the newline and most software would acknowledge it. Does anyone know how to do this? I am very new to Typst.</p>",
      "raw": "Hello. I always use first line indents for my paragraphs. When I write equations in an article, sometimes I add a new paragraph immediately after a math block, like this:\n```\n    Lorem ipsum dolor sit amet \n             a^2+b^2=c\n    New paragraph should be indented. Lorem ipsum dolor sit amet\n```\n\nRight now Typst seems to not support this, and doesn't indent my new paragraph after the math block no matter what I do. Here's what I've tried:\n```typ\n#set par(first-line-indent: 2em)\n#lorem(30)\n$ A xor B dot.circle C = D^2 mod F^2 $\n\n#parbreak()\nNew paragraph (No indent)\n\nSecond paragraph (Indent appears)\n```\n\nIf I were writing in markdown, I would've just put a tab before the newline and most software would acknowledge it. Does anyone know how to do this? I am very new to Typst.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 902.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 891
    },
    {
      "id": 6346,
      "post_number": 2,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-12-04T23:48:44.864Z",
      "updated_at": "2024-12-04T23:57:37.210Z",
      "cooked": "<p>You’re right, Typst currently only indents successive paragraphs, and doesn’t indent the first paragraph after block content. To work around this, you can use the <a href=\"https://typst.app/docs/reference/layout/h/\"><code>h</code> function</a> (horizontal space function):</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set par(first-line-indent: 2em)\n#lorem(30)\n$ A xor B dot.circle C = D^2 mod F^2 $\n\n#h(2em) New paragraph (now with indent)\n\nSecond paragraph (Indent appears)\n</code></pre>\n<p>If you only use one block equation at a time <strong>and</strong> a paragraph always follows a block equation, you can use a show rule to make this change for all paragraphs:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set par(first-line-indent: 2em)\n\n#show math.equation: it =&gt; {\n  it\n  if it.block {\n    h(2em)\n  }\n}\n\n#lorem(30)\n$ A xor B dot.circle C = D^2 mod F^2 $\n\nNew paragraph (now with indent, even without `h` in front)\n\nSecond paragraph (Indent appears)\n</code></pre>",
      "raw": "You're right, Typst currently only indents successive paragraphs, and doesn't indent the first paragraph after block content. To work around this, you can use the [`h` function](https://typst.app/docs/reference/layout/h/) (horizontal space function):\n\n```typst\n#set par(first-line-indent: 2em)\n#lorem(30)\n$ A xor B dot.circle C = D^2 mod F^2 $\n\n#h(2em) New paragraph (now with indent)\n\nSecond paragraph (Indent appears)\n```\n\nIf you only use one block equation at a time **and** a paragraph always follows a block equation, you can use a show rule to make this change for all paragraphs:\n\n```typst\n#set par(first-line-indent: 2em)\n\n#show math.equation: it => {\n  it\n  if it.block {\n    h(2em)\n  }\n}\n\n#lorem(30)\n$ A xor B dot.circle C = D^2 mod F^2 $\n\nNew paragraph (now with indent, even without `h` in front)\n\nSecond paragraph (Indent appears)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 34,
      "score": 81.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 177
    }
  ],
  "scraped_at": "2025-06-10T09:53:59.601516"
}
{
  "topic_metadata": {
    "id": 1991,
    "title": "How to display a rotated table over several pages?",
    "slug": "how-to-display-a-rotated-table-over-several-pages",
    "posts_count": 3,
    "created_at": "2024-12-05T10:26:53.929Z",
    "last_posted_at": "2024-12-05T13:33:14.703Z",
    "views": 211,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "tables"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 390
  },
  "posts": [
    {
      "id": 6356,
      "post_number": 1,
      "username": "fdekerm",
      "name": "François de Kermenguy",
      "created_at": "2024-12-05T10:26:54.048Z",
      "updated_at": "2024-12-05T10:26:54.048Z",
      "cooked": "<p>Hello,<br>\nI have a very large table that I’d like to display on several pages. The following code :</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(\"a4\", margin: (\n  left: 1cm, \n  bottom: 1cm,\n  top: 1cm,\n  right: 1cm), \n  flipped: false)\n\n\n#rotate(\n  -90deg,\n  reflow: true)[#figure(\n block(width: 100%, breakable: true, (table( \n    columns: (auto, auto, auto, auto, auto, auto, auto, auto, auto,),\n    align: (left,left,left,left,left,left,left,left,left,),\n    table.header([Type of model and\n      outputs], [Model name and/or\n      references], [...\n</code></pre>\n<p>gives this:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/3/3a9e67a2744ee388171d13cd20449523283e5d22.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/3a9e67a2744ee388171d13cd20449523283e5d22\" title=\"Capture d’écran 2024-12-05 111946\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/3/3a9e67a2744ee388171d13cd20449523283e5d22_2_371x499.jpeg\" alt=\"Capture d’écran 2024-12-05 111946\" data-base62-sha1=\"8mz4AEY1E6d8NxWhLSU4KzEwzRw\" width=\"371\" height=\"499\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/3/3a9e67a2744ee388171d13cd20449523283e5d22_2_371x499.jpeg, https://forum.typst.app/uploads/default/optimized/2X/3/3a9e67a2744ee388171d13cd20449523283e5d22_2_556x748.jpeg 1.5x, https://forum.typst.app/uploads/default/original/2X/3/3a9e67a2744ee388171d13cd20449523283e5d22.jpeg 2x\" data-dominant-color=\"EAEAEA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Capture d’écran 2024-12-05 111946</span><span class=\"informations\">699×941 47.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>How can I make the rotated table spread over several pages?<br>\nThank you,<br>\nfdekerm</p>",
      "raw": "Hello, \nI have a very large table that I'd like to display on several pages. The following code :\n\n```typst\n#set page(\"a4\", margin: (\n  left: 1cm, \n  bottom: 1cm,\n  top: 1cm,\n  right: 1cm), \n  flipped: false)\n\n\n#rotate(\n  -90deg,\n  reflow: true)[#figure(\n block(width: 100%, breakable: true, (table( \n    columns: (auto, auto, auto, auto, auto, auto, auto, auto, auto,),\n    align: (left,left,left,left,left,left,left,left,left,),\n    table.header([Type of model and\n      outputs], [Model name and/or\n      references], [...\n```\n\ngives this:\n![Capture d’écran 2024-12-05 111946|371x499](upload://8mz4AEY1E6d8NxWhLSU4KzEwzRw.jpeg)\n\n\n\n\nHow can I make the rotated table spread over several pages? \nThank you,\nfdekerm",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 967.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 6360,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-12-05T12:43:49.296Z",
      "updated_at": "2024-12-05T12:43:49.296Z",
      "cooked": "<p>My first thought to address this was instead of rotating the figure, rotate the page with <code>#set page(flipped: true)</code>.  I tried that and it did not improve the situation:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\"a6\")\n#let numCols = 6\n#let numRows = 15\n\n#let testTable = table( \n  columns: (auto,)*numCols,\n  align: (left,left,left,left,left,left,left,left,left,),\n  \n  table.header(..(lorem(2),)*numCols),\n  ..(..(\"data\",)*numCols,)*numRows\n)\n\n#set page(flipped: true)\n\n#figure(\n  block(width: 100%, breakable: true,\n    testTable,\n  )\n)\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/4/44459e4842def2d332570aeccf1f227dfb70f4ae.png\" alt=\"image\" data-base62-sha1=\"9JXCIxgqG3X3JlsCgJ9k8SpjME6\" width=\"428\" height=\"301\"></p>\n</details>\n<p>But if the same table is used outside of a figure, it works as expected:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\"a6\")\n#let numCols = 6\n#let numRows = 15\n\n#let testTable = table( \n  columns: (auto,)*numCols,\n  align: (left,left,left,left,left,left,left,left,left,),\n  \n  table.header(..(lorem(2),)*numCols),\n  ..(..(\"data\",)*numCols,)*numRows\n)\n\npreamble text\n#set page(flipped: true)\n\n#testTable\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/f4fb0819ad7d4a79141b433105071db048cba58a.png\" data-download-href=\"https://forum.typst.app/uploads/default/f4fb0819ad7d4a79141b433105071db048cba58a\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/f4fb0819ad7d4a79141b433105071db048cba58a_2_347x500.png\" alt=\"image\" data-base62-sha1=\"yXckO3hkiYRtjXsnNbYTzFkk62S\" width=\"347\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/f4fb0819ad7d4a79141b433105071db048cba58a_2_347x500.png, https://forum.typst.app/uploads/default/original/2X/f/f4fb0819ad7d4a79141b433105071db048cba58a.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/f4fb0819ad7d4a79141b433105071db048cba58a.png 2x\" data-dominant-color=\"EFEFEF\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">430×618 47 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>And changing orientation of the page works nicely:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">Normal orientation\n#set page(flipped: true)\n#testTable\n#set page(flipped: false)\nAgain, normal orientation\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/4/4a86e67207df87e8d8426aba711919327a226898.png\" data-download-href=\"https://forum.typst.app/uploads/default/4a86e67207df87e8d8426aba711919327a226898\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/4/4a86e67207df87e8d8426aba711919327a226898_2_187x500.png\" alt=\"image\" data-base62-sha1=\"aDim12M94lIGryWc34uv9yYzJ32\" width=\"187\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/4/4a86e67207df87e8d8426aba711919327a226898_2_187x500.png, https://forum.typst.app/uploads/default/original/2X/4/4a86e67207df87e8d8426aba711919327a226898.png 1.5x, https://forum.typst.app/uploads/default/original/2X/4/4a86e67207df87e8d8426aba711919327a226898.png 2x\" data-dominant-color=\"F2F2F4\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">261×695 25.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>So, it seems figures do not handle spilling into a new page well.</p>",
      "raw": "My first thought to address this was instead of rotating the figure, rotate the page with `#set page(flipped: true)`.  I tried that and it did not improve the situation:\n```typ\n#set page(\"a6\")\n#let numCols = 6\n#let numRows = 15\n\n#let testTable = table( \n  columns: (auto,)*numCols,\n  align: (left,left,left,left,left,left,left,left,left,),\n  \n  table.header(..(lorem(2),)*numCols),\n  ..(..(\"data\",)*numCols,)*numRows\n)\n\n#set page(flipped: true)\n\n#figure(\n  block(width: 100%, breakable: true,\n    testTable,\n  )\n)\n```\n[details=\"Output\"]\n![image|428x301](upload://9JXCIxgqG3X3JlsCgJ9k8SpjME6.png)\n[/details]\n\nBut if the same table is used outside of a figure, it works as expected:\n```typ\n#set page(\"a6\")\n#let numCols = 6\n#let numRows = 15\n\n#let testTable = table( \n  columns: (auto,)*numCols,\n  align: (left,left,left,left,left,left,left,left,left,),\n  \n  table.header(..(lorem(2),)*numCols),\n  ..(..(\"data\",)*numCols,)*numRows\n)\n\npreamble text\n#set page(flipped: true)\n\n#testTable\n```\n\n[details=\"Output\"]\n![image|347x500](upload://yXckO3hkiYRtjXsnNbYTzFkk62S.png)\n[/details]\n\nAnd changing orientation of the page works nicely:\n```typ\nNormal orientation\n#set page(flipped: true)\n#testTable\n#set page(flipped: false)\nAgain, normal orientation\n```\n[details=\"Output\"]\n![image|187x500](upload://aDim12M94lIGryWc34uv9yYzJ32.png)\n[/details]\n\nSo, it seems figures do not handle spilling into a new page well.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 51.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 6361,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-12-05T13:33:14.703Z",
      "updated_at": "2024-12-05T13:40:41.931Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"gezepi\" data-post=\"2\" data-topic=\"1991\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/g/C34CE0/48.png\" class=\"avatar\"> gezepi:</div>\n<blockquote>\n<p>So, it seems figures do not handle spilling into a new page well.</p>\n</blockquote>\n</aside>\n<p>Figures are unbreakable by default (<strong>regardless</strong> of whether a <code>block(breakable: true)</code> is used in its body). You can use <code>#show figure.where(kind: table): set block(breakable: true)</code> to change this. (Though note that, for now, the figure caption won’t be repeated. There is some discussion and even a PR to change this, but it isn’t done yet.)</p>\n<p>See also “Figure Behavior” in <a href=\"https://typst.app//docs/reference/model/figure#figure-behaviour\" class=\"inline-onebox\">Figure Function – Typst Documentation</a></p>",
      "raw": "[quote=\"gezepi, post:2, topic:1991\"]\nSo, it seems figures do not handle spilling into a new page well.\n[/quote]\n\nFigures are unbreakable by default (**regardless** of whether a `block(breakable: true)` is used in its body). You can use `#show figure.where(kind: table): set block(breakable: true)` to change this. (Though note that, for now, the figure caption won't be repeated. There is some discussion and even a PR to change this, but it isn't done yet.)\n\nSee also \"Figure Behavior\" in https://typst.app//docs/reference/model/figure#figure-behaviour",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 2,
      "reads": 25,
      "score": 75.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:53:58.870511"
}
{
  "topic_metadata": {
    "id": 1992,
    "title": "Touying Metropolis theme: What is the variable to define the color of titles in section slides?",
    "slug": "touying-metropolis-theme-what-is-the-variable-to-define-the-color-of-titles-in-section-slides",
    "posts_count": 3,
    "created_at": "2024-12-05T10:42:32.571Z",
    "last_posted_at": "2024-12-08T14:17:27.812Z",
    "views": 260,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "ParaN3xus",
    "tags": [
      "touying"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 440
  },
  "posts": [
    {
      "id": 6357,
      "post_number": 1,
      "username": "DrLoiseau",
      "name": "LVG",
      "created_at": "2024-12-05T10:42:32.705Z",
      "updated_at": "2024-12-06T10:33:29.603Z",
      "cooked": "<p>Hi,</p>\n<p>I’m having trouble trying to change metropolis theme colors in touying. I could set :</p>\n<ul>\n<li>the background color through neutral-lightest</li>\n<li>the title slide text color through neutral-darker</li>\n<li>the progress bar color through primary and primary-lightest, etc.</li>\n</ul>\n<p>However, nothing seems to correspond to the color of the title in section slides. Where is this color defined ? I didn’t find any clear reference explaining which color variable defines which element color.</p>\n<pre><code class=\"lang-auto\">#import \"@preview/touying:0.5.3\": *\n#import themes.metropolis: *\n#show: metropolis-theme.with(\n    aspect-ratio: \"16-9\",\n    // config-common(handout: true),\n    config-info(\n        title: [Kéfir et Kombucha],\n        subtitle: [Deux écosystèmes microbiens de boissons fermentées],\n        author: [Myxonautes],\n        date: datetime.today(),\n        // institution: [Institution],\n        logo: image(\"images/logo_myxonautes_noir.png\"),\n    ),\n    config-colors(\n        primary: rgb(129, 249, 14),\n        primary-light: rgb(199, 249, 150),\n        secondary: rgb(230, 255, 230),\n        neutral-lightest: rgb(8, 10, 8),\n        neutral-dark: rgb(230, 255, 230),\n        neutral-darkest: rgb(230, 255, 230),\n    )\n)\n\n#title-slide()\n= Kéfir et kombucha\nDeux écosystèmes microbiens de boissons fermentées\n\n= Microorganismes \n\n== test\nDu contenu\n</code></pre>\n<p>Everything is fine except the title colors in section slides in this example.</p>\n<p>Thanks for your help.</p>",
      "raw": "Hi,\n\nI'm having trouble trying to change metropolis theme colors in touying. I could set : \n- the background color through neutral-lightest\n- the title slide text color through neutral-darker\n- the progress bar color through primary and primary-lightest, etc. \n\nHowever, nothing seems to correspond to the color of the title in section slides. Where is this color defined ? I didn't find any clear reference explaining which color variable defines which element color.\n\n```\n#import \"@preview/touying:0.5.3\": *\n#import themes.metropolis: *\n#show: metropolis-theme.with(\n    aspect-ratio: \"16-9\",\n    // config-common(handout: true),\n    config-info(\n        title: [Kéfir et Kombucha],\n        subtitle: [Deux écosystèmes microbiens de boissons fermentées],\n        author: [Myxonautes],\n        date: datetime.today(),\n        // institution: [Institution],\n        logo: image(\"images/logo_myxonautes_noir.png\"),\n    ),\n    config-colors(\n        primary: rgb(129, 249, 14),\n        primary-light: rgb(199, 249, 150),\n        secondary: rgb(230, 255, 230),\n        neutral-lightest: rgb(8, 10, 8),\n        neutral-dark: rgb(230, 255, 230),\n        neutral-darkest: rgb(230, 255, 230),\n    )\n)\n\n#title-slide()\n= Kéfir et kombucha\nDeux écosystèmes microbiens de boissons fermentées\n\n= Microorganismes \n\n== test\nDu contenu\n```\nEverything is fine except the title colors in section slides in this example.\n\nThanks for your help.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 978.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 537
    },
    {
      "id": 6388,
      "post_number": 2,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-12-06T15:56:51.875Z",
      "updated_at": "2024-12-06T15:56:51.875Z",
      "cooked": "<p>I checked <code>metropolis.typ</code> and found the title and descriptions in <code>new-section-slide</code> doesn’t follow predefined color dict:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let new-section-slide(level: 1, numbered: true, body) = touying-slide-wrapper(self =&gt; {\n  let slide-body = {\n    set align(horizon)\n    show: pad.with(20%)\n    set text(size: 1.5em)\n    stack(\n      dir: ttb,\n      spacing: 1em,\n      // title\n      utils.display-current-heading(level: level, numbered: numbered),\n      block(\n        height: 2pt,\n        width: 100%,\n        spacing: 0pt,\n        components.progress-bar(height: 2pt, self.colors.primary, self.colors.primary-light),\n      ),\n    )\n    // descriptions\n    body\n  }\n  self = utils.merge-dicts(\n    self,\n    config-page(fill: self.colors.neutral-lightest),\n  )\n  touying-slide(self: self, slide-body)\n})\n</code></pre>\n<p>You can fix this temporarily by patch <code>new-section-slide</code> function in <code>[package dir]/preview/touying/[version]/themes/metropolis.typ</code> with the function below:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let new-section-slide(level: 1, numbered: true, body) = touying-slide-wrapper(self =&gt; {\n  let slide-body = {\n    set align(horizon)\n    show: pad.with(20%)\n    set text(size: 1.5em)\n    stack(\n      dir: ttb,\n      spacing: 1em,\n      text(self.colors.neutral-darkest, utils.display-current-heading(level: level, numbered: numbered)),\n      block(\n        height: 2pt,\n        width: 100%,\n        spacing: 0pt,\n        components.progress-bar(height: 2pt, self.colors.primary, self.colors.primary-light),\n      ),\n    )\n    text(self.colors.neutral-dark, body)\n  }\n  self = utils.merge-dicts(\n    self,\n    config-page(fill: self.colors.neutral-lightest),\n  )\n  touying-slide(self: self, slide-body)\n})\n</code></pre>\n<p>I just simply take colors dict into account.</p>\n<p>I will open a pull request and hopefully this will be fixed soon.</p>",
      "raw": "I checked `metropolis.typ` and found the title and descriptions in `new-section-slide` doesn't follow predefined color dict:\n```typ\n#let new-section-slide(level: 1, numbered: true, body) = touying-slide-wrapper(self => {\n  let slide-body = {\n    set align(horizon)\n    show: pad.with(20%)\n    set text(size: 1.5em)\n    stack(\n      dir: ttb,\n      spacing: 1em,\n      // title\n      utils.display-current-heading(level: level, numbered: numbered),\n      block(\n        height: 2pt,\n        width: 100%,\n        spacing: 0pt,\n        components.progress-bar(height: 2pt, self.colors.primary, self.colors.primary-light),\n      ),\n    )\n    // descriptions\n    body\n  }\n  self = utils.merge-dicts(\n    self,\n    config-page(fill: self.colors.neutral-lightest),\n  )\n  touying-slide(self: self, slide-body)\n})\n```\nYou can fix this temporarily by patch `new-section-slide` function in `[package dir]/preview/touying/[version]/themes/metropolis.typ` with the function below:\n```typ\n#let new-section-slide(level: 1, numbered: true, body) = touying-slide-wrapper(self => {\n  let slide-body = {\n    set align(horizon)\n    show: pad.with(20%)\n    set text(size: 1.5em)\n    stack(\n      dir: ttb,\n      spacing: 1em,\n      text(self.colors.neutral-darkest, utils.display-current-heading(level: level, numbered: numbered)),\n      block(\n        height: 2pt,\n        width: 100%,\n        spacing: 0pt,\n        components.progress-bar(height: 2pt, self.colors.primary, self.colors.primary-light),\n      ),\n    )\n    text(self.colors.neutral-dark, body)\n  }\n  self = utils.merge-dicts(\n    self,\n    config-page(fill: self.colors.neutral-lightest),\n  )\n  touying-slide(self: self, slide-body)\n})\n```\nI just simply take colors dict into account.\n\nI will open a pull request and hopefully this will be fixed soon.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 31.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 6420,
      "post_number": 3,
      "username": "DrLoiseau",
      "name": "LVG",
      "created_at": "2024-12-08T14:17:27.812Z",
      "updated_at": "2024-12-08T14:17:27.812Z",
      "cooked": "<p>Thanks, I didn’t know where to check for the slides definitions, that’s great !</p>",
      "raw": "Thanks, I didn't know where to check for the slides definitions, that's great !",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 5.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 537
    }
  ],
  "scraped_at": "2025-06-10T09:53:52.980542"
}
{
  "topic_metadata": {
    "id": 1994,
    "title": "Define new math classes, or default attachment styles",
    "slug": "define-new-math-classes-or-default-attachment-styles",
    "posts_count": 3,
    "created_at": "2024-12-05T15:41:31.693Z",
    "last_posted_at": "2024-12-05T16:14:04.180Z",
    "views": 65,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 164
  },
  "posts": [
    {
      "id": 6363,
      "post_number": 1,
      "username": "Simerylop",
      "name": "Lucas",
      "created_at": "2024-12-05T15:41:31.842Z",
      "updated_at": "2024-12-05T15:41:59.165Z",
      "cooked": "<p>Is there a way to set a default attachment style for a symbol? I would<br>\nlike to <code>$&lt;_A$</code> always look like <code>$script(&lt;)_A$</code> or <code>$attach(&lt;,br: A)$</code>.<br>\nOr in general do this kind of things, like creating new math classes. For example the following works to some extent:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let mylt = math.class(\"normal\", sym.lt)\n#show sym.lt: mylt\n\n$a &lt;_A b$\n</code></pre>\n<p>The problem is that then, $&lt;$ looses its properties of the “relation” class,<br>\nso the spacing gets weird.</p>",
      "raw": "Is there a way to set a default attachment style for a symbol? I would\nlike to `$<_A$` always look like `$script(<)_A$` or `$attach(<,br: A)$`.\nOr in general do this kind of things, like creating new math classes. For example the following works to some extent:\n\n```typ\n#let mylt = math.class(\"normal\", sym.lt)\n#show sym.lt: mylt\n\n$a <_A b$\n```\n\nThe problem is that then, $<$ looses its properties of the \"relation\" class,\nso the spacing gets weird.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 65.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 893
    },
    {
      "id": 6364,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2024-12-05T15:57:31.842Z",
      "updated_at": "2024-12-05T15:57:31.842Z",
      "cooked": "<p>Hi, welcome to the Typst forum!</p>\n<p>You can use <code>scripts</code> and <code>limits</code> to change the attachment behavior (see doc <a href=\"https://typst.app/docs/reference/math/attach/\">here</a>):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show sym.lt: math.scripts\n$a &lt;_A b$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/f/f7e5e72e8aef320569468827d284df0aaa4ff5e7.png\" alt=\"image\" data-base62-sha1=\"zn0v0QYACdcnjk0IjEZzzWo0f8X\" width=\"78\" height=\"39\"></p>\n<p>I think this preserves the relation class of <code>&lt;</code>.</p>",
      "raw": "Hi, welcome to the Typst forum!\n\nYou can use `scripts` and `limits` to change the attachment behavior (see doc [here](https://typst.app/docs/reference/math/attach/)):\n\n```typ\n#show sym.lt: math.scripts\n$a <_A b$\n```\n![image|105x53, 75%](upload://zn0v0QYACdcnjk0IjEZzzWo0f8X.png)\n\nI think this preserves the relation class of `<`.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 14.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 6365,
      "post_number": 3,
      "username": "Simerylop",
      "name": "Lucas",
      "created_at": "2024-12-05T16:14:04.180Z",
      "updated_at": "2024-12-05T16:14:04.180Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"sijo\" data-post=\"2\" data-topic=\"1994\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/0A3649/48.png\" class=\"avatar\"> sijo:</div>\n<blockquote>\n<p><code>#show sym.lt: math.scripts</code></p>\n</blockquote>\n</aside>\n<p>Oh, that was easy. Thanks!, it does preserve the other aspects of the relation class. I missed that possibility from the docs.</p>",
      "raw": "[quote=\"sijo, post:2, topic:1994\"]\n`#show sym.lt: math.scripts`\n[/quote]\n\nOh, that was easy. Thanks!, it does preserve the other aspects of the relation class. I missed that possibility from the docs.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 23,
      "score": 14.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 893
    }
  ],
  "scraped_at": "2025-06-10T09:53:52.280341"
}
{
  "topic_metadata": {
    "id": 1998,
    "title": "How to set the font of mono in math",
    "slug": "how-to-set-the-font-of-mono-in-math",
    "posts_count": 2,
    "created_at": "2024-12-05T22:58:50.653Z",
    "last_posted_at": "2024-12-07T23:10:45.982Z",
    "views": 407,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 239
  },
  "posts": [
    {
      "id": 6371,
      "post_number": 1,
      "username": "KellyNyanbinary",
      "name": "",
      "created_at": "2024-12-05T22:58:50.764Z",
      "updated_at": "2024-12-05T22:59:07.347Z",
      "cooked": "<p>I’m trying to set the font that <code>math.mono()</code> uses inside math blocks, i.e. <code>$mono(code)$</code>. I have tried the following to no avail (most error out)</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation: set text.mono(font: \"JetBrainsMono NF\") \n#show math.equation.where(mono: true): set text(font: \"JetBrainsMono NF\") \n#show math.mono: set text(font: \"JetBrainsMono NF\") \n</code></pre>",
      "raw": "I'm trying to set the font that `math.mono()` uses inside math blocks, i.e. `$mono(code)$`. I have tried the following to no avail (most error out)\n\n```typ\n#show math.equation: set text.mono(font: \"JetBrainsMono NF\") \n#show math.equation.where(mono: true): set text(font: \"JetBrainsMono NF\") \n#show math.mono: set text(font: \"JetBrainsMono NF\") \n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 54,
      "score": 1580.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 811
    },
    {
      "id": 6416,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-12-07T23:10:45.982Z",
      "updated_at": "2024-12-07T23:10:45.982Z",
      "cooked": "<p>Monospaced math content created with <code>$mono(...)$</code> actually just uses the default math font, which contains its own monospaced characters. As it seems like you want to use a normal text font, which is not intended to be used for math content, it would probably make more sense to use <code>raw</code> blocks to create monospaced text. As the backtick syntax doesn’t work in math mode, you need to either call <code>#raw</code> explicitly, or temporarily switch to code mode with a <code>#</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ x + #raw(\"y\") = #`code` $\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/b/b18461eb9167ec247510a9ed1aea7c8f32f87938.png\" alt=\"image\" data-base62-sha1=\"pko8HXKqeWn5wMpeTBf5iBZkx0A\" width=\"140\" height=\"38\"></p>\n<p>With this, you can then easily change the font via a show-set rule, though you may need to adjust the text size so it matches the surrounding text.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw: set text(font: \"JetBrainsMono NF\")\n</code></pre>\n<p>If this font should only be used for math, you can also either scope the show-set rule in a show rule for equations, or create a custom <code>mono</code> function. Keep in mind then that <code>raw</code> only accepts strings as arguments, so you always need to wrap your monospaced text in quotation marks.</p>",
      "raw": "Monospaced math content created with `$mono(...)$` actually just uses the default math font, which contains its own monospaced characters. As it seems like you want to use a normal text font, which is not intended to be used for math content, it would probably make more sense to use `raw` blocks to create monospaced text. As the backtick syntax doesn't work in math mode, you need to either call `#raw` explicitly, or temporarily switch to code mode with a `#`:\n\n```typ\n$ x + #raw(\"y\") = #`code` $\n```\n\n![image|175x48, 80%](upload://pko8HXKqeWn5wMpeTBf5iBZkx0A.png)\n\nWith this, you can then easily change the font via a show-set rule, though you may need to adjust the text size so it matches the surrounding text.\n```typ\n#show raw: set text(font: \"JetBrainsMono NF\")\n```\nIf this font should only be used for math, you can also either scope the show-set rule in a show rule for equations, or create a custom `mono` function. Keep in mind then that `raw` only accepts strings as arguments, so you always need to wrap your monospaced text in quotation marks.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 42,
      "score": 78.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:53:51.520108"
}
{
  "topic_metadata": {
    "id": 2002,
    "title": "How to create an exam header with rotated text?",
    "slug": "how-to-create-an-exam-header-with-rotated-text",
    "posts_count": 4,
    "created_at": "2024-12-06T08:06:48.698Z",
    "last_posted_at": "2024-12-09T15:27:03.740Z",
    "views": 198,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "layout",
      "graphics"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 733
  },
  "posts": [
    {
      "id": 6378,
      "post_number": 1,
      "username": "benabel",
      "name": "benjamin",
      "created_at": "2024-12-06T08:06:48.807Z",
      "updated_at": "2024-12-09T16:14:03.024Z",
      "cooked": "<p>I would like to create an exam header with rotated text like this image.<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/b/bb8598e1f99b98d62005dc18d6eb9292668787fd.png\" data-download-href=\"https://forum.typst.app/uploads/default/bb8598e1f99b98d62005dc18d6eb9292668787fd\" title=\"UCA-model-crop\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/b/bb8598e1f99b98d62005dc18d6eb9292668787fd_2_690x408.png\" alt=\"UCA-model-crop\" data-base62-sha1=\"qKTw5QGCxVEYwul09KOPlcNzy9f\" width=\"690\" height=\"408\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/b/bb8598e1f99b98d62005dc18d6eb9292668787fd_2_690x408.png, https://forum.typst.app/uploads/default/optimized/2X/b/bb8598e1f99b98d62005dc18d6eb9292668787fd_2_1035x612.png 1.5x, https://forum.typst.app/uploads/default/original/2X/b/bb8598e1f99b98d62005dc18d6eb9292668787fd.png 2x\" data-dominant-color=\"E9E9EA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">UCA-model-crop</span><span class=\"informations\">1222×723 711 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Currently I’m using a grid to create the header and an image on the right to achieve the rotated text, like this.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#grid(\n    columns: (1fr, 7cm),\n    // rows: (auto, 60pt),\n    gutter: 3cm,\n    \n    // titre\n    align(\n    left,\n    {\n      text(size: 16pt, weight: 700, \"Université Côte d'azur\")\n      linebreak()\n      text(size: large-size, weight: 400, \"Institut Universitaire de Technologie\")\n      linebreak()\n      underline(text(size: large-size, weight: 400, \"Département INFORMATIQUE\"))\n      linebreak()\n      v(20pt, weak: true)\n      text(size: large-size, weight: 700, \"Epreuve:\")\n      line(length: 100%)\n      linebreak()\n      text(size: footnote-size, \"Date\")\n      line(length: 100%)\n      rect(height: 2.5cm, width: 2.5cm,\"NOTE\")\n      text(size: footnote-size, \"Nbre d'interacalaires: .........\")\n    },\n  ),\n     image(\"UCA-coin.png\")\n    \n  ))\n\n</code></pre>\n<p>Is it possible to create the rotated text and corner directly in typst for consistency. If necessary cetz can be used.</p>",
      "raw": "I would like to create an exam header with rotated text like this image.\n![UCA-model-crop|690x408](upload://qKTw5QGCxVEYwul09KOPlcNzy9f.png)\n\n\nCurrently I'm using a grid to create the header and an image on the right to achieve the rotated text, like this.\n\n```typ\n#grid(\n    columns: (1fr, 7cm),\n    // rows: (auto, 60pt),\n    gutter: 3cm,\n    \n    // titre\n    align(\n    left,\n    {\n      text(size: 16pt, weight: 700, \"Université Côte d'azur\")\n      linebreak()\n      text(size: large-size, weight: 400, \"Institut Universitaire de Technologie\")\n      linebreak()\n      underline(text(size: large-size, weight: 400, \"Département INFORMATIQUE\"))\n      linebreak()\n      v(20pt, weak: true)\n      text(size: large-size, weight: 700, \"Epreuve:\")\n      line(length: 100%)\n      linebreak()\n      text(size: footnote-size, \"Date\")\n      line(length: 100%)\n      rect(height: 2.5cm, width: 2.5cm,\"NOTE\")\n      text(size: footnote-size, \"Nbre d'interacalaires: .........\")\n    },\n  ),\n     image(\"UCA-coin.png\")\n    \n  ))\n\n```\n\nIs it possible to create the rotated text and corner directly in typst for consistency. If necessary cetz can be used.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 469.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 895
    },
    {
      "id": 6379,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-12-06T08:26:18.786Z",
      "updated_at": "2024-12-06T08:56:57.515Z",
      "cooked": "<p>Bonjour <a class=\"mention\" href=\"/u/benabel\">@benabel</a>! Welcome <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\">!</p>\n<p>It is possible to rotate any content using … <a href=\"https://typst.app/docs/reference/layout/rotate/\"><code>rotate</code></a>!</p>\n<p>By tweaking the <code>origin</code> parameter, you will be able to obtain the following result after moving the content slightly</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let large-size = 12pt\n#let footnote-size = 8pt\n#grid(\n    columns: (1fr, 7cm),\n    // rows: (auto, 60pt),\n    gutter: 3cm,\n    \n    // titre\n    align(\n    left,\n    {\n      text(size: 16pt, weight: 700, \"Université Côte d'azur\")\n      linebreak()\n      text(size: large-size, weight: 400, \"Institut Universitaire de Technologie\")\n      linebreak()\n      underline(text(size: large-size, weight: 400, \"Département INFORMATIQUE\"))\n      linebreak()\n      v(20pt, weak: true)\n      text(size: large-size, weight: 700, \"Epreuve:\")\n      line(length: 100%)\n      linebreak()\n      text(size: footnote-size, \"Date\")\n      line(length: 100%)\n      rect(height: 2.5cm, width: 2.5cm,\"NOTE\")\n      text(size: footnote-size, \"Nbre d'interacalaires: .........\")\n    },\n  ),\n  rect(\n    rotate(\n      45deg,\n      move(dx: -1.5em, dy: 3em, {\n        set align(center)\n        [Semestre : ]\n        box(line(length: 5em))\n        h(1em)\n        [Groupe : ]\n        box(line(length: 5em))\n        \n        parbreak()\n        [Nom : ]\n        box(line(length: 6cm))\n\n        parbreak()\n        [Prénom : ]\n        box(line(length: 5cm))\n\n        parbreak()\n        text(size: .8em)[_Aucun signe distinctif\\ ne doit figurer\\ en dehors de ce cadre_]\n      }),\n      origin: bottom + left\n    ),\n    stroke: 1pt + black,\n    width: 8cm,\n  height: 8cm\n  )\n))\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/58b294d780fa11871628b0ac128dc1792e6987bb.png\" data-download-href=\"https://forum.typst.app/uploads/default/58b294d780fa11871628b0ac128dc1792e6987bb\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/58b294d780fa11871628b0ac128dc1792e6987bb_2_690x402.png\" alt=\"image\" data-base62-sha1=\"cEECPxVhBZcQuKLJw7fqYH7TT2b\" width=\"690\" height=\"402\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/58b294d780fa11871628b0ac128dc1792e6987bb_2_690x402.png, https://forum.typst.app/uploads/default/original/2X/5/58b294d780fa11871628b0ac128dc1792e6987bb.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/58b294d780fa11871628b0ac128dc1792e6987bb.png 2x\" data-dominant-color=\"F8F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">901×526 44.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>As for the corner, I suggest to take a look at <a href=\"https://typst.app/docs/reference/visualize/pattern/\"><code>pattern</code></a>. After creating that pattern, you can use it to fill a triangle using <a href=\"https://typst.app/docs/reference/visualize/polygon/\"><code>polygon</code></a>. Placing the content then is the same as previously: move + rotate.</p>\n<p>As a starting point, you can try this pattern</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#{\n  let pat = pattern(\n    size: (7.0pt, 7.0pt),\n    relative: \"parent\",\n    spacing: (0pt, 0pt),\n    place(\n      dx: 1pt,\n      dy: 1pt,\n      rotate(45deg, origin: center, square(\n        size: 5pt,\n        fill: black,\n      )),\n    ),\n  )\n  \n  rect(fill: pat, width: 8cm, height: 8cm)\n}\n</code></pre>\n<p>Don’t hesitate to make sure your example is <strong>reproducible</strong> before posting! You can read more tips at <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>.</p>",
      "raw": "Bonjour @benabel! Welcome :smiley:!\n\nIt is possible to rotate any content using ... [`rotate`](https://typst.app/docs/reference/layout/rotate/)!\n\nBy tweaking the `origin` parameter, you will be able to obtain the following result after moving the content slightly\n\n```typ\n#let large-size = 12pt\n#let footnote-size = 8pt\n#grid(\n    columns: (1fr, 7cm),\n    // rows: (auto, 60pt),\n    gutter: 3cm,\n    \n    // titre\n    align(\n    left,\n    {\n      text(size: 16pt, weight: 700, \"Université Côte d'azur\")\n      linebreak()\n      text(size: large-size, weight: 400, \"Institut Universitaire de Technologie\")\n      linebreak()\n      underline(text(size: large-size, weight: 400, \"Département INFORMATIQUE\"))\n      linebreak()\n      v(20pt, weak: true)\n      text(size: large-size, weight: 700, \"Epreuve:\")\n      line(length: 100%)\n      linebreak()\n      text(size: footnote-size, \"Date\")\n      line(length: 100%)\n      rect(height: 2.5cm, width: 2.5cm,\"NOTE\")\n      text(size: footnote-size, \"Nbre d'interacalaires: .........\")\n    },\n  ),\n  rect(\n    rotate(\n      45deg,\n      move(dx: -1.5em, dy: 3em, {\n        set align(center)\n        [Semestre : ]\n        box(line(length: 5em))\n        h(1em)\n        [Groupe : ]\n        box(line(length: 5em))\n        \n        parbreak()\n        [Nom : ]\n        box(line(length: 6cm))\n\n        parbreak()\n        [Prénom : ]\n        box(line(length: 5cm))\n\n        parbreak()\n        text(size: .8em)[_Aucun signe distinctif\\ ne doit figurer\\ en dehors de ce cadre_]\n      }),\n      origin: bottom + left\n    ),\n    stroke: 1pt + black,\n    width: 8cm,\n  height: 8cm\n  )\n))\n```\n![image|690x402](upload://cEECPxVhBZcQuKLJw7fqYH7TT2b.png)\n\nAs for the corner, I suggest to take a look at [`pattern`](https://typst.app/docs/reference/visualize/pattern/). After creating that pattern, you can use it to fill a triangle using [`polygon`](https://typst.app/docs/reference/visualize/polygon/). Placing the content then is the same as previously: move + rotate.\n\nAs a starting point, you can try this pattern\n\n```typ\n#{\n  let pat = pattern(\n    size: (7.0pt, 7.0pt),\n    relative: \"parent\",\n    spacing: (0pt, 0pt),\n    place(\n      dx: 1pt,\n      dy: 1pt,\n      rotate(45deg, origin: center, square(\n        size: 5pt,\n        fill: black,\n      )),\n    ),\n  )\n  \n  rect(fill: pat, width: 8cm, height: 8cm)\n}\n```\n\nDon't hesitate to make sure your example is **reproducible** before posting! You can read more tips at https://forum.typst.app/t/how-to-post-in-the-questions-category/11.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 45,
      "score": 38.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 6445,
      "post_number": 3,
      "username": "benabel",
      "name": "benjamin",
      "created_at": "2024-12-09T15:22:06.318Z",
      "updated_at": "2024-12-09T16:14:18.659Z",
      "cooked": "<p>Thank you very much <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a>, no need for cetz. I added the pattern based on your direction using <code>place(top, polygon(..., pattern)</code>.</p>\n<p>Here is the full mwe for my layout.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let large-size = 12pt\n#let footnote-size = 8pt\n#grid(\n    columns: (1fr, 8cm),\n    gutter: 3cm,\n    // titre\n    align(\n    left,\n    {\n      text(size: 16pt, weight: 700, \"Université Côte d'azur\")\n      linebreak()\n      text(size: large-size, weight: 400, \"Institut Universitaire de Technologie\")\n      linebreak()\n      underline(text(size: large-size, weight: 400, \"Département INFORMATIQUE\"))\n      linebreak()\n      v(20pt, weak: true)\n      text(size: large-size, weight: 700, \"Epreuve:\")\n      line(length: 100%)\n      linebreak()\n      text(size: footnote-size, \"Date\")\n      line(length: 100%)\n      rect(height: 2.5cm, width: 2.5cm,\"NOTE\")\n      text(size: footnote-size, \"Nbre d'interacalaires: .........\")\n    },\n  ),\n  {\nrect(\n    rotate(\n      45deg,\n      move(dx: -1.5em, dy: 3em, {\n        set align(center)\n        [Semestre : ]\n        box(line(length: 5em))\n        h(1em)\n        [Groupe : ]\n        box(line(length: 5em))\n\n        parbreak()\n        [Nom : ]\n        box(line(length: 6cm))\n\n        parbreak()\n        [Prénom : ]\n        box(line(length: 5cm))\n\n        parbreak()\n        text(size: .8em)[_Aucun signe distinctif\\ ne doit figurer\\ en dehors de ce cadre_]\n      }),\n      origin: bottom + left\n    ),\n    stroke: 3pt + black,\n    width: 8cm,\n    height: 8cm,\n)\n  place(top, polygon(\n  fill: pattern(\n  size: (7.0pt, 7.0pt),\n  relative: \"parent\",\n  spacing: (0pt, 0pt),\n  place(\n    dx: 1pt,\n    dy: 1pt,\n    rotate(\n      45deg,\n      origin: center,\n      square(\n        size: 5pt,\n        fill: luma(40%),\n      ),\n    ),\n  ),\n),\n  (17pt, 17pt),\n  (8cm-17pt, 17pt),\n  (8cm-17pt, 8cm-17pt)\n  ))\n}\n)\n\n</code></pre>\n<p>That renders like the desired output.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/ed9f85bd64d9c0f4e04be4710bf95262d3e10634.png\" data-download-href=\"https://forum.typst.app/uploads/default/ed9f85bd64d9c0f4e04be4710bf95262d3e10634\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/ed9f85bd64d9c0f4e04be4710bf95262d3e10634_2_690x342.png\" alt=\"image\" data-base62-sha1=\"xU6W0RiXCU42w8ozXcFXVz1ccAY\" width=\"690\" height=\"342\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/ed9f85bd64d9c0f4e04be4710bf95262d3e10634_2_690x342.png, https://forum.typst.app/uploads/default/original/2X/e/ed9f85bd64d9c0f4e04be4710bf95262d3e10634.png 1.5x, https://forum.typst.app/uploads/default/original/2X/e/ed9f85bd64d9c0f4e04be4710bf95262d3e10634.png 2x\" data-dominant-color=\"EBEBEB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">838×416 98.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Thank you very much @quachpas, no need for cetz. I added the pattern based on your direction using `place(top, polygon(..., pattern)`.\n\nHere is the full mwe for my layout.\n\n```typ\n#let large-size = 12pt\n#let footnote-size = 8pt\n#grid(\n    columns: (1fr, 8cm),\n    gutter: 3cm,\n    // titre\n    align(\n    left,\n    {\n      text(size: 16pt, weight: 700, \"Université Côte d'azur\")\n      linebreak()\n      text(size: large-size, weight: 400, \"Institut Universitaire de Technologie\")\n      linebreak()\n      underline(text(size: large-size, weight: 400, \"Département INFORMATIQUE\"))\n      linebreak()\n      v(20pt, weak: true)\n      text(size: large-size, weight: 700, \"Epreuve:\")\n      line(length: 100%)\n      linebreak()\n      text(size: footnote-size, \"Date\")\n      line(length: 100%)\n      rect(height: 2.5cm, width: 2.5cm,\"NOTE\")\n      text(size: footnote-size, \"Nbre d'interacalaires: .........\")\n    },\n  ),\n  {\nrect(\n    rotate(\n      45deg,\n      move(dx: -1.5em, dy: 3em, {\n        set align(center)\n        [Semestre : ]\n        box(line(length: 5em))\n        h(1em)\n        [Groupe : ]\n        box(line(length: 5em))\n\n        parbreak()\n        [Nom : ]\n        box(line(length: 6cm))\n\n        parbreak()\n        [Prénom : ]\n        box(line(length: 5cm))\n\n        parbreak()\n        text(size: .8em)[_Aucun signe distinctif\\ ne doit figurer\\ en dehors de ce cadre_]\n      }),\n      origin: bottom + left\n    ),\n    stroke: 3pt + black,\n    width: 8cm,\n    height: 8cm,\n)\n  place(top, polygon(\n  fill: pattern(\n  size: (7.0pt, 7.0pt),\n  relative: \"parent\",\n  spacing: (0pt, 0pt),\n  place(\n    dx: 1pt,\n    dy: 1pt,\n    rotate(\n      45deg,\n      origin: center,\n      square(\n        size: 5pt,\n        fill: luma(40%),\n      ),\n    ),\n  ),\n),\n  (17pt, 17pt),\n  (8cm-17pt, 17pt),\n  (8cm-17pt, 8cm-17pt)\n  ))\n}\n)\n\n```\n\nThat renders like the desired output.\n\n![image|690x342](upload://xU6W0RiXCU42w8ozXcFXVz1ccAY.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 24.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 895
    },
    {
      "id": 6446,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-12-09T15:27:03.740Z",
      "updated_at": "2024-12-09T15:27:03.740Z",
      "cooked": "<p>That’s great!</p>\n<p>Just a note, if you want text and a line on the same line, then you can try for example.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#text(size: footnote-size, \"Date: \")\n#box(line(length: 85%))\n</code></pre>",
      "raw": "That's great!\n\nJust a note, if you want text and a line on the same line, then you can try for example.\n```typ\n#text(size: footnote-size, \"Date: \")\n#box(line(length: 85%))\n```",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 4.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:53:50.620729"
}
{
  "topic_metadata": {
    "id": 2018,
    "title": "How to generate a multilevel list from a data structure?",
    "slug": "how-to-generate-a-multilevel-list-from-a-data-structure",
    "posts_count": 3,
    "created_at": "2024-12-07T16:46:33.112Z",
    "last_posted_at": "2024-12-07T22:25:20.846Z",
    "views": 295,
    "like_count": 4,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Eric",
    "tags": [
      "scripting",
      "layout",
      "lists",
      "data-loading"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 659
  },
  "posts": [
    {
      "id": 6404,
      "post_number": 1,
      "username": "wnhrt",
      "name": "Niklas",
      "created_at": "2024-12-07T16:46:33.600Z",
      "updated_at": "2024-12-09T07:44:24.947Z",
      "cooked": "<p>Is there a method to create a multilevel list from a data structure, e.g. a JSON file?</p>\n<p>If I got this JSON file</p>\n<pre data-code-wrap=\"json\"><code class=\"lang-json\">{\n\t\"information\": [\n\t\t\"First point\",\n\t\t\"Second point\",\n\t\t[\n\t\t\t\"First subpoint\"\n\t\t],\n\t\t\"Third point\",\n\t\t[\n\t\t\t\"Second subpoint\",\n\t\t\t[\n\t\t\t\t\"First subsubpoint\"\n\t\t\t],\n\t\t]\n\t]\n}\n</code></pre>\n<p>I want it to be formated like this</p>\n<ul>\n<li>First point</li>\n<li>Second point\n<ul>\n<li>First subpoint</li>\n</ul>\n</li>\n<li>Third point\n<ul>\n<li>Second subpoint\n<ul>\n<li>First subsubpoint</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>The closest I got was with this</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let list_recursive(data, level: 0pt) = {\n\tfor item in data {\n\t\tif type(item) == array {\n\t\t\tlist_recursive(item, level: level+10pt)\n\t\t} else {\n\t\t\tlist(item, indent: level)\n\t\t}\n\t}\n}\n\n#let data = json(\"file.json\")\n#list_recursive(data.information)\n</code></pre>\n<p>but then all bullet points are separate lists with a single first level bullet point.</p>\n<p>Apparently there is a hidden <code>depth</code> field, which is not accessible to users: <a href=\"https://github.com/typst/typst/issues/4520#issuecomment-2221403490\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Add level field to bullet list items for easier format and style minipulation · Issue #4520 · typst/typst · GitHub</a></p>",
      "raw": "Is there a method to create a multilevel list from a data structure, e.g. a JSON file?\n\nIf I got this JSON file\n\n```json\n{\n\t\"information\": [\n\t\t\"First point\",\n\t\t\"Second point\",\n\t\t[\n\t\t\t\"First subpoint\"\n\t\t],\n\t\t\"Third point\",\n\t\t[\n\t\t\t\"Second subpoint\",\n\t\t\t[\n\t\t\t\t\"First subsubpoint\"\n\t\t\t],\n\t\t]\n\t]\n}\n```\n\nI want it to be formated like this\n\n* First point\n* Second point\n  * First subpoint\n* Third point\n  * Second subpoint\n    * First subsubpoint\n\nThe closest I got was with this\n\n\n```typ\n#let list_recursive(data, level: 0pt) = {\n\tfor item in data {\n\t\tif type(item) == array {\n\t\t\tlist_recursive(item, level: level+10pt)\n\t\t} else {\n\t\t\tlist(item, indent: level)\n\t\t}\n\t}\n}\n\n#let data = json(\"file.json\")\n#list_recursive(data.information)\n```\n\nbut then all bullet points are separate lists with a single first level bullet point.\n\nApparently there is a hidden `depth` field, which is not accessible to users: https://github.com/typst/typst/issues/4520#issuecomment-2221403490",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 1121.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 901
    },
    {
      "id": 6412,
      "post_number": 2,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-12-07T18:26:30.721Z",
      "updated_at": "2024-12-07T18:26:30.721Z",
      "cooked": "<p>TMI below, sorry. This is a fun puzzle (for my simple mind at least) and a worthwhile question. There’s a few things upfront that could be hindering your approach: (1) the elements of lists are <code>item</code>s (accessed with <code>list.item</code>), so if you want just one list, that will be the way to go. (2) Making a single list with indentations requires nesting of <code>item</code>s, and doing so will take care of indentation automatically.</p>\n<p>One issue that I didn’t see coming when thinking about this comes from the structure of <code>list</code>s in Typst. For example, this code…</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#repr[\n- First point\n- Second point\n    - First subpoint\n]\n</code></pre>\n<p>… shows the underlying structure of lists:</p>\n<pre data-code-wrap=\"txt\"><code class=\"lang-txt\">sequence(\n  [ ],\n  item(body: [First point]), \n  [ ],\n  item(body: sequence(\n    [Second point],\n    [ ], \n    item(body: [First subpoint])\n  ),),\n  [ ],\n)\n</code></pre>\n<p>As seen here, when a list item is followed by an increase in indentation (aka a sublist), its <code>item</code> object is the parent to the sublist as well (see <code>[Second point]</code>). Therefore, in order to code this correctly, one needs to check if the item in the <code>json</code> data structure is followed by an array. This means that simple element-wise iteration with a recursive function is not an option here.</p>\n<p>To work around this, you might be interested in using only objects, not arrays, in your <code>json</code> file, like this:</p>\n<pre data-code-wrap=\"json\"><code class=\"lang-json\">{\n\t\"information\": {\n\t\t\"First point\": null,\n\t\t\"Second point\": {\"First subpoint\": null},\n\t\t\"Third point\": {\"Second subpoint\": {\"First subsubpoint\": null}}\n}\n</code></pre>\n<p>… then pure recursion could be used. But this format is somewhat ugly and tedius, with the <code>null</code>s required when there are no children. So, I came up with the approach below to work with your original json file instead, which starts by converting the data to a dictionary, and then using recursion.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let data = json(\"file.json\").at(\"information\")\n\n#let array_to_dict(data) = {\n  let dict = (:)\n  let final_indx = data.len() - 1\n  for (indx, item) in data.enumerate() {\n    if type(item) == array {continue}\n    if indx == final_indx or type(data.at(indx + 1)) != array {\n      dict.insert(item, none)\n    } else {\n      dict.insert(item, array_to_dict(data.at(indx + 1)))\n    }\n  }\n  return dict\n}\n\n#let list_recursive(dict_data) = {\n  for (key, val) in dict_data.pairs() {\n    if val == none {\n      list.item(key)\n    } else {\n      list.item[#key #list_recursive(val)]\n    }\n  }\n}\n\n#let data_to_list(array_data) = {\n  let dict_data = array_to_dict(array_data)\n  list_recursive(dict_data)\n}\n\n\n= Original array data\n#data\n= Original array data to dict data\n#array_to_dict(data)\n= Original array data to list\n#data_to_list(data)\n</code></pre>",
      "raw": "TMI below, sorry. This is a fun puzzle (for my simple mind at least) and a worthwhile question. There's a few things upfront that could be hindering your approach: (1) the elements of lists are `item`s (accessed with `list.item`), so if you want just one list, that will be the way to go. (2) Making a single list with indentations requires nesting of `item`s, and doing so will take care of indentation automatically.\n\nOne issue that I didn't see coming when thinking about this comes from the structure of `list`s in Typst. For example, this code...\n```typst\n#repr[\n- First point\n- Second point\n    - First subpoint\n]\n```\n... shows the underlying structure of lists:\n```txt\nsequence(\n  [ ],\n  item(body: [First point]), \n  [ ],\n  item(body: sequence(\n    [Second point],\n    [ ], \n    item(body: [First subpoint])\n  ),),\n  [ ],\n)\n```\n\nAs seen here, when a list item is followed by an increase in indentation (aka a sublist), its `item` object is the parent to the sublist as well (see `[Second point]`). Therefore, in order to code this correctly, one needs to check if the item in the `json` data structure is followed by an array. This means that simple element-wise iteration with a recursive function is not an option here. \n\nTo work around this, you might be interested in using only objects, not arrays, in your `json` file, like this: \n```json\n{\n\t\"information\": {\n\t\t\"First point\": null,\n\t\t\"Second point\": {\"First subpoint\": null},\n\t\t\"Third point\": {\"Second subpoint\": {\"First subsubpoint\": null}}\n}\n```\n... then pure recursion could be used. But this format is somewhat ugly and tedius, with the `null`s required when there are no children. So, I came up with the approach below to work with your original json file instead, which starts by converting the data to a dictionary, and then using recursion.\n\n```typst\n#let data = json(\"file.json\").at(\"information\")\n\n#let array_to_dict(data) = {\n  let dict = (:)\n  let final_indx = data.len() - 1\n  for (indx, item) in data.enumerate() {\n    if type(item) == array {continue}\n    if indx == final_indx or type(data.at(indx + 1)) != array {\n      dict.insert(item, none)\n    } else {\n      dict.insert(item, array_to_dict(data.at(indx + 1)))\n    }\n  }\n  return dict\n}\n\n#let list_recursive(dict_data) = {\n  for (key, val) in dict_data.pairs() {\n    if val == none {\n      list.item(key)\n    } else {\n      list.item[#key #list_recursive(val)]\n    }\n  }\n}\n\n#let data_to_list(array_data) = {\n  let dict_data = array_to_dict(array_data)\n  list_recursive(dict_data)\n}\n\n\n= Original array data\n#data\n= Original array data to dict data\n#array_to_dict(data)\n= Original array data to list\n#data_to_list(data)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 31.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 177
    },
    {
      "id": 6414,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-12-07T22:25:20.846Z",
      "updated_at": "2024-12-07T22:26:22.851Z",
      "cooked": "<p>A simple recursive solution is still possible. As you can see in the structure shown in <a class=\"mention\" href=\"/u/miles-1\">@miles-1</a>’s reply, sublists are attached to the previous list item. Therefore, you just need to append the sublist to the previous item’s body instead of creating a new one. You also don’t need to explicitly construct a list, as it is created implicitly from the list items.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let to-list(arr) = {\n  arr.fold((), (items, curr) =&gt; {\n    // If the current entry is an array, append a new sublist to\n    // the last item. Otherwise, create a new list item.\n    if type(curr) == array { items.at(-1) += to-list(curr) }\n    else { items.push(curr) }\n    items\n  }).map(list.item).join()\n}\n\n#let data = json(\"file.json\")\n#to-list(data.information)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/b/bb05b757e0a66c254b0031843a48833c1fb9c59a.png\" alt=\"image\" data-base62-sha1=\"qGtx65LdNuMetsznzBLuuEtua0i\" width=\"199\" height=\"142\"></p>",
      "raw": "A simple recursive solution is still possible. As you can see in the structure shown in @miles-1's reply, sublists are attached to the previous list item. Therefore, you just need to append the sublist to the previous item's body instead of creating a new one. You also don't need to explicitly construct a list, as it is created implicitly from the list items.\n\n```typ\n#let to-list(arr) = {\n  arr.fold((), (items, curr) => {\n    // If the current entry is an array, append a new sublist to\n    // the last item. Otherwise, create a new list item.\n    if type(curr) == array { items.at(-1) += to-list(curr) }\n    else { items.push(curr) }\n    items\n  }).map(list.item).join()\n}\n\n#let data = json(\"file.json\")\n#to-list(data.information)\n```\n\n![image|199x142](upload://qGtx65LdNuMetsznzBLuuEtua0i.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 27,
      "score": 115.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:53:49.911330"
}
{
  "topic_metadata": {
    "id": 2021,
    "title": "How to correctly display page numbering in a custom footer (with and without total number of pages)?",
    "slug": "how-to-correctly-display-page-numbering-in-a-custom-footer-with-and-without-total-number-of-pages",
    "posts_count": 2,
    "created_at": "2024-12-07T18:05:06.581Z",
    "last_posted_at": "2024-12-07T22:58:48.919Z",
    "views": 681,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 567
  },
  "posts": [
    {
      "id": 6409,
      "post_number": 1,
      "username": "danny",
      "name": "Danny",
      "created_at": "2024-12-07T18:05:06.738Z",
      "updated_at": "2024-12-08T12:15:27.295Z",
      "cooked": "<p>I’m trying to add a variable to my template where the user can set a custom page numbering schema (<a href=\"https://github.com/DannySeidel/typst-dhbw-template/issues/18\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Customize Page Numbering Format · Issue #18 · DannySeidel/typst-dhbw-template · GitHub</a>). Due to the template using multiple different numbering styles, I want to enable the user to customize all sections.</p>\n<p>I have a preface part that uses Roman numbering like this <code>I</code>. After that, the template shows the main part, which uses Arabic numbering like this <code>1 / 1</code>. Lastly, the template uses Latin letters for the appendix section like this <code>a</code>. Because the main section provides the total number of pages, I had to define a custom footer because the page counter does not provide the number of pages at a specific point in the document.</p>\n<p>Currently, I create the footer as shown below:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">  set page(footer: context align(\n    numbering-alignment,\n    numbering(\n     \"1 / 1\",\n      ..counter(page).get(),\n      ..counter(page).at(&lt;numbering-main-end&gt;),\n    ),\n  ))\n</code></pre>\n<p>By using <code>counter(page).at(&lt;numbering-main-end&gt;)</code>, I get the number of pages at this label. Because the user should be able to set the style for all three sections, I have now created labels at the end of all three sections. The problem is that if the user defines a style that does not contain the total number of pages, I still pass in the counter, and the number is still displayed. If I leave out the total count and the user defines a style with the total number of pages displayed, the total number of pages is shown as 1, as the data is missing.</p>\n<p>How would I solve this problem? Maybe I could conditionally pass in the total number of pages only if it is needed? But how?</p>",
      "raw": "I'm trying to add a variable to my template where the user can set a custom page numbering schema (https://github.com/DannySeidel/typst-dhbw-template/issues/18). Due to the template using multiple different numbering styles, I want to enable the user to customize all sections.\n\nI have a preface part that uses Roman numbering like this `I`. After that, the template shows the main part, which uses Arabic numbering like this `1 / 1`. Lastly, the template uses Latin letters for the appendix section like this `a`. Because the main section provides the total number of pages, I had to define a custom footer because the page counter does not provide the number of pages at a specific point in the document.\n\nCurrently, I create the footer as shown below:\n```typ\n  set page(footer: context align(\n    numbering-alignment,\n    numbering(\n     \"1 / 1\",\n      ..counter(page).get(),\n      ..counter(page).at(<numbering-main-end>),\n    ),\n  ))\n```\n\nBy using `counter(page).at(<numbering-main-end>)`, I get the number of pages at this label. Because the user should be able to set the style for all three sections, I have now created labels at the end of all three sections. The problem is that if the user defines a style that does not contain the total number of pages, I still pass in the counter, and the number is still displayed. If I leave out the total count and the user defines a style with the total number of pages displayed, the total number of pages is shown as 1, as the data is missing.\n\nHow would I solve this problem? Maybe I could conditionally pass in the total number of pages only if it is needed? But how?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 3519.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 903
    },
    {
      "id": 6415,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-12-07T22:58:48.919Z",
      "updated_at": "2024-12-07T23:00:49.199Z",
      "cooked": "<p>Typst internally already <a href=\"https://github.com/typst/typst/blob/0228462ba10397468b3c0937e2e9cd1d3118e0fc/crates/typst-layout/src/pages/run.rs#L146\" rel=\"noopener nofollow ugc\">handles</a> this case for the default footer (or header) by checking if the given numbering pattern has two or more <a href=\"https://typst.app/docs/reference/model/numbering#:~:text=Counting%20symbols%20are%201%2C%20a%2C%20A%2C%20i%2C%20I%2C%20%E4%B8%80%2C%20%E5%A3%B9%2C%20%E3%81%82%2C%20%E3%81%84%2C%20%E3%82%A2%2C%20%E3%82%A4%2C%20%D7%90%2C%20%EA%B0%80%2C%20%E3%84%B1%2C%20*%2C%20%E2%91%A0%2C%20and%20%E2%93%B5.%20They%20are%20replaced%20by%20the%20number%20in%20the%20sequence%2C%20preserving%20the%20original%20case\">counting symbols</a>. You can apply the same logic manually in your footer:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(footer: context {\n  // Handle the case when page.numbering is not set by\n  // falling back to the default \"1\" numbering pattern.\n  let page-numbering = page.numbering\n  if page-numbering == none { page-numbering = \"1\" }\n\n  let both = type(page-numbering) == function or {\n    page-numbering.clusters().filter(c =&gt; c in (\n      // Counting symbols: https://typst.app/docs/reference/model/numbering\n      \"1\", \"a\", \"A\", \"i\", \"I\", \"α\", \"Α\", \"*\",\n      \"א\", \"一\", \"壹\", \"あ\", \"い\", \"ア\", \"イ\", \"ㄱ\",\n      \"가\", \"\\u{0661}\", \"\\u{06F1}\", \"\\u{0967}\",\n      \"\\u{09E7}\", \"\\u{0995}\", \"①\", \"⓵\"\n    )).len() &gt;= 2\n  }\n\n  numbering(\n    page-numbering,\n    ..counter(page).get(),\n    ..if both { counter(page).at(&lt;numbering-main-end&gt;) }\n  )\n})\n</code></pre>\n<p>Note that I have already included the counting symbols that are not released yet (as of v0.12.0) but are part of current development builds. They are not shown in the documentation yet, but can be retrieved from the source code.</p>",
      "raw": "Typst internally already [handles](https://github.com/typst/typst/blob/0228462ba10397468b3c0937e2e9cd1d3118e0fc/crates/typst-layout/src/pages/run.rs#L146) this case for the default footer (or header) by checking if the given numbering pattern has two or more [counting symbols](https://typst.app/docs/reference/model/numbering#:~:text=Counting%20symbols%20are%201%2C%20a%2C%20A%2C%20i%2C%20I%2C%20%E4%B8%80%2C%20%E5%A3%B9%2C%20%E3%81%82%2C%20%E3%81%84%2C%20%E3%82%A2%2C%20%E3%82%A4%2C%20%D7%90%2C%20%EA%B0%80%2C%20%E3%84%B1%2C%20*%2C%20%E2%91%A0%2C%20and%20%E2%93%B5.%20They%20are%20replaced%20by%20the%20number%20in%20the%20sequence%2C%20preserving%20the%20original%20case). You can apply the same logic manually in your footer:\n\n```typ\n#set page(footer: context {\n  // Handle the case when page.numbering is not set by\n  // falling back to the default \"1\" numbering pattern.\n  let page-numbering = page.numbering\n  if page-numbering == none { page-numbering = \"1\" }\n\n  let both = type(page-numbering) == function or {\n    page-numbering.clusters().filter(c => c in (\n      // Counting symbols: https://typst.app/docs/reference/model/numbering\n      \"1\", \"a\", \"A\", \"i\", \"I\", \"α\", \"Α\", \"*\",\n      \"א\", \"一\", \"壹\", \"あ\", \"い\", \"ア\", \"イ\", \"ㄱ\",\n      \"가\", \"\\u{0661}\", \"\\u{06F1}\", \"\\u{0967}\",\n      \"\\u{09E7}\", \"\\u{0995}\", \"①\", \"⓵\"\n    )).len() >= 2\n  }\n\n  numbering(\n    page-numbering,\n    ..counter(page).get(),\n    ..if both { counter(page).at(<numbering-main-end>) }\n  )\n})\n```\nNote that I have already included the counting symbols that are not released yet (as of v0.12.0) but are part of current development builds. They are not shown in the documentation yet, but can be retrieved from the source code.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 128.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:53:49.220291"
}
{
  "topic_metadata": {
    "id": 2026,
    "title": "Cetz Plot: How can I reduce grid padding?",
    "slug": "cetz-plot-how-can-i-reduce-grid-padding",
    "posts_count": 2,
    "created_at": "2024-12-08T16:01:30.117Z",
    "last_posted_at": "2024-12-08T18:54:11.767Z",
    "views": 224,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout",
      "graphics",
      "cetz"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 298
  },
  "posts": [
    {
      "id": 6422,
      "post_number": 1,
      "username": "eee",
      "name": "Elena",
      "created_at": "2024-12-08T16:01:30.298Z",
      "updated_at": "2024-12-08T16:01:30.298Z",
      "cooked": "<p>Is it possible to make it so that the arrows from the axes go just a little bit beyond the limits? Like the red x-axis that I drew.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/6da2cb99d2924436d6b69bdb7aca923d0a5103d7.png\" data-download-href=\"https://forum.typst.app/uploads/default/6da2cb99d2924436d6b69bdb7aca923d0a5103d7\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/6/6da2cb99d2924436d6b69bdb7aca923d0a5103d7_2_540x500.png\" alt=\"image\" data-base62-sha1=\"fDSPyNPdmWWPoH2rU3KySuFoTuD\" width=\"540\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/6/6da2cb99d2924436d6b69bdb7aca923d0a5103d7_2_540x500.png, https://forum.typst.app/uploads/default/original/2X/6/6da2cb99d2924436d6b69bdb7aca923d0a5103d7.png 1.5x, https://forum.typst.app/uploads/default/original/2X/6/6da2cb99d2924436d6b69bdb7aca923d0a5103d7.png 2x\" data-dominant-color=\"F8F5F5\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">698×646 33 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.1\": canvas, draw\n#import \"@preview/cetz-plot:0.1.0\": plot\n\n\n#let f(x) = {(x)}\n\n#set text(size: 5pt)\n\n\n#canvas(length: 0.7cm, {\n  import draw: *\n  \n  set-style(\n    axes: ( stroke: .5pt, inset: 0pt,  tick: (length: 0,stroke: .5pt, label: (offset: 2pt)), grid: (stroke: gray + .3pt, padding: 0pt)), legend: (padding: 0pt,),\n  )\n  plot.plot(\n    size: (4, 4),\n    plot-style: (stroke: black + 0.6pt,),\n    axis-style: \"school-book\",\n    legend-style: (length: 0),\n    y-tick-step: 1,\n    x-tick-step: 1,\n    y-equal: \"x\",\n    x-grid: true,\n    y-grid: true,\n    {\n      plot.add(f, domain: (-4,4),)\n    }\n  )\n}) ```</code></pre>",
      "raw": "Is it possible to make it so that the arrows from the axes go just a little bit beyond the limits? Like the red x-axis that I drew.\n\n![image|540x500](upload://fDSPyNPdmWWPoH2rU3KySuFoTuD.png)\n\n```typ \n#import \"@preview/cetz:0.3.1\": canvas, draw\n#import \"@preview/cetz-plot:0.1.0\": plot\n\n\n#let f(x) = {(x)}\n\n#set text(size: 5pt)\n\n\n#canvas(length: 0.7cm, {\n  import draw: *\n  \n  set-style(\n    axes: ( stroke: .5pt, inset: 0pt,  tick: (length: 0,stroke: .5pt, label: (offset: 2pt)), grid: (stroke: gray + .3pt, padding: 0pt)), legend: (padding: 0pt,),\n  )\n  plot.plot(\n    size: (4, 4),\n    plot-style: (stroke: black + 0.6pt,),\n    axis-style: \"school-book\",\n    legend-style: (length: 0),\n    y-tick-step: 1,\n    x-tick-step: 1,\n    y-equal: \"x\",\n    x-grid: true,\n    y-grid: true,\n    {\n      plot.add(f, domain: (-4,4),)\n    }\n  )\n}) ```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 908.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 904
    },
    {
      "id": 6425,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-12-08T18:54:11.767Z",
      "updated_at": "2024-12-08T18:58:58.772Z",
      "cooked": "<p>There are some style options in the <code>axes</code> dictionary for that, which you can adjust:</p>\n<ul>\n<li>\n<p><code>padding</code> – How much the axis lines should reach outside the plot area on both sides. You can see this in your image, where the line goes outside the grid on the left and bottom. By default, it is set to <code>0.1cm</code>.</p>\n</li>\n<li>\n<p><code>overshoot</code> – Basically the same as <code>padding</code>, but only for the side with the arrow head (i.e. on the right or top). This value is added to the <code>padding</code> value, and defaults to <code>0.5cm</code>.</p>\n</li>\n<li>\n<p><code>mark</code> – Some style options to change the appearance of the arrow head. For example, you can make it smaller by changing the <code>length</code> or <code>width</code>. You can find more about mark styling in the <a href=\"https://cetz-package.github.io/docs/basics/marks\" rel=\"noopener nofollow ugc\">documentation</a> of CeTZ.</p>\n</li>\n</ul>\n<p>In total, that might then look like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#canvas({\n  import draw: *\n  \n  set-style(\n    axes: (\n      padding: 0pt,\n      overshoot: 6pt,\n      mark: (length: 3pt)\n      ...\n    ),\n    ...\n  )\n\n  plot.plot(...)\n})\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/4/4585c6b612b3389cb83206be72f81aa68ca8b9f2.png\" alt=\"image\" data-base62-sha1=\"9V1yHpIY0neAlqisrJjoEZFWSB4\" width=\"276\" height=\"277\"></p>",
      "raw": "There are some style options in the `axes` dictionary for that, which you can adjust:\n\n- `padding` -- How much the axis lines should reach outside the plot area on both sides. You can see this in your image, where the line goes outside the grid on the left and bottom. By default, it is set to `0.1cm`.\n\n- `overshoot` -- Basically the same as `padding`, but only for the side with the arrow head (i.e. on the right or top). This value is added to the `padding` value, and defaults to `0.5cm`.\n\n- `mark` -- Some style options to change the appearance of the arrow head. For example, you can make it smaller by changing the `length` or `width`. You can find more about mark styling in the [documentation](https://cetz-package.github.io/docs/basics/marks) of CeTZ.\n\nIn total, that might then look like this:\n```typ\n#canvas({\n  import draw: *\n  \n  set-style(\n    axes: (\n      padding: 0pt,\n      overshoot: 6pt,\n      mark: (length: 3pt)\n      ...\n    ),\n    ...\n  )\n\n  plot.plot(...)\n})\n```\n\n![image|346x347, 80%](upload://9V1yHpIY0neAlqisrJjoEZFWSB4.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 37,
      "score": 62.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:53:48.520406"
}
{
  "topic_metadata": {
    "id": 2030,
    "title": "How to import pdf files as images?",
    "slug": "how-to-import-pdf-files-as-images",
    "posts_count": 4,
    "created_at": "2024-12-08T22:04:24.439Z",
    "last_posted_at": "2024-12-09T18:03:48.649Z",
    "views": 196,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "quachpas",
    "tags": [
      "images"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 187
  },
  "posts": [
    {
      "id": 6428,
      "post_number": 1,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-12-08T22:04:24.579Z",
      "updated_at": "2024-12-09T07:47:56.984Z",
      "cooked": "<p>Hello!</p>\n<p>I have a lot of high quality content in pdf format. It is quite pointless to produce png’s of these, when I have a high quality vector scalable version.</p>\n<p>Is there any work around to allow for pdf as images, since the official version of typst is still not capable of doing this to my knowledge?</p>\n<p>Kind regards</p>",
      "raw": "Hello!\n\nI have a lot of high quality content in pdf format. It is quite pointless to produce png's of these, when I have a high quality vector scalable version.\n\nIs there any work around to allow for pdf as images, since the official version of typst is still not capable of doing this to my knowledge?\n\nKind regards",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 403.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    },
    {
      "id": 6432,
      "post_number": 2,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-12-09T03:26:46.516Z",
      "updated_at": "2024-12-09T03:26:46.516Z",
      "cooked": "<p>You might consider converting your pdfs into svgs. <a href=\"https://stackoverflow.com/questions/10288065/convert-pdf-to-clean-svg\" rel=\"noopener nofollow ugc\">Here</a> is an SO thread that would help you down that path.</p>",
      "raw": "You might consider converting your pdfs into svgs. [Here](https://stackoverflow.com/questions/10288065/convert-pdf-to-clean-svg) is an SO thread that would help you down that path.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 23.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 177
    },
    {
      "id": 6435,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-12-09T07:50:15.212Z",
      "updated_at": "2024-12-09T07:50:15.212Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/ahmedsalih\">@AhmedSalih</a>, I have renamed your post “How to import pdf files as images?”, please edit it if that’s wrong! Your post title should be a question, see <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>.</p>\n<p>You can track the issue here: <a href=\"https://github.com/typst/typst/issues/145\" class=\"inline-onebox\">Allow inserting PDFs as figures · Issue #145 · typst/typst · GitHub</a></p>",
      "raw": "Hello @AhmedSalih, I have renamed your post \"How to import pdf files as images?\", please edit it if that's wrong! Your post title should be a question, see https://forum.typst.app/t/how-to-post-in-the-questions-category/11.\n\nYou can track the issue here: https://github.com/typst/typst/issues/145",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 27.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 6447,
      "post_number": 4,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-12-09T18:03:48.649Z",
      "updated_at": "2024-12-09T18:03:48.649Z",
      "cooked": "<p>Thank you both for the inputs. That is quite disappointing though, but now I know at least. As soon as Typst gets that (if ever) it will increase professional use drastically, until then let us see.</p>\n<p>Atleast I know now</p>\n<p>Kind regards</p>",
      "raw": "Thank you both for the inputs. That is quite disappointing though, but now I know at least. As soon as Typst gets that (if ever) it will increase professional use drastically, until then let us see.\n\nAtleast I know now\n\nKind regards",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 21.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    }
  ],
  "scraped_at": "2025-06-10T09:53:47.800528"
}
{
  "topic_metadata": {
    "id": 2042,
    "title": "How to use `row-gap` in the `mat` function?",
    "slug": "how-to-use-row-gap-in-the-mat-function",
    "posts_count": 2,
    "created_at": "2024-12-10T12:09:33.736Z",
    "last_posted_at": "2024-12-10T12:37:32.376Z",
    "views": 44,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "gezepi",
    "tags": [
      "scripting",
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 169
  },
  "posts": [
    {
      "id": 6461,
      "post_number": 1,
      "username": "szsdk",
      "name": "szsdk",
      "created_at": "2024-12-10T12:09:33.873Z",
      "updated_at": "2024-12-10T12:09:33.873Z",
      "cooked": "<p>I want to manually adjust the <code>row-gap</code> of a matrix. Then I found the syntax is confusing. This works:</p>\n<pre><code class=\"lang-auto\">$\nmat(1;2;3; delim:\"[\", gap:#1em)\n$\n</code></pre>\n<p>But this doesn’t:</p>\n<pre><code class=\"lang-auto\">$\nmat(1;2;3; delim:\"[\", row-gap:#1em)\n$\n</code></pre>\n<p>How should I do it properly?</p>",
      "raw": "I want to manually adjust the `row-gap` of a matrix. Then I found the syntax is confusing. This works:\n```\n$\nmat(1;2;3; delim:\"[\", gap:#1em)\n$\n```\nBut this doesn't:\n```\n$\nmat(1;2;3; delim:\"[\", row-gap:#1em)\n$\n```\nHow should I do it properly?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 139.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 910
    },
    {
      "id": 6462,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-12-10T12:37:32.376Z",
      "updated_at": "2024-12-10T12:37:32.376Z",
      "cooked": "<p>I’m not sure but this might be related to the recent question: <a href=\"https://forum.typst.app/t/how-to-use-arguments-with-hyphens-in-math-mode/\">How to use arguments with hyphens in math mode</a>.</p>\n<p>The documentation shows that you can use a <code>set</code> command to do this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set math.mat(row-gap: 1em)\n$\nmat(1;2;3; delim:\"[\")\n$\n</code></pre>\n<p>Which renders the same as what you posted using the argument <code>gap</code>.  This will affect all matrices after this unless you encase this part in its own scope:</p>\n<details>\n<summary>\nCode wtih Scope</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$\nmat(1;2;3; delim:\"[\")\n$\n\n#[\n  #set math.mat(row-gap: 1em)\n  $\n  mat(1;2;3; delim:\"[\")\n  $\n]\n\n$\nmat(1;2;3; delim:\"[\")\n$\n</code></pre>\n</details>\n<details>\n<summary>\nOutput</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/2/247f937782cdda2286fc1703ec0b494bf5ef4e59.png\" alt=\"image\" data-base62-sha1=\"5cSwcmLoZB7h4CTGuEZAxVucVAt\" width=\"197\" height=\"362\"></p>\n</details>",
      "raw": "I'm not sure but this might be related to the recent question: [How to use arguments with hyphens in math mode](https://forum.typst.app/t/how-to-use-arguments-with-hyphens-in-math-mode/).\n\nThe documentation shows that you can use a `set` command to do this:\n```typ\n#set math.mat(row-gap: 1em)\n$\nmat(1;2;3; delim:\"[\")\n$\n```\nWhich renders the same as what you posted using the argument `gap`.  This will affect all matrices after this unless you encase this part in its own scope:\n\n[details=\"Code wtih Scope\"]\n```typ\n$\nmat(1;2;3; delim:\"[\")\n$\n\n#[\n  #set math.mat(row-gap: 1em)\n  $\n  mat(1;2;3; delim:\"[\")\n  $\n]\n\n$\nmat(1;2;3; delim:\"[\")\n$\n```\n[/details]\n\n\n[details=\"Output\"]\n![image|197x362](upload://5cSwcmLoZB7h4CTGuEZAxVucVAt.png)\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 19,
      "score": 38.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 326
    }
  ],
  "scraped_at": "2025-06-10T09:53:46.622195"
}
{
  "topic_metadata": {
    "id": 2043,
    "title": "Is there a way to style a table's cell based on its contents?",
    "slug": "is-there-a-way-to-style-a-tables-cell-based-on-its-contents",
    "posts_count": 6,
    "created_at": "2024-12-10T12:56:01.644Z",
    "last_posted_at": "2024-12-16T02:25:38.762Z",
    "views": 246,
    "like_count": 4,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "tables",
      "styling"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 266
  },
  "posts": [
    {
      "id": 6463,
      "post_number": 1,
      "username": "Hans_Vinther-Larsen",
      "name": "Hans Vinther-Larsen",
      "created_at": "2024-12-10T12:56:01.770Z",
      "updated_at": "2024-12-10T14:19:04.771Z",
      "cooked": "<p>I csv file which I wish to read and print as a table. I want to highlight some of the entries by making them bold. I save the csv file with asterix’ (*) around the entries I wished to be bold. I’ve also tried to save them as bold(entry). Though this is simply printed as *entry* and bold(entry) and not <strong>entry</strong>. The styling options examples I’ve found seems to be mostly be about conditioning on the index of cell and not the content of it. Is there a way style the cell based on its contents? - sort of like,</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show table.cell.where(contains \"*\"): strong \n</code></pre>\n<p>perhaps with something to remove the * as well.</p>",
      "raw": "I csv file which I wish to read and print as a table. I want to highlight some of the entries by making them bold. I save the csv file with asterix' (\\*) around the entries I wished to be bold. I've also tried to save them as bold(entry). Though this is simply printed as \\*entry\\* and bold(entry) and not **entry**. The styling options examples I've found seems to be mostly be about conditioning on the index of cell and not the content of it. Is there a way style the cell based on its contents? - sort of like, \n```typst\n#show table.cell.where(contains \"*\"): strong \n```\nperhaps with something to remove the \\* as well.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 704.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 694
    },
    {
      "id": 6464,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2024-12-10T13:32:31.726Z",
      "updated_at": "2024-12-10T13:35:12.456Z",
      "cooked": "<p>Maybe something like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show table.cell: it =&gt; {\n  show regex(\"^\\*.*\\*$\"): it =&gt; strong(it.text.slice(1, -1))\n  it\n}\n</code></pre>",
      "raw": "Maybe something like this:\n\n```typ\n#show table.cell: it => {\n  show regex(\"^\\*.*\\*$\"): it => strong(it.text.slice(1, -1))\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 48,
      "score": 49.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 6465,
      "post_number": 3,
      "username": "Hans_Vinther-Larsen",
      "name": "Hans Vinther-Larsen",
      "created_at": "2024-12-10T13:34:49.412Z",
      "updated_at": "2024-12-10T13:34:49.412Z",
      "cooked": "<p>Thank you - that seems to work</p>",
      "raw": "Thank you - that seems to work",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 34.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 694
    },
    {
      "id": 6467,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-12-10T14:20:09.645Z",
      "updated_at": "2024-12-10T14:20:09.645Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/hans_vinther-larsen\">@Hans_Vinther-Larsen</a>! Thank you for this topic, I have renamed your post to “Is there a way to style a table’s cell based on its contents?”. If it is wrong please correct it!<br>\n<a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\"><strong>Good titles are questions you would ask your friend about Typst.</strong></a> <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hello @Hans_Vinther-Larsen! Thank you for this topic, I have renamed your post to \"Is there a way to style a table's cell based on its contents?\". If it is wrong please correct it!\n[**Good titles are questions you would ask your friend about Typst.**](https://forum.typst.app/t/how-to-post-in-the-questions-category/11) :smiley:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 114.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 6476,
      "post_number": 5,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-12-10T18:06:06.726Z",
      "updated_at": "2024-12-10T18:06:06.726Z",
      "cooked": "<p>You want to apply the <a href=\"https://typst.app/docs/reference/foundations/eval/\"><code>eval</code></a> function to evaluate your strings as Typst code. For example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let data = csv(\"data.csv\")\n#table(columns: 4, ..data.flatten().map(eval.with(mode: \"markup\")))\n</code></pre>",
      "raw": "You want to apply the [`eval`](https://typst.app/docs/reference/foundations/eval/) function to evaluate your strings as Typst code. For example:\n\n```typ\n#let data = csv(\"data.csv\")\n#table(columns: 4, ..data.flatten().map(eval.with(mode: \"markup\")))\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 42,
      "score": 53.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 6671,
      "post_number": 6,
      "username": "ondohotola",
      "name": "Eberhard W Lisse",
      "created_at": "2024-12-16T02:25:38.762Z",
      "updated_at": "2024-12-16T02:25:38.762Z",
      "cooked": "<p>Me three.</p>\n<p>Thank you very much, the regex solution looks very cool and adaptable, ie looking for numbers in a certain range and the like.</p>",
      "raw": "Me three.\n\nThank you very much, the regex solution looks very cool and adaptable, ie looking for numbers in a certain range and the like.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 6.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 644
    }
  ],
  "scraped_at": "2025-06-10T09:53:45.743351"
}
{
  "topic_metadata": {
    "id": 2044,
    "title": "Why is my footer `((..) => ..,)` instead of the page number?",
    "slug": "why-is-my-footer-instead-of-the-page-number",
    "posts_count": 3,
    "created_at": "2024-12-10T13:39:35.347Z",
    "last_posted_at": "2024-12-10T14:41:25.538Z",
    "views": 108,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 357
  },
  "posts": [
    {
      "id": 6466,
      "post_number": 1,
      "username": "PaulS",
      "name": "",
      "created_at": "2024-12-10T13:39:35.608Z",
      "updated_at": "2024-12-10T14:26:30.989Z",
      "cooked": "<p>I have the following template, which used to work fine. However, when the new <code>typst</code> version came, it places</p>\n<p><code>((..) =&gt; ..,)</code></p>\n<p>at the bottom of the page, instead of the page number.</p>\n<p>Could you please help me? Thanks!</p>\n<pre><code class=\"lang-auto\">#let conf(lang: \"en\",\n  title: none,\n  author: [My full name],\n  date: datetime.today().display(),\n  doc,) = {\n\n  set page(\n    paper: \"a4\",\n    numbering: \"1\",\n    footer: context(\n      loc =&gt; {\n        let page-number = counter(page).at(loc).first()\n        let match-list = query(selector(&lt;turn-on-page-numbering&gt;).before(loc), loc)\n        if match-list == () { return none }\n        align(center, str(page-number))\n      },\n    ),\n  )\n\n  set par(justify: true)\n  set text(\n    font: \"Libertinus Serif\",\n    size: 12pt,\n    lang: lang,\n  )\n\n  set heading(numbering: \"1.\")\n  show: rest =&gt; {\n    for i in (5,6) {\n      rest = {\n        show heading.where(level: i): it =&gt; strong(it.body)\n        rest\n      }\n    }\n    rest\n  }\n\n  show heading: it =&gt; {\n    it\n    v(0.5em)\n  }\n\n  set enum(indent: 1em)\n  set list(indent: 1em)\n\n  set align(center)\n  text(17pt, weight: \"bold\", title)\n  v(2em)\n  text(15pt, author)\n  v(1.5em)\n\n  text(15pt, date)\n  pagebreak()\n  set align(left)\n  set par(justify: true)\n\n  set enum(full: true, numbering: (..n) =&gt; {\n      let format = if n.pos().len() &gt; 1 {\"a)\"} else {\"1.\"}\n      numbering(format, n.pos().last())})\n\n  doc\n}\n</code></pre>",
      "raw": "I have the following template, which used to work fine. However, when the new `typst` version came, it places \n\n`((..) => ..,)`\n\nat the bottom of the page, instead of the page number.\n\nCould you please help me? Thanks!\n\n```\n#let conf(lang: \"en\",\n  title: none,\n  author: [My full name],\n  date: datetime.today().display(),\n  doc,) = {\n\n  set page(\n    paper: \"a4\",\n    numbering: \"1\",\n    footer: context(\n      loc => {\n        let page-number = counter(page).at(loc).first()\n        let match-list = query(selector(<turn-on-page-numbering>).before(loc), loc)\n        if match-list == () { return none }\n        align(center, str(page-number))\n      },\n    ),\n  )\n\n  set par(justify: true)\n  set text(\n    font: \"Libertinus Serif\",\n    size: 12pt,\n    lang: lang,\n  )\n\n  set heading(numbering: \"1.\")\n  show: rest => {\n    for i in (5,6) {\n      rest = {\n        show heading.where(level: i): it => strong(it.body)\n        rest\n      }\n    }\n    rest\n  }\n\n  show heading: it => {\n    it\n    v(0.5em)\n  }\n\n  set enum(indent: 1em)\n  set list(indent: 1em)\n\n  set align(center)\n  text(17pt, weight: \"bold\", title)\n  v(2em)\n  text(15pt, author)\n  v(1.5em)\n\n  text(15pt, date)\n  pagebreak()\n  set align(left)\n  set par(justify: true)\n\n  set enum(full: true, numbering: (..n) => {\n      let format = if n.pos().len() > 1 {\"a)\"} else {\"1.\"}\n      numbering(format, n.pos().last())})\n\n  doc\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 271.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 280
    },
    {
      "id": 6468,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-12-10T14:25:38.717Z",
      "updated_at": "2024-12-10T14:27:08.724Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/pauls\">@PaulS</a>! The <code>((..) =&gt; ..,)</code> you see comes from your footer.</p>\n<p>You can read the topic <a href=\"https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164\" class=\"inline-onebox\">Why is the value I receive from context always content?</a> to understand context expressions.</p>\n<p>This topic “<a href=\"https://forum.typst.app/t/how-to-use-context-instead-of-a-callback-function-in-locate-function-calls/965/2\" class=\"inline-onebox\">How to use context instead of a callback function in locate function calls? - #2 by quachpas</a>” adresses your issue directly.</p>\n<p>Without looking any further, I can suggest the following:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\n    paper: \"a4\",\n    numbering: \"1\",\n    footer: context {\n      let page-number = counter(page).at(here()).first()\n      let match-list = query(selector(&lt;turn-on-page-numbering&gt;).before(here()))\n      if match-list == () { return none }\n      align(center, str(page-number))\n    },\n  )\n</code></pre>\n<p>I also took the opportunity to rename your topic to “Why is my footer <code>((..) =&gt; ..,)</code> instead of the page number?”, if that’s wrong please modify it!<br>\n<a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">Good titles are questions you would ask your friend about Typst.</a></p>",
      "raw": "Hello @PaulS! The `((..) => ..,)` you see comes from your footer.\n\nYou can read the topic https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164 to understand context expressions.\n\nThis topic \"https://forum.typst.app/t/how-to-use-context-instead-of-a-callback-function-in-locate-function-calls/965/2\" adresses your issue directly.\n\nWithout looking any further, I can suggest the following:\n\n```typ\n#set page(\n    paper: \"a4\",\n    numbering: \"1\",\n    footer: context {\n      let page-number = counter(page).at(here()).first()\n      let match-list = query(selector(<turn-on-page-numbering>).before(here()))\n      if match-list == () { return none }\n      align(center, str(page-number))\n    },\n  )\n```\n\nI also took the opportunity to rename your topic to \"Why is my footer `((..) => ..,)` instead of the page number?\", if that's wrong please modify it!\n[Good titles are questions you would ask your friend about Typst.](https://forum.typst.app/t/how-to-post-in-the-questions-category/11)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 29,
      "score": 75.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 6469,
      "post_number": 3,
      "username": "PaulS",
      "name": "",
      "created_at": "2024-12-10T14:41:25.538Z",
      "updated_at": "2024-12-10T14:41:25.538Z",
      "cooked": "<p>Thank you very much indeed, <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a>! That fixed the issue!</p>",
      "raw": "Thank you very much indeed, @quachpas! That fixed the issue!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 20.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 280
    }
  ],
  "scraped_at": "2025-06-10T09:53:45.002545"
}
{
  "topic_metadata": {
    "id": 2048,
    "title": "How to hierarchically label headings automatically?",
    "slug": "how-to-hierarchically-label-headings-automatically",
    "posts_count": 4,
    "created_at": "2024-12-10T17:06:15.063Z",
    "last_posted_at": "2025-02-17T17:30:15.725Z",
    "views": 197,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "scripting",
      "referencing"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 850
  },
  "posts": [
    {
      "id": 6475,
      "post_number": 1,
      "username": "Simon_Schneider",
      "name": "Simon  Schneider",
      "created_at": "2024-12-10T17:06:15.201Z",
      "updated_at": "2025-02-22T08:46:24.253Z",
      "cooked": "<p>The topic about <a href=\"https://forum.typst.app/t/how-do-i-automatically-label-my-headings-figures-equations/400/2\">auto labeling</a> got me thinking, whether it would be possible to generate hierarchical labels.<br>\nFor example: if my heading 1. has the label , then all sub headings labels should also start with the prefix heading-1.</p>\n<p>The following code is the closest I’ve gotten so far.<br>\nDoes anyone have an idea on how to improve this?<br>\nPreferably I’d like to avoid having to specify the label prefix and read it directly from the previous heading.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let heading-numbering = \"1.\"\n#set heading(numbering: heading-numbering)\n\n#let labeled_heading(body, prefix: none) = {\n  show heading: this =&gt; {\n    let key = lower(this.body.text.replace(\" \", \"-\"))\n    if prefix != none {\n      key = prefix + \"-\" + key\n    }\n    return [\n      #this\n      #v(-1em)\n      #figure(\n        kind: \"heading\",\n        numbering: (..numbers) =&gt; numbering(heading-numbering, ..(counter(heading).get())),\n        supplement: \"Section\",\n      )[]\n      #label(key)\n    ]\n  }\n  body\n}\n\n#labeled_heading(prefix: none)[\n  #let heading_level = 1\n  #heading([Heading 1], level: heading_level)\n  Heading 1 body\n\n  #labeled_heading(prefix: \"heading-1\")[\n    #let heading_level = 2\n    #heading([Heading 1.1], level: heading_level)\n    Heading 1.1 body\n\n    #labeled_heading(prefix: \"heading-1-heading-1.1\")[\n      #let heading_level = 3\n      #heading([Heading 1.1.1], level: heading_level)\n      Heading 1.1.1 body\n\n      #heading([Heading 1.1.2], level: heading_level)\n      Heading 1.1.2 body\n    ]\n  ]\n\n  #labeled_heading(prefix: \"heading-1\")[\n    #let heading_level = 2\n    #heading([Heading 1.2], level: heading_level)\n    Heading 1.2 body\n  ]\n\n  #heading([Heading 2], level: heading_level)\n  Heading 2 body\n]\n\nReference to heading 1: @heading-1\\\nReference to heading 1.1: @heading-1-heading-1.1\\\nReference to heading 1.1.1: @heading-1-heading-1.1-heading-1.1.1\\\nReference to heading 1.1.2: @heading-1-heading-1.1-heading-1.1.2\\\nReference to heading 1.2: @heading-1-heading-1.2\\\nReference to heading 2: @heading-2\n</code></pre>",
      "raw": "The topic about [auto labeling](https://forum.typst.app/t/how-do-i-automatically-label-my-headings-figures-equations/400/2) got me thinking, whether it would be possible to generate hierarchical labels. \nFor example: if my heading 1. has the label <heading-1>, then all sub headings labels should also start with the prefix heading-1.\n\nThe following code is the closest I've gotten so far.\nDoes anyone have an idea on how to improve this? \nPreferably I'd like to avoid having to specify the label prefix and read it directly from the previous heading.\n\n```typst\n#let heading-numbering = \"1.\"\n#set heading(numbering: heading-numbering)\n\n#let labeled_heading(body, prefix: none) = {\n  show heading: this => {\n    let key = lower(this.body.text.replace(\" \", \"-\"))\n    if prefix != none {\n      key = prefix + \"-\" + key\n    }\n    return [\n      #this\n      #v(-1em)\n      #figure(\n        kind: \"heading\",\n        numbering: (..numbers) => numbering(heading-numbering, ..(counter(heading).get())),\n        supplement: \"Section\",\n      )[]\n      #label(key)\n    ]\n  }\n  body\n}\n\n#labeled_heading(prefix: none)[\n  #let heading_level = 1\n  #heading([Heading 1], level: heading_level)\n  Heading 1 body\n\n  #labeled_heading(prefix: \"heading-1\")[\n    #let heading_level = 2\n    #heading([Heading 1.1], level: heading_level)\n    Heading 1.1 body\n\n    #labeled_heading(prefix: \"heading-1-heading-1.1\")[\n      #let heading_level = 3\n      #heading([Heading 1.1.1], level: heading_level)\n      Heading 1.1.1 body\n\n      #heading([Heading 1.1.2], level: heading_level)\n      Heading 1.1.2 body\n    ]\n  ]\n\n  #labeled_heading(prefix: \"heading-1\")[\n    #let heading_level = 2\n    #heading([Heading 1.2], level: heading_level)\n    Heading 1.2 body\n  ]\n\n  #heading([Heading 2], level: heading_level)\n  Heading 2 body\n]\n\nReference to heading 1: @heading-1\\\nReference to heading 1.1: @heading-1-heading-1.1\\\nReference to heading 1.1.1: @heading-1-heading-1.1-heading-1.1.1\\\nReference to heading 1.1.2: @heading-1-heading-1.1-heading-1.1.2\\\nReference to heading 1.2: @heading-1-heading-1.2\\\nReference to heading 2: @heading-2\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 430.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 871
    },
    {
      "id": 6483,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-12-11T08:33:26.000Z",
      "updated_at": "2024-12-11T08:33:26.000Z",
      "cooked": "<p>You can query the previous heading to do that!</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let heading-numbering = \"1.\"\n#set heading(numbering: heading-numbering)\n#let to-string(content) = {\n  if content.has(\"text\") and type(content.text) == \"string\" {\n    content.text\n  } else if content.has(\"children\") {\n    content.children.map(to-string).join(\"\")\n  } else if content.has(\"body\") {\n    to-string(content.body)\n  } else if content == [ ] {\n    \" \"\n  }\n}\n#show heading: it =&gt; context {\n  let f = it =&gt; lower(to-string(it).replace(\" \", \"-\"))\n  let prev = query(selector(heading).before(here()))\n  if prev.len() &gt; 1 {\n    prev = prev.at(-2)\n  } else {\n    prev = [ ]\n  }\n  let prev-key = if prev != [ ] {f(prev) + \"-\"} else {\"\"}\n  let key = prev-key + f(it)\n  return [\n    #it\n    #v(-1em)\n    #figure(\n      kind: \"heading\",\n      numbering: (..numbers) =&gt; numbering(heading-numbering, ..(counter(heading).get())),\n      supplement: \"Section\",\n    )[]\n    #label(key)\n  ]\n}\n\n= Heading 1\n\n@heading-1\n\n== Heading 1.1\n\n@heading-1-heading-1.1\n\n=== Heading 1.1.1\n\n@heading-1.1-heading-1.1.1\n\n=== Heading 1.1.2\n\n@heading-1.1.1-heading-1.1.2\n\n== Heading 1.2\n\n@heading-1.1.2-heading-1.2\n\n= Heading 2\n\n@heading-1.2-heading-2\n</code></pre>",
      "raw": "You can query the previous heading to do that!\n```typ\n#let heading-numbering = \"1.\"\n#set heading(numbering: heading-numbering)\n#let to-string(content) = {\n  if content.has(\"text\") and type(content.text) == \"string\" {\n    content.text\n  } else if content.has(\"children\") {\n    content.children.map(to-string).join(\"\")\n  } else if content.has(\"body\") {\n    to-string(content.body)\n  } else if content == [ ] {\n    \" \"\n  }\n}\n#show heading: it => context {\n  let f = it => lower(to-string(it).replace(\" \", \"-\"))\n  let prev = query(selector(heading).before(here()))\n  if prev.len() > 1 {\n    prev = prev.at(-2)\n  } else {\n    prev = [ ]\n  }\n  let prev-key = if prev != [ ] {f(prev) + \"-\"} else {\"\"}\n  let key = prev-key + f(it)\n  return [\n    #it\n    #v(-1em)\n    #figure(\n      kind: \"heading\",\n      numbering: (..numbers) => numbering(heading-numbering, ..(counter(heading).get())),\n      supplement: \"Section\",\n    )[]\n    #label(key)\n  ]\n}\n\n= Heading 1\n\n@heading-1\n\n== Heading 1.1\n\n@heading-1-heading-1.1\n\n=== Heading 1.1.1\n\n@heading-1.1-heading-1.1.1\n\n=== Heading 1.1.2\n\n@heading-1.1.1-heading-1.1.2\n\n== Heading 1.2\n\n@heading-1.1.2-heading-1.2\n\n= Heading 2\n\n@heading-1.2-heading-2\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 44,
      "score": 33.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 6549,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-12-12T06:34:40.361Z",
      "updated_at": "2024-12-12T06:34:40.361Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/simon_schneider\">@Simon_Schneider</a>! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>For future posts, please make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Simon_Schneider! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11 \n\nFor future posts, please make sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 36.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 8754,
      "post_number": 4,
      "username": "Simon_Schneider",
      "name": "Simon  Schneider",
      "created_at": "2025-02-17T17:30:15.725Z",
      "updated_at": "2025-02-17T17:30:15.725Z",
      "cooked": "<p>Expansion to the original solution that allows for maximum hierarchical depth and label key override using the heading supplement field:</p>\n<pre><code class=\"lang-auto\">#let heading-numbering = \"1.\"\n#set heading(numbering: heading-numbering)\n\n#let to-string(content) = {\n  if content.has(\"text\") and type(content.text) == \"string\" {\n    content.text\n  } else if content.has(\"children\") {\n    content.children.map(to-string).join(\"\")\n  } else if content.has(\"body\") {\n    to-string(content.body)\n  } else if content == [ ] {\n    \" \"\n  }\n}\n\n#show heading: it =&gt; context {\n  // give users the option to disable auto labeling\n  if it.supplement == [-] {\n    return it\n  }\n  let get_label_key = it =&gt; {\n    if it.supplement == [] {\n      // if no supplement is provided, use the heading text to generate the label\n      return lower(to-string(it).trim().replace(\" \", \"-\"))\n    } else {\n      // if a supplement is provided, use the supplement to generate the label\n      return lower(to-string(it.supplement).trim().replace(\" \", \"-\"))\n    }\n  }\n\n  // recursively construct hierarchical label key\n  let prev = query(selector(heading).before(here())).rev()\n  let key = \"\"\n  let level = it.level\n  for heading in prev {\n    if level == 1 {\n      break\n    }\n    if heading.level &gt;= level {\n      continue\n    }\n    level -= 1\n    key = get_label_key(heading) + \"-\" + key\n  }\n  key = key + get_label_key(it)\n\n  // return the heading with the auto-generated label\n  return [\n    #it\n    // unfortunately there is an issue with attaching programmatically attaching labels to headings (see https://github.com/typst/typst/issues/2926)\n    // therefore we have to use a fake figure to attach the label to the heading\n    #v(-1em)\n    #figure(\n      kind: \"heading\",\n      numbering: (..numbers) =&gt; numbering(heading-numbering, ..(counter(heading).get())),\n      supplement: \"Section\",\n    )[]\n    #label(key)\n    //#key // print the label key for debugging\n  ]\n}\n\n#set heading(numbering: (..numbers) =&gt; numbering((..nums) =&gt; nums.pos().map(str).join(\".\"), ..numbers), supplement: [])\n\n\n\n#heading(supplement: [h1])[Section 1]\n@h1\n\n== Section 1.1\n@h1-section-1.1\n\n#heading(supplement: [-], level: 2)[Section 1.2]\nAuto labeling has been disabled for this heading using the supplement field value `[-]`.\n\n== Section 1.3\n@h1-section-1.3\n\n=== Section 1.3.1\n@h1-section-1.3-section-1.3.1\n\n=== Section 1.3.2\n@h1-section-1.3-section-1.3.2\n\n== Section 1.4\n@h1-section-1.4\n\n= Section 2\n@section-2\n</code></pre>",
      "raw": "Expansion to the original solution that allows for maximum hierarchical depth and label key override using the heading supplement field:\n```\n#let heading-numbering = \"1.\"\n#set heading(numbering: heading-numbering)\n\n#let to-string(content) = {\n  if content.has(\"text\") and type(content.text) == \"string\" {\n    content.text\n  } else if content.has(\"children\") {\n    content.children.map(to-string).join(\"\")\n  } else if content.has(\"body\") {\n    to-string(content.body)\n  } else if content == [ ] {\n    \" \"\n  }\n}\n\n#show heading: it => context {\n  // give users the option to disable auto labeling\n  if it.supplement == [-] {\n    return it\n  }\n  let get_label_key = it => {\n    if it.supplement == [] {\n      // if no supplement is provided, use the heading text to generate the label\n      return lower(to-string(it).trim().replace(\" \", \"-\"))\n    } else {\n      // if a supplement is provided, use the supplement to generate the label\n      return lower(to-string(it.supplement).trim().replace(\" \", \"-\"))\n    }\n  }\n\n  // recursively construct hierarchical label key\n  let prev = query(selector(heading).before(here())).rev()\n  let key = \"\"\n  let level = it.level\n  for heading in prev {\n    if level == 1 {\n      break\n    }\n    if heading.level >= level {\n      continue\n    }\n    level -= 1\n    key = get_label_key(heading) + \"-\" + key\n  }\n  key = key + get_label_key(it)\n\n  // return the heading with the auto-generated label\n  return [\n    #it\n    // unfortunately there is an issue with attaching programmatically attaching labels to headings (see https://github.com/typst/typst/issues/2926)\n    // therefore we have to use a fake figure to attach the label to the heading\n    #v(-1em)\n    #figure(\n      kind: \"heading\",\n      numbering: (..numbers) => numbering(heading-numbering, ..(counter(heading).get())),\n      supplement: \"Section\",\n    )[]\n    #label(key)\n    //#key // print the label key for debugging\n  ]\n}\n\n#set heading(numbering: (..numbers) => numbering((..nums) => nums.pos().map(str).join(\".\"), ..numbers), supplement: [])\n\n\n\n#heading(supplement: [h1])[Section 1]\n@h1\n\n== Section 1.1\n@h1-section-1.1\n\n#heading(supplement: [-], level: 2)[Section 1.2]\nAuto labeling has been disabled for this heading using the supplement field value `[-]`.\n\n== Section 1.3\n@h1-section-1.3\n\n=== Section 1.3.1\n@h1-section-1.3-section-1.3.1\n\n=== Section 1.3.2\n@h1-section-1.3-section-1.3.2\n\n== Section 1.4\n@h1-section-1.4\n\n= Section 2\n@section-2\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 871
    }
  ],
  "scraped_at": "2025-06-10T09:53:44.074056"
}
{
  "topic_metadata": {
    "id": 2051,
    "title": "How to use codelst or codly inside fletcher nodes?",
    "slug": "how-to-use-codelst-or-codly-inside-fletcher-nodes",
    "posts_count": 4,
    "created_at": "2024-12-10T19:08:29.421Z",
    "last_posted_at": "2024-12-15T12:24:22.445Z",
    "views": 214,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Jollywatt",
    "tags": [
      "graphics",
      "fletcher"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 347
  },
  "posts": [
    {
      "id": 6480,
      "post_number": 1,
      "username": "bumblingaround",
      "name": "",
      "created_at": "2024-12-10T19:08:29.579Z",
      "updated_at": "2024-12-15T10:25:53.837Z",
      "cooked": "<p>I’m trying to generate a figure that illustrates call paths in a complex piece of code. The way I imagined doing this, was using fletcher nodes containing code snippets (using raw text blocks, e.g. <code>c .... </code>) with relevant information - such as function calls. The call graph would then be represented with arrows between such nodes.</p>\n<p>For instance:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/fletcher:0.5.3\" as fletcher: diagram, node, edge\n#import \"@preview/codelst:2.0.2\": sourcecode\n\n#diagram(node-stroke: 1pt, edge-stroke:1pt, node-shape: rect,\n {\n      node(sourcecode[```c\n         void caller() {\n              call_foo();\n              ...\n         }\n     ```])\n   edge(\"-|&gt;\")\n      node(sourcecode[```c\n         void call_foo() {\n              ...\n         }\n     ```])\n })\n</code></pre>\n<p>Unfortunately the fletcher nodes render as if the code block has a very narrow width and the node outline doesn’t actually include its content.</p>\n<p>I tried something similar with codly with similar results.</p>\n<p>So now for the questions:</p>\n<ul>\n<li>am I doing something obviously wrong?</li>\n<li>should I be using an entirely different approach? (I’m actually trying to convert diagrams made with a combination of d2 and plantuml)</li>\n</ul>\n<p>Thanks for any pointers!</p>",
      "raw": "I'm trying to generate a figure that illustrates call paths in a complex piece of code. The way I imagined doing this, was using fletcher nodes containing code snippets (using raw text blocks, e.g. ```c .... ```) with relevant information - such as function calls. The call graph would then be represented with arrows between such nodes.\n\nFor instance:\n```typst\n#import \"@preview/fletcher:0.5.3\" as fletcher: diagram, node, edge\n#import \"@preview/codelst:2.0.2\": sourcecode\n\n#diagram(node-stroke: 1pt, edge-stroke:1pt, node-shape: rect,\n {\n      node(sourcecode[```c\n         void caller() {\n              call_foo();\n              ...\n         }\n     ```])\n   edge(\"-|>\")\n      node(sourcecode[```c\n         void call_foo() {\n              ...\n         }\n     ```])\n })\n```\n\nUnfortunately the fletcher nodes render as if the code block has a very narrow width and the node outline doesn't actually include its content.\n\nI tried something similar with codly with similar results.\n\nSo now for the questions:\n- am I doing something obviously wrong?\n- should I be using an entirely different approach? (I'm actually trying to convert diagrams made with a combination of d2 and plantuml)\n\nThanks for any pointers!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 762.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 913
    },
    {
      "id": 6481,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-12-11T01:58:34.710Z",
      "updated_at": "2024-12-11T01:58:34.710Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/bumblingaround\">@bumblingaround</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @bumblingaround, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 21.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 6552,
      "post_number": 3,
      "username": "bumblingaround",
      "name": "",
      "created_at": "2024-12-12T12:25:53.694Z",
      "updated_at": "2024-12-12T12:25:53.694Z",
      "cooked": "<p>Replying to myself in case someone else wonders about the same thing.<br>\nOne simple workaround is to simply set a width on the node.</p>",
      "raw": "Replying to myself in case someone else wonders about the same thing.\nOne simple workaround is to simply set a width on the node.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 6.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 913
    },
    {
      "id": 6652,
      "post_number": 4,
      "username": "Jollywatt",
      "name": "Joseph Wilson",
      "created_at": "2024-12-15T12:24:22.445Z",
      "updated_at": "2024-12-15T12:24:46.538Z",
      "cooked": "<p>Codelst is partially to blame here, because it wraps raw blocks in a zero-width container:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let a = sourcecode[```c\nvoid call_foo() {\n    ...\n}\n```]\n\n#context assert(measure(a).width == 0pt)\n</code></pre>\n<p>You can get around that by explicitly setting node widths, or by wrapping <code>sourcecode</code> blocks in a block of fixed width, etc. For example:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">node(width: 5cm, sourcecode[```c\nvoid caller() {\n  call_foo();\n  ...\n}\n```])\n</code></pre>\n<p>Alternatively, if you don’t need line numbers:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/fletcher:0.5.3\" as fletcher: diagram, node, edge\n\n#diagram(\n  node-stroke: 1pt,\n  edge-stroke: 1pt,\n  node-shape: rect,\n  {\n  node(```c\n  void caller() {\n    call_foo();\n    ...\n  }\n  ```)\n  edge(\"-|&gt;\")\n  node((1, 0), ```c\n  void call_foo() {\n    ...\n  }\n  ```)\n})\n</code></pre>",
      "raw": "Codelst is partially to blame here, because it wraps raw blocks in a zero-width container:\n\n```typ\n#let a = sourcecode[```c\nvoid call_foo() {\n    ...\n}\n```]\n\n#context assert(measure(a).width == 0pt)\n```\n\nYou can get around that by explicitly setting node widths, or by wrapping `sourcecode` blocks in a block of fixed width, etc. For example:\n```typc\nnode(width: 5cm, sourcecode[```c\nvoid caller() {\n  call_foo();\n  ...\n}\n```])\n```\n\nAlternatively, if you don't need line numbers:\n\n```typ\n#import \"@preview/fletcher:0.5.3\" as fletcher: diagram, node, edge\n\n#diagram(\n  node-stroke: 1pt,\n  edge-stroke: 1pt,\n  node-shape: rect,\n  {\n  node(```c\n  void caller() {\n    call_foo();\n    ...\n  }\n  ```)\n  edge(\"-|>\")\n  node((1, 0), ```c\n  void call_foo() {\n    ...\n  }\n  ```)\n})\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 125.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 713
    }
  ],
  "scraped_at": "2025-06-10T09:53:43.321623"
}
