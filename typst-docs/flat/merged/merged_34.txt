{
  "topic_metadata": {
    "id": 4121,
    "title": "How does spacing of math with long subscripts, e.g. for sums, work? Can it be changed?",
    "slug": "how-does-spacing-of-math-with-long-subscripts-e-g-for-sums-work-can-it-be-changed",
    "posts_count": 5,
    "created_at": "2025-05-16T10:20:25.796Z",
    "last_posted_at": "2025-05-16T20:37:22.854Z",
    "views": 47,
    "like_count": 0,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 292
  },
  "posts": [
    {
      "id": 12579,
      "post_number": 1,
      "username": "Skar16",
      "name": "Torben",
      "created_at": "2025-05-16T10:20:26.142Z",
      "updated_at": "2025-05-16T13:55:31.327Z",
      "cooked": "<p>With the following math</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">$ sum_(k=N-log_2(N))^N 2^(-k) $ \n</code></pre>\n<p>The distance of the actual Sum operator 2^(-k)  to the sum symbol seems quite far. This is cause of the long index.</p>\n<p>Question:<br>\nHow does typst calculate the distance based on the main character (sum) or the “farest away” character that inherates from the main character?<br>\nIs it possible to avoid this and place the base near the operation(sum)?</p>",
      "raw": "With the following math\n```typst\n$ sum_(k=N-log_2(N))^N 2^(-k) $ \n```\nThe distance of the actual Sum operator 2^(-k)  to the sum symbol seems quite far. This is cause of the long index. \n\nQuestion: \nHow does typst calculate the distance based on the main character (sum) or the \"farest away\" character that inherates from the main character?\nIs it possible to avoid this and place the base near the operation(sum)?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 15.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 830
    },
    {
      "id": 12585,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-05-16T12:14:02.246Z",
      "updated_at": "2025-05-16T12:14:02.246Z",
      "cooked": "<p>You can use <a href=\"https://typst.app/docs/reference/layout/place/\"><code>place()</code></a> for the index to ignore the width of the index for the spacing around the sum. To recover the correct font size and spacing in the index, you have to use the <a href=\"https://typst.app/docs/reference/math/sizes#functions-script\"><code>script()</code></a> function.</p>\n<p>With the current anchor <code>horizon + center</code> the vertical index position is not perfectly recovered. If this bothers you, you can use the parameter <code>dy</code> to adjust this.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let index(body) = place(horizon + center, $script(body)$)\n$ sum_(index(k=N-log_2(N)))^N 2^(-k) $\n</code></pre>",
      "raw": "You can use [`place()`](https://typst.app/docs/reference/layout/place/) for the index to ignore the width of the index for the spacing around the sum. To recover the correct font size and spacing in the index, you have to use the [`script()`](https://typst.app/docs/reference/math/sizes#functions-script) function.\n\nWith the current anchor `horizon + center` the vertical index position is not perfectly recovered. If this bothers you, you can use the parameter `dy` to adjust this.\n\n```\n#let index(body) = place(horizon + center, $script(body)$)\n$ sum_(index(k=N-log_2(N)))^N 2^(-k) $\n```",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 14.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 12595,
      "post_number": 3,
      "username": "Skar16",
      "name": "Torben",
      "created_at": "2025-05-16T15:21:47.413Z",
      "updated_at": "2025-05-16T15:21:47.413Z",
      "cooked": "<p>thanks that will work, a bit hacky but it will fit the use case. Appreciate it :)</p>",
      "raw": "thanks that will work, a bit hacky but it will fit the use case. Appreciate it :)",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 3.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 830
    },
    {
      "id": 12600,
      "post_number": 4,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-05-16T17:15:49.536Z",
      "updated_at": "2025-05-16T17:15:49.536Z",
      "cooked": "<p>Using <code>place</code> seems more elegant, but there’s a separate implementation here <a href=\"https://forum.typst.app/t/smashoperator-analogue/1763/4\" class=\"inline-onebox\">Smashoperator Analogue - #4 by Eric</a></p>",
      "raw": "Using `place` seems more elegant, but there's a separate implementation here https://forum.typst.app/t/smashoperator-analogue/1763/4?u=bluss",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 1272
    },
    {
      "id": 12627,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-16T20:37:22.854Z",
      "updated_at": "2025-05-16T20:37:33.568Z",
      "cooked": "<p>This will reduce space under the expression. Either it’s not a big deal, or you would have to compensate this with something like a show-set rule for equation-block or <a href=\"https://typst.app/docs/reference/layout/v\"><code>v</code></a>.</p>\n<details><summary>Code</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ sum_(k=N-log_2(N))^N 2^(-k) $\n\n#lorem(50)\n\n#let index(body) = place(horizon + center, $script(body)$)\n$ sum_(index(k=N-log_2(N)))^N 2^(-k) $\n\n#lorem(50)\n</code></pre>\n</details>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/2/202c1f4f32ce65817803ff64119b01fcd5b368d6.png\" alt=\"image\" data-base62-sha1=\"4ABOg8OaQigEahzCCJtRsYVR7sa\" width=\"119\" height=\"327\"></p>",
      "raw": "This will reduce space under the expression. Either it's not a big deal, or you would have to compensate this with something like a show-set rule for equation-block or [`v`](https://typst.app/docs/reference/layout/v).\n\n<details><summary>Code</summary>\n\n```typ\n$ sum_(k=N-log_2(N))^N 2^(-k) $\n\n#lorem(50)\n\n#let index(body) = place(horizon + center, $script(body)$)\n$ sum_(index(k=N-log_2(N)))^N 2^(-k) $\n\n#lorem(50)\n```\n\n</details>\n\n![image|159x436, 75%](upload://4ABOg8OaQigEahzCCJtRsYVR7sa.png)",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 12,
      "score": 2.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:45.365050"
}
{
  "topic_metadata": {
    "id": 4130,
    "title": "How can I switch from Roman to Arabic page numbers without breaking the total page count?",
    "slug": "how-can-i-switch-from-roman-to-arabic-page-numbers-without-breaking-the-total-page-count",
    "posts_count": 4,
    "created_at": "2025-05-16T21:01:22.243Z",
    "last_posted_at": "2025-05-16T23:22:43.937Z",
    "views": 41,
    "like_count": 4,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 513
  },
  "posts": [
    {
      "id": 12637,
      "post_number": 1,
      "username": "Rifling",
      "name": "",
      "created_at": "2025-05-16T21:01:22.353Z",
      "updated_at": "2025-05-17T01:46:27.952Z",
      "cooked": "<p>Hi, for my report I need to number the first pages in Roman numerals, and the following ones in Arabic numerals. I’ve tried the following model, but when I switch to Arabic numbering, the total number of pages in the Roman section is incorrect (for example, III/II instead of II/II).</p>\n<p>Here is my snippet:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 6cm, height: 3cm, footer-descent: 0pt, margin: 4mm)\n#set pagebreak(weak: true)\n\n#set page(numbering: \"I/I\")\n\n= I First Roman section\n\n#pagebreak()\n= II Second Roman section\n\n#pagebreak()\n= III Last Roman section\n\n#pagebreak()\n#counter(page).update(1)\n#set page(numbering: \"1/1\")\n= 1 First Arabic section\n\n#pagebreak()\n= 2 Second Arabic section\n</code></pre>",
      "raw": "Hi, for my report I need to number the first pages in Roman numerals, and the following ones in Arabic numerals. I've tried the following model, but when I switch to Arabic numbering, the total number of pages in the Roman section is incorrect (for example, III/II instead of II/II).\n\nHere is my snippet:\n```typ\n#set page(width: 6cm, height: 3cm, footer-descent: 0pt, margin: 4mm)\n#set pagebreak(weak: true)\n\n#set page(numbering: \"I/I\")\n\n= I First Roman section\n\n#pagebreak()\n= II Second Roman section\n\n#pagebreak()\n= III Last Roman section\n\n#pagebreak()\n#counter(page).update(1)\n#set page(numbering: \"1/1\")\n= 1 First Arabic section\n\n#pagebreak()\n= 2 Second Arabic section\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 8.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1609
    },
    {
      "id": 12641,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-05-16T22:34:05.648Z",
      "updated_at": "2025-05-16T22:34:05.648Z",
      "cooked": "<p>The total number of pages seems to use the final value of the page counter in the document. By default you would therefore share the total page number between the Roman-numbered pages and the Arabic-numbered pages.</p>\n<p>You can use a label at the end of the Roman-numbered pages as a reference point. The page counter at the label location will then give you the total number of pages.</p>\n<p>In the rule for the Arabic numbers you are using the format <code>\"1/2\"</code> which will always use two as total number of pages. I’m not sure whether that is intentional? In any case the “2” in the numbering was not related to the Roman number 2 for the total page count. This was simply caused by the two pages with Arabic numbers at the end of your document.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 6cm, height: 3cm, footer-descent: 0pt, margin: 4mm)\n#set pagebreak(weak: true)\n\n#let roman-numbering(..n) = context {\n  numbering(\"I/I\", n.at(0), counter(page).at(&lt;last-roman-page&gt;).at(0))\n  \n}\n#set page(numbering: roman-numbering)\n\n= I First Roman section\n\n#pagebreak()\n= II Second Roman section\n\n#pagebreak()\n= III Last Roman section\n\n#metadata(\"last-roman-page\") &lt;last-roman-page&gt;\n\n#pagebreak()\n#counter(page).update(1)\n#set page(numbering: \"1/1\")\n= 1 First Arabic section\n\n#pagebreak()\n= 2 Second Arabic section\n</code></pre>",
      "raw": "The total number of pages seems to use the final value of the page counter in the document. By default you would therefore share the total page number between the Roman-numbered pages and the Arabic-numbered pages.\n\nYou can use a label at the end of the Roman-numbered pages as a reference point. The page counter at the label location will then give you the total number of pages.\n\nIn the rule for the Arabic numbers you are using the format `\"1/2\"` which will always use two as total number of pages. I'm not sure whether that is intentional? In any case the \"2\" in the numbering was not related to the Roman number 2 for the total page count. This was simply caused by the two pages with Arabic numbers at the end of your document.\n\n```\n#set page(width: 6cm, height: 3cm, footer-descent: 0pt, margin: 4mm)\n#set pagebreak(weak: true)\n\n#let roman-numbering(..n) = context {\n  numbering(\"I/I\", n.at(0), counter(page).at(<last-roman-page>).at(0))\n  \n}\n#set page(numbering: roman-numbering)\n\n= I First Roman section\n\n#pagebreak()\n= II Second Roman section\n\n#pagebreak()\n= III Last Roman section\n\n#metadata(\"last-roman-page\") <last-roman-page>\n\n#pagebreak()\n#counter(page).update(1)\n#set page(numbering: \"1/1\")\n= 1 First Arabic section\n\n#pagebreak()\n= 2 Second Arabic section\n```",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 3,
      "reads": 15,
      "score": 58.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 12642,
      "post_number": 3,
      "username": "Rifling",
      "name": "",
      "created_at": "2025-05-16T22:48:53.363Z",
      "updated_at": "2025-05-16T22:48:53.363Z",
      "cooked": "<p>Thanks for the answer, I didn’t know about the “metadata” function, it seems very useful and powerful.</p>\n<p>This is exactly what I want to do, and yes the “1/2” format was not intentional.</p>",
      "raw": "Thanks for the answer, I didn't know about the “metadata” function, it seems very useful and powerful.\n\nThis is exactly what I want to do, and yes the “1/2” format was not intentional.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 14,
      "score": 2.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1609
    },
    {
      "id": 12643,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-16T23:22:43.937Z",
      "updated_at": "2025-05-16T23:22:43.937Z",
      "cooked": "<p>Slightly shorter:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 6cm, height: 3cm, footer-descent: 0pt, margin: 4mm)\n#set pagebreak(weak: true)\n\n#set page(numbering: (..n) =&gt; context {\n  numbering(\"I/I\", n.at(0), ..counter(page).at(&lt;last-roman-page&gt;))\n})\n\n= I First Roman section\n#pagebreak()\n\n= II Second Roman section\n#pagebreak()\n\n= III Last Roman section\n\n#metadata(\"last-roman-page\") &lt;last-roman-page&gt;\n#pagebreak()\n#counter(page).update(1)\n#set page(numbering: \"1/1\")\n\n= 1 First Arabic section\n#pagebreak()\n\n= 2 Second Arabic section\n</code></pre>\n<p>P.S. I’ve looked at the 2 posts and was confused why I see what I’ve written just a moment ago, but don’t see my post. I thought it got removed or something. But apparently it’s a completely new topic and the one I was thinking about is <a href=\"https://forum.typst.app/t/how-to-use-arabic-and-roman-page-numbers-in-one-document/4118/5\" class=\"inline-onebox\">How to use Arabic and Roman page numbers in one document? - #5 by Andrew</a>.</p>",
      "raw": "Slightly shorter:\n\n```typ\n#set page(width: 6cm, height: 3cm, footer-descent: 0pt, margin: 4mm)\n#set pagebreak(weak: true)\n\n#set page(numbering: (..n) => context {\n  numbering(\"I/I\", n.at(0), ..counter(page).at(<last-roman-page>))\n})\n\n= I First Roman section\n#pagebreak()\n\n= II Second Roman section\n#pagebreak()\n\n= III Last Roman section\n\n#metadata(\"last-roman-page\") <last-roman-page>\n#pagebreak()\n#counter(page).update(1)\n#set page(numbering: \"1/1\")\n\n= 1 First Arabic section\n#pagebreak()\n\n= 2 Second Arabic section\n```\n\nP.S. I've looked at the 2 posts and was confused why I see what I've written just a moment ago, but don't see my post. I thought it got removed or something. But apparently it's a completely new topic and the one I was thinking about is https://forum.typst.app/t/how-to-use-arabic-and-roman-page-numbers-in-one-document/4118/5?u=andrew.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 14,
      "score": 17.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:44.646214"
}
{
  "topic_metadata": {
    "id": 4135,
    "title": "How to duplicate a function, but with different settables?",
    "slug": "how-to-duplicate-a-function-but-with-different-settables",
    "posts_count": 15,
    "created_at": "2025-05-17T15:21:56.036Z",
    "last_posted_at": "2025-05-17T21:24:51.575Z",
    "views": 68,
    "like_count": 3,
    "reply_count": 11,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "AprilGrimoire",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 571
  },
  "posts": [
    {
      "id": 12653,
      "post_number": 1,
      "username": "AprilGrimoire",
      "name": "AprilGrimoire",
      "created_at": "2025-05-17T15:21:56.171Z",
      "updated_at": "2025-05-17T15:21:56.171Z",
      "cooked": "<p>Hi. I want to create a variant of a standard function:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let major-enum = enum\n\n#set major-enum(\n  spacing: 0.5cm,\n)\n</code></pre>\n<p>However it didn’t work as intended, since <code>major-enum</code> would be considered the same object as <code>enum</code>, and <code>#set</code> statements would be applied to them at the same time.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let major-enum(..args) = enum(..args)\n</code></pre>\n<p>won’t work either, since <code>spacing</code> would not be considered as a named argument of <code>major-enum</code>, thus not settable.</p>\n<p>How can I achieve this effect?</p>",
      "raw": "Hi. I want to create a variant of a standard function:\n\n```\n#let major-enum = enum\n\n#set major-enum(\n  spacing: 0.5cm,\n)\n```\n\nHowever it didn't work as intended, since `major-enum` would be considered the same object as `enum`, and `#set` statements would be applied to them at the same time.\n\n```\n#let major-enum(..args) = enum(..args)\n```\nwon't work either, since `spacing` would not be considered as a named argument of `major-enum`, thus not settable.\n\nHow can I achieve this effect?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 75.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1309
    },
    {
      "id": 12654,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-17T15:40:13.775Z",
      "updated_at": "2025-05-17T15:40:36.647Z",
      "cooked": "<p>Hi. Without a concrete use case, this is just <a href=\"https://forum.typst.app/t/how-can-i-have-global-configuration-parameters-for-a-module-package/3365/2\" class=\"inline-onebox\">How can I have global configuration parameters for a module/package? - #2 by Andrew</a>, but from a different angle.</p>\n<p>Generally speaking, you can’t. But with enough hacks you can manually exploit one element for storing relevant/updated field values with a set rule, like here:</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/lilaq-project/lilaq/blob/1e38c166eeb674a293ea1821993e9cd1afa3da95/src/style/styling.typ#L13\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/lilaq-project/lilaq/blob/1e38c166eeb674a293ea1821993e9cd1afa3da95/src/style/styling.typ#L13\" target=\"_blank\" rel=\"noopener\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/lilaq-project/lilaq/blob/1e38c166eeb674a293ea1821993e9cd1afa3da95/src/style/styling.typ#L13\" target=\"_blank\" rel=\"noopener\">lilaq-project/lilaq/blob/1e38c166eeb674a293ea1821993e9cd1afa3da95/src/style/styling.typ#L13</a></h4>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-typ\">\n      <ol class=\"start lines\" start=\"3\" style=\"counter-reset: li-counter 2 ;\">\n          <li>#import \"../process-styles.typ\": merge-strokes, merge-fills</li>\n          <li>#import \"../utility.typ\": if-none</li>\n          <li>#import \"../model/mark.typ\": mark, marks</li>\n          <li></li>\n          <li>#import \"map.typ\": petroff10</li>\n          <li>#import \"cycle.typ\": generic</li>\n          <li></li>\n          <li></li>\n          <li>#let _auto = rgb(\"#0000A1AA\")</li>\n          <li></li>\n          <li class=\"selected\">#let style = std.circle</li>\n          <li></li>\n          <li>#let process-stroke(stroke, color) = {</li>\n          <li>  if stroke == none { return none }</li>\n          <li>  if stroke.paint == _auto {</li>\n          <li>    std.stroke(paint: color, thickness: stroke.thickness, cap: stroke.cap, join: stroke.join, dash: stroke.dash, miter-limit: stroke.miter-limit)</li>\n          <li>  } else { </li>\n          <li>    stroke</li>\n          <li>  }</li>\n          <li>}</li>\n          <li></li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Or use <a href=\"https://pgbiel.github.io/elembic\" class=\"inline-onebox\">Introduction - The Elembic Handbook</a>.</p>",
      "raw": "Hi. Without a concrete use case, this is just https://forum.typst.app/t/how-can-i-have-global-configuration-parameters-for-a-module-package/3365/2, but from a different angle.\n\nGenerally speaking, you can't. But with enough hacks you can manually exploit one element for storing relevant/updated field values with a set rule, like here:\n\nhttps://github.com/lilaq-project/lilaq/blob/1e38c166eeb674a293ea1821993e9cd1afa3da95/src/style/styling.typ#L13\n\nOr use https://pgbiel.github.io/elembic.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 30.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12655,
      "post_number": 3,
      "username": "AprilGrimoire",
      "name": "AprilGrimoire",
      "created_at": "2025-05-17T15:43:09.939Z",
      "updated_at": "2025-05-17T15:43:09.939Z",
      "cooked": "<p>Hi. Thanks for your answer! The use case is to create a different style of <code>enum</code> for a very long <code>enum</code> spanning multiple pages, containing a few homework exercises. I don['t want this style to interfere with usual enums.</p>",
      "raw": "Hi. Thanks for your answer! The use case is to create a different style of `enum` for a very long `enum` spanning multiple pages, containing a few homework exercises. I don['t want this style to interfere with usual enums.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 9.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1309
    },
    {
      "id": 12658,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-17T15:54:12.809Z",
      "updated_at": "2025-05-17T15:55:24.782Z",
      "cooked": "<p>Have you tried just adding <code>#[</code> at the start and <code>]</code> at the end of the section with a normal set rule? This is the most straightforward way, with no hacking. Or <code>#custom-enum[]</code>.</p>",
      "raw": "Have you tried just adding `#[` at the start and `]` at the end of the section with a normal set rule? This is the most straightforward way, with no hacking. Or `#custom-enum[]`.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 20.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12660,
      "post_number": 5,
      "username": "AprilGrimoire",
      "name": "AprilGrimoire",
      "created_at": "2025-05-17T17:10:12.178Z",
      "updated_at": "2025-05-17T17:10:12.178Z",
      "cooked": "<p>No, that’s not possible, because I want normal enums inside it.</p>",
      "raw": "No, that's not possible, because I want normal enums inside it.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 9.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1309
    },
    {
      "id": 12661,
      "post_number": 6,
      "username": "AprilGrimoire",
      "name": "AprilGrimoire",
      "created_at": "2025-05-17T17:12:12.160Z",
      "updated_at": "2025-05-17T17:12:12.160Z",
      "cooked": "<p>Thanks <a class=\"mention\" href=\"/u/bluss\">@bluss</a> in Discord for the answer!</p>\n<aside class=\"quote no-group\" data-username=\"bluss\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/b/441A5E/48.png\" class=\"avatar\"> bluss:</div>\n<blockquote>\n<p>it’s also good to know about the with method which is very useful. let major-enum = enum.with(spacing: 0.5em)  It provides a “copy” of the function with specified arguments but they can also be overridden later. It’s not a “settable element function” but it’s a regular function.</p>\n</blockquote>\n</aside>",
      "raw": "Thanks @bluss in Discord for the answer!\n[quote=\"bluss\"]\nit's also good to know about the with method which is very useful. let major-enum = enum.with(spacing: 0.5em)  It provides a \"copy\" of the function with specified arguments but they can also be overridden later. It's not a \"settable element function\" but it's a regular function. \n[/quote]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 24.8,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1309
    },
    {
      "id": 12667,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-17T17:30:35.146Z",
      "updated_at": "2025-05-17T17:30:35.146Z",
      "cooked": "<p>You <em>will</em> use normal enums inside of it…</p>",
      "raw": "You *will* use normal enums inside of it...",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 9.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12668,
      "post_number": 8,
      "username": "AprilGrimoire",
      "name": "AprilGrimoire",
      "created_at": "2025-05-17T17:31:53.523Z",
      "updated_at": "2025-05-17T17:31:53.523Z",
      "cooked": "<p>Do you mean the section where I want normal enums, or the section containing the mega enum?</p>",
      "raw": "Do you mean the section where I want normal enums, or the section containing the mega enum?",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 9.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1309
    },
    {
      "id": 12669,
      "post_number": 9,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-17T17:33:07.666Z",
      "updated_at": "2025-05-17T17:34:32.726Z",
      "cooked": "<blockquote>\n<p>Do you mean the section where I want normal enums, or the section containing the mega enum?</p>\n</blockquote>\n<p>Both. That’s the whole point of scoping the set rules.</p>",
      "raw": "> Do you mean the section where I want normal enums, or the section containing the mega enum?\n\nBoth. That's the whole point of scoping the set rules.",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 14.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12670,
      "post_number": 10,
      "username": "AprilGrimoire",
      "name": "AprilGrimoire",
      "created_at": "2025-05-17T17:34:50.030Z",
      "updated_at": "2025-05-17T17:34:50.030Z",
      "cooked": "<p>That seems cumbersome, since I will have many items inside the mega enum. Thanks for <a class=\"mention\" href=\"/u/bluss\">@bluss</a>,</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let major-enum = enum.with(spacing: 0.5cm)\n</code></pre>\n<p>worked perfectly.</p>",
      "raw": "That seems cumbersome, since I will have many items inside the mega enum. Thanks for @bluss,\n\n```\n#let major-enum = enum.with(spacing: 0.5cm)\n```\n\nworked perfectly.",
      "reply_to_post_number": 9,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 24.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1309
    },
    {
      "id": 12672,
      "post_number": 11,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-17T17:37:28.359Z",
      "updated_at": "2025-05-17T17:37:42.730Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"AprilGrimoire\" data-post=\"10\" data-topic=\"4135\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/aprilgrimoire/48/2108_2.png\" class=\"avatar\"> AprilGrimoire:</div>\n<blockquote>\n<p>That seems cumbersome</p>\n</blockquote>\n</aside>\n<p>You are literally providing a <code>custom-enum</code>, but you are calling it <code>major-enum</code> here.</p>",
      "raw": "[quote=\"AprilGrimoire, post:10, topic:4135\"]\nThat seems cumbersome\n[/quote]\n\nYou are literally providing a `custom-enum`, but you are calling it `major-enum` here.",
      "reply_to_post_number": 10,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12674,
      "post_number": 12,
      "username": "AprilGrimoire",
      "name": "AprilGrimoire",
      "created_at": "2025-05-17T17:39:33.817Z",
      "updated_at": "2025-05-17T17:42:38.367Z",
      "cooked": "<p>Yeah, that’s my problem: I wanted to provide a custom-enum, but I didn’t know the <code>function.with(...)</code> syntax, and there isn’t a dedicated documentation page for <code>with</code>.</p>\n<p>EDIT: I looked for <code>set</code> in the documentations, but didn’t find it.</p>",
      "raw": "Yeah, that's my problem: I wanted to provide a custom-enum, but I didn't know the `function.with(...)` syntax, and there isn't a dedicated documentation page for `with`.\n\nEDIT: I looked for `set` in the documentations, but didn't find it.",
      "reply_to_post_number": 11,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1309
    },
    {
      "id": 12675,
      "post_number": 13,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-17T17:42:37.557Z",
      "updated_at": "2025-05-17T17:43:22.139Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"AprilGrimoire\" data-post=\"12\" data-topic=\"4135\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/aprilgrimoire/48/2108_2.png\" class=\"avatar\"> AprilGrimoire:</div>\n<blockquote>\n<p>there isn’t a dedicated documentation page for <code>with</code>.</p>\n</blockquote>\n</aside>\n<p><a href=\"https://typst.app/docs/reference/foundations/function/#definitions-with\"><code>function.with</code></a></p>\n<p><a href=\"https://typst.app/docs/tutorial/making-a-template/#separate-file:~:text=Another%20thing%20that%20you%20can,this%20style%20of%20function%20call\" class=\"inline-onebox\">Making a Template – Typst Documentation</a>.</p>\n<p>If this is not enough, you can request more documentation about this.</p>",
      "raw": "[quote=\"AprilGrimoire, post:12, topic:4135\"]\nthere isn’t a dedicated documentation page for `with`.\n[/quote]\n\n[`function.with`](https://typst.app/docs/reference/foundations/function/#definitions-with)\n\nhttps://typst.app/docs/tutorial/making-a-template/#separate-file:~:text=Another%20thing%20that%20you%20can,this%20style%20of%20function%20call.\n\nIf this is not enough, you can request more documentation about this.",
      "reply_to_post_number": 12,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 22,
      "score": 14.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12678,
      "post_number": 14,
      "username": "AprilGrimoire",
      "name": "AprilGrimoire",
      "created_at": "2025-05-17T18:41:01.267Z",
      "updated_at": "2025-05-17T18:41:01.267Z",
      "cooked": "<p>Where can I request for new documentation? Can I request for it here?</p>\n<ul>\n<li>There is a ref of <code>set</code> in <code>function.with</code>, but not its reverse.</li>\n<li>Instead of <code>styling</code>, I think they could be best categorized as <code>scripting</code>.</li>\n</ul>",
      "raw": "Where can I request for new documentation? Can I request for it here?\n\n* There is a ref of `set` in `function.with`, but not its reverse.\n* Instead of `styling`, I think they could be best categorized as `scripting`.",
      "reply_to_post_number": 13,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1309
    },
    {
      "id": 12679,
      "post_number": 15,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-17T21:24:51.575Z",
      "updated_at": "2025-05-17T21:24:51.575Z",
      "cooked": "<p>To track it, it needs to be in the <a href=\"https://github.com/typst/typst/issues\">issue tracker</a>.</p>",
      "raw": "To track it, it needs to be in the [issue tracker](https://github.com/typst/typst/issues).",
      "reply_to_post_number": 14,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:43.936277"
}
{
  "topic_metadata": {
    "id": 4139,
    "title": "How to render math equations inline and in CeTZ in html export?",
    "slug": "how-to-render-math-equations-inline-and-in-cetz-in-html-export",
    "posts_count": 9,
    "created_at": "2025-05-17T17:21:02.286Z",
    "last_posted_at": "2025-05-22T15:33:41.215Z",
    "views": 152,
    "like_count": 7,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "math",
      "cetz",
      "html"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 862
  },
  "posts": [
    {
      "id": 12663,
      "post_number": 1,
      "username": "shigma",
      "name": "shigma",
      "created_at": "2025-05-17T17:21:02.388Z",
      "updated_at": "2025-05-22T19:17:11.566Z",
      "cooked": "<p>Hi! I have two questions about HTML rendering:</p>\n<ol>\n<li>When rendering inline math equations, the left and right content will be separated into different <code>&lt;p&gt;</code> s. Is this expected? Is there a way to output it in the same <code>&lt;p&gt;</code> (or simply not wrap the <code>&lt;p&gt;</code> )?,</li>\n<li>When using cetz, the math equations in the content disappears. How can I make it display?</li>\n</ol>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.4\"\n#show math.equation: html.frame\n#let canvas(..args) = html.frame(cetz.canvas(..args))\n#import cetz.draw: *\n\na$x$b // display as &lt;p&gt;a&lt;/p&gt;&lt;svg&gt;..&lt;/svg&gt;&lt;p&gt;b&lt;/p&gt;\n\n// cetz example\n#let data = (\n  [A$x$b], ([B], [C], [D]), ([E], [F])\n)\n\n#canvas({\n  import cetz.draw: *\n\n  set-style(content: (padding: .2),\n    fill: gray.lighten(70%),\n    stroke: gray.lighten(70%))\n\n  cetz.tree.tree(data, spread: 2.5, grow: 1.5, draw-node: (node, ..) =&gt; {\n    circle((), radius: .45, stroke: none)\n    content((), node.content)\n  }, draw-edge: (from, to, ..) =&gt; {\n    line((a: from, number: .6, b: to),\n         (a: to, number: .6, b: from), mark: (end: \"&gt;\"))\n  }, name: \"tree\")\n\n  // Draw a \"custom\" connection between two nodes\n  let (a, b) = (\"tree.0-0-1\", \"tree.0-1-0\",)\n  line((a, .6, b), (b, .6, a), mark: (end: \"&gt;\", start: \"&gt;\"))\n})\n</code></pre>",
      "raw": "Hi! I have two questions about HTML rendering:\n\n1. When rendering inline math equations, the left and right content will be separated into different `<p>` s. Is this expected? Is there a way to output it in the same `<p>` (or simply not wrap the `<p>` )?,\n2. When using cetz, the math equations in the content disappears. How can I make it display?\n\n```\n#import \"@preview/cetz:0.3.4\"\n#show math.equation: html.frame\n#let canvas(..args) = html.frame(cetz.canvas(..args))\n#import cetz.draw: *\n\na$x$b // display as <p>a</p><svg>..</svg><p>b</p>\n\n// cetz example\n#let data = (\n  [A$x$b], ([B], [C], [D]), ([E], [F])\n)\n\n#canvas({\n  import cetz.draw: *\n\n  set-style(content: (padding: .2),\n    fill: gray.lighten(70%),\n    stroke: gray.lighten(70%))\n\n  cetz.tree.tree(data, spread: 2.5, grow: 1.5, draw-node: (node, ..) => {\n    circle((), radius: .45, stroke: none)\n    content((), node.content)\n  }, draw-edge: (from, to, ..) => {\n    line((a: from, number: .6, b: to),\n         (a: to, number: .6, b: from), mark: (end: \">\"))\n  }, name: \"tree\")\n\n  // Draw a \"custom\" connection between two nodes\n  let (a, b) = (\"tree.0-0-1\", \"tree.0-1-0\",)\n  line((a, .6, b), (b, .6, a), mark: (end: \">\", start: \">\"))\n})\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 121.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1611
    },
    {
      "id": 12666,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-05-17T17:27:59.035Z",
      "updated_at": "2025-05-17T17:27:59.035Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/shigma\">@shigma</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @shigma, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 21.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 12671,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-05-17T17:36:42.885Z",
      "updated_at": "2025-05-17T17:36:42.885Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"shigma\" data-post=\"1\" data-topic=\"4139\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/shigma/48/3000_2.png\" class=\"avatar\"> shigma:</div>\n<blockquote>\n<ol>\n<li>When rendering inline math equations, the left and right content will be separated into different <code>&lt;p&gt;</code> s. Is this expected? Is there a way to output it in the same <code>&lt;p&gt;</code> (or simply not wrap the <code>&lt;p&gt;</code> )?,</li>\n</ol>\n</blockquote>\n</aside>\n<p>This is likely because <code>html.frame</code> isn’t an inline element (only text decoration elements and horizontal spacing are inline), so it interrupts paragraphs, similarly to e.g. <code>image</code> outside of html export. You’ll need to wrap them in a <code>box</code> for inline equations:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation: html.frame\n#show math.equation.where(block: false): box\n</code></pre>\n<aside class=\"quote no-group\" data-username=\"shigma\" data-post=\"1\" data-topic=\"4139\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/shigma/48/3000_2.png\" class=\"avatar\"> shigma:</div>\n<blockquote>\n<ol start=\"2\">\n<li>When using cetz, the math equations in the content disappears. How can I make it display?</li>\n</ol>\n</blockquote>\n</aside>\n<p>That’s because you’re wrapping the canvas in a frame, causing the canvas to be exported as SVG, and then the show rule wrapping equations in <code>html.frame</code> is being applied, which has no effect in SVG export (only in HTML export).</p>\n<p>You’ll need to ensure the show rule is not applied inside a CeTZ canvas. One way to do this involves <code>state</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let in-canvas = state(\"in-cetz-canvas\", false)\n#show math.equation: it =&gt; context {\n  if in-canvas.get() { it } else { html.frame(it) }\n}\n#show math.equation.where(block: false): box\n#let canvas(..args) = {\n  in-canvas.update(true)\n  html.frame(cetz.canvas(..args))\n  in-canvas.update(false)\n  // NOTE: this simplified version assumes you won't\n  // create a canvas inside a canvas.\n}\n</code></pre>",
      "raw": "[quote=\"shigma, post:1, topic:4139\"]\n1. When rendering inline math equations, the left and right content will be separated into different `<p>` s. Is this expected? Is there a way to output it in the same `<p>` (or simply not wrap the `<p>` )?,\n[/quote]\n\nThis is likely because `html.frame` isn't an inline element (only text decoration elements and horizontal spacing are inline), so it interrupts paragraphs, similarly to e.g. `image` outside of html export. You'll need to wrap them in a `box` for inline equations:\n\n```typ\n#show math.equation: html.frame\n#show math.equation.where(block: false): box\n```\n\n[quote=\"shigma, post:1, topic:4139\"]\n2. When using cetz, the math equations in the content disappears. How can I make it display?\n[/quote]\n\nThat's because you're wrapping the canvas in a frame, causing the canvas to be exported as SVG, and then the show rule wrapping equations in `html.frame` is being applied, which has no effect in SVG export (only in HTML export).\n\nYou'll need to ensure the show rule is not applied inside a CeTZ canvas. One way to do this involves `state`:\n\n```typ\n#let in-canvas = state(\"in-cetz-canvas\", false)\n#show math.equation: it => context {\n  if in-canvas.get() { it } else { html.frame(it) }\n}\n#show math.equation.where(block: false): box\n#let canvas(..args) = {\n  in-canvas.update(true)\n  html.frame(cetz.canvas(..args))\n  in-canvas.update(false)\n  // NOTE: this simplified version assumes you won't\n  // create a canvas inside a canvas.\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 2,
      "reads": 31,
      "score": 66.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 12676,
      "post_number": 4,
      "username": "shigma",
      "name": "shigma",
      "created_at": "2025-05-17T17:42:59.750Z",
      "updated_at": "2025-05-17T17:42:59.750Z",
      "cooked": "<p>Thank you very much for your answer! All the math equations now display as expected! I feel a little more understanding of typst’s <code>#show</code> rule now.</p>",
      "raw": "Thank you very much for your answer! All the math equations now display as expected! I feel a little more understanding of typst's `#show` rule now.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 56.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1611
    },
    {
      "id": 12677,
      "post_number": 5,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-05-17T17:48:09.730Z",
      "updated_at": "2025-05-17T17:48:09.730Z",
      "cooked": "<p>Here’s a more flexible solution which ought to work in more situations (not only in a CeTZ canvas):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation: it =&gt; context {\n  // only wrap in frame on html export\n  if target() == \"html\" {\n    // wrap frames of inline equations in a box\n    // so they don't interrupt the paragraph\n    show: if it.block { it =&gt; it } else { box }\n    html.frame(it)\n  } else {\n    it\n  }\n}\n</code></pre>\n<p>Replacing the original math equation show rule in your post’s example code with the code above is enough to fix both problems.</p>",
      "raw": "Here's a more flexible solution which ought to work in more situations (not only in a CeTZ canvas):\n\n```typ\n#show math.equation: it => context {\n  // only wrap in frame on html export\n  if target() == \"html\" {\n    // wrap frames of inline equations in a box\n    // so they don't interrupt the paragraph\n    show: if it.block { it => it } else { box }\n    html.frame(it)\n  } else {\n    it\n  }\n}\n```\n\nReplacing the original math equation show rule in your post's example code with the code above is enough to fix both problems.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 31.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 12836,
      "post_number": 6,
      "username": "shigma",
      "name": "shigma",
      "created_at": "2025-05-21T03:13:53.489Z",
      "updated_at": "2025-05-21T03:13:53.489Z",
      "cooked": "<p>Another question is that when generating HTML, we often have to write code like this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#html.frame(cetz.canvas(..))\n#html.frame(fletcher.diagram(..))\n</code></pre>\n<p>Is there a way, similar to <code>#show math.equation</code>, to omit the <code>html.frame</code> here?</p>",
      "raw": "Another question is that when generating HTML, we often have to write code like this:\n\n```typst\n#html.frame(cetz.canvas(..))\n#html.frame(fletcher.diagram(..))\n```\n\nIs there a way, similar to `#show math.equation`, to omit the `html.frame` here?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1611
    },
    {
      "id": 12888,
      "post_number": 7,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-05-21T15:19:45.607Z",
      "updated_at": "2025-05-21T15:20:08.698Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"shigma\" data-post=\"6\" data-topic=\"4139\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/shigma/48/3000_2.png\" class=\"avatar\"> shigma:</div>\n<blockquote>\n<p>Is there a way, similar to <code>#show math.equation</code>, to omit the <code>html.frame</code> here?</p>\n</blockquote>\n</aside>\n<p>Yes:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let canvas(..args) = html.frame(cetz.canvas(..args))\n\n// Usage:\n#canvas({\n  import cetz.draw: *\n  // and so on\n})\n</code></pre>",
      "raw": "[quote=\"shigma, post:6, topic:4139\"]\nIs there a way, similar to `#show math.equation`, to omit the `html.frame` here?\n[/quote]\n\nYes:\n\n```\n#let canvas(..args) = html.frame(cetz.canvas(..args))\n\n// Usage:\n#canvas({\n  import cetz.draw: *\n  // and so on\n})\n```",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 20,
      "score": 19.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 12921,
      "post_number": 8,
      "username": "shigma",
      "name": "shigma",
      "created_at": "2025-05-22T05:10:54.508Z",
      "updated_at": "2025-05-22T05:10:54.508Z",
      "cooked": "<p>Well, I know this way of writing, but similar encapsulation is needed for every packages. What I really want is a piece of “prelude” code that can be applied to any HTML rendering scenario and is no different in use from other environments. The <code>#show math.equation</code> above achieves this perfectly <img src=\"https://forum.typst.app/images/emoji/apple/+1.png?v=12\" title=\":+1:\" class=\"emoji\" alt=\":+1:\" loading=\"lazy\" width=\"20\" height=\"20\"> , but the <code>#let canvas</code> here doesn’t (because I can’t include every package, and I can’t prevent users from using the <code>cetz.canvas</code> directly).</p>\n<p>Background: I’m developing <a href=\"https://github.com/shigma/slidev-addon-typst\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">GitHub - shigma/slidev-addon-typst: Typst addon for Slidev</a>, and as a library I don’t want the development experience to be interrupted by <code>html.frame</code>.</p>",
      "raw": "Well, I know this way of writing, but similar encapsulation is needed for every packages. What I really want is a piece of \"prelude\" code that can be applied to any HTML rendering scenario and is no different in use from other environments. The `#show math.equation` above achieves this perfectly :+1: , but the `#let canvas` here doesn't (because I can't include every package, and I can't prevent users from using the `cetz.canvas` directly).\n\nBackground: I'm developing https://github.com/shigma/slidev-addon-typst, and as a library I don't want the development experience to be interrupted by `html.frame`.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 8.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1611
    },
    {
      "id": 12954,
      "post_number": 9,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-22T15:33:41.215Z",
      "updated_at": "2025-05-22T15:35:38.090Z",
      "cooked": "<p>I’m not sure if this is currently possible to not use <code>html</code> module inline for HTML to work. I can only think of</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// https://forum.typst.app/t/3701/2\n#let target = dictionary(std).at(\"target\", default: () =&gt; \"paged\")\n\n#let some-wrapper(it) = context {\n    if target() == \"paged\" { it } else { html.frame(it) }\n}\n</code></pre>\n<p>Maybe you can do <code>show box/block: html.frame</code>, but that is probably very bad.</p>",
      "raw": "I'm not sure if this is currently possible to not use `html` module inline for HTML to work. I can only think of\n\n```typ\n// https://forum.typst.app/t/3701/2\n#let target = dictionary(std).at(\"target\", default: () => \"paged\")\n\n#let some-wrapper(it) = context {\n    if target() == \"paged\" { it } else { html.frame(it) }\n}\n```\n\nMaybe you can do `show box/block: html.frame`, but that is probably very bad.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 14,
      "score": 17.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:43.216374"
}
{
  "topic_metadata": {
    "id": 4145,
    "title": "How can I access which position in a grid a cell is?",
    "slug": "how-can-i-access-which-position-in-a-grid-a-cell-is",
    "posts_count": 5,
    "created_at": "2025-05-18T17:02:49.533Z",
    "last_posted_at": "2025-05-18T19:01:40.812Z",
    "views": 34,
    "like_count": 3,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "bluss",
    "tags": [],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 377
  },
  "posts": [
    {
      "id": 12706,
      "post_number": 1,
      "username": "Sinthoras",
      "name": "",
      "created_at": "2025-05-18T17:02:49.865Z",
      "updated_at": "2025-05-18T17:02:49.865Z",
      "cooked": "<p>I create a three column grid like this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#grid(\n  columns: (28%, 28%, 28%),\n  rows: 17%,\n  gutter: 1.3em,\n  person(\n    numarg: \"1\",\n    arg: \"A\",\n  ),\n    person(\n    numarg: \"2\",\n    arg: \"B\",\n  ),\n    person(\n    numarg: \"3\",\n    arg: \"C\",\n  ),\n)\n</code></pre>\n<p>where in my case I call the function <code>person</code> more often than 3 times and with more different arguments that <code>arg</code>. The important thing is that there is one argument that is always just the number at which position this person gets called.</p>\n<p>Now, if I exchange two persons, then I always have to also change the numbers to reflect their new position. The <code>numarg</code> argument feels redundant to me, because it is already completely fixed by the position, where in the grid it is.</p>\n<p>Is there a way to circumvent the redundancy and program it, such that either I have to just change the number and then the position in the grid gets matched accordingly or just write the position and the numarg gets calculated from the position?</p>",
      "raw": "I create a three column grid like this:\n```typst\n#grid(\n  columns: (28%, 28%, 28%),\n  rows: 17%,\n  gutter: 1.3em,\n  person(\n    numarg: \"1\",\n    arg: \"A\",\n  ),\n    person(\n    numarg: \"2\",\n    arg: \"B\",\n  ),\n    person(\n    numarg: \"3\",\n    arg: \"C\",\n  ),\n)\n```\nwhere in my case I call the function `person` more often than 3 times and with more different arguments that `arg`. The important thing is that there is one argument that is always just the number at which position this person gets called.\n\nNow, if I exchange two persons, then I always have to also change the numbers to reflect their new position. The `numarg` argument feels redundant to me, because it is already completely fixed by the position, where in the grid it is.\n\nIs there a way to circumvent the redundancy and program it, such that either I have to just change the number and then the position in the grid gets matched accordingly or just write the position and the numarg gets calculated from the position?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 24.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 511
    },
    {
      "id": 12707,
      "post_number": 2,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-05-18T17:11:48.506Z",
      "updated_at": "2025-05-18T17:12:49.564Z",
      "cooked": "<p>In this exact case I’d write it like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#grid(\n  columns: (28%, 28%, 28%),\n  rows: 17%,\n  gutter: 1.3em,\n  ..(\"A\", \"B\", \"C\").enumerate(start: 1).map(((i, arg)) =&gt; person(numarg: str(i), arg: arg))\n)\n</code></pre>\n<p>You could <code>zip</code> in more arrays for multiple arguments.</p>",
      "raw": "In this exact case I'd write it like this:\n\n```\n#grid(\n  columns: (28%, 28%, 28%),\n  rows: 17%,\n  gutter: 1.3em,\n  ..(\"A\", \"B\", \"C\").enumerate(start: 1).map(((i, arg)) => person(numarg: str(i), arg: arg))\n)\n```\n\nYou could `zip` in more arrays for multiple arguments.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 21,
      "score": 44.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 1272
    },
    {
      "id": 12708,
      "post_number": 3,
      "username": "Sinthoras",
      "name": "",
      "created_at": "2025-05-18T17:23:34.857Z",
      "updated_at": "2025-05-18T17:23:34.857Z",
      "cooked": "<p>Thank you! I could adapt your code to do exactly what I want. :)</p>",
      "raw": "Thank you! I could adapt your code to do exactly what I want. :)",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 19.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 511
    },
    {
      "id": 12709,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-18T18:50:53.295Z",
      "updated_at": "2025-05-18T19:31:57.660Z",
      "cooked": "<p>You can’t directly access cell position within cell unless you use <code>show grid.cell.where(x: 0, y: 0)</code>, but to set cell position you can use <a href=\"https://typst.app/docs/reference/layout/grid/#definitions-cell-x\"><code>grid.cell.x</code></a> and <a href=\"https://typst.app/docs/reference/layout/grid/#definitions-cell-y\"><code>grid.cell.y</code></a>.</p>\n<aside class=\"quote no-group\" data-username=\"Sinthoras\" data-post=\"1\" data-topic=\"4145\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/F64C96/48.png\" class=\"avatar\"> Sinthoras:</div>\n<blockquote>\n<p>The <code>numarg</code> argument feels redundant to me, because it is already completely fixed by the position, where in the grid it is.</p>\n</blockquote>\n</aside>\n<p>Then why are you using it? Do you need to display cell order number?</p>",
      "raw": "You can't directly access cell position within cell unless you use `show grid.cell.where(x: 0, y: 0)`, but to set cell position you can use [`grid.cell.x`](https://typst.app/docs/reference/layout/grid/#definitions-cell-x) and [`grid.cell.y`](https://typst.app/docs/reference/layout/grid/#definitions-cell-y).\n\n[quote=\"Sinthoras, post:1, topic:4145\"]\nThe `numarg` argument feels redundant to me, because it is already completely fixed by the position, where in the grid it is.\n[/quote]\n\nThen why are you using it? Do you need to display cell order number?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 18,
      "score": 13.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12710,
      "post_number": 5,
      "username": "Sinthoras",
      "name": "",
      "created_at": "2025-05-18T19:01:40.812Z",
      "updated_at": "2025-05-18T19:01:40.812Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"4\" data-topic=\"4145\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>Then why are you using it? Do you need to display cell order number?</p>\n</blockquote>\n</aside>\n<p>Yes, I need it. It is for an election poster, where the number shows the place on the party list. (I will probably even post it in showcase, once it is public, if I remember to do so.)</p>",
      "raw": "[quote=\"Andrew, post:4, topic:4145\"]\nThen why are you using it? Do you need to display cell order number?\n[/quote]\n\nYes, I need it. It is for an election poster, where the number shows the place on the party list. (I will probably even post it in showcase, once it is public, if I remember to do so.)",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 17,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 511
    }
  ],
  "scraped_at": "2025-06-10T09:47:42.477249"
}
{
  "topic_metadata": {
    "id": 4154,
    "title": "Scrolling pdf document is not possible with the mouse scroll wheel",
    "slug": "scrolling-pdf-document-is-not-possible-with-the-mouse-scroll-wheel",
    "posts_count": 3,
    "created_at": "2025-05-19T09:16:04.744Z",
    "last_posted_at": "2025-05-19T10:10:55.485Z",
    "views": 27,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Andrew_Duncan",
    "tags": [
      "tooling"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 111
  },
  "posts": [
    {
      "id": 12732,
      "post_number": 1,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-19T09:16:04.983Z",
      "updated_at": "2025-05-19T15:38:30.708Z",
      "cooked": "<p>Hi all,</p>\n<p>I am creating my pdf document using typst. I have seen a peculiar behaviour. It is possible to scroll the document using page down or up of the keyboard. Unfortunately, it is not possible when I use my mouse scroll wheel. Any idea of the root cause of this problem?</p>\n<p>Thank you</p>",
      "raw": "Hi all,\n\nI am creating my pdf document using typst. I have seen a peculiar behaviour. It is possible to scroll the document using page down or up of the keyboard. Unfortunately, it is not possible when I use my mouse scroll wheel. Any idea of the root cause of this problem?\n\nThank you",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 8.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12733,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-05-19T09:41:14.832Z",
      "updated_at": "2025-05-19T09:41:14.832Z",
      "cooked": "<p>It seems unlikely that this would be related to Typst. What’s your PDF viewer? Did you try another PDF in the same viewer?</p>",
      "raw": "It seems unlikely that this would be related to Typst. What's your PDF viewer? Did you try another PDF in the same viewer?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 15,
      "score": 23.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 12735,
      "post_number": 3,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-19T10:10:55.485Z",
      "updated_at": "2025-05-19T10:10:55.485Z",
      "cooked": "<p>I think the problem is in the pdf reader and not typst. Scrolling the document through the mouse wheel is fine with Acrobat Reader (Windows). The problem happened with my Linux pdf reader.</p>",
      "raw": "I think the problem is in the pdf reader and not typst. Scrolling the document through the mouse wheel is fine with Acrobat Reader (Windows). The problem happened with my Linux pdf reader.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1560
    }
  ],
  "scraped_at": "2025-06-10T09:47:41.751584"
}
{
  "topic_metadata": {
    "id": 4156,
    "title": "How to generate a dashed stroke in two colours using fletcher?",
    "slug": "how-to-generate-a-dashed-stroke-in-two-colours-using-fletcher",
    "posts_count": 5,
    "created_at": "2025-05-19T10:24:20.765Z",
    "last_posted_at": "2025-05-19T14:01:57.418Z",
    "views": 50,
    "like_count": 6,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "scripting",
      "fletcher"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 457
  },
  "posts": [
    {
      "id": 12736,
      "post_number": 1,
      "username": "Hakkape",
      "name": "Alex H",
      "created_at": "2025-05-19T10:24:20.892Z",
      "updated_at": "2025-05-19T12:31:36.926Z",
      "cooked": "<p>Hi everyone,<br>\ni would like to use a dashed stroke that alternates between two colors. My specific use case is to color the border of a node in fletcher in two colors.<br>\nI have looked into the documentation for strokes (<a href=\"https://typst.app/docs/reference/visualize/stroke/\" class=\"inline-onebox\">Stroke Type – Typst Documentation</a>) and tried using a tiling, but the best i could come up with is as below:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// pattern that alternates two colors\n#let pat = tiling(size: (20pt, 10pt), relative: \"parent\")[\n  #place(square(size: 10pt, fill: primary_color))\n  #place(dx: 10pt, square(size: 10pt, fill: primary_color.lighten(40%)))\n]\n\n// test: draw diagram with a node that uses the pattern as fill\n#diagram({\n  node((0, 0), text(\"test\"), stroke: 5pt + pat, name: \"test\", shape: circle)\n})\n</code></pre>\n<p>resulting in the following output:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/3/36fcab6490790dfc2cd5ba63e554c60ea2e05f7b.png\" alt=\"Screenshot_2025-05-19_12-23-32\" data-base62-sha1=\"7Qr7LIRhXTXT4H4tT9wU6HhgxCj\" width=\"200\" height=\"181\"></p>\n<p>Would be thankful for any ideas how to achieve a coloring that follows the outline of the circle.</p>",
      "raw": "Hi everyone,\ni would like to use a dashed stroke that alternates between two colors. My specific use case is to color the border of a node in fletcher in two colors. \nI have looked into the documentation for strokes (https://typst.app/docs/reference/visualize/stroke/) and tried using a tiling, but the best i could come up with is as below:\n```typ\n// pattern that alternates two colors\n#let pat = tiling(size: (20pt, 10pt), relative: \"parent\")[\n  #place(square(size: 10pt, fill: primary_color))\n  #place(dx: 10pt, square(size: 10pt, fill: primary_color.lighten(40%)))\n]\n\n// test: draw diagram with a node that uses the pattern as fill\n#diagram({\n  node((0, 0), text(\"test\"), stroke: 5pt + pat, name: \"test\", shape: circle)\n})\n```\nresulting in the following output:\n![Screenshot_2025-05-19_12-23-32|200x181](upload://7Qr7LIRhXTXT4H4tT9wU6HhgxCj.png)\n\nWould be thankful for any ideas how to achieve a coloring that follows the outline of the circle.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 95.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1141
    },
    {
      "id": 12741,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-05-19T12:02:37.841Z",
      "updated_at": "2025-05-19T12:41:14.974Z",
      "cooked": "<p>You can use <a href=\"https://typst.app/docs/reference/visualize/gradient/#definitions-conic\"><code>gradient.conic()</code></a> to get the dashed stroke. <a href=\"https://typst.app/docs/reference/visualize/gradient/#definitions-sharp\"><code>gradient.sharp()</code></a> then makes the gradient discrete and <a href=\"https://typst.app/docs/reference/visualize/gradient/#definitions-repeat\"><code>gradient.repeat()</code></a> defines the number of periods around the circle.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/fletcher:0.5.7\" as fletcher: diagram, node, edge\n\n#let pat = gradient.conic(purple, purple.lighten(40%)).sharp(2).repeat(15)\n\n#diagram({\n  node((0, 0), text(\"test\"), stroke: pat, name: \"test\", shape: circle)\n})\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/d/dd0077206469ab88ea10a59debce9f6f773f2c6f.png\" alt=\"forum_4156_two-colored-stroke\" data-base62-sha1=\"vx4w70j4lkHWDQ0HPxrPm8lef1l\" width=\"151\" height=\"151\"></p>\n<p>If you add a code example to your post, please make sure that it compiles without error. It is good that you minimized the example to only show your actual issue, but in this case the variable <code>primary_color</code> and the import of fletcher were missing.</p>",
      "raw": "You can use [`gradient.conic()`](https://typst.app/docs/reference/visualize/gradient/#definitions-conic) to get the dashed stroke. [`gradient.sharp()`](https://typst.app/docs/reference/visualize/gradient/#definitions-sharp) then makes the gradient discrete and [`gradient.repeat()`](https://typst.app/docs/reference/visualize/gradient/#definitions-repeat) defines the number of periods around the circle.\n\n```\n#import \"@preview/fletcher:0.5.7\" as fletcher: diagram, node, edge\n\n#let pat = gradient.conic(purple, purple.lighten(40%)).sharp(2).repeat(15)\n\n#diagram({\n  node((0, 0), text(\"test\"), stroke: pat, name: \"test\", shape: circle)\n})\n```\n\n![forum_4156_two-colored-stroke|151x151](upload://vx4w70j4lkHWDQ0HPxrPm8lef1l.png)\n\nIf you add a code example to your post, please make sure that it compiles without error. It is good that you minimized the example to only show your actual issue, but in this case the variable `primary_color` and the import of fletcher were missing.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 22,
      "score": 64.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 12743,
      "post_number": 3,
      "username": "Hakkape",
      "name": "Alex H",
      "created_at": "2025-05-19T12:42:38.893Z",
      "updated_at": "2025-05-19T12:42:38.893Z",
      "cooked": "<p>Thanks, that works just like i need it!</p>",
      "raw": "Thanks, that works just like i need it!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1141
    },
    {
      "id": 12748,
      "post_number": 4,
      "username": "Jollywatt",
      "name": "Joseph Wilson",
      "created_at": "2025-05-19T13:57:31.127Z",
      "updated_at": "2025-05-21T00:04:35.353Z",
      "cooked": "<p>An alternative solution could be to use two strokes. Fletcher doesn’t support this with one node, but you can write your own function which adds two nodes and hides the second node’s label/fill.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/fletcher:0.5.7\" as fletcher: diagram, node, edge\n\n#let doublenode(pos, label, ..args, stroke: 1pt + black, secondary: black) = {\n\tnode(pos, label, ..args, stroke: stroke)\n\tnode(pos, hide(label), ..args, fill: none, stroke: (dash: (5pt, 5pt), paint: secondary, thickness: stroke.thickness))\n}\n\n#diagram({\n\tdoublenode((0, 0), text(\"test\"), name: \"test\", shape: circle,\n\t\tstroke: 4pt + purple, secondary: purple.darken(50%))\n})\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/f/f82dc965e01422f456a62976502ce0b1e98015a9.png\" alt=\"Screenshot 2025-05-19 at 14.56.51\" data-base62-sha1=\"zpuvDo4RP5EjJSlS9ZbmL25gPax\" width=\"128\" height=\"132\"></p>",
      "raw": "An alternative solution could be to use two strokes. Fletcher doesn't support this with one node, but you can write your own function which adds two nodes and hides the second node's label/fill.\n\n```typ\n#import \"@preview/fletcher:0.5.7\" as fletcher: diagram, node, edge\n\n#let doublenode(pos, label, ..args, stroke: 1pt + black, secondary: black) = {\n\tnode(pos, label, ..args, stroke: stroke)\n\tnode(pos, hide(label), ..args, fill: none, stroke: (dash: (5pt, 5pt), paint: secondary, thickness: stroke.thickness))\n}\n\n#diagram({\n\tdoublenode((0, 0), text(\"test\"), name: \"test\", shape: circle,\n\t\tstroke: 4pt + purple, secondary: purple.darken(50%))\n})\n```\n![Screenshot 2025-05-19 at 14.56.51|256x264, 50%](upload://zpuvDo4RP5EjJSlS9ZbmL25gPax.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 20,
      "score": 74.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 713
    },
    {
      "id": 12749,
      "post_number": 5,
      "username": "Hakkape",
      "name": "Alex H",
      "created_at": "2025-05-19T14:01:57.418Z",
      "updated_at": "2025-05-19T14:01:57.418Z",
      "cooked": "<p>Thanks, i suppose that is a reasonable workaround and has the benefit of also working with other shapes. I have now run into the problem that the gradient approach does not work for edges in a fletcher graph because the gradient is not oriented along the edge.</p>",
      "raw": "Thanks, i suppose that is a reasonable workaround and has the benefit of also working with other shapes. I have now run into the problem that the gradient approach does not work for edges in a fletcher graph because the gradient is not oriented along the edge.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1141
    }
  ],
  "scraped_at": "2025-06-10T09:47:41.005653"
}
{
  "topic_metadata": {
    "id": 4161,
    "title": "How to add a caption to a pintorita UML (or any) diagram?",
    "slug": "how-to-add-a-caption-to-a-pintorita-uml-or-any-diagram",
    "posts_count": 3,
    "created_at": "2025-05-19T13:49:24.677Z",
    "last_posted_at": "2025-05-19T14:25:35.018Z",
    "views": 37,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "xkevio",
    "tags": [
      "caption"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 91
  },
  "posts": [
    {
      "id": 12746,
      "post_number": 1,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-19T13:49:24.861Z",
      "updated_at": "2025-05-19T14:52:24.965Z",
      "cooked": "<p>Hi all,<br>\nI would like to add caption to the following pintorita UML diagram. Any idea how to do it?<br>\nThank you.</p>\n<pre data-code-wrap=\"pintora\"><code class=\"lang-pintora\">\nmindmap\n\n@param layoutDirection TB\n\n+ A\n\n++ B\n\n+++ C\n\n+++ D\n\n++ E\n\n+++ F\n\n+++ G\n\n++ H\n\n+++ I\n\n+++ J\n\n</code></pre>",
      "raw": "Hi all,\nI would like to add caption to the following pintorita UML diagram. Any idea how to do it?\nThank you.\n\n```pintora\n\nmindmap\n\n@param layoutDirection TB\n\n+ A\n\n++ B\n\n+++ C\n\n+++ D\n\n++ E\n\n+++ F\n\n+++ G\n\n++ H\n\n+++ I\n\n+++ J\n\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 63.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12766,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2025-05-19T14:19:17.114Z",
      "updated_at": "2025-05-19T14:19:17.114Z",
      "cooked": "<p>In order to add captions to diagrams, you would wrap them in a <a href=\"https://typst.app/docs/reference/model/figure/\"><code>figure</code></a> and use its <code>caption</code> argument.</p>",
      "raw": "In order to add captions to diagrams, you would wrap them in a [`figure`](https://typst.app/docs/reference/model/figure/) and use its `caption` argument.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 17,
      "score": 23.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 12768,
      "post_number": 3,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-19T14:25:35.018Z",
      "updated_at": "2025-05-19T15:38:01.037Z",
      "cooked": "<p>Thank you for the hint. Below is the solution</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#figure (\n  ```pintora\n  mindmap\n  @param layoutDirection TB\n  + A\n  ++ B\n  +++ C\n  +++ D\n  ++ E\n  +++ F\n  +++ G\n  ++ H\n  +++ I\n  +++ J\n```,\ncaption: [dummy text]\n)\n</code></pre>",
      "raw": "Thank you for the hint. Below is the solution\n\n````\n#figure (\n  ```pintora\n  mindmap\n  @param layoutDirection TB\n  + A\n  ++ B\n  +++ C\n  +++ D\n  ++ E\n  +++ F\n  +++ G\n  ++ H\n  +++ I\n  +++ J\n```,\ncaption: [dummy text]\n)\n````",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    }
  ],
  "scraped_at": "2025-06-10T09:47:40.275234"
}
{
  "topic_metadata": {
    "id": 4162,
    "title": "How to make parameter \"body\" of function optional without causing error?",
    "slug": "how-to-make-parameter-body-of-function-optional-without-causing-error",
    "posts_count": 2,
    "created_at": "2025-05-19T13:53:12.862Z",
    "last_posted_at": "2025-05-19T14:22:43.068Z",
    "views": 46,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 209
  },
  "posts": [
    {
      "id": 12747,
      "post_number": 1,
      "username": "Alex",
      "name": "Alex",
      "created_at": "2025-05-19T13:53:12.972Z",
      "updated_at": "2025-05-19T13:53:12.972Z",
      "cooked": "<p>Hello everyone,</p>\n<p>I have a problem with a typst function i want to declare where the behavior of said function vary depending on the body :</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let bis(n: 2, body) = { // note the argument body\n  if body == none {\n    get_number(n)\n  } else {\n   // code\n  }\n}\n</code></pre>\n<p>Such code lead to this kind of error</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#bis()[\nSome text \\\nSome text2 \\\n] // -&gt; ok\n\nSome text #bis() // -&gt; missing argument body\nSome text #bis()[] // -&gt; ok\n</code></pre>\n<p>When changing the code to have optional argument for body such as :</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let bis(n: 2, body : none) = { // note the argument body\n  if body == none {\n    get_number(n)\n  } else {\n   // code\n  }\n}\n</code></pre>\n<p>I get this behavior :<br>\nSuch code lead to this kind of error</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#bis()[\nSome text \\\nSome text2\n] // -&gt; unexpected argument\n\nSome text #bis() // -&gt; ok\nSome text #bis()[] // -&gt; unexpected argument\n</code></pre>\n<p>I want to be able to run this kind of code with no error  :</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#bis()[\nSome text \\\nSome text2 \\\n] // -&gt; ok\n\nSome text #bis() // -&gt; ok\n</code></pre>\n<p>How can i change the  <code>bis</code> function to get what i want.<br>\nThanks in advance for your answer</p>",
      "raw": "Hello everyone, \n\nI have a problem with a typst function i want to declare where the behavior of said function vary depending on the body : \n```typst\n#let bis(n: 2, body) = { // note the argument body\n  if body == none {\n    get_number(n)\n  } else {\n   // code\n  }\n}\n```\nSuch code lead to this kind of error \n```typst\n#bis()[\nSome text \\\nSome text2 \\\n] // -> ok\n\nSome text #bis() // -> missing argument body\nSome text #bis()[] // -> ok\n```\n\n\nWhen changing the code to have optional argument for body such as : \n```typst\n#let bis(n: 2, body : none) = { // note the argument body\n  if body == none {\n    get_number(n)\n  } else {\n   // code\n  }\n}\n```\n\nI get this behavior : \nSuch code lead to this kind of error \n```typst\n#bis()[\nSome text \\\nSome text2\n] // -> unexpected argument\n\nSome text #bis() // -> ok\nSome text #bis()[] // -> unexpected argument\n```\n\nI want to be able to run this kind of code with no error  : \n```typst\n#bis()[\nSome text \\\nSome text2 \\\n] // -> ok\n\nSome text #bis() // -> ok\n```\n\nHow can i change the  `bis` function to get what i want.\nThanks in advance for your answer",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 139.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 987
    },
    {
      "id": 12767,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-05-19T14:22:43.068Z",
      "updated_at": "2025-05-19T14:22:51.019Z",
      "cooked": "<p>You need to use an <a href=\"https://typst.app/docs/reference/foundations/arguments/#argument-sinks\">argument sink</a>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let bis(n: 2, ..args) = {\n  // check args.pos() here\n  // (maybe also args.named() to make sure the caller didn't pass an invalid argument)\n}\n</code></pre>",
      "raw": "You need to use an [argument sink](https://typst.app/docs/reference/foundations/arguments/#argument-sinks):\n\n```\n#let bis(n: 2, ..args) = {\n  // check args.pos() here\n  // (maybe also args.named() to make sure the caller didn't pass an invalid argument)\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 18,
      "score": 48.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:47:39.564670"
}
{
  "topic_metadata": {
    "id": 4163,
    "title": "Why does Typst produce the wrong caption?",
    "slug": "why-does-typst-produce-the-wrong-caption",
    "posts_count": 5,
    "created_at": "2025-05-19T15:11:04.053Z",
    "last_posted_at": "2025-05-19T22:43:06.210Z",
    "views": 52,
    "like_count": 3,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "figures"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 302
  },
  "posts": [
    {
      "id": 12769,
      "post_number": 1,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-19T15:11:04.331Z",
      "updated_at": "2025-05-19T15:13:14.945Z",
      "cooked": "<p>Hi all,</p>\n<p>Typst compiler produces the wrong caption “Listing 2: Elements classification” for the following figure. How to make it simply “Figure 2: Elements classification”.  Another question, how to change the dimension (width and height) of the figure below. It is possible to do it for image function. But I have no idea how to do it for figure.</p>\n<p>Thank you for your support</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#figure(\n```pintora\nmindmap\n@param layoutDirection TB\n+ A\n++ B\n+++ C\n+++ D\n++ E\n+++ G\n+++ H\n++ I\n+++ J\n+++ K\n```,\ncaption: [Elements classification]\n)\n</code></pre>",
      "raw": "Hi all,\n\nTypst compiler produces the wrong caption \"Listing 2: Elements classification\" for the following figure. How to make it simply \"Figure 2: Elements classification\".  Another question, how to change the dimension (width and height) of the figure below. It is possible to do it for image function. But I have no idea how to do it for figure.\n\nThank you for your support\n\n````\n#figure(\n```pintora\nmindmap\n@param layoutDirection TB\n+ A\n++ B\n+++ C\n+++ D\n++ E\n+++ G\n+++ H\n++ I\n+++ J\n+++ K\n```,\ncaption: [Elements classification]\n)\n````",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 29.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12770,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-05-19T15:19:09.892Z",
      "updated_at": "2025-05-20T11:44:24.106Z",
      "cooked": "<p>I assume you are using the <a href=\"https://typst.app/universe/package/pintorita\">pintorita</a> package – please make sure you mention packages next time.</p>\n<p>The “listing” supplement comes from the type of content. It seems that Typst sees there is code in the figure, but not that the code is replaced by an image by a show rule. You can get around this by manually specifying <a href=\"https://typst.app/docs/reference/model/figure/#parameters-kind\"><code>kind: image</code></a>.</p>\n<p>I think this is ultimately a bug, and I think the source of it is basically known, but I’ll look for it so this is tracked. (EDIT: same issue with a different show rule is mentioned here: <a href=\"https://github.com/typst/typst/issues/6290#issuecomment-2888878241\" class=\"inline-onebox\">Figure kind auto-detection fails when content is contextual · Issue #6290 · typst/typst · GitHub</a>)</p>",
      "raw": "I assume you are using the [pintorita](https://typst.app/universe/package/pintorita) package -- please make sure you mention packages next time.\n\nThe \"listing\" supplement comes from the type of content. It seems that Typst sees there is code in the figure, but not that the code is replaced by an image by a show rule. You can get around this by manually specifying [`kind: image`](https://typst.app/docs/reference/model/figure/#parameters-kind).\n\nI think this is ultimately a bug, and I think the source of it is basically known, but I'll look for it so this is tracked. (EDIT: same issue with a different show rule is mentioned here: https://github.com/typst/typst/issues/6290#issuecomment-2888878241)",
      "reply_to_post_number": null,
      "reply_count": 3,
      "quote_count": 0,
      "like_count": 2,
      "reads": 24,
      "score": 49.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 12771,
      "post_number": 3,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-19T15:29:41.669Z",
      "updated_at": "2025-05-19T15:29:41.669Z",
      "cooked": "<p>Hi SillyFreak,</p>\n<p>Sorry I did not mention I am using Pintorita package. Could you please give me more hints how to include your work-around solution in order to solve my problem before the bug is fixed.</p>\n<p>Thank you.</p>",
      "raw": "Hi SillyFreak,\n\nSorry I did not mention I am using Pintorita package. Could you please give me more hints how to include your work-around solution in order to solve my problem before the bug is fixed.\n\nThank you.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 4.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12772,
      "post_number": 4,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-19T15:31:18.282Z",
      "updated_at": "2025-05-19T15:31:18.282Z",
      "cooked": "<p>Thank you SillyFreak. Your worn-around has worked for me.</p>",
      "raw": "Thank you SillyFreak. Your worn-around has worked for me.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 49.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12785,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-19T22:43:06.210Z",
      "updated_at": "2025-05-19T22:43:06.210Z",
      "cooked": "<p>It’s not a bug, as the initial elements do not disappear, so the raw element is still somewhere in the limbo, just isn’t present in the output. And you do pass listing, so it makes sense. I don’t know if this behavior will be changed.</p>",
      "raw": "It's not a bug, as the initial elements do not disappear, so the raw element is still somewhere in the limbo, just isn't present in the output. And you do pass listing, so it makes sense. I don't know if this behavior will be changed.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:38.865230"
}
{
  "topic_metadata": {
    "id": 4169,
    "title": "❓ How can I prevent the \":\" character from blocking word breaks in gendered German words like Brückenbauer:innen?",
    "slug": "how-can-i-prevent-the-character-from-blocking-word-breaks-in-gendered-german-words-like-bruckenbauer-innen",
    "posts_count": 6,
    "created_at": "2025-05-19T18:29:52.679Z",
    "last_posted_at": "2025-05-19T22:50:50.957Z",
    "views": 72,
    "like_count": 4,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "bluss",
    "tags": [
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 624
  },
  "posts": [
    {
      "id": 12779,
      "post_number": 1,
      "username": "Henk",
      "name": "Henk",
      "created_at": "2025-05-19T18:29:52.775Z",
      "updated_at": "2025-05-23T06:11:59.104Z",
      "cooked": "<p>Hi everyone,</p>\n<p>I’m working on a German academic paper in Typst and trying to format the text with <strong>justify</strong> = <strong>true</strong>. My setup kinda looks like this:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">  set page(\"a4\")\n  set page(margin: (right: 2.5cm, left: 3cm, top: 2.5cm, bottom: 2.5cm))\n  let leading = 1.5 * 12pt\n  let spacing = leading + 6pt\n  set block(spacing: spacing)\n  set par(spacing: spacing)\n  set par(leading: leading)\n  set par(linebreaks:auto)\n  set text(font: \"New Computer Modern\", lang: \"de\", size: 12pt, hyphenate:auto)\n  set par(justify: true)\n\n</code></pre>\n<p>The issue I’m running into is with <strong>gender-inclusive language</strong>, specifically using a colon “:” in words like: <strong>Brückenbauer:innen</strong></p>\n<p>Typst treats the “:” as punctuation (similar to sentence punctuation), so it <strong>prevents any line breaks</strong> within the word. This causes awkward spacing between words. (see screenshot below)</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/d/d7176001563a6c4200107e0517eccf1e6db11cdc.png\" alt=\"Screenshot 2025-05-19 at 20.17.55\" data-base62-sha1=\"uGMJGD8pVLdDH55k3H2Z56ton1O\" width=\"586\" height=\"76\"></p>\n<h3><a name=\"p-12779-is-there-a-way-to-1\" class=\"anchor\" href=\"#p-12779-is-there-a-way-to-1\"></a><strong><img src=\"https://forum.typst.app/images/emoji/apple/question.png?v=12\" title=\":question:\" class=\"emoji\" alt=\":question:\" loading=\"lazy\" width=\"20\" height=\"20\"> Is there a way to:</strong></h3>\n<ul>\n<li>Allow line breaks after or within Brückenbauer:innen, or</li>\n<li>Tell Typst to treat the colon differently (e.g., not as a punctuation mark), or</li>\n<li>Replace the colon with a visually identical but breakable character?</li>\n</ul>\n<p>One solution would be to use the <strong>*</strong> character instead, but I’d prefer to keep the colon visually as-is (per university guidelines), but I need Typst to break the word like a regular compound.</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/9/9cba55d905adf9d6a9bd5c786369cb26c458cb19.png\" alt=\"Screenshot 2025-05-19 at 20.24.28\" data-base62-sha1=\"mmtHPMPlfFzYhVxijGUWqDkj9DX\" width=\"606\" height=\"78\"></p>\n<p>Thanks for any ideas!</p>",
      "raw": "Hi everyone,\n\nI’m working on a German academic paper in Typst and trying to format the text with **justify** = **true**. My setup kinda looks like this:\n\n```typc\n  set page(\"a4\")\n  set page(margin: (right: 2.5cm, left: 3cm, top: 2.5cm, bottom: 2.5cm))\n  let leading = 1.5 * 12pt\n  let spacing = leading + 6pt\n  set block(spacing: spacing)\n  set par(spacing: spacing)\n  set par(leading: leading)\n  set par(linebreaks:auto)\n  set text(font: \"New Computer Modern\", lang: \"de\", size: 12pt, hyphenate:auto)\n  set par(justify: true)\n\n```\n\n\nThe issue I’m running into is with **gender-inclusive language**, specifically using a colon \":\" in words like: **Brückenbauer:innen**\n\nTypst treats the \":\" as punctuation (similar to sentence punctuation), so it **prevents any line breaks** within the word. This causes awkward spacing between words. (see screenshot below)\n\n![Screenshot 2025-05-19 at 20.17.55|586x76](upload://uGMJGD8pVLdDH55k3H2Z56ton1O.png)\n\n### **❓ Is there a way to:**\n\n* Allow line breaks after or within Brückenbauer:innen, or\n* Tell Typst to treat the colon differently (e.g., not as a punctuation mark), or\n* Replace the colon with a visually identical but breakable character?\n\nOne solution would be to use the **\\*** character instead, but I’d prefer to keep the colon visually as-is (per university guidelines), but I need Typst to break the word like a regular compound.\n\n![Screenshot 2025-05-19 at 20.24.28|606x78](upload://mmtHPMPlfFzYhVxijGUWqDkj9DX.png)\n\nThanks for any ideas!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 70.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1620
    },
    {
      "id": 12781,
      "post_number": 2,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-05-19T20:47:05.151Z",
      "updated_at": "2025-05-19T21:13:50.981Z",
      "cooked": "<p>The shy hyphen is <code>-?</code> and it allows you to insert suggestions or extra hyphen break points in a work. Like <code>Brück-?en</code></p>\n<p>If you insert something like that into the word, it will break again (at multiple possible points, not just at the soft hyphen). I don’t really know how that works. (Why didn’t it allow hyphenation in the first place, I mean?) The question is also how to automate it for your document.</p>\n<p>The following seems like it would work, and only this placement of the soft hyphen, again not sure why <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">  (I also don’t know where a good place to break would be in relation to the <code>:</code> but since it picks a place earlier in the word anyway… maybe not the problem?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show \":innen\": [:-?innen]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/57ec3f2b8e5631796ce0fe3d7ff2c76775da7d08.png\" data-download-href=\"https://forum.typst.app/uploads/default/57ec3f2b8e5631796ce0fe3d7ff2c76775da7d08\" title=\"bild\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/57ec3f2b8e5631796ce0fe3d7ff2c76775da7d08_2_690x67.png\" alt=\"bild\" data-base62-sha1=\"cxNHatHOfv9WfFvY0X6AcYLCAKk\" width=\"690\" height=\"67\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/57ec3f2b8e5631796ce0fe3d7ff2c76775da7d08_2_690x67.png, https://forum.typst.app/uploads/default/original/2X/5/57ec3f2b8e5631796ce0fe3d7ff2c76775da7d08.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/57ec3f2b8e5631796ce0fe3d7ff2c76775da7d08.png 2x\" data-dominant-color=\"ECECEC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">bild</span><span class=\"informations\">883×86 22.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "The shy hyphen is `-?` and it allows you to insert suggestions or extra hyphen break points in a work. Like `Brück-?en`\n\nIf you insert something like that into the word, it will break again (at multiple possible points, not just at the soft hyphen). I don't really know how that works. (Why didn't it allow hyphenation in the first place, I mean?) The question is also how to automate it for your document.\n\nThe following seems like it would work, and only this placement of the soft hyphen, again not sure why :sweat_smile:  (I also don't know where a good place to break would be in relation to the `:` but since it picks a place earlier in the word anyway.. maybe not the problem?\n\n```\n#show \":innen\": [:-?innen]\n```\n\n\n![bild|690x67](upload://cxNHatHOfv9WfFvY0X6AcYLCAKk.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 27,
      "score": 70.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 1272
    },
    {
      "id": 12782,
      "post_number": 3,
      "username": "Mark_Hilton",
      "name": "Mark Hilton",
      "created_at": "2025-05-19T21:09:06.953Z",
      "updated_at": "2025-05-19T21:09:06.953Z",
      "cooked": "<p>I was going to suggest using a soft hyphen, <code>U+00AD</code>, so a question. You say you can enter it in Typst with <code>-?</code>. Where can I find out any similar shortcuts for other such elemants like “Narrow No Break Space”?</p>",
      "raw": "I was going to suggest using a soft hyphen, `U+00AD`, so a question. You say you can enter it in Typst with `-?`. Where can I find out any similar shortcuts for other such elemants like \"Narrow No Break Space\"?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1276
    },
    {
      "id": 12783,
      "post_number": 4,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-05-19T21:11:31.737Z",
      "updated_at": "2025-05-19T21:12:25.765Z",
      "cooked": "<p>There’s just very few of those with their own shortcuts and they are listed here: <a href=\"https://typst.app/docs/reference/symbols/\" class=\"inline-onebox\">Symbols – Typst Documentation</a></p>\n<p>There is a shortcut for regular non-breaking space, <code>~</code>  but for the narrow one you’ll have to go to the next page, symbols and find it there (it has a search box)</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/1/176b5e059b33cdd2eee296eff205670326b885cf.png\" alt=\"bild\" data-base62-sha1=\"3lb0WcK9WxRo7wBXk1GDE91LxCv\" width=\"494\" height=\"275\"></p>\n<p>In regular markup that would be <code>#sym.space.nobreak.narrow;</code> to enter it. You can give it a shorter name, of course with a <code>let</code> statement.</p>",
      "raw": "There's just very few of those with their own shortcuts and they are listed here: https://typst.app/docs/reference/symbols/ \n\nThere is a shortcut for regular non-breaking space, `~`  but for the narrow one you'll have to go to the next page, symbols and find it there (it has a search box)\n\n![bild|494x275](upload://3lb0WcK9WxRo7wBXk1GDE91LxCv.png)\n\nIn regular markup that would be `#sym.space.nobreak.narrow;` to enter it. You can give it a shorter name, of course with a `let` statement.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 25.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 1272
    },
    {
      "id": 12784,
      "post_number": 5,
      "username": "Mark_Hilton",
      "name": "Mark Hilton",
      "created_at": "2025-05-19T21:43:45.449Z",
      "updated_at": "2025-05-19T21:43:45.449Z",
      "cooked": "<p>Ah, thank you. I saw all the maths and scientific symbols, so didn’t scroll far enough down or missed the spacing symbols hidden amongst them.</p>\n<p><img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji only-emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nMark</p>",
      "raw": "Ah, thank you. I saw all the maths and scientific symbols, so didn't scroll far enough down or missed the spacing symbols hidden amongst them.\n\n:slight_smile: \n Mark",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 20.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1276
    },
    {
      "id": 12786,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-19T22:50:50.957Z",
      "updated_at": "2025-05-19T22:50:50.957Z",
      "cooked": "<p>Please read the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a> and update your post.</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p>If your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ … ````. It will then look like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n</code></pre>\n<p>If you need to highlight a code or math mode snippet instead, the language tags <code>typc</code> and <code>typm</code> do that, respectively.</p>\n</blockquote>\n</aside>",
      "raw": "Please read the https://forum.typst.app/t/how-to-post-in-the-questions-category/11 and update your post.\n\n[quote=\"reknih, post:1, topic:11\"]\nIf your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ ... ````. It will then look like this:\n\n```typ\n#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n```\n\nIf you need to highlight a code or math mode snippet instead, the language tags `typc` and `typm` do that, respectively.\n[/quote]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 5.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:38.148910"
}
{
  "topic_metadata": {
    "id": 417,
    "title": "Is there a way to programmaticaly generate documents?",
    "slug": "is-there-a-way-to-programmaticaly-generate-documents",
    "posts_count": 12,
    "created_at": "2024-09-17T13:45:24.355Z",
    "last_posted_at": "2024-10-24T13:14:44.677Z",
    "views": 1796,
    "like_count": 13,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "Daniel",
    "tags": [
      "scripting",
      "tooling",
      "data-loading"
    ],
    "category_id": 5,
    "participant_count": 7,
    "word_count": 1375
  },
  "posts": [
    {
      "id": 1626,
      "post_number": 1,
      "username": "Tudor",
      "name": "Tudor",
      "created_at": "2024-09-17T13:45:24.667Z",
      "updated_at": "2024-09-23T07:16:03.881Z",
      "cooked": "<p>I want to use typist to generate PDF reports programmaticaly.</p>\n<p>Currently, I have a jinja template, that I populate with results from the database, but this workflow is very annoying. I would like to create a service that serves pdf and eventually send the PDF by email.<br>\nI have seen posts online similar to my goal, but no concrete examples.</p>\n<p>Ideally I would like to run everything  in python  if possible.</p>",
      "raw": "I want to use typist to generate PDF reports programmaticaly. \n\nCurrently, I have a jinja template, that I populate with results from the database, but this workflow is very annoying. I would like to create a service that serves pdf and eventually send the PDF by email. \nI have seen posts online similar to my goal, but no concrete examples. \n\nIdeally I would like to run everything  in python  if possible.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 136,
      "score": 7027.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 337
    },
    {
      "id": 1634,
      "post_number": 2,
      "username": "Daniel",
      "name": "Daniel Cook",
      "created_at": "2024-09-17T13:57:21.390Z",
      "updated_at": "2024-09-17T14:00:28.518Z",
      "cooked": "<p>You can use a similar process to what you already have with jinja templating. In fact, you could even use jinja to create a typst document rather than whatever document format you are using right now (I assume you’re doing HTML then converting to PDF).</p>\n<p>So, if for example:</p>\n<pre data-code-wrap=\"jinja2\"><code class=\"lang-jinja2\">&lt;h1&gt;{{ some_heading }}&lt;/h1&gt;\n&lt;p&gt; Some {{ some_value }} &lt;/p&gt;\n</code></pre>\n<p>You’d convert that to</p>\n<pre data-code-wrap=\"jinja2\"><code class=\"lang-jinja2\">= {{ some_heading }}\nSome {{ some_value }}\n</code></pre>\n<p>and so on.</p>\n<p>You would then</p>\n<ol>\n<li>populate the template with values,</li>\n<li>output a temporary typst file</li>\n<li>use subprocess and convert it to PDF using typst compile.</li>\n<li>delete the temporary file (if need be)</li>\n<li>serve the PDF</li>\n</ol>\n<p>The bottom line is that you are producing a string, writing it to file, and using typst to convert it. There are multiple ways to produce that string, jinja being one of them (and not a bad option imo).</p>",
      "raw": "You can use a similar process to what you already have with jinja templating. In fact, you could even use jinja to create a typst document rather than whatever document format you are using right now (I assume you're doing HTML then converting to PDF).\n\nSo, if for example:\n\n```jinja2\n<h1>{{ some_heading }}</h1>\n<p> Some {{ some_value }} </p>\n```\n\nYou'd convert that to\n```jinja2\n= {{ some_heading }}\nSome {{ some_value }}\n```\n\nand so on.\n\nYou would then\n\n1. populate the template with values,\n2. output a temporary typst file\n3. use subprocess and convert it to PDF using typst compile. \n4. delete the temporary file (if need be)\n5. serve the PDF\n\nThe bottom line is that you are producing a string, writing it to file, and using typst to convert it. There are multiple ways to produce that string, jinja being one of them (and not a bad option imo).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 136,
      "score": 322.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 94
    },
    {
      "id": 1635,
      "post_number": 3,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-09-17T14:00:00.393Z",
      "updated_at": "2024-09-17T14:00:13.222Z",
      "cooked": "<blockquote>\n<p>Currently, I have a jinja template, that I populate with results from the database, but this workflow is very annoying. I would like to create a service that serves pdf and eventually send the PDF by email.</p>\n</blockquote>\n<p>What about it is annoying? keep in mind that Typst natively supports reading various data formats (see <a href=\"https://typst.app/docs/reference/data-loading/\" class=\"inline-onebox\">Data Loading – Typst Documentation</a>), so you can load them from within Typst directly and use the familiar <code>#var</code> syntax for displaying values.</p>\n<blockquote>\n<p>Ideally I would like to run everything in python if possible.</p>\n</blockquote>\n<p>You’re in luck, there’s <a href=\"https://pypi.org/project/typst/\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">typst · PyPI</a></p>",
      "raw": "> Currently, I have a jinja template, that I populate with results from the database, but this workflow is very annoying. I would like to create a service that serves pdf and eventually send the PDF by email.\n\nWhat about it is annoying? keep in mind that Typst natively supports reading various data formats (see https://typst.app/docs/reference/data-loading/), so you can load them from within Typst directly and use the familiar `#var` syntax for displaying values.\n\n> Ideally I would like to run everything in python if possible.\n\nYou're in luck, there's https://pypi.org/project/typst/",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 128,
      "score": 245.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 1637,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-17T14:13:35.899Z",
      "updated_at": "2024-09-17T14:13:35.899Z",
      "cooked": "<p>While you can use a templating engine like Jinja, personally I would suggest moving the templating to Typst itself. The mixing of markup and code that Typst allows is designed to support exactly that. The post <a href=\"https://forum.typst.app/t/can-i-configure-my-document-e-g-draft-release-version-light-dark-theme-when-creating-a-pdf-without-modifying-the-typst-file-directly/160\" class=\"inline-onebox\">Can I configure my document (e.g. draft/release version, light/dark theme) when creating a PDF without modifying the Typst file directly?</a> imo covers this topic (“rendering different data, serial letter style”)</p>\n<p>Combine data loading with a Python library like the one <a class=\"mention\" href=\"/u/tinger\">@Tinger</a> mentioned, this should get the job done.</p>",
      "raw": "While you can use a templating engine like Jinja, personally I would suggest moving the templating to Typst itself. The mixing of markup and code that Typst allows is designed to support exactly that. The post https://forum.typst.app/t/can-i-configure-my-document-e-g-draft-release-version-light-dark-theme-when-creating-a-pdf-without-modifying-the-typst-file-directly/160 imo covers this topic (\"rendering different data, serial letter style\")\n\nCombine data loading with a Python library like the one @Tinger mentioned, this should get the job done.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 118,
      "score": 103.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 1638,
      "post_number": 5,
      "username": "EaterOfSnacks",
      "name": "EaterOfSnacks",
      "created_at": "2024-09-17T14:15:35.357Z",
      "updated_at": "2024-09-17T14:16:22.474Z",
      "cooked": "<p>Before Typst I used the Python ReportLab library for a few jobs and it worked really well, or at least I could precisely overlay text elements as a second layer atop a pre-designed PDF, and match the house style perfectly (assuming I measured the designer’s dummy document accurately in Illustrator to get the right co-ordinates :) )</p>\n<p>These days I’d prefer an all-Typst workflow, at least for laying out the body of the page. Pre-made, print-ready elements (headers/footers/backgrounds in vector format, etc) I’d incorporate by overlaying on an existing ‘background’ PDF. Afaik Typst doesn’t do this yet but it should be possible with a script that invokes Typst then a Python library that can overlay PDFs (PyPDF2 ?).</p>",
      "raw": "Before Typst I used the Python ReportLab library for a few jobs and it worked really well, or at least I could precisely overlay text elements as a second layer atop a pre-designed PDF, and match the house style perfectly (assuming I measured the designer's dummy document accurately in Illustrator to get the right co-ordinates :) )\n\nThese days I'd prefer an all-Typst workflow, at least for laying out the body of the page. Pre-made, print-ready elements (headers/footers/backgrounds in vector format, etc) I'd incorporate by overlaying on an existing 'background' PDF. Afaik Typst doesn't do this yet but it should be possible with a script that invokes Typst then a Python library that can overlay PDFs (PyPDF2 ?).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 111,
      "score": 77.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 36
    },
    {
      "id": 1665,
      "post_number": 6,
      "username": "Daniel",
      "name": "Daniel Cook",
      "created_at": "2024-09-17T15:07:02.969Z",
      "updated_at": "2024-09-17T15:47:27.054Z",
      "cooked": "<p>To synthesize <a class=\"mention\" href=\"/u/tinger\">@Tinger</a> and <a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a> with the suggestion of the <code>typst</code> library, here is a simple hello world example in case someone is looking in the future:</p>\n<p>In <code>helloworld.typ</code>:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">= Hello world\n\n#sys.inputs.at(\"some_value\")\n</code></pre>\n<p>In <code>helloworld.py</code>:</p>\n<pre data-code-wrap=\"py\"><code class=\"lang-py\">import typst  # using v0.11.1\n\n# sys_inputs must be a dictionary of type string:string\nsys_inputs: dict[str, str] = {\"some_value\": \"hello world\"}\n\ntypst.compile(input=\"helloworld.typ\", output=\"helloworld.pdf\", sys_inputs=sys_inputs)\n</code></pre>\n<p>The benefit of this method is that you could more easily compose your typst template (i.e. via the website).</p>\n<hr>\n<p><strike><img src=\"https://forum.typst.app/images/emoji/apple/eyes.png?v=12\" title=\":eyes:\" class=\"emoji\" alt=\":eyes:\" loading=\"lazy\" width=\"20\" height=\"20\"> However, <strong>a limitation</strong> seems to be in what you can pass to the template (dictionary of key:value, but both are limited to string type). That likely means that, for example, if you want to pass a tuple of values from a database query, it would have to be converted to string, then in the typst template you would have to convert to a typst-native type.</strike></p><strike>\n</strike><p><strike>So, if you need more versatility in objects, you may need to do string templating of some variety within python (i.e. jinja, or string templates, etc).</strike></p>\n<hr>\n<p><strong>Update</strong>:</p>\n<p>Based on <a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a>’s comment below, here is another example passing JSON data:</p>\n<p>In <code>json_example.py</code>:</p>\n<pre data-code-wrap=\"py\"><code class=\"lang-py\">import typst\nimport json\n\n# convert your data to string with json.dumps\ndata = json.dumps([1, 2, 3, 4, 5])\n\nsys_inputs: dict[str, str] = {\"data\": data}\ntypst.compile(\n    input=\"json_example.typ\", output=\"json_example.pdf\", sys_inputs=sys_inputs\n)\n\n</code></pre>\n<p>In <code>json_example.typ</code>:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let values = json.decode(sys.inputs.data)\n\n#for value in values [\n  #value #linebreak()\n]\n</code></pre>",
      "raw": "To synthesize @Tinger and @SillyFreak with the suggestion of the `typst` library, here is a simple hello world example in case someone is looking in the future:\n\nIn `helloworld.typ`:\n```typst\n= Hello world\n\n#sys.inputs.at(\"some_value\")\n```\n\nIn `helloworld.py`:\n```py\nimport typst  # using v0.11.1\n\n# sys_inputs must be a dictionary of type string:string\nsys_inputs: dict[str, str] = {\"some_value\": \"hello world\"}\n\ntypst.compile(input=\"helloworld.typ\", output=\"helloworld.pdf\", sys_inputs=sys_inputs)\n```\n\nThe benefit of this method is that you could more easily compose your typst template (i.e. via the website). \n\n--- \n\n<strike>👀 However, **a limitation** seems to be in what you can pass to the template (dictionary of key:value, but both are limited to string type). That likely means that, for example, if you want to pass a tuple of values from a database query, it would have to be converted to string, then in the typst template you would have to convert to a typst-native type.\n\nSo, if you need more versatility in objects, you may need to do string templating of some variety within python (i.e. jinja, or string templates, etc).</strike>\n\n----\n\n**Update**:\n\nBased on @SillyFreak's comment below, here is another example passing JSON data:\n\nIn `json_example.py`: \n\n```py\nimport typst\nimport json\n\n# convert your data to string with json.dumps\ndata = json.dumps([1, 2, 3, 4, 5])\n\nsys_inputs: dict[str, str] = {\"data\": data}\ntypst.compile(\n    input=\"json_example.typ\", output=\"json_example.pdf\", sys_inputs=sys_inputs\n)\n\n```\n\nIn `json_example.typ`: \n\n```typst\n#let values = json.decode(sys.inputs.data)\n\n#for value in values [\n  #value #linebreak()\n]\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 111,
      "score": 762.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 94
    },
    {
      "id": 1666,
      "post_number": 7,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-17T15:13:50.097Z",
      "updated_at": "2024-09-17T15:13:50.097Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Daniel\" data-post=\"6\" data-topic=\"417\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/d/9335FF/48.png\" class=\"avatar\"> Daniel:</div>\n<blockquote>\n<p>That likely means that, for example, if you want to pass a tuple of values from a database query, it would have to be converted to string, then in the typst template you would have to convert to a typst-native type.</p>\n<p>So, if you need more versatility in objects, you may need to do string templating of some variety within python (i.e. jinja, or string templates, etc).</p>\n</blockquote>\n</aside>\n<p>Actually for that case, you could use JSON or one of the other formats supported by Typst (and Python). Using templating (and then parsing in Typst) for that purpose should not be necessary:</p>\n<aside class=\"quote no-group\" data-username=\"SillyFreak\" data-post=\"3\" data-topic=\"160\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/sillyfreak/48/1483_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/can-i-configure-my-document-e-g-draft-release-version-color-theme-when-creating-a-pdf-without-modifying-the-typst-file-directly/160/3\">Can I configure my document (e.g. draft/release version, color theme) when creating a PDF without modifying the Typst file directly?</a></div>\n<blockquote>\n<p>For more complex data input needs, using one of the <a href=\"https://typst.app/docs/reference/data-loading/\">data loading</a> functions is probably the best idea:</p>\n<ul>\n<li>directly in the command line: <code>--input 'data={\"some-num\": 1, \"some-bool\": true}'</code><br>\nthen read via <code>json.decode(sys.inputs.data)</code></li>\n</ul>\n</blockquote>\n</aside>\n<p>(feel free to incorporate that into your response, so that it can be the canonical complete one)</p>",
      "raw": "[quote=\"Daniel, post:6, topic:417\"]\nThat likely means that, for example, if you want to pass a tuple of values from a database query, it would have to be converted to string, then in the typst template you would have to convert to a typst-native type.\n\nSo, if you need more versatility in objects, you may need to do string templating of some variety within python (i.e. jinja, or string templates, etc).\n[/quote]\n\nActually for that case, you could use JSON or one of the other formats supported by Typst (and Python). Using templating (and then parsing in Typst) for that purpose should not be necessary:\n\n[quote=\"SillyFreak, post:3, topic:160\"]\nFor more complex data input needs, using one of the [data loading](https://typst.app/docs/reference/data-loading/) functions is probably the best idea:\n\n* directly in the command line: `--input 'data={\"some-num\": 1, \"some-bool\": true}'`\nthen read via `json.decode(sys.inputs.data)`\n[/quote]\n\n(feel free to incorporate that into your response, so that it can be the canonical complete one)",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 98,
      "score": 214.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 1668,
      "post_number": 8,
      "username": "Daniel",
      "name": "Daniel Cook",
      "created_at": "2024-09-17T15:47:53.683Z",
      "updated_at": "2024-09-17T15:47:53.683Z",
      "cooked": "<p>Nice! I didn’t know about that. I’ve updated my comment.</p>",
      "raw": "Nice! I didn't know about that. I've updated my comment.",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 89,
      "score": 42.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 94
    },
    {
      "id": 1673,
      "post_number": 9,
      "username": "raimann",
      "name": "Felipe Raimann",
      "created_at": "2024-09-17T16:17:15.224Z",
      "updated_at": "2024-09-17T16:17:15.224Z",
      "cooked": "<p>My advice is similar to others: try to make as much as you can with Typst. In my case, <code>toml</code> files have been of help to “configure” the document and some analysis and <code>csv</code> files for data.</p>\n<p>Sadly, this is not always the case so you should rely on another language. Maybe your analysis depends a lot on <code>python</code> and the Typst part is simple. In my case, I have a software which rely on dates types, datafarmes, etc, which are not so advanced in Typst so I coded it in Julia. Then, with <a href=\"https://github.com/jakobjpeters/Typstry.jl\" rel=\"noopener nofollow ugc\">Typstry.jl</a> and <a href=\"https://github.com/andreasKroepelin/TypstJlyfish.jl\" rel=\"noopener nofollow ugc\">TypstJlyfish.jl</a> you can compile with <code>Typst_jll</code> and embed julia code in your typst files. (<a href=\"https://www.youtube.com/watch?v=Kgjl-DVjOMI\" rel=\"noopener nofollow ugc\">video about Jlyfish</a>). Even though is julia, it can help to understand the process.</p>",
      "raw": "My advice is similar to others: try to make as much as you can with Typst. In my case, `toml` files have been of help to \"configure\" the document and some analysis and `csv` files for data.\n\nSadly, this is not always the case so you should rely on another language. Maybe your analysis depends a lot on `python` and the Typst part is simple. In my case, I have a software which rely on dates types, datafarmes, etc, which are not so advanced in Typst so I coded it in Julia. Then, with [Typstry.jl](https://github.com/jakobjpeters/Typstry.jl) and [TypstJlyfish.jl](https://github.com/andreasKroepelin/TypstJlyfish.jl) you can compile with `Typst_jll` and embed julia code in your typst files. ([video about Jlyfish](https://www.youtube.com/watch?v=Kgjl-DVjOMI)). Even though is julia, it can help to understand the process.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 92,
      "score": 78.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 10
    },
    {
      "id": 1681,
      "post_number": 10,
      "username": "Tudor",
      "name": "Tudor",
      "created_at": "2024-09-17T23:43:53.548Z",
      "updated_at": "2024-09-17T23:43:53.548Z",
      "cooked": "<p>Thank you for all of the insights.</p>\n<p>I will definitely try it with the python package and a .typ file.</p>\n<p>Will comeback to share my results, but it won’t be anytime soon.</p>",
      "raw": "Thank you for all of the insights. \n\nI will definitely try it with the python package and a .typ file.\n\nWill comeback to share my results, but it won't be anytime soon.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 83,
      "score": 36.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 337
    },
    {
      "id": 2453,
      "post_number": 11,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-24T11:06:44.862Z",
      "updated_at": "2024-09-24T11:06:44.862Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Tudor\" data-post=\"10\" data-topic=\"417\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/t/66104C/48.png\" class=\"avatar\"> Tudor:</div>\n<blockquote>\n<p>Will comeback to share my results, but it won’t be anytime soon.</p>\n</blockquote>\n</aside>\n<p>Hi, for the time being and for the benefit of other readers, I have marked <a class=\"mention\" href=\"/u/daniel\">@Daniel</a>’s response as the accepted answer. Feel free to change that if your attempts eventually make you conclude that another answer works better <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "[quote=\"Tudor, post:10, topic:417\"]\nWill comeback to share my results, but it won’t be anytime soon.\n[/quote]\n\nHi, for the time being and for the benefit of other readers, I have marked @Daniel's response as the accepted answer. Feel free to change that if your attempts eventually make you conclude that another answer works better :slight_smile:",
      "reply_to_post_number": 10,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 69,
      "score": 23.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 4618,
      "post_number": 12,
      "username": "adriano",
      "name": "Adriano Fantini",
      "created_at": "2024-10-24T13:14:44.677Z",
      "updated_at": "2024-10-24T13:14:44.677Z",
      "cooked": "<p>It is perfectly doable, Typst is awesome for this specific usecase!<br>\nI have created several hundred-pages technical user manuals using (almost) pure Typst.</p>\n<p>I have a large-ish private software project whose components are described by about 500 JSON files, one each.<br>\nDifferent versions of the system combine the components in different way, and for each I needed to generate a different technical manual.</p>\n<p>All the basic data is fetched from JSON; the only thing I had to do outside of Typst is to create a index of such JSONs before compilation, because Typst misses a “does-file-exist?” functionality.</p>\n<p>The Typst code is about 2000 lines, including JSON caching, a small plotting library based on CeTZ, and custom .typ description for a bunch of special components (e.g. some that needed special charts and explanation).</p>\n<p>It is beautiful, reproducible, git-friendly, and easy to maintain!</p>",
      "raw": "It is perfectly doable, Typst is awesome for this specific usecase!\nI have created several hundred-pages technical user manuals using (almost) pure Typst.\n\nI have a large-ish private software project whose components are described by about 500 JSON files, one each.\nDifferent versions of the system combine the components in different way, and for each I needed to generate a different technical manual.\n\nAll the basic data is fetched from JSON; the only thing I had to do outside of Typst is to create a index of such JSONs before compilation, because Typst misses a \"does-file-exist?\" functionality.\n\nThe Typst code is about 2000 lines, including JSON caching, a small plotting library based on CeTZ, and custom .typ description for a bunch of special components (e.g. some that needed special charts and explanation).\n\nIt is beautiful, reproducible, git-friendly, and easy to maintain!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 62,
      "score": 157.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 669
    }
  ],
  "scraped_at": "2025-06-10T09:58:49.000509"
}
{
  "topic_metadata": {
    "id": 4173,
    "title": "How to create 2nd level numbering for figures?",
    "slug": "how-to-create-2nd-level-numbering-for-figures",
    "posts_count": 3,
    "created_at": "2025-05-19T23:45:57.081Z",
    "last_posted_at": "2025-05-20T11:09:29.065Z",
    "views": 46,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Andrew",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 295
  },
  "posts": [
    {
      "id": 12790,
      "post_number": 1,
      "username": "Freddy",
      "name": "Freddy",
      "created_at": "2025-05-19T23:45:57.181Z",
      "updated_at": "2025-05-19T23:45:57.181Z",
      "cooked": "<p>Hey,<br>\nI have a problem with multi level numbering in figures. This is what the result should look like.</p>\n<ul>\n<li>1</li>\n<li>2.a</li>\n<li>2.b</li>\n<li>3</li>\n</ul>\n<p>Here is my current code:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// normally step on level 1\n#show figure : it =&gt; {\n  counter(\"fig\").step(level: 1)\n  context {\n    let numb = numbering(\"1.a\",..counter(\"fig\").get())\n    set figure(numbering: n =&gt; numb)\n    context it // here the set rule from above should apply \n  }\n}\n\n\n// if in subBlock step on level 2\n#let subFigs(doc) = {\n  counter(\"fig\").step(level: 1)\n\n  show figure : it =&gt; {\n    counter(\"fig\").step(level: 2)\n    context {\n      let numb = numbering(\"1.a\",..counter(\"fig\").get())\n      set figure(numbering: n =&gt; numb)\n      context it // here is the same problem\n    }\n  }\n\n  doc\n}\n\n#figure(image(\"meme.jpg\", width: 50%),\n  caption: [First meme],\n)\n\n#[\n  #show: subFigs\n\n  #context figure(image(\"meme.jpg\", width: 50%),\n    caption: [Second (2.a) meme],\n  )\n\n  #context figure(image(\"meme.jpg\", width: 50%),\n    caption: [Second(2.b) meme],\n  ) &lt;sub2&gt;\n]\n\n#figure(image(\"meme.jpg\", width: 50%),\n  caption: [Third meme],\n)\n\n</code></pre>\n<p>If there is a more elegant way to make this work, please let me know.</p>\n<p>I use my own counter because I found no way to stop the figure function from stepping the figure-counter on level 1.</p>\n<p>Currently the main problem is that the set rule does not apply to the row below it. I have no idea why…</p>\n<p>Thank you for your support :)</p>",
      "raw": "Hey, \nI have a problem with multi level numbering in figures. This is what the result should look like.\n\n- 1\n- 2.a\n- 2.b\n- 3\n\nHere is my current code:\n```typ\n// normally step on level 1\n#show figure : it => {\n  counter(\"fig\").step(level: 1)\n  context {\n    let numb = numbering(\"1.a\",..counter(\"fig\").get())\n    set figure(numbering: n => numb)\n    context it // here the set rule from above should apply \n  }\n}\n\n\n// if in subBlock step on level 2\n#let subFigs(doc) = {\n  counter(\"fig\").step(level: 1)\n\n  show figure : it => {\n    counter(\"fig\").step(level: 2)\n    context {\n      let numb = numbering(\"1.a\",..counter(\"fig\").get())\n      set figure(numbering: n => numb)\n      context it // here is the same problem\n    }\n  }\n\n  doc\n}\n\n#figure(image(\"meme.jpg\", width: 50%),\n  caption: [First meme],\n)\n\n#[\n  #show: subFigs\n\n  #context figure(image(\"meme.jpg\", width: 50%),\n    caption: [Second (2.a) meme],\n  )\n\n  #context figure(image(\"meme.jpg\", width: 50%),\n    caption: [Second(2.b) meme],\n  ) <sub2>\n]\n\n#figure(image(\"meme.jpg\", width: 50%),\n  caption: [Third meme],\n)\n\n```\n\nIf there is a more elegant way to make this work, please let me know.\n\nI use my own counter because I found no way to stop the figure function from stepping the figure-counter on level 1.\n\nCurrently the main problem is that the set rule does not apply to the row below it. I have no idea why...\n\nThank you for your support :)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 54.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1621
    },
    {
      "id": 12799,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-20T11:01:04.923Z",
      "updated_at": "2025-05-20T11:01:04.923Z",
      "cooked": "<p>Hey. Your code does not compile. See <a href=\"https://sscce.org\">https://sscce.org</a>. Usually for figures you can use <code>[]</code> or <code>rect()</code>.</p>",
      "raw": "Hey. Your code does not compile. See https://sscce.org. Usually for figures you can use `[]` or `rect()`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12801,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-20T11:09:29.065Z",
      "updated_at": "2025-05-20T11:09:29.065Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/subpar:0.2.2\"\n\n#figure(rect(), caption: \"First\")\n\n#subpar.grid(\n  figure(rect(), caption: [Second a]),\n  figure(rect(), caption: [Second b]),\n  numbering-sub: \"(1.a)\",\n  show-sub-caption: (num, it) =&gt; [#it.supplement #num#it.separator #it.body],\n)\n\n#figure(rect(), caption: \"Third\")\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/ec6919660a0385c0ad557c5ce8930904a64a6d2e.png\" data-download-href=\"https://forum.typst.app/uploads/default/ec6919660a0385c0ad557c5ce8930904a64a6d2e\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/ec6919660a0385c0ad557c5ce8930904a64a6d2e_2_690x377.png\" alt=\"image\" data-base62-sha1=\"xJnR8vseELqLoavBSkpeovKKKsu\" width=\"690\" height=\"377\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/ec6919660a0385c0ad557c5ce8930904a64a6d2e_2_690x377.png, https://forum.typst.app/uploads/default/original/2X/e/ec6919660a0385c0ad557c5ce8930904a64a6d2e.png 1.5x, https://forum.typst.app/uploads/default/original/2X/e/ec6919660a0385c0ad557c5ce8930904a64a6d2e.png 2x\" data-dominant-color=\"101010\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">737×403 13.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/universe/package/subpar\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/universe/package/subpar\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/universe/package/subpar\" target=\"_blank\" rel=\"noopener\">subpar – Typst Universe</a></h3>\n\n  <p>Create sub figures easily.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "```typ\n#import \"@preview/subpar:0.2.2\"\n\n#figure(rect(), caption: \"First\")\n\n#subpar.grid(\n  figure(rect(), caption: [Second a]),\n  figure(rect(), caption: [Second b]),\n  numbering-sub: \"(1.a)\",\n  show-sub-caption: (num, it) => [#it.supplement #num#it.separator #it.body],\n)\n\n#figure(rect(), caption: \"Third\")\n```\n\n![image|690x377](upload://xJnR8vseELqLoavBSkpeovKKKsu.png)\n\nhttps://typst.app/universe/package/subpar",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:37.404952"
}
{
  "topic_metadata": {
    "id": 4180,
    "title": "How can I use non math font in equations?",
    "slug": "how-can-i-use-non-math-font-in-equations",
    "posts_count": 4,
    "created_at": "2025-05-20T10:26:57.240Z",
    "last_posted_at": "2025-05-21T15:55:46.211Z",
    "views": 87,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "math",
      "fonts"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 228
  },
  "posts": [
    {
      "id": 12797,
      "post_number": 1,
      "username": "uwni",
      "name": "uwni",
      "created_at": "2025-05-20T10:26:57.463Z",
      "updated_at": "2025-05-20T10:26:57.463Z",
      "cooked": "<p>Hi there, is there any way to use non-math fonts within equations? I am trying to use TeX Gyre Chorus as the mathcal font, However, Chorus is a non math font, so I cannot use <code>show math.equation: set text(font: \"TeX Gyre Chorus\")</code> to overwrite the font settings. I can only do this with</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let cal(it) = {\n  text(\n    font: \"TeX Gyre Chorus\",\n    box(it),\n  )\n}\n</code></pre>\n<p>But there are still some problems, like the kerning looks weird, there is no h space around the content like how equations usually do. Is there some good ways to solve this?</p>",
      "raw": "Hi there, is there any way to use non-math fonts within equations? I am trying to use TeX Gyre Chorus as the mathcal font, However, Chorus is a non math font, so I cannot use `show math.equation: set text(font: \"TeX Gyre Chorus\")` to overwrite the font settings. I can only do this with\n\n```typ\n#let cal(it) = {\n  text(\n    font: \"TeX Gyre Chorus\",\n    box(it),\n  )\n}\n```\n\nBut there are still some problems, like the kerning looks weird, there is no h space around the content like how equations usually do. Is there some good ways to solve this?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 35.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1625
    },
    {
      "id": 12812,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-20T14:22:53.875Z",
      "updated_at": "2025-05-21T15:53:58.642Z",
      "cooked": "<p>Hi. The whole point of the math mode is to work great with math formulas. Hence, a math font is used that has unique features. It shouldn’t be surprising that forcefully using different font makes it look bad around math stuff.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$x cal(y)() = cal(z)$\n\n#let cal(it) = math.class(\"normal\", $text(font: \"TeX Gyre Chorus\", it) med$)\n\n$x cal(y)() = cal(z)$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/d/d3afb05f9389e84fc6c9e2026faabe55c9a81aef.png\" alt=\"image\" data-base62-sha1=\"ucF9NOV2NPgIPYMfqTHgRIvFD3N\" width=\"88\" height=\"70\"></p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/math/class/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/math/class/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/math/class/\" target=\"_blank\" rel=\"noopener\">Class Function – Typst Documentation</a></h3>\n\n  <p>Documentation for the `class` function.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/symbols/sym/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/symbols/sym/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/symbols/sym/\" target=\"_blank\" rel=\"noopener\">General Symbols – Typst Documentation</a></h3>\n\n  <p>Documentation for the `sym` module.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Hi. The whole point of the math mode is to work great with math formulas. Hence, a math font is used that has unique features. It shouldn't be surprising that forcefully using different font makes it look bad around math stuff.\n\n```typ\n$x cal(y)() = cal(z)$\n\n#let cal(it) = math.class(\"normal\", $text(font: \"TeX Gyre Chorus\", it) med$)\n\n$x cal(y)() = cal(z)$\n```\n\n![image|176x141, 50%](upload://ucF9NOV2NPgIPYMfqTHgRIvFD3N.png)\n\nhttps://typst.app/docs/reference/math/class/\n\nhttps://typst.app/docs/reference/symbols/sym/",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 28,
      "score": 55.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12840,
      "post_number": 3,
      "username": "uwni",
      "name": "uwni",
      "created_at": "2025-05-21T06:15:55.702Z",
      "updated_at": "2025-05-21T06:16:39.736Z",
      "cooked": "<p>Thanks for your solution, it did work. I have a little question. Is there some special reason for the “med” spacing instead of thin or 1mu = 1/18 em?</p>",
      "raw": "Thanks for your solution, it did work. I have a little question. Is there some special reason for the \"med\" spacing instead of thin or 1mu = 1/18 em?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1625
    },
    {
      "id": 12891,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-21T15:55:46.211Z",
      "updated_at": "2025-05-21T15:55:46.211Z",
      "cooked": "<p>No, use whatever space/spacing you like. It looks close enough for the example.</p>",
      "raw": "No, use whatever space/spacing you like. It looks close enough for the example.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:36.677596"
}
{
  "topic_metadata": {
    "id": 4182,
    "title": "How can I place a node relative to another node or its outline in fletcher?",
    "slug": "how-can-i-place-a-node-relative-to-another-node-or-its-outline-in-fletcher",
    "posts_count": 3,
    "created_at": "2025-05-20T11:08:02.680Z",
    "last_posted_at": "2025-05-22T07:32:50.776Z",
    "views": 43,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "fletcher"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 215
  },
  "posts": [
    {
      "id": 12800,
      "post_number": 1,
      "username": "Hakkape",
      "name": "Alex H",
      "created_at": "2025-05-20T11:08:02.789Z",
      "updated_at": "2025-05-22T19:23:14.482Z",
      "cooked": "<p>Hi everyone,<br>\ni am trying to place rectangular nodes in a fletcher diagram and want each node to also have a smaller circular node on its corner with a number inside. I can of course place them by hand as shown below, but if change the content of the larger node, the smaller node is not placed correctly anymore. I have not been able to find out how to place one node relative to another node (or in this case, relative to the outline), so any insight would be appreciated.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/fletcher:0.5.7\" as fletcher: diagram, node, edge\n#diagram({\n  node((0, 0), text(\"test\"), shape: rect, stroke: 1pt)\n  node((0.25, -0.18), text(size: 10pt)[2], shape: circle, stroke: 1pt, fill: white, inset: 2pt)\n})\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/d/dcccec463566dd16181dbbe00aa910f8d9f4503c.png\" alt=\"Screenshot_2025-05-20_13-09-24\" data-base62-sha1=\"vvi5vG711FqgbBNCeitxk7szyuE\" width=\"223\" height=\"154\"></p>",
      "raw": "Hi everyone,\ni am trying to place rectangular nodes in a fletcher diagram and want each node to also have a smaller circular node on its corner with a number inside. I can of course place them by hand as shown below, but if change the content of the larger node, the smaller node is not placed correctly anymore. I have not been able to find out how to place one node relative to another node (or in this case, relative to the outline), so any insight would be appreciated.\n\n```typ\n#import \"@preview/fletcher:0.5.7\" as fletcher: diagram, node, edge\n#diagram({\n  node((0, 0), text(\"test\"), shape: rect, stroke: 1pt)\n  node((0.25, -0.18), text(size: 10pt)[2], shape: circle, stroke: 1pt, fill: white, inset: 2pt)\n})\n```\n![Screenshot_2025-05-20_13-09-24|223x154](upload://vvi5vG711FqgbBNCeitxk7szyuE.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 48.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1141
    },
    {
      "id": 12819,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-20T16:07:29.272Z",
      "updated_at": "2025-05-22T15:45:17.650Z",
      "cooked": "<p>Hi. This is covered in the “Node anchors” section of the manual.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/fletcher:0.5.7\": diagram, edge, node\n\n#let badge(pos, body, ..args) = {\n  body = text(size: 10pt, body)\n  node(pos, shape: circle, fill: white, inset: 2pt, ..args, body)\n}\n\n#diagram({\n  node((0, 0), name: &lt;this&gt;, shape: rect, stroke: 1pt)[test]\n  badge(&lt;this.north-east&gt;, stroke: 1pt)[2]\n})\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/a/af5d45d33c3501897129a8b5dfcee55ff6d63b63.png\" alt=\"image\" data-base62-sha1=\"p1lonMqQI9favV1u4L9c7GXqabN\" width=\"120\" height=\"95\"></p>",
      "raw": "Hi. This is covered in the \"Node anchors\" section of the manual.\n\n```typ\n#import \"@preview/fletcher:0.5.7\": diagram, edge, node\n\n#let badge(pos, body, ..args) = {\n  body = text(size: 10pt, body)\n  node(pos, shape: circle, fill: white, inset: 2pt, ..args, body)\n}\n\n#diagram({\n  node((0, 0), name: <this>, shape: rect, stroke: 1pt)[test]\n  badge(<this.north-east>, stroke: 1pt)[2]\n})\n```\n\n![image|120x95](upload://p1lonMqQI9favV1u4L9c7GXqabN.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 17,
      "score": 43.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12923,
      "post_number": 3,
      "username": "Hakkape",
      "name": "Alex H",
      "created_at": "2025-05-22T07:32:50.776Z",
      "updated_at": "2025-05-22T07:32:50.776Z",
      "cooked": "<p>Thanks, i somehow missed this section, was looking all over the manual…</p>",
      "raw": "Thanks, i somehow missed this section, was looking all over the manual..",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1141
    }
  ],
  "scraped_at": "2025-06-10T09:47:35.774919"
}
{
  "topic_metadata": {
    "id": 4185,
    "title": "How to determine if the current page has a heading of level 1?",
    "slug": "how-to-determine-if-the-current-page-has-a-heading-of-level-1",
    "posts_count": 3,
    "created_at": "2025-05-20T13:31:35.932Z",
    "last_posted_at": "2025-05-20T15:15:44.521Z",
    "views": 48,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 281
  },
  "posts": [
    {
      "id": 12805,
      "post_number": 1,
      "username": "Alex",
      "name": "Alex",
      "created_at": "2025-05-20T13:31:36.094Z",
      "updated_at": "2025-05-20T13:37:40.543Z",
      "cooked": "<p>Hello everyone,</p>\n<p>For a personal project, i want to set a rectangle on the side of a pages in a book based on the section the current page is and based on the oddity of the current page. My code look a little bit like this :</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(\n  paper: \"a6\",\n  margin: CONFIG.MARGIN,\n  numbering: \"1\",\n  number-align: left,\n  background: context{\n    let current-page = here().page() // Get number of page\n    // get chapter (or section) based on number of heading\n    let section = query(selector(heading.where(level : 1)).before(here())).len()\n\n    // place rectangle based on the page number &amp; book section\n    let r-height = current-layout.height / total-section\n    let offset = section* r-height\n    let r = rect(fill: black,width: 0.3cm, height: r-height)\n    let side = right\n    if calc.odd(current-page){side = right} else {side = left}\n    place(side, r, dy: offset)\n  },\n  header: [...]\n)\n</code></pre>\n<p>I basically want to prevent the placing of this rectangle on pages where there’s a heading of level 1 and wanted to know if it was possible. Maybe something like :</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let l1-heading = query(selector(heading.where(level: 1)).on-page(current-page)).len()\n#if l1-heading &gt; 0 {place(side, r, dy: offset)}\n</code></pre>\n<p>Thank you in advance for your help</p>",
      "raw": "Hello everyone, \n\nFor a personal project, i want to set a rectangle on the side of a pages in a book based on the section the current page is and based on the oddity of the current page. My code look a little bit like this : \n\n```typst\n#set page(\n  paper: \"a6\",\n  margin: CONFIG.MARGIN,\n  numbering: \"1\",\n  number-align: left,\n  background: context{\n    let current-page = here().page() // Get number of page\n    // get chapter (or section) based on number of heading\n    let section = query(selector(heading.where(level : 1)).before(here())).len()\n\n    // place rectangle based on the page number & book section\n    let r-height = current-layout.height / total-section\n    let offset = section* r-height\n    let r = rect(fill: black,width: 0.3cm, height: r-height)\n    let side = right\n    if calc.odd(current-page){side = right} else {side = left}\n    place(side, r, dy: offset)\n  },\n  header: [...]\n)\n```\n\nI basically want to prevent the placing of this rectangle on pages where there's a heading of level 1 and wanted to know if it was possible. Maybe something like : \n```typst\n#let l1-heading = query(selector(heading.where(level: 1)).on-page(current-page)).len()\n#if l1-heading > 0 {place(side, r, dy: offset)}\n```\n\nThank you in advance for your help",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 90.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 987
    },
    {
      "id": 12815,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-05-20T15:15:00.351Z",
      "updated_at": "2025-05-20T15:21:57.459Z",
      "cooked": "<p>You can query all headings and go through them one by one, checking if its location is on the current page:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">let has-heading = query(heading.where(level: 1))\n  .any(it =&gt; it.location().page() == current-page)\n</code></pre>",
      "raw": "You can query all headings and go through them one by one, checking if its location is on the current page:\n```typc\nlet has-heading = query(heading.where(level: 1))\n  .any(it => it.location().page() == current-page)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 25,
      "score": 35.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 12816,
      "post_number": 3,
      "username": "vmartel08",
      "name": "Vincent Martel",
      "created_at": "2025-05-20T15:15:44.521Z",
      "updated_at": "2025-05-20T15:15:44.521Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/alex\">@Alex</a>, trying to point you in the right direction, would this match what you are looking for? This seems pretty similar.</p>\n<aside class=\"quote quote-modified\" data-post=\"1\" data-topic=\"4105\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/n/611D14/48.png\" class=\"avatar\">\n    <a href=\"https://forum.typst.app/t/how-to-display-chapter-x-above-level-1-heading-name/4105\">How to display \"Chapter X\" above level 1 heading name?</a> <a class=\"badge-category__wrapper \" href=\"/c/questions/5\"><span data-category-id=\"5\" style=\"--category-badge-color: #F7C000; --category-badge-text-color: #fdfdfd;\" data-drop-close=\"true\" class=\"badge-category \" title=\"Your questions about using Typst and the web app go in this category.\"><span class=\"badge-category__name\">Questions</span></span></a>\n  </div>\n  <blockquote>\n    When I type a new depth 1 heading e.g. = Discussion , I want to create something that looks like this: \n[image] \nHere is the code I currently have: \n// Pagebreak on new chap start\n#show heading.where(level: 1): it =&gt; {\n  set text(28pt)\n  pagebreak(weak: true) + it\n}\n\nwhich results in simply: \n[image] \nI’m not sure how to extract the chapter number (e.g. 7, in this case) from it\n  </blockquote>\n</aside>\n",
      "raw": "Hi @Alex, trying to point you in the right direction, would this match what you are looking for? This seems pretty similar.\n\nhttps://forum.typst.app/t/how-to-display-chapter-x-above-level-1-heading-name/4105?u=vmartel08",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 35.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 936
    }
  ],
  "scraped_at": "2025-06-10T09:47:35.072956"
}
{
  "topic_metadata": {
    "id": 4189,
    "title": "How to make appendix optional in template, and how to hide it from \"main\" contents?",
    "slug": "how-to-make-appendix-optional-in-template-and-how-to-hide-it-from-main-contents",
    "posts_count": 3,
    "created_at": "2025-05-20T17:07:05.235Z",
    "last_posted_at": "2025-05-21T13:37:30.397Z",
    "views": 42,
    "like_count": 5,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "aarnent",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 421
  },
  "posts": [
    {
      "id": 12824,
      "post_number": 1,
      "username": "typer",
      "name": "",
      "created_at": "2025-05-20T17:07:05.419Z",
      "updated_at": "2025-05-20T17:10:17.760Z",
      "cooked": "<p>I’m working on a template that for illustration I’ve reduced to the following:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let conf(\n  title: none,\n  doc,\n) = {\n  set heading(numbering: (..nums) =&gt; nums.pos().map(str).join(\".\"))\n  v(15%, weak: false)\n  align(center, text(17pt, weight: \"bold\", title))\n\n  pagebreak()\n\n  set page(numbering: \"1\")\n\n  show outline.entry.where(\n    level: 1\n  ): it =&gt; {\n    v(12pt, weak: true)\n    strong(it)\n  }\n\n  outline(indent: auto)\n\n  pagebreak()\n  outline(target: heading.where(supplement: [Appendix]), title: [Appendix])\n\n  pagebreak()\n\n  doc\n}\n\n#let appendix(body) = {\n  counter(heading).update(0)\n\n  set heading(\n    numbering: \"A\",\n    supplement: [Appendix]\n  );\n\n  body\n}\n\n#show: doc =&gt; conf(\n  title: \"Lorem\",\n  doc\n)\n\n= About\n#lorem(16)\n\n== References\n#lorem(32)\n\n= Introduction\n#lorem(16)\n\n#show: appendix\n\n= Tables\n#lorem(16)\n\n= Graphs\n#lorem(16)\n</code></pre>\n<p>I have two questions:</p>\n<ol>\n<li>How can I make the appendix outline generation dependent on whether the document contains <code>#show: appendix</code>?  I.e. if document doesn’t contain an <code>#show appendix</code>, it shouldn’t generate the appendix’es outline or the pagebreak related to it.</li>\n<li>How do I hide the appendix’es headings from the regular <em>Contents</em> outline?</li>\n</ol>",
      "raw": "I'm working on a template that for illustration I've reduced to the following:\n\n```\n#let conf(\n  title: none,\n  doc,\n) = {\n  set heading(numbering: (..nums) => nums.pos().map(str).join(\".\"))\n  v(15%, weak: false)\n  align(center, text(17pt, weight: \"bold\", title))\n\n  pagebreak()\n\n  set page(numbering: \"1\")\n\n  show outline.entry.where(\n    level: 1\n  ): it => {\n    v(12pt, weak: true)\n    strong(it)\n  }\n\n  outline(indent: auto)\n\n  pagebreak()\n  outline(target: heading.where(supplement: [Appendix]), title: [Appendix])\n\n  pagebreak()\n\n  doc\n}\n\n#let appendix(body) = {\n  counter(heading).update(0)\n\n  set heading(\n    numbering: \"A\",\n    supplement: [Appendix]\n  );\n\n  body\n}\n\n#show: doc => conf(\n  title: \"Lorem\",\n  doc\n)\n\n= About\n#lorem(16)\n\n== References\n#lorem(32)\n\n= Introduction\n#lorem(16)\n\n#show: appendix\n\n= Tables\n#lorem(16)\n\n= Graphs\n#lorem(16)\n```\n\nI have two questions:\n\n1. How can I make the appendix outline generation dependent on whether the document contains `#show: appendix`?  I.e. if document doesn't contain an `#show appendix`, it shouldn't generate the appendix'es outline or the pagebreak related to it.\n2. How do I hide the appendix'es headings from the regular _Contents_ outline?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 73.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1629
    },
    {
      "id": 12826,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-05-20T18:08:15.271Z",
      "updated_at": "2025-05-20T18:08:15.271Z",
      "cooked": "<p>One way to easily detect whether the <code>#show: appendix</code> rule has been applied is to make the appendix function insert <a href=\"https://typst.app/docs/reference/introspection/metadata/\">metadata</a> into the document, which you can then <a href=\"https://typst.app/docs/reference/introspection/query/\">query</a> . Note that queries should be inside <a href=\"https://typst.app/docs/reference/context/\">contextual blocks</a>. Finally, you can use conditionals to choose what should be displayed.</p>\n<p>Something like this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let conf(\n  title: none,\n  doc,\n) = {\n  // stuff here\n\n  context {\n    if query(metadata.where(value: \"appendix\")).len() == 0 {\n      outline(indent: auto)\n    }\n    else {\n      let appendix-pos = query(metadata.where(value: \"appendix\")).first().location()\n      \n      outline(\n        indent: auto,\n        target: selector(heading).before(appendix-pos)\n      )\n      pagebreak()\n      outline(\n        target: heading.where(supplement: [Appendix]), \n        title: [Appendix]\n      )\n    }\n  }\n\n  pagebreak()\n\n  doc\n}\n\n#let appendix(body) = {\n  // stuff here\n\n  metadata(\"appendix\")\n\n  body\n}\n\n</code></pre>",
      "raw": "One way to easily detect whether the `#show: appendix` rule has been applied is to make the appendix function insert [metadata](https://typst.app/docs/reference/introspection/metadata/) into the document, which you can then [query](https://typst.app/docs/reference/introspection/query/) . Note that queries should be inside [contextual blocks](https://typst.app/docs/reference/context/). Finally, you can use conditionals to choose what should be displayed.\n\nSomething like this:\n\n```typst\n#let conf(\n  title: none,\n  doc,\n) = {\n  // stuff here\n\n  context {\n    if query(metadata.where(value: \"appendix\")).len() == 0 {\n      outline(indent: auto)\n    }\n    else {\n      let appendix-pos = query(metadata.where(value: \"appendix\")).first().location()\n      \n      outline(\n        indent: auto,\n        target: selector(heading).before(appendix-pos)\n      )\n      pagebreak()\n      outline(\n        target: heading.where(supplement: [Appendix]), \n        title: [Appendix]\n      )\n    }\n  }\n\n  pagebreak()\n\n  doc\n}\n\n#let appendix(body) = {\n  // stuff here\n\n  metadata(\"appendix\")\n\n  body\n}\n\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 4,
      "reads": 13,
      "score": 107.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 12872,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-21T13:37:30.397Z",
      "updated_at": "2025-05-21T13:37:30.397Z",
      "cooked": "<p>Hello. Here is an optimized version for your code + solution:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let conf(title: none, doc) = {\n  set heading(numbering: \"1.1\")\n  set pagebreak(weak: true)\n\n  v(15%)\n  align(center, text(17pt, strong(title)))\n  pagebreak()\n\n  set page(numbering: \"1\")\n  show outline.entry.where(level: 1): set block(above: 12pt)\n  show outline.entry.where(level: 1): strong\n\n  context if query(&lt;appendix-exists&gt;).len() == 0 { outline() } else {\n    outline(target: selector(heading).before(locate(&lt;appendix-exists&gt;)))\n    pagebreak()\n\n    outline(title: [Appendix], target: heading.where(supplement: [Appendix]))\n  }\n  pagebreak()\n\n  doc\n}\n\n#let appendix(body) = {\n  set heading(numbering: \"A\", supplement: [Appendix])\n  counter(heading).update(0)\n  [#metadata(none)&lt;appendix-exists&gt;]\n  body\n}\n\n#show: conf.with(title: \"Lorem\")\n\n= About\n#lorem(16)\n\n== References\n#lorem(32)\n\n= Introduction\n#lorem(16)\n\n#show: appendix\n\n= Tables\n#lorem(16)\n\n= Graphs\n#lorem(16)\n</code></pre>",
      "raw": "Hello. Here is an optimized version for your code + solution:\n\n```typ\n#let conf(title: none, doc) = {\n  set heading(numbering: \"1.1\")\n  set pagebreak(weak: true)\n\n  v(15%)\n  align(center, text(17pt, strong(title)))\n  pagebreak()\n\n  set page(numbering: \"1\")\n  show outline.entry.where(level: 1): set block(above: 12pt)\n  show outline.entry.where(level: 1): strong\n\n  context if query(<appendix-exists>).len() == 0 { outline() } else {\n    outline(target: selector(heading).before(locate(<appendix-exists>)))\n    pagebreak()\n\n    outline(title: [Appendix], target: heading.where(supplement: [Appendix]))\n  }\n  pagebreak()\n\n  doc\n}\n\n#let appendix(body) = {\n  set heading(numbering: \"A\", supplement: [Appendix])\n  counter(heading).update(0)\n  [#metadata(none)<appendix-exists>]\n  body\n}\n\n#show: conf.with(title: \"Lorem\")\n\n= About\n#lorem(16)\n\n== References\n#lorem(32)\n\n= Introduction\n#lorem(16)\n\n#show: appendix\n\n= Tables\n#lorem(16)\n\n= Graphs\n#lorem(16)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 8,
      "score": 16.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:34.363595"
}
{
  "topic_metadata": {
    "id": 4190,
    "title": "Is it possible to style table cells on the diagonal?",
    "slug": "is-it-possible-to-style-table-cells-on-the-diagonal",
    "posts_count": 5,
    "created_at": "2025-05-20T21:22:15.409Z",
    "last_posted_at": "2025-05-21T15:07:44.859Z",
    "views": 43,
    "like_count": 5,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "bluss",
    "tags": [
      "layout",
      "tables"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 273
  },
  "posts": [
    {
      "id": 12828,
      "post_number": 1,
      "username": "joffdd",
      "name": "Joff",
      "created_at": "2025-05-20T21:22:15.548Z",
      "updated_at": "2025-05-20T21:22:15.548Z",
      "cooked": "<p>While this works:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show table.cell.where(x: 0): strong\n</code></pre>\n<p>this appearently doesn’t:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show table.cell.where(x: y): strong\n</code></pre>\n<p>but would be sufficient to select any cell where x and y coordinates equal. Is there another approach for styling any diagonal cell (or generally, cells matching a more complex selection pattern)?</p>",
      "raw": "While this works:\n\n```typst\n#show table.cell.where(x: 0): strong\n```\n\nthis appearently doesn't:\n\n```typst\n#show table.cell.where(x: y): strong\n```\n\nbut would be sufficient to select any cell where x and y coordinates equal. Is there another approach for styling any diagonal cell (or generally, cells matching a more complex selection pattern)?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1494
    },
    {
      "id": 12829,
      "post_number": 2,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-05-20T21:49:43.025Z",
      "updated_at": "2025-05-20T21:49:43.025Z",
      "cooked": "<p>Instead of show-set it should be possible to use a full show rule (even if they are less flexible and harder to override or make composable rule sets with - the reason that they are less often seen.)</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show table.cell: it =&gt; {\n  if it.x == it.y { strong(it) } else { it }\n}\n</code></pre>",
      "raw": "Instead of show-set it should be possible to use a full show rule (even if they are less flexible and harder to override or make composable rule sets with - the reason that they are less often seen.)\n\n```typst\n#show table.cell: it => {\n  if it.x == it.y { strong(it) } else { it }\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 20,
      "score": 34.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 1272
    },
    {
      "id": 12876,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-21T13:57:53.760Z",
      "updated_at": "2025-05-21T13:57:53.760Z",
      "cooked": "<p>It’s not possible with a show rule selector. Related: <a href=\"https://github.com/typst/typst/issues/6099\" class=\"inline-onebox\">Select outline target with an array of allowed targets or a more flexible selector · Issue #6099 · typst/typst · GitHub</a>.</p>\n<p>I agree that the only solution would be to use <a href=\"https://forum.typst.app/t/is-it-possible-to-style-table-cells-on-the-diagonal/4190/2\" class=\"inline-onebox\">Is it possible to style table cells on the diagonal? - #2 by bluss</a>, although I would write it in one line:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show table.cell: it =&gt; if it.x == it.y { strong(it) } else { it }\n</code></pre>\n<p>This should probably be scoped if not all tables need this, which will resolve the issue with not being able to undo this.</p>",
      "raw": "It's not possible with a show rule selector. Related: https://github.com/typst/typst/issues/6099.\n\nI agree that the only solution would be to use https://forum.typst.app/t/is-it-possible-to-style-table-cells-on-the-diagonal/4190/2?u=andrew, although I would write it in one line:\n\n```typ\n#show table.cell: it => if it.x == it.y { strong(it) } else { it }\n```\n\nThis should probably be scoped if not all tables need this, which will resolve the issue with not being able to undo this.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 15,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12878,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2025-05-21T14:22:14.441Z",
      "updated_at": "2025-05-21T14:22:14.441Z",
      "cooked": "<p>For completeness: styling of the cell itself (rather than its content) can be done by passing a function as property value:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#table(\n  fill: (x, y) =&gt; if x == y { red } else { white },\n  columns: 4,\n  ..(none,)*16,\n)\n</code></pre>\n<p>Same thing globally with a set rule:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set table(fill: (x, y) =&gt; if x == y { red } else { white })\n#table(\n  columns: 4,\n  ..(none,)*16,\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/0/007798e3985835a04e7792bc165ff3082bb98a7b.png\" alt=\"image\" data-base62-sha1=\"48eCFZ8iWv0Jby9euRrhwx1Oc3\" width=\"66\" height=\"67\"></p>",
      "raw": "For completeness: styling of the cell itself (rather than its content) can be done by passing a function as property value:\n\n```\n#table(\n  fill: (x, y) => if x == y { red } else { white },\n  columns: 4,\n  ..(none,)*16,\n)\n```\n\nSame thing globally with a set rule:\n\n```\n#set table(fill: (x, y) => if x == y { red } else { white })\n#table(\n  columns: 4,\n  ..(none,)*16,\n)\n```\n\n![image|133x135, 50%](upload://48eCFZ8iWv0Jby9euRrhwx1Oc3.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 14,
      "score": 32.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 12885,
      "post_number": 5,
      "username": "joffdd",
      "name": "Joff",
      "created_at": "2025-05-21T15:07:44.859Z",
      "updated_at": "2025-05-21T15:07:44.859Z",
      "cooked": "<p>Thanks to you all, good to know what options are available!</p>",
      "raw": "Thanks to you all, good to know what options are available!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 12,
      "score": 2.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1494
    }
  ],
  "scraped_at": "2025-06-10T09:47:33.674809"
}
{
  "topic_metadata": {
    "id": 4192,
    "title": "Why there are still blanks when I use numbering.trim?",
    "slug": "why-there-are-still-blanks-when-i-use-numbering-trim",
    "posts_count": 4,
    "created_at": "2025-05-21T00:58:29.957Z",
    "last_posted_at": "2025-05-23T05:10:20.720Z",
    "views": 56,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "user3",
    "tags": [
      "scripting",
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 391
  },
  "posts": [
    {
      "id": 12831,
      "post_number": 1,
      "username": "user3",
      "name": "codemetic",
      "created_at": "2025-05-21T00:58:30.093Z",
      "updated_at": "2025-05-22T19:59:43.062Z",
      "cooked": "<p>This is my minimal reproduction</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show heading.where(level: 1):set heading(numbering: \"A\")\n\n#let get-current-chapter-num() = context [\n  #let heading-counter = counter(heading).get()\n  #let chapter = if heading-counter.len() &gt; 0 {\n    let current-heading = query(selector(heading.where(level: 1)).before(here())).last()\n    numbering(current-heading.numbering, heading-counter.at(0)).trim() // at here\n  } else { \"0\" }\n  #chapter\n]\n\n= Test\nHere is in chapter-#get-current-chapter-num()\\.\n</code></pre>\n<p>Although I have trimed the numbering output, but it still puts whitespace around the numbering.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/f525ee60845c0965d2e9501ead2ddc722e219713.png\" data-download-href=\"https://forum.typst.app/uploads/default/f525ee60845c0965d2e9501ead2ddc722e219713\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/f525ee60845c0965d2e9501ead2ddc722e219713_2_690x236.png\" alt=\"image\" data-base62-sha1=\"yYGfkZoFNn7HV1tUYjIV7gU4ZHl\" width=\"690\" height=\"236\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/f525ee60845c0965d2e9501ead2ddc722e219713_2_690x236.png, https://forum.typst.app/uploads/default/original/2X/f/f525ee60845c0965d2e9501ead2ddc722e219713.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/f525ee60845c0965d2e9501ead2ddc722e219713.png 2x\" data-dominant-color=\"ECEDED\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">755×259 20.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/f9fbb21b45fa68fb958d31b1f381d3341e0c755f.png\" data-download-href=\"https://forum.typst.app/uploads/default/f9fbb21b45fa68fb958d31b1f381d3341e0c755f\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/f9fbb21b45fa68fb958d31b1f381d3341e0c755f_2_690x253.png\" alt=\"image\" data-base62-sha1=\"zFs92h7RPmCohhmeU2ktraoe795\" width=\"690\" height=\"253\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/f9fbb21b45fa68fb958d31b1f381d3341e0c755f_2_690x253.png, https://forum.typst.app/uploads/default/original/2X/f/f9fbb21b45fa68fb958d31b1f381d3341e0c755f.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/f9fbb21b45fa68fb958d31b1f381d3341e0c755f.png 2x\" data-dominant-color=\"EEEEEF\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">779×286 21.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>And how do I remove these whitespaces around?<br>\nThank you.</p>",
      "raw": "This is my minimal reproduction\n\n```typst\n#show heading.where(level: 1):set heading(numbering: \"A\")\n\n#let get-current-chapter-num() = context [\n  #let heading-counter = counter(heading).get()\n  #let chapter = if heading-counter.len() > 0 {\n    let current-heading = query(selector(heading.where(level: 1)).before(here())).last()\n    numbering(current-heading.numbering, heading-counter.at(0)).trim() // at here\n  } else { \"0\" }\n  #chapter\n]\n\n= Test\nHere is in chapter-#get-current-chapter-num()\\.\n```\n\nAlthough I have trimed the numbering output, but it still puts whitespace around the numbering.\n\n![image|690x236](upload://yYGfkZoFNn7HV1tUYjIV7gU4ZHl.png)\n![image|690x253](upload://zFs92h7RPmCohhmeU2ktraoe795.png)\n\nAnd how do I remove these whitespaces around?\nThank you.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1630
    },
    {
      "id": 12832,
      "post_number": 2,
      "username": "user3",
      "name": "codemetic",
      "created_at": "2025-05-21T01:23:19.320Z",
      "updated_at": "2025-05-21T01:23:19.320Z",
      "cooked": "<p>Ok…it seems to be the prank of <code>content</code> type.<br>\nI finally resolved it by returing string directly.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let get-current-chapter-num() = context {\n  let heading-counter = counter(heading).get()\n  let chapter = if heading-counter.len() &gt; 0 {\n    let current-heading = query(selector(heading.where(level: 1)).before(here())).last()\n    return numbering(current-heading.numbering, heading-counter.at(0)).trim()\n  } else { \"0\" }\n  return chapter.trim()\n}\n</code></pre>",
      "raw": "Ok...it seems to be the prank of `content` type.\nI finally resolved it by returing string directly.\n```typst\n#let get-current-chapter-num() = context {\n  let heading-counter = counter(heading).get()\n  let chapter = if heading-counter.len() > 0 {\n    let current-heading = query(selector(heading.where(level: 1)).before(here())).last()\n    return numbering(current-heading.numbering, heading-counter.at(0)).trim()\n  } else { \"0\" }\n  return chapter.trim()\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1630
    },
    {
      "id": 12887,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-21T15:12:27.182Z",
      "updated_at": "2025-05-21T15:12:55.602Z",
      "cooked": "<p>The issue is that you are using non-inline markup mode in the context block instead of code.</p>\n<p>I don’t know why you need just a chapter number, but here is an easy solution:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): set heading(numbering: \"A\")\n\n#let get-current-chapter-num() = context {\n  let selector = heading.where(level: 1).before(here())\n  let previous-headings = query(selector)\n  if previous-headings.len() == 0 { return 0 }\n  counter(selector).display(previous-headings.last().numbering)\n}\n</code></pre>\n<p>But it looks like a <code>@heading</code> without the label. So something like this can be used:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): set heading(\n  numbering: \"A\",\n  supplement: \"Chapter\",\n)\n\n#let heading-reference(element) = {\n  let nums = counter(heading).at(element.location())\n  let numering = numbering(element.numbering, ..nums)\n  link(element.location(), [#element.supplement~#numering])\n}\n\n#let get-current-chapter() = context {\n  let last-headings = query(selector(heading.where(level: 1)).before(here()))\n  if last-headings.len() == 0 [Chapter 0] else {\n    heading-reference(last-headings.last())\n  }\n}\n</code></pre>\n<p>We can’t fetch <code>heading.where(level: 1).supplement</code> yet (<a href=\"https://github.com/typst/typst/issues/5574\" class=\"inline-onebox\">Resolve the nested element styles within a `context` · Issue #5574 · typst/typst · GitHub</a>), so the default value must be hard-coded, if it will be used at all.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">Here is in #get-current-chapter().\n\n= Test\n== Test\nHere is in #get-current-chapter().\n\n= Test\n== Test\nHere is in #get-current-chapter().\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/6/612c656f1a28162da148db2f062c116e9afb0a2d.png\" alt=\"image\" data-base62-sha1=\"dRDqQSieJ2hODNgP3yQNs0lb9r7\" width=\"147\" height=\"217\"></p>",
      "raw": "The issue is that you are using non-inline markup mode in the context block instead of code.\n\nI don't know why you need just a chapter number, but here is an easy solution:\n\n```typ\n#show heading.where(level: 1): set heading(numbering: \"A\")\n\n#let get-current-chapter-num() = context {\n  let selector = heading.where(level: 1).before(here())\n  let previous-headings = query(selector)\n  if previous-headings.len() == 0 { return 0 }\n  counter(selector).display(previous-headings.last().numbering)\n}\n```\n\nBut it looks like a `@heading` without the label. So something like this can be used:\n\n```typ\n#show heading.where(level: 1): set heading(\n  numbering: \"A\",\n  supplement: \"Chapter\",\n)\n\n#let heading-reference(element) = {\n  let nums = counter(heading).at(element.location())\n  let numering = numbering(element.numbering, ..nums)\n  link(element.location(), [#element.supplement~#numering])\n}\n\n#let get-current-chapter() = context {\n  let last-headings = query(selector(heading.where(level: 1)).before(here()))\n  if last-headings.len() == 0 [Chapter 0] else {\n    heading-reference(last-headings.last())\n  }\n}\n```\n\nWe can't fetch `heading.where(level: 1).supplement` yet (https://github.com/typst/typst/issues/5574), so the default value must be hard-coded, if it will be used at all.\n\n```typ\nHere is in #get-current-chapter().\n\n= Test\n== Test\nHere is in #get-current-chapter().\n\n= Test\n== Test\nHere is in #get-current-chapter().\n```\n\n![image|147x217](upload://dRDqQSieJ2hODNgP3yQNs0lb9r7.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 24.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12996,
      "post_number": 4,
      "username": "user3",
      "name": "codemetic",
      "created_at": "2025-05-23T05:10:20.720Z",
      "updated_at": "2025-05-23T05:10:20.720Z",
      "cooked": "<p>Thank you very much!</p>",
      "raw": "Thank you very much!",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 17,
      "score": 18.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1630
    }
  ],
  "scraped_at": "2025-06-10T09:47:32.938842"
}
{
  "topic_metadata": {
    "id": 4199,
    "title": "How can I change the table of contents to include the relevant chapters in different parts?",
    "slug": "how-can-i-change-the-table-of-contents-to-include-the-relevant-chapters-in-different-parts",
    "posts_count": 13,
    "created_at": "2025-05-21T09:07:07.234Z",
    "last_posted_at": "2025-05-24T16:15:14.034Z",
    "views": 79,
    "like_count": 3,
    "reply_count": 11,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "quachpas",
    "tags": [
      "outline"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 774
  },
  "posts": [
    {
      "id": 12843,
      "post_number": 1,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-21T09:07:07.411Z",
      "updated_at": "2025-05-22T19:12:02.249Z",
      "cooked": "<p>Hi,<br>\nCurrently I have the following in my table of content:<br>\nChapter_1<br>\nChapter_2<br>\nChapter_3<br>\nChapter_4<br>\nChapter_5<br>\nChapter_6<br>\nChapter_7<br>\nChapter_8<br>\nChapter_9<br>\nChapter_10</p>\n<p>I want to change the table of content to include the relevant chapters in different parts as follows:<br>\nPart_1<br>\nChapter_1<br>\nChapter_2<br>\nChapter_3<br>\nChapter_4<br>\nPart_2<br>\nChapter_5<br>\nChapter_6<br>\nChapter_7<br>\nPart_3<br>\nChapter_8<br>\nChapter_9<br>\nChapter_10</p>\n<p>Thank you for your support.</p>",
      "raw": "Hi,\nCurrently I have the following in my table of content:\nChapter_1\nChapter_2\nChapter_3\nChapter_4\nChapter_5\nChapter_6\nChapter_7\nChapter_8\nChapter_9\nChapter_10\n\nI want to change the table of content to include the relevant chapters in different parts as follows:\nPart_1\n   Chapter_1\n   Chapter_2\n   Chapter_3\n   Chapter_4\nPart_2\n   Chapter_5\n   Chapter_6\n   Chapter_7\nPart_3\n   Chapter_8\n   Chapter_9\n  Chapter_10\n\nThank you for your support.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 75.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12844,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-05-21T09:13:47.410Z",
      "updated_at": "2025-05-21T09:13:47.410Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/andrew_duncan\">@Andrew_Duncan</a>,</p>\n<p>is this what you are looking for?</p>\n<ul>\n<li><a href=\"https://forum.typst.app/t/how-to-show-an-outline-at-each-level-1-heading-for-all-its-child-headings/3984/3\" class=\"inline-onebox\">How to `show` an outline at each level 1 heading for all its child headings? - #3 by quachpas</a></li>\n<li><a href=\"https://forum.typst.app/t/how-can-i-create-sub-outlines-with-restricted-scopes/1156/4\" class=\"inline-onebox\">How can I create \"sub-outlines\" with restricted scopes? - #4 by Tinger</a></li>\n</ul>\n<p>Is the part also a heading? In which case, you should write it as level 1 heading, e.g., <code>= Part 1</code>, then your chapter is <code>== Chapter 1</code>.</p>",
      "raw": "Hello @Andrew_Duncan,\n\nis this what you are looking for?\n\n- https://forum.typst.app/t/how-to-show-an-outline-at-each-level-1-heading-for-all-its-child-headings/3984/3\n- https://forum.typst.app/t/how-can-i-create-sub-outlines-with-restricted-scopes/1156/4\n\nIs the part also a heading? In which case, you should write it as level 1 heading, e.g., `= Part 1`, then your chapter is `== Chapter 1`.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 40.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 12845,
      "post_number": 3,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-21T09:19:37.666Z",
      "updated_at": "2025-05-21T09:19:37.666Z",
      "cooked": "<p>Thank you for quick reply. No the part_1, part_2 and part_3 are not heading. The solution you provided works when the parts are heading.</p>",
      "raw": "Thank you for quick reply. No the part_1, part_2 and part_3 are not heading. The solution you provided works when the parts are heading.",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 15.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12846,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-05-21T09:25:20.830Z",
      "updated_at": "2025-05-21T09:25:33.364Z",
      "cooked": "<p>In which case, you need some kind of additional information to construct the outline.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// Part 1\n#metadata(\"Part 1\") &lt;part1&gt;\n#outline(..., target: selector(heading).after(&lt;part1&gt;).before(&lt;part2&gt;))\n\n= Chapter 1\n\n= Chapter 2\n\n#metadata(\"Part 2\") &lt;part2&gt;\n</code></pre>\n<p>Something like this maybe?</p>",
      "raw": "In which case, you need some kind of additional information to construct the outline.\n\n```typ\n// Part 1\n#metadata(\"Part 1\") <part1>\n#outline(..., target: selector(heading).after(<part1>).before(<part2>))\n\n= Chapter 1\n\n= Chapter 2\n\n#metadata(\"Part 2\") <part2>\n```\n\nSomething like this maybe?",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 4.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 12895,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-21T16:34:06.234Z",
      "updated_at": "2025-05-21T16:34:06.234Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew_Duncan\" data-post=\"3\" data-topic=\"4199\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/a/9335FF/48.png\" class=\"avatar\"> Andrew_Duncan:</div>\n<blockquote>\n<p>No the part_1, part_2 and part_3 are not heading.</p>\n</blockquote>\n</aside>\n<p>What is stopping you from making them top-level headings? It will make much more sense semantically, and as a consequence easier to solve the problem. Also, if you want help/relevant solutions, you need to provide an example how the ToC is created, not just plain text and “you guess how I did it”. Everyone would assume that the differently-named sections are headings.</p>",
      "raw": "[quote=\"Andrew_Duncan, post:3, topic:4199\"]\nNo the part_1, part_2 and part_3 are not heading.\n[/quote]\n\nWhat is stopping you from making them top-level headings? It will make much more sense semantically, and as a consequence easier to solve the problem. Also, if you want help/relevant solutions, you need to provide an example how the ToC is created, not just plain text and \"you guess how I did it\". Everyone would assume that the differently-named sections are headings.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12938,
      "post_number": 6,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-22T10:24:05.745Z",
      "updated_at": "2025-05-22T10:29:12.706Z",
      "cooked": "<p>Hi Andrew,<br>\nSorry for the mistake, I need to correct something. Part_1, Part_2 and Part_3 are also heading 1.<br>\nAnd for example when you collapse part_1 in the table content, chapter_1, chapter_2, chapter_3 and chapter_4 shall appear. So basically, chapter_1, chapter_2, chapter_3 and chapter_4 are children of part_1 but still look heading 1.</p>\n<p>Thank you.</p>",
      "raw": "Hi Andrew,\nSorry for the mistake, I need to correct something. Part_1, Part_2 and Part_3 are also heading 1.\nAnd for example when you collapse part_1 in the table content, chapter_1, chapter_2, chapter_3 and chapter_4 shall appear. So basically, chapter_1, chapter_2, chapter_3 and chapter_4 are children of part_1 but still look heading 1.\n\nThank you.",
      "reply_to_post_number": 5,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 14.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12957,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-22T16:23:28.883Z",
      "updated_at": "2025-05-22T16:23:28.883Z",
      "cooked": "<p>So now parts <em>are</em> headings. And chapters too.</p>\n<aside class=\"quote no-group\" data-username=\"Andrew_Duncan\" data-post=\"6\" data-topic=\"4199\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/a/9335FF/48.png\" class=\"avatar\"> Andrew_Duncan:</div>\n<blockquote>\n<p>when you collapse part_1 in the table content, chapter_1, chapter_2, chapter_3 and chapter_4 shall appear.</p>\n</blockquote>\n</aside>\n<p>What does “collapse part_1” means? Where you “collapse” it?</p>\n<aside class=\"quote no-group\" data-username=\"Andrew_Duncan\" data-post=\"6\" data-topic=\"4199\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/a/9335FF/48.png\" class=\"avatar\"> Andrew_Duncan:</div>\n<blockquote>\n<p>So basically, chapter_1, chapter_2, chapter_3 and chapter_4 are children of part_1 but still look heading 1.</p>\n</blockquote>\n</aside>\n<p>In what way exactly are chapters children of part 1? Where exactly the chapters still look like top-level headings?</p>\n<p>In the PDF’s Document Outline, you can only collapse sections with actual children, that appear as children. In the Typst’s outline you can style them however, but to distinguish between them and make a proper Document Outline you must use different levels for different section/heading types.</p>",
      "raw": "So now parts _are_ headings. And chapters too.\n\n[quote=\"Andrew_Duncan, post:6, topic:4199\"]\nwhen you collapse part_1 in the table content, chapter_1, chapter_2, chapter_3 and chapter_4 shall appear.\n[/quote]\n\nWhat does \"collapse part_1\" means? Where you \"collapse\" it?\n\n[quote=\"Andrew_Duncan, post:6, topic:4199\"]\nSo basically, chapter_1, chapter_2, chapter_3 and chapter_4 are children of part_1 but still look heading 1.\n[/quote]\n\nIn what way exactly are chapters children of part 1? Where exactly the chapters still look like top-level headings?\n\nIn the PDF's Document Outline, you can only collapse sections with actual children, that appear as children. In the Typst's outline you can style them however, but to distinguish between them and make a proper Document Outline you must use different levels for different section/heading types.",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 21,
      "score": 14.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 13074,
      "post_number": 8,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-05-24T13:08:42.153Z",
      "updated_at": "2025-05-24T13:08:42.153Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew_Duncan\" data-post=\"6\" data-topic=\"4199\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/a/9335FF/48.png\" class=\"avatar\"> Andrew_Duncan:</div>\n<blockquote>\n<p>And for example when you collapse part_1 in the table content, chapter_1, chapter_2, chapter_3 and chapter_4 shall appear. So basically, chapter_1, chapter_2, chapter_3 and chapter_4 are children of part_1 but still look heading 1.</p>\n</blockquote>\n</aside>\n<p>I think <a class=\"mention\" href=\"/u/andrew_duncan\">@Andrew_Duncan</a> is looking for this: <a href=\"https://forum.typst.app/t/part-independent-section/3906/6\" class=\"inline-onebox\">Part independent section - #6 by Andrew</a>.</p>\n<p><a class=\"mention\" href=\"/u/andrew_duncan\">@Andrew_Duncan</a> Typst does not have “part” or “chapter” like LaTeX’s report/book. Instead your part/chapter should be heading level 1, and the rest lower levels. See the link above for more details!</p>",
      "raw": "[quote=\"Andrew_Duncan, post:6, topic:4199\"]\nAnd for example when you collapse part_1 in the table content, chapter_1, chapter_2, chapter_3 and chapter_4 shall appear. So basically, chapter_1, chapter_2, chapter_3 and chapter_4 are children of part_1 but still look heading 1.\n[/quote]\n\nI think @Andrew_Duncan is looking for this: https://forum.typst.app/t/part-independent-section/3906/6.\n\n@Andrew_Duncan Typst does not have \"part\" or \"chapter\" like LaTeX's report/book. Instead your part/chapter should be heading level 1, and the rest lower levels. See the link above for more details!",
      "reply_to_post_number": 7,
      "reply_count": 3,
      "quote_count": 1,
      "like_count": 1,
      "reads": 17,
      "score": 38.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 13080,
      "post_number": 9,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-24T15:01:33.736Z",
      "updated_at": "2025-05-24T15:02:04.659Z",
      "cooked": "<p>Hi Quachpas,</p>\n<blockquote>\n<p>Typst does not have “part” or “chapter” like LaTeX’s report/book</p>\n</blockquote>\n<p>Do you know if Typst will support this feature in the future?<br>\nThank you for your feedback.</p>",
      "raw": "Hi Quachpas,\n>Typst does not have “part” or “chapter” like LaTeX’s report/book\n\nDo you know if Typst will support this feature in the future?\nThank you for your feedback.",
      "reply_to_post_number": 8,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 13.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 13085,
      "post_number": 10,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-24T15:38:08.191Z",
      "updated_at": "2025-05-24T15:38:08.191Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"quachpas\" data-post=\"8\" data-topic=\"4199\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/q/662200/48.png\" class=\"avatar\"> quachpas:</div>\n<blockquote>\n<p>Instead your part/chapter should be heading level 1</p>\n</blockquote>\n</aside>\n<p>The linked solution uses different levels for “parts” and “chapters”.</p>",
      "raw": "[quote=\"quachpas, post:8, topic:4199\"]\nInstead your part/chapter should be heading level 1\n[/quote]\n\nThe linked solution uses different levels for \"parts\" and \"chapters\".",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 13088,
      "post_number": 11,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-05-24T15:45:20.983Z",
      "updated_at": "2025-05-24T15:45:20.983Z",
      "cooked": "<p>I cannot speak for the Typst developers, but I don’t think it would be a necessary addition to the language itself.</p>\n<p>As is the case in LaTeX, these commands are better implemented by template authors (or in a common shared library).</p>\n<hr>\n<p>In more details (but not too much), commands <code>\\part</code> and <code>\\chapter</code> are actually</p>\n<pre data-code-wrap=\"tex\"><code class=\"lang-tex\">\\newcommand\\part{%\n \\if@noskipsec \\leavevmode \\fi\n \\par\n \\addvspace{4ex}%\n \\@afterindentfalse\n \\secdef\\@part\\@spart}\n</code></pre>\n<p>and chapter is</p>\n<pre data-code-wrap=\"tex\"><code class=\"lang-tex\">\\newcommand\\chapter{\\if@openright\\cleardoublepage\\else\\clearpage\\fi\n\\thispagestyle{plain}%\n</code></pre>\n<p>Without going into the details of <code>@part</code> and <code>@spart</code> (layout), it’s relatively simple to implement these commands in Typst itself, because the language is at a much higher level. Notably, replacing <code>\\cleardoublepage</code> with <code>pagebreak(to: \"even\")</code>.</p>",
      "raw": "I cannot speak for the Typst developers, but I don't think it would be a necessary addition to the language itself.\n\nAs is the case in LaTeX, these commands are better implemented by template authors (or in a common shared library).\n\n___\n\nIn more details (but not too much), commands `\\part` and `\\chapter` are actually\n```tex\n\\newcommand\\part{%\n \\if@noskipsec \\leavevmode \\fi\n \\par\n \\addvspace{4ex}%\n \\@afterindentfalse\n \\secdef\\@part\\@spart}\n```\nand chapter is \n```tex\n\\newcommand\\chapter{\\if@openright\\cleardoublepage\\else\\clearpage\\fi\n\\thispagestyle{plain}%\n```\n\nWithout going into the details of `@part` and `@spart` (layout), it's relatively simple to implement these commands in Typst itself, because the language is at a much higher level. Notably, replacing `\\cleardoublepage` with `pagebreak(to: \"even\")`.",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 13.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 13089,
      "post_number": 12,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-24T15:54:27.139Z",
      "updated_at": "2025-05-24T15:54:27.139Z",
      "cooked": "<p>I haven’t checked, but maybe <a href=\"https://typst.app/universe/package/rubber-article\" class=\"inline-onebox\">rubber-article – Typst Universe</a> has something like this.</p>\n<p><a href=\"https://typst.app/universe/search?kind=templates&amp;q=latex\">https://typst.app/universe/search?kind=templates&amp;q=latex</a></p>",
      "raw": "I haven't checked, but maybe https://typst.app/universe/package/rubber-article has something like this.\n\n<https://typst.app/universe/search?kind=templates&q=latex>",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 16,
      "score": 18.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 13092,
      "post_number": 13,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-24T16:15:14.034Z",
      "updated_at": "2025-05-24T16:15:14.034Z",
      "cooked": "<p>Hi Quachpas,<br>\nThank you for the link. Andrew provided the solution in it.<br>\nKind regards</p>",
      "raw": "Hi Quachpas,\nThank you for the link. Andrew provided the solution in it. \nKind regards",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    }
  ],
  "scraped_at": "2025-06-10T09:47:32.215533"
}
{
  "topic_metadata": {
    "id": 4202,
    "title": "How to correctly use state for an ordered outline?",
    "slug": "how-to-correctly-use-state-for-an-ordered-outline",
    "posts_count": 6,
    "created_at": "2025-05-21T09:42:56.133Z",
    "last_posted_at": "2025-05-22T18:12:36.150Z",
    "views": 58,
    "like_count": 4,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "undr",
    "tags": [
      "scripting",
      "layout",
      "templates"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1097
  },
  "posts": [
    {
      "id": 12850,
      "post_number": 1,
      "username": "Alex",
      "name": "Alex",
      "created_at": "2025-05-21T09:42:56.361Z",
      "updated_at": "2025-05-22T09:16:54.304Z",
      "cooked": "<p>Hello everyone,</p>\n<p>For a personal project where i’m trying to create a sorted outline by alphabetical order i found myself blocked due to my understanding of state that i consider has a global variable.</p>\n<p>The current implementation of this ordered outline is :</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let alphabet-displayed = state(\"alphabet-displayed\", ())\n#let ordered-outline() = context {\n  let current-page = here().page()\n  let headings = query(selector(heading.where(level : 2)))\n  let sorted-headings = headings.sorted(\n    key: heading =&gt; {if heading.body.has(\"text\") {heading.body.text} else {\"\"}}\n  )\n  sorted-headings.map(entry =&gt; {\n      let first-letter = entry.body.text.first() \n      // reimplement default outline.entry\n      if entry.numbering != none {\n        numbering(entry.numbering, ..counter(heading).at(entry.location()))\n      }\n      [ ]\n      /*    Focus Here    */\n      if (first-letter not in alphabet-displayed.get()){\n        text(first-letter) + linebreak()\n        alphabet-displayed.update(current =&gt; current + (first-letter,))\n      }\n      h(4pt) + entry.body\n      box(width: 1fr, repeat[.])\n      [#entry.location().page()]\n    }).join([ \\ ])\n}\n\n\n== Aaaa\nsome song\n== Abaaa\nsome song\n== B\nsome song\n== C\nsome song\n== D\nsome song\n\n#pagebreak()\n= Index\n#ordered-outline()\n</code></pre>\n<p>With result :</p>\n<details>\n<summary>\nResult Image</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/4/46dbe58a8c94bd7b15cefde9dac66920cda58018.png\" data-download-href=\"https://forum.typst.app/uploads/default/46dbe58a8c94bd7b15cefde9dac66920cda58018\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/4/46dbe58a8c94bd7b15cefde9dac66920cda58018_2_690x359.png\" alt=\"image\" data-base62-sha1=\"a6Qy3ADCFmdNprBBedJswJkdyXe\" width=\"690\" height=\"359\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/4/46dbe58a8c94bd7b15cefde9dac66920cda58018_2_690x359.png, https://forum.typst.app/uploads/default/original/2X/4/46dbe58a8c94bd7b15cefde9dac66920cda58018.png 1.5x, https://forum.typst.app/uploads/default/original/2X/4/46dbe58a8c94bd7b15cefde9dac66920cda58018.png 2x\" data-dominant-color=\"FDFDFD\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">710×370 22.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>I want the letter of each “sub section” of the outline to be shown only one. How can i achieve this result ? In the example give, “A” should only be noted once even thought multiple song begin with A</p>\n<p>Thanks in advance for your help.</p>\n<details>\n<summary>\nEdits</summary>\n<p>EDIT 1 : Reformat code &amp; image for following <a class=\"mention\" href=\"/u/andrew\">@Andrew</a> comment.</p>\n</details>",
      "raw": "Hello everyone, \n\nFor a personal project where i'm trying to create a sorted outline by alphabetical order i found myself blocked due to my understanding of state that i consider has a global variable.\n\nThe current implementation of this ordered outline is : \n```typst\n#let alphabet-displayed = state(\"alphabet-displayed\", ())\n#let ordered-outline() = context {\n  let current-page = here().page()\n  let headings = query(selector(heading.where(level : 2)))\n  let sorted-headings = headings.sorted(\n    key: heading => {if heading.body.has(\"text\") {heading.body.text} else {\"\"}}\n  )\n  sorted-headings.map(entry => {\n      let first-letter = entry.body.text.first() \n      // reimplement default outline.entry\n      if entry.numbering != none {\n        numbering(entry.numbering, ..counter(heading).at(entry.location()))\n      }\n      [ ]\n      /*    Focus Here    */\n      if (first-letter not in alphabet-displayed.get()){\n        text(first-letter) + linebreak()\n        alphabet-displayed.update(current => current + (first-letter,))\n      }\n      h(4pt) + entry.body\n      box(width: 1fr, repeat[.])\n      [#entry.location().page()]\n    }).join([ \\ ])\n}\n\n\n== Aaaa\nsome song\n== Abaaa\nsome song\n== B\nsome song\n== C\nsome song\n== D\nsome song\n\n#pagebreak()\n= Index\n#ordered-outline()\n```\nWith result : \n[details=\"Result Image\"]\n![image|690x359](upload://a6Qy3ADCFmdNprBBedJswJkdyXe.png)\n[/details]\n\n\nI want the letter of each \"sub section\" of the outline to be shown only one. How can i achieve this result ? In the example give, \"A\" should only be noted once even thought multiple song begin with A \n\nThanks in advance for your help.\n[details=\"Edits\"]\nEDIT 1 : Reformat code & image for following @Andrew comment.\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 53.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 987
    },
    {
      "id": 12852,
      "post_number": 2,
      "username": "vmartel08",
      "name": "Vincent Martel",
      "created_at": "2025-05-21T10:08:34.564Z",
      "updated_at": "2025-05-21T10:11:22.981Z",
      "cooked": "<p>Hi there,</p>\n<p>Are you creating an index?</p>\n<p>This may be of some help <a href=\"https://typst.app/universe/package/in-dexter/\" class=\"inline-onebox\">in-dexter – Typst Universe</a> or at least some code they are using. Or perhaps <a href=\"https://typst.app/universe/package/glossarium\" class=\"inline-onebox\">glossarium – Typst Universe</a>.</p>",
      "raw": "Hi there,\n\nAre you creating an index? \n\nThis may be of some help https://typst.app/universe/package/in-dexter/ or at least some code they are using. Or perhaps https://typst.app/universe/package/glossarium.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 17,
      "score": 28.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 936
    },
    {
      "id": 12868,
      "post_number": 3,
      "username": "Alex",
      "name": "Alex",
      "created_at": "2025-05-21T13:26:09.934Z",
      "updated_at": "2025-05-21T13:26:09.934Z",
      "cooked": "<p>Hello,</p>\n<p>I’m actually trying to make an index from scratch.</p>\n<p>While those libraries are great, they don’t quite fit what I’m trying to achieve, especially after looking through the source code.</p>\n<p>I’d like to stick with the <code>state</code> approach, as I think it’ll help me deepen my understanding of how it all works.</p>",
      "raw": "Hello, \n\nI'm actually trying to make an index from scratch. \n\nWhile those libraries are great, they don't quite fit what I'm trying to achieve, especially after looking through the source code.\n\nI'd like to stick with the `state` approach, as I think it'll help me deepen my understanding of how it all works.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 8.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 987
    },
    {
      "id": 12900,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-21T17:52:24.032Z",
      "updated_at": "2025-05-21T17:52:24.032Z",
      "cooked": "<p>Hello. I can’t compile a document that uses your function. See <a href=\"https://sscce.org\">https://sscce.org</a>.</p>\n<aside class=\"quote no-group\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p>It would be great if you could post the <strong>smallest possible code samples</strong> that allow people to see what your problem is.</p>\n</blockquote>\n</aside>",
      "raw": "Hello. I can't compile a document that uses your function. See https://sscce.org.\n\n[quote=\"reknih, post:1, topic:11\"]\nIt would be great if you could post the **smallest possible code samples** that allow people to see what your problem is.\n[/quote]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 15,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12972,
      "post_number": 5,
      "username": "undr",
      "name": "undr",
      "created_at": "2025-05-22T17:47:30.251Z",
      "updated_at": "2025-05-22T17:54:00.288Z",
      "cooked": "<p>The answer may be wrapping another <code>context</code> :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">/*    Focus Here    */\n#context if (first-letter not in alphabet-displayed.get()){\n  text(first-letter) + linebreak()\n  alphabet-displayed.update(current =&gt; current + (first-letter,))\n}\n</code></pre>\n<details>\n<summary>\nResult</summary>\n<p> <img src=\"https://forum.typst.app/uploads/default/original/2X/d/dde51d49e64f1e94a9f47096748d5985398c1535.png\" alt=\"result\" data-base62-sha1=\"vEYoztFji7LqUECsOwsCar3cR5X\" width=\"283\" height=\"407\"> </p>\n</details>\n<details>\n<summary>\nWhole code</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\n  width:5cm,\n  height:auto,\n  margin:10pt,\n)\n#let alphabet-displayed = state(\"alphabet-displayed\", ())\n#let writing = state(\"writing\", true)\n#let ordered-outline() = context {\n  let current-page = here().page()\n  let headings = query(selector(heading.where(level : 2)))\n  let sorted-headings = headings.sorted(\n    key: heading =&gt; {if heading.body.has(\"text\") {heading.body.text} else {\"\"}}\n  )\n  sorted-headings.map(entry =&gt; {\n      let first-letter = entry.body.text.first() \n      // reimplement default outline.entry\n      if entry.numbering != none {\n        numbering(entry.numbering, ..counter(heading).at(entry.location()))\n      }\n      [ ]\n      /*    Focus Here    */\n      context if (first-letter not in alphabet-displayed.get()){\n        text(first-letter) + linebreak()\n        alphabet-displayed.update(current =&gt; current + (first-letter,))\n      }\n      h(4pt) + entry.body\n      box(width: 1fr, repeat[.])\n      [#entry.location().page()]\n    }).join([ \\ ])\n}\n\n== Aaaa\nsome song\n== Abaaa\nsome song\n== B\nsome song\n== C\nsome song\n== D\n== Diary life\n== #sym.suit.heart\nsome song\n\n#pagebreak()\n= Index\n#ordered-outline()\n</code></pre>\n</details>\n<p>In a context environment, if you want to use an updated <code>state.value</code> , you have to insert another context by nested or parallel context.</p>\n<p>This is explained in the <a href=\"https://typst.app/docs/reference/context/#nested-contexts\">context reference</a>, which provides a very good overview. However, in this case, the fix actually uses a <strong>parallel context</strong> rather than a <strong>nested one</strong>, so the official explanation might not be entirely sufficient on its own. That’s why I wanted to add my own example to illustrate both patterns.</p>\n<details>\n<summary>\nAnother example</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let mycounter = counter(\"mycounter\")\n\n#context[\n  #mycounter.step()\n  Got #mycounter.display() after calling step().\n  // step() inside a context does not take effect immediately.\n\n  #context[\n    // Previous step() took effect here due to nesting.\n    Got #mycounter.display() by nesting a context.\n\n    // Now insert a counter (i.e., state) update.\n    #mycounter.step()\n\n    Got #mycounter.display(), which has not changed.\n    // Note: step() does not update the display number in the same context.\n\n    #context[\n      // 1. Nesting context\n      // Second step() took effect here due to nesting.\n      Got #mycounter.display() by nesting again.\n    ]\n  ]\n\n  #context[\n    // 2. Parallelizing context\n     // Second step() took effect here due to parallelizing.\n    Got #mycounter.display() by using a parallel context.\n  ]\n]\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/e/e5a7014abd0061133ec13249482d28ad468fabc5.png\" alt=\"zyvb\" data-base62-sha1=\"wLB98AnVV39myllNk9LvJYvnnJb\" width=\"336\" height=\"218\"></p>\n</details>",
      "raw": "The answer may be wrapping another `context` :\n\n```\n/*    Focus Here    */\n#context if (first-letter not in alphabet-displayed.get()){\n  text(first-letter) + linebreak()\n  alphabet-displayed.update(current => current + (first-letter,))\n}\n```\n\n[details=\"Result\"] ![result|283x407](upload://vEYoztFji7LqUECsOwsCar3cR5X.png) [/details] \n[details=\"Whole code\"]\n```\n#set page(\n  width:5cm,\n  height:auto,\n  margin:10pt,\n)\n#let alphabet-displayed = state(\"alphabet-displayed\", ())\n#let writing = state(\"writing\", true)\n#let ordered-outline() = context {\n  let current-page = here().page()\n  let headings = query(selector(heading.where(level : 2)))\n  let sorted-headings = headings.sorted(\n    key: heading => {if heading.body.has(\"text\") {heading.body.text} else {\"\"}}\n  )\n  sorted-headings.map(entry => {\n      let first-letter = entry.body.text.first() \n      // reimplement default outline.entry\n      if entry.numbering != none {\n        numbering(entry.numbering, ..counter(heading).at(entry.location()))\n      }\n      [ ]\n      /*    Focus Here    */\n      context if (first-letter not in alphabet-displayed.get()){\n        text(first-letter) + linebreak()\n        alphabet-displayed.update(current => current + (first-letter,))\n      }\n      h(4pt) + entry.body\n      box(width: 1fr, repeat[.])\n      [#entry.location().page()]\n    }).join([ \\ ])\n}\n\n== Aaaa\nsome song\n== Abaaa\nsome song\n== B\nsome song\n== C\nsome song\n== D\n== Diary life\n== #sym.suit.heart\nsome song\n\n#pagebreak()\n= Index\n#ordered-outline()\n```\n[/details] \nIn a context environment, if you want to use an updated `state.value` , you have to insert another context by nested or parallel context. \n\nThis is explained in the [context reference](https://typst.app/docs/reference/context/#nested-contexts), which provides a very good overview. However, in this case, the fix actually uses a **parallel context** rather than a **nested one**, so the official explanation might not be entirely sufficient on its own. That's why I wanted to add my own example to illustrate both patterns.\n[details=\"Another example\"]\n\n```\n#let mycounter = counter(\"mycounter\")\n\n#context[\n  #mycounter.step()\n  Got #mycounter.display() after calling step().\n  // step() inside a context does not take effect immediately.\n\n  #context[\n    // Previous step() took effect here due to nesting.\n    Got #mycounter.display() by nesting a context.\n\n    // Now insert a counter (i.e., state) update.\n    #mycounter.step()\n\n    Got #mycounter.display(), which has not changed.\n    // Note: step() does not update the display number in the same context.\n\n    #context[\n      // 1. Nesting context\n      // Second step() took effect here due to nesting.\n      Got #mycounter.display() by nesting again.\n    ]\n  ]\n\n  #context[\n    // 2. Parallelizing context\n     // Second step() took effect here due to parallelizing.\n    Got #mycounter.display() by using a parallel context.\n  ]\n]\n```\n\n![zyvb|336x218](upload://wLB98AnVV39myllNk9LvJYvnnJb.png) \n[/details]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 13,
      "score": 17.6,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 982
    },
    {
      "id": 12973,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-22T18:12:36.150Z",
      "updated_at": "2025-05-22T18:12:36.150Z",
      "cooked": "<p>If you want to do an outline properly, that mimics the default one, then you need to</p>\n<ul>\n<li>use blocks,</li>\n<li>the outline heading should not be included in the PDF Document Outline, nor have numbering,</li>\n<li>the heading level is 2 for no reason, unless there is a context missing,</li>\n<li>and the is link missing to each heading.</li>\n</ul>\n<p>Though, the indent thingy kind of goes away, since you make a custom one-time indent (I’m not sure if grid is used in the new outline). I feel the most natural way is to group headings by the first letter and then work on the dictionary and then on individual headings. You also have some stuff that is never used.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/t4t:0.4.3\": get\n\n#let ordered-outline(title: \"Index\") = context {\n  let alphabet-displayed = state(\"alphabet-displayed\", ())\n  let headings = query(heading.where(level: 1))\n  let index = headings.position(it =&gt; get.text(it) == get.text(title))\n  if index != none { _ = headings.remove(index) }\n  let sorted-headings = headings.sorted(key: get.text)\n\n  let buckets = (:)\n  for heading in sorted-headings {\n    let letter = get.text(heading).clusters().first()\n    buckets.insert(letter, buckets.at(letter, default: ()) + (heading,))\n  }\n\n  heading(outlined: false, numbering: none, title)\n  buckets\n    .pairs()\n    .map(((letter, headings)) =&gt; {\n      let fill = box(width: 1fr, repeat[.])\n      let headings = for entry in headings {\n        let numbering = if entry.numbering != none {\n          numbering(entry.numbering, ..counter(heading).at(entry.location()))\n          h(0.3em)\n        }\n        let page = entry.location().page()\n        let body = pad(left: 0.7em, block[#numbering#entry.body #fill #page])\n        link(entry.location(), body)\n      }\n      block(letter, spacing: 0.65em)\n      block(spacing: 0pt, layout(size =&gt; {\n        let extend = 0.4em\n        place(dx: 0.3em, dy: -extend, line(\n          length: measure(headings).height + extend,\n          angle: 90deg,\n          stroke: purple,\n        ))\n      }))\n      headings\n    })\n    .join()\n}\n\n#set heading(numbering: \"1.\")\n\n#ordered-outline()\n\n= #text(red)[Aaaa]\n= Aaaa\nsome song\n= Cheading\nsome song\n= Bheading\n#pagebreak()\nsome song\n= Dheading\nsome song\n= Aaaaa\nsome song\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/0/002bf789e4559f781289bc495d01c53a2a3aff06.png\" alt=\"image\" data-base62-sha1=\"1wcjZZgI7Gx9VkYoIsj8AeP4b4\" width=\"586\" height=\"418\"></p>\n<p>You can of course remove the fancy part:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">      block(spacing: 0pt, layout(size =&gt; {\n        let extend = 0.4em\n        place(dx: 0.3em, dy: -extend, line(\n          length: measure(headings).height + extend,\n          angle: 90deg,\n          stroke: purple,\n        ))\n      }))\n</code></pre>",
      "raw": "If you want to do an outline properly, that mimics the default one, then you need to\n- use blocks,\n- the outline heading should not be included in the PDF Document Outline, nor have numbering,\n- the heading level is 2 for no reason, unless there is a context missing,\n- and the is link missing to each heading.\n\nThough, the indent thingy kind of goes away, since you make a custom one-time indent (I'm not sure if grid is used in the new outline). I feel the most natural way is to group headings by the first letter and then work on the dictionary and then on individual headings. You also have some stuff that is never used.\n\n```typ\n#import \"@preview/t4t:0.4.3\": get\n\n#let ordered-outline(title: \"Index\") = context {\n  let alphabet-displayed = state(\"alphabet-displayed\", ())\n  let headings = query(heading.where(level: 1))\n  let index = headings.position(it => get.text(it) == get.text(title))\n  if index != none { _ = headings.remove(index) }\n  let sorted-headings = headings.sorted(key: get.text)\n\n  let buckets = (:)\n  for heading in sorted-headings {\n    let letter = get.text(heading).clusters().first()\n    buckets.insert(letter, buckets.at(letter, default: ()) + (heading,))\n  }\n\n  heading(outlined: false, numbering: none, title)\n  buckets\n    .pairs()\n    .map(((letter, headings)) => {\n      let fill = box(width: 1fr, repeat[.])\n      let headings = for entry in headings {\n        let numbering = if entry.numbering != none {\n          numbering(entry.numbering, ..counter(heading).at(entry.location()))\n          h(0.3em)\n        }\n        let page = entry.location().page()\n        let body = pad(left: 0.7em, block[#numbering#entry.body #fill #page])\n        link(entry.location(), body)\n      }\n      block(letter, spacing: 0.65em)\n      block(spacing: 0pt, layout(size => {\n        let extend = 0.4em\n        place(dx: 0.3em, dy: -extend, line(\n          length: measure(headings).height + extend,\n          angle: 90deg,\n          stroke: purple,\n        ))\n      }))\n      headings\n    })\n    .join()\n}\n\n#set heading(numbering: \"1.\")\n\n#ordered-outline()\n\n= #text(red)[Aaaa]\n= Aaaa\nsome song\n= Cheading\nsome song\n= Bheading\n#pagebreak()\nsome song\n= Dheading\nsome song\n= Aaaaa\nsome song\n```\n\n![image|586x418](upload://1wcjZZgI7Gx9VkYoIsj8AeP4b4.png)\n\nYou can of course remove the fancy part:\n\n```typc\n      block(spacing: 0pt, layout(size => {\n        let extend = 0.4em\n        place(dx: 0.3em, dy: -extend, line(\n          length: measure(headings).height + extend,\n          angle: 90deg,\n          stroke: purple,\n        ))\n      }))\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 13,
      "score": 17.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:31.445636"
}
{
  "topic_metadata": {
    "id": 4207,
    "title": "How do I add a supplement for a alphanumerical citation?",
    "slug": "how-do-i-add-a-supplement-for-a-alphanumerical-citation",
    "posts_count": 3,
    "created_at": "2025-05-21T12:16:14.957Z",
    "last_posted_at": "2025-05-21T18:33:37.187Z",
    "views": 28,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "citation"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 142
  },
  "posts": [
    {
      "id": 12860,
      "post_number": 1,
      "username": "jenny",
      "name": "jenny",
      "created_at": "2025-05-21T12:16:15.063Z",
      "updated_at": "2025-05-21T12:16:15.063Z",
      "cooked": "<p>As title says: I’m lost. I found a GitHub Thread where they claimed that it’s fixed but it just will not work for me. Is “<span class=\"mention\">@Book</span>[p.~5]” the wrong form? I’m on version 0.13.1 in the webapp</p>",
      "raw": "As title says: I'm lost. I found a GitHub Thread where they claimed that it's fixed but it just will not work for me. Is \"@Book[p.~5]\" the wrong form? I'm on version 0.13.1 in the webapp",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 13,
      "score": 37.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1633
    },
    {
      "id": 12870,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-05-21T13:33:59.887Z",
      "updated_at": "2025-05-21T13:33:59.887Z",
      "cooked": "<p>The <a href=\"https://github.com/typst/hayagriva/issues/48\" rel=\"noopener nofollow ugc\">issue</a> is indeed fixed; however, the fix has not been released yet, so you will need to wait for Typst 0.14.</p>\n<p>In the meantime, you can get a copy of the style’s fixed version from <a href=\"https://github.com/typst/hayagriva/blob/main/styles/alphanumeric.csl\" rel=\"noopener nofollow ugc\">GitHub</a> and upload it to your project on the Typst web app. There, you then just need to set the style to that file, as in</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set cite(style: \"alphanumeric.csl\")\n</code></pre>",
      "raw": "The [issue](https://github.com/typst/hayagriva/issues/48) is indeed fixed; however, the fix has not been released yet, so you will need to wait for Typst 0.14.\n\nIn the meantime, you can get a copy of the style's fixed version from [GitHub](https://github.com/typst/hayagriva/blob/main/styles/alphanumeric.csl) and upload it to your project on the Typst web app. There, you then just need to set the style to that file, as in\n```typ\n#set cite(style: \"alphanumeric.csl\")\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 11,
      "score": 32.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 12903,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-21T18:33:37.187Z",
      "updated_at": "2025-05-21T18:33:37.187Z",
      "cooked": "<p>Hello. Please use backticks when referencing code snippets, and update your post.</p>",
      "raw": "Hello. Please use backticks when referencing code snippets, and update your post.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 10,
      "score": 2.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:30.679930"
}
