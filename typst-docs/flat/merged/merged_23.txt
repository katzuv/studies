{
  "topic_metadata": {
    "id": 3068,
    "title": "Do I need different code for numbering equations and figures?",
    "slug": "do-i-need-different-code-for-numbering-equations-and-figures",
    "posts_count": 5,
    "created_at": "2025-03-01T18:59:41.112Z",
    "last_posted_at": "2025-03-03T17:41:49.459Z",
    "views": 131,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "numbering",
      "figures",
      "counter"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 504
  },
  "posts": [
    {
      "id": 9275,
      "post_number": 1,
      "username": "Johannes",
      "name": "Johannes",
      "created_at": "2025-03-01T18:59:41.233Z",
      "updated_at": "2025-03-09T13:19:29.709Z",
      "cooked": "<p>Hey, I‘m trying to number my figures in such a way, that the first figure in section 1 is labeled 1.1, the second one 1.2, the first one in section 2 2.1, and so on. I have a piece of code that does exactly that for equations:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">\n#set math.equation(numbering: it =&gt; {\n    let count = counter(heading.where(level: 1)).at(here()).first()\n    if count &gt; 0 {\n      numbering(\"(1.1)\", count - 1, it)\n    }\n    else {\n      numbering(\"(1.1)\", count, it)\n    }\n})\n\n</code></pre>\n<p>The <code>-1</code> is to adjust for my starting with section 0.</p>\n<p>when adjusting to <span class=\"hashtag-raw\">#set</span> figure(numbering … , this doesn‘t work for figures. The first number changes correctly, but the second doesn‘t reset (yielding the number 2.4 for the first figure in section 2).<br>\nWhat am I missing? Thanks!</p>",
      "raw": "Hey, I‘m trying to number my figures in such a way, that the first figure in section 1 is labeled 1.1, the second one 1.2, the first one in section 2 2.1, and so on. I have a piece of code that does exactly that for equations:\n\n```typ\n\n#set math.equation(numbering: it => {\n    let count = counter(heading.where(level: 1)).at(here()).first()\n    if count > 0 {\n      numbering(\"(1.1)\", count - 1, it)\n    }\n    else {\n      numbering(\"(1.1)\", count, it)\n    }\n})\n\n```\nThe `-1` is to adjust for my starting with section 0.\n\nwhen adjusting to #set figure(numbering … , this doesn‘t work for figures. The first number changes correctly, but the second doesn‘t reset (yielding the number 2.4 for the first figure in section 2).\nWhat am I missing? Thanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 335.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1129
    },
    {
      "id": 9276,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-03-01T19:31:00.516Z",
      "updated_at": "2025-03-01T19:32:42.753Z",
      "cooked": "<p>You need to also reset the figure/equation counters manually with each first-level heading. You can do so with a show rule</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): it =&gt; {\n  counter(figure.where(kind: image)).update(0)\n  counter(figure.where(kind: table)).update(0)\n  counter(figure.where(kind: raw)).update(0)\n  // ..repeat with whatever figure kinds you use\n  counter(math.equation).update(0)\n  it\n}\n</code></pre>\n<p>Also, there is <code>counter(..).get()</code> which you can use instead of <code>counter(..).at(here())</code></p>",
      "raw": "You need to also reset the figure/equation counters manually with each first-level heading. You can do so with a show rule\n```typ\n#show heading.where(level: 1): it => {\n  counter(figure.where(kind: image)).update(0)\n  counter(figure.where(kind: table)).update(0)\n  counter(figure.where(kind: raw)).update(0)\n  // ..repeat with whatever figure kinds you use\n  counter(math.equation).update(0)\n  it\n}\n```\n\nAlso, there is `counter(..).get()` which you can use instead of `counter(..).at(here())`",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 20.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 9278,
      "post_number": 3,
      "username": "Johannes",
      "name": "Johannes",
      "created_at": "2025-03-01T20:09:26.263Z",
      "updated_at": "2025-03-01T20:09:26.263Z",
      "cooked": "<p>Ah, I see. Thanks for pointing this out!</p>",
      "raw": "Ah, I see. Thanks for pointing this out!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 4.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1129
    },
    {
      "id": 9303,
      "post_number": 4,
      "username": "Qualzaks",
      "name": "Qualzaks",
      "created_at": "2025-03-02T20:29:06.549Z",
      "updated_at": "2025-03-09T13:18:54.409Z",
      "cooked": "<p>Hello ,<br>\nSo i just fiddle a little bit with this and</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1.\")\n//This will reset counter at every heading level\n#show heading: it =&gt; {\n  counter(figure.where(kind: image)).update(0)\n  //counter(figure.where(kind: table)).update(0)\n  //counter(figure.where(kind: raw)).update(0)\n  // ..repeat with whatever figure kinds you use\n  //counter(math.equation).update(0)\n  it\n}\n\n#set figure(numbering: it =&gt; { \n    let count = counter(heading).get()\n    if count.len() &gt; 1 {\n      //I know my document will not have more than 3 level of headings\n      numbering(\"1.1.A.\", count.at(0), count.at(1), it)\n      //e.g. This will put \"Figure 2.3.A\"\n    }\n    else {\n      numbering(\"1.A.\", count.at(0), it)\n      //e.g. This will put \"Figure 2.A\" as the count will be only one level (main one)\n    }\n})\n\n\n\n= Chapter name \n== Sub-chapter\n\n#align(center+top)[\n  #figure(\nimage(\"picture001.jpg\", width: 25%),\ncaption: [this example graphic],\n\n)&lt;pictureA&gt;\n]\n\nhave a look at this Reference \\@pictureA -&gt; @pictureA\n\n#align(center+top)[\n  #figure(\nimage(\"picture001.jpg\", width: 25%),\ncaption: [this example graphic],\n\n)&lt;pictureB&gt;\n]\n\n= Chapter name \n#align(center+top)[\n  #figure(\nimage(\"picture001.jpg\", width: 25%),\ncaption: [this example graphic],\n\n)&lt;picture1.1.A&gt;\n]\n\n#align(center+top)[\n  #figure(\nimage(\"picture001.jpg\", width: 25%),\ncaption: [this example graphic],\n\n)&lt;picture1.1.B&gt;\n]\n#counter(heading).update(7)\n\n== Sub-chapter\n\n\n#align(center+top)[\n  #figure(\nimage(\"picture001.jpg\", width: 25%),\ncaption: [this example graphic],\n\n)&lt;picture2.1.A&gt;\n]\n#align(center+top)[\n  #figure(\nimage(\"picture001.jpg\", width: 25%),\ncaption: [this example graphic],\n\n)&lt;picture2.1.B&gt;\n]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/66e68e0fefb557a26983d6fff9a037da2417a857.png\" data-download-href=\"https://forum.typst.app/uploads/default/66e68e0fefb557a26983d6fff9a037da2417a857\" title=\"Zrzut ekranu z 2025-03-02 21-21-39\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/6/66e68e0fefb557a26983d6fff9a037da2417a857_2_297x500.png\" alt=\"Zrzut ekranu z 2025-03-02 21-21-39\" data-base62-sha1=\"eGiF93zGhfJ4oQd8el72qcR0WSb\" width=\"297\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/6/66e68e0fefb557a26983d6fff9a037da2417a857_2_297x500.png, https://forum.typst.app/uploads/default/optimized/2X/6/66e68e0fefb557a26983d6fff9a037da2417a857_2_445x750.png 1.5x, https://forum.typst.app/uploads/default/original/2X/6/66e68e0fefb557a26983d6fff9a037da2417a857.png 2x\" data-dominant-color=\"F7F7F3\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Zrzut ekranu z 2025-03-02 21-21-39</span><span class=\"informations\">489×822 77.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Hope this helps</p>",
      "raw": "Hello ,\nSo i just fiddle a little bit with this and \n\n```typ\n#set heading(numbering: \"1.1.\")\n//This will reset counter at every heading level\n#show heading: it => {\n  counter(figure.where(kind: image)).update(0)\n  //counter(figure.where(kind: table)).update(0)\n  //counter(figure.where(kind: raw)).update(0)\n  // ..repeat with whatever figure kinds you use\n  //counter(math.equation).update(0)\n  it\n}\n\n#set figure(numbering: it => { \n    let count = counter(heading).get()\n    if count.len() > 1 {\n      //I know my document will not have more than 3 level of headings\n      numbering(\"1.1.A.\", count.at(0), count.at(1), it)\n      //e.g. This will put \"Figure 2.3.A\"\n    }\n    else {\n      numbering(\"1.A.\", count.at(0), it)\n      //e.g. This will put \"Figure 2.A\" as the count will be only one level (main one)\n    }\n})\n\n\n\n= Chapter name \n== Sub-chapter\n\n#align(center+top)[\n  #figure(\nimage(\"picture001.jpg\", width: 25%),\ncaption: [this example graphic],\n\n)<pictureA>\n]\n\nhave a look at this Reference \\@pictureA -> @pictureA\n\n#align(center+top)[\n  #figure(\nimage(\"picture001.jpg\", width: 25%),\ncaption: [this example graphic],\n\n)<pictureB>\n]\n\n= Chapter name \n#align(center+top)[\n  #figure(\nimage(\"picture001.jpg\", width: 25%),\ncaption: [this example graphic],\n\n)<picture1.1.A>\n]\n\n#align(center+top)[\n  #figure(\nimage(\"picture001.jpg\", width: 25%),\ncaption: [this example graphic],\n\n)<picture1.1.B>\n]\n#counter(heading).update(7)\n\n== Sub-chapter\n\n\n#align(center+top)[\n  #figure(\nimage(\"picture001.jpg\", width: 25%),\ncaption: [this example graphic],\n\n)<picture2.1.A>\n]\n#align(center+top)[\n  #figure(\nimage(\"picture001.jpg\", width: 25%),\ncaption: [this example graphic],\n\n)<picture2.1.B>\n]\n```\n![Zrzut ekranu z 2025-03-02 21-21-39|297x500](upload://eGiF93zGhfJ4oQd8el72qcR0WSb.png)\n\n\nHope this helps",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 18.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1295
    },
    {
      "id": 9335,
      "post_number": 5,
      "username": "Johannes",
      "name": "Johannes",
      "created_at": "2025-03-03T17:41:49.459Z",
      "updated_at": "2025-03-03T17:41:49.459Z",
      "cooked": "<p>Thank you, this helps a lot, especially since I‘m pretty new to typst and still trying to get the hang of it.</p>",
      "raw": "Thank you, this helps a lot, especially since I‘m pretty new to typst and still trying to get the hang of it.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1129
    }
  ],
  "scraped_at": "2025-06-10T09:50:52.489871"
}
{
  "topic_metadata": {
    "id": 3069,
    "title": "Why did alignment of my outline entries break in Typst 0.13.0?",
    "slug": "why-did-alignment-of-my-outline-entries-break-in-typst-0-13-0",
    "posts_count": 6,
    "created_at": "2025-03-01T20:15:02.077Z",
    "last_posted_at": "2025-03-03T15:32:14.783Z",
    "views": 139,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout",
      "outline"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 355
  },
  "posts": [
    {
      "id": 9279,
      "post_number": 1,
      "username": "Flavio",
      "name": "Flavio",
      "created_at": "2025-03-01T20:15:02.285Z",
      "updated_at": "2025-03-09T13:12:43.670Z",
      "cooked": "<p>Hi, I’m facing an issue that I can’t solve myself.<br>\nIn my templates, small part outlines was styled as follow:</p>\n<pre><code>set text(size: textSize, fill: textColor, weight: textWeight)\nbox(width: 1.1cm, inset: (y: insetSize), align(left, number))\nh(0.1cm)\nbox(inset: (y: insetSize), width: 100% - 1.2cm, )[\n  #link(location, title)\n  #box(width: 1fr, repeat(text(weight: \"regular\")[. #h(4pt)])) \n  #link(location, heading_page)\n]\n</code></pre>\n<p>This code was working until Typst 0.12.0, but with Typst 0.13.0 I’m facing an unwanted align when the text is too long to fit in one line.</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/5/578fd1dc1fd7ad7cb99aadc9225a82f4fe70a388.png\" alt=\"image\" data-base62-sha1=\"cuBFGwWpPhMLCVidrxSg139pTJu\" width=\"524\" height=\"391\"></p>\n<p>This was the same result with Typst 0.12.0</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/5ba6a2fb97ea1e2937f8fa79882762615c92049b.png\" data-download-href=\"https://forum.typst.app/uploads/default/5ba6a2fb97ea1e2937f8fa79882762615c92049b\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/5ba6a2fb97ea1e2937f8fa79882762615c92049b_2_633x500.png\" alt=\"image\" data-base62-sha1=\"d4MsXSv461Epoj0lBEHk093TU1B\" width=\"633\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/5ba6a2fb97ea1e2937f8fa79882762615c92049b_2_633x500.png, https://forum.typst.app/uploads/default/original/2X/5/5ba6a2fb97ea1e2937f8fa79882762615c92049b.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/5ba6a2fb97ea1e2937f8fa79882762615c92049b.png 2x\" data-dominant-color=\"F5CAB3\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">649×512 73.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>This is the minimum reproducible example.</p>\n<p><a href=\"https://typst.app/project/rji1x14t2hEFf5ZS7ZwhFp\" class=\"onebox\" target=\"_blank\" rel=\"noopener\">https://typst.app/project/rji1x14t2hEFf5ZS7ZwhFp</a></p>\n<p>Do you have any idea? Thanks a lot.</p>",
      "raw": "Hi, I'm facing an issue that I can't solve myself.\nIn my templates, small part outlines was styled as follow:\n\n    set text(size: textSize, fill: textColor, weight: textWeight)\n    box(width: 1.1cm, inset: (y: insetSize), align(left, number))\n    h(0.1cm)\n    box(inset: (y: insetSize), width: 100% - 1.2cm, )[\n      #link(location, title)\n      #box(width: 1fr, repeat(text(weight: \"regular\")[. #h(4pt)])) \n      #link(location, heading_page)\n    ]\n\nThis code was working until Typst 0.12.0, but with Typst 0.13.0 I'm facing an unwanted align when the text is too long to fit in one line.\n\n![image|524x391](upload://cuBFGwWpPhMLCVidrxSg139pTJu.png)\n\nThis was the same result with Typst 0.12.0\n\n![image|633x500](upload://d4MsXSv461Epoj0lBEHk093TU1B.png)\n\nThis is the minimum reproducible example.\n\nhttps://typst.app/project/rji1x14t2hEFf5ZS7ZwhFp\n\nDo you have any idea? Thanks a lot.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 130.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 622
    },
    {
      "id": 9280,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-03-01T21:05:26.350Z",
      "updated_at": "2025-03-01T21:05:26.350Z",
      "cooked": "<p>Hi, could you provide a minimal reproducible example?</p>",
      "raw": "Hi, could you provide a minimal reproducible example?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9289,
      "post_number": 3,
      "username": "Flavio",
      "name": "Flavio",
      "created_at": "2025-03-02T12:25:22.635Z",
      "updated_at": "2025-03-02T12:25:22.635Z",
      "cooked": "<p>Hi, this is the example, thanks: <a href=\"https://typst.app/project/rji1x14t2hEFf5ZS7ZwhFp\" class=\"inline-onebox\">Typst</a></p>",
      "raw": "Hi, this is the example, thanks: https://typst.app/project/rji1x14t2hEFf5ZS7ZwhFp",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 7.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 622
    },
    {
      "id": 9291,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-03-02T14:29:58.719Z",
      "updated_at": "2025-03-02T14:29:58.719Z",
      "cooked": "<p>You have your whole outline wrapped in an <code>align(bottom + right, ..)</code> block. The alignment of the outline then propagates to the outline entries, thus the individual lines of the title are also right-aligned. You can fix this by overriding the alignment inside the box containing the title, similar to how you did it for the number:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let my-outline-row(..) = {\n  set text(size: textSize, fill: textColor, weight: textWeight)\n  box(width: 1.1cm, inset: (y: insetSize), align(left, number))\n  h(0.1cm)\n  box(inset: (y: insetSize), width: 100% - 1.2cm, )[\n    #set align(left) // &lt;-- Add this line\n    #link(location, title)\n    #box(width: 1fr, repeat(text(weight: \"regular\")[. #h(4pt)])) \n    #link(location, heading_page)\n  ]\n}\n</code></pre>",
      "raw": "You have your whole outline wrapped in an `align(bottom + right, ..)` block. The alignment of the outline then propagates to the outline entries, thus the individual lines of the title are also right-aligned. You can fix this by overriding the alignment inside the box containing the title, similar to how you did it for the number:\n\n```typ\n#let my-outline-row(..) = {\n  set text(size: textSize, fill: textColor, weight: textWeight)\n  box(width: 1.1cm, inset: (y: insetSize), align(left, number))\n  h(0.1cm)\n  box(inset: (y: insetSize), width: 100% - 1.2cm, )[\n    #set align(left) // <-- Add this line\n    #link(location, title)\n    #box(width: 1fr, repeat(text(weight: \"regular\")[. #h(4pt)])) \n    #link(location, heading_page)\n  ]\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 7.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 9311,
      "post_number": 5,
      "username": "Flavio",
      "name": "Flavio",
      "created_at": "2025-03-03T08:13:28.327Z",
      "updated_at": "2025-03-03T08:13:28.327Z",
      "cooked": "<p>Thanks a lot. I don’t understand why the behavior changed with 0.13.0. Maybe it was a bug of the previous versions…</p>",
      "raw": "Thanks a lot. I don't understand why the behavior changed with 0.13.0. Maybe it was a bug of the previous versions...",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 6.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 622
    },
    {
      "id": 9318,
      "post_number": 6,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-03T15:32:14.783Z",
      "updated_at": "2025-03-03T15:32:23.544Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/flavio\">@Flavio</a>, glad you’ve solved your problem. I’ve marked <a class=\"mention\" href=\"/u/eric\">@Eric</a>’s response as a solution. Please let us know if this was a mistake.</p>\n<p>In addition, I’ve renamed your post so it is a question per our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Hope you have a great time at the forum!</p>",
      "raw": "Hey @Flavio, glad you've solved your problem. I've marked @Eric's response as a solution. Please let us know if this was a mistake.\n\nIn addition, I've renamed your post so it is a question per our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nHope you have a great time at the forum!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:50:51.758274"
}
{
  "topic_metadata": {
    "id": 3079,
    "title": "How to do conditional show rule on math.accent to replace hat(i) with hat(dotless.i)?",
    "slug": "how-to-do-conditional-show-rule-on-math-accent-to-replace-hat-i-with-hat-dotless-i",
    "posts_count": 3,
    "created_at": "2025-03-02T23:15:59.714Z",
    "last_posted_at": "2025-03-03T07:00:17.124Z",
    "views": 63,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "shadowrim",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 146
  },
  "posts": [
    {
      "id": 9305,
      "post_number": 1,
      "username": "shadowrim",
      "name": "",
      "created_at": "2025-03-02T23:15:59.821Z",
      "updated_at": "2025-03-09T11:06:34.050Z",
      "cooked": "<p>I’ve tried to do a <code>where</code> selector on <code>math.accent</code> to select only <code>hat(i)</code>, but I can’t seem to get it to work. Here is my current <code>show</code> rule that doesn’t end up working.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.accent.where(base: [i], accent: math.hat): math.accent(math.dotless.i, math.hat)\n\n$ hat(i) == accent(i, hat) != hat(dotless.i) $\n</code></pre>",
      "raw": "I've tried to do a `where` selector on `math.accent` to select only `hat(i)`, but I can't seem to get it to work. Here is my current `show` rule that doesn't end up working.\n```typ\n#show math.accent.where(base: [i], accent: math.hat): math.accent(math.dotless.i, math.hat)\n\n$ hat(i) == accent(i, hat) != hat(dotless.i) $\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 70.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 687
    },
    {
      "id": 9306,
      "post_number": 2,
      "username": "shadowrim",
      "name": "",
      "created_at": "2025-03-02T23:19:45.683Z",
      "updated_at": "2025-03-02T23:19:45.683Z",
      "cooked": "<p>So just found out after compiling to pdf with Typst 0.13 that this is a bug in either the TypstPreview plugin for Neovim or in Typst 0.12, but it works in Typst 0.13.</p>",
      "raw": "So just found out after compiling to pdf with Typst 0.13 that this is a bug in either the TypstPreview plugin for Neovim or in Typst 0.12, but it works in Typst 0.13.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 5.4,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 687
    },
    {
      "id": 9309,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-03T07:00:17.124Z",
      "updated_at": "2025-03-03T07:00:17.124Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/shadowrim\">@shadowrim</a> and welcome!<br>\nI’ve changed your topic to <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a>, don’t hesitate to also read <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>.</p>\n<p>I can confirm this works on typst 0.13.0, but not on 0.12.0 <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hello @shadowrim and welcome!\nI've changed your topic to #Questions, don't hesitate to also read https://forum.typst.app/t/how-to-post-in-the-questions-category/11.\n\nI can confirm this works on typst 0.13.0, but not on 0.12.0 :smiley:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 10.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:50:51.007585"
}
{
  "topic_metadata": {
    "id": 3085,
    "title": "How to add image on the margin to the left of a level 1 heading?",
    "slug": "how-to-add-image-on-the-margin-to-the-left-of-a-level-1-heading",
    "posts_count": 5,
    "created_at": "2025-03-03T16:15:50.799Z",
    "last_posted_at": "2025-03-03T22:50:12.503Z",
    "views": 130,
    "like_count": 7,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "aarnent",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 367
  },
  "posts": [
    {
      "id": 9324,
      "post_number": 1,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-03T16:15:50.931Z",
      "updated_at": "2025-03-03T22:41:28.538Z",
      "cooked": "<p>Hi.</p>\n<p>I’m quite new to typst and have tried to solve the question with searching her but haven’t found the right answer.</p>\n<p>My question:<br>\nI need to create a heading 1 with a Image which should be placed from the page border to the heading text start.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/0/09e8f5ad6b463b2f04be74c10793d72d0566a300.png\" data-download-href=\"https://forum.typst.app/uploads/default/09e8f5ad6b463b2f04be74c10793d72d0566a300\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/0/09e8f5ad6b463b2f04be74c10793d72d0566a300_2_690x220.png\" alt=\"image\" data-base62-sha1=\"1pFpu2A8dgZdtbtlryUF96DvHEI\" width=\"690\" height=\"220\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/0/09e8f5ad6b463b2f04be74c10793d72d0566a300_2_690x220.png, https://forum.typst.app/uploads/default/original/2X/0/09e8f5ad6b463b2f04be74c10793d72d0566a300.png 1.5x, https://forum.typst.app/uploads/default/original/2X/0/09e8f5ad6b463b2f04be74c10793d72d0566a300.png 2x\" data-dominant-color=\"716B6B\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">906×289 13 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I was able to set the font and the size via this show command, thanks to the answers in this forum, but the missing part is the Image.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1) : set text(\n  font: \"Liberation Serif\",\n  size: 25pt,\n  lang: \"de\",\n  region: \"at\",\n)\n</code></pre>\n<p>Thank you for any hint.</p>",
      "raw": "Hi.\n\nI'm quite new to typst and have tried to solve the question with searching her but haven't found the right answer.\n\nMy question:\nI need to create a heading 1 with a Image which should be placed from the page border to the heading text start.\n\n![image|690x220](upload://1pFpu2A8dgZdtbtlryUF96DvHEI.png)\n\nI was able to set the font and the size via this show command, thanks to the answers in this forum, but the missing part is the Image.\n\n```typ\n#show heading.where(level: 1) : set text(\n  font: \"Liberation Serif\",\n  size: 25pt,\n  lang: \"de\",\n  region: \"at\",\n)\n```\nThank you for any hint.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 321.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    },
    {
      "id": 9339,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-03-03T19:04:01.141Z",
      "updated_at": "2025-03-03T19:04:01.141Z",
      "cooked": "<p>Hi and welcome to the forum!</p>\n<p>You can use the <code>place</code> function to place an image on the margin, like so:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">/// Reference:\n/// https://typst.app/docs/reference/layout/page/#parameters-margin\n#let calc-margin(margin, shape) = if margin == auto {\n  2.5 / 21 * calc.min(..shape)\n} else {\n  margin\n}\n\n#show heading.where(level: 1): it =&gt; [\n  #let dx = calc-margin(page.margin, (page.width, page.height))\n  \n  #place(\n    image(\n      \"test.jpg\",\n      width: 1cm // Change as you wish\n    ),\n    dx: - dx\n  )\n  #it\n]\n</code></pre>\n<p>With the margin calculation taken from <a href=\"https://forum.typst.app/t/how-to-draw-at-the-margin-of-a-page/1708\">here</a></p>",
      "raw": "Hi and welcome to the forum!\n\nYou can use the `place` function to place an image on the margin, like so:\n\n```typst\n/// Reference:\n/// https://typst.app/docs/reference/layout/page/#parameters-margin\n#let calc-margin(margin, shape) = if margin == auto {\n  2.5 / 21 * calc.min(..shape)\n} else {\n  margin\n}\n\n#show heading.where(level: 1): it => [\n  #let dx = calc-margin(page.margin, (page.width, page.height))\n  \n  #place(\n    image(\n      \"test.jpg\",\n      width: 1cm // Change as you wish\n    ),\n    dx: - dx\n  )\n  #it\n]\n```\n\nWith the margin calculation taken from [here](https://forum.typst.app/t/how-to-draw-at-the-margin-of-a-page/1708)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 4,
      "reads": 27,
      "score": 75.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9341,
      "post_number": 3,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-03T20:33:27.670Z",
      "updated_at": "2025-03-03T22:41:43.314Z",
      "cooked": "<p>Thank you soooo much <a class=\"mention\" href=\"/u/aarnent\">@aarnent</a>, this solved my issue.</p>\n<p>For the archive I have also added the font definition and upper call to the solution.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): it =&gt; [\n  #let dx = calc-margin(page.margin, (page.width, page.height))\n  \n  #place(\n    image(\n      \"images/Image1.1.jpg\",\n      width: 1.5cm // Change as you wish\n    ),\n    dx: - dx\n  )\n  #text(font: \"Liberation Serif\",\n  size: 23pt,\n  lang: \"de\",\n  region: \"at\",\n  upper(it)\n  )\n]\n</code></pre>",
      "raw": "Thank you soooo much @aarnent, this solved my issue.\n\nFor the archive I have also added the font definition and upper call to the solution.\n\n```typ\n#show heading.where(level: 1): it => [\n  #let dx = calc-margin(page.margin, (page.width, page.height))\n  \n  #place(\n    image(\n      \"images/Image1.1.jpg\",\n      width: 1.5cm // Change as you wish\n    ),\n    dx: - dx\n  )\n  #text(font: \"Liberation Serif\",\n  size: 23pt,\n  lang: \"de\",\n  region: \"at\",\n  upper(it)\n  )\n]\n```",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 20.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    },
    {
      "id": 9345,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-03T22:38:32.549Z",
      "updated_at": "2025-03-03T22:38:32.549Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/alex01\">@alex01</a>, welcome to the forum! I’ve moved your post to <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> since you were asking for help, and also marked <a class=\"mention\" href=\"/u/aarnent\">@aarnent</a>’s response as a solution. Please let us know if that wasn’t your intention.</p>\n<p>In addition, I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>For future posts, make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @alex01, welcome to the forum! I've moved your post to #questions since you were asking for help, and also marked @aarnent's response as a solution. Please let us know if that wasn't your intention.\n\nIn addition, I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nFor future posts, make sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 24.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 9346,
      "post_number": 5,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-03T22:50:12.503Z",
      "updated_at": "2025-03-03T22:50:12.503Z",
      "cooked": "<p>Thank you <a class=\"mention\" href=\"/u/pgbiel\">@PgBiel</a> for the cleanup and sorry for mistake</p>",
      "raw": "Thank you @PgBiel for the cleanup and sorry for mistake",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 48.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    }
  ],
  "scraped_at": "2025-06-10T09:50:50.318098"
}
{
  "topic_metadata": {
    "id": 3087,
    "title": "What is the equivalent of LaTeX's \"\\includegraphics*[scale = 0.3, trim = 0 100 0 200\"]{tiger.png}?",
    "slug": "what-is-the-equivalent-of-latexs-includegraphics-scale-0-3-trim-0-100-0-200-tiger-png",
    "posts_count": 8,
    "created_at": "2025-03-03T17:01:36.360Z",
    "last_posted_at": "2025-03-10T16:26:53.145Z",
    "views": 145,
    "like_count": 2,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "graphics",
      "latex-migration"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 569
  },
  "posts": [
    {
      "id": 9330,
      "post_number": 1,
      "username": "pejef",
      "name": "Peter Frings",
      "created_at": "2025-03-03T17:01:36.464Z",
      "updated_at": "2025-03-08T21:25:53.265Z",
      "cooked": "<p>I use a lot of screenshots in my documents (technical specifications of a software application). They all differ in dimensions, sometimes in resolution (72/144dpi), but I need them to have a consistent scale (the larger images are scaled down to fit, so that’s ok).</p>\n<p>Often, I need to trim them as well.</p>\n<p>As far as I understand, the scale in <code>#image(width: 30%, …)</code> refers to the size of the container, similar to LaTeX’s <code>[width = 0.3\\linewidth]</code> option. But that’s not what I need.</p>\n<p>Any suggestions to get this functionality would be more than welcome!</p>\n<p>Thanks,<br>\nPeter.</p>",
      "raw": "I use a lot of screenshots in my documents (technical specifications of a software application). They all differ in dimensions, sometimes in resolution (72/144dpi), but I need them to have a consistent scale (the larger images are scaled down to fit, so that's ok).\n\nOften, I need to trim them as well.\n\nAs far as I understand, the scale in ```#image(width: 30%, …)``` refers to the size of the container, similar to LaTeX's `[width = 0.3\\linewidth]` option. But that's not what I need.\n\nAny suggestions to get this functionality would be more than welcome! \n\nThanks,\nPeter.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 272.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1297
    },
    {
      "id": 9348,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-03-03T23:12:18.284Z",
      "updated_at": "2025-03-03T23:26:12.959Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/pejef\">@pejef</a>,</p>\n<p>I’m not exactly sure what this LaTeX command does, but if you want to scale an image based on its size, you could <a href=\"https://typst.app/docs/reference/layout/measure/\">measure</a> the image’s dimensions and use the scaled measured size as the image’s width/height.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">\n#let scale(scale: 1.0, img) = context {\n  let size = measure(img)\n  set image(width: size.width * scale)\n  img\n}\n\n#scale(scale: .3, image(\"test.png\")) \n</code></pre>\n<p>“Trim” can be emulated by enclosing the image with a box and using <a href=\"https://typst.app/docs/reference/layout/box/#parameters-inset\">inset</a> and <a href=\"https://typst.app/docs/reference/layout/box/#parameters-clip\">clip</a>.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#box(clip: true, inset: (left: -2cm), image(\"test.png\"))\n</code></pre>",
      "raw": "Hi @pejef,\n\nI'm not exactly sure what this LaTeX command does, but if you want to scale an image based on its size, you could [measure](https://typst.app/docs/reference/layout/measure/) the image's dimensions and use the scaled measured size as the image's width/height.\n\n```typst\n\n#let scale(scale: 1.0, img) = context {\n  let size = measure(img)\n  set image(width: size.width * scale)\n  img\n}\n\n#scale(scale: .3, image(\"test.png\")) \n```\n\n\"Trim\" can be emulated by enclosing the image with a box and using [inset](https://typst.app/docs/reference/layout/box/#parameters-inset) and [clip](https://typst.app/docs/reference/layout/box/#parameters-clip).\n\n```typst\n#box(clip: true, inset: (left: -2cm), image(\"test.png\"))\n```",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 2,
      "reads": 34,
      "score": 56.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9353,
      "post_number": 3,
      "username": "pejef",
      "name": "Peter Frings",
      "created_at": "2025-03-04T08:44:51.071Z",
      "updated_at": "2025-03-04T08:44:51.071Z",
      "cooked": "<p>Ah, nice. So I guess I can make a function with optional arguments that combines the clipping and scaling (and rotation if needed) and combines all this.</p>\n<p>Thanks!</p>",
      "raw": "Ah, nice. So I guess I can make a function with optional arguments that combines the clipping and scaling (and rotation if needed) and combines all this. \n\nThanks!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1297
    },
    {
      "id": 9598,
      "post_number": 4,
      "username": "pejef",
      "name": "Peter Frings",
      "created_at": "2025-03-10T15:09:03.193Z",
      "updated_at": "2025-03-10T15:09:03.193Z",
      "cooked": "<p>Unfortunately, I can’t make a function that combines the scaling and trimming.<br>\nLet’s say I want to get this (let’s assume that the options are mutually exclusive).</p>\n<pre><code class=\"lang-auto\">#let includegraphics(path, trim: (0pt, 0pt, 0pt, 0pt), scale: none, width: none, height: none) = {\n}\n</code></pre>\n<p>With the <code>trim</code> being relative to the original size of the image.</p>\n<p>Some examples of usage:</p>\n<pre><code class=\"lang-auto\">#includegraphics(\"my-image.png\", scale = 0.7)\n#includegraphics(\"my-image.png\", trim = (10pt, 0pt, 70pt, 100pt))\n#includegraphics(\"my-image.png\", trim = (10pt, 0pt, 70pt, 100pt), scale = 0.8)\n#includegraphics(\"my-image.png\", height = 7cm)\n// etc\n</code></pre>\n<p>To do this, I would have to get the original dimensions of the image (without scaling).<br>\nThen trim as specified.<br>\nThen scale the trimmed image, either by the given scale, either by calculating the scale as (given size/trimmed size)</p>\n<p>However, I can’t seem to get the original dimensions of image?</p>\n<p>Thanks,<br>\nPeter.</p>",
      "raw": "Unfortunately, I can't make a function that combines the scaling and trimming.\nLet's say I want to get this (let's assume that the options are mutually exclusive).\n```\n#let includegraphics(path, trim: (0pt, 0pt, 0pt, 0pt), scale: none, width: none, height: none) = {\n}\n```\nWith the ```trim``` being relative to the original size of the image.\n\nSome examples of usage:\n```\n#includegraphics(\"my-image.png\", scale = 0.7)\n#includegraphics(\"my-image.png\", trim = (10pt, 0pt, 70pt, 100pt))\n#includegraphics(\"my-image.png\", trim = (10pt, 0pt, 70pt, 100pt), scale = 0.8)\n#includegraphics(\"my-image.png\", height = 7cm)\n// etc\n```\n\nTo do this, I would have to get the original dimensions of the image (without scaling).\nThen trim as specified.\nThen scale the trimmed image, either by the given scale, either by calculating the scale as (given size/trimmed size)\n\nHowever, I can't seem to get the original dimensions of image? \n\nThanks,\nPeter.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1297
    },
    {
      "id": 9600,
      "post_number": 5,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-03-10T15:14:48.626Z",
      "updated_at": "2025-03-10T15:14:48.626Z",
      "cooked": "<p>The only way I know of to trim an image in Typst is by using this package:</p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/universe/package/grayness\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/universe/package/grayness\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/universe/package/grayness\" target=\"_blank\" rel=\"noopener\">grayness – Typst Universe</a></h3>\n\n  <p>Simple image editing capabilities like converting to grayscale and cropping via a WASM plugin.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>I don’t know if it would satisfy your needs out of the box, but it might help you get to your solution.</p>",
      "raw": "The only way I know of to trim an image in Typst is by using this package:\nhttps://typst.app/universe/package/grayness\n\nI don't know if it would satisfy your needs out of the box, but it might help you get to your solution.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 9601,
      "post_number": 6,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-10T15:19:11.517Z",
      "updated_at": "2025-03-10T15:19:11.517Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"pejef\" data-post=\"4\" data-topic=\"3087\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/66104C/48.png\" class=\"avatar\"> pejef:</div>\n<blockquote>\n<p>However, I can’t seem to get the original dimensions of image?</p>\n</blockquote>\n</aside>\n<p>Doesn’t <code>measure(img)</code> do what you want?</p>",
      "raw": "[quote=\"pejef, post:4, topic:3087\"]\nHowever, I can’t seem to get the original dimensions of image?\n[/quote]\n\nDoesn't `measure(img)` do what you want?",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 18,
      "score": 8.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9605,
      "post_number": 7,
      "username": "pejef",
      "name": "Peter Frings",
      "created_at": "2025-03-10T15:59:41.660Z",
      "updated_at": "2025-03-10T15:59:41.660Z",
      "cooked": "<p>Good suggestion!</p>\n<pre><code class=\"lang-auto\">  // Measure the natural size of the image\n  let img = measure(image(path))\n  let orig_w = img.width\n  let orig_h = img.height\n</code></pre>\n<p>unfortunately, Typst is not happy:</p>\n<pre><code class=\"lang-auto\">error: can only be used when context is known\n   ┌─ barcode.typ:43:12\n   │\n43 │   let img = measure(image(path))\n   │             ^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n<p>Mission impossible?</p>",
      "raw": "Good suggestion!\n```\n  // Measure the natural size of the image\n  let img = measure(image(path))\n  let orig_w = img.width\n  let orig_h = img.height\n```\nunfortunately, Typst is not happy:\n```\nerror: can only be used when context is known\n   ┌─ barcode.typ:43:12\n   │\n43 │   let img = measure(image(path))\n   │             ^^^^^^^^^^^^^^^^^^^^\n```\n\nMission impossible?",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 13.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1297
    },
    {
      "id": 9609,
      "post_number": 8,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-10T16:26:53.145Z",
      "updated_at": "2025-03-10T16:27:05.809Z",
      "cooked": "<p>As the error says, you must provide a context:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">context {\n  let img = measure(image(path))\n  let orig_w = img.width\n  let orig_h = img.height\n}\n</code></pre>\n<p>Note that you cannot use <code>orig_w</code> or <code>orig_h</code> outside of the context block. You must surround with <code>context</code> the whole piece of code that uses the context.</p>",
      "raw": "As the error says, you must provide a context:\n\n```typc\ncontext {\n  let img = measure(image(path))\n  let orig_w = img.width\n  let orig_h = img.height\n}\n```\n\nNote that you cannot use `orig_w` or `orig_h` outside of the context block. You must surround with `context` the whole piece of code that uses the context.",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:50:49.598448"
}
{
  "topic_metadata": {
    "id": 3089,
    "title": "How to exclude level 3 and 4 headings from the outline/Contents",
    "slug": "how-to-exclude-level-3-and-4-headings-from-the-outline-contents",
    "posts_count": 3,
    "created_at": "2025-03-03T17:29:58.972Z",
    "last_posted_at": "2025-03-03T18:02:49.922Z",
    "views": 90,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "xkevio",
    "tags": [
      "outline"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 248
  },
  "posts": [
    {
      "id": 9332,
      "post_number": 1,
      "username": "Mark_Hilton",
      "name": "Mark Hilton",
      "created_at": "2025-03-03T17:29:59.111Z",
      "updated_at": "2025-03-09T13:25:32.305Z",
      "cooked": "<p>Still very new here, so another basic question.</p>\n<p>I have 4 levels of heading, but only want levels 1 and 2 to appear in the Outline/Contents. I have read the tutorial and references on Headings and the “outlined” parameter, but I can’t work out how to set <code>(outlined: false)</code> for levels 3 &amp; 4 only. My <code>#show</code> rules for those headings are:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 3): set text(16pt, weight: \"semibold\")\n\n#show heading.where(level: 4): set text(14pt, weight: \"semibold\")\n</code></pre>\n<p>but when I try to formulate a <code>set</code> rule, it removes all heading levels from the outline, as I can’t figure out how to confine it to levels 3 and 4, and otherwise <code>outlined: false</code> always returns an error when I try to include it, in whatever way, in the <code>show</code> rule.</p>\n<p>Can someone please advise?</p>\n<p>Thanks</p>",
      "raw": "Still very new here, so another basic question.\n\n I have 4 levels of heading, but only want levels 1 and 2 to appear in the Outline/Contents. I have read the tutorial and references on Headings and the \"outlined\" parameter, but I can't work out how to set ```(outlined: false)``` for levels 3 & 4 only. My `#show` rules for those headings are:\n\n```typ\n#show heading.where(level: 3): set text(16pt, weight: \"semibold\")\n\n#show heading.where(level: 4): set text(14pt, weight: \"semibold\")\n```\n\nbut when I try to formulate a ``set`` rule, it removes all heading levels from the outline, as I can't figure out how to confine it to levels 3 and 4, and otherwise ```outlined: false``` always returns an error when I try to include it, in whatever way, in the ```show``` rule.\n\nCan someone please advise?\n\nThanks",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 245.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1276
    },
    {
      "id": 9333,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2025-03-03T17:39:57.395Z",
      "updated_at": "2025-03-03T17:39:57.395Z",
      "cooked": "<p>Use the <a href=\"https://typst.app/docs/reference/model/outline/#parameters-depth\"><code>outline.depth</code></a> parameter and set it to 2: <code>#outline(depth: 2)</code>.</p>",
      "raw": "Use the [`outline.depth`](https://typst.app/docs/reference/model/outline/#parameters-depth) parameter and set it to 2: `#outline(depth: 2)`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 24,
      "score": 39.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 9337,
      "post_number": 3,
      "username": "Mark_Hilton",
      "name": "Mark Hilton",
      "created_at": "2025-03-03T18:02:49.922Z",
      "updated_at": "2025-03-03T18:02:49.922Z",
      "cooked": "<p>Thank you very much. My problem is that (in spite of my age!) I’m pretty new to this and have no coding experience, so, although I think I understand the principles, it’s the details of implentation which I struggle with, and I frequently cannot relate the examples to what I am trying to do…</p>\n<p>But thank you for not only helping me solve this one, but <em>en passant</em> I see the solution to one of the next issues on my list.</p>\n<p><img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji only-emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Thank you very much. My problem is that (in spite of my age!) I'm pretty new to this and have no coding experience, so, although I think I understand the principles, it's the details of implentation which I struggle with, and I frequently cannot relate the examples to what I am trying to do..\n\nBut thank you for not only helping me solve this one, but _en passant_ I see the solution to one of the next issues on my list.\n\n:smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1276
    }
  ],
  "scraped_at": "2025-06-10T09:50:48.858174"
}
{
  "topic_metadata": {
    "id": 3091,
    "title": "How to customize the body of an outline entry?",
    "slug": "how-to-customize-the-body-of-an-outline-entry",
    "posts_count": 4,
    "created_at": "2025-03-03T19:42:02.480Z",
    "last_posted_at": "2025-03-09T13:44:02.506Z",
    "views": 217,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "outline"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 410
  },
  "posts": [
    {
      "id": 9340,
      "post_number": 1,
      "username": "jkunimune",
      "name": "Justin Kunimune",
      "created_at": "2025-03-03T19:42:02.580Z",
      "updated_at": "2025-03-16T08:47:43.844Z",
      "cooked": "<p>Hello, I’m using Typst to write my thesis.  I’m currently trying to customize my lists of figures.  I’d like to write a show rule that changes the body of each outline entry without affecting the indentation, prefix, fill, or page number.</p>\n<p>Here’s two things I’ve tried so far.  In these examples I’m trying to rebuild the outline entry without modifying its appearance at all (if this works then I’ll replace <code>it.body()</code> with something else).  They’re both based on <a href=\"https://typst.app/docs/reference/model/outline/#definitions-entry-definitions\">this page on the website</a>, but with <code>it.inner()</code> broken up into its components.  As you can see, simply concatenating <code>it.body()</code> with <code>it.fill</code> and <code>it.page()</code> puts undesirable line breaks between all of them.  I thought I could fix this by putting them in a horizontal <code>grid</code>, but then the fill isn’t long enough when the body is multiple lines long.</p>\n<details>\n<summary>\nMinimum working example</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/9/96d5f84763a6a04eb5ae0d326ba83de6df318445.png\" data-download-href=\"https://forum.typst.app/uploads/default/96d5f84763a6a04eb5ae0d326ba83de6df318445\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/9/96d5f84763a6a04eb5ae0d326ba83de6df318445_2_690x450.png\" alt=\"image\" data-base62-sha1=\"lwm31ItdehEcdQKyAVlwB3GiQv3\" width=\"690\" height=\"450\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/9/96d5f84763a6a04eb5ae0d326ba83de6df318445_2_690x450.png, https://forum.typst.app/uploads/default/original/2X/9/96d5f84763a6a04eb5ae0d326ba83de6df318445.png 1.5x, https://forum.typst.app/uploads/default/original/2X/9/96d5f84763a6a04eb5ae0d326ba83de6df318445.png 2x\" data-dominant-color=\"F9F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">952×621 100 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show outline.entry: it =&gt; link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n    it.body() + it.fill + it.page(),\n  ),\n)\n\n#outline()\n\n#show outline.entry: it =&gt; link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n    grid(columns: (auto, 1fr, auto), align: bottom, it.body(), it.fill, it.page()),\n  ),\n)\n\n#outline()\n\n= a really really really long loooooooooooooooooooooooooooooooooong maaaaaaaaaaaaaaaaaaaaaaaaan\n</code></pre>\n</details>\n<p>Is there a way to put these three things together in-line rather than as paragraphs or as columns in a grid?  How does <code>outline.entry.inner()</code> do it?</p>",
      "raw": "Hello, I'm using Typst to write my thesis.  I'm currently trying to customize my lists of figures.  I'd like to write a show rule that changes the body of each outline entry without affecting the indentation, prefix, fill, or page number.\n\nHere's two things I've tried so far.  In these examples I'm trying to rebuild the outline entry without modifying its appearance at all (if this works then I'll replace `it.body()` with something else).  They're both based on [this page on the website](https://typst.app/docs/reference/model/outline/#definitions-entry-definitions), but with `it.inner()` broken up into its components.  As you can see, simply concatenating `it.body()` with `it.fill` and `it.page()` puts undesirable line breaks between all of them.  I thought I could fix this by putting them in a horizontal `grid`, but then the fill isn't long enough when the body is multiple lines long.\n\n[details=\"Minimum working example\"]\n\n![image|690x450](upload://lwm31ItdehEcdQKyAVlwB3GiQv3.png)\n\n```typst\n#show outline.entry: it => link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n    it.body() + it.fill + it.page(),\n  ),\n)\n\n#outline()\n\n#show outline.entry: it => link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n    grid(columns: (auto, 1fr, auto), align: bottom, it.body(), it.fill, it.page()),\n  ),\n)\n\n#outline()\n\n= a really really really long loooooooooooooooooooooooooooooooooong maaaaaaaaaaaaaaaaaaaaaaaaan\n```\n\n[/details]\n\n\nIs there a way to put these three things together in-line rather than as paragraphs or as columns in a grid?  How does `outline.entry.inner()` do it?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 678.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 23
    },
    {
      "id": 9342,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-03-03T20:50:28.129Z",
      "updated_at": "2025-03-03T20:50:28.129Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/jkunimune\">@jkunimune</a>,</p>\n<p>the problem is <code>it.fill</code>, which is a <a href=\"https://typst.app/docs/reference/layout/repeat/\"><code>repeat</code></a> element and takes the full space. You can restrict it with <code>box(width: 1fr, it.fill)</code> to the available space on the line.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#outline(title: [Default Contents])\n\n#show outline.entry: it =&gt; link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n    it.body() + sym.space + box(width: 1fr, it.fill) + sym.space + sym.wj + it.page()\n  ),\n)\n\n#outline(title: [Imitated Contents])\n\n= a really really really long loooooooooooooooooooooooooooooooooong maaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaanaa\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/8/82fd055d7668c8c323115508af42478165fbc1ba.png\" data-download-href=\"https://forum.typst.app/uploads/default/82fd055d7668c8c323115508af42478165fbc1ba\" title=\"test\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/8/82fd055d7668c8c323115508af42478165fbc1ba_2_690x238.png\" alt=\"test\" data-base62-sha1=\"iGMaikC3qqmGdFMGYLIRmjPqY7o\" width=\"690\" height=\"238\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/8/82fd055d7668c8c323115508af42478165fbc1ba_2_690x238.png, https://forum.typst.app/uploads/default/optimized/2X/8/82fd055d7668c8c323115508af42478165fbc1ba_2_1035x357.png 1.5x, https://forum.typst.app/uploads/default/original/2X/8/82fd055d7668c8c323115508af42478165fbc1ba.png 2x\" data-dominant-color=\"F0F0F0\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">test</span><span class=\"informations\">1191×412 220 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I added <code>sym.wj</code> to prevent the page number from standing alone in a newline.</p>",
      "raw": "Hi @jkunimune,\n\nthe problem is `it.fill`, which is a [`repeat`](https://typst.app/docs/reference/layout/repeat/) element and takes the full space. You can restrict it with `box(width: 1fr, it.fill)` to the available space on the line.\n\n```typst\n#outline(title: [Default Contents])\n\n#show outline.entry: it => link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n    it.body() + sym.space + box(width: 1fr, it.fill) + sym.space + sym.wj + it.page()\n  ),\n)\n\n#outline(title: [Imitated Contents])\n\n= a really really really long loooooooooooooooooooooooooooooooooong maaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaanaa\n```\n![test|690x238](upload://iGMaikC3qqmGdFMGYLIRmjPqY7o.png)\n\nI added `sym.wj` to prevent the page number from standing alone in a newline.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 32.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9371,
      "post_number": 3,
      "username": "jkunimune",
      "name": "Justin Kunimune",
      "created_at": "2025-03-04T13:52:04.567Z",
      "updated_at": "2025-03-04T13:52:04.567Z",
      "cooked": "<p>Ah, perfect, I understand now.  Thank you!</p>",
      "raw": "Ah, perfect, I understand now.  Thank you!",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 11.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 23
    },
    {
      "id": 9517,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-09T13:44:02.506Z",
      "updated_at": "2025-03-15T22:32:16.242Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/jkunimune\">@jkunimune</a>, thanks for your question! If you feel the response you got has sufficiently answered your question, be sure to give it a checkmark <img src=\"https://forum.typst.app/images/emoji/apple/ballot_box_with_check.png?v=12\" title=\":ballot_box_with_check:\" class=\"emoji\" alt=\":ballot_box_with_check:\" loading=\"lazy\" width=\"20\" height=\"20\">. This will help others find the solution in the future. Thanks!</p>\n<p>Edit: I have marked a response as the solution.</p>",
      "raw": "Hi @jkunimune, thanks for your question! If you feel the response you got has sufficiently answered your question, be sure to give it a checkmark :ballot_box_with_check:. This will help others find the solution in the future. Thanks!\n\nEdit: I have marked a response as the solution.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:50:48.138464"
}
{
  "topic_metadata": {
    "id": 3093,
    "title": "How to use different text in outline and actual heading?",
    "slug": "how-to-use-different-text-in-outline-and-actual-heading",
    "posts_count": 5,
    "created_at": "2025-03-03T21:26:23.310Z",
    "last_posted_at": "2025-03-04T01:46:00.315Z",
    "views": 158,
    "like_count": 4,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "scripting",
      "layout",
      "outline"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 472
  },
  "posts": [
    {
      "id": 9344,
      "post_number": 1,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-03T21:26:23.447Z",
      "updated_at": "2025-03-03T22:41:14.260Z",
      "cooked": "<p>I have a text which want to have the heading in capital letters but the outline entry should be ins mixted (Normal) letters.</p>\n<p>Thanks to <a class=\"mention\" href=\"/u/aarnent\">@aarnent</a> I have solved the first issue with the image <a href=\"https://forum.typst.app/t/add-image-to-heading-1-on-left-side/3085/3\" class=\"inline-onebox\">How to add image on the margin to the left of a level 1 heading? - #3 by alex01</a></p>\n<p>Now I have tried to understand and adopt the snipplet below but i’m to stupid to get it work.</p>\n<aside class=\"quote quote-modified\" data-post=\"3\" data-topic=\"2349\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/flokl/48/28_2.png\" class=\"avatar\">\n    <a href=\"https://forum.typst.app/t/how-to-have-different-text-shown-in-figure-caption-and-in-outline/2349/3\">How to have different text shown in figure caption and in outline?</a> <a class=\"badge-category__wrapper \" href=\"/c/questions/5\"><span data-category-id=\"5\" style=\"--category-badge-color: #F7C000; --category-badge-text-color: #fdfdfd;\" data-drop-close=\"true\" class=\"badge-category \" title=\"Your questions about using Typst and the web app go in this category.\"><span class=\"badge-category__name\">Questions</span></span></a>\n  </div>\n  <blockquote>\n    As an alternative, you can fully customize the text that will be shown in the outline with the following code which is taken from the <a href=\"https://sitandr.github.io/typst-examples-book/book/snippets/chapters/outlines.html#long-and-short-captions-for-the-outline\" rel=\"noopener nofollow ugc\">Typst Examples Book</a>. \n#let in-outline = state(\"in-outline\", false)\n#show outline: it =&gt; {\n  in-outline.update(true)\n  it\n  in-outline.update(false)\n}\n\n#let flex-caption(long, short) = context if in-outline.get() { short } else { long }\n\n// And this is in the document.\n#outline(title: [Figures], target: figure)\n\n#figure(\n  rect(),\n  caption: flex-caption(\n    [This…\n  </blockquote>\n</aside>\n\n<p>The heading text is with <code>\\ | linebreack()</code> .</p>\n<p>My Ideas is to have something like the above, or maybe something simpler, which I don’t know.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= [My Heading in\\ the Text,My headig in the outline]\n</code></pre>\n<p>I have tried to call <code>trim()</code> for <code>it</code> but that looks like impossible.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n   // wrong!\n    str(it.body()).trim() + sym.space + box(width: 1fr, it.fill) + sym.space + sym.wj + it.page()\n  ),\n)\n</code></pre>",
      "raw": "I have a text which want to have the heading in capital letters but the outline entry should be ins mixted (Normal) letters.\n\nThanks to @aarnent I have solved the first issue with the image https://forum.typst.app/t/add-image-to-heading-1-on-left-side/3085/3?u=alex01\n\nNow I have tried to understand and adopt the snipplet below but i'm to stupid to get it work.\n\nhttps://forum.typst.app/t/how-to-have-different-text-shown-in-figure-caption-and-in-outline/2349/3?u=alex01\n\nThe heading text is with `\\ | linebreack()` .\n\nMy Ideas is to have something like the above, or maybe something simpler, which I don't know.\n\n```typ\n= [My Heading in\\ the Text,My headig in the outline]\n```\n\nI have tried to call `trim()` for `it` but that looks like impossible.\n\n```typ\n#show outline.entry: it => link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n   // wrong!\n    str(it.body()).trim() + sym.space + box(width: 1fr, it.fill) + sym.space + sym.wj + it.page()\n  ),\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 627.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    },
    {
      "id": 9347,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-03-03T22:58:43.637Z",
      "updated_at": "2025-03-03T22:58:43.637Z",
      "cooked": "<p>I’m not quite sure I fully understand your questions, but let’s give it a try.</p>\n<blockquote>\n<p>Now I have tried to understand and adopt the snipplet below but i’m to stupid to get it work.</p>\n</blockquote>\n<p>Here is the code snippet adapted for headings.</p>\n<details>\n<summary>\nFlex headings</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let in-outline = state(\"in-outline\", false)\n#show outline: it =&gt; {\n  in-outline.update(true)\n  it\n  in-outline.update(false)\n}\n\n#let flex-heading(long, short) = context if in-outline.get() { short } else { long }\n\n#outline()\n\n= #flex-heading[My Heading in\\ the #linebreak() Text][My heading in the outline]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/4/4c85e5abc8e12ca7eae5df2d42401c07ca4f3aeb.png\" data-download-href=\"https://forum.typst.app/uploads/default/4c85e5abc8e12ca7eae5df2d42401c07ca4f3aeb\" title=\"test\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/4/4c85e5abc8e12ca7eae5df2d42401c07ca4f3aeb_2_690x175.png\" alt=\"test\" data-base62-sha1=\"aUX9ZbW5psihM0CbkNE6dllxsLN\" width=\"690\" height=\"175\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/4/4c85e5abc8e12ca7eae5df2d42401c07ca4f3aeb_2_690x175.png, https://forum.typst.app/uploads/default/optimized/2X/4/4c85e5abc8e12ca7eae5df2d42401c07ca4f3aeb_2_1035x262.png 1.5x, https://forum.typst.app/uploads/default/original/2X/4/4c85e5abc8e12ca7eae5df2d42401c07ca4f3aeb.png 2x\" data-dominant-color=\"FCFCFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">test</span><span class=\"informations\">1191×303 38.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<blockquote>\n<p>I have a text which want to have the heading in capital letters but the outline entry should be ins mixted (Normal) letters.</p>\n</blockquote>\n<p>You can use <code>#show heading: upper</code> which shows all headings with uppercase letter.</p>\n<blockquote>\n<p>The heading text is with <code>\\ | linebreack()</code> .</p>\n</blockquote>\n<p>Do you want to display these headings in the outline without line breaks? You could filter out all <code>linebreak()</code> occurrences.</p>\n<details>\n<summary>\nFiltered Outline Headings</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; {\n  let body = if it.body().has(\"children\") {\n    it.body().children.filter(it =&gt; {it != linebreak()}).join()\n  } else {\n    it.body()\n  } \n  link(\n    it.element.location(),\n    it.indented(\n      it.prefix(),\n      body + sym.space + box(width: 1fr, it.fill) + sym.space + sym.wj + it.page()\n    )\n  )\n}\n\n#outline()\n\n\n= My Heading in\\ the #linebreak() Text\n\n= Heading\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/f2efb61acc2192d149c5d3bf6d4163f6b92ff8be.png\" data-download-href=\"https://forum.typst.app/uploads/default/f2efb61acc2192d149c5d3bf6d4163f6b92ff8be\" title=\"test\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/f2efb61acc2192d149c5d3bf6d4163f6b92ff8be_2_690x227.png\" alt=\"test\" data-base62-sha1=\"yF77Sl7C2C8RA93He5iHsFBBbcy\" width=\"690\" height=\"227\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/f2efb61acc2192d149c5d3bf6d4163f6b92ff8be_2_690x227.png, https://forum.typst.app/uploads/default/optimized/2X/f/f2efb61acc2192d149c5d3bf6d4163f6b92ff8be_2_1035x340.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/f2efb61acc2192d149c5d3bf6d4163f6b92ff8be.png 2x\" data-dominant-color=\"FCFCFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">test</span><span class=\"informations\">1191×392 55 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>",
      "raw": "I'm not quite sure I fully understand your questions, but let's give it a try.\n\n> Now I have tried to understand and adopt the snipplet below but i’m to stupid to get it work.\n\nHere is the code snippet adapted for headings.\n[details=\"Flex headings\"]\n```typ\n#let in-outline = state(\"in-outline\", false)\n#show outline: it => {\n  in-outline.update(true)\n  it\n  in-outline.update(false)\n}\n\n#let flex-heading(long, short) = context if in-outline.get() { short } else { long }\n\n#outline()\n\n= #flex-heading[My Heading in\\ the #linebreak() Text][My heading in the outline]\n```\n![test|690x175](upload://aUX9ZbW5psihM0CbkNE6dllxsLN.png)\n[/details]\n\n> I have a text which want to have the heading in capital letters but the outline entry should be ins mixted (Normal) letters.\n\nYou can use `#show heading: upper` which shows all headings with uppercase letter.\n\n> The heading text is with `\\ | linebreack()` .\n\nDo you want to display these headings in the outline without line breaks? You could filter out all `linebreak()` occurrences.\n\n\n[details=\"Filtered Outline Headings\"]\n```typ\n#show outline.entry: it => {\n  let body = if it.body().has(\"children\") {\n    it.body().children.filter(it => {it != linebreak()}).join()\n  } else {\n    it.body()\n  } \n  link(\n    it.element.location(),\n    it.indented(\n      it.prefix(),\n      body + sym.space + box(width: 1fr, it.fill) + sym.space + sym.wj + it.page()\n    )\n  )\n}\n\n#outline()\n\n\n= My Heading in\\ the #linebreak() Text\n\n= Heading\n```\n![test|690x227](upload://yF77Sl7C2C8RA93He5iHsFBBbcy.png)\n\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 36.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9349,
      "post_number": 3,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-03T23:12:21.388Z",
      "updated_at": "2025-03-03T23:12:21.388Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/flokl\">@flokl</a> You are a genius. <img src=\"https://forum.typst.app/images/emoji/apple/man_bowing.png?v=12\" title=\":man_bowing:\" class=\"emoji\" alt=\":man_bowing:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>The second part with the linebreak fix was the solution I searched for.</p>",
      "raw": "@flokl You are a genius. :man_bowing:\n\nThe second part with the linebreak fix was the solution I searched for.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 21.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    },
    {
      "id": 9350,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-04T00:40:16.485Z",
      "updated_at": "2025-03-04T00:40:16.485Z",
      "cooked": "<p>I believe this might be a simpler (and more correct) solution:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; {\n  show linebreak: [ ]\n  it\n}\n\n#outline()\n\n= Abc\\ Def\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/264bb260a02a5ee0a7af8b4f915b39da5c99785d.png\" data-download-href=\"https://forum.typst.app/uploads/default/264bb260a02a5ee0a7af8b4f915b39da5c99785d\" title=\"output: linebreak replaced with space\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/264bb260a02a5ee0a7af8b4f915b39da5c99785d_2_690x218.png\" alt=\"output: linebreak replaced with space\" data-base62-sha1=\"5sMk3vUZGW91sIDdwMHb8RFa2lv\" width=\"690\" height=\"218\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/264bb260a02a5ee0a7af8b4f915b39da5c99785d_2_690x218.png, https://forum.typst.app/uploads/default/optimized/2X/2/264bb260a02a5ee0a7af8b4f915b39da5c99785d_2_1035x327.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/2/264bb260a02a5ee0a7af8b4f915b39da5c99785d_2_1380x436.png 2x\" data-dominant-color=\"FBFBFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">output: linebreak replaced with space</span><span class=\"informations\">1500×475 35.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "I believe this might be a simpler (and more correct) solution:\n\n```typ\n#show outline.entry: it => {\n  show linebreak: [ ]\n  it\n}\n\n#outline()\n\n= Abc\\ Def\n```\n\n![output: linebreak replaced with space|690x218](upload://5sMk3vUZGW91sIDdwMHb8RFa2lv.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 29,
      "score": 50.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 9351,
      "post_number": 5,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-04T01:46:00.315Z",
      "updated_at": "2025-03-04T01:46:00.315Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"PgBiel\" data-post=\"4\" data-topic=\"3093\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/F64C96/48.png\" class=\"avatar\"> PgBiel:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">#show outline.entry: it =&gt; {\n  show linebreak: [ ]\n  it\n}\n</code></pre>\n</blockquote>\n</aside>\n<p>Agree, this solution works also and it looks much simpler.</p>",
      "raw": "[quote=\"PgBiel, post:4, topic:3093\"]\n```\n#show outline.entry: it => {\n  show linebreak: [ ]\n  it\n}\n```\n[/quote]\n\nAgree, this solution works also and it looks much simpler.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 29,
      "score": 5.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    }
  ],
  "scraped_at": "2025-06-10T09:50:47.408128"
}
{
  "topic_metadata": {
    "id": 3096,
    "title": "How can I use `#let mydate = datetime(...)` from main.typ in included typ",
    "slug": "how-can-i-use-let-mydate-datetime-from-main-typ-in-included-typ",
    "posts_count": 5,
    "created_at": "2025-03-04T11:49:15.626Z",
    "last_posted_at": "2025-03-04T14:51:40.601Z",
    "views": 63,
    "like_count": 3,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "quachpas",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 415
  },
  "posts": [
    {
      "id": 9356,
      "post_number": 1,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-04T11:49:15.742Z",
      "updated_at": "2025-03-04T11:49:15.742Z",
      "cooked": "<p>I have this in my <code>main.typ</code> file.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let mydate = datetime(\n  year: 2023,\n  month: 05,\n  day: 27,\n)\n\n// more stuff\n#include \"text-with-date.typ\"\n</code></pre>\n<p>In text-with-date.typ</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">That THE date, #show context mydate.display(), \n</code></pre>\n<p>when I run now <code>typst compile main.typ</code> get I</p>\n<pre data-code-wrap=\"shell\"><code class=\"lang-shell\"> typst compile main.typ &amp;&amp; okular main.pdf\nerror: expected colon\n    ┌─ text-with-date.typ:411:19\n    │\n411 │ That THE date, #show context mydate.display(),\n    │                                          ^\n\nhelp: error occurred while importing this module\n</code></pre>\n<p>I think this have something to do with <a href=\"https://typst.app/docs/reference/context/\" class=\"inline-onebox\">Context – Typst Documentation</a> but not sure how to fix it.</p>",
      "raw": "I have this in my `main.typ` file.\n\n```typst\n#let mydate = datetime(\n  year: 2023,\n  month: 05,\n  day: 27,\n)\n\n// more stuff\n#include \"text-with-date.typ\"\n```\n\nIn text-with-date.typ\n\n```typst\nThat THE date, #show context mydate.display(), \n```\n\nwhen I run now `typst compile main.typ` get I\n```shell\n typst compile main.typ && okular main.pdf\nerror: expected colon\n    ┌─ text-with-date.typ:411:19\n    │\n411 │ That THE date, #show context mydate.display(),\n    │                                          ^\n\nhelp: error occurred while importing this module\n```\n\nI think this have something to do with https://typst.app/docs/reference/context/ but not sure how to fix it.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 125.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    },
    {
      "id": 9360,
      "post_number": 2,
      "username": "Electron_Wizard",
      "name": "Electron Wizard",
      "created_at": "2025-03-04T12:02:11.232Z",
      "updated_at": "2025-03-04T12:02:11.232Z",
      "cooked": "<p>Hey alex01,</p>\n<p>You could put the <code>mydate</code> declaration into a separate <code>.typ</code> file, so you can include it in <code>main.typ</code> and in <code>text-with-date.typ</code>!</p>",
      "raw": "Hey alex01,\n\nYou could put the `mydate` declaration into a separate `.typ` file, so you can include it in `main.typ` and in `text-with-date.typ`!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 997
    },
    {
      "id": 9363,
      "post_number": 3,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-04T12:44:55.639Z",
      "updated_at": "2025-03-04T12:44:55.639Z",
      "cooked": "<p>Than you but I get the same error but now in main.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">// main.typ\n#include \"my-functions.typ\"\n#mydate.display()\n</code></pre>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">// my-functions.typ\n#let mydate = datetime(\n  year: 2020,\n  month: 04,\n  day: 27,\n)\n</code></pre>\n<pre data-code-wrap=\"shell\"><code class=\"lang-shell\"># typst compile main.typ &amp;&amp; okular main.pdf\nerror: unknown variable: mydate\n   ┌─ main.typ:91:1\n   │\n91 │ #mydate.display()\n   │  ^^^^^^\n</code></pre>",
      "raw": "Than you but I get the same error but now in main.\n\n```typst\n// main.typ\n#include \"my-functions.typ\"\n#mydate.display()\n```\n\n```typst\n// my-functions.typ\n#let mydate = datetime(\n  year: 2020,\n  month: 04,\n  day: 27,\n)\n```\n```shell\n# typst compile main.typ && okular main.pdf\nerror: unknown variable: mydate\n   ┌─ main.typ:91:1\n   │\n91 │ #mydate.display()\n   │  ^^^^^^\n```",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 15.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    },
    {
      "id": 9368,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-04T13:29:57.636Z",
      "updated_at": "2025-03-04T13:29:57.636Z",
      "cooked": "<p>The command here would be to import it.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"my-functions.typ\": *\n</code></pre>",
      "raw": "The command here would be to import it.\n```typ\n#import \"my-functions.typ\": *\n```",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9377,
      "post_number": 5,
      "username": "Electron_Wizard",
      "name": "Electron Wizard",
      "created_at": "2025-03-04T14:51:40.601Z",
      "updated_at": "2025-03-04T14:55:19.589Z",
      "cooked": "<p>To add to <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a>’s answer, here is a complete example!</p>\n<h2><a name=\"p-9377-my-functiontyp-1\" class=\"anchor\" href=\"#p-9377-my-functiontyp-1\"></a><code>my-function.typ</code></h2>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let mydate = datetime(\n  year: 2020,\n  month: 04,\n  day: 27,\n)\n</code></pre>\n<h2><a name=\"p-9377-this-is-another-pagetyp-2\" class=\"anchor\" href=\"#p-9377-this-is-another-pagetyp-2\"></a><code>this-is-another-page.typ</code></h2>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"my-function.typ\": *\n\n`this-is-another-page.typ` also imports the `mydate`: #mydate.display()\n</code></pre>\n<h2><a name=\"p-9377-maintyp-3\" class=\"anchor\" href=\"#p-9377-maintyp-3\"></a><code>main.typ</code></h2>\n<p>Here are a couple of examples, how to include functions. The first is used, when you have multiple packages with the same name, so you just rename them for the <strong>scope of this file</strong> (in this case main.typ).</p>\n<p>The second one is a “filtered” import (I now have coined this term), which allows you to include only specific content of a file/package.</p>\n<p>The third allows you to rename imported content!</p>\n<p>The fourth includes all the content (so you don’t have to use <code>my-function.mydate.display()</code>.</p>\n<p>There is also <code>#import \"my-function.typ\"</code>, which imports the module under the same name (hence you can insert your date with  <code>my-function.mydate.display()</code>)</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"my-function.typ\" as fn\n#fn.mydate.display()\n\n#import \"my-function.typ\": mydate\n#mydate.display()\n\n#import \"my-function.typ\": mydate as hahadate\n#hahadate.display()\n\n#import \"my-function.typ\": *\n#mydate.display()\n\n#include \"this-is-another-page.typ\"\n</code></pre>\n<h2><a name=\"p-9377-result-4\" class=\"anchor\" href=\"#p-9377-result-4\"></a>Result</h2>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/2/292958b2e42bd964d8992b818a3c39d0591e819e.png\" alt=\"image\" data-base62-sha1=\"5S89XMiznrJE632dbFpKvNMjuFM\" width=\"557\" height=\"213\"></p>\n<p>If you got any questions, just ask away! That’s what the forum is for!</p>",
      "raw": "To add to @quachpas's answer, here is a complete example!\n\n## `my-function.typ`\n```typst\n#let mydate = datetime(\n  year: 2020,\n  month: 04,\n  day: 27,\n)\n```\n\n## `this-is-another-page.typ`\n\n```typst\n#import \"my-function.typ\": *\n\n`this-is-another-page.typ` also imports the `mydate`: #mydate.display()\n```\n\n## `main.typ`\n\nHere are a couple of examples, how to include functions. The first is used, when you have multiple packages with the same name, so you just rename them for the **scope of this file** (in this case main.typ).\n\nThe second one is a \"filtered\" import (I now have coined this term), which allows you to include only specific content of a file/package.\n\nThe third allows you to rename imported content!\n\nThe fourth includes all the content (so you don't have to use `my-function.mydate.display()`.\n\nThere is also `#import \"my-function.typ\"`, which imports the module under the same name (hence you can insert your date with  `my-function.mydate.display()`)\n\n```typst\n#import \"my-function.typ\" as fn\n#fn.mydate.display()\n\n#import \"my-function.typ\": mydate\n#mydate.display()\n\n#import \"my-function.typ\": mydate as hahadate\n#hahadate.display()\n\n#import \"my-function.typ\": *\n#mydate.display()\n\n#include \"this-is-another-page.typ\"\n```\n\n## Result\n![image|557x213](upload://5S89XMiznrJE632dbFpKvNMjuFM.png)\n\nIf you got any questions, just ask away! That's what the forum is for!",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 23,
      "score": 34.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 997
    }
  ],
  "scraped_at": "2025-06-10T09:50:46.697763"
}
{
  "topic_metadata": {
    "id": 3098,
    "title": "How can I add indentation in headings?",
    "slug": "how-can-i-add-indentation-in-headings",
    "posts_count": 5,
    "created_at": "2025-03-04T11:54:45.625Z",
    "last_posted_at": "2025-03-15T15:21:33.806Z",
    "views": 166,
    "like_count": 1,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "sijo",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 388
  },
  "posts": [
    {
      "id": 9358,
      "post_number": 1,
      "username": "qerenny",
      "name": "qerenny",
      "created_at": "2025-03-04T11:54:45.865Z",
      "updated_at": "2025-03-09T13:36:39.519Z",
      "cooked": "<p>I want to indent the titles like the text is 1.25cm, but the pad doesn’t work when the title is numbered, and the block doesn’t work either - instead of indenting from the left, it indents from the top.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let inst_heading(body) = [\n\n    #set heading(\n    depth: 3,\n    numbering: \"1.1\",\n  )  \n\n  #show heading.where(level: 1): it =&gt; [\n    #set align(center)\n    #set text(weight: \"semibold\", size: 14pt)\n    #set block(below: 2em)\n    #it\n  ]\n\n  #show outline.entry.where(\n    level: 1\n  ): set block(above: 1.5em)\n  \n  #show outline.entry: it =&gt; link(\n    it.element.location(),\n    it.indented(it.prefix(), it.inner(), gap: 0.84em) \n  )\n\n  #show heading.where(level: 2): it =&gt; [\n    #set align(left)\n    #set text(weight: \"semibold\", size: 14pt)\n\n    #set block(below: 2em)\n    #set block(above: 2em)\n    #it\n  ]\n\n  #show heading.where(level: 3): it =&gt; [\n    #set align(left)\n    #set text(weight: \"semibold\", size: 14pt)\n    \n    #set block(below: 2em)\n    #set block(above: 2em)\n    #it\n  ]\n\n  #set list(marker: [--], indent: 1.25cm)\n  #set enum(indent: 1.25cm)\n  #body\n]\n</code></pre>",
      "raw": "I want to indent the titles like the text is 1.25cm, but the pad doesn't work when the title is numbered, and the block doesn't work either - instead of indenting from the left, it indents from the top.\n\n```typ\n#let inst_heading(body) = [\n\n    #set heading(\n    depth: 3,\n    numbering: \"1.1\",\n  )  \n\n  #show heading.where(level: 1): it => [\n    #set align(center)\n    #set text(weight: \"semibold\", size: 14pt)\n    #set block(below: 2em)\n    #it\n  ]\n\n  #show outline.entry.where(\n    level: 1\n  ): set block(above: 1.5em)\n  \n  #show outline.entry: it => link(\n    it.element.location(),\n    it.indented(it.prefix(), it.inner(), gap: 0.84em) \n  )\n\n  #show heading.where(level: 2): it => [\n    #set align(left)\n    #set text(weight: \"semibold\", size: 14pt)\n\n    #set block(below: 2em)\n    #set block(above: 2em)\n    #it\n  ]\n\n  #show heading.where(level: 3): it => [\n    #set align(left)\n    #set text(weight: \"semibold\", size: 14pt)\n    \n    #set block(below: 2em)\n    #set block(above: 2em)\n    #it\n  ]\n\n  #set list(marker: [--], indent: 1.25cm)\n  #set enum(indent: 1.25cm)\n  #body\n]\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 665.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1299
    },
    {
      "id": 9366,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-04T12:58:30.874Z",
      "updated_at": "2025-03-04T12:58:30.874Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/qerenny\">@qerenny</a>, welcome to the Typst forum! Please have a look at the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">guidelines</a>. In particular, could you post a minimal but complete example of code and explain how it doesn’t do what you want? You mention a “pad” of 1.25cm but there’s no <code>pad</code> call in your code, and the only 1.25 setting seems to work well. Maybe a screenshot of what you’re trying to get would help.</p>",
      "raw": "Hi @qerenny, welcome to the Typst forum! Please have a look at the [guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11). In particular, could you post a minimal but complete example of code and explain how it doesn't do what you want? You mention a \"pad\" of 1.25cm but there's no `pad` call in your code, and the only 1.25 setting seems to work well. Maybe a screenshot of what you're trying to get would help.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9827,
      "post_number": 3,
      "username": "qerenny",
      "name": "qerenny",
      "created_at": "2025-03-15T12:06:55.790Z",
      "updated_at": "2025-03-15T12:27:51.082Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/sijo\">@sijo</a> I want to make headers look like on this screenshot.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/8/8bc594c6b59a705d762f3e8ac58f3638e9d7e622.png\" data-download-href=\"https://forum.typst.app/uploads/default/8bc594c6b59a705d762f3e8ac58f3638e9d7e622\" title=\"Screenshot 2025-03-15 at 14.55.22\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/8/8bc594c6b59a705d762f3e8ac58f3638e9d7e622_2_690x392.png\" alt=\"Screenshot 2025-03-15 at 14.55.22\" data-base62-sha1=\"jWtGpyP8HrbLCYDTtPLrvdFunv4\" width=\"690\" height=\"392\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/8/8bc594c6b59a705d762f3e8ac58f3638e9d7e622_2_690x392.png, https://forum.typst.app/uploads/default/optimized/2X/8/8bc594c6b59a705d762f3e8ac58f3638e9d7e622_2_1035x588.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/8/8bc594c6b59a705d762f3e8ac58f3638e9d7e622_2_1380x784.png 2x\" data-dominant-color=\"F0F0F0\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-03-15 at 14.55.22</span><span class=\"informations\">1436×816 156 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>In the code above, there is neither pad nor block, because they do not work and break the view.<br>\nAt the moment it looks like this:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/0/099b01908f8c69438630e8ddd0b18ecf22a08f8d.png\" data-download-href=\"https://forum.typst.app/uploads/default/099b01908f8c69438630e8ddd0b18ecf22a08f8d\" title=\"Screenshot 2025-03-15 at 15.05.49\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/0/099b01908f8c69438630e8ddd0b18ecf22a08f8d_2_690x393.png\" alt=\"Screenshot 2025-03-15 at 15.05.49\" data-base62-sha1=\"1mYozmNte7mrEohfyoUaXrvxwAd\" width=\"690\" height=\"393\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/0/099b01908f8c69438630e8ddd0b18ecf22a08f8d_2_690x393.png, https://forum.typst.app/uploads/default/original/2X/0/099b01908f8c69438630e8ddd0b18ecf22a08f8d.png 1.5x, https://forum.typst.app/uploads/default/original/2X/0/099b01908f8c69438630e8ddd0b18ecf22a08f8d.png 2x\" data-dominant-color=\"EFEFEF\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-03-15 at 15.05.49</span><span class=\"informations\">972×554 124 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "@sijo I want to make headers look like on this screenshot.\n\n![Screenshot 2025-03-15 at 14.55.22|690x392](upload://jWtGpyP8HrbLCYDTtPLrvdFunv4.png)\n\nIn the code above, there is neither pad nor block, because they do not work and break the view. \nAt the moment it looks like this:\n\n![Screenshot 2025-03-15 at 15.05.49|690x393](upload://1mYozmNte7mrEohfyoUaXrvxwAd.png)",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 24.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1299
    },
    {
      "id": 9833,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-15T14:15:52.715Z",
      "updated_at": "2025-03-15T14:15:52.715Z",
      "cooked": "<p>Does the following do what you want?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set par(first-line-indent: (amount: 1.25cm, all: true))\n#set heading(numbering: \"1.1\")\n#show heading: pad.with(left: 1.25cm)\n\n= #lorem(5)\n== #lorem(5)\n#lorem(30)\n\n#lorem(30)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/9/9e24391314c06b612fbcdc6bd5c4ce872c5b8528.png\" data-download-href=\"https://forum.typst.app/uploads/default/9e24391314c06b612fbcdc6bd5c4ce872c5b8528\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/9/9e24391314c06b612fbcdc6bd5c4ce872c5b8528_2_517x154.png\" alt=\"image\" data-base62-sha1=\"myZ2X7qLd7AGX27Ahaat6bHZIBq\" width=\"517\" height=\"154\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/9/9e24391314c06b612fbcdc6bd5c4ce872c5b8528_2_517x154.png, https://forum.typst.app/uploads/default/optimized/2X/9/9e24391314c06b612fbcdc6bd5c4ce872c5b8528_2_775x231.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/9/9e24391314c06b612fbcdc6bd5c4ce872c5b8528_2_1034x308.png 2x\" data-dominant-color=\"EEEEEE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1130×338 65.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Does the following do what you want?\n\n```typ\n#set par(first-line-indent: (amount: 1.25cm, all: true))\n#set heading(numbering: \"1.1\")\n#show heading: pad.with(left: 1.25cm)\n\n= #lorem(5)\n== #lorem(5)\n#lorem(30)\n\n#lorem(30)\n```\n\n![image|690x206, 75%](upload://myZ2X7qLd7AGX27Ahaat6bHZIBq.png)",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 33.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9835,
      "post_number": 5,
      "username": "qerenny",
      "name": "qerenny",
      "created_at": "2025-03-15T15:21:33.806Z",
      "updated_at": "2025-03-15T15:21:49.759Z",
      "cooked": "<p>Yeah, you are right <a class=\"mention\" href=\"/u/sijo\">@sijo</a>, but I understood that I have great problems with my text on the whole due to imposition of settings. No one exists, who could fix this crap)<br>\nThanks for the help</p>",
      "raw": "Yeah, you are right @sijo, but I understood that I have great problems with my text on the whole due to imposition of settings. No one exists, who could fix this crap)\nThanks for the help",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1299
    }
  ],
  "scraped_at": "2025-06-10T09:50:45.987812"
}
{
  "topic_metadata": {
    "id": 3099,
    "title": "How do you do array calculations?",
    "slug": "how-do-you-do-array-calculations",
    "posts_count": 3,
    "created_at": "2025-03-04T12:00:32.147Z",
    "last_posted_at": "2025-03-04T13:02:38.878Z",
    "views": 163,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 467
  },
  "posts": [
    {
      "id": 9359,
      "post_number": 1,
      "username": "Max1",
      "name": "",
      "created_at": "2025-03-04T12:00:32.285Z",
      "updated_at": "2025-03-04T12:51:01.039Z",
      "cooked": "<p>I stumbled into the wish to do array calculation (at least some basics like element-wise multiplication, multiplication by float, substraction, …).<br>\nEspecially when doing some cetz plots it would make some coordinate calculations much easier.</p>\n<p>According to <a href=\"https://typst.app/docs/reference/foundations/array/\" class=\"inline-onebox\">Array Type – Typst Documentation</a> only addition and multiplication by an integer can be done in typst.<br>\nWhile I do not really understand the reasons (an explanation would be nice just to understand whether this is something on the roadmap or intended by design) I would like to know how others are solving this.</p>\n<ul>\n<li>Are you writing custom functions that you reuse?</li>\n<li>Are you doing it element wise “by-hand”?</li>\n<li>Is there any package I’m not aware of?</li>\n<li>Am I wrong and there is a typst way to do it?</li>\n</ul>",
      "raw": "I stumbled into the wish to do array calculation (at least some basics like element-wise multiplication, multiplication by float, substraction, ...).\nEspecially when doing some cetz plots it would make some coordinate calculations much easier.\n\nAccording to https://typst.app/docs/reference/foundations/array/ only addition and multiplication by an integer can be done in typst.\nWhile I do not really understand the reasons (an explanation would be nice just to understand whether this is something on the roadmap or intended by design) I would like to know how others are solving this.\n\n - Are you writing custom functions that you reuse?\n - Are you doing it element wise \"by-hand\"?\n - Is there any package I'm not aware of?\n - Am I wrong and there is a typst way to do it?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 697.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1298
    },
    {
      "id": 9365,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-04T12:50:51.337Z",
      "updated_at": "2025-03-04T13:48:15.858Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/max1\">@Max1</a>, welcome to the forum! I have edited the title of your question to follow our <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">guidelines</a>.</p>\n<p>Note that the “addition” and “multiplication” of several arrays in Typst are not mathematical operations: <code>array1 + array1</code> will concatenate the arrays and <code>array1 * 3</code> will concatenate 3 copies of <code>array1</code>.</p>\n<p>For actual math operations, you have the functions <code>array.sum</code> and <code>array.product</code> that operate on the elements of an array:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#(1,2,3).product()  // returns 6\n</code></pre>\n<p>For operations with several arrays, you can use arrays functions like <code>map</code>, <code>zip</code> and <code>fold</code> to implement some of them easily. For example the sum of two vectors:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let a = (1, 2, 3)\n#let b = (0, 10, 100)\n\n// Returns (1, 12 ,103)\n#a.zip(b).map(array.sum)\n</code></pre>\n<p>I recently posted an example implementation of matrix multiplication along these lines: <a href=\"https://forum.typst.app/t/minimal-implementation-of-matrix-multiplication/2959\" class=\"inline-onebox\">Minimal implementation of matrix multiplication</a></p>\n<p>For heavy usage you can try to find a package that implements what you need. At some point there will probably be a comprehensive numerical package in the form of a WebAssembly plugin but I don’t think we’re there yet. But CeTZ itself has a lot of vector and matrix functions that you can access with <code>cetz.util.vector</code> and <code>cetz.util.matrix</code>. See for example <a href=\"https://cetz-package.github.io/docs/api/internal/vector/\">here</a> for the vector documentation. Note that these functions are documented as internals, so I guess they might change even in minor updates of the CeTZ package.</p>",
      "raw": "Hi @Max1, welcome to the forum! I have edited the title of your question to follow our [guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11).\n\nNote that the \"addition\" and \"multiplication\" of several arrays in Typst are not mathematical operations: `array1 + array1` will concatenate the arrays and `array1 * 3` will concatenate 3 copies of `array1`.\n\nFor actual math operations, you have the functions `array.sum` and `array.product` that operate on the elements of an array:\n\n```typ\n#(1,2,3).product()  // returns 6\n```\n\nFor operations with several arrays, you can use arrays functions like `map`, `zip` and `fold` to implement some of them easily. For example the sum of two vectors:\n\n```typ\n#let a = (1, 2, 3)\n#let b = (0, 10, 100)\n\n// Returns (1, 12 ,103)\n#a.zip(b).map(array.sum)\n```\n\nI recently posted an example implementation of matrix multiplication along these lines: https://forum.typst.app/t/minimal-implementation-of-matrix-multiplication/2959\n\nFor heavy usage you can try to find a package that implements what you need. At some point there will probably be a comprehensive numerical package in the form of a WebAssembly plugin but I don't think we're there yet. But CeTZ itself has a lot of vector and matrix functions that you can access with `cetz.util.vector` and `cetz.util.matrix`. See for example [here](https://cetz-package.github.io/docs/api/internal/vector/) for the vector documentation. Note that these functions are documented as internals, so I guess they might change even in minor updates of the CeTZ package.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 34,
      "score": 51.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9367,
      "post_number": 3,
      "username": "Max1",
      "name": "",
      "created_at": "2025-03-04T13:02:38.878Z",
      "updated_at": "2025-03-04T13:02:38.878Z",
      "cooked": "<p>Thanks a lot for the answer.</p>\n<p>Obviously misunderstood the part about addition and multiplication and didn’t test it enough to see the mistake <img src=\"https://forum.typst.app/images/emoji/apple/man_facepalming.png?v=12\" title=\":man_facepalming:\" class=\"emoji\" alt=\":man_facepalming:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>I knew about the <code>array.sum</code> and <code>array.product</code> functions but didn’t think much further. Quite elegant way how you implemented the basic stuff. Never came into my mind doing it that way <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">  Thanks a lot <img src=\"https://forum.typst.app/images/emoji/apple/blush.png?v=12\" title=\":blush:\" class=\"emoji\" alt=\":blush:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Also thanks for the hint to cetz internals.</p>",
      "raw": "Thanks a lot for the answer. \n\nObviously misunderstood the part about addition and multiplication and didn't test it enough to see the mistake :man_facepalming: \n\nI knew about the `array.sum` and `array.product` functions but didn't think much further. Quite elegant way how you implemented the basic stuff. Never came into my mind doing it that way :sweat_smile:  Thanks a lot :blush: \n\nAlso thanks for the hint to cetz internals.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 21.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1298
    }
  ],
  "scraped_at": "2025-06-10T09:50:45.277900"
}
{
  "topic_metadata": {
    "id": 3100,
    "title": "Why existing templates can no longer pass compilation now？",
    "slug": "why-existing-templates-can-no-longer-pass-compilation-now",
    "posts_count": 5,
    "created_at": "2025-03-04T13:40:27.589Z",
    "last_posted_at": "2025-03-04T14:30:07.670Z",
    "views": 82,
    "like_count": 0,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "quachpas",
    "tags": [
      "packages"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 208
  },
  "posts": [
    {
      "id": 9369,
      "post_number": 1,
      "username": "daoshi1593",
      "name": "daoshi1593",
      "created_at": "2025-03-04T13:40:27.745Z",
      "updated_at": "2025-03-04T13:40:27.745Z",
      "cooked": "<p>Actually, a few months ago I used a certain template to write an article, which could correctly compile and generate a PDF file at that time. Now when I try to compile it again, I found it fails. I’ve also noticed that many templates no longer compile successfully (they should have worked properly before). I want to know why this is happening and how I can fix it?<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/0/09e9cc0b699154d0f84022dd498f261d146b223e.png\" data-download-href=\"https://forum.typst.app/uploads/default/09e9cc0b699154d0f84022dd498f261d146b223e\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/0/09e9cc0b699154d0f84022dd498f261d146b223e_2_690x411.png\" alt=\"image\" data-base62-sha1=\"1pHcIpt2aiKbFh2bmyRpAMKRttc\" width=\"690\" height=\"411\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/0/09e9cc0b699154d0f84022dd498f261d146b223e_2_690x411.png, https://forum.typst.app/uploads/default/optimized/2X/0/09e9cc0b699154d0f84022dd498f261d146b223e_2_1035x616.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/0/09e9cc0b699154d0f84022dd498f261d146b223e_2_1380x822.png 2x\" data-dominant-color=\"333B3F\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1555×927 92.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nthis is a picture about errors</p>",
      "raw": "Actually, a few months ago I used a certain template to write an article, which could correctly compile and generate a PDF file at that time. Now when I try to compile it again, I found it fails. I've also noticed that many templates no longer compile successfully (they should have worked properly before). I want to know why this is happening and how I can fix it?\n![image|690x411](upload://1pHcIpt2aiKbFh2bmyRpAMKRttc.png)\nthis is a picture about errors",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 67.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1040
    },
    {
      "id": 9370,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-04T13:47:21.015Z",
      "updated_at": "2025-03-04T13:47:21.015Z",
      "cooked": "<p>Hello, which version of touying are you using? You might need to upgrade the version.</p>\n<p>See <a href=\"https://forum.typst.app/t/how-to-use-context-instead-of-a-callback-function-in-locate-function-calls/965\" class=\"inline-onebox\">How to use context instead of a callback function in locate function calls?</a></p>",
      "raw": "Hello, which version of touying are you using? You might need to upgrade the version.\n\nSee https://forum.typst.app/t/how-to-use-context-instead-of-a-callback-function-in-locate-function-calls/965",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 22.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9373,
      "post_number": 3,
      "username": "daoshi1593",
      "name": "daoshi1593",
      "created_at": "2025-03-04T14:23:14.346Z",
      "updated_at": "2025-03-04T14:23:57.318Z",
      "cooked": "<p>0.4.0. These templates that don’t work now were probably developed under older versions, so could this be because the Touyin version is outdated? I think perhaps I should downgrade to an earlier Typst version, but I haven’t found the Linux command to do this.<br>\nthanks for your replying.</p>",
      "raw": "0.4.0. These templates that don't work now were probably developed under older versions, so could this be because the Touyin version is outdated? I think perhaps I should downgrade to an earlier Typst version, but I haven't found the Linux command to do this.\nthanks for your replying.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 21.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1040
    },
    {
      "id": 9375,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-04T14:26:35.869Z",
      "updated_at": "2025-03-04T14:26:35.869Z",
      "cooked": "<p>You can always download releases of Typst at <a href=\"https://github.com/typst/typst/releases\" class=\"inline-onebox\">Releases · typst/typst · GitHub</a> and change the version from the webapp project settings.</p>",
      "raw": "You can always download releases of Typst at https://github.com/typst/typst/releases and change the version from the webapp project settings.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 11.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9376,
      "post_number": 5,
      "username": "daoshi1593",
      "name": "daoshi1593",
      "created_at": "2025-03-04T14:30:07.670Z",
      "updated_at": "2025-03-04T14:30:07.670Z",
      "cooked": "<p>Thank you very much for your reply. Previously, I wasn’t familiar with version settings for web applications.</p>",
      "raw": "Thank you very much for your reply. Previously, I wasn't familiar with version settings for web applications.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1040
    }
  ],
  "scraped_at": "2025-06-10T09:50:44.568590"
}
{
  "topic_metadata": {
    "id": 3104,
    "title": "Struggling with parameter to functions, numerical vs string",
    "slug": "struggling-with-parameter-to-functions-numerical-vs-string",
    "posts_count": 4,
    "created_at": "2025-03-04T16:11:17.281Z",
    "last_posted_at": "2025-03-05T08:15:32.921Z",
    "views": 62,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 871
  },
  "posts": [
    {
      "id": 9380,
      "post_number": 1,
      "username": "pejef",
      "name": "Peter Frings",
      "created_at": "2025-03-04T16:11:17.381Z",
      "updated_at": "2025-03-04T16:12:13.100Z",
      "cooked": "<p>I’m trying to get the following functions working.</p>\n<ol>\n<li>When I type <code>#apr[1234]</code>, the function must create a link to <code>https:/blala/1234</code>, with the link shown as <code>APR-1234</code>. The argument is usually numerical, but it could also be a string.</li>\n<li>When I type <code>#vs[abc.def]</code>, the function must show it as  <code>$ABC.DEF</code>.</li>\n</ol>\n<p>I thought “piece of cake!”, but nope, it’s not. Not for a newbie, at least. I want to keep the syntax clean, consistent and simple. I got something to work, but I would have to use either <code>()</code> or<code> []</code> and enclose the argument in <code>\"\"</code>, depending on whether the argument consists of numbers only or not.</p>\n<p>Is there a simple way to get this done?</p>\n<p>BTW, even ChatGPT and Perplexity didn’t manage to come up with something. Please proof that humans can still outsmart an AI <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "I'm trying to get the following functions working.\n1. When I type `#apr[1234]`, the function must create a link to `https:/blala/1234`, with the link shown as `APR-1234`. The argument is usually numerical, but it could also be a string.\n2. When I type `#vs[abc.def]`, the function must show it as  `$ABC.DEF`.\n\nI thought \"piece of cake!\", but nope, it's not. Not for a newbie, at least. I want to keep the syntax clean, consistent and simple. I got something to work, but I would have to use either `()` or` []` and enclose the argument in `\"\"`, depending on whether the argument consists of numbers only or not. \n\nIs there a simple way to get this done?\n\nBTW, even ChatGPT and Perplexity didn't manage to come up with something. Please proof that humans can still outsmart an AI :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 51.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1297
    },
    {
      "id": 9381,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-04T16:51:40.422Z",
      "updated_at": "2025-03-04T16:52:58.867Z",
      "cooked": "<p>Is the following what you want?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let apr(it) = link(\"https://blabla/\" + it.text, raw(\"APR-\" + it.text))\n#let vs(it) = raw(\"$\" + upper(it.text))\n\n#apr[1234]\n\n#vs[abc.def]\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/c/c63fb77a9ad64194b626af1382496919e216ba7f.png\" alt=\"image\" data-base62-sha1=\"shN3ch16udd4FuSIVKMFnHWdaGj\" width=\"95\" height=\"62\"></p>\n<p>Maybe if you show what you tried it will be easier to put the finger on what’s troubling you in the language…</p>\n<p>Remark: when you write <code>#apr[1234]</code> the argument is always <a href=\"https://typst.app/docs/reference/foundations/content/\">content</a>. The content wraps an element. For simple arguments the element is simply text, but it can also be other things:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let whats(it) = [\n  Type of `it` is #type(it)\\\n  Func: #it.func()\\\n  Fields: #it.fields()\n]\n\n#whats[x]\n\n#whats[123]\n\n#whats[*x*]\n\n#whats[x *y*]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/624b054a94dbe9b643d1ccd34220f406545a3073.png\" data-download-href=\"https://forum.typst.app/uploads/default/624b054a94dbe9b643d1ccd34220f406545a3073\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/6/624b054a94dbe9b643d1ccd34220f406545a3073_2_332x250.png\" alt=\"image\" data-base62-sha1=\"e1xwqYuxTQcRLWv9QWrku9P13of\" width=\"332\" height=\"250\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/6/624b054a94dbe9b643d1ccd34220f406545a3073_2_332x250.png, https://forum.typst.app/uploads/default/optimized/2X/6/624b054a94dbe9b643d1ccd34220f406545a3073_2_498x375.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/6/624b054a94dbe9b643d1ccd34220f406545a3073_2_664x500.png 2x\" data-dominant-color=\"F7F7F7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">890×670 67.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Is the following what you want?\n\n```typ\n#let apr(it) = link(\"https://blabla/\" + it.text, raw(\"APR-\" + it.text))\n#let vs(it) = raw(\"$\" + upper(it.text))\n\n#apr[1234]\n\n#vs[abc.def]\n```\n\n![image|190x124, 50%](upload://shN3ch16udd4FuSIVKMFnHWdaGj.png)\n\nMaybe if you show what you tried it will be easier to put the finger on what's troubling you in the language...\n\nRemark: when you write `#apr[1234]` the argument is always [content](https://typst.app/docs/reference/foundations/content/). The content wraps an element. For simple arguments the element is simply text, but it can also be other things:\n\n```typ\n#let whats(it) = [\n  Type of `it` is #type(it)\\\n  Func: #it.func()\\\n  Fields: #it.fields()\n]\n\n#whats[x]\n\n#whats[123]\n\n#whats[*x*]\n\n#whats[x *y*]\n```\n![image|664x500, 50%](upload://e1xwqYuxTQcRLWv9QWrku9P13of.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 26.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9383,
      "post_number": 3,
      "username": "pejef",
      "name": "Peter Frings",
      "created_at": "2025-03-04T20:25:25.331Z",
      "updated_at": "2025-03-04T20:25:25.331Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"sijo\" data-post=\"2\" data-topic=\"3104\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/0A3649/48.png\" class=\"avatar\"> sijo:</div>\n<blockquote>\n<p>Maybe if you show what you tried it will be easier to put the finger on what’s troubling you in the language…</p>\n</blockquote>\n</aside>\n<p>Fair question.  In hindsight, I didn’t fully understand the different between <code>()</code>and <code>[]</code>, and once I did, I was already put on the wrong track by ChatGPT and Perplexity.</p>\n<p>I think that one of my first attempts at <code>#apr</code> was this:</p>\n<pre><code class=\"lang-auto\">#let apr(n) = link(\"https://example.com/APR-#n\")[APR-#n]\n</code></pre>\n<p>That seemed to work, but the link is wrong. So I tried</p>\n<pre><code class=\"lang-auto\">#let apr(n) = link(\"https://example.com/APR-\" + n)[APR-#n]\n</code></pre>\n<p>That didn’t compile.</p>\n<p>At some point  I got this:</p>\n<pre><code class=\"lang-auto\">#let apr(n) = link(\"https://example.com/APR-\" + str(n), [APR-#n])\n#let vs(t) = [\\$]+smallcaps(t)\n</code></pre>\n<p>The <code>str()</code> was suggested by ChatGPT, with the explanation that “str()  ensures that whatever is passed gets converted into a string.” Yeah right.</p>\n<p>This worked for <code>@apr(123)</code> but not for <code>@vs(abc)</code>. I now understand that the <code>()</code> creates a code context in which <code>abc</code> is expected to be a variable. That explains the “unknown variable” error I got.</p>\n<p>But because <code>#vs[123]</code> and <code>#vs[abc]</code> both worked as expected, I tried to use the same call for <code>#apr</code>: <code>#apr[123]</code> and <code>#apr[abc]</code>.  As I said, I like consistency.</p>\n<p>That didn’t work. The almighty <code>str()</code> didn’t work. Then chatGPT offered “text(content) : Extracts the textual content.” as the solution. Nope. And Perplexity suggested <code>content()</code>. Again, nope.</p>\n<p>At last, I got to the <code>content</code> documentation page, but honestly, that didn’t offer much help (A brief mentioning of the <code>.text</code> field would have been nice).</p>\n<p>It’s good to know that humans can still be smarter than the AI. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Thanks for the help!<br>\nPeter.</p>",
      "raw": "[quote=\"sijo, post:2, topic:3104\"]\nMaybe if you show what you tried it will be easier to put the finger on what’s troubling you in the language…\n[/quote]\n\nFair question.  In hindsight, I didn't fully understand the different between `()`and `[]`, and once I did, I was already put on the wrong track by ChatGPT and Perplexity.\n\nI think that one of my first attempts at `#apr` was this:\n```\n#let apr(n) = link(\"https://example.com/APR-#n\")[APR-#n]\n```\nThat seemed to work, but the link is wrong. So I tried\n```\n#let apr(n) = link(\"https://example.com/APR-\" + n)[APR-#n]\n```\nThat didn't compile.\n\nAt some point  I got this: \n```\n#let apr(n) = link(\"https://example.com/APR-\" + str(n), [APR-#n])\n#let vs(t) = [\\$]+smallcaps(t)\n```\nThe `str()` was suggested by ChatGPT, with the explanation that \"str()  ensures that whatever is passed gets converted into a string.\" Yeah right.\n\nThis worked for ```@apr(123)``` but not for ```@vs(abc)```. I now understand that the `()` creates a code context in which `abc` is expected to be a variable. That explains the \"unknown variable\" error I got.\n\nBut because `#vs[123]` and `#vs[abc]` both worked as expected, I tried to use the same call for `#apr`: `#apr[123]` and `#apr[abc]`.  As I said, I like consistency.\n\nThat didn't work. The almighty `str()` didn't work. Then chatGPT offered \"text(content) : Extracts the textual content.\" as the solution. Nope. And Perplexity suggested `content()`. Again, nope.\n\nAt last, I got to the `content` documentation page, but honestly, that didn't offer much help (A brief mentioning of the `.text` field would have been nice). \n\nIt's good to know that humans can still be smarter than the AI. :wink:\n\nThanks for the help!\nPeter.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1297
    },
    {
      "id": 9395,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-05T08:15:32.921Z",
      "updated_at": "2025-03-05T08:17:01.074Z",
      "cooked": "<p>You’re welcome!</p>\n<p>To summarize, everything you write in a <code>.typ</code> file is either markup or code or math. If you want to to pass the text “abc” to <code>#apr</code>, in code mode you need quotes: <code>#apr(\"abc\")</code>. It is only in markup mode that a word is just a word, so to avoid the quotes you need to write <code>#apr[abc]</code>. Inside the <code>[...]</code> you are in markup mode.</p>\n<p>The flip side of using markup for function arguments is that markup is not limited to simple text, so it passes a content value rather than a string value. For example <code>[x#footnote[z] $sqrt(a)$]</code> is a content value that includes simple text, a footnote and math. How should this be rendered as a string? It’s not clear, so <code>str</code> doesn’t work on content. You can still get a string for it using <code>repr</code>, but that shows the internal structure of the value, it’s meant for development and the result is not guaranteed stable from version to version:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#repr[x#footnote[z] $sqrt(a)$]\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/8/87b7cc82efb87a71712d4d3c5beea1da33505ea1.png\" alt=\"image\" data-base62-sha1=\"jmCfeMc9X6I9UFdUeabdOGHSzXb\" width=\"285\" height=\"113\"></p>\n<aside class=\"quote no-group\" data-username=\"pejef\" data-post=\"3\" data-topic=\"3104\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/66104C/48.png\" class=\"avatar\"> pejef:</div>\n<blockquote>\n<p>At last, I got to the <code>content</code> documentation page, but honestly, that didn’t offer much help (A brief mentioning of the <code>.text</code> field would have been nice).</p>\n</blockquote>\n</aside>\n<p>Yeah this page could be improved to make it more useful for beginners. Though one cannot simply add an entry about the <code>.text</code> field: The fields of a content value depend on the top-level element in the content. There will be a <code>.text</code> field only if the content happens to be simple text. Even something simple like <code>[a\\ b]</code> will be another kind of content (a sequence) that has a <code>.children</code> field instead of a <code>.text</code> field.</p>",
      "raw": "You're welcome!\n\nTo summarize, everything you write in a `.typ` file is either markup or code or math. If you want to to pass the text \"abc\" to `#apr`, in code mode you need quotes: `#apr(\"abc\")`. It is only in markup mode that a word is just a word, so to avoid the quotes you need to write `#apr[abc]`. Inside the `[...]` you are in markup mode.\n\nThe flip side of using markup for function arguments is that markup is not limited to simple text, so it passes a content value rather than a string value. For example `[x#footnote[z] $sqrt(a)$]` is a content value that includes simple text, a footnote and math. How should this be rendered as a string? It's not clear, so `str` doesn't work on content. You can still get a string for it using `repr`, but that shows the internal structure of the value, it's meant for development and the result is not guaranteed stable from version to version:\n\n```typ\n#repr[x#footnote[z] $sqrt(a)$]\n```\n\n![image|380x151, 75%](upload://jmCfeMc9X6I9UFdUeabdOGHSzXb.png)\n\n[quote=\"pejef, post:3, topic:3104\"]\nAt last, I got to the `content` documentation page, but honestly, that didn’t offer much help (A brief mentioning of the `.text` field would have been nice).\n[/quote]\n\nYeah this page could be improved to make it more useful for beginners. Though one cannot simply add an entry about the `.text` field: The fields of a content value depend on the top-level element in the content. There will be a `.text` field only if the content happens to be simple text. Even something simple like `[a\\ b]` will be another kind of content (a sequence) that has a `.children` field instead of a `.text` field.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:50:43.847871"
}
{
  "topic_metadata": {
    "id": 3107,
    "title": "How to draw CeTZ arc in x-z-plane?",
    "slug": "how-to-draw-cetz-arc-in-x-z-plane",
    "posts_count": 6,
    "created_at": "2025-03-04T21:36:38.405Z",
    "last_posted_at": "2025-03-05T22:35:41.614Z",
    "views": 135,
    "like_count": 3,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "graphics",
      "cetz"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 407
  },
  "posts": [
    {
      "id": 9385,
      "post_number": 1,
      "username": "Johannes",
      "name": "Johannes",
      "created_at": "2025-03-04T21:36:38.488Z",
      "updated_at": "2025-03-08T21:17:18.889Z",
      "cooked": "<p>Hey, this probably has some very obvious solution that for some reason I can‘t seem to find. Is there a way to draw an arc in CeTZ, that’s on the x-z-plane. When i try arc-through and feed it points in that plane, i get an error. Thank you for your help!</p>",
      "raw": "Hey, this probably has some very obvious solution that for some reason I can‘t seem to find. Is there a way to draw an arc in CeTZ, that’s on the x-z-plane. When i try arc-through and feed it points in that plane, i get an error. Thank you for your help!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 407.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1129
    },
    {
      "id": 9386,
      "post_number": 2,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2025-03-05T00:22:31.227Z",
      "updated_at": "2025-03-05T00:22:31.227Z",
      "cooked": "<p>Hi!</p>\n<p>Please provide a minimal code snippet of what you tried to do, so we can further investigate the error.</p>\n<p>Thanks. <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hi!\n\nPlease provide a minimal code snippet of what you tried to do, so we can further investigate the error.\n\nThanks. :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 12.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 9407,
      "post_number": 3,
      "username": "Johannes",
      "name": "Johannes",
      "created_at": "2025-03-05T11:27:59.128Z",
      "updated_at": "2025-03-05T11:27:59.128Z",
      "cooked": "<p>Sorry it took me so long to get back to you - here‘s the code I tried:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">\n#cetz.canvas(\n  {import cetz.draw: *\n\n      // drawing reference axes\n      line((0, 0, 0), (0, 3, 0), name: \"axisY\", stroke: (paint: black, thickness: .7pt, dash: \"dashed\", cap: \"round\"))\n      line((0, 0, 0), (0, 0, 3), name: \"axisZ\", stroke: (paint: black, thickness: .7pt, dash: \"dashed\", cap: \"round\"))\n      line((0, 0, 0), (3, 0, 0), name: \"axisX\", stroke: (paint: black, thickness: .7pt, dash: \"dashed\", cap: \"round\"))\n\n      //labeling axes\n      content(\"axisZ.end\", [$z$], anchor: \"east\", padding: .1)\n      content(\"axisY.end\", [$y$], anchor: \"east\", padding: .1)\n      content(\"axisX.end\", [$x$], anchor: \"west\", padding: .1)\n\n      //drawing arc between z and x axis\n      arc-through((0, 0, 2), (calc.sqrt(2), 0, calc. sqrt(2)), (2, 0, 0))\n})\n\n</code></pre>",
      "raw": "Sorry it took me so long to get back to you - here‘s the code I tried:\n\n```typst\n\n#cetz.canvas(\n  {import cetz.draw: *\n\n      // drawing reference axes\n      line((0, 0, 0), (0, 3, 0), name: \"axisY\", stroke: (paint: black, thickness: .7pt, dash: \"dashed\", cap: \"round\"))\n      line((0, 0, 0), (0, 0, 3), name: \"axisZ\", stroke: (paint: black, thickness: .7pt, dash: \"dashed\", cap: \"round\"))\n      line((0, 0, 0), (3, 0, 0), name: \"axisX\", stroke: (paint: black, thickness: .7pt, dash: \"dashed\", cap: \"round\"))\n\n      //labeling axes\n      content(\"axisZ.end\", [$z$], anchor: \"east\", padding: .1)\n      content(\"axisY.end\", [$y$], anchor: \"east\", padding: .1)\n      content(\"axisX.end\", [$x$], anchor: \"west\", padding: .1)\n\n      //drawing arc between z and x axis\n      arc-through((0, 0, 2), (calc.sqrt(2), 0, calc. sqrt(2)), (2, 0, 0))\n})\n\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 15.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1129
    },
    {
      "id": 9417,
      "post_number": 4,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-05T15:13:16.489Z",
      "updated_at": "2025-03-05T15:13:27.968Z",
      "cooked": "<p>The function <code>arc-through()</code> does not seem to directly support drawing with three-dimensional coordinates. The example <a href=\"https://cetz-package.github.io/docs/api/draw-functions/shapes/arc/#arc-through\" rel=\"noopener nofollow ugc\">here</a> only uses xy-coordinates but the documentation does not directly state that the function can not have non-zero z-coordinates.</p>\n<p>Since you want to draw the arc in the xz-plane, you can use the projection function <a href=\"https://cetz-package.github.io/docs/api/draw-functions/projections/on-xz\" rel=\"noopener nofollow ugc\"><code>on-xz</code></a>. This will “promote” your arc points from 2D to 3D according to (x, y) → (x, 0, y).</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">// drawing arc between z and x axis\non-xz(arc-through((0, 2), (calc.sqrt(2), calc.sqrt(2)), (2, 0)))\n</code></pre>",
      "raw": "The function `arc-through()` does not seem to directly support drawing with three-dimensional coordinates. The example [here](https://cetz-package.github.io/docs/api/draw-functions/shapes/arc/#arc-through) only uses xy-coordinates but the documentation does not directly state that the function can not have non-zero z-coordinates.\n\nSince you want to draw the arc in the xz-plane, you can use the projection function [`on-xz`](https://cetz-package.github.io/docs/api/draw-functions/projections/on-xz). This will \"promote\" your arc points from 2D to 3D according to (x, y) -> (x, 0, y).\n\n```typc\n// drawing arc between z and x axis\non-xz(arc-through((0, 2), (calc.sqrt(2), calc.sqrt(2)), (2, 0)))\n```",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 20.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 9419,
      "post_number": 5,
      "username": "Johannes",
      "name": "Johannes",
      "created_at": "2025-03-05T20:50:02.005Z",
      "updated_at": "2025-03-05T20:50:02.005Z",
      "cooked": "<p>Thanks, that should work. On another note - would you happen to have such a handy solution for when I‘m trying to draw an arc outside any base plane?</p>",
      "raw": "Thanks, that should work. On another note - would you happen to have such a handy solution for when I‘m trying to draw an arc outside any base plane?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1129
    },
    {
      "id": 9422,
      "post_number": 6,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-05T22:35:41.614Z",
      "updated_at": "2025-03-05T22:35:41.614Z",
      "cooked": "<p>Looking at the available projection functions, I think <a href=\"https://cetz-package.github.io/docs/api/draw-functions/projections/ortho\" rel=\"noopener nofollow ugc\"><code>ortho()</code></a> is what you would be looking for. In the example they use <code>on-xz()</code> to draw a rectangle in the xz-plane which is then “rotated” by the <code>ortho()</code> function.</p>",
      "raw": "Looking at the available projection functions, I think [`ortho()`](https://cetz-package.github.io/docs/api/draw-functions/projections/ortho) is what you would be looking for. In the example they use `on-xz()` to draw a rectangle in the xz-plane which is then \"rotated\" by the `ortho()` function.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 23,
      "score": 34.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    }
  ],
  "scraped_at": "2025-06-10T09:50:43.108403"
}
{
  "topic_metadata": {
    "id": 3111,
    "title": "How to generate HTML without the header?",
    "slug": "how-to-generate-html-without-the-header",
    "posts_count": 2,
    "created_at": "2025-03-05T08:15:50.791Z",
    "last_posted_at": "2025-03-09T14:00:37.558Z",
    "views": 73,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "html"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 98
  },
  "posts": [
    {
      "id": 9396,
      "post_number": 1,
      "username": "Chrysoberyl",
      "name": "",
      "created_at": "2025-03-05T08:15:50.895Z",
      "updated_at": "2025-03-05T08:16:33.953Z",
      "cooked": "<p>Is there a way to generate HTML from typst without the header? (i.e. without <code>&lt;head&gt;...&lt;/head&gt;</code> tags and only the content inside <code>&lt;body&gt;...&lt;/body&gt;</code>)</p>\n<p>I’m writing a typst-based blog preprocessor, and this would be very convenient.</p>",
      "raw": "Is there a way to generate HTML from typst without the header? (i.e. without `<head>...</head>` tags and only the content inside `<body>...</body>`)\n\nI'm writing a typst-based blog preprocessor, and this would be very convenient.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 21.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1277
    },
    {
      "id": 9520,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-09T14:00:37.558Z",
      "updated_at": "2025-03-09T14:00:37.558Z",
      "cooked": "<p>Not yet, but it’s planned. The current HTML support is still very rudimentary – enough to test it and get a feel for it, but lacking features for various specific use cases.</p>\n<p>If you don’t want to wait, you’d need to find the <code>&lt;body&gt;</code> and <code>&lt;/body&gt;</code> tags in the document to extract the content in this way.</p>",
      "raw": "Not yet, but it's planned. The current HTML support is still very rudimentary -- enough to test it and get a feel for it, but lacking features for various specific use cases.\n\nIf you don't want to wait, you'd need to find the `<body>` and `</body>` tags in the document to extract the content in this way.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:50:42.377811"
}
{
  "topic_metadata": {
    "id": 3112,
    "title": "How to add padding between table cells under a rowspan cell?",
    "slug": "how-to-add-padding-between-table-cells-under-a-rowspan-cell",
    "posts_count": 6,
    "created_at": "2025-03-05T09:47:45.237Z",
    "last_posted_at": "2025-03-06T16:26:53.363Z",
    "views": 87,
    "like_count": 2,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "tables"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 453
  },
  "posts": [
    {
      "id": 9401,
      "post_number": 1,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-03-05T09:47:45.534Z",
      "updated_at": "2025-03-06T16:26:26.080Z",
      "cooked": "<p>I’m trying to produce publication-quality tables looking like this:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/20458e70108f023ddf6274011cd87866061b990b.png\" data-download-href=\"https://forum.typst.app/uploads/default/20458e70108f023ddf6274011cd87866061b990b\" title=\"Screenshot 2025-03-05 at 10.42.40\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/20458e70108f023ddf6274011cd87866061b990b_2_690x332.png\" alt=\"Screenshot 2025-03-05 at 10.42.40\" data-base62-sha1=\"4BuiMx9cXuDxu2WthHSLInzi5nB\" width=\"690\" height=\"332\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/20458e70108f023ddf6274011cd87866061b990b_2_690x332.png, https://forum.typst.app/uploads/default/optimized/2X/2/20458e70108f023ddf6274011cd87866061b990b_2_1035x498.png 1.5x, https://forum.typst.app/uploads/default/original/2X/2/20458e70108f023ddf6274011cd87866061b990b.png 2x\" data-dominant-color=\"E1E1E1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-03-05 at 10.42.40</span><span class=\"informations\">1142×550 71.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>So far I was able to merge some cells and fiddle with conditional rule widths, to some extent, but when I set a non-zero stroke at the bottom of my merged cells (under “Bar” and “Baz”) I can’t find a way to leave some empty padding to visually separate the merged cells. Any pointers would be helpful, thanks.</p>",
      "raw": "I'm trying to produce publication-quality tables looking like this:\n\n![Screenshot 2025-03-05 at 10.42.40|690x332](upload://4BuiMx9cXuDxu2WthHSLInzi5nB.png)\n\nSo far I was able to merge some cells and fiddle with conditional rule widths, to some extent, but when I set a non-zero stroke at the bottom of my merged cells (under \"Bar\" and \"Baz\") I can't find a way to leave some empty padding to visually separate the merged cells. Any pointers would be helpful, thanks.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 179.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 9402,
      "post_number": 2,
      "username": "Electron_Wizard",
      "name": "Electron Wizard",
      "created_at": "2025-03-05T09:50:48.790Z",
      "updated_at": "2025-03-05T09:50:48.790Z",
      "cooked": "<p>Could you provide a working example please?</p>",
      "raw": "Could you provide a working example please?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 997
    },
    {
      "id": 9406,
      "post_number": 3,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-03-05T10:54:00.808Z",
      "updated_at": "2025-03-05T10:54:32.605Z",
      "cooked": "<p>Here it is:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let tabledata = (\n\t([123], [234], [345], [456], [567], [678]),\n\t([123], [234], [345], [456], [567], [678]),\n\t([123], [234], [345], [456], [567], [678]),\n\t([123], [234], [345], [456], [567], [678]),\n)\n\n#let framing(stroke) = (x, y) =&gt; {\n\t(\n\t\tleft: 0pt,\n\t\tright: 0pt,\n\t\ttop: {\n\t\t\tif y in (0, 2, -1) { stroke }\n\t\t\telse if (y == 1) { stroke * 0 }\n\t\t\telse { stroke * 0.5 }\n\t\t},\n\t\tbottom: stroke,\n\t)\n}\n\n#align(center)[\n\t#table(\n\t\tcolumns: 6,\n\t\tstroke: framing(1pt),\n\t\t[Foo],\n\t\ttable.cell(colspan: 2, stroke: (bottom: red + 1pt))[Bar],\n\t\ttable.cell(colspan: 2, stroke: (bottom: blue + 1pt))[Baz],\n\t\t[Qux],\n\t\t..tabledata.flatten()\n\t)\n]\n</code></pre>\n<p>This yields:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/1/1f2dedcde3e022bfc0858d0b9f96872dfabb0ce9.png\" data-download-href=\"https://forum.typst.app/uploads/default/1f2dedcde3e022bfc0858d0b9f96872dfabb0ce9\" title=\"Screenshot 2025-03-05 at 11.50.59\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/1/1f2dedcde3e022bfc0858d0b9f96872dfabb0ce9_2_690x387.png\" alt=\"Screenshot 2025-03-05 at 11.50.59\" data-base62-sha1=\"4rPcDAxhJhNieZOEQPqdb1vCawx\" width=\"690\" height=\"387\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/1/1f2dedcde3e022bfc0858d0b9f96872dfabb0ce9_2_690x387.png, https://forum.typst.app/uploads/default/optimized/2X/1/1f2dedcde3e022bfc0858d0b9f96872dfabb0ce9_2_1035x580.png 1.5x, https://forum.typst.app/uploads/default/original/2X/1/1f2dedcde3e022bfc0858d0b9f96872dfabb0ce9.png 2x\" data-dominant-color=\"E6E5E6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-03-05 at 11.50.59</span><span class=\"informations\">1122×630 62.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I’m looking for a way to introduce a small gap between the red and blue lines.</p>",
      "raw": "Here it is:\n\n```typ\n#let tabledata = (\n\t([123], [234], [345], [456], [567], [678]),\n\t([123], [234], [345], [456], [567], [678]),\n\t([123], [234], [345], [456], [567], [678]),\n\t([123], [234], [345], [456], [567], [678]),\n)\n\n#let framing(stroke) = (x, y) => {\n\t(\n\t\tleft: 0pt,\n\t\tright: 0pt,\n\t\ttop: {\n\t\t\tif y in (0, 2, -1) { stroke }\n\t\t\telse if (y == 1) { stroke * 0 }\n\t\t\telse { stroke * 0.5 }\n\t\t},\n\t\tbottom: stroke,\n\t)\n}\n\n#align(center)[\n\t#table(\n\t\tcolumns: 6,\n\t\tstroke: framing(1pt),\n\t\t[Foo],\n\t\ttable.cell(colspan: 2, stroke: (bottom: red + 1pt))[Bar],\n\t\ttable.cell(colspan: 2, stroke: (bottom: blue + 1pt))[Baz],\n\t\t[Qux],\n\t\t..tabledata.flatten()\n\t)\n]\n```\n\nThis yields:\n\n![Screenshot 2025-03-05 at 11.50.59|690x387](upload://4rPcDAxhJhNieZOEQPqdb1vCawx.png)\n\nI'm looking for a way to introduce a small gap between the red and blue lines.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 29.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 9415,
      "post_number": 4,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-05T14:59:36.461Z",
      "updated_at": "2025-03-05T15:01:17.404Z",
      "cooked": "<p>You can use a <code>column-gutter</code> to introduce the small gap between the lines below “Bar” and “Baz”. For the regular lines you would then have to use <code>table.hline</code> which ignores the gutter. This does not feel like a particularly elegant solution but it works for your specific use case. If you want to make the stroke of the horizontal lines adjustable, just turn <code>table-lines</code> into a function.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let tabledata = (\n\t([123], [234], [345], [456], [567], [678]),\n\t([123], [234], [345], [456], [567], [678]),\n\t([123], [234], [345], [456], [567], [678]),\n\t([123], [234], [345], [456], [567], [678]),\n)\n\n#let table-lines = (\n  table.hline(y: 0),\n  table.hline(y: 2),\n  ..range(1, tabledata.len()).map(i =&gt; table.hline(y: 2 + i, stroke: 0.5pt)),\n  table.hline(y: 2 + tabledata.len()),\n)\n\n#let framing(stroke) = (x, y) =&gt; (\n  bottom: if (y == 0) { stroke }\n)\n\n#align(center)[\n  #table(\n    columns: 6,\n    column-gutter: 0.5em,\n    stroke: framing(0.5pt),\n    table.header(\n      table.cell(rowspan: 2, [Foo]),\n      table.cell(colspan: 2, [Bar]),\n      table.cell(colspan: 2, [Foo]),\n      table.cell(rowspan: 2, [Qux]),\n      [abc], [xyz], [abc], [xyz]\n    ),\n    ..tabledata.flatten(),\n    ..table-lines\n  )\n]\n</code></pre>",
      "raw": "You can use a `column-gutter` to introduce the small gap between the lines below \"Bar\" and \"Baz\". For the regular lines you would then have to use `table.hline` which ignores the gutter. This does not feel like a particularly elegant solution but it works for your specific use case. If you want to make the stroke of the horizontal lines adjustable, just turn `table-lines` into a function.\n\n```typ\n#let tabledata = (\n\t([123], [234], [345], [456], [567], [678]),\n\t([123], [234], [345], [456], [567], [678]),\n\t([123], [234], [345], [456], [567], [678]),\n\t([123], [234], [345], [456], [567], [678]),\n)\n\n#let table-lines = (\n  table.hline(y: 0),\n  table.hline(y: 2),\n  ..range(1, tabledata.len()).map(i => table.hline(y: 2 + i, stroke: 0.5pt)),\n  table.hline(y: 2 + tabledata.len()),\n)\n\n#let framing(stroke) = (x, y) => (\n  bottom: if (y == 0) { stroke }\n)\n\n#align(center)[\n  #table(\n    columns: 6,\n    column-gutter: 0.5em,\n    stroke: framing(0.5pt),\n    table.header(\n      table.cell(rowspan: 2, [Foo]),\n      table.cell(colspan: 2, [Bar]),\n      table.cell(colspan: 2, [Foo]),\n      table.cell(rowspan: 2, [Qux]),\n      [abc], [xyz], [abc], [xyz]\n    ),\n    ..tabledata.flatten(),\n    ..table-lines\n  )\n]\n```",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 18,
      "score": 53.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 9418,
      "post_number": 5,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-03-05T15:52:22.804Z",
      "updated_at": "2025-03-05T15:52:22.804Z",
      "cooked": "<p>Oh wow, I would have not found that by myself! Thanks.</p>",
      "raw": "Oh wow, I would have not found that by myself! Thanks.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 9450,
      "post_number": 6,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-06T16:26:53.363Z",
      "updated_at": "2025-03-06T16:26:53.363Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/mathieu\">@Mathieu</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>For future posts, make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Mathieu, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nFor future posts, make sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:50:41.660004"
}
{
  "topic_metadata": {
    "id": 3114,
    "title": "How to use different font weight for CJK for Strong Emphasis?",
    "slug": "how-to-use-different-font-weight-for-cjk-for-strong-emphasis",
    "posts_count": 4,
    "created_at": "2025-03-05T10:11:03.677Z",
    "last_posted_at": "2025-03-06T16:24:27.416Z",
    "views": 105,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "TheColdPot",
    "tags": [
      "styling",
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 189
  },
  "posts": [
    {
      "id": 9404,
      "post_number": 1,
      "username": "TheColdPot",
      "name": "TheColdPot",
      "created_at": "2025-03-05T10:11:03.828Z",
      "updated_at": "2025-03-09T14:31:43.933Z",
      "cooked": "<p>In Chinese writing, we usually use Sans font for strong, instead of a weight delta, and I want a different font weight for those Chinese characters. How can I achieve this? (Chinese in sans already seems “strong”. There is no need for further weight delta.)</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/740e005e67e38fb6141491eba5f94a2cd6fa9123.png\" alt=\"image\" data-base62-sha1=\"gyFnQ5Tu2ozPjxTiNl2Pahae7sL\" width=\"68\" height=\"39\"><br>\n(Too bold, because they share the same font weight with latin characters)<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/7/7f3c9bc49c7559cd5f1ed9566e9545a43136c5e4.png\" alt=\"image\" data-base62-sha1=\"i9AuurW1uq8fSjtNb5aD0nO0BU0\" width=\"83\" height=\"40\"><br>\n(Desired effect: CJK characters are at <code>Regular</code> weight, while latin characters are <code>Bold</code>.)</p>",
      "raw": "In Chinese writing, we usually use Sans font for strong, instead of a weight delta, and I want a different font weight for those Chinese characters. How can I achieve this? (Chinese in sans already seems \"strong\". There is no need for further weight delta.)\n\n![image|136x79, 50%](upload://gyFnQ5Tu2ozPjxTiNl2Pahae7sL.png)\n(Too bold, because they share the same font weight with latin characters)\n![image|166x80, 50%](upload://i9AuurW1uq8fSjtNb5aD0nO0BU0.png)\n(Desired effect: CJK characters are at `Regular` weight, while latin characters are `Bold`.)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 176.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 495
    },
    {
      "id": 9414,
      "post_number": 2,
      "username": "ssotoen",
      "name": "",
      "created_at": "2025-03-05T14:03:33.105Z",
      "updated_at": "2025-03-05T14:03:33.105Z",
      "cooked": "<p>You could use a regular expression to only select Chinese characters:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show strong: it =&gt; {\n  show regex(\"\\p{Han}\"): it =&gt; {\n    set strong(delta: 0)\n    set text(font: ...)\n    it\n  }\n  it\n}\n</code></pre>",
      "raw": "You could use a regular expression to only select Chinese characters:\n\n```typ\n#show strong: it => {\n  show regex(\"\\p{Han}\"): it => {\n    set strong(delta: 0)\n    set text(font: ...)\n    it\n  }\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 5.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 331
    },
    {
      "id": 9434,
      "post_number": 3,
      "username": "TheColdPot",
      "name": "TheColdPot",
      "created_at": "2025-03-06T08:47:32.388Z",
      "updated_at": "2025-03-06T08:47:32.388Z",
      "cooked": "<p>This kinda works. However, settings <code>delta: 0</code> doesn’t seem to work. I worked with setting <code>text(weight: 100)</code> instead.</p>",
      "raw": "This kinda works. However, settings `delta: 0` doesn't seem to work. I worked with setting `text(weight: 100)` instead.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 5.4,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 495
    },
    {
      "id": 9449,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-06T16:24:27.416Z",
      "updated_at": "2025-03-06T16:24:27.416Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/thecoldpot\">@TheColdPot</a>, welcome to the forum! I’ve changed your post’s title to a question in order to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>In addition, I’ve marked your answer as a solution. Feel free to let us know if you have further questions. <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @TheColdPot, welcome to the forum! I’ve changed your post’s title to a question in order to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nIn addition, I've marked your answer as a solution. Feel free to let us know if you have further questions. :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 3.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:50:40.807726"
}
{
  "topic_metadata": {
    "id": 3121,
    "title": "How to set a 3 colors bar/grid for underline stroke",
    "slug": "how-to-set-a-3-colors-bar-grid-for-underline-stroke",
    "posts_count": 5,
    "created_at": "2025-03-05T22:58:16.884Z",
    "last_posted_at": "2025-03-06T08:44:15.810Z",
    "views": 58,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sitandr",
    "tags": [
      "scripting",
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 443
  },
  "posts": [
    {
      "id": 9423,
      "post_number": 1,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-05T22:58:17.026Z",
      "updated_at": "2025-03-09T14:28:38.345Z",
      "cooked": "<p>I would like to have as underline funktion a color bar with 3 lines.</p>\n<p>The snippet blow creates ony the green line</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/b/bb396a49ae1c5a60574a4728d783b9dbfec96b6f.png\" alt=\"image\" data-base62-sha1=\"qIgivdDiZwpuWeJeIp85CdjDbEX\" width=\"263\" height=\"130\"></p>\n<details>\n<summary>\nSummary</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show underline: it =&gt; {\n  grid(\n  rows: (auto, auto, auto),\n  //align: center+bottom,\n  stroke: none,\n  gutter: 1,\n  it,\n  line(stroke: red),\n  line(stroke: blue),\n  line(stroke: green),\n)\n}\n</code></pre>\n</details>\n<p>Is my Idea possible with typst?</p>",
      "raw": "I would like to have as underline funktion a color bar with 3 lines.\n\nThe snippet blow creates ony the green line\n\n![image|263x130](upload://qIgivdDiZwpuWeJeIp85CdjDbEX.png)\n\n[details=\"Summary\"]\n```typst\n#show underline: it => {\n  grid(\n  rows: (auto, auto, auto),\n  //align: center+bottom,\n  stroke: none,\n  gutter: 1,\n  it,\n  line(stroke: red),\n  line(stroke: blue),\n  line(stroke: green),\n)\n}\n```\n[/details]\n\nIs my Idea possible with typst?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 115.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    },
    {
      "id": 9425,
      "post_number": 2,
      "username": "sitandr",
      "name": "sitandr",
      "created_at": "2025-03-05T23:52:06.099Z",
      "updated_at": "2025-03-05T23:52:06.099Z",
      "cooked": "<p>I have two options for you.</p>\n<p>Unfortunately, recursive show rules are still kind of cursed, so if I try to use underline inside show rule for underline, it would be pretty bad. Even several clever tricks I know didn’t save me there.</p>\n<p>So, there are two options: either get rid of show rule or use element other than underline inside the rule:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// creating custom function for multiunderline\n#let underbrow(it) = {\n  underline(underline(underline(it, stroke: red), stroke: yellow, offset: 1.5pt), stroke: blue, offset: 2pt)\n}\n\n#underbrow[Hello world!]\n\n// creating show rule with boxes' lower edges\n#show underline: it =&gt; {\n    let cbox(color, body) = {\n      box(\n        body,\n        stroke: (bottom: color + 1pt),\n        inset: (bottom: 1pt))\n    }\n    \n    cbox(blue, cbox(yellow, cbox(red, it.body)))\n}\n\n#underline[Hello world!]\n</code></pre>\n<p>Here is the result, of course, pretty twickable in both cases:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/f/f51db23c56cabbe2fdeff8856326443d986cd6a3.png\" alt=\"image\" data-base62-sha1=\"yYoBskXxnQIxpVwskWh0aZgm4P9\" width=\"336\" height=\"185\"></p>\n<h1><a name=\"p-9425-drawbacks-1\" class=\"anchor\" href=\"#p-9425-drawbacks-1\"></a>Drawbacks</h1>\n<ol>\n<li>Custom function: you will have to replace all <code>underline</code> in your document with this function. That includes all files you <code>include</code> or <code>import</code>. If underlining is done by a package, it can’t be tweaked this way.</li>\n<li>Show rule: unfortunately, <code>box</code> is not <code>underline</code>. For example, it is not breakable. This underline can’t easily evade the spaces. You can do it, of course, with some magic by splitting input by words, and putting each word in a box separately, but it would still be limited.</li>\n</ol>\n<p>Hope that helps!</p>",
      "raw": "I have two options for you.\n\nUnfortunately, recursive show rules are still kind of cursed, so if I try to use underline inside show rule for underline, it would be pretty bad. Even several clever tricks I know didn't save me there.\n\nSo, there are two options: either get rid of show rule or use element other than underline inside the rule:\n\n```typ\n// creating custom function for multiunderline\n#let underbrow(it) = {\n  underline(underline(underline(it, stroke: red), stroke: yellow, offset: 1.5pt), stroke: blue, offset: 2pt)\n}\n\n#underbrow[Hello world!]\n\n// creating show rule with boxes' lower edges\n#show underline: it => {\n    let cbox(color, body) = {\n      box(\n        body,\n        stroke: (bottom: color + 1pt),\n        inset: (bottom: 1pt))\n    }\n    \n    cbox(blue, cbox(yellow, cbox(red, it.body)))\n}\n\n#underline[Hello world!]\n```\n\nHere is the result, of course, pretty twickable in both cases:\n![image|336x185](upload://yYoBskXxnQIxpVwskWh0aZgm4P9.png)\n\n\n# Drawbacks\n\n1. Custom function: you will have to replace all `underline` in your document with this function. That includes all files you `include` or `import`. If underlining is done by a package, it can't be tweaked this way.\n2. Show rule: unfortunately, `box` is not `underline`. For example, it is not breakable. This underline can't easily evade the spaces. You can do it, of course, with some magic by splitting input by words, and putting each word in a box separately, but it would still be limited.\n\nHope that helps!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 19
    },
    {
      "id": 9428,
      "post_number": 3,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-06T00:07:46.084Z",
      "updated_at": "2025-03-06T00:07:46.084Z",
      "cooked": "<p>Thank you <a class=\"mention\" href=\"/u/sitandr\">@sitandr</a>.</p>\n<p>I choose the second one and keep the Drawbacks in mind.</p>\n<aside class=\"quote no-group\" data-username=\"sitandr\" data-post=\"2\" data-topic=\"3121\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/B7441C/48.png\" class=\"avatar\"> sitandr:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">#show underline: it =&gt; {\n    let cbox(color, body) = {\n      box(\n        body,\n        stroke: (bottom: color + 1pt),\n        inset: (bottom: 1pt))\n    }\n    \n    cbox(blue, cbox(yellow, cbox(red, it.body)))\n}\n\n#underline[Hello world!]\n</code></pre>\n</blockquote>\n</aside>",
      "raw": "Thank you @sitandr.\n\nI choose the second one and keep the Drawbacks in mind.\n\n[quote=\"sitandr, post:2, topic:3121\"]\n```\n#show underline: it => {\n    let cbox(color, body) = {\n      box(\n        body,\n        stroke: (bottom: color + 1pt),\n        inset: (bottom: 1pt))\n    }\n    \n    cbox(blue, cbox(yellow, cbox(red, it.body)))\n}\n\n#underline[Hello world!]\n```\n[/quote]",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 24,
      "score": 4.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    },
    {
      "id": 9429,
      "post_number": 4,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-03-06T07:08:57.174Z",
      "updated_at": "2025-03-06T07:08:57.174Z",
      "cooked": "<p>I expected this to work better, but I’ll leave it here in the hopes that someone more familiar with gradients can get it working properly.  The idea was to underline with a stroke that uses a vertical gradient with the three target colors.  For some reason red is always dominant and blue is always the least present.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#underline(\n  stroke: (\n    paint: gradient.linear(red, blue, green, angle: 90deg).sharp(3),\n    thickness: 3pt\n  ),\n    offset: 2pt\n)[Once it's gone, it's gone.]\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/6/60c8682789b824ccfe0545b348d96bdd202daf10.png\" alt=\"image\" data-base62-sha1=\"dObcPbYDLh5pVSqWbD9PvwwOX60\" width=\"580\" height=\"96\"></p>",
      "raw": "I expected this to work better, but I'll leave it here in the hopes that someone more familiar with gradients can get it working properly.  The idea was to underline with a stroke that uses a vertical gradient with the three target colors.  For some reason red is always dominant and blue is always the least present.\n\n```typ\n#underline(\n  stroke: (\n    paint: gradient.linear(red, blue, green, angle: 90deg).sharp(3),\n    thickness: 3pt\n  ),\n    offset: 2pt\n)[Once it's gone, it's gone.]\n```\n![image|580x96](upload://dObcPbYDLh5pVSqWbD9PvwwOX60.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 9433,
      "post_number": 5,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-06T08:44:15.810Z",
      "updated_at": "2025-03-06T08:44:15.810Z",
      "cooked": "<p>This looks like it is related to  <a href=\"https://github.com/typst/typst/issues/5799\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Gradient Rendering Issue with line/underline Functions Using ttb Direction in Typst · Issue #5799 · typst/typst · GitHub</a>.</p>",
      "raw": "This looks like it is related to  https://github.com/typst/typst/issues/5799.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 23.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    }
  ],
  "scraped_at": "2025-06-10T09:50:40.067967"
}
{
  "topic_metadata": {
    "id": 3126,
    "title": "Why does Typst allow minus signs in identifiers?",
    "slug": "why-does-typst-allow-minus-signs-in-identifiers",
    "posts_count": 10,
    "created_at": "2025-03-06T10:46:24.777Z",
    "last_posted_at": "2025-03-12T15:13:53.603Z",
    "views": 223,
    "like_count": 9,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "xkevio",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 6,
    "word_count": 956
  },
  "posts": [
    {
      "id": 9437,
      "post_number": 1,
      "username": "AprilGrimoire",
      "name": "AprilGrimoire",
      "created_at": "2025-03-06T10:46:24.966Z",
      "updated_at": "2025-03-06T10:46:24.966Z",
      "cooked": "<p>Hi. It seems Typst allows minus signs in variable names.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@local/commute:0.2.0\": node, arr, commutative-diagram\n</code></pre>\n<p>How is this differentiated from regular minus operations? Is it true that I need to add spaces around operators? I think that’s not true since I use <code>/</code> without spaces often. What’s the exact rules controlling this bizarre behavior?</p>",
      "raw": "Hi. It seems Typst allows minus signs in variable names.\n\n```typ\n#import \"@local/commute:0.2.0\": node, arr, commutative-diagram\n```\n\nHow is this differentiated from regular minus operations? Is it true that I need to add spaces around operators? I think that's not true since I use `/` without spaces often. What's the exact rules controlling this bizarre behavior?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 61,
      "score": 212.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1309
    },
    {
      "id": 9439,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2025-03-06T12:14:10.887Z",
      "updated_at": "2025-03-06T12:14:10.887Z",
      "cooked": "<p>It’s not bizarre, it’s just the naming convention Typst embraces called “kebab-case” because it seemed a little nicer for a typesetting system than the usual “snake_case”.</p>\n<p>It is differentiated the same way as most operations are: To refer to a variable with a hyphen in its name, you need to be in code mode and spaces around the hyphen aren’t needed, the parser can take care of this.</p>",
      "raw": "It's not bizarre, it's just the naming convention Typst embraces called \"kebab-case\" because it seemed a little nicer for a typesetting system than the usual \"snake_case\". \n\nIt is differentiated the same way as most operations are: To refer to a variable with a hyphen in its name, you need to be in code mode and spaces around the hyphen aren't needed, the parser can take care of this.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 4,
      "reads": 60,
      "score": 77.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 9492,
      "post_number": 3,
      "username": "AprilGrimoire",
      "name": "AprilGrimoire",
      "created_at": "2025-03-08T09:43:50.746Z",
      "updated_at": "2025-03-08T09:43:50.746Z",
      "cooked": "<p>Interesting to know that only <code>-</code> isn’t treated the same as other infix operators.</p>",
      "raw": "Interesting to know that only `-` isn't treated the same as other infix operators.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 13.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1309
    },
    {
      "id": 9545,
      "post_number": 4,
      "username": "rudy",
      "name": "Michael Newman Fortunato",
      "created_at": "2025-03-10T04:31:22.115Z",
      "updated_at": "2025-03-10T04:31:30.528Z",
      "cooked": "<p>Was rationale given for adopting this convention? All my typst functions<br>\nare still in snake case. It feels bizzare to have an identifier with - in it, so was wondering why Typst made this the convention.</p>",
      "raw": "Was rationale given for adopting this convention? All my typst functions \nare still in snake case. It feels bizzare to have an identifier with - in it, so was wondering why Typst made this the convention.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 34,
      "score": 26.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1242
    },
    {
      "id": 9657,
      "post_number": 5,
      "username": "DNF",
      "name": "",
      "created_at": "2025-03-11T20:18:45.796Z",
      "updated_at": "2025-03-11T20:22:22.106Z",
      "cooked": "<p>It is less bizarre if you remember that ‘<code>-</code>’ is actually a <em>hyphen</em>, which is very commonly used in many languages to combine words.</p>\n<p>There is also precedent in languages like lisp and css for hyphenated identifiers. Personally, I like it, it looks better than underscore, and it’s imo probably the <em>most</em> natural way to create compound words, since that’s how you do it in human language.</p>",
      "raw": "It is less bizarre if you remember that '`-`' is actually a *hyphen*, which is very commonly used in many languages to combine words.\n\nThere is also precedent in languages like lisp and css for hyphenated identifiers. Personally, I like it, it looks better than underscore, and it's imo probably the *most* natural way to create compound words, since that's how you do it in human language.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 11.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 711
    },
    {
      "id": 9658,
      "post_number": 6,
      "username": "DNF",
      "name": "",
      "created_at": "2025-03-11T20:20:37.406Z",
      "updated_at": "2025-03-11T20:20:37.406Z",
      "cooked": "<p>Come to think of it, my own name contains a hyphen, so <em>I</em> would say it’s  an <em>extremely</em> natural part of an identifier!</p>",
      "raw": "Come to think of it, my own name contains a hyphen, so *I* would say it's  an *extremely* natural part of an identifier!",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 711
    },
    {
      "id": 9698,
      "post_number": 7,
      "username": "rudy",
      "name": "Michael Newman Fortunato",
      "created_at": "2025-03-12T13:03:04.676Z",
      "updated_at": "2025-03-12T13:03:14.361Z",
      "cooked": "<p>If we set aside the long-established convention of programming languages prohibiting hyphens in identifiers, I’d concede that hyphens might be the better choice over underscores for readability and alignment with natural language. However, coding languages have historically rejected this trend, and I think Typst made a misstep by breaking from it—even if, in theory, it’s a defensible move. Hyphenated identifiers in Typst code, like my-variable, don’t <em>feel</em> like traditional ‘code’ to me; they add a subtle layer of friction for programmers accustomed to underscores, making the transition less intuitive. It’s not a dealbreaker—hardly the end of the world—but I’m sticking with underscores in silent protest, hoping the Typst community might eventually lean back toward convention. I’ll keep it up until a colleague I’m collaborating with on a Typst document calls me out and forces the issue.</p>",
      "raw": "If we set aside the long-established convention of programming languages prohibiting hyphens in identifiers, I’d concede that hyphens might be the better choice over underscores for readability and alignment with natural language. However, coding languages have historically rejected this trend, and I think Typst made a misstep by breaking from it—even if, in theory, it’s a defensible move. Hyphenated identifiers in Typst code, like my-variable, don’t *feel* like traditional 'code' to me; they add a subtle layer of friction for programmers accustomed to underscores, making the transition less intuitive. It’s not a dealbreaker—hardly the end of the world—but I’m sticking with underscores in silent protest, hoping the Typst community might eventually lean back toward convention. I’ll keep it up until a colleague I’m collaborating with on a Typst document calls me out and forces the issue.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 30.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1242
    },
    {
      "id": 9699,
      "post_number": 8,
      "username": "rudy",
      "name": "Michael Newman Fortunato",
      "created_at": "2025-03-12T13:06:37.293Z",
      "updated_at": "2025-03-12T13:07:06.166Z",
      "cooked": "<p>I’ll also add that as a marketing ploy, that is it easier for a newcomer to Typst with coding background to have that “a-ha!” moment of the power of combining markup with a programming language, if that programming language looks like other languages they have seen.</p>",
      "raw": "I'll also add that as a marketing ploy, that is it easier for a newcomer to Typst with coding background to have that \"a-ha!\" moment of the power of combining markup with a programming language, if that programming language looks like other languages they have seen.",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 20.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1242
    },
    {
      "id": 9700,
      "post_number": 9,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-03-12T13:52:58.207Z",
      "updated_at": "2025-03-12T14:08:20.356Z",
      "cooked": "<p>This seems to me to be clearly a personal preference.  When I think about identifiers I think about:</p>\n<ul>\n<li>Naming things whatever I want without following any kind of convention</li>\n<li>Camelcase</li>\n<li>Snake case</li>\n<li>Kebab case</li>\n<li>Are emojis supported?  What about UTF-8?</li>\n</ul>\n<p>I don’t see why using underscores is <em>more correct</em> than dashes.  Yes, there is a historical preference for them, but that was born from a time when it wasn’t even clear that ASCII would be the character encoding of choice going forward.  We aren’t restricted in the same way anymore.</p>\n<p>Also, as I understand it, Typst isn’t aiming to reduce the learning curve for programmers.  Some cherry-picked quotes from <a href=\"http://typst.app/home:\">typst.app/home:</a></p>\n<blockquote>\n<p>A more productive workflow for science.</p>\n</blockquote>\n<blockquote>\n<p>For Rocket Scientists.<br>\nAnd the rest of us, too.</p>\n</blockquote>\n<p>There is also this:</p>\n<blockquote>\n<p>uses familiar programming constructs instead of hard-to-understand macros.</p>\n</blockquote>\n<p>But that is directly contrasting Latex which I don’t think is written for programmers either.</p>\n<p>I’d also like to point out that the character we are talking about has many uses.  In the title of this post it is called a minus sign.  I have also heard people call it a hyphen, a stroke, or a dash.  The single character fulfills multiple roles.  Yes, it’s a bit annoying that you can end up with something like <code>#let x = num-a - 1</code>.  The same character has two completely different uses.  But that’s not the fault of Typst but of how (English) language uses that character (plus, how many characters do you want on your keyboard?).</p>\n<p>Anyways, that’s my opinion on this non-critical aspect of a typesetting system that I enjoy using.</p>\n<p><strong>Edit</strong>: For completeness, the standard used by Typst is <a href=\"http://www.unicode.org/reports/tr31/\" rel=\"noopener nofollow ugc\">uax31</a> (<a href=\"https://forum.typst.app/t/what-are-the-rules-for-identifiers-in-typst/665/2\">source forum post by kevio</a>).</p>",
      "raw": "This seems to me to be clearly a personal preference.  When I think about identifiers I think about:\n- Naming things whatever I want without following any kind of convention\n- Camelcase\n- Snake case\n- Kebab case\n- Are emojis supported?  What about UTF-8?\n\nI don't see why using underscores is _more correct_ than dashes.  Yes, there is a historical preference for them, but that was born from a time when it wasn't even clear that ASCII would be the character encoding of choice going forward.  We aren't restricted in the same way anymore.\n\nAlso, as I understand it, Typst isn't aiming to reduce the learning curve for programmers.  Some cherry-picked quotes from typst.app/home:\n>A more productive workflow for science.\n\n> For Rocket Scientists.\n> And the rest of us, too.\n\nThere is also this:\n> uses familiar programming constructs instead of hard-to-understand macros.\n\nBut that is directly contrasting Latex which I don't think is written for programmers either.\n\nI'd also like to point out that the character we are talking about has many uses.  In the title of this post it is called a minus sign.  I have also heard people call it a hyphen, a stroke, or a dash.  The single character fulfills multiple roles.  Yes, it's a bit annoying that you can end up with something like `#let x = num-a - 1`.  The same character has two completely different uses.  But that's not the fault of Typst but of how (English) language uses that character (plus, how many characters do you want on your keyboard?).\n\nAnyways, that's my opinion on this non-critical aspect of a typesetting system that I enjoy using.\n\n**Edit**: For completeness, the standard used by Typst is [uax31](http://www.unicode.org/reports/tr31/) ([source forum post by kevio](https://forum.typst.app/t/what-are-the-rules-for-identifiers-in-typst/665/2?u=gezepi)).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 23,
      "score": 59.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 9704,
      "post_number": 10,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-12T15:13:53.603Z",
      "updated_at": "2025-03-12T15:13:53.603Z",
      "cooked": "<p>Kebab case may be a bit niche but still, apart form the already mentioned CSS and Lisp it’s used at least in COBOL (hum), Forth and Raku (Perl 6), and also modern Lisp variants like Clojure. It has two great advantages:</p>\n<ul>\n<li>Easier to read than all the other options</li>\n<li>Easier to type than snake case (in most keyboard layouts you need shift for <code>_</code> but not for <code>-</code>)</li>\n</ul>\n<p>and one great downside:</p>\n<ul>\n<li>It’s ambiguous with subtraction in languages that have infix operators</li>\n</ul>\n<p>I personnally love the Typst solution, which is to require spaces around the minus operator in code. Because this makes code even <em>more</em> readable. I think the biggest issue with kebab case in Typst is the inconsistency in math mode where <code>#a-b</code> and <code>func(a-b: xxx)</code> are parsed as one word but <code>a-b</code> alone is parsed as <code>a - b</code>. But it’s not a big deal either. I think the two benefits mentioned above make it well worth it.</p>",
      "raw": "Kebab case may be a bit niche but still, apart form the already mentioned CSS and Lisp it's used at least in COBOL (hum), Forth and Raku (Perl 6), and also modern Lisp variants like Clojure. It has two great advantages:\n\n* Easier to read than all the other options\n* Easier to type than snake case (in most keyboard layouts you need shift for `_` but not for `-`)\n\nand one great downside:\n\n* It's ambiguous with subtraction in languages that have infix operators\n\nI personnally love the Typst solution, which is to require spaces around the minus operator in code. Because this makes code even *more* readable. I think the biggest issue with kebab case in Typst is the inconsistency in math mode where `#a-b` and `func(a-b: xxx)` are parsed as one word but `a-b` alone is parsed as `a - b`. But it's not a big deal either. I think the two benefits mentioned above make it well worth it.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:50:39.342070"
}
{
  "topic_metadata": {
    "id": 3128,
    "title": "How can I ensure that the underbrace has no impact on the spacing of the elements above?",
    "slug": "how-can-i-ensure-that-the-underbrace-has-no-impact-on-the-spacing-of-the-elements-above",
    "posts_count": 2,
    "created_at": "2025-03-06T13:25:08.163Z",
    "last_posted_at": "2025-03-06T13:53:59.006Z",
    "views": 58,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 176
  },
  "posts": [
    {
      "id": 9441,
      "post_number": 1,
      "username": "DreamerPhi",
      "name": "",
      "created_at": "2025-03-06T13:25:08.318Z",
      "updated_at": "2025-03-06T13:25:08.318Z",
      "cooked": "<p>Hi,<br>\nIs there a way to ensure that the underbrace doesn’t impact the spacing of the formula above?<br>\nFor instance, I would like to have no space after the <code>1</code> with :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$underbrace(0...0,k) 1 underbrace(0...0,n+m-k-1)$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/4/4258cef0e0f6a837d287b6aeedd45b5f2a61ade9.png\" alt=\"Screenshot from 2025-03-06 14-24-25\" data-base62-sha1=\"9sVMC2zztrhRnko3UVHBhqpNdxL\" width=\"190\" height=\"76\"><br>\nThanks.</p>",
      "raw": "Hi,\nIs there a way to ensure that the underbrace doesn't impact the spacing of the formula above?\nFor instance, I would like to have no space after the `1` with :\n```typ\n$underbrace(0...0,k) 1 underbrace(0...0,n+m-k-1)$\n```\n![Screenshot from 2025-03-06 14-24-25|190x76](upload://9sVMC2zztrhRnko3UVHBhqpNdxL.png)\nThanks.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 110.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1251
    },
    {
      "id": 9442,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-06T13:53:59.006Z",
      "updated_at": "2025-03-06T13:55:21.887Z",
      "cooked": "<p>You can use the function <a href=\"https://typst.app/docs/reference/layout/place/\"><code>place()</code></a> for the annotation. The underbrace (or rather the content below) will then no longer affect the spacing of the formula above. If you want the annotation to be formatted as math, you need to reduce the font size since the equation inside the place function would otherwise use the same font size as your regular formula. I am not sure if the scaling factor is exactly 0.7 but it looked right at the first glance.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let annotation(body) = {\n  show math.equation: set text(size: 0.7em)\n  place(top + center, $body$)\n}\n\n$underbrace(0...0, k) 1 underbrace(0...0, annotation(n+m-k-1))$\n</code></pre>",
      "raw": "You can use the function [`place()`](https://typst.app/docs/reference/layout/place/) for the annotation. The underbrace (or rather the content below) will then no longer affect the spacing of the formula above. If you want the annotation to be formatted as math, you need to reduce the font size since the equation inside the place function would otherwise use the same font size as your regular formula. I am not sure if the scaling factor is exactly 0.7 but it looked right at the first glance.\n\n```typ\n#let annotation(body) = {\n  show math.equation: set text(size: 0.7em)\n  place(top + center, $body$)\n}\n\n$underbrace(0...0, k) 1 underbrace(0...0, annotation(n+m-k-1))$\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 25.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    }
  ],
  "scraped_at": "2025-06-10T09:50:38.617597"
}
{
  "topic_metadata": {
    "id": 3129,
    "title": "How to use `set page(..)` without adding an unwanted pagebreak?",
    "slug": "how-to-use-set-page-without-adding-an-unwanted-pagebreak",
    "posts_count": 6,
    "created_at": "2025-03-06T14:05:43.579Z",
    "last_posted_at": "2025-03-06T18:24:45.244Z",
    "views": 304,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "sijo",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 916
  },
  "posts": [
    {
      "id": 9443,
      "post_number": 1,
      "username": "Yannick_Lapointe",
      "name": "Yannick Lapointe",
      "created_at": "2025-03-06T14:05:43.696Z",
      "updated_at": "2025-03-06T16:21:39.235Z",
      "cooked": "<p>I am working on a template for a thesis in book style, meaning the chapters (headings level 1) always start on an odd page and also that the page numbering is located in the header. I also need to not number/have any header/footer for the empty pages.</p>\n<p>My problem comes after the outline page as I am changing the page numbering from lower case roman to Arabic numbering using a <code>set page(...)</code> statement which automatically adds a page break. It is also important to note that I detect if a page is empty using labels added in a custom “detectable” page break function. Since the page break added by the <code>set page(...)</code> statement is not a detectable one, the page is numbered and has a header even if it is empty.</p>\n<p>Here is what my code looks like :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// Footer formatting function\n#let footer-numbering(format: \"1\", book: true) = context{\n  // If empty page no footer\n  if is-page-empty() {\n    return\n  }\n  // If in book style, footer numbering only on first page of chapter\n  if book {\n    let i = here().page()\n    if query(heading.where(level: 1)).any(it =&gt; it.location().page() == i) {\n      align(center, numbering(format, counter(page).get().at(0)))\n    }\n  } else {\n    // Numbering in footer on all pages otherwise\n    align(center, numbering(format, counter(page).get().at(0)))\n  }\n}\n\n// First heading level = chapters\nshow heading.where(level: 1): it =&gt; {\n  detectable-pagebreak()\n  set text(font: \"IBM Plex Sans\", weight: \"medium\", size: 20pt)\n  if it.body in special-chapters {\n    block(spacing: 1.5em, upper(it))\n  } else {\n    stack(\n      dir: ttb,\n      spacing: 15pt,\n      align(right, text(size: 40pt, counter(heading).display())),\n      line(length: 100%, stroke: .5pt),\n      upper(it.body),\n      line(length: 100%, stroke: .5pt)\n     )\n    v(2em)\n  }\n}\n\nset page(footer: footer-numbering(format: \"i\", book: book))\n\n// outline code is here\n\nset page(footer: footer-numbering(book: book))\ncounter(page).update(1)\n\n// start of first chapter\n</code></pre>\n<p>I am aware of <a href=\"https://forum.typst.app/t/how-to-change-the-page-header-without-causing-a-pagebreak/545\">this post</a> on a similar issue but I still cannot find a solution.</p>",
      "raw": "I am working on a template for a thesis in book style, meaning the chapters (headings level 1) always start on an odd page and also that the page numbering is located in the header. I also need to not number/have any header/footer for the empty pages.\n\nMy problem comes after the outline page as I am changing the page numbering from lower case roman to Arabic numbering using a `set page(...)` statement which automatically adds a page break. It is also important to note that I detect if a page is empty using labels added in a custom \"detectable\" page break function. Since the page break added by the `set page(...)` statement is not a detectable one, the page is numbered and has a header even if it is empty. \n\nHere is what my code looks like : \n```typ\n// Footer formatting function\n#let footer-numbering(format: \"1\", book: true) = context{\n  // If empty page no footer\n  if is-page-empty() {\n    return\n  }\n  // If in book style, footer numbering only on first page of chapter\n  if book {\n    let i = here().page()\n    if query(heading.where(level: 1)).any(it => it.location().page() == i) {\n      align(center, numbering(format, counter(page).get().at(0)))\n    }\n  } else {\n    // Numbering in footer on all pages otherwise\n    align(center, numbering(format, counter(page).get().at(0)))\n  }\n}\n\n// First heading level = chapters\nshow heading.where(level: 1): it => {\n  detectable-pagebreak()\n  set text(font: \"IBM Plex Sans\", weight: \"medium\", size: 20pt)\n  if it.body in special-chapters {\n    block(spacing: 1.5em, upper(it))\n  } else {\n    stack(\n      dir: ttb,\n      spacing: 15pt,\n      align(right, text(size: 40pt, counter(heading).display())),\n      line(length: 100%, stroke: .5pt),\n      upper(it.body),\n      line(length: 100%, stroke: .5pt)\n     )\n    v(2em)\n  }\n}\n\nset page(footer: footer-numbering(format: \"i\", book: book))\n\n// outline code is here\n\nset page(footer: footer-numbering(book: book))\ncounter(page).update(1)\n\n// start of first chapter\n```\n\nI am aware of [this post](https://forum.typst.app/t/how-to-change-the-page-header-without-causing-a-pagebreak/545) on a similar issue but I still cannot find a solution.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 1453.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 460
    },
    {
      "id": 9444,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-06T14:29:32.678Z",
      "updated_at": "2025-03-06T14:29:32.678Z",
      "cooked": "<p>Could you post a minimal but complete example that shows what you have currently? I cannot run your code as it is, and it’s also a bit hard to guess what you want with the book style parameter and the comment mentioning numbering on the first page of each chapter. Maybe it’s irrelevant to your question? Then a simple code example without all of this would help.</p>",
      "raw": "Could you post a minimal but complete example that shows what you have currently? I cannot run your code as it is, and it's also a bit hard to guess what you want with the book style parameter and the comment mentioning numbering on the first page of each chapter. Maybe it's irrelevant to your question? Then a simple code example without all of this would help.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 7.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9446,
      "post_number": 3,
      "username": "Yannick_Lapointe",
      "name": "Yannick Lapointe",
      "created_at": "2025-03-06T14:55:48.394Z",
      "updated_at": "2025-03-06T16:21:55.759Z",
      "cooked": "<p>Sorry for this confusion, my code is pretty long so I tried to only give the relevant parts. Here is a simpler example :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// Check if a page is empty\n#let is-page-empty() = {\n  let page-num = here().page()\n  query(&lt;empty-page-start&gt;)\n    .zip(query(&lt;empty-page-end&gt;))\n    .any(((start, end)) =&gt; {\n      (start.location().page() &lt; page-num\n        and page-num &lt; end.location().page())\n    })\n}\n\n// Pagebreaks detectable by is-page-empty\n#let detectable-pagebreak(to: \"odd\") = {\n  [#metadata(none) &lt;empty-page-start&gt;]\n  pagebreak(to: to)\n  [#metadata(none) &lt;empty-page-end&gt;]\n}\n\n// Footer formatting function\n#let footer-numbering(format: \"1\") = context{\n  // If empty page no footer\n  if is-page-empty() {\n    return\n  }\n  align(center, numbering(format, counter(page).get().at(0)))\n}\n\n// First level headings = chapters\n#show heading.where(level: 1): it =&gt; {\n  set text(font: \"IBM Plex Sans\", weight: \"medium\", size: 20pt)\n  if it.body == [Table of Contents] {\n    block(spacing: 1.5em, upper(it))\n  } else {\n    detectable-pagebreak()\n    stack(\n      dir: ttb,\n      spacing: 15pt,\n      align(right, text(size: 40pt, counter(heading).display())),\n      line(length: 100%, stroke: .5pt),\n      upper(it.body),\n      line(length: 100%, stroke: .5pt)\n    )\n    v(2em)\n  }\n}\n\n#set page(footer: footer-numbering(format: \"i\"))\n\n#outline(title: [Table of Contents])\n\n#set page(footer: footer-numbering())\n#counter(page).update(1)\n\n= First Chapter\n</code></pre>\n<p>The “problem” I have is that following the rules of my university, I should not have numbering on the second page in this example since it is empty. I know this happens because of the <code>set page(...)</code> statements inserting page breaks that cannot be detected by the <code>is-page-empty()</code> function.</p>",
      "raw": "Sorry for this confusion, my code is pretty long so I tried to only give the relevant parts. Here is a simpler example :\n```typ\n// Check if a page is empty\n#let is-page-empty() = {\n  let page-num = here().page()\n  query(<empty-page-start>)\n    .zip(query(<empty-page-end>))\n    .any(((start, end)) => {\n      (start.location().page() < page-num\n        and page-num < end.location().page())\n    })\n}\n\n// Pagebreaks detectable by is-page-empty\n#let detectable-pagebreak(to: \"odd\") = {\n  [#metadata(none) <empty-page-start>]\n  pagebreak(to: to)\n  [#metadata(none) <empty-page-end>]\n}\n\n// Footer formatting function\n#let footer-numbering(format: \"1\") = context{\n  // If empty page no footer\n  if is-page-empty() {\n    return\n  }\n  align(center, numbering(format, counter(page).get().at(0)))\n}\n\n// First level headings = chapters\n#show heading.where(level: 1): it => {\n  set text(font: \"IBM Plex Sans\", weight: \"medium\", size: 20pt)\n  if it.body == [Table of Contents] {\n    block(spacing: 1.5em, upper(it))\n  } else {\n    detectable-pagebreak()\n    stack(\n      dir: ttb,\n      spacing: 15pt,\n      align(right, text(size: 40pt, counter(heading).display())),\n      line(length: 100%, stroke: .5pt),\n      upper(it.body),\n      line(length: 100%, stroke: .5pt)\n    )\n    v(2em)\n  }\n}\n\n#set page(footer: footer-numbering(format: \"i\"))\n\n#outline(title: [Table of Contents])\n\n#set page(footer: footer-numbering())\n#counter(page).update(1)\n\n= First Chapter\n```\n\nThe \"problem\" I have is that following the rules of my university, I should not have numbering on the second page in this example since it is empty. I know this happens because of the `set page(...)` statements inserting page breaks that cannot be detected by the `is-page-empty()` function.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 42.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 460
    },
    {
      "id": 9448,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-06T16:13:13.602Z",
      "updated_at": "2025-03-06T16:13:13.602Z",
      "cooked": "<p>Thanks, it’s now clearer to me. So you have code that tests if the current page comes after the start and before the end of a page break. This happens when <code>pagebreak(to: \"odd\")</code> starts two new pages: the second page will pass this test, and that’s the blank page you want to detect. The problem is when you have <code>set page(...)</code> just before this page break: this starts a new page A, then the <code>pagebreak(to: \"odd\")</code> starts another (single) page B. So page A is blank but doesn’t pass the test. (It seems you figured that out already, I’m just writing it out for the record.)</p>\n<p>What I would do is create page A myself without footer when I know that there will be a page B:</p>\n<pre><code class=\"lang-auto\">#page(footer: none, none)\n#set page(footer: footer-numbering())\n#counter(page).update(1)\n\n= First Chapter\n</code></pre>\n<p>I tried doing this a bit less manual by checking if two pages are going to be created, with <code>context if calc.odd(here().page()) { page(footer: none, none) }</code>, but with that code the layout fails to converge.</p>\n<p>Also linking a <a href=\"https://github.com/typst/typst/issues/2722\">related GitHub issue</a>.</p>",
      "raw": "Thanks, it's now clearer to me. So you have code that tests if the current page comes after the start and before the end of a page break. This happens when `pagebreak(to: \"odd\")` starts two new pages: the second page will pass this test, and that's the blank page you want to detect. The problem is when you have `set page(...)` just before this page break: this starts a new page A, then the `pagebreak(to: \"odd\")` starts another (single) page B. So page A is blank but doesn't pass the test. (It seems you figured that out already, I'm just writing it out for the record.)\n\nWhat I would do is create page A myself without footer when I know that there will be a page B:\n\n```\n#page(footer: none, none)\n#set page(footer: footer-numbering())\n#counter(page).update(1)\n\n= First Chapter\n```\n\nI tried doing this a bit less manual by checking if two pages are going to be created, with `context if calc.odd(here().page()) { page(footer: none, none) }`, but with that code the layout fails to converge.\n\n\nAlso linking a [related GitHub issue](https://github.com/typst/typst/issues/2722).",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 130.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9452,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-06T16:36:03.204Z",
      "updated_at": "2025-03-06T16:36:03.204Z",
      "cooked": "<p>It seems the following works to detect automatically if a blank page will be issued, without convergence problems:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#outline(title: [Table of Contents])\n#metadata(none)&lt;outline-end&gt;\n\n#context if calc.odd(locate(&lt;outline-end&gt;).page()) {\n  page(footer: none, none)\n}\n#set page(footer: footer-numbering())\n#counter(page).update(1)\n\n= First Chapter\n</code></pre>",
      "raw": "It seems the following works to detect automatically if a blank page will be issued, without convergence problems:\n\n```typ\n#outline(title: [Table of Contents])\n#metadata(none)<outline-end>\n\n#context if calc.odd(locate(<outline-end>).page()) {\n  page(footer: none, none)\n}\n#set page(footer: footer-numbering())\n#counter(page).update(1)\n\n= First Chapter\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 40.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9457,
      "post_number": 6,
      "username": "Yannick_Lapointe",
      "name": "Yannick Lapointe",
      "created_at": "2025-03-06T18:24:45.244Z",
      "updated_at": "2025-03-06T18:24:45.244Z",
      "cooked": "<p>Simple but effective, thanks!</p>",
      "raw": "Simple but effective, thanks!",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 24.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 460
    }
  ],
  "scraped_at": "2025-06-10T09:50:37.938189"
}
{
  "topic_metadata": {
    "id": 3138,
    "title": "How to Automatically Treat All Images and Tables as Figures?",
    "slug": "how-to-automatically-treat-all-images-and-tables-as-figures",
    "posts_count": 3,
    "created_at": "2025-03-07T12:52:32.162Z",
    "last_posted_at": "2025-03-07T13:45:18.096Z",
    "views": 56,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "layout",
      "tables",
      "graphics",
      "figures"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 196
  },
  "posts": [
    {
      "id": 9463,
      "post_number": 1,
      "username": "cgruesser",
      "name": "",
      "created_at": "2025-03-07T12:52:32.324Z",
      "updated_at": "2025-03-09T14:32:54.735Z",
      "cooked": "<p>Hi everyone,</p>\n<p>I’m looking to streamline the way images and tables are handled in my document and want to know if there’s a standardized method or a coding trick that allows every image and every table in a document to be automatically treated as a figure. Essentially, I’m trying to achieve the following:</p>\n<p>• Every image, table should be wrapped in a figure element without me having to manually do it.</p>\n<p>My current workflow requires me to add these elements manually, and it can get quite tedious.<br>\nHas anyone tackled this before?</p>\n<p>Thanks in advance for your help!</p>\n<p>Cheers</p>",
      "raw": "Hi everyone,\n\nI'm looking to streamline the way images and tables are handled in my document and want to know if there's a standardized method or a coding trick that allows every image and every table in a document to be automatically treated as a figure. Essentially, I'm trying to achieve the following:\n\n• Every image, table should be wrapped in a figure element without me having to manually do it.\n\nMy current workflow requires me to add these elements manually, and it can get quite tedious. \nHas anyone tackled this before?\n\nThanks in advance for your help!\n\nCheers",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 174.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 402
    },
    {
      "id": 9466,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-07T13:41:16.054Z",
      "updated_at": "2025-03-07T13:41:16.054Z",
      "cooked": "<p>You can achieve this with a show rule for <code>image</code> and <code>table</code>. This will wrap every image and table in a figure element, but you won’t be able to use a caption, a label or anything else that requires a figure (unless you add it directly in the show rule).</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show image: figure\n#show table: figure\n\n#table([0, 1, 2, 3])\n</code></pre>\n<p>Note that only writing <code>figure</code> inside the show rule is just the short version of <code>it =&gt; figure(it)</code>.</p>",
      "raw": "You can achieve this with a show rule for `image` and `table`. This will wrap every image and table in a figure element, but you won't be able to use a caption, a label or anything else that requires a figure (unless you add it directly in the show rule).\n\n```typ\n#show image: figure\n#show table: figure\n\n#table([0, 1, 2, 3])\n```\n\nNote that only writing `figure` inside the show rule is just the short version of `it => figure(it)`.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 29.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 9467,
      "post_number": 3,
      "username": "cgruesser",
      "name": "",
      "created_at": "2025-03-07T13:45:18.096Z",
      "updated_at": "2025-03-07T13:45:18.096Z",
      "cooked": "<p>Thank you very much.  It worked!<br>\nI knew I was overthinking it a bit :)</p>",
      "raw": "Thank you very much.  It worked!\nI knew I was overthinking it a bit :)",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 402
    }
  ],
  "scraped_at": "2025-06-10T09:50:37.217772"
}
