{
  "topic_metadata": {
    "id": 461,
    "title": "How do I make a reference that inserts name of section, and page number?",
    "slug": "how-do-i-make-a-reference-that-inserts-name-of-section-and-page-number",
    "posts_count": 5,
    "created_at": "2024-09-18T19:17:15.635Z",
    "last_posted_at": "2024-09-19T09:30:40.833Z",
    "views": 822,
    "like_count": 6,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 328
  },
  "posts": [
    {
      "id": 1813,
      "post_number": 1,
      "username": "Goossa",
      "name": "",
      "created_at": "2024-09-18T19:17:15.771Z",
      "updated_at": "2024-09-23T07:12:38.983Z",
      "cooked": "<p>I‚Äôm using typst to reference manuscripts that are added at the end of the document. I‚Äôve got pages with a heading and a label, and also the page number is set manually to match.</p>\n<p>I would like a way to reference the label of that Manuscript heading, in which typst prints out ‚ÄúManuscript IV (p. 56)‚Äù or something like that.<br>\nThe heading would look like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= Manuscript IV\n&lt;paper4&gt;\n</code></pre>",
      "raw": "I'm using typst to reference manuscripts that are added at the end of the document. I've got pages with a heading and a label, and also the page number is set manually to match.\n\nI would like a way to reference the label of that Manuscript heading, in which typst prints out \"Manuscript IV (p. 56)\" or something like that.\nThe heading would look like\n```typ\n= Manuscript IV\n<paper4>\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 90,
      "score": 3702.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 371
    },
    {
      "id": 1817,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-18T19:45:41.974Z",
      "updated_at": "2024-09-18T19:59:56.605Z",
      "cooked": "<p>Here is a possible solution:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show ref: it =&gt; if it.element.func() != heading { it } else {\n  let l = it.target // label\n  let h = it.element // heading\n  link(l, [#h.body (p. #h.location().page())])\n}\n\nA reference to @paper4\n\n#lorem(100)\n\n// #pagebreak() // This will change \"(p. 1)\" to \"(p. 2)\".\n\n= Manuscript IV\n&lt;paper4&gt;\n\n#lorem(20)\n</code></pre>\n<div align=\"center\">\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/7cc11ad31de9307aaf1d845502f633e49c1fdde2.png\" alt=\"image\" data-base62-sha1=\"hNCVKp9vYcojKQfOURe8FIe8mps\" width=\"567\" height=\"251\"></p>\n</div>\n<p>If you have the heading on the 2nd page:<img src=\"https://forum.typst.app/uploads/default/original/1X/8656d9e15c36eb0117817b63193f8706b0c63de2.png\" alt=\"image\" data-base62-sha1=\"jaq3DsE3d0qWONoW7vMVcjKy1AS\" width=\"206\" height=\"33\"></p>",
      "raw": "Here is a possible solution:\n\n```typ\n#show ref: it => if it.element.func() != heading { it } else {\n  let l = it.target // label\n  let h = it.element // heading\n  link(l, [#h.body (p. #h.location().page())])\n}\n\nA reference to @paper4\n\n#lorem(100)\n\n// #pagebreak() // This will change \"(p. 1)\" to \"(p. 2)\".\n\n= Manuscript IV\n<paper4>\n\n#lorem(20)\n```\n\n<div align=center>\n\n![image|567x251](upload://hNCVKp9vYcojKQfOURe8FIe8mps.png)\n</div>\n\nIf you have the heading on the 2nd page:![image|206x33](upload://jaq3DsE3d0qWONoW7vMVcjKy1AS.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 4,
      "reads": 87,
      "score": 182.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 1835,
      "post_number": 3,
      "username": "Goossa",
      "name": "",
      "created_at": "2024-09-18T22:29:33.648Z",
      "updated_at": "2024-09-18T22:29:33.648Z",
      "cooked": "<p>Is it possible to do <code>#show ref.where(it=&gt;it.element.func() == heading)</code> or something like that?</p>",
      "raw": "Is it possible to do `#show ref.where(it=>it.element.func() == heading)` or something like that?",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 75,
      "score": 44.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 371
    },
    {
      "id": 1836,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-18T23:03:08.098Z",
      "updated_at": "2024-09-19T09:38:08.128Z",
      "cooked": "<p>Yeah, I don‚Äôt think so. I did want to use <code>.where()</code> clause but <code>ref()</code> has only <code>target</code> and <code>supplement</code> fields: <a href=\"https://typst.app/docs/reference/model/ref/#parameters\" class=\"inline-onebox\">Reference Function ‚Äì Typst Documentation</a>, although it didn‚Äôt give an error when <code>.where(element)</code> is used. Unfortunately, <code>element</code> is of type <code>content</code> (or sometimes <code>none</code>, I think), so using it inside of <code>.where()</code> is basically useless. And there is no feature that adds lambda function inside <code>.where()</code> clause. Perhaps you can <a href=\"https://github.com/typst/typst/issues/new/choose\" rel=\"noopener nofollow ugc\">open an issue</a> in the repository explaining the desired feature. It <em>would</em> be cool if you can filter <code>ref</code> occurrences (via <code>.where()</code>) by element type of <code>ref.element</code> field.</p>",
      "raw": "Yeah, I don't think so. I did want to use `.where()` clause but `ref()` has only `target` and `supplement` fields: https://typst.app/docs/reference/model/ref/#parameters, although it didn't give an error when `.where(element)` is used. Unfortunately, `element` is of type `content` (or sometimes `none`, I think), so using it inside of `.where()` is basically useless. And there is no feature that adds lambda function inside `.where()` clause. Perhaps you can [open an issue](https://github.com/typst/typst/issues/new/choose) in the repository explaining the desired feature. It *would* be cool if you can filter `ref` occurrences (via `.where()`) by element type of `ref.element` field.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 75,
      "score": 44.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 1892,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-19T09:30:40.833Z",
      "updated_at": "2024-09-23T07:12:29.042Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Goossa\" data-post=\"3\" data-topic=\"461\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/goossa/48/368_2.png\" class=\"avatar\"> Goossa:</div>\n<blockquote>\n<p>Is it possible to do <code>#show ref.where(it=&gt;it.element.func() == heading)</code> or something like that?</p>\n</blockquote>\n</aside>\n<p>It‚Äôs not possible, for a few reasons outlined in this Github issue (and linked Discord thread):</p>\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/typst/issues/4950\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/issues/4950\" target=\"_blank\" rel=\"noopener\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/typst/issues/4950\" target=\"_blank\" rel=\"noopener\">Allow function as parameter to where()</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-09-13\" data-time=\"09:06:08\" data-timezone=\"UTC\">09:06AM - 13 Sep 24 UTC</span>\n      </div>\n\n        <div class=\"date\">\n          closed <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-09-22\" data-time=\"11:55:12\" data-timezone=\"UTC\">11:55AM - 22 Sep 24 UTC</span>\n        </div>\n\n      <div class=\"user\">\n        <a href=\"https://github.com/noahjutz\" target=\"_blank\" rel=\"noopener\">\n          <img alt=\"noahjutz\" src=\"https://forum.typst.app/uploads/default/original/1X/3f38b6029a7a4d74aa907f56c4b8dd81ff9de36d.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"E7C9E2\">\n          noahjutz\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          feature request\n        </span>\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          introspection\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">### Description\n\nThe signature of the where function is currently\n\n```\nself.w<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">‚Ä¶</a></span><span class=\"excerpt hidden\">here(..any) -&gt; selector\n```\n\nI want it to be\n\n```\nself.where(..any or function) -&gt; selector\n```\n\n### Use Case\n\nCurrently, selecting with a range of parameters is difficult.\n\n```\ntable.cell.where(x: 0)\ntable.cell.where(x: 2)\ntable.cell.where(x: 4)\n// ...\n```\n\nit would be much easier like this:\n\n```\ntable.cell.where(cell =&gt; calc.rem(cell.x, 2) == 0)\n```</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "[quote=\"Goossa, post:3, topic:461, full:true\"]\nIs it possible to do `#show ref.where(it=>it.element.func() == heading)` or something like that?\n[/quote]\n\nIt's not possible, for a few reasons outlined in this Github issue (and linked Discord thread):\n\nhttps://github.com/typst/typst/issues/4950",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 62,
      "score": 292.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:58:40.925463"
}
{
  "topic_metadata": {
    "id": 471,
    "title": "How to measure content including leading/trailing whitespace?",
    "slug": "how-to-measure-content-including-leading-trailing-whitespace",
    "posts_count": 4,
    "created_at": "2024-09-19T04:23:01.163Z",
    "last_posted_at": "2024-09-19T21:04:28.508Z",
    "views": 134,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 292
  },
  "posts": [
    {
      "id": 1845,
      "post_number": 1,
      "username": "JosiNeto",
      "name": "Jos√≠ Neto",
      "created_at": "2024-09-19T04:23:01.279Z",
      "updated_at": "2024-09-19T17:51:20.980Z",
      "cooked": "<p>I need to typeset a paragraph like the following. For that I need to set <code>hanging-indent</code> to the width of \"Advisors: \", space included.</p>\n<pre data-code-wrap=\"txt\"><code class=\"lang-txt\">Advisors: Ph.D Very Long Name\n          Ph.D Another Very Long Name\n</code></pre>\n<p><strong>The problem is</strong>: <code>measure</code> ignores any space width ‚Äî be it a normal or non-breakable space. So the above turns out like:</p>\n<pre data-code-wrap=\"txt\"><code class=\"lang-txt\">Advisors: Ph.D Very Long Name\n         Ph.D Another Very Long Name\n</code></pre>\n<p>This is contrary to the norms of my institution‚Ä¶ Below is the code I‚Äôm using. I also tried to add <code>+ measure(sym.space.nobreak).width</code> in the <code>padding</code> attribution, but it changes nothing.</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">context {\n  let prefix = [Advisors:~]\n  let padding = measure(prefix).width\n  let body = par(hanging-indent: padding, {\n    prefix + advisors.join(linebreak()) // advisors is an array of names\n  })\n}\n</code></pre>\n<p>Am I missing something? Thank you in advance!</p>",
      "raw": "I need to typeset a paragraph like the following. For that I need to set `hanging-indent` to the width of \"Advisors: \", space included.\n\n```txt\nAdvisors: Ph.D Very Long Name\n          Ph.D Another Very Long Name\n```\n\n**The problem is**: `measure` ignores any space width --- be it a normal or non-breakable space. So the above turns out like:\n\n```txt\nAdvisors: Ph.D Very Long Name\n         Ph.D Another Very Long Name\n```\n\nThis is contrary to the norms of my institution... Below is the code I'm using. I also tried to add `+ measure(sym.space.nobreak).width` in the `padding` attribution, but it changes nothing.\n\n```typc\ncontext {\n  let prefix = [Advisors:~]\n  let padding = measure(prefix).width\n  let body = par(hanging-indent: padding, {\n    prefix + advisors.join(linebreak()) // advisors is an array of names\n  })\n}\n```\n\nAm I missing something? Thank you in advance!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 268.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 376
    },
    {
      "id": 1847,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-19T04:46:46.763Z",
      "updated_at": "2024-09-19T04:46:46.763Z",
      "cooked": "<p>A grid (or, for simpler cases, <code>stack</code>) is ideal for this use case, and does all the measuring magic for you:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let advisors = ([Phil Phil], [John John])\n#grid(\n  columns: 2, column-gutter: 4pt,\n  [*Advisors:*], advisors.join([\\ ])\n)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/66402650ea64e3b6343d3bcade84433fd4948baf.png\" data-download-href=\"https://forum.typst.app/uploads/default/66402650ea64e3b6343d3bcade84433fd4948baf\" title=\"&quot;Advisors: Phil Phil (LINEBREAK) John John&quot;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/66402650ea64e3b6343d3bcade84433fd4948baf_2_690x95.png\" alt=\"&quot;Advisors: Phil Phil (LINEBREAK) John John&quot;\" data-base62-sha1=\"eAy8NWqLisLOwXVyJPBk1ZYIdPx\" width=\"690\" height=\"95\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/66402650ea64e3b6343d3bcade84433fd4948baf_2_690x95.png, https://forum.typst.app/uploads/default/optimized/1X/66402650ea64e3b6343d3bcade84433fd4948baf_2_1035x142.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/66402650ea64e3b6343d3bcade84433fd4948baf_2_1380x190.png 2x\" data-dominant-color=\"F9F9F9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">\"Advisors: Phil Phil (LINEBREAK) John John\"</span><span class=\"informations\">1500√ó208 20.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>For more information, see:</p>\n<ol>\n<li><a href=\"https://typst.app/docs/reference/layout/grid/\" class=\"inline-onebox\">Grid Function ‚Äì Typst Documentation</a></li>\n<li><a href=\"https://typst.app/docs/guides/table-guide/\" class=\"inline-onebox\">Table guide ‚Äì Typst Documentation</a> (also applies to grids)</li>\n</ol>",
      "raw": "A grid (or, for simpler cases, `stack`) is ideal for this use case, and does all the measuring magic for you:\n\n```typ\n#let advisors = ([Phil Phil], [John John])\n#grid(\n  columns: 2, column-gutter: 4pt,\n  [*Advisors:*], advisors.join([\\ ])\n)\n```\n![\"Advisors: Phil Phil (LINEBREAK) John John\" |690x95](upload://eAy8NWqLisLOwXVyJPBk1ZYIdPx.png)\n\nFor more information, see:\n\n1. https://typst.app/docs/reference/layout/grid/\n2. https://typst.app/docs/guides/table-guide/ (also applies to grids)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 39,
      "score": 52.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 1884,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-19T08:37:52.941Z",
      "updated_at": "2024-09-19T08:37:52.941Z",
      "cooked": "<p>Less ideal and also less automated/magical solution (but less bulky):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let prefix = [Advisors:]\n#prefix Ph.D Very Long Name \\\n#hide(prefix) Ph.D Another Very Long Name\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/ae7d3c2ce615d56bc02e53cf897510237048dce1.png\" alt=\"image\" data-base62-sha1=\"oTBotmRKzDhOHa86wmS8mGr8ZC9\" width=\"248\" height=\"50\"></p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/layout/hide/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/layout/hide/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/layout/hide/\" target=\"_blank\" rel=\"noopener\">Hide Function ‚Äì Typst Documentation</a></h3>\n\n  <p>Documentation for the `hide` function.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Less ideal and also less automated/magical solution (but less bulky):\n\n```typ\n#let prefix = [Advisors:]\n#prefix Ph.D Very Long Name \\\n#hide(prefix) Ph.D Another Very Long Name\n```\n\n![image|248x50](upload://oTBotmRKzDhOHa86wmS8mGr8ZC9.png)\n\nhttps://typst.app/docs/reference/layout/hide/",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 37,
      "score": 27.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 1955,
      "post_number": 4,
      "username": "JosiNeto",
      "name": "Jos√≠ Neto",
      "created_at": "2024-09-19T21:04:28.508Z",
      "updated_at": "2024-09-19T21:04:28.508Z",
      "cooked": "<p>Thank you, <a class=\"mention\" href=\"/u/andrew\">@Andrew</a> ! Using <code>hide</code> here as you suggested solves only the start of lines, but if one of the names wrap, it doesn‚Äôt get a hanging indent. But thanks anyway, I wasn‚Äôt aware of this way <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Thank you, @Andrew ! Using `hide` here as you suggested solves only the start of lines, but if one of the names wrap, it doesn't get a hanging indent. But thanks anyway, I wasn't aware of this way :slight_smile:",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 5.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 376
    }
  ],
  "scraped_at": "2025-06-10T09:58:40.215533"
}
{
  "topic_metadata": {
    "id": 486,
    "title": "How to fix incorrect heading numbering after a #pause in presentation slides?",
    "slug": "how-to-fix-incorrect-heading-numbering-after-a-pause-in-presentation-slides",
    "posts_count": 6,
    "created_at": "2024-09-19T10:35:49.043Z",
    "last_posted_at": "2024-09-19T13:39:29.101Z",
    "views": 156,
    "like_count": 4,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "polylux"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 438
  },
  "posts": [
    {
      "id": 1901,
      "post_number": 1,
      "username": "Petr",
      "name": "Petr",
      "created_at": "2024-09-19T10:35:49.164Z",
      "updated_at": "2024-09-19T17:49:29.078Z",
      "cooked": "<p>When using the following imports for writing theorems in a presentation, I noticed that after a <code>#pause</code> in a slide, the heading numbering increments unexpectedly.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/polylux:0.3.1\": *\n#import \"@preview/ctheorems:1.1.2\": *\n#set heading(numbering: \"1.\")\n#import themes.simple: *\n#show: simple-theme.with(aspect-ratio: \"4-3\")\n#slide[\n== Introduction\nbar\n\n#pause\nfoo\n]\n</code></pre>\n<p>On the second page, the heading changes to <strong>1.2 Introduction</strong>, which causes incorrect numbering for subsequent theorems. How can I prevent the heading from incrementing after a <code>#pause</code>?</p>",
      "raw": "When using the following imports for writing theorems in a presentation, I noticed that after a `#pause` in a slide, the heading numbering increments unexpectedly.\n```typ\n#import \"@preview/polylux:0.3.1\": *\n#import \"@preview/ctheorems:1.1.2\": *\n#set heading(numbering: \"1.\")\n#import themes.simple: *\n#show: simple-theme.with(aspect-ratio: \"4-3\")\n#slide[\n== Introduction\nbar\n\n#pause\nfoo\n]\n```\nOn the second page, the heading changes to **1.2 Introduction**, which causes incorrect numbering for subsequent theorems. How can I prevent the heading from incrementing after a `#pause`?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 360.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 385
    },
    {
      "id": 1914,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-19T11:48:00.777Z",
      "updated_at": "2024-09-19T11:53:27.920Z",
      "cooked": "<p>Hello! Unfortunately, I do not think that‚Äôs possible without modifying the package‚Äôs code.</p>\n<p>I generally avoid recommending other packages, especially because it‚Äôs a polylux question, but in this case the alternative is much easier. (Sorry Polylux‚Ä¶). You may try Touying instead:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/touying:0.5.2\": *\n#import \"@preview/ctheorems:1.1.2\": *\n#import themes.simple: *\n#show: simple-theme.with(aspect-ratio: \"16-9\")\n#let theorem = thmbox(\"theorem\", \"Theorem\", fill: rgb(\"#eeffee\"))\n#set heading(numbering: \"1.\")\n\n== Introduction\n\n#theorem[foo]\n\n#pause\n\n#theorem[bar]\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/72ec06d69072f72ba382edf006c1e0e67abc0dba.png\" data-download-href=\"https://forum.typst.app/uploads/default/72ec06d69072f72ba382edf006c1e0e67abc0dba\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/72ec06d69072f72ba382edf006c1e0e67abc0dba_2_444x500.png\" alt=\"image\" data-base62-sha1=\"goE7dVYiYSWMAcAX90xQbKXCMz0\" width=\"444\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/72ec06d69072f72ba382edf006c1e0e67abc0dba_2_444x500.png, https://forum.typst.app/uploads/default/optimized/1X/72ec06d69072f72ba382edf006c1e0e67abc0dba_2_666x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/72ec06d69072f72ba382edf006c1e0e67abc0dba_2_888x1000.png 2x\" data-dominant-color=\"F9FDFA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1078√ó1213 40.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>If someone manages to deal with the repeated content issue with polylux without heavy modifications, I‚Äôll be glad to read that! Please mention me.</p>\n<p>P.S.: please make sure your code is reproducible! Your code errors because <code>#slide</code> is not defined, it should probably be <code>#polylux-slide</code>.</p>",
      "raw": "Hello! Unfortunately, I do not think that's possible without modifying the package's code.\n\nI generally avoid recommending other packages, especially because it's a polylux question, but in this case the alternative is much easier. (Sorry Polylux...). You may try Touying instead:\n\n```typ\n#import \"@preview/touying:0.5.2\": *\n#import \"@preview/ctheorems:1.1.2\": *\n#import themes.simple: *\n#show: simple-theme.with(aspect-ratio: \"16-9\")\n#let theorem = thmbox(\"theorem\", \"Theorem\", fill: rgb(\"#eeffee\"))\n#set heading(numbering: \"1.\")\n\n== Introduction\n\n#theorem[foo]\n\n#pause\n\n#theorem[bar]\n```\n\n[details=\"Output\"]\n![image|444x500](upload://goE7dVYiYSWMAcAX90xQbKXCMz0.png)\n[/details]\n\n\nIf someone manages to deal with the repeated content issue with polylux without heavy modifications, I'll be glad to read that! Please mention me.\n\nP.S.: please make sure your code is reproducible! Your code errors because `#slide` is not defined, it should probably be `#polylux-slide`.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 39.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 1922,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-19T12:49:34.773Z",
      "updated_at": "2024-09-19T12:49:34.773Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"quachpas\" data-post=\"2\" data-topic=\"486\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/q/662200/48.png\" class=\"avatar\"> quachpas:</div>\n<blockquote>\n<p>please make sure your code is reproducible! Your code errors because <code>#slide</code> is not defined, it should probably be <code>#polylux-slide</code>.</p>\n</blockquote>\n</aside>\n<p>That‚Äôs a great point. I talked about the importance of MRE and what it involves here: <a href=\"https://forum.typst.app/t/image-sizes-parent-container-wrongly/464/2\" class=\"inline-onebox\">Image sizes parent container wrongly? - #2 by Andrew</a>.</p>",
      "raw": "[quote=\"quachpas, post:2, topic:486\"]\nplease make sure your code is reproducible! Your code errors because `#slide` is not defined, it should probably be `#polylux-slide`.\n[/quote]\n\nThat's a great point. I talked about the importance of MRE and what it involves here: https://forum.typst.app/t/image-sizes-parent-container-wrongly/464/2?u=andrew.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 44,
      "score": 48.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 1926,
      "post_number": 4,
      "username": "Petr",
      "name": "Petr",
      "created_at": "2024-09-19T13:14:45.423Z",
      "updated_at": "2024-09-19T13:14:45.423Z",
      "cooked": "<p>Thank you, it works. I made my code reproducible, but I don‚Äôt know how to make it runnable.</p>",
      "raw": "Thank you, it works. I made my code reproducible, but I don't know how to make it runnable.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 23.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 385
    },
    {
      "id": 1927,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-19T13:16:18.460Z",
      "updated_at": "2024-09-19T13:16:18.460Z",
      "cooked": "<p>It is not possible to run Typst code on Discourse! I just pasted the image using</p>\n<pre><code class=\"lang-auto\">[details=\"Summary\"]\nThis text will be hidden\n[/details]\n</code></pre>\n<p>See <a href=\"https://meta.discourse.org/t/formatting-posts-using-markdown-bbcode-and-html/239348\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Formatting posts using markdown, BBCode, and HTML - Using Discourse - Discourse Meta</a></p>",
      "raw": "It is not possible to run Typst code on Discourse! I just pasted the image using \n```\n[details=\"Summary\"]\nThis text will be hidden\n[/details]\n```\n\nSee https://meta.discourse.org/t/formatting-posts-using-markdown-bbcode-and-html/239348",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 41,
      "score": 43.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 1931,
      "post_number": 6,
      "username": "reknih",
      "name": "Martin Haug",
      "created_at": "2024-09-19T13:39:29.101Z",
      "updated_at": "2024-09-19T13:39:29.101Z",
      "cooked": "<p>Hey Petr,</p>\n<p>I hope the replies in this topic have been useful for you so far!</p>\n<p>The topic is a question, so I have moved it into the questions category for you. The next time you post a question on Typst, please choose questions in the category dropdown in the composer.</p>\n<p>Now that the topic is in the question category, you can use the checkbox icon under each post to mark which one solved your question. That post will be highlighted so others with the same problem can find the solution more quickly.</p>",
      "raw": "Hey Petr,\n\nI hope the replies in this topic have been useful for you so far!\n\nThe topic is a question, so I have moved it into the questions category for you. The next time you post a question on Typst, please choose questions in the category dropdown in the composer.\n\nNow that the topic is in the question category, you can use the checkbox icon under each post to mark which one solved your question. That post will be highlighted so others with the same problem can find the solution more quickly.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 23.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1
    }
  ],
  "scraped_at": "2025-06-10T09:58:39.505458"
}
{
  "topic_metadata": {
    "id": 489,
    "title": "Character count of body text?",
    "slug": "character-count-of-body-text",
    "posts_count": 8,
    "created_at": "2024-09-19T10:47:42.218Z",
    "last_posted_at": "2024-09-19T18:41:26.819Z",
    "views": 436,
    "like_count": 7,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "Daniel",
    "tags": [],
    "category_id": 5,
    "participant_count": 6,
    "word_count": 619
  },
  "posts": [
    {
      "id": 1906,
      "post_number": 1,
      "username": "dob",
      "name": "Dan Okkels Brendstrup",
      "created_at": "2024-09-19T10:47:42.405Z",
      "updated_at": "2024-09-19T10:47:42.405Z",
      "cooked": "<p>Is there any way to get a character count of the entire body text? I can‚Äôt find anything in the docs, and GitHub Copilot keeps suggesting things like <code>body.text().len()</code> which do not exist <img src=\"https://forum.typst.app/images/emoji/apple/upside_down_face.png?v=12\" title=\":upside_down_face:\" class=\"emoji\" alt=\":upside_down_face:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Is there any way to get a character count of the entire body text? I can't find anything in the docs, and GitHub Copilot keeps suggesting things like `body.text().len()` which do not exist üôÉ",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 61,
      "score": 1702.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 387
    },
    {
      "id": 1908,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-19T11:12:00.209Z",
      "updated_at": "2024-09-19T11:12:00.209Z",
      "cooked": "<p>The answer depends on what the <code>body</code> actually means in this context.</p>\n<p>For a string of text, it‚Äôs simply <a href=\"https://typst.app/docs/reference/foundations/str/#definitions-len\"><code>\"text\".len()</code></a> (or <code>\"\".clusters().len()</code> for grapheme counting instead of UTF-8 bytes). For a content that consists only of plain text, it will be <code>#[text].text.clusters().len()</code>.</p>\n<p>For more complex examples, a more verbose solution is needed. <a href=\"https://github.com/typst/typst/issues/2196#issuecomment-1728135476\" rel=\"noopener nofollow ugc\">A solution</a> by <a class=\"mention\" href=\"/u/eric\">@Eric</a> for something similar mentioned <a href=\"https://forum.typst.app/t/how-to-write-a-function-that-alters-the-text-of-a-given-content-parameter-but-retains-everything-else/468\">here</a> would be:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let to-string(content) = {\n  if content.has(\"text\") {\n    content.text\n  } else if content.has(\"children\") {\n    content.children.map(to-string).join(\"\")\n  } else if content.has(\"body\") {\n    to-string(content.body)\n  } else if content == [ ] {\n    \" \"\n  }\n}\n\n#to-string[This _*cool*_ project] // =&gt; \"This cool project\"\n</code></pre>\n<p>I haven‚Äôt tested this, it might still miss some text, but it‚Äôs a great start nevertheless. So you would use it like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let content-variable = [This _*cool*_ project]\n#to-string(content-variable).clusters().len()\n// Output: 17\n</code></pre>",
      "raw": "The answer depends on what the `body` actually means in this context.\n\nFor a string of text, it's simply [`\"text\".len()`](https://typst.app/docs/reference/foundations/str/#definitions-len) (or `\"\".clusters().len()` for grapheme counting instead of UTF-8 bytes). For a content that consists only of plain text, it will be `#[text].text.clusters().len()`.\n\nFor more complex examples, a more verbose solution is needed. [A solution](https://github.com/typst/typst/issues/2196#issuecomment-1728135476) by @Eric for something similar mentioned [here](https://forum.typst.app/t/how-to-write-a-function-that-alters-the-text-of-a-given-content-parameter-but-retains-everything-else/468) would be:\n\n```typ\n#let to-string(content) = {\n  if content.has(\"text\") {\n    content.text\n  } else if content.has(\"children\") {\n    content.children.map(to-string).join(\"\")\n  } else if content.has(\"body\") {\n    to-string(content.body)\n  } else if content == [ ] {\n    \" \"\n  }\n}\n\n#to-string[This _*cool*_ project] // => \"This cool project\"\n```\n\nI haven't tested this, it might still miss some text, but it's a great start nevertheless. So you would use it like this:\n\n```typ\n#let content-variable = [This _*cool*_ project]\n#to-string(content-variable).clusters().len()\n// Output: 17\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 61,
      "score": 147.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 1934,
      "post_number": 3,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-09-19T13:46:42.654Z",
      "updated_at": "2024-09-19T13:47:50.360Z",
      "cooked": "<p>Here‚Äôs another method of counting each character in a document that uses regular expressions:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let charCounter = counter(\"charCounter\")\n\n#show regex(\"[a-zA-Z]\"): it =&gt;{\n  charCounter.step()\n  it\n}\n\nTotal characters: #charCounter.display()\n</code></pre>\n<p>In this example the result is 15 characters, the number present in ‚ÄúTotal characters:‚Äù.</p>\n<p>The regex string can be adjusted to include spaces and special characters as well.</p>\n<p>I don‚Äôt know what the performance impact of doing it this way is, but I assume it‚Äôs not a good option for large documents.</p>",
      "raw": "Here's another method of counting each character in a document that uses regular expressions:\n\n```typ\n#let charCounter = counter(\"charCounter\")\n\n#show regex(\"[a-zA-Z]\"): it =>{\n  charCounter.step()\n  it\n}\n\nTotal characters: #charCounter.display()\n```\nIn this example the result is 15 characters, the number present in \"Total characters:\".\n\nThe regex string can be adjusted to include spaces and special characters as well.\n\nI don't know what the performance impact of doing it this way is, but I assume it's not a good option for large documents.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 55,
      "score": 86.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 1935,
      "post_number": 4,
      "username": "laurmaedje",
      "name": "Laurenz M√§dje",
      "created_at": "2024-09-19T13:56:54.580Z",
      "updated_at": "2024-09-19T13:56:54.580Z",
      "cooked": "<p>Aside from the large performance impact, it will also negatively affect text layout. Each letter is seen individually by the layout engine (at least currently), which prevents e.g. ligatures. If the performance is acceptable, this can be used temporarily, but I would not use this for a final deliverable.</p>",
      "raw": "Aside from the large performance impact, it will also negatively affect text layout. Each letter is seen individually by the layout engine (at least currently), which prevents e.g. ligatures. If the performance is acceptable, this can be used temporarily, but I would not use this for a final deliverable.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 53,
      "score": 65.6,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 1938,
      "post_number": 5,
      "username": "kotfind",
      "name": "",
      "created_at": "2024-09-19T15:14:57.901Z",
      "updated_at": "2024-09-19T15:14:57.901Z",
      "cooked": "<p>Just came across this plugin: <a href=\"https://typst.app/universe/package/wordometer\">wordometer</a>.<br>\nI haven‚Äôt tried it, but it looks like it may help.</p>",
      "raw": "Just came across this plugin: [wordometer](https://typst.app/universe/package/wordometer).\nI haven't tried it, but it looks like it may help.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 49,
      "score": 64.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 386
    },
    {
      "id": 1943,
      "post_number": 6,
      "username": "Daniel",
      "name": "Daniel Cook",
      "created_at": "2024-09-19T18:11:44.135Z",
      "updated_at": "2024-09-19T18:11:44.135Z",
      "cooked": "<p>I‚Äôve been using wordometer for word count. It does character count as well.<br>\nThere are some things it can‚Äôt count properly. Look at some open issues on GitHub.</p>\n<p>A follow up question: what is your use case? Do you need the count in your rendered document, or outside just as a metric?</p>\n<p>I think at the moment the more accurate way to go about a whole document character count will be to use an external script after rendering a PDF. So, have a toggle to disable some things you don‚Äôt want counted (page numbers, etc), compile it, then convert the PDF to text, do a count.</p>",
      "raw": "I've been using wordometer for word count. It does character count as well.\nThere are some things it can't count properly. Look at some open issues on GitHub.\n\nA follow up question: what is your use case? Do you need the count in your rendered document, or outside just as a metric?\n\nI think at the moment the more accurate way to go about a whole document character count will be to use an external script after rendering a PDF. So, have a toggle to disable some things you don't want counted (page numbers, etc), compile it, then convert the PDF to text, do a count.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 168.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 94
    },
    {
      "id": 1944,
      "post_number": 7,
      "username": "dob",
      "name": "Dan Okkels Brendstrup",
      "created_at": "2024-09-19T18:35:37.514Z",
      "updated_at": "2024-09-19T18:35:37.514Z",
      "cooked": "<p>Thanks! Yeah, I can see that <code>wordometer</code> has some issues that are dealbreakers in my case (I need to included spaces, for one). Seemed perfect otherwise.</p>\n<p>Yeah, my use case is including the character count in the actual document. So I think you‚Äôre right that doing a character count on a rendered PDF is probably the best solution <img src=\"https://forum.typst.app/images/emoji/apple/+1.png?v=12\" title=\":+1:\" class=\"emoji\" alt=\":+1:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Thanks! Yeah, I can see that `wordometer` has some issues that are dealbreakers in my case (I need to included spaces, for one). Seemed perfect otherwise.\n\nYeah, my use case is including the character count in the actual document. So I think you're right that doing a character count on a rendered PDF is probably the best solution üëç",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 7.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 387
    },
    {
      "id": 1945,
      "post_number": 8,
      "username": "dob",
      "name": "Dan Okkels Brendstrup",
      "created_at": "2024-09-19T18:41:26.819Z",
      "updated_at": "2024-09-19T18:41:26.819Z",
      "cooked": "<p>Thanks for all of your suggestions! What a great community <img src=\"https://forum.typst.app/images/emoji/apple/pray.png?v=12\" title=\":pray:\" class=\"emoji\" alt=\":pray:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>I‚Äôll experiment with your suggestions, but I have a feeling that the most trustworthy solution in the end is probably to run a character count on the final PDF.</p>\n<p>Still trying to get a handle on the Typst scripting language, but it is quite powerful!</p>",
      "raw": "Thanks for all of your suggestions! What a great community üôè\n\nI'll experiment with your suggestions, but I have a feeling that the most trustworthy solution in the end is probably to run a character count on the final PDF. \n\nStill trying to get a handle on the Typst scripting language, but it is quite powerful!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 17.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 387
    }
  ],
  "scraped_at": "2025-06-10T09:58:38.785648"
}
{
  "topic_metadata": {
    "id": 491,
    "title": "How to draw a vertically centered horizontal line?",
    "slug": "how-to-draw-a-vertically-centered-horizontal-line",
    "posts_count": 3,
    "created_at": "2024-09-19T11:16:33.594Z",
    "last_posted_at": "2024-09-19T11:35:37.986Z",
    "views": 399,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Tinger",
    "tags": [
      "graphics"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 558
  },
  "posts": [
    {
      "id": 1910,
      "post_number": 1,
      "username": "kotfind",
      "name": "",
      "created_at": "2024-09-19T11:16:33.711Z",
      "updated_at": "2024-09-19T11:16:33.711Z",
      "cooked": "<p>I want to draw a vertically centered horizontal line that would fill all the empty space on the line. It should look like this:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/d4d29f4fa40c9d980f90484dd40f90d5a44f3fcd.png\" data-download-href=\"https://forum.typst.app/uploads/default/d4d29f4fa40c9d980f90484dd40f90d5a44f3fcd\" title=\"1726744175\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/d4d29f4fa40c9d980f90484dd40f90d5a44f3fcd_2_690x179.png\" alt=\"1726744175\" data-base62-sha1=\"umItKVLg3vnXPx2aLpGl5S7K6zX\" width=\"690\" height=\"179\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/d4d29f4fa40c9d980f90484dd40f90d5a44f3fcd_2_690x179.png, https://forum.typst.app/uploads/default/optimized/1X/d4d29f4fa40c9d980f90484dd40f90d5a44f3fcd_2_1035x268.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/d4d29f4fa40c9d980f90484dd40f90d5a44f3fcd_2_1380x358.png 2x\" data-dominant-color=\"EBEAEA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">1726744175</span><span class=\"informations\">1484√ó385 97.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nNow I‚Äôm using this code to generate it:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#grid(\n    columns: (auto, 1fr, auto),\n    align: horizon + center,\n    column-gutter: 5pt,\n    text(fill: red)[abc],\n    line(length: 100%, stroke: 0.5pt + red),\n    text(fill: red)[def],\n)\n</code></pre>\n<p>But using <code>grid</code> feels like an overkill. Also <code>grid</code> seems to add margins at the top and at the bottom. Is there any better solution?</p>",
      "raw": "I want to draw a vertically centered horizontal line that would fill all the empty space on the line. It should look like this:\n![1726744175|690x179, 100%](upload://umItKVLg3vnXPx2aLpGl5S7K6zX.png)\nNow I'm using this code to generate it:\n```typ\n#grid(\n    columns: (auto, 1fr, auto),\n    align: horizon + center,\n    column-gutter: 5pt,\n    text(fill: red)[abc],\n    line(length: 100%, stroke: 0.5pt + red),\n    text(fill: red)[def],\n)\n```\nBut using `grid` feels like an overkill. Also `grid` seems to add margins at the top and at the bottom. Is there any better solution?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 1530.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 386
    },
    {
      "id": 1912,
      "post_number": 2,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-09-19T11:30:54.568Z",
      "updated_at": "2024-09-19T11:32:30.881Z",
      "cooked": "<p><code>line</code> is a block-level element, this means that it basically introduces a <code>parbreak</code> if necessary. Usually, to put a block level element inline you wrap it in <code>box</code>, which is the defacto inline container. However, this will actually require you to adjust the baseline of the line manually because it will be bottom aligned. You‚Äôre solution is already spot on.</p>\n<p>The <code>margins</code> at the top and bottom are introduced by <code>block.spacing</code> as the grid itself is a block-level element, and the solution for this is to introduce a box to make it inline:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#box(grid(\n    columns: (auto, 1fr, auto),\n    align: horizon + center,\n    column-gutter: 5pt,\n    text(fill: red)[abc],\n    line(length: 100%, stroke: 0.5pt + red),\n    text(fill: red)[def],\n))\n</code></pre>\n<p>This also has the effect of being able to put this within text if you add other fractionally spaced elements beside it.</p>\n<p>Here‚Äôs an image showing the left side with the the box-wrapping and the right without it:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/d274ca3ede583f55c5834be78c14f4d7e67f4b6b.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/d274ca3ede583f55c5834be78c14f4d7e67f4b6b\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/d274ca3ede583f55c5834be78c14f4d7e67f4b6b_2_488x500.jpeg\" alt=\"image\" data-base62-sha1=\"u1Muoz9WF4OKugymfYLYUBv7vAv\" width=\"488\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/d274ca3ede583f55c5834be78c14f4d7e67f4b6b_2_488x500.jpeg, https://forum.typst.app/uploads/default/original/1X/d274ca3ede583f55c5834be78c14f4d7e67f4b6b.jpeg 1.5x, https://forum.typst.app/uploads/default/original/1X/d274ca3ede583f55c5834be78c14f4d7e67f4b6b.jpeg 2x\" data-dominant-color=\"E9E8E8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">668√ó684 172 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>If that‚Äôs a common separator you can of course define a function that does it for you:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let sep(left, right) = box(grid(\n    columns: (auto, 1fr, auto),\n    align: horizon + center,\n    column-gutter: 5pt,\n    left,\n    line(length: 100%, stroke: 0.5pt),\n    right,\n))\n</code></pre>\n<p>Keep in mind that <code>grid</code> is subject to set rules and something like <code>grid.inset</code> may be something you want to explicitly set to nothing for this to avoid any other spacing issues.</p>",
      "raw": "`line` is a block-level element, this means that it basically introduces a `parbreak` if necessary. Usually, to put a block level element inline you wrap it in `box`, which is the defacto inline container. However, this will actually require you to adjust the baseline of the line manually because it will be bottom aligned. You're solution is already spot on.\n\nThe `margins` at the top and bottom are introduced by `block.spacing` as the grid itself is a block-level element, and the solution for this is to introduce a box to make it inline:\n```typ\n#box(grid(\n    columns: (auto, 1fr, auto),\n    align: horizon + center,\n    column-gutter: 5pt,\n    text(fill: red)[abc],\n    line(length: 100%, stroke: 0.5pt + red),\n    text(fill: red)[def],\n))\n```\nThis also has the effect of being able to put this within text if you add other fractionally spaced elements beside it. \n\nHere's an image showing the left side with the the box-wrapping and the right without it:\n![image|488x500](upload://u1Muoz9WF4OKugymfYLYUBv7vAv.jpeg)\n\nIf that's a common separator you can of course define a function that does it for you:\n```typ\n#let sep(left, right) = box(grid(\n    columns: (auto, 1fr, auto),\n    align: horizon + center,\n    column-gutter: 5pt,\n    left,\n    line(length: 100%, stroke: 0.5pt),\n    right,\n))\n```\n\nKeep in mind that `grid` is subject to set rules and something like `grid.inset` may be something you want to explicitly set to nothing for this to avoid any other spacing issues.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 49,
      "score": 69.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 1913,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-19T11:35:37.986Z",
      "updated_at": "2024-09-19T11:41:20.891Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set par(justify: true)\n#lorem(20)\n\n// Simplified example:\n#grid(\n  columns: (auto, 1fr, auto),\n  align: horizon,\n  column-gutter: 5pt,\n  text(red)[abc],\n  line(length: 100%, stroke: 0.5pt + red),\n  text(red)[def],\n)\n\n// Reusable wrapper:\n#let hline = {\n  let color = red\n  set text(color)\n  set line(stroke: color)\n  grid(\n    columns: (auto, 1fr, auto),\n    align: horizon,\n    column-gutter: 5pt,\n    [abc],\n    line(length: 100%, stroke: 0.5pt),\n    [def],\n  )\n}\n#hline\n\n// Quick and dirty one-liner:\n#let hline = text(red)[abc #box(width: 1fr, baseline: -0.25em, stroke: (bottom: 0.5pt + red)) def]\n#hline\n\n// Same as above, but more structured:\n#let hline = {\n  let color = red\n  set text(color)\n  set box(stroke: (bottom: 0.5pt + color))\n  \"abc \" + box(width: 1fr, baseline: -0.25em) + \" def\"\n}\n#hline\n\n#lorem(20)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/7f293483bb375975f5452ac786860b06c1770d00.png\" data-download-href=\"https://forum.typst.app/uploads/default/7f293483bb375975f5452ac786860b06c1770d00\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/7f293483bb375975f5452ac786860b06c1770d00_2_690x225.png\" alt=\"image\" data-base62-sha1=\"i8UV3NcSgO3KJ0UphO0DMqrKt8s\" width=\"690\" height=\"225\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/7f293483bb375975f5452ac786860b06c1770d00_2_690x225.png, https://forum.typst.app/uploads/default/optimized/1X/7f293483bb375975f5452ac786860b06c1770d00_2_1035x337.png 1.5x, https://forum.typst.app/uploads/default/original/1X/7f293483bb375975f5452ac786860b06c1770d00.png 2x\" data-dominant-color=\"0A0707\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1338√ó438 53 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Note that output line thickness depends on PDF viewer and its settings/zoom level. Also, I used <code>-0.25em</code> just because it looks centered, not sure if this is the exact value that always will work.</p>\n<p>Since I don‚Äôt know if you need to change the text on the sides of the horizontal line, I didn‚Äôt make them settable via function arguments. But if you need something like that, then you can take a look at <a class=\"mention\" href=\"/u/tinger\">@Tinger</a>‚Äôs <a href=\"https://forum.typst.app/t/how-to-draw-a-vertically-centered-horizontal-line/491/2\">solution</a>.</p>",
      "raw": "```typ\n#set par(justify: true)\n#lorem(20)\n\n// Simplified example:\n#grid(\n  columns: (auto, 1fr, auto),\n  align: horizon,\n  column-gutter: 5pt,\n  text(red)[abc],\n  line(length: 100%, stroke: 0.5pt + red),\n  text(red)[def],\n)\n\n// Reusable wrapper:\n#let hline = {\n  let color = red\n  set text(color)\n  set line(stroke: color)\n  grid(\n    columns: (auto, 1fr, auto),\n    align: horizon,\n    column-gutter: 5pt,\n    [abc],\n    line(length: 100%, stroke: 0.5pt),\n    [def],\n  )\n}\n#hline\n\n// Quick and dirty one-liner:\n#let hline = text(red)[abc #box(width: 1fr, baseline: -0.25em, stroke: (bottom: 0.5pt + red)) def]\n#hline\n\n// Same as above, but more structured:\n#let hline = {\n  let color = red\n  set text(color)\n  set box(stroke: (bottom: 0.5pt + color))\n  \"abc \" + box(width: 1fr, baseline: -0.25em) + \" def\"\n}\n#hline\n\n#lorem(20)\n```\n\n![image|690x225](upload://i8UV3NcSgO3KJ0UphO0DMqrKt8s.png)\n\nNote that output line thickness depends on PDF viewer and its settings/zoom level. Also, I used `-0.25em` just because it looks centered, not sure if this is the exact value that always will work.\n\nSince I don't know if you need to change the text on the sides of the horizontal line, I didn't make them settable via function arguments. But if you need something like that, then you can take a look at @Tinger's [solution](https://forum.typst.app/t/how-to-draw-a-vertically-centered-horizontal-line/491/2).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 42,
      "score": 23.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:58:38.065294"
}
{
  "topic_metadata": {
    "id": 503,
    "title": "How can I underbrace only part of a matrix?",
    "slug": "how-can-i-underbrace-only-part-of-a-matrix",
    "posts_count": 3,
    "created_at": "2024-09-19T19:27:40.399Z",
    "last_posted_at": "2024-09-20T14:27:50.223Z",
    "views": 282,
    "like_count": 5,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "xkevio",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 405
  },
  "posts": [
    {
      "id": 1948,
      "post_number": 1,
      "username": "Netzwerk2",
      "name": "",
      "created_at": "2024-09-19T19:27:40.504Z",
      "updated_at": "2024-09-19T20:10:15.001Z",
      "cooked": "<p>How would I underbrace a part of a matrix like in this image?<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/583699d0e65d3203496bcc00a641d440953ce1c6.png\" alt=\"image\" data-base62-sha1=\"cAmZWNG42KiVKO9JXEpQMylI1gO\" width=\"552\" height=\"163\"></p>",
      "raw": "How would I underbrace a part of a matrix like in this image?\n![image|552x163](upload://cAmZWNG42KiVKO9JXEpQMylI1gO.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 56,
      "score": 836.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 394
    },
    {
      "id": 1952,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-09-19T20:06:48.934Z",
      "updated_at": "2024-09-19T20:44:11.973Z",
      "cooked": "<p>There is no nice way to mix multiple <code>underbrace</code>s together, so you will have to get creative with <code>stack</code> or <code>grid</code>. Here is one such PoC (for matrices with the same width each side, <strong>edit:</strong> see below for a more complete approach):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let under-mat(matrix, left, right) = context {\n  let width = measure(matrix).width / 2 - 10pt\n  let lspace = math.underbrace(h(width), left)\n  let rspace = math.underbrace(h(width), right)\n  \n  $\n    #stack(\n      spacing: -0.75em,\n      matrix,\n      grid(columns: 2, lspace, rspace)\n    )\n  $\n}\n\n\n#under-mat(\n  $ mat(augment: #3, 2, 3, 1, 1, 0, 0; 1, 0, 1, 0, 1, 0; 5, 4, 6, 0, 0, 0) $,\n  $ A $, $ I $\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/ebedcbd731ea4db05c971d1c4e56603484aa8ed8.png\" alt=\"image\" data-base62-sha1=\"xF7GgmBBtCZPatKpuu6dfyGQyyk\" width=\"202\" height=\"133\"></p>\n<p><strong>EDIT:</strong> This will modify the baseline of the matrix which might look odd next to matrices without an underbrace or with an overbrace. You can manually adjust it with <code>#move()</code>. I have also made an <code>over-mat</code>-function just for completeness now with <strong>automatic measuring even for matrices where one side is visually bigger</strong>.</p>\n<details>\n<summary>\nCode and Result</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/xarrow:0.3.1\": xarrow\n\n#let under-mat(matrix, left, right) = context {\n  let augment-row = math.mat(matrix.body.rows.first().slice(0, matrix.body.augment))\n  let aug-width = measure(augment-row).width\n  let rest-width = measure(matrix).width - aug-width - 15pt\n  \n  let lspace = math.underbrace(h(aug-width), left)\n  let rspace = math.underbrace(h(rest-width), right)\n  \n  $\n    #stack(\n      spacing: -0.75em,\n      matrix,\n      grid(columns: 2, lspace, rspace)\n    )\n  $\n}\n\n#let over-mat(matrix, left, right) = context {\n  let augment-row = math.mat(matrix.body.rows.first().slice(0, matrix.body.augment))\n  let aug-width = measure(augment-row).width\n  let rest-width = measure(matrix).width - aug-width - 15pt\n  \n  let lspace = math.overbrace(h(aug-width), left)\n  let rspace = math.overbrace(h(rest-width), right)\n  \n  $\n    #stack(\n      grid(columns: 2, lspace, rspace),\n      matrix,\n    )\n  $\n}\n\n\n$\n  #under-mat(\n    $ mat(augment: #3, 2, 3, 1, 1, 0, 0; 1, 0, 1, 0, 1, 0; 5, 4, 6, 0, 0, 0) $,\n    $ A $, $ I $\n  ) \n  xarrow(\"Gauss\", opposite: \"Jordan\")\n  #move(dy: -0.75em,\n    over-mat(\n      $ mat(\n        augment: #3, 1, 0, 0, 4 slash 7, 2, -3 slash 7; \n        0, 1, 0, 1 slash 7, -1, 1 slash 7; \n        0, 0, 1, -4 slash 7, -1, 3 slash 7) $,\n      $ I $, $ A^(-1) $\n    ) \n  )\n$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/1c829e73d4a11b4d1148094141618b676458d5c8.png\" alt=\"image\" data-base62-sha1=\"44ddzO8bqmNjQS9T2UlByjUIyPC\" width=\"507\" height=\"174\"></p>\n</details>",
      "raw": "There is no nice way to mix multiple `underbrace`s together, so you will have to get creative with `stack` or `grid`. Here is one such PoC (for matrices with the same width each side, **edit:** see below for a more complete approach):\n```typ\n#let under-mat(matrix, left, right) = context {\n  let width = measure(matrix).width / 2 - 10pt\n  let lspace = math.underbrace(h(width), left)\n  let rspace = math.underbrace(h(width), right)\n  \n  $\n    #stack(\n      spacing: -0.75em,\n      matrix,\n      grid(columns: 2, lspace, rspace)\n    )\n  $\n}\n\n\n#under-mat(\n  $ mat(augment: #3, 2, 3, 1, 1, 0, 0; 1, 0, 1, 0, 1, 0; 5, 4, 6, 0, 0, 0) $,\n  $ A $, $ I $\n)\n```\n![image|202x133](upload://xF7GgmBBtCZPatKpuu6dfyGQyyk.png)\n\n**EDIT:** This will modify the baseline of the matrix which might look odd next to matrices without an underbrace or with an overbrace. You can manually adjust it with `#move()`. I have also made an `over-mat`-function just for completeness now with **automatic measuring even for matrices where one side is visually bigger**.\n[details=\"Code and Result\"]\n```typ\n#import \"@preview/xarrow:0.3.1\": xarrow\n\n#let under-mat(matrix, left, right) = context {\n  let augment-row = math.mat(matrix.body.rows.first().slice(0, matrix.body.augment))\n  let aug-width = measure(augment-row).width\n  let rest-width = measure(matrix).width - aug-width - 15pt\n  \n  let lspace = math.underbrace(h(aug-width), left)\n  let rspace = math.underbrace(h(rest-width), right)\n  \n  $\n    #stack(\n      spacing: -0.75em,\n      matrix,\n      grid(columns: 2, lspace, rspace)\n    )\n  $\n}\n\n#let over-mat(matrix, left, right) = context {\n  let augment-row = math.mat(matrix.body.rows.first().slice(0, matrix.body.augment))\n  let aug-width = measure(augment-row).width\n  let rest-width = measure(matrix).width - aug-width - 15pt\n  \n  let lspace = math.overbrace(h(aug-width), left)\n  let rspace = math.overbrace(h(rest-width), right)\n  \n  $\n    #stack(\n      grid(columns: 2, lspace, rspace),\n      matrix,\n    )\n  $\n}\n\n\n$\n  #under-mat(\n    $ mat(augment: #3, 2, 3, 1, 1, 0, 0; 1, 0, 1, 0, 1, 0; 5, 4, 6, 0, 0, 0) $,\n    $ A $, $ I $\n  ) \n  xarrow(\"Gauss\", opposite: \"Jordan\")\n  #move(dy: -0.75em,\n    over-mat(\n      $ mat(\n        augment: #3, 1, 0, 0, 4 slash 7, 2, -3 slash 7; \n        0, 1, 0, 1 slash 7, -1, 1 slash 7; \n        0, 0, 1, -4 slash 7, -1, 3 slash 7) $,\n      $ I $, $ A^(-1) $\n    ) \n  )\n$\n```\n![image|507x174](upload://44ddzO8bqmNjQS9T2UlByjUIyPC.png)\n\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 4,
      "reads": 55,
      "score": 116.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 2048,
      "post_number": 4,
      "username": "Netzwerk2",
      "name": "",
      "created_at": "2024-09-20T14:27:50.223Z",
      "updated_at": "2024-09-20T14:27:50.223Z",
      "cooked": "<p>Thanks so much. That‚Äôs exactly what I need</p>",
      "raw": "Thanks so much. That's exactly what I need",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 8.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 394
    }
  ],
  "scraped_at": "2025-06-10T09:58:37.356906"
}
{
  "topic_metadata": {
    "id": 506,
    "title": "How can I add a label a rotated Figure?",
    "slug": "how-can-i-add-a-label-a-rotated-figure",
    "posts_count": 4,
    "created_at": "2024-09-19T21:18:39.283Z",
    "last_posted_at": "2024-09-19T23:07:40.266Z",
    "views": 317,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "figures",
      "placement"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 353
  },
  "posts": [
    {
      "id": 1956,
      "post_number": 1,
      "username": "fdekerm",
      "name": "Fran√ßois de Kermenguy",
      "created_at": "2024-09-19T21:18:39.422Z",
      "updated_at": "2024-09-23T07:09:37.076Z",
      "cooked": "<p>Hello,<br>\nI‚Äôd like to know how to add a label to a figure to which I‚Äôve applied <span class=\"hashtag-raw\">#rotation</span></p>\n<p>Example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#rotate( -90deg, reflow: true, \nfigure(caption: [...], \n  table(...),\n  kind: table)) &lt;table_1&gt;\n</code></pre>\n<p>In the text, the <span class=\"mention\">@table_1</span> call return an error. I could put the rotate in <span class=\"hashtag-raw\">#figure</span> instead, but the table is large and by doing that the caption is rejected on the next page (and therefore not in the same direction as the figure).</p>\n<p>Merci ! <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hello,\nI'd like to know how to add a label to a figure to which I've applied #rotation\n\nExample: \n\n\n```typ\n#rotate( -90deg, reflow: true, \nfigure(caption: [...], \n  table(...),\n  kind: table)) <table_1>\n```\n\nIn the text, the @table_1 call return an error. I could put the rotate in #figure instead, but the table is large and by doing that the caption is rejected on the next page (and therefore not in the same direction as the figure).\n\nMerci ! :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 1458.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 1958,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-19T21:29:57.618Z",
      "updated_at": "2024-09-19T21:32:13.506Z",
      "cooked": "<p>You are currently attaching the label to the <code>rotate</code> function instead of the figure. Thus, when you later reference that label, Typst does not know that you wanted to reference the figure.</p>\n<p>The syntax you use to attach the label to the figure with <code>&lt;table_1&gt;</code> only works if you are in <em>markup mode</em>. You can read more about the different modes <a href=\"https://typst.app/docs/reference/syntax/#modes\">here</a>, but the most important thing is that you leave markup mode and enter into <em>code mode</em> when you use the <code>#</code> character, as you did in <code>#rotate(...)</code>. This means that you can <strong>not</strong> do something like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// This does not work!\n#rotate(-90deg, reflow: true,\n  figure(\n    caption: [...],\n    table(...)\n  ) &lt;table_1&gt;\n)\n</code></pre>\n<p>as you are in <em>code mode</em>  when you put the figure into the argument of the <code>rotate</code> function. What you can instead do, is to use a content block as the argument, as you then are back in <em>markup mode</em>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#rotate(-90deg, reflow: true)[\n  #figure(\n    caption: [...],\n    table(...)\n  ) &lt;table_1&gt;\n]\n</code></pre>\n<p>As an unrelated note, you don‚Äôt need to explicitly specify the <code>kind: table</code> when the body of the figure is a table, as Typst is smart enough to detect that automatically.</p>",
      "raw": "You are currently attaching the label to the `rotate` function instead of the figure. Thus, when you later reference that label, Typst does not know that you wanted to reference the figure.\n\nThe syntax you use to attach the label to the figure with `<table_1>` only works if you are in _markup mode_. You can read more about the different modes [here](https://typst.app/docs/reference/syntax/#modes), but the most important thing is that you leave markup mode and enter into _code mode_ when you use the `#` character, as you did in `#rotate(...)`. This means that you can **not** do something like\n```typ\n// This does not work!\n#rotate(-90deg, reflow: true,\n  figure(\n    caption: [...],\n    table(...)\n  ) <table_1>\n)\n```\nas you are in _code mode_  when you put the figure into the argument of the `rotate` function. What you can instead do, is to use a content block as the argument, as you then are back in _markup mode_:\n```typ\n#rotate(-90deg, reflow: true)[\n  #figure(\n    caption: [...],\n    table(...)\n  ) <table_1>\n]\n```\n\nAs an unrelated note, you don't need to explicitly specify the `kind: table` when the body of the figure is a table, as Typst is smart enough to detect that automatically.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 45,
      "score": 94.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 1959,
      "post_number": 3,
      "username": "fdekerm",
      "name": "Fran√ßois de Kermenguy",
      "created_at": "2024-09-19T21:40:21.197Z",
      "updated_at": "2024-09-19T21:40:21.197Z",
      "cooked": "<p>Super!  Thanks a lor for this quick and very detailed answer!</p>",
      "raw": "Super!  Thanks a lor for this quick and very detailed answer!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 7.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 1962,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-19T23:07:40.266Z",
      "updated_at": "2024-09-19T23:07:50.738Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/fdekerm\">@fdekerm</a>! Welcome to the forum. I‚Äôve updated your post, as well as <a href=\"https://forum.typst.app/t/heading-style-for-specific-section/507\" class=\"inline-onebox\">Heading style for specific section</a>, to use ```typ at the start of Typst code blocks (instead of just ```) to ensure the code is properly highlighted as Typst code. Make sure to keep this in mind for future posts, as it turns your code more readable <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @fdekerm! Welcome to the forum. I've updated your post, as well as https://forum.typst.app/t/heading-style-for-specific-section/507, to use \\`\\`\\`typ at the start of Typst code blocks (instead of just \\`\\`\\`) to ensure the code is properly highlighted as Typst code. Make sure to keep this in mind for future posts, as it turns your code more readable :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 27.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:58:36.645674"
}
{
  "topic_metadata": {
    "id": 507,
    "title": "How can I adjust the heading style only for specific sections?",
    "slug": "how-can-i-adjust-the-heading-style-only-for-specific-sections",
    "posts_count": 3,
    "created_at": "2024-09-19T21:54:30.296Z",
    "last_posted_at": "2024-09-20T16:51:38.893Z",
    "views": 666,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "frozolotl",
    "tags": [
      "outline"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 297
  },
  "posts": [
    {
      "id": 1961,
      "post_number": 1,
      "username": "fdekerm",
      "name": "Fran√ßois de Kermenguy",
      "created_at": "2024-09-19T21:54:30.446Z",
      "updated_at": "2024-09-22T16:20:32.241Z",
      "cooked": "<p>Hello,<br>\nI‚Äôd like to know how to make my ‚Äú<em>Introduction</em>‚Äù and ‚Äú<em>Conclusion</em>‚Äù parts have a specific heading. I‚Äôve defined a manual style for the different chapters:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): it =&gt; {\n  place(top + right, dy: -4cm, line(\n    length: 7.5cm,\n    stroke: 2pt + maroon,\n    angle: 90deg),)\n    pad(top: 2cm, left: -1cm, right: 10pt, place(top + right, text(font: \"Calibri\", black, hyphenate: false,  it.body)))\n    pad(top: 0.5cm, 10pt, place(top + right, dx: 0cm, dy: -3cm, text(15pt, font: \"Calibri\", \"Chapter\")))\n    place(top + right, dx: 1.5cm, dy: 1cm, text(50pt, font: \"Calibri\", weight: \"regular\", context(counter(heading).get().first())))\n    v(2cm)}\n</code></pre>\n<p>I‚Äôd like not to write ‚ÄúChapter‚Äù nor the number (<code>context(counter(heading).get().first())</code> for the introduction and conclusion.</p>\n<p>Merci <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nfdekerm</p>",
      "raw": "Hello, \nI'd like to know how to make my ‚Äú*Introduction*‚Äù and ‚Äú*Conclusion*‚Äù parts have a specific heading. I've defined a manual style for the different chapters:\n\n```typ\n#show heading.where(level: 1): it => {\n  place(top + right, dy: -4cm, line(\n    length: 7.5cm,\n    stroke: 2pt + maroon,\n    angle: 90deg),)\n    pad(top: 2cm, left: -1cm, right: 10pt, place(top + right, text(font: \"Calibri\", black, hyphenate: false,  it.body)))\n    pad(top: 0.5cm, 10pt, place(top + right, dx: 0cm, dy: -3cm, text(15pt, font: \"Calibri\", \"Chapter\")))\n    place(top + right, dx: 1.5cm, dy: 1cm, text(50pt, font: \"Calibri\", weight: \"regular\", context(counter(heading).get().first())))\n    v(2cm)}\n```\nI'd like not to write ‚ÄúChapter‚Äù nor the number (`context(counter(heading).get().first())` for the introduction and conclusion. \n\nMerci :slight_smile: \nfdekerm",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 63,
      "score": 2702.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 1963,
      "post_number": 2,
      "username": "frozolotl",
      "name": "",
      "created_at": "2024-09-19T23:45:55.445Z",
      "updated_at": "2024-09-19T23:45:55.445Z",
      "cooked": "<p>Generally, you would do this by setting the <code>numbering</code> attribute on Introduction and Conclusion to <code>none</code>.</p>\n<p>Here‚Äôs the basic idea without any custom styling:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1\")\n// By default, numbers are displayed:\n= Design\n// Here, we explicitly remove it:\n#heading(numbering: none)[Conclusion] \n</code></pre>\n<p>Now, with your show-rule, the basic idea is the same, but you will need to check whether any numbering was provided:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1\")\n\n#show heading.where(level: 1): it =&gt; {\n  set text(font: \"Calibri\")\n\n  place(\n    top + right,\n    dy: -4cm,\n    line(\n      length: 7.5cm,\n      stroke: 2pt + maroon,\n      angle: 90deg,\n    ),\n  )\n  pad(\n    top: 2cm,\n    left: -1cm,\n    right: 10pt,\n    place(top + right, text(fill: black, hyphenate: false, it.body)),\n  )\n\n  if it.numbering != none {\n    pad(\n      top: 0.5cm,\n      10pt,\n      place(\n        top + right,\n        dx: 0cm,\n        dy: -3cm,\n        text(15pt)[Chapter],\n      ),\n    )\n    place(\n      top + right,\n      dx: 1.5cm,\n      dy: 1cm,\n      text(\n        50pt,\n        weight: \"regular\",\n        counter(heading).display(it.numbering),\n      ),\n    )\n  }\n\n  v(2cm)\n}\n\n#heading(numbering: none)[Introduction]\n\n#pagebreak()\n= Design\n</code></pre>",
      "raw": "Generally, you would do this by setting the `numbering` attribute on Introduction and Conclusion to `none`.\n\nHere's the basic idea without any custom styling:\n```typ\n#set heading(numbering: \"1.1\")\n// By default, numbers are displayed:\n= Design\n// Here, we explicitly remove it:\n#heading(numbering: none)[Conclusion] \n```\n\nNow, with your show-rule, the basic idea is the same, but you will need to check whether any numbering was provided:\n```typ\n#set heading(numbering: \"1.1\")\n\n#show heading.where(level: 1): it => {\n  set text(font: \"Calibri\")\n\n  place(\n    top + right,\n    dy: -4cm,\n    line(\n      length: 7.5cm,\n      stroke: 2pt + maroon,\n      angle: 90deg,\n    ),\n  )\n  pad(\n    top: 2cm,\n    left: -1cm,\n    right: 10pt,\n    place(top + right, text(fill: black, hyphenate: false, it.body)),\n  )\n\n  if it.numbering != none {\n    pad(\n      top: 0.5cm,\n      10pt,\n      place(\n        top + right,\n        dx: 0cm,\n        dy: -3cm,\n        text(15pt)[Chapter],\n      ),\n    )\n    place(\n      top + right,\n      dx: 1.5cm,\n      dy: 1cm,\n      text(\n        50pt,\n        weight: \"regular\",\n        counter(heading).display(it.numbering),\n      ),\n    )\n  }\n\n  v(2cm)\n}\n\n#heading(numbering: none)[Introduction]\n\n#pagebreak()\n= Design\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 58,
      "score": 111.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 65
    },
    {
      "id": 2076,
      "post_number": 3,
      "username": "fdekerm",
      "name": "Fran√ßois de Kermenguy",
      "created_at": "2024-09-20T16:51:38.893Z",
      "updated_at": "2024-09-20T16:51:38.893Z",
      "cooked": "<p>Thanks a lot, it works perfectly, even in the outline!</p>",
      "raw": "Thanks a lot, it works perfectly, even in the outline!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    }
  ],
  "scraped_at": "2025-06-10T09:58:35.795127"
}
{
  "topic_metadata": {
    "id": 510,
    "title": "How do I draw parabolas?",
    "slug": "how-do-i-draw-parabolas",
    "posts_count": 11,
    "created_at": "2024-09-20T01:17:17.369Z",
    "last_posted_at": "2024-09-22T13:48:53.418Z",
    "views": 394,
    "like_count": 2,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "graphics"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 2154
  },
  "posts": [
    {
      "id": 1988,
      "post_number": 1,
      "username": "thelyfsoshort",
      "name": "Jason Dusek",
      "created_at": "2024-09-20T01:17:17.480Z",
      "updated_at": "2024-09-20T16:00:31.540Z",
      "cooked": "<p>I would really like to make a parabola. I am not sure if I have figured it out, yet.</p>\n<p>Something that looks basically right is a <code>path</code> as follows:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let w = 100mm\n#let start = (0mm, 0mm)\n#let end = (0mm, w)\n\n#let apex-x = w / 2\n#let apex-y = w / 2\n\n// Control point for quadratic Bezier curve.\n#let control-x = w\n#let control-y = w / 2\n\n// Cubic control points\n#let c1-x = w / 2\n#let c1-y = w / 4\n#let c2-x = w / 2\n#let c2-y = 3 * w / 4\n\n#let parabola = [\n  #path(\n    start,\n    (\n      (apex-x, apex-y),\n      (c1-x - apex-x, c1-y - apex-y),\n      (c2-x - apex-x, c2-y - apex-y),\n    ),\n    end,\n  )\n]\n</code></pre>\n<p>At the end of the document, please find a fuller program that creates the following diagram:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/52b9313db0fcac36df7e034d111e03c93908603f.png\" data-download-href=\"https://forum.typst.app/uploads/default/52b9313db0fcac36df7e034d111e03c93908603f\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/52b9313db0fcac36df7e034d111e03c93908603f_2_499x500.png\" alt=\"image\" data-base62-sha1=\"bNNVn3czcpVIDytJHE1R3YaUZ6T\" width=\"499\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/52b9313db0fcac36df7e034d111e03c93908603f_2_499x500.png, https://forum.typst.app/uploads/default/optimized/1X/52b9313db0fcac36df7e034d111e03c93908603f_2_748x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/52b9313db0fcac36df7e034d111e03c93908603f_2_998x1000.png 2x\" data-dominant-color=\"F5F7F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1058√ó1060 103 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>In blue, we have the control polygon of a quadratic Bezier curve. This is translated to a cubic Bezier curve, the control polygon of which is in green. (In Typst, there is a Bezier curve type ‚Äì <code>path</code> ‚Äì which supports only cubic curves.) It certainly does look like a parabola, but the control points that make it look like this don‚Äôt make a whole lot of sense to me.</p>\n<p>A parabola can be easily represented with a <em>quadratic</em> Bezier curve (as far as I can tell, the control point is the point on the directrix opposite the focus) and there is a way to translate quadratic Bezier curves to cubic Bezier curves. Per <a href=\"https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Degree_elevation\" rel=\"noopener nofollow ugc\">‚ÄúDegree Elevation‚Äù on Wikipedia</a>, we learn that ‚ÄúA B√©zier curve of degree n can be converted into a B√©zier curve of degree n + 1 with the same shape.‚Äù.</p>\n<p>According to the formula given by Wikipedia (and other sources), the cubic control points should be:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let c1-x = (2 * control-x / 3) + (start.first() / 3)\n#let c1-y = (2 * control-y / 3) + (start.last() / 3)\n#let c2-x = (2 * control-x / 3) + (end.first() / 3)\n#let c2-y = (2 * control-y / 3) + (end.last() / 3)\n</code></pre>\n<p>However, this results in a lobed curve:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/9577d8298083e779d9132ad2abdd6d13013e0792.png\" data-download-href=\"https://forum.typst.app/uploads/default/9577d8298083e779d9132ad2abdd6d13013e0792\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/9577d8298083e779d9132ad2abdd6d13013e0792_2_499x500.png\" alt=\"image\" data-base62-sha1=\"lkfUkhUxfc8TcmzjYYykXEhteim\" width=\"499\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/9577d8298083e779d9132ad2abdd6d13013e0792_2_499x500.png, https://forum.typst.app/uploads/default/optimized/1X/9577d8298083e779d9132ad2abdd6d13013e0792_2_748x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/9577d8298083e779d9132ad2abdd6d13013e0792_2_998x1000.png 2x\" data-dominant-color=\"F5F7F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1054√ó1056 103 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Now I am just not sure if I really made a parabola or not, since I really just eyeballed it.</p>\n<p>Here is the code for the full diagram:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(paper: \"a4\")\n\n#let w = 100mm\n#let start = (0mm, 0mm)\n#let end = (0mm, w)\n\n#let apex-x = w / 2\n#let apex-y = w / 2\n\n// Control point for quadratic Bezier curve.\n#let control-x = w\n#let control-y = w / 2\n\n// Cubic control points\n#let c1-x = w / 2\n#let c1-y = w / 4\n#let c2-x = w / 2\n#let c2-y = 3 * w / 4\n// #let c1-x = (2 * control-x / 3) + (start.first() / 3)\n// #let c1-y = (2 * control-y / 3) + (start.last() / 3)\n// #let c2-x = (2 * control-x / 3) + (end.first() / 3)\n// #let c2-y = (2 * control-y / 3) + (end.last() / 3)\n\n#let parabola = [\n  #path(\n    start,\n    (\n      (apex-x, apex-y),\n      (c1-x - apex-x, c1-y - apex-y),\n      (c2-x - apex-x, c2-y - apex-y),\n    ),\n    end,\n    stroke: black + 1mm,\n  )\n]\n\n#let grid = {\n  let steps = 10\n  let step = w / steps\n  let cell = rect(width: step, height: step, stroke: gray + 0.1mm)\n\n  for i in array.range(0, steps) {\n    for j in array.range(0, steps) {\n      place(dx: i * step, dy: j * step, cell)\n    }\n  }\n\n  place(\n    dx: 0mm,\n    dy: 0mm,\n    polygon(start, (control-x, control-y), end,\n            stroke: blue.transparentize(25%) + 1mm)\n  )\n\n  place(\n    dx: 0mm,\n    dy: 0mm,\n    polygon(start, (c1-x, c1-y), (c2-x, c2-y), end,\n            stroke: green.transparentize(50%) + 0.5mm)\n  )\n}\n\n#place(dx: 0mm, dy: 0mm, parabola)\n#place(dx: 0mm, dy: 0mm, grid)\n</code></pre>",
      "raw": "I would really like to make a parabola. I am not sure if I have figured it out, yet.\n\nSomething that looks basically right is a `path` as follows:\n\n```typst\n#let w = 100mm\n#let start = (0mm, 0mm)\n#let end = (0mm, w)\n\n#let apex-x = w / 2\n#let apex-y = w / 2\n\n// Control point for quadratic Bezier curve.\n#let control-x = w\n#let control-y = w / 2\n\n// Cubic control points\n#let c1-x = w / 2\n#let c1-y = w / 4\n#let c2-x = w / 2\n#let c2-y = 3 * w / 4\n\n#let parabola = [\n  #path(\n    start,\n    (\n      (apex-x, apex-y),\n      (c1-x - apex-x, c1-y - apex-y),\n      (c2-x - apex-x, c2-y - apex-y),\n    ),\n    end,\n  )\n]\n````\n\nAt the end of the document, please find a fuller program that creates the following diagram:\n\n![image|499x500](upload://bNNVn3czcpVIDytJHE1R3YaUZ6T.png)\n\nIn blue, we have the control polygon of a quadratic Bezier curve. This is translated to a cubic Bezier curve, the control polygon of which is in green. (In Typst, there is a Bezier curve type -- `path` -- which supports only cubic curves.) It certainly does look like a parabola, but the control points that make it look like this don't make a whole lot of sense to me.\n\nA parabola can be easily represented with a *quadratic* Bezier curve (as far as I can tell, the control point is the point on the directrix opposite the focus) and there is a way to translate quadratic Bezier curves to cubic Bezier curves. Per [\"Degree Elevation\" on Wikipedia](https://en.wikipedia.org/wiki/B√©zier_curve#Degree_elevation), we learn that \"A B√©zier curve of degree n can be converted into a B√©zier curve of degree n + 1 with the same shape.\".\n\nAccording to the formula given by Wikipedia (and other sources), the cubic control points should be:\n\n```typst\n#let c1-x = (2 * control-x / 3) + (start.first() / 3)\n#let c1-y = (2 * control-y / 3) + (start.last() / 3)\n#let c2-x = (2 * control-x / 3) + (end.first() / 3)\n#let c2-y = (2 * control-y / 3) + (end.last() / 3)\n```\n\nHowever, this results in a lobed curve:\n\n![image|499x500](upload://lkfUkhUxfc8TcmzjYYykXEhteim.png)\n\nNow I am just not sure if I really made a parabola or not, since I really just eyeballed it.\n\nHere is the code for the full diagram:\n\n```typst\n#set page(paper: \"a4\")\n\n#let w = 100mm\n#let start = (0mm, 0mm)\n#let end = (0mm, w)\n\n#let apex-x = w / 2\n#let apex-y = w / 2\n\n// Control point for quadratic Bezier curve.\n#let control-x = w\n#let control-y = w / 2\n\n// Cubic control points\n#let c1-x = w / 2\n#let c1-y = w / 4\n#let c2-x = w / 2\n#let c2-y = 3 * w / 4\n// #let c1-x = (2 * control-x / 3) + (start.first() / 3)\n// #let c1-y = (2 * control-y / 3) + (start.last() / 3)\n// #let c2-x = (2 * control-x / 3) + (end.first() / 3)\n// #let c2-y = (2 * control-y / 3) + (end.last() / 3)\n\n#let parabola = [\n  #path(\n    start,\n    (\n      (apex-x, apex-y),\n      (c1-x - apex-x, c1-y - apex-y),\n      (c2-x - apex-x, c2-y - apex-y),\n    ),\n    end,\n    stroke: black + 1mm,\n  )\n]\n\n#let grid = {\n  let steps = 10\n  let step = w / steps\n  let cell = rect(width: step, height: step, stroke: gray + 0.1mm)\n\n  for i in array.range(0, steps) {\n    for j in array.range(0, steps) {\n      place(dx: i * step, dy: j * step, cell)\n    }\n  }\n\n  place(\n    dx: 0mm,\n    dy: 0mm,\n    polygon(start, (control-x, control-y), end,\n            stroke: blue.transparentize(25%) + 1mm)\n  )\n\n  place(\n    dx: 0mm,\n    dy: 0mm,\n    polygon(start, (c1-x, c1-y), (c2-x, c2-y), end,\n            stroke: green.transparentize(50%) + 0.5mm)\n  )\n}\n\n#place(dx: 0mm, dy: 0mm, parabola)\n#place(dx: 0mm, dy: 0mm, grid)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 83,
      "score": 861.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 202
    },
    {
      "id": 1989,
      "post_number": 2,
      "username": "Enivex",
      "name": "Enivex",
      "created_at": "2024-09-20T01:30:41.154Z",
      "updated_at": "2024-09-20T01:30:41.154Z",
      "cooked": "<p>Unless you really want to use path directly, I‚Äôd suggest you use Cetz instead. It‚Äôs vastly more user friendly</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/universe/package/cetz/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/universe/package/cetz/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/universe/package/cetz/\" target=\"_blank\" rel=\"noopener\">cetz ‚Äì Typst Universe</a></h3>\n\n  <p>Drawing with Typst made easy, providing an API inspired by TikZ and Processing. Includes modules for plotting, charts and tree layout.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Unless you really want to use path directly, I'd suggest you use Cetz instead. It's vastly more user friendly\n\nhttps://typst.app/universe/package/cetz/",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 75,
      "score": 60.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 5
    },
    {
      "id": 1992,
      "post_number": 3,
      "username": "thelyfsoshort",
      "name": "Jason Dusek",
      "created_at": "2024-09-20T02:46:48.334Z",
      "updated_at": "2024-09-20T02:46:48.334Z",
      "cooked": "<p>I would really like to understand <code>path</code>.</p>",
      "raw": "I would really like to understand `path`.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 73,
      "score": 34.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 202
    },
    {
      "id": 1996,
      "post_number": 4,
      "username": "Enivex",
      "name": "Enivex",
      "created_at": "2024-09-20T04:01:43.376Z",
      "updated_at": "2024-09-20T04:21:24.056Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/fenjalien\">@fenjalien</a> or <a class=\"mention\" href=\"/u/jwolf\">@jwolf</a> might be the best ones to answer. At one point I did know this, but forgot the details.</p>\n<p>I think it‚Äôs mostly just making sure you‚Äôre talking about the same control points.</p>",
      "raw": "@fenjalien or @jwolf might be the best ones to answer. At one point I did know this, but forgot the details.\n\nI think it's mostly just making sure you're talking about the same control points.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 71,
      "score": 14.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 5
    },
    {
      "id": 2070,
      "post_number": 5,
      "username": "thelyfsoshort",
      "name": "Jason Dusek",
      "created_at": "2024-09-20T15:13:30.484Z",
      "updated_at": "2024-09-20T15:13:30.484Z",
      "cooked": "<p>Maybe it‚Äôs actually two quadratic curves, not cubic at all.</p>",
      "raw": "Maybe it's actually two quadratic curves, not cubic at all.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 62,
      "score": 12.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 202
    },
    {
      "id": 2082,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-20T19:36:27.404Z",
      "updated_at": "2024-09-22T13:48:26.248Z",
      "cooked": "<p>ok, I figured it out. The docs are maybe a bit hard to parse here‚Ä¶ tldr: the first control point of the cubic bezier, which by Wikipedia‚Äôs formula results in a quadratic bezier, needs to be specified <em>with the start point</em>. In a Typst path, you specify control points for specific vertices, not for specific curves.</p>\n<p>Let me put some code and an image first:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let weight(a, (xa, ya), b, (xb, yb)) = {\n  (a * xa + b * xb, a * ya + b * yb)\n}\n\n#let dot((x, y), stroke: black) = {\n  place(path(\n    stroke: (thickness: 3pt, paint: stroke, join: \"round\"),\n    closed: true,\n    (x - 1pt, y - 1pt),\n    (x - 1pt, y + 1pt),\n    (x + 1pt, y + 1pt),\n    (x + 1pt, y - 1pt),\n  ))\n}\n\n#let w = 100mm\n#let start = (0mm, 0mm)\n#let end = (0mm, w)\n#let control = (w, w/2)\n\n#{\n  let c1 = weight(1/3, start, 2/3, control)\n  let c2 = weight(2/3, control, 1/3, end)\n\n  dot(start)\n  dot(c1, stroke: red)\n  dot(control, stroke: blue)\n  dot(c2, stroke: red)\n  dot(end)\n\n  place(path(\n    start,\n    end,\n  ))\n  // (1)\n  place(path(\n    stroke: blue,\n    (\n      start,\n      weight(1, start, -1, control),\n    ),\n    (\n      end,\n      weight(1, control, -1, end),\n    ),\n  ))\n  // (2)\n  place(path(\n    stroke: blue,\n    start,\n    (\n      end,\n      weight(1, control, -1, end),\n    ),\n  ))\n  // (3)\n  place(path(\n    stroke: red,\n    (\n      start,\n      (0mm, 0mm),\n      weight(1, c1, -1, start),\n    ),\n    (\n      end,\n      weight(1, c2, -1, end),\n      (0mm, 0mm),\n    ),\n  ))\n}\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/5fd9cb096a86a5a0a26305d532f7d04d1b60e2ec.png\" data-download-href=\"https://forum.typst.app/uploads/default/5fd9cb096a86a5a0a26305d532f7d04d1b60e2ec\" title=\"bezier\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/5fd9cb096a86a5a0a26305d532f7d04d1b60e2ec_2_375x375.png\" alt=\"bezier\" data-base62-sha1=\"dFVYImNAZ9lYgHL460qtAXAPF24\" width=\"375\" height=\"375\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/5fd9cb096a86a5a0a26305d532f7d04d1b60e2ec_2_375x375.png, https://forum.typst.app/uploads/default/optimized/1X/5fd9cb096a86a5a0a26305d532f7d04d1b60e2ec_2_562x562.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/5fd9cb096a86a5a0a26305d532f7d04d1b60e2ec_2_750x750.png 2x\" data-dominant-color=\"FCFCFD\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">bezier</span><span class=\"informations\">1252√ó1252 132 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<hr>\n<p>For (1), let‚Äôs look what the <a href=\"https://typst.app/docs/reference/visualize/path/#parameters-vertices\">docs</a> say:</p>\n<blockquote>\n<p>An array of two points, the first being the vertex and the second being the control point. The control point is expressed relative to the vertex and is mirrored to get the second control point. The given control point is the one that affects the curve coming <em>into</em> this vertex (even for the first point). The mirrored control point affects the curve going out of this vertex.</p>\n</blockquote>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">  place(path(\n    stroke: blue,\n    (\n      start,\n      weight(1, start, -1, control),\n    ),\n    (\n      end,\n      weight(1, control, -1, end),\n    ),\n  ))\n</code></pre>\n<p>We have two points with one control point each, and we are drawing a bezier <em>going out of</em> <code>start</code> and <em>going into</em> <code>end</code>. Going into start would be <code>start + (start - control)</code> (remember, relative to start), out is thus <code>start - (start - control) = control</code>. Going into end is <code>end + (control - end) = control</code>.<br>\nSo we end up with a bezier curve with the points <code>(start, control, control, end)</code> - a symmentrical cubic bezier with coinciding control points, great.</p>\n<p>(2) is a bit of a naive attempt:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">  place(path(\n    stroke: blue,\n    start,\n    (\n      end,\n      weight(1, control, -1, end),\n    ),\n  ))\n</code></pre>\n<p>With only a single point, the start control points are just the <code>start</code> point itself. Thus the resulting bezier is <code>(start, start, control, end)</code>. I think that should be asymmetric, although it doesn‚Äôt seem like it‚Ä¶ maybe I‚Äôm still missing something there.</p>\n<p>(3) is what you were after</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">  // (3)\n  place(path(\n    stroke: red,\n    (\n      start,\n      (0mm, 0mm),\n      weight(1, c1, -1, start),\n    ),\n    (\n      end,\n      weight(1, c2, -1, end),\n      (0mm, 0mm),\n    ),\n  ))\n</code></pre>\n<p>Here I used three coordinates per vertex of the path:</p>\n<blockquote>\n<p>An array of three points, the first being the vertex and the next being the control points (control point for curves coming in and out, respectively).</p>\n</blockquote>\n<p>We don‚Äôt need the control point going into <code>start</code> or out of <code>end</code> so I set these to the vertices themselves (in relative coordinates). The result is the cubic bezier <code>(start, c1, c2, end)</code>!</p>\n<hr>\n<p>Let‚Äôs look at your path again:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let parabola = [\n  #path(\n    start,\n    (\n      (apex-x, apex-y),\n      (c1-x - apex-x, c1-y - apex-y),\n      (c2-x - apex-x, c2-y - apex-y),\n    ),\n    end,\n  )\n]\n</code></pre>\n<p>This resulted in two curves: <code>(start, start, c1, apex)</code> and <code>(apex, c2, end, end)</code>.</p>",
      "raw": "ok, I figured it out. The docs are maybe a bit hard to parse here... tldr: the first control point of the cubic bezier, which by Wikipedia's formula results in a quadratic bezier, needs to be specified _with the start point_. In a Typst path, you specify control points for specific vertices, not for specific curves.\n\nLet me put some code and an image first:\n```typ\n#let weight(a, (xa, ya), b, (xb, yb)) = {\n  (a * xa + b * xb, a * ya + b * yb)\n}\n\n#let dot((x, y), stroke: black) = {\n  place(path(\n    stroke: (thickness: 3pt, paint: stroke, join: \"round\"),\n    closed: true,\n    (x - 1pt, y - 1pt),\n    (x - 1pt, y + 1pt),\n    (x + 1pt, y + 1pt),\n    (x + 1pt, y - 1pt),\n  ))\n}\n\n#let w = 100mm\n#let start = (0mm, 0mm)\n#let end = (0mm, w)\n#let control = (w, w/2)\n\n#{\n  let c1 = weight(1/3, start, 2/3, control)\n  let c2 = weight(2/3, control, 1/3, end)\n\n  dot(start)\n  dot(c1, stroke: red)\n  dot(control, stroke: blue)\n  dot(c2, stroke: red)\n  dot(end)\n\n  place(path(\n    start,\n    end,\n  ))\n  // (1)\n  place(path(\n    stroke: blue,\n    (\n      start,\n      weight(1, start, -1, control),\n    ),\n    (\n      end,\n      weight(1, control, -1, end),\n    ),\n  ))\n  // (2)\n  place(path(\n    stroke: blue,\n    start,\n    (\n      end,\n      weight(1, control, -1, end),\n    ),\n  ))\n  // (3)\n  place(path(\n    stroke: red,\n    (\n      start,\n      (0mm, 0mm),\n      weight(1, c1, -1, start),\n    ),\n    (\n      end,\n      weight(1, c2, -1, end),\n      (0mm, 0mm),\n    ),\n  ))\n}\n```\n\n![bezier|500x500, 75%](upload://dFVYImNAZ9lYgHL460qtAXAPF24.png)\n\n---\n\nFor (1), let's look what the [docs](https://typst.app/docs/reference/visualize/path/#parameters-vertices) say:\n> An array of two points, the first being the vertex and the second being the control point. The control point is expressed relative to the vertex and is mirrored to get the second control point. The given control point is the one that affects the curve coming *into* this vertex (even for the first point). The mirrored control point affects the curve going out of this vertex.\n```typc\n  place(path(\n    stroke: blue,\n    (\n      start,\n      weight(1, start, -1, control),\n    ),\n    (\n      end,\n      weight(1, control, -1, end),\n    ),\n  ))\n```\nWe have two points with one control point each, and we are drawing a bezier _going out of_ `start` and _going into_ `end`. Going into start would be `start + (start - control)` (remember, relative to start), out is thus `start - (start - control) = control`. Going into end is `end + (control - end) = control`.\nSo we end up with a bezier curve with the points `(start, control, control, end)` - a symmentrical cubic bezier with coinciding control points, great.\n\n(2) is a bit of a naive attempt:\n```typc\n  place(path(\n    stroke: blue,\n    start,\n    (\n      end,\n      weight(1, control, -1, end),\n    ),\n  ))\n```\nWith only a single point, the start control points are just the `start` point itself. Thus the resulting bezier is `(start, start, control, end)`. I think that should be asymmetric, although it doesn't seem like it... maybe I'm still missing something there.\n\n(3) is what you were after\n```typc\n  // (3)\n  place(path(\n    stroke: red,\n    (\n      start,\n      (0mm, 0mm),\n      weight(1, c1, -1, start),\n    ),\n    (\n      end,\n      weight(1, c2, -1, end),\n      (0mm, 0mm),\n    ),\n  ))\n```\nHere I used three coordinates per vertex of the path:\n> An array of three points, the first being the vertex and the next being the control points (control point for curves coming in and out, respectively).\n\nWe don't need the control point going into `start` or out of `end` so I set these to the vertices themselves (in relative coordinates). The result is the cubic bezier `(start, c1, c2, end)`!\n\n---\n\nLet's look at your path again:\n```typ\n#let parabola = [\n  #path(\n    start,\n    (\n      (apex-x, apex-y),\n      (c1-x - apex-x, c1-y - apex-y),\n      (c2-x - apex-x, c2-y - apex-y),\n    ),\n    end,\n  )\n]\n```\n\nThis resulted in two curves: `(start, start, c1, apex)` and `(apex, c2, end, end)`.",
      "reply_to_post_number": 3,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 59,
      "score": 21.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2193,
      "post_number": 7,
      "username": "thelyfsoshort",
      "name": "Jason Dusek",
      "created_at": "2024-09-21T20:31:27.214Z",
      "updated_at": "2024-09-21T20:31:27.214Z",
      "cooked": "<p>Here is a small update that makes it clear the sort-of-right shape is not the target parabola. The red dots are points on the parabola.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/bd4346d40750edf8108e1dd58feb43c2a4db1741.png\" data-download-href=\"https://forum.typst.app/uploads/default/bd4346d40750edf8108e1dd58feb43c2a4db1741\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/bd4346d40750edf8108e1dd58feb43c2a4db1741_2_501x500.png\" alt=\"image\" data-base62-sha1=\"r0inEzh2wLPmzKcJkkP9DV2GJ6F\" width=\"501\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/bd4346d40750edf8108e1dd58feb43c2a4db1741_2_501x500.png, https://forum.typst.app/uploads/default/optimized/1X/bd4346d40750edf8108e1dd58feb43c2a4db1741_2_751x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/bd4346d40750edf8108e1dd58feb43c2a4db1741_2_1002x1000.png 2x\" data-dominant-color=\"F7F8F9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1170√ó1166 123 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(paper: \"a4\")\n\n#let w = 100mm\n#let start = (0mm, 0mm)\n#let end = (0mm, w)\n\n#let apex-x = w / 2\n#let apex-y = w / 2\n\n// Control point for quadratic Bezier curve.\n#let control-x = w\n#let control-y = w / 2\n\n// Cubic control points\n#let c1-x = w / 2\n#let c1-y = w / 4\n#let c2-x = w / 2\n#let c2-y = 3 * w / 4\n// #let c1-x = (2 * control-x / 3) + (start.first() / 3)\n// #let c1-y = (2 * control-y / 3) + (start.last() / 3)\n// #let c2-x = (2 * control-x / 3) + (end.first() / 3)\n// #let c2-y = (2 * control-y / 3) + (end.last() / 3)\n\n#let parabola = [\n  #path(\n    start,\n    (\n      (apex-x, apex-y),\n      (c1-x - apex-x, c1-y - apex-y),\n      (c2-x - apex-x, c2-y - apex-y),\n    ),\n    end,\n    stroke: black + 1mm,\n  )\n]\n\n#let grid = {\n  let steps = 10\n  let step = w / steps\n  let cell = rect(width: step, height: step, stroke: gray + 0.1mm)\n\n  for i in array.range(0, steps) {\n    for j in array.range(0, steps) {\n      place(dx: i * step, dy: j * step, cell)\n    }\n  }\n\n  place(\n    dx: 0mm,\n    dy: 0mm,\n    polygon(start, (control-x, control-y), end,\n            stroke: blue.transparentize(25%) + 1mm)\n  )\n\n  place(\n    dx: 0mm,\n    dy: 0mm,\n    polygon(start, (c1-x, c1-y), (c2-x, c2-y), end,\n            stroke: green.transparentize(50%) + 0.5mm)\n  )\n}\n\n#let parabola-points = {\n  let steps = 50\n  let step = w / steps\n  let r = 0.5mm\n  let dot = circle(radius: r, fill: red, stroke: none)\n\n  for i in array.range(0, steps) {\n    let y = (step / 2) + (i * step)\n    let t = (y - (w / 2)) / w\n    let x = (w / 2) -  (2 * t * t * w)\n    place(dx: x - r, dy: y - r, dot)\n  }\n}\n\n#place(dx: 0mm, dy: 0mm, parabola)\n#place(dx: 0mm, dy: 0mm, grid)\n#place(dx: 0mm, dy: 0mm, parabola-points)\n</code></pre>",
      "raw": "Here is a small update that makes it clear the sort-of-right shape is not the target parabola. The red dots are points on the parabola.\n\n![image|501x500](upload://r0inEzh2wLPmzKcJkkP9DV2GJ6F.png)\n\n\n\n```typst\n#set page(paper: \"a4\")\n\n#let w = 100mm\n#let start = (0mm, 0mm)\n#let end = (0mm, w)\n\n#let apex-x = w / 2\n#let apex-y = w / 2\n\n// Control point for quadratic Bezier curve.\n#let control-x = w\n#let control-y = w / 2\n\n// Cubic control points\n#let c1-x = w / 2\n#let c1-y = w / 4\n#let c2-x = w / 2\n#let c2-y = 3 * w / 4\n// #let c1-x = (2 * control-x / 3) + (start.first() / 3)\n// #let c1-y = (2 * control-y / 3) + (start.last() / 3)\n// #let c2-x = (2 * control-x / 3) + (end.first() / 3)\n// #let c2-y = (2 * control-y / 3) + (end.last() / 3)\n\n#let parabola = [\n  #path(\n    start,\n    (\n      (apex-x, apex-y),\n      (c1-x - apex-x, c1-y - apex-y),\n      (c2-x - apex-x, c2-y - apex-y),\n    ),\n    end,\n    stroke: black + 1mm,\n  )\n]\n\n#let grid = {\n  let steps = 10\n  let step = w / steps\n  let cell = rect(width: step, height: step, stroke: gray + 0.1mm)\n\n  for i in array.range(0, steps) {\n    for j in array.range(0, steps) {\n      place(dx: i * step, dy: j * step, cell)\n    }\n  }\n\n  place(\n    dx: 0mm,\n    dy: 0mm,\n    polygon(start, (control-x, control-y), end,\n            stroke: blue.transparentize(25%) + 1mm)\n  )\n\n  place(\n    dx: 0mm,\n    dy: 0mm,\n    polygon(start, (c1-x, c1-y), (c2-x, c2-y), end,\n            stroke: green.transparentize(50%) + 0.5mm)\n  )\n}\n\n#let parabola-points = {\n  let steps = 50\n  let step = w / steps\n  let r = 0.5mm\n  let dot = circle(radius: r, fill: red, stroke: none)\n\n  for i in array.range(0, steps) {\n    let y = (step / 2) + (i * step)\n    let t = (y - (w / 2)) / w\n    let x = (w / 2) -  (2 * t * t * w)\n    place(dx: x - r, dy: y - r, dot)\n  }\n}\n\n#place(dx: 0mm, dy: 0mm, parabola)\n#place(dx: 0mm, dy: 0mm, grid)\n#place(dx: 0mm, dy: 0mm, parabola-points)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 202
    },
    {
      "id": 2194,
      "post_number": 8,
      "username": "thelyfsoshort",
      "name": "Jason Dusek",
      "created_at": "2024-09-21T20:33:14.140Z",
      "updated_at": "2024-09-21T20:33:14.140Z",
      "cooked": "<p>What is <code>weight()</code>? It doesn‚Äôt seem to be a standard library function.</p>",
      "raw": "What is `weight()`? It doesn't seem to be a standard library function.",
      "reply_to_post_number": 6,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 22.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 202
    },
    {
      "id": 2198,
      "post_number": 9,
      "username": "thelyfsoshort",
      "name": "Jason Dusek",
      "created_at": "2024-09-21T21:01:09.128Z",
      "updated_at": "2024-09-21T21:01:09.128Z",
      "cooked": "<p>Something very close to your code seems to be right.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/ab794bce0f3b7072f02b7a79632c4880fc64191a.png\" data-download-href=\"https://forum.typst.app/uploads/default/ab794bce0f3b7072f02b7a79632c4880fc64191a\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/ab794bce0f3b7072f02b7a79632c4880fc64191a_2_498x499.png\" alt=\"image\" data-base62-sha1=\"osVwr47YsGzw1kGufQzNrcmJ8pQ\" width=\"498\" height=\"499\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/ab794bce0f3b7072f02b7a79632c4880fc64191a_2_498x499.png, https://forum.typst.app/uploads/default/optimized/1X/ab794bce0f3b7072f02b7a79632c4880fc64191a_2_747x748.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/ab794bce0f3b7072f02b7a79632c4880fc64191a_2_996x998.png 2x\" data-dominant-color=\"F7F8F9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1144√ó1148 117 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Here we are using two control points, where one control point is ‚Äúthe point itself‚Äù (<code>0, 0</code> in relative terms) and the other is one of the control points calculated using the calculation per <a href=\"https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Degree_elevation\" rel=\"noopener nofollow ugc\">‚ÄúDegree Elevation‚Äù on Wikipedia</a>.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let w = 100mm\n#let start = (0mm, 0mm)\n#let end = (0mm, w)\n\n#let apex-x = w / 2\n#let apex-y = w / 2\n\n// Control point for quadratic Bezier curve.\n#let control-x = w\n#let control-y = w / 2\n\n// Cubic control points\n#let c1-x = (2 * control-x / 3) + (start.first() / 3)\n#let c1-y = (2 * control-y / 3) + (start.last() / 3)\n#let c2-x = (2 * control-x / 3) + (end.first() / 3)\n#let c2-y = (2 * control-y / 3) + (end.last() / 3)\n\n#let parabola = [\n  #path(\n    (start, (0mm, 0mm), (c1-x - start.first(), c1-y - start.last())),\n    (end, (c2-x - end.first(), c2-y - end.last()), (0mm, 0mm)),\n    stroke: black + 1mm,\n  )\n]\n</code></pre>\n<p>Here is the code for rendering the curve with the control polygons and grid:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(paper: \"a4\")\n\n#let w = 100mm\n#let start = (0mm, 0mm)\n#let end = (0mm, w)\n\n#let apex-x = w / 2\n#let apex-y = w / 2\n\n// Control point for quadratic Bezier curve.\n#let control-x = w\n#let control-y = w / 2\n\n// Cubic control points\n#let c1-x = (2 * control-x / 3) + (start.first() / 3)\n#let c1-y = (2 * control-y / 3) + (start.last() / 3)\n#let c2-x = (2 * control-x / 3) + (end.first() / 3)\n#let c2-y = (2 * control-y / 3) + (end.last() / 3)\n\n#let parabola = [\n  #path(\n    (start, (0mm, 0mm), (c1-x - start.first(), c1-y - start.last())),\n    (end, (c2-x - end.first(), c2-y - end.last()), (0mm, 0mm)),\n    stroke: black + 1mm,\n  )\n]\n\n#let grid = {\n  let steps = 10\n  let step = w / steps\n  let cell = rect(width: step, height: step, stroke: gray + 0.1mm)\n\n  for i in array.range(0, steps) {\n    for j in array.range(0, steps) {\n      place(dx: i * step, dy: j * step, cell)\n    }\n  }\n\n  place(\n    dx: 0mm,\n    dy: 0mm,\n    polygon(start, (control-x, control-y), end,\n            stroke: blue.transparentize(25%) + 1mm)\n  )\n\n  place(\n    dx: 0mm,\n    dy: 0mm,\n    polygon(start, (c1-x, c1-y), (c2-x, c2-y), end,\n            stroke: green.transparentize(50%) + 0.5mm)\n  )\n}\n\n#let parabola-points = {\n  let steps = 50\n  let step = w / steps\n  let r = 0.5mm\n  let dot = circle(radius: r, fill: red, stroke: none)\n\n  for i in array.range(0, steps) {\n    let y = (step / 2) + (i * step)\n    let t = (y - (w / 2)) / w\n    let x = (w / 2) -  (2 * t * t * w)\n    place(dx: x - r, dy: y - r, dot)\n  }\n}\n\n#place(dx: 0mm, dy: 0mm, parabola)\n#place(dx: 0mm, dy: 0mm, grid)\n#place(dx: 0mm, dy: 0mm, parabola-points)\n\n</code></pre>",
      "raw": "Something very close to your code seems to be right.\n\n![image|498x499](upload://osVwr47YsGzw1kGufQzNrcmJ8pQ.png)\n\nHere we are using two control points, where one control point is \"the point itself\" (`0, 0` in relative terms) and the other is one of the control points calculated using the calculation per [‚ÄúDegree Elevation‚Äù on Wikipedia](https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Degree_elevation).\n\n```typst\n#let w = 100mm\n#let start = (0mm, 0mm)\n#let end = (0mm, w)\n\n#let apex-x = w / 2\n#let apex-y = w / 2\n\n// Control point for quadratic Bezier curve.\n#let control-x = w\n#let control-y = w / 2\n\n// Cubic control points\n#let c1-x = (2 * control-x / 3) + (start.first() / 3)\n#let c1-y = (2 * control-y / 3) + (start.last() / 3)\n#let c2-x = (2 * control-x / 3) + (end.first() / 3)\n#let c2-y = (2 * control-y / 3) + (end.last() / 3)\n\n#let parabola = [\n  #path(\n    (start, (0mm, 0mm), (c1-x - start.first(), c1-y - start.last())),\n    (end, (c2-x - end.first(), c2-y - end.last()), (0mm, 0mm)),\n    stroke: black + 1mm,\n  )\n]\n```\n\nHere is the code for rendering the curve with the control polygons and grid:\n\n```typst\n#set page(paper: \"a4\")\n\n#let w = 100mm\n#let start = (0mm, 0mm)\n#let end = (0mm, w)\n\n#let apex-x = w / 2\n#let apex-y = w / 2\n\n// Control point for quadratic Bezier curve.\n#let control-x = w\n#let control-y = w / 2\n\n// Cubic control points\n#let c1-x = (2 * control-x / 3) + (start.first() / 3)\n#let c1-y = (2 * control-y / 3) + (start.last() / 3)\n#let c2-x = (2 * control-x / 3) + (end.first() / 3)\n#let c2-y = (2 * control-y / 3) + (end.last() / 3)\n\n#let parabola = [\n  #path(\n    (start, (0mm, 0mm), (c1-x - start.first(), c1-y - start.last())),\n    (end, (c2-x - end.first(), c2-y - end.last()), (0mm, 0mm)),\n    stroke: black + 1mm,\n  )\n]\n\n#let grid = {\n  let steps = 10\n  let step = w / steps\n  let cell = rect(width: step, height: step, stroke: gray + 0.1mm)\n\n  for i in array.range(0, steps) {\n    for j in array.range(0, steps) {\n      place(dx: i * step, dy: j * step, cell)\n    }\n  }\n\n  place(\n    dx: 0mm,\n    dy: 0mm,\n    polygon(start, (control-x, control-y), end,\n            stroke: blue.transparentize(25%) + 1mm)\n  )\n\n  place(\n    dx: 0mm,\n    dy: 0mm,\n    polygon(start, (c1-x, c1-y), (c2-x, c2-y), end,\n            stroke: green.transparentize(50%) + 0.5mm)\n  )\n}\n\n#let parabola-points = {\n  let steps = 50\n  let step = w / steps\n  let r = 0.5mm\n  let dot = circle(radius: r, fill: red, stroke: none)\n\n  for i in array.range(0, steps) {\n    let y = (step / 2) + (i * step)\n    let t = (y - (w / 2)) / w\n    let x = (w / 2) -  (2 * t * t * w)\n    place(dx: x - r, dy: y - r, dot)\n  }\n}\n\n#place(dx: 0mm, dy: 0mm, parabola)\n#place(dx: 0mm, dy: 0mm, grid)\n#place(dx: 0mm, dy: 0mm, parabola-points)\n\n```",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 23.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 202
    },
    {
      "id": 2200,
      "post_number": 10,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-21T21:06:05.366Z",
      "updated_at": "2024-09-21T21:07:13.776Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"thelyfsoshort\" data-post=\"8\" data-topic=\"510\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/thelyfsoshort/48/185_2.png\" class=\"avatar\"> thelyfsoshort:</div>\n<blockquote>\n<p>What is <code>weight()</code>? It doesn‚Äôt seem to be a standard library function.</p>\n</blockquote>\n</aside>\n<p>Sorry, I missed it while copy pasting (<code>dot</code> as well). I‚Äôll correct my post later, but it‚Äôs basically a weighted sum of 2D points/vectors: <code>weight(a, v, b, w) = a * v + b * w</code>.</p>",
      "raw": "[quote=\"thelyfsoshort, post:8, topic:510, full:true\"]\nWhat is `weight()`? It doesn‚Äôt seem to be a standard library function.\n[/quote]\n\nSorry, I missed it while copy pasting (`dot` as well). I'll correct my post later, but it's basically a weighted sum of 2D points/vectors: `weight(a, v, b, w) = a * v + b * w`.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 37,
      "score": 7.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2242,
      "post_number": 11,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-22T13:48:53.418Z",
      "updated_at": "2024-09-22T13:48:53.418Z",
      "cooked": "<p>(I edited the original reply)</p>",
      "raw": "(I edited the original reply)",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 5.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:58:35.076114"
}
{
  "topic_metadata": {
    "id": 513,
    "title": "How do I insert an image into the header?",
    "slug": "how-do-i-insert-an-image-into-the-header",
    "posts_count": 6,
    "created_at": "2024-09-20T03:39:45.317Z",
    "last_posted_at": "2024-09-20T07:29:30.273Z",
    "views": 1015,
    "like_count": 2,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "layout",
      "graphics",
      "header-footer"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 353
  },
  "posts": [
    {
      "id": 1994,
      "post_number": 1,
      "username": "Glenn",
      "name": "Glenn",
      "created_at": "2024-09-20T03:39:45.474Z",
      "updated_at": "2024-09-23T07:08:43.133Z",
      "cooked": "<p>I want to have a header with a logo image on the left and an address field on the right.  I am having difficulty in getting this to work correctly.  The image is always shown below and to the left of the address which pushes the body of my document down the page?</p>\n<p>Thanks.</p>",
      "raw": "I want to have a header with a logo image on the left and an address field on the right.  I am having difficulty in getting this to work correctly.  The image is always shown below and to the left of the address which pushes the body of my document down the page?\n\nThanks.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 55,
      "score": 5590.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 126
    },
    {
      "id": 1997,
      "post_number": 2,
      "username": "afiaith",
      "name": "Maja Abramski-Kronenberg",
      "created_at": "2024-09-20T04:06:40.322Z",
      "updated_at": "2024-09-20T04:08:23.270Z",
      "cooked": "<p>A MWE would help to understand your problem.</p>\n<p>And please tag your question (<a class=\"hashtag-cooked\" href=\"/tag/graphics\" data-type=\"tag\" data-slug=\"graphics\" data-id=\"85\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>graphics</span></a>, <a class=\"hashtag-cooked\" href=\"/tag/layout\" data-type=\"tag\" data-slug=\"layout\" data-id=\"65\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>layout</span></a>, etc.).</p>",
      "raw": "A MWE would help to understand your problem.\n\nAnd please tag your question (#graphics, #layout, etc.).",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 55,
      "score": 90.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 91
    },
    {
      "id": 2001,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-20T06:38:35.803Z",
      "updated_at": "2025-02-02T18:00:14.156Z",
      "cooked": "<p>The main problem here is that images are <em>block level</em>: when Typst sees an image, the current block (e.g. paragraph) ends and a new one begins. One way around that is wrapping images in <code>box()</code>.</p>\n<p>If you have some content on the left and some on the right, the easiest way is to use <a href=\"https://typst.app/docs/reference/layout/h/\">horizintal space</a>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#box(image(...)) #h(1fr) Some address\n</code></pre>\n<p>This inserts horizontal space that is exactly enough to fill the available space.</p>\n<p>For headers, I usually use a <code>grid</code> instead; it makes it easy to have a center part as well:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#grid(\n  columns: (1fr, 1fr),\n  align: (left, right),\n  rect[Left],\n  [Right],\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  align: (left, center, right),\n  rect[Left],\n  [Center],\n  [Right],\n)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/1876dbed64d8d4cc60a08b397be052bb21510f0c.png\" data-download-href=\"https://forum.typst.app/uploads/default/1876dbed64d8d4cc60a08b397be052bb21510f0c\" title=\"header\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/1876dbed64d8d4cc60a08b397be052bb21510f0c_2_689x153.png\" alt=\"header\" data-base62-sha1=\"3uq738q2BI3qP9c04VxRUC1oV8E\" width=\"689\" height=\"153\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/1876dbed64d8d4cc60a08b397be052bb21510f0c_2_689x153.png, https://forum.typst.app/uploads/default/optimized/1X/1876dbed64d8d4cc60a08b397be052bb21510f0c_2_1033x229.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/1876dbed64d8d4cc60a08b397be052bb21510f0c_2_1378x306.png 2x\" data-dominant-color=\"FEFEFE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">header</span><span class=\"informations\">2480√ó553 55.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "The main problem here is that images are _block level_: when Typst sees an image, the current block (e.g. paragraph) ends and a new one begins. One way around that is wrapping images in `box()`.\n\nIf you have some content on the left and some on the right, the easiest way is to use [horizintal space](https://typst.app/docs/reference/layout/h/):\n```typ\n#box(image(...)) #h(1fr) Some address\n```\nThis inserts horizontal space that is exactly enough to fill the available space.\n\nFor headers, I usually use a `grid` instead; it makes it easy to have a center part as well:\n```typ\n#grid(\n  columns: (1fr, 1fr),\n  align: (left, right),\n  rect[Left],\n  [Right],\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  align: (left, center, right),\n  rect[Left],\n  [Center],\n  [Right],\n)\n```\n![header|689x153, 100%](upload://3uq738q2BI3qP9c04VxRUC1oV8E.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 125.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2002,
      "post_number": 4,
      "username": "Glenn",
      "name": "Glenn",
      "created_at": "2024-09-20T06:55:16.891Z",
      "updated_at": "2024-09-20T06:55:16.891Z",
      "cooked": "<p>Thanks for the response.  What is an MWE?</p>",
      "raw": "Thanks for the response.  What is an MWE?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 19.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 126
    },
    {
      "id": 2003,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-20T07:20:02.538Z",
      "updated_at": "2024-09-20T07:20:02.538Z",
      "cooked": "<p>A Minimal Working Exemple (MWE) is what we call the strictly necessary code to reproduce your issue, so that people can help you work it out!</p>\n<p>Have you read <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>?</p>\n<p><a class=\"mention\" href=\"/u/andrew\">@Andrew</a> talks about it in <a href=\"https://forum.typst.app/t/image-sizes-parent-container-wrongly/464\" class=\"inline-onebox\">Image sizes parent container wrongly?</a></p>\n<blockquote>\n<p>Providing a MWE/MRE (Minimal Working/Reproducible Example) is essential (for questions based on user-written Typst code). This means that things like <code>width: auto</code> should be excluded from example as <a href=\"https://typst.app/docs/reference/layout/block/#parameters-width\"><code>block.width</code> is equal to <code>auto</code> by default</a>. This visually adds unnecessary noise to an already non-trivial example</p>\n</blockquote>",
      "raw": "A Minimal Working Exemple (MWE) is what we call the strictly necessary code to reproduce your issue, so that people can help you work it out!\n\nHave you read https://forum.typst.app/t/how-to-post-in-the-questions-category/11?\n\n@Andrew talks about it in https://forum.typst.app/t/image-sizes-parent-container-wrongly/464\n> Providing a MWE/MRE (Minimal Working/Reproducible Example) is essential (for questions based on user-written Typst code). This means that things like `width: auto` should be excluded from example as [`block.width` is equal to `auto` by default](https://typst.app/docs/reference/layout/block/#parameters-width). This visually adds unnecessary noise to an already non-trivial example",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 46,
      "score": 84.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2004,
      "post_number": 6,
      "username": "Glenn",
      "name": "Glenn",
      "created_at": "2024-09-20T07:29:30.273Z",
      "updated_at": "2024-09-20T07:29:30.273Z",
      "cooked": "<p>The use of <span class=\"hashtag-raw\">#grid</span> proposed by <a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a> worked a treat.  Exactly what I was looking for for this project.</p>\n<p>Thank you all for your help.</p>",
      "raw": "The use of #grid proposed by @SillyFreak worked a treat.  Exactly what I was looking for for this project.\n\nThank you all for your help.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 44,
      "score": 78.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 126
    }
  ],
  "scraped_at": "2025-06-10T09:58:34.295501"
}
{
  "topic_metadata": {
    "id": 514,
    "title": "How do I draw a box behind text?",
    "slug": "how-do-i-draw-a-box-behind-text",
    "posts_count": 5,
    "created_at": "2024-09-20T04:34:13.442Z",
    "last_posted_at": "2024-09-20T13:38:55.416Z",
    "views": 407,
    "like_count": 5,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "Tinger",
    "tags": [
      "scripting",
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 541
  },
  "posts": [
    {
      "id": 1998,
      "post_number": 1,
      "username": "jkwchui",
      "name": "Jon Chui",
      "created_at": "2024-09-20T04:34:13.593Z",
      "updated_at": "2024-09-20T05:33:24.684Z",
      "cooked": "<p>I am looking to annotate text with a color-box behind it, with an effect like this:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/0381760dee348aa2bd3d25e5acdd2fb8b9baa29c.png\" data-download-href=\"https://forum.typst.app/uploads/default/0381760dee348aa2bd3d25e5acdd2fb8b9baa29c\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/0381760dee348aa2bd3d25e5acdd2fb8b9baa29c_2_690x103.png\" alt=\"image\" data-base62-sha1=\"v0NHwIKW7FfcT4Des8eyvLGPeI\" width=\"690\" height=\"103\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/0381760dee348aa2bd3d25e5acdd2fb8b9baa29c_2_690x103.png, https://forum.typst.app/uploads/default/optimized/1X/0381760dee348aa2bd3d25e5acdd2fb8b9baa29c_2_1035x154.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/0381760dee348aa2bd3d25e5acdd2fb8b9baa29c_2_1380x206.png 2x\" data-dominant-color=\"E8EAE7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">2004√ó300 80 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>The above was achieved with a macro of</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let part(content, angle: 0deg, content_color: black) = {\n  box(\n    radius: 0.1em, \n    stroke: (2pt + oklch(40%, 0.2, angle, 100%)), \n    fill: oklch(95%, 0.05, angle, 80%), \n    inset: (x: 0.3em, y: 0.3em),\n  )[#text(content_color)[#content]]\n}\n</code></pre>\n<p>This doesn‚Äôt quite do the job, however, because it‚Äôs actually a sequence of boxes being drawn at the baseline, and the content floating inside it.  These do not compose with plain-text:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/3553f30b353077e4347fabc09646cd870e005042.png\" data-download-href=\"https://forum.typst.app/uploads/default/3553f30b353077e4347fabc09646cd870e005042\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/3553f30b353077e4347fabc09646cd870e005042_2_690x88.png\" alt=\"image\" data-base62-sha1=\"7BLakGzvltTcig0NHRG1g808pHQ\" width=\"690\" height=\"88\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/3553f30b353077e4347fabc09646cd870e005042_2_690x88.png, https://forum.typst.app/uploads/default/optimized/1X/3553f30b353077e4347fabc09646cd870e005042_2_1035x132.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/3553f30b353077e4347fabc09646cd870e005042_2_1380x176.png 2x\" data-dominant-color=\"EBEAE9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">2328√ó300 103 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#part([Êàë], angle: 20deg) #part([Âñ∫], angle: 80deg) ÈÑ∞Ëøë #part([ÂÖ¨Âúí], angle: 310deg) #part([Ë¶ãÂà∞], angle: 120deg) #part([Â™ΩÂ™Ω], angle: 220deg)\n</code></pre>\n<p>Is there an idiomatic Typst way to keep the text as first-class citizen, and draw the box behind it?</p>",
      "raw": "I am looking to annotate text with a color-box behind it, with an effect like this:\n\n![image|690x103](upload://v0NHwIKW7FfcT4Des8eyvLGPeI.png)\n\nThe above was achieved with a macro of\n\n```typst\n#let part(content, angle: 0deg, content_color: black) = {\n  box(\n    radius: 0.1em, \n    stroke: (2pt + oklch(40%, 0.2, angle, 100%)), \n    fill: oklch(95%, 0.05, angle, 80%), \n    inset: (x: 0.3em, y: 0.3em),\n  )[#text(content_color)[#content]]\n}\n```\n\nThis doesn't quite do the job, however, because it's actually a sequence of boxes being drawn at the baseline, and the content floating inside it.  These do not compose with plain-text:\n\n![image|690x88](upload://7BLakGzvltTcig0NHRG1g808pHQ.png)\n\n```typst\n#part([Êàë], angle: 20deg) #part([Âñ∫], angle: 80deg) ÈÑ∞Ëøë #part([ÂÖ¨Âúí], angle: 310deg) #part([Ë¶ãÂà∞], angle: 120deg) #part([Â™ΩÂ™Ω], angle: 220deg)\n```\n\nIs there an idiomatic Typst way to keep the text as first-class citizen, and draw the box behind it?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 56,
      "score": 1656.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 254
    },
    {
      "id": 1999,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-20T05:31:39.556Z",
      "updated_at": "2024-09-20T10:01:28.122Z",
      "cooked": "<p>I‚Äôm unfortunately not aware of a box variant/mode that does not affect the baseline in the way you need it. However, <code>box</code> lets you adjust the baseline so you can visually shift everything to where you need it. <s>With the exact code you posted, 22% looked right</s> <strong>EDIT</strong> since your inset is <code>0.3em</code>, that‚Äôs how much you need to adjust the baseline (thanks <a class=\"mention\" href=\"/u/eric\">@Eric</a>):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: auto, height: auto, margin: 0.3cm)\n\n#let part(content, angle: 0deg, content_color: black) = {\n  box(\n    radius: 0.1em, \n    stroke: (2pt + oklch(40%, 0.2, angle, 100%)), \n    fill: oklch(95%, 0.05, angle, 80%), \n    inset: (x: 0.3em, y: 0.3em),\n    baseline: 0.3em,\n  )[#text(content_color)[#content]]\n}\n\n#part([Êàë], angle: 20deg) #part([Âñ∫], angle: 80deg) #highlight[ÈÑ∞Ëøë] #part(highlight[ÂÖ¨Âúí], angle: 310deg) #part([Ë¶ãÂà∞], angle: 120deg) #part([Â™ΩÂ™Ω], angle: 220deg)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/3602388868d0749ae335be4af9968e7552b69aa6.png\" data-download-href=\"https://forum.typst.app/uploads/default/3602388868d0749ae335be4af9968e7552b69aa6\" title=\"baseline\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/3602388868d0749ae335be4af9968e7552b69aa6_2_690x128.png\" alt=\"baseline\" data-base62-sha1=\"7HMxzzRWJWf4wPAyCqQgtCchKGa\" width=\"690\" height=\"128\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/3602388868d0749ae335be4af9968e7552b69aa6_2_690x128.png, https://forum.typst.app/uploads/default/optimized/1X/3602388868d0749ae335be4af9968e7552b69aa6_2_1035x192.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/3602388868d0749ae335be4af9968e7552b69aa6_2_1380x256.png 2x\" data-dominant-color=\"D4CFC3\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">baseline</span><span class=\"informations\">1448√ó270 101 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>(The highlight is just for easier character alignment comparison.) You‚Äôll have to adjust it to your case of course.</p>",
      "raw": "I'm unfortunately not aware of a box variant/mode that does not affect the baseline in the way you need it. However, `box` lets you adjust the baseline so you can visually shift everything to where you need it. ~~With the exact code you posted, 22% looked right~~ **EDIT** since your inset is `0.3em`, that's how much you need to adjust the baseline (thanks @Eric):\n```typ\n#set page(width: auto, height: auto, margin: 0.3cm)\n\n#let part(content, angle: 0deg, content_color: black) = {\n  box(\n    radius: 0.1em, \n    stroke: (2pt + oklch(40%, 0.2, angle, 100%)), \n    fill: oklch(95%, 0.05, angle, 80%), \n    inset: (x: 0.3em, y: 0.3em),\n    baseline: 0.3em,\n  )[#text(content_color)[#content]]\n}\n\n#part([Êàë], angle: 20deg) #part([Âñ∫], angle: 80deg) #highlight[ÈÑ∞Ëøë] #part(highlight[ÂÖ¨Âúí], angle: 310deg) #part([Ë¶ãÂà∞], angle: 120deg) #part([Â™ΩÂ™Ω], angle: 220deg)\n```\n![baseline|690x128](upload://7HMxzzRWJWf4wPAyCqQgtCchKGa.png)\n\n(The highlight is just for easier character alignment comparison.) You'll have to adjust it to your case of course.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 30.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2000,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-20T06:25:13.794Z",
      "updated_at": "2024-09-20T06:25:13.794Z",
      "cooked": "<p>As in this case, the baseline difference is only due to to box‚Äôs bottom inset, you can as well just use the <code>0.3em</code> for the baseline instead of guessing the <code>22%</code>.</p>",
      "raw": "As in this case, the baseline difference is only due to to box's bottom inset, you can as well just use the `0.3em` for the baseline instead of guessing the `22%`.",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 24.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2010,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-20T09:35:40.582Z",
      "updated_at": "2024-09-20T09:59:11.105Z",
      "cooked": "<p>I tried that but it didn‚Äôt look right to me. Maybe it was just the live preview in the web app though‚Ä¶</p>\n<p>Edit: I think it was just me, thanks for pointing this out <a class=\"mention\" href=\"/u/eric\">@Eric</a>!</p>",
      "raw": "I tried that but it didn't look right to me. Maybe it was just the live preview in the web app though...\n\nEdit: I think it was just me, thanks for pointing this out @Eric!",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 19.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2025,
      "post_number": 5,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-09-20T13:38:55.416Z",
      "updated_at": "2024-09-20T13:40:30.081Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Eric\" data-post=\"3\" data-topic=\"514\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/eric/48/87_2.png\" class=\"avatar\"> Eric:</div>\n<blockquote>\n<p>As in this case, the baseline difference is only due to to box‚Äôs bottom inset, you can as well just use the <code>0.3em</code> for the baseline instead of guessing the <code>22%</code>.</p>\n</blockquote>\n</aside>\n<p>I suggest simply using <code>outset </code> for the y-axis, this will leave the baseline unaffected:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let part(content, angle: 0deg, content_color: black) = {\n  box(\n    radius: 0.1em, \n    stroke: (2pt + oklch(40%, 0.2, angle, 100%)), \n    fill: oklch(95%, 0.05, angle, 80%), \n    inset: (x: 0.3em),\n    outset: (y: 0.3em),\n  )[#text(content_color)[#content]]\n}\n</code></pre>\n<p>x-inset + y-outset is the go-to style for inline raw in most of my documents and it served me pretty well.</p>\n<p>I think this also has the added benefit of not affecting line spacing, in case the baseline option does, I‚Äôm not 100% sure about that. But this also means for tight line spacing this will intersect with the other lines.</p>",
      "raw": "[quote=\"Eric, post:3, topic:514, full:true\"]\nAs in this case, the baseline difference is only due to to box‚Äôs bottom inset, you can as well just use the `0.3em` for the baseline instead of guessing the `22%`.\n[/quote]\n\nI suggest simply using `outset ` for the y-axis, this will leave the baseline unaffected:\n```typ\n#let part(content, angle: 0deg, content_color: black) = {\n  box(\n    radius: 0.1em, \n    stroke: (2pt + oklch(40%, 0.2, angle, 100%)), \n    fill: oklch(95%, 0.05, angle, 80%), \n    inset: (x: 0.3em),\n    outset: (y: 0.3em),\n  )[#text(content_color)[#content]]\n}\n```\n\nx-inset + y-outset is the go-to style for inline raw in most of my documents and it served me pretty well.\n\nI think this also has the added benefit of not affecting line spacing, in case the baseline option does, I'm not 100% sure about that. But this also means for tight line spacing this will intersect with the other lines.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 4,
      "reads": 47,
      "score": 159.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 29
    }
  ],
  "scraped_at": "2025-06-10T09:58:33.574680"
}
{
  "topic_metadata": {
    "id": 515,
    "title": "Can you have different values for the top margin AFTER the first page?",
    "slug": "can-you-have-different-values-for-the-top-margin-after-the-first-page",
    "posts_count": 6,
    "created_at": "2024-09-20T07:43:18.698Z",
    "last_posted_at": "2024-09-20T16:26:05.546Z",
    "views": 511,
    "like_count": 6,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "layout",
      "page"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 492
  },
  "posts": [
    {
      "id": 2005,
      "post_number": 1,
      "username": "Glenn",
      "name": "Glenn",
      "created_at": "2024-09-20T07:43:18.832Z",
      "updated_at": "2024-09-25T08:44:56.286Z",
      "cooked": "<p>I would like to be able to set the top margin value differently on every page AFTER the first page.</p>\n<p>Page 1 would have a top margin value of 1cm, every other pager after that would be set to 2.5cm.</p>\n<p>TIA</p>",
      "raw": "I would like to be able to set the top margin value differently on every page AFTER the first page.\n\nPage 1 would have a top margin value of 1cm, every other pager after that would be set to 2.5cm.\n\nTIA",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 63,
      "score": 882.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 126
    },
    {
      "id": 2006,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-20T07:50:26.348Z",
      "updated_at": "2024-09-20T07:50:26.348Z",
      "cooked": "<p>Hello Glenn,</p>\n<p>You can do that easily by adding another <code>#set</code> directive after your first page.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(margin: (top: 1cm))\n\n= Title page\n\n#pagebreak()\n#set page(margin: (top: 2.5cm))\n\n= Page 2\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/972b1350d0d2fad4a13c6ea09a9a83e3d28c39e3.png\" data-download-href=\"https://forum.typst.app/uploads/default/972b1350d0d2fad4a13c6ea09a9a83e3d28c39e3\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/972b1350d0d2fad4a13c6ea09a9a83e3d28c39e3_2_690x489.png\" alt=\"image\" data-base62-sha1=\"lzinYJC1DdsbtnDoKSTa04WYa1Z\" width=\"690\" height=\"489\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/972b1350d0d2fad4a13c6ea09a9a83e3d28c39e3_2_690x489.png, https://forum.typst.app/uploads/default/optimized/1X/972b1350d0d2fad4a13c6ea09a9a83e3d28c39e3_2_1035x733.png 1.5x, https://forum.typst.app/uploads/default/original/1X/972b1350d0d2fad4a13c6ea09a9a83e3d28c39e3.png 2x\" data-dominant-color=\"FEFEFE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1065√ó756 6.57 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>On another note, please be careful to follow the guidelines at <a href=\"https://forum.typst.app/faq#pro-posting\" class=\"inline-onebox\">FAQ - Typst Forum</a> <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\">. Notably:</p>\n<ul>\n<li>This seems to be a question, so use the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category.</li>\n<li>Add any tags, e.g., <a class=\"hashtag-cooked\" href=\"/tag/layout\" data-type=\"tag\" data-slug=\"layout\" data-id=\"65\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>layout</span></a>, you think are relevant to the question, and provide a minimal code sample if possible.</li>\n</ul>\n<p>Best</p>",
      "raw": "Hello Glenn,\n\nYou can do that easily by adding another `#set` directive after your first page.\n\n```typ\n#set page(margin: (top: 1cm))\n\n= Title page\n\n#pagebreak()\n#set page(margin: (top: 2.5cm))\n\n= Page 2\n```\n\n[details=\"Output\"]\n![image|690x489](upload://lzinYJC1DdsbtnDoKSTa04WYa1Z.png)\n[/details]\n\nOn another note, please be careful to follow the guidelines at https://forum.typst.app/faq#pro-posting :smiley:. Notably:\n\n- This seems to be a question, so use the #questions category.\n- Add any tags, e.g., #layout, you think are relevant to the question, and provide a minimal code sample if possible.\n\nBest",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 64,
      "score": 67.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2007,
      "post_number": 3,
      "username": "laurmaedje",
      "name": "Laurenz M√§dje",
      "created_at": "2024-09-20T08:06:25.240Z",
      "updated_at": "2024-09-20T08:07:37.212Z",
      "cooked": "<p>The way shown above works when you‚Äôre fine with an explicit page break. If that‚Äôs a problem, you can simply add negative vertical spacing at the start of your document like this: <code>v(-1.5cm)</code>.</p>\n<p>This only works for the first page of the document though. For other pages, it is not possible at the moment. See this question: <a href=\"https://forum.typst.app/t/how-to-get-differently-sized-header-or-footer-depending-on-page-number/322\" class=\"inline-onebox\">How to get differently-sized header or footer depending on page number?</a></p>",
      "raw": "The way shown above works when you're fine with an explicit page break. If that's a problem, you can simply add negative vertical spacing at the start of your document like this: `v(-1.5cm)`. \n\nThis only works for the first page of the document though. For other pages, it is not possible at the moment. See this question: https://forum.typst.app/t/how-to-get-differently-sized-header-or-footer-depending-on-page-number/322",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 62,
      "score": 142.2,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 2008,
      "post_number": 4,
      "username": "Glenn",
      "name": "Glenn",
      "created_at": "2024-09-20T09:19:25.298Z",
      "updated_at": "2024-09-20T09:19:25.298Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/laurmaedje\">@laurmaedje</a> The link to the other question posted shows how to change the output for odd and even page numbers.  I did read it and tried to adapt it to my use case but to no avail.</p>\n<p>Probably just me not understanding fully.  Thank you though.  Appreciate it.</p>\n<p><a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> Apologies.  I believed I was posting in the questions category.  That would be me not fully paying attention.  Your solution worked.  Thank you.</p>",
      "raw": "@laurmaedje The link to the other question posted shows how to change the output for odd and even page numbers.  I did read it and tried to adapt it to my use case but to no avail.\n\nProbably just me not understanding fully.  Thank you though.  Appreciate it.\n\n@quachpas Apologies.  I believed I was posting in the questions category.  That would be me not fully paying attention.  Your solution worked.  Thank you.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 58,
      "score": 81.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 126
    },
    {
      "id": 2012,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-20T10:07:22.654Z",
      "updated_at": "2024-09-20T10:07:22.654Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Glenn\" data-post=\"4\" data-topic=\"515\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/g/8F3617/48.png\" class=\"avatar\"> Glenn:</div>\n<blockquote>\n<p>I did read it and tried to adapt it to my use case but to no avail.</p>\n</blockquote>\n</aside>\n<p>You did nothing wrong here, but often it‚Äôs useful to link to other questions that you have already looked at and say how they didn‚Äôt solve your issue. This can help others understand better where your problem is different from the previous ones.</p>\n<aside class=\"quote no-group\" data-username=\"Glenn\" data-post=\"4\" data-topic=\"515\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/g/8F3617/48.png\" class=\"avatar\"> Glenn:</div>\n<blockquote>\n<p>Your solution worked. Thank you.</p>\n</blockquote>\n</aside>\n<p>Glad you have a solution! Unless you expect that someone else could give an <em>even better</em> answer to the question, could you mark <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a>‚Äô answer as the solution? This will help others find it quicker.</p>",
      "raw": "[quote=\"Glenn, post:4, topic:515\"]\nI did read it and tried to adapt it to my use case but to no avail.\n[/quote]\n\nYou did nothing wrong here, but often it's useful to link to other questions that you have already looked at and say how they didn't solve your issue. This can help others understand better where your problem is different from the previous ones.\n\n[quote=\"Glenn, post:4, topic:515\"]\nYour solution worked. Thank you.\n[/quote]\n\nGlad you have a solution! Unless you expect that someone else could give an _even better_ answer to the question, could you mark @quachpas' answer as the solution? This will help others find it quicker.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 58,
      "score": 31.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2075,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-20T16:26:05.546Z",
      "updated_at": "2024-09-20T16:26:05.546Z",
      "cooked": "<p>I don‚Äôt know why this wasn‚Äôt mentioned, but you don‚Äôt need an explicit <code>pagebreak()</code> right before <code>set page()</code>, generally speaking. I think there are cases where <code>set page()</code> won‚Äôt automatically create a page break. One example (and maybe the only one?) is when you write <code>set page()</code> (but then why would you write it at all, right?).</p>\n<p>That means this would work the same way as the initial solution:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(margin: (top: 1cm))\n= Title page\n#set page(margin: (top: 2.5cm))\n= Page 2\n</code></pre>",
      "raw": "I don't know why this wasn't mentioned, but you don't need an explicit `pagebreak()` right before `set page()`, generally speaking. I think there are cases where `set page()` won't automatically create a page break. One example (and maybe the only one?) is when you write `set page()` (but then why would you write it at all, right?).\n\nThat means this would work the same way as the initial solution:\n\n```typ\n#set page(margin: (top: 1cm))\n= Title page\n#set page(margin: (top: 2.5cm))\n= Page 2\n```",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:58:32.866534"
}
{
  "topic_metadata": {
    "id": 526,
    "title": "Does pulling from Git delete comments in a Web App project?",
    "slug": "does-pulling-from-git-delete-comments-in-a-web-app-project",
    "posts_count": 3,
    "created_at": "2024-09-20T16:56:00.372Z",
    "last_posted_at": "2024-09-22T16:07:58.217Z",
    "views": 106,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "danborek",
    "tags": [
      "web-app",
      "git-sync",
      "comments"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 299
  },
  "posts": [
    {
      "id": 2077,
      "post_number": 1,
      "username": "fdekerm",
      "name": "Fran√ßois de Kermenguy",
      "created_at": "2024-09-20T16:56:00.510Z",
      "updated_at": "2024-09-22T16:03:26.085Z",
      "cooked": "<p>Hello,<br>\nI have a project in the Typst application with comments on <em>file1.typ</em></p>\n<p>I have modified locally in <em>VSCode</em> the file2.typ that I have <em>Git</em> push. What happens if I git pull in the app? Will the comments be deleted?</p>\n<p>More generally: if I modify <em>file1.typ</em> locally and gitpull it, will it delete the comments?</p>\n<p>Merci <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nfdekerm</p>",
      "raw": "Hello,\nI have a project in the Typst application with comments on *file1.typ*\n\n\nI have modified locally in *VSCode* the file2.typ that I have *Git* push. What happens if I git pull in the app? Will the comments be deleted?\n\nMore generally: if I modify *file1.typ* locally and gitpull it, will it delete the comments?\n\nMerci :slight_smile: \nfdekerm",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 77.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 2112,
      "post_number": 2,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-09-20T23:55:28.952Z",
      "updated_at": "2024-09-20T23:56:23.744Z",
      "cooked": "<p>Hi if git integration works correctly you should be able to merge your comments from both files (usually first you need to commit changes before pulling ), but from my  experience typst web app doesn‚Äôt always works as expected with git, so you need to try ( maybe try some test repository to see what‚Äôs happens )</p>",
      "raw": "Hi if git integration works correctly you should be able to merge your comments from both files (usually first you need to commit changes before pulling ), but from my  experience typst web app doesn‚Äôt always works as expected with git, so you need to try ( maybe try some test repository to see what‚Äôs happens )",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 11.4,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 2269,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-22T16:07:58.217Z",
      "updated_at": "2024-09-22T16:07:58.217Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/fdekerm\">@fdekerm</a>! I‚Äôve updated your post title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure the title is something you‚Äôd ask to a friend. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<hr>\n<aside class=\"quote no-group\" data-username=\"fdekerm\" data-post=\"1\" data-topic=\"526\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/fdekerm/48/427_2.png\" class=\"avatar\"> fdekerm:</div>\n<blockquote>\n<p>What happens if I git pull in the app? Will the comments be deleted?</p>\n</blockquote>\n</aside>\n<p>If by comments you mean review comments in the web app, no, comments are not automatically deleted under any circumstances, even if you delete the code they point to. If that ever happens to you, please let us know as that would be a bug.</p>\n<p>Of course, if you delete the code under a comment, the comment won‚Äôt be displayed at that position anymore since the code is gone. That <strong>does not</strong> mean the comment was deleted: it will still be listed in the ‚ÄúImprove‚Äù tab (the pencil icon to the left)!</p>\n<p>If by comments you mean <code>// Typst comments</code>, those are only deleted if you delete them in your source code as well.</p>\n<p>Let me know if you need further help!</p>",
      "raw": "Hey @fdekerm! I've updated your post title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure the title is something you'd ask to a friend. :wink:\n\n---\n\n[quote=\"fdekerm, post:1, topic:526\"]\nWhat happens if I git pull in the app? Will the comments be deleted?\n[/quote]\n\nIf by comments you mean review comments in the web app, no, comments are not automatically deleted under any circumstances, even if you delete the code they point to. If that ever happens to you, please let us know as that would be a bug.\n\nOf course, if you delete the code under a comment, the comment won't be displayed at that position anymore since the code is gone. That **does not** mean the comment was deleted: it will still be listed in the \"Improve\" tab (the pencil icon to the left)!\n\nIf by comments you mean `// Typst comments`, those are only deleted if you delete them in your source code as well.\n\nLet me know if you need further help!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 2,
      "reads": 18,
      "score": 38.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:58:32.144337"
}
{
  "topic_metadata": {
    "id": 531,
    "title": "Why is the page counter in the background of my page wrong after using counter.update()?",
    "slug": "why-is-the-page-counter-in-the-background-of-my-page-wrong-after-using-counter-update",
    "posts_count": 15,
    "created_at": "2024-09-20T20:43:40.511Z",
    "last_posted_at": "2024-09-24T11:00:38.390Z",
    "views": 288,
    "like_count": 5,
    "reply_count": 10,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 11,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "page",
      "counter"
    ],
    "category_id": 5,
    "participant_count": 8,
    "word_count": 1180
  },
  "posts": [
    {
      "id": 2087,
      "post_number": 1,
      "username": "enxinjie",
      "name": "Zoey",
      "created_at": "2024-09-20T20:43:40.617Z",
      "updated_at": "2024-09-24T10:57:45.085Z",
      "cooked": "<p>The page numbers are broken, their order is 2, 2, 3, 4, 5, 6 (correct from here on out)<br>\nIt breaks once I put the counter in set page<br>\nmy code rn:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">set page(background: context(\n     context counter(page).display(\"i\")\n))\n</code></pre>\n<p>What it looks like rn:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/c974069890480b8aba8ddbeb928c34030a2cf0dc.png\" data-download-href=\"https://forum.typst.app/uploads/default/c974069890480b8aba8ddbeb928c34030a2cf0dc\" title=\"Screenshot 2024-09-20 at 4.38.07 PM\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/c974069890480b8aba8ddbeb928c34030a2cf0dc_2_381x500.png\" alt=\"Screenshot 2024-09-20 at 4.38.07 PM\" data-base62-sha1=\"sK8yrMUnaGbFHKykdbwNDHfx8wQ\" width=\"381\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/c974069890480b8aba8ddbeb928c34030a2cf0dc_2_381x500.png, https://forum.typst.app/uploads/default/optimized/1X/c974069890480b8aba8ddbeb928c34030a2cf0dc_2_571x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/c974069890480b8aba8ddbeb928c34030a2cf0dc_2_762x1000.png 2x\" data-dominant-color=\"F2F3F3\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2024-09-20 at 4.38.07 PM</span><span class=\"informations\">1120√ó1466 190 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nis there a way to fix it?</p>",
      "raw": "The page numbers are broken, their order is 2, 2, 3, 4, 5, 6 (correct from here on out)\nIt breaks once I put the counter in set page\nmy code rn:\n```typc\nset page(background: context(\n     context counter(page).display(\"i\")\n))\n```\nWhat it looks like rn:\n![Screenshot 2024-09-20 at 4.38.07 PM|381x500](upload://sK8yrMUnaGbFHKykdbwNDHfx8wQ.png)\nis there a way to fix it?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 63,
      "score": 607.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 407
    },
    {
      "id": 2126,
      "post_number": 2,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-09-21T05:49:13.346Z",
      "updated_at": "2024-09-21T05:49:13.346Z",
      "cooked": "<p>I can‚Äôt reproduce this bug on <code>typst 0.11.1</code> by provided code. Is your typst updated or is the page number was affected by other parts of your document?</p>",
      "raw": "I can't reproduce this bug on `typst 0.11.1` by provided code. Is your typst updated or is the page number was affected by other parts of your document?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 58,
      "score": 11.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 2138,
      "post_number": 3,
      "username": "afiaith",
      "name": "Maja Abramski-Kronenberg",
      "created_at": "2024-09-21T11:46:11.398Z",
      "updated_at": "2024-09-21T11:46:11.398Z",
      "cooked": "<p>To expand on <a class=\"mention\" href=\"/u/paran3xus\">@ParaN3xus</a>, can you add a MWE (minimal working example) which demonstrates the problem? That is, a stand-alone minimal Typst document that compiles and shows the incorrect page numbering.</p>\n<hr>\n<p>In addition, for the benefit of other co-Typstists please consider tagging your question (e.g. <a class=\"hashtag-cooked\" href=\"/tag/counter\" data-type=\"tag\" data-slug=\"counter\" data-id=\"60\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>counter</span></a>) and rephrasing the title so it is clearer what you ask from by just reading the title. <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">This post</a> might be helpful.</p>",
      "raw": "To expand on @ParaN3xus, can you add a MWE (minimal working example) which demonstrates the problem? That is, a stand-alone minimal Typst document that compiles and shows the incorrect page numbering.\n\n---\n\nIn addition, for the benefit of other co-Typstists please consider tagging your question (e.g. #counter) and rephrasing the title so it is clearer what you ask from by just reading the title. [This post](https://forum.typst.app/t/how-to-post-in-the-questions-category/11) might be helpful.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 53,
      "score": 25.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 91
    },
    {
      "id": 2139,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-21T12:08:10.693Z",
      "updated_at": "2024-09-21T12:08:10.693Z",
      "cooked": "<p>From my experience, this kind of numbering issues arise from multiple contextual scripting that conflict with each other or are too large in scope. My advice is to disable every contextual bits and find the culprit. Do your best to reduce the amount of <code>context</code> usage.</p>",
      "raw": "From my experience, this kind of numbering issues arise from multiple contextual scripting that conflict with each other or are too large in scope. My advice is to disable every contextual bits and find the culprit. Do your best to reduce the amount of `context` usage.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 52,
      "score": 25.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2207,
      "post_number": 5,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-09-22T04:48:43.172Z",
      "updated_at": "2024-09-22T04:48:43.172Z",
      "cooked": "<p>I meant I cannot reproduce the bug with provided code. Maybe we should ask <a class=\"mention\" href=\"/u/enxinjie\">@enxinjie</a></p>",
      "raw": "I meant I cannot reproduce the bug with provided code. Maybe we should ask @enxinjie",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 2210,
      "post_number": 6,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-22T06:49:29.872Z",
      "updated_at": "2024-09-22T06:58:05.835Z",
      "cooked": "<p>I actually have the same problem.</p>\n<details>\n<summary>\nMWE</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(paper: \"a8\")\n\n/////////////////////////////////\n// Some Content\n#lorem(25)\n\n/////////////////////////////////\n// Now to the problem:\n#set page(numbering: \"I\", number-align: top, header: context{\n  set text(size: 10pt, weight: \"regular\")\n          \n  [Page number: #h(1fr) #counter(page).display(\"I\")]\n})\n#counter(page).update(1)\n\n= ToC\n#outline(\n  title: none,\n  depth: 3, \n  indent: auto\n)\n\n#pagebreak(to: \"odd\")\n\n= ToF\n#outline(\n  title: none,\n  target: figure.where(kind: image)\n)\n\n#pagebreak(to: \"odd\")\n</code></pre>\n</details>\n<p>Maybe this helps. I am not sure how to fix it‚Ä¶</p>",
      "raw": "I actually have the same problem. \n\n[details=\"MWE\"]\n```typ\n#set page(paper: \"a8\")\n\n/////////////////////////////////\n// Some Content\n#lorem(25)\n\n/////////////////////////////////\n// Now to the problem:\n#set page(numbering: \"I\", number-align: top, header: context{\n  set text(size: 10pt, weight: \"regular\")\n          \n  [Page number: #h(1fr) #counter(page).display(\"I\")]\n})\n#counter(page).update(1)\n\n= ToC\n#outline(\n  title: none,\n  depth: 3, \n  indent: auto\n)\n\n#pagebreak(to: \"odd\")\n\n= ToF\n#outline(\n  title: none,\n  target: figure.where(kind: image)\n)\n\n#pagebreak(to: \"odd\")\n```\n[/details]\n\nMaybe this helps. I am not sure how to fix it...",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 19.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2224,
      "post_number": 7,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-22T10:26:31.316Z",
      "updated_at": "2024-09-24T10:55:58.907Z",
      "cooked": "<p>I assume you want the title page to not count? I.e. ToC to start on page 2, with page counter 1? You have two issues:</p>\n<ol>\n<li>\n<p>the <code>#counter(page).update(1)</code> appears <em>on page 2</em>, so by that time, the header (EDIT: or in OP‚Äôs case, the background) of page 2 was already written, with page counter also 2.</p>\n</li>\n<li>\n<p>the page counter is incremented <em>at page start</em>. For example the counter start out as 0 and is then immediately incremented to 1 on the first page.</p>\n</li>\n</ol>\n<p>What does this mean?</p>\n<ul>\n<li>page 1 starts, the page counter becomes 1 (but there‚Äôs no header to show it)</li>\n<li>page 2 starts, the page counter becomes 2</li>\n<li>still on page 2, the page counter is set back to 1</li>\n<li>page 3 starts, the page counter becomes 2</li>\n<li>etc.</li>\n</ul>\n<p>Which is why you get (no page number), II, II, III, ‚Ä¶</p>\n<p>The fix is to set the page counter to 0 on page 1, not to 1 on page 2:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(paper: \"a8\")\n\n#lorem(25)\n\n#counter(page).update(0)\n\n#set page(numbering: \"I\", number-align: top, header: context{\n  set text(size: 10pt, weight: \"regular\")\n          \n  [Page number: #h(1fr) #counter(page).display(\"I\")]\n})\n\n= ToC\n#outline(\n  title: none,\n  depth: 3, \n  indent: auto\n)\n\n#pagebreak(to: \"odd\")\n\n= ToF\n#outline(\n  title: none,\n  target: figure.where(kind: image)\n)\n\n#pagebreak(to: \"odd\")\n</code></pre>\n<p>So why does it work for the <a href=\"https://typst.app/docs/reference/introspection/counter/#page-counter\">example in the page counter docs</a>? Well, that example shows page numbers in the footer, so setting the counter on the same page is early enough to affect it. I think for now, you have to be aware of where you‚Äôre showing the page number when setting the counter: somewhere on the previous page for header, on the new page for footer. A real ‚Äúset the counter between pages‚Äù does not seem to be possible for now.</p>",
      "raw": "I assume you want the title page to not count? I.e. ToC to start on page 2, with page counter 1? You have two issues:\n\n1. the `#counter(page).update(1)` appears _on page 2_, so by that time, the header (EDIT: or in OP's case, the background) of page 2 was already written, with page counter also 2.\n\n2. the page counter is incremented _at page start_. For example the counter start out as 0 and is then immediately incremented to 1 on the first page.\n\nWhat does this mean?\n- page 1 starts, the page counter becomes 1 (but there's no header to show it)\n- page 2 starts, the page counter becomes 2\n- still on page 2, the page counter is set back to 1\n- page 3 starts, the page counter becomes 2\n- etc.\n\nWhich is why you get (no page number), II, II, III, ...\n\nThe fix is to set the page counter to 0 on page 1, not to 1 on page 2:\n```typ\n#set page(paper: \"a8\")\n\n#lorem(25)\n\n#counter(page).update(0)\n\n#set page(numbering: \"I\", number-align: top, header: context{\n  set text(size: 10pt, weight: \"regular\")\n          \n  [Page number: #h(1fr) #counter(page).display(\"I\")]\n})\n\n= ToC\n#outline(\n  title: none,\n  depth: 3, \n  indent: auto\n)\n\n#pagebreak(to: \"odd\")\n\n= ToF\n#outline(\n  title: none,\n  target: figure.where(kind: image)\n)\n\n#pagebreak(to: \"odd\")\n```\n\nSo why does it work for the [example in the page counter docs](https://typst.app/docs/reference/introspection/counter/#page-counter)? Well, that example shows page numbers in the footer, so setting the counter on the same page is early enough to affect it. I think for now, you have to be aware of where you're showing the page number when setting the counter: somewhere on the previous page for header, on the new page for footer. A real \"set the counter between pages\" does not seem to be possible for now.",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 29.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2231,
      "post_number": 8,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-22T12:12:43.960Z",
      "updated_at": "2024-09-22T12:12:43.960Z",
      "cooked": "<p>Yes, your assumption was right. Your example fixed the numbering issue of the MWE. Thank you for that!</p>\n<p>Unfortunately it still doesn‚Äôt work as intended in my main project. The numbering starts with 2 instead of 1.</p>\n<p>I think I already identified the reason for this - the following show rule:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): it =&gt; [\n  #pagebreak(to: \"odd\", weak: true)\n  #set text(size: 18pt)\n  #v(11mm / 5)\n  #it\n  #v(11mm / 1)\n]\n</code></pre>\n<p>The empty page created by the pagebreak seems to be part of the heading (not part of the previous chapter), hence the incorrect numbering.</p>\n<p>Do you have an idea how to fix this?</p>",
      "raw": "Yes, your assumption was right. Your example fixed the numbering issue of the MWE. Thank you for that!\n\nUnfortunately it still doesn't work as intended in my main project. The numbering starts with 2 instead of 1. \n\nI think I already identified the reason for this - the following show rule:\n```typ\n#show heading.where(level: 1): it => [\n  #pagebreak(to: \"odd\", weak: true)\n  #set text(size: 18pt)\n  #v(11mm / 5)\n  #it\n  #v(11mm / 1)\n]\n```\n The empty page created by the pagebreak seems to be part of the heading (not part of the previous chapter), hence the incorrect numbering.\n\nDo you have an idea how to fix this?",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 13.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2236,
      "post_number": 9,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-22T12:36:01.207Z",
      "updated_at": "2024-09-22T12:36:01.207Z",
      "cooked": "<p>hmm, interesting problem‚Ä¶ maybe <code>pagebreak(to: \"even\", weak: true)</code> before you reset the page counter?</p>\n<p>(I don‚Äôt think the problem is that the pagebreak is part of the heading; I think Typst ignores whitespace here correctly. It‚Äôs sometimes an edge case though, so maybe it is actually that. What I think is that since the pagebreak may go over two pages, it incremented from 0 to 2 when the first header is produced.)</p>",
      "raw": "hmm, interesting problem... maybe `pagebreak(to: \"even\", weak: true)` before you reset the page counter?\n\n(I don't think the problem is that the pagebreak is part of the heading; I think Typst ignores whitespace here correctly. It's sometimes an edge case though, so maybe it is actually that. What I think is that since the pagebreak may go over two pages, it incremented from 0 to 2 when the first header is produced.)",
      "reply_to_post_number": 8,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 17.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2243,
      "post_number": 10,
      "username": "laurmaedje",
      "name": "Laurenz M√§dje",
      "created_at": "2024-09-22T13:50:38.067Z",
      "updated_at": "2024-09-22T13:50:38.067Z",
      "cooked": "<p>I didn‚Äôt follow the whole conversation, but it might be worth testing the results on the development version because various bugs with respect to interactions of show rules, pagebreaks, and counters were fixed.</p>",
      "raw": "I didn't follow the whole conversation, but it might be worth testing the results on the development version because various bugs with respect to interactions of show rules, pagebreaks, and counters were fixed.",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 37,
      "score": 67.4,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 2246,
      "post_number": 11,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-22T13:56:35.453Z",
      "updated_at": "2024-09-22T13:56:35.453Z",
      "cooked": "<p>Some further testing showed that the following works (on 0.11.1):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(paper: \"a8\")\n#show heading.where(level: 1): it =&gt; [\n  #pagebreak(to: \"odd\", weak: true)\n  #set text(size: 18pt)\n  #v(11mm / 5)\n  #it\n  #v(11mm / 1)\n]\n\n#lorem(25)\n\n#pagebreak(to: \"even\", weak: true)\n// if the even page contains nothing but the counter update,\n// it doesn't work. An invisible dot fixes this; since this\n// page is by definition otherwise empty, the dot shouldn't\n// affect anything.\n#hide[.]\n#counter(page).update(0)\n\n#set page(numbering: \"I\", number-align: top, header: context{\n  set text(size: 10pt, weight: \"regular\")\n          \n  [Page number: #h(1fr) #counter(page).display(\"I\")]\n})\n\n= ToC\n#outline(\n  title: none,\n  depth: 3, \n  indent: auto\n)\n\n#pagebreak(to: \"odd\")\n\n= ToF\n#outline(\n  title: none,\n  target: figure.where(kind: image)\n)\n\n#pagebreak(to: \"odd\")\n</code></pre>\n<p>I don‚Äôt want to set up a from-source install of Typst right now, but maybe someone else can find out if it will be more seamless in 0.12 <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Some further testing showed that the following works (on 0.11.1):\n```typ\n#set page(paper: \"a8\")\n#show heading.where(level: 1): it => [\n  #pagebreak(to: \"odd\", weak: true)\n  #set text(size: 18pt)\n  #v(11mm / 5)\n  #it\n  #v(11mm / 1)\n]\n\n#lorem(25)\n\n#pagebreak(to: \"even\", weak: true)\n// if the even page contains nothing but the counter update,\n// it doesn't work. An invisible dot fixes this; since this\n// page is by definition otherwise empty, the dot shouldn't\n// affect anything.\n#hide[.]\n#counter(page).update(0)\n\n#set page(numbering: \"I\", number-align: top, header: context{\n  set text(size: 10pt, weight: \"regular\")\n          \n  [Page number: #h(1fr) #counter(page).display(\"I\")]\n})\n\n= ToC\n#outline(\n  title: none,\n  depth: 3, \n  indent: auto\n)\n\n#pagebreak(to: \"odd\")\n\n= ToF\n#outline(\n  title: none,\n  target: figure.where(kind: image)\n)\n\n#pagebreak(to: \"odd\")\n```\n\nI don't want to set up a from-source install of Typst right now, but maybe someone else can find out if it will be more seamless in 0.12 :slight_smile:",
      "reply_to_post_number": 9,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 97.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2250,
      "post_number": 13,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-09-22T14:02:42.605Z",
      "updated_at": "2024-09-22T14:02:42.605Z",
      "cooked": "<p>You can download <a href=\"https://github.com/Myriad-Dreamin/tinymist\" rel=\"noopener nofollow ugc\">tinymist</a> that follows nightly Typst from <a href=\"https://github.com/ParaN3xus/tinymist/actions/runs/10861776060\" rel=\"noopener nofollow ugc\">here</a></p>\n<p>It‚Äôs a VSCode extension. Use integrated preview or ‚Äúexport pdf‚Äù button to see results.</p>",
      "raw": "You can download [tinymist](https://github.com/Myriad-Dreamin/tinymist) that follows nightly Typst from [here](https://github.com/ParaN3xus/tinymist/actions/runs/10861776060) \n\nIt's a VSCode extension. Use integrated preview or \"export pdf\" button to see results.",
      "reply_to_post_number": 11,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 37,
      "score": 57.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 2282,
      "post_number": 14,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-22T17:37:12.148Z",
      "updated_at": "2024-09-22T17:37:12.148Z",
      "cooked": "<p>To be clear, tinymist is a multi-tool, but the initial and probably mostly used feature is an LSP server, which can be configured with different IDE/text editors.</p>",
      "raw": "To be clear, tinymist is a multi-tool, but the initial and probably mostly used feature is an LSP server, which can be configured with different IDE/text editors.",
      "reply_to_post_number": 13,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 11.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2315,
      "post_number": 15,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-09-23T02:09:20.298Z",
      "updated_at": "2024-09-23T02:09:20.298Z",
      "cooked": "<p>Exactly. And LSP server executable is also provided in the link.</p>",
      "raw": "Exactly. And LSP server executable is also provided in the link.",
      "reply_to_post_number": 14,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 2452,
      "post_number": 16,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-24T11:00:38.390Z",
      "updated_at": "2024-09-24T11:00:38.390Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/enxinjie\">@enxinjie</a>, I have updated your post‚Äôs title to what I thought was a good title according to the response you selected as an answer. If I got it wrong and the new title does not fit your original issue, feel free to change it, but make sure you follow the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a>:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>",
      "raw": "Hi @enxinjie, I have updated your post's title to what I thought was a good title according to the response you selected as an answer. If I got it wrong and the new title does not fit your original issue, feel free to change it, but make sure you follow the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11):\n\n> **Good titles are questions you would ask your friend about Typst.**",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:58:31.435660"
}
{
  "topic_metadata": {
    "id": 536,
    "title": "Is there an equivalent to Latex's \\cancelto in Typst?",
    "slug": "is-there-an-equivalent-to-latexs-cancelto-in-typst",
    "posts_count": 10,
    "created_at": "2024-09-21T00:09:17.872Z",
    "last_posted_at": "2025-05-12T14:37:45.317Z",
    "views": 637,
    "like_count": 15,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting",
      "math",
      "latex-migration"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 641
  },
  "posts": [
    {
      "id": 2113,
      "post_number": 1,
      "username": "Oddball777",
      "name": "Gustave Coulombe",
      "created_at": "2024-09-21T00:09:17.984Z",
      "updated_at": "2024-09-22T12:40:41.036Z",
      "cooked": "<p>Latex has ‚Äúcancelto‚Äù in math mode. It‚Äôs similar to ‚Äúcancel‚Äù, but it‚Äôs an arrow instead of a line, and it points to an additional parameter which is supposed to indicate what expression evaluates to. Most often, it‚Äôs 0 or 1 (see image). Ideally it would be implemented by the developers, but in the meantime, is there a way to reproduce this with a show rule or something? Thanks!<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/fdc4965f233b34d080c6a0ea51a5a3992f6b74ec.png\" data-download-href=\"https://forum.typst.app/uploads/default/fdc4965f233b34d080c6a0ea51a5a3992f6b74ec\" title=\"Iz5tK\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/fdc4965f233b34d080c6a0ea51a5a3992f6b74ec_2_690x184.png\" alt=\"Iz5tK\" data-base62-sha1=\"AcVZalsd2gNsvpK7jnxFWXihUbG\" width=\"690\" height=\"184\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/fdc4965f233b34d080c6a0ea51a5a3992f6b74ec_2_690x184.png, https://forum.typst.app/uploads/default/original/1X/fdc4965f233b34d080c6a0ea51a5a3992f6b74ec.png 1.5x, https://forum.typst.app/uploads/default/original/1X/fdc4965f233b34d080c6a0ea51a5a3992f6b74ec.png 2x\" data-dominant-color=\"F6F6F6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Iz5tK</span><span class=\"informations\">901√ó241 38.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Latex has \"cancelto\" in math mode. It's similar to \"cancel\", but it's an arrow instead of a line, and it points to an additional parameter which is supposed to indicate what expression evaluates to. Most often, it's 0 or 1 (see image). Ideally it would be implemented by the developers, but in the meantime, is there a way to reproduce this with a show rule or something? Thanks!\n![Iz5tK|690x184](upload://AcVZalsd2gNsvpK7jnxFWXihUbG.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 100,
      "score": 2465.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 409
    },
    {
      "id": 2185,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-21T17:47:54.966Z",
      "updated_at": "2024-09-21T17:47:54.966Z",
      "cooked": "<p>I‚Äôm not aware of an easy solution for this, you might as well <a href=\"https://github.com/typst/typst/issues/new?assignees=&amp;labels=feature+request&amp;projects=&amp;template=feature.yml&amp;title=Write+a+short+and+descriptive+title%21\" rel=\"noopener nofollow ugc\">create a new issue</a> for this.</p>\n<p>Here is my very rough solution:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let cancelto(body, to) = {\n  let arrow = rotate(-55deg, scale(x: 170%, $--&gt;$))\n  context {\n    let m = measure(body)\n    let (w, h) = (m.width, m.height * 2)\n    set place(center + horizon)\n    // block(height: h * 2.5, align(horizon, body)) // Add vertical margins.\n    body\n    place(dx: -w * 0.5, dy: -h * 0.1, arrow)\n    place(dx: w * 0.3, dy: -h * 1.1, $0$)\n  }\n}\n\n$(diff T)/(diff t) = k (diff^2 T)/(diff z^2) + v_z (diff T)/(diff z)$\n\n$cancelto((diff T)/(diff t), 0) = k (diff^2 T)/(diff z^2) + v_z (diff T)/(diff z)$\n\n$(diff T)/(diff t) = k (diff^2 T)/(diff z^2) + v_z (diff T)/(diff z)$\n</code></pre>\n<div align=\"center\">\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/bb9ce9029001900b7e898f28ded0281787e15238.png\" alt=\"image\" data-base62-sha1=\"qLHsRrKH0clfo07oiRyyCVsWsHe\" width=\"483\" height=\"334\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/c6e64136a379c372cdc089a16d0c595327655532.png\" alt=\"image\" data-base62-sha1=\"snxRaOZF6gXD9DFmCZdU1OYVsbw\" width=\"468\" height=\"450\"></p></div>",
      "raw": "I'm not aware of an easy solution for this, you might as well [create a new issue](https://github.com/typst/typst/issues/new?assignees=&labels=feature+request&projects=&template=feature.yml&title=Write+a+short+and+descriptive+title%21) for this.\n\nHere is my very rough solution:\n\n```typ\n#let cancelto(body, to) = {\n  let arrow = rotate(-55deg, scale(x: 170%, $-->$))\n  context {\n    let m = measure(body)\n    let (w, h) = (m.width, m.height * 2)\n    set place(center + horizon)\n    // block(height: h * 2.5, align(horizon, body)) // Add vertical margins.\n    body\n    place(dx: -w * 0.5, dy: -h * 0.1, arrow)\n    place(dx: w * 0.3, dy: -h * 1.1, $0$)\n  }\n}\n\n$(diff T)/(diff t) = k (diff^2 T)/(diff z^2) + v_z (diff T)/(diff z)$\n\n$cancelto((diff T)/(diff t), 0) = k (diff^2 T)/(diff z^2) + v_z (diff T)/(diff z)$\n\n$(diff T)/(diff t) = k (diff^2 T)/(diff z^2) + v_z (diff T)/(diff z)$\n```\n\n<div align=center>\n\n![image|483x334](upload://qLHsRrKH0clfo07oiRyyCVsWsHe.png)\n\n![image|468x450](upload://snxRaOZF6gXD9DFmCZdU1OYVsbw.png)",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 4,
      "reads": 89,
      "score": 182.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2199,
      "post_number": 3,
      "username": "Oddball777",
      "name": "Gustave Coulombe",
      "created_at": "2024-09-21T21:02:30.232Z",
      "updated_at": "2024-09-21T21:02:30.232Z",
      "cooked": "<p>Awesome, thanks. I‚Äôll try to find a way to determine the angle and scale automatically. And I‚Äôll create the issue as well.</p>",
      "raw": "Awesome, thanks. I'll try to find a way to determine the angle and scale automatically. And I'll create the issue as well.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 79,
      "score": 65.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 409
    },
    {
      "id": 2240,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-22T13:40:58.182Z",
      "updated_at": "2024-09-22T13:40:58.182Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Oddball777\" data-post=\"3\" data-topic=\"536\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/o/F7602B/48.png\" class=\"avatar\"> Oddball777:</div>\n<blockquote>\n<p>And I‚Äôll create the issue as well.</p>\n</blockquote>\n</aside>\n<p>Be sure to link it here (both ways is even better). :)</p>",
      "raw": "[quote=\"Oddball777, post:3, topic:536\"]\nAnd I‚Äôll create the issue as well.\n[/quote]\n\nBe sure to link it here (both ways is even better). :)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 2,
      "reads": 76,
      "score": 80.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2324,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-23T06:07:15.259Z",
      "updated_at": "2024-09-23T06:07:15.259Z",
      "cooked": "<p>A relevant issue would be this one probably <a href=\"https://github.com/typst/typst/issues/1532\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Add arrow caps for stroke ¬∑ Issue #1532 ¬∑ typst/typst ¬∑ GitHub</a>.</p>\n<p>Ideally, you would write</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$\n  cancel(a x + b, stroke: #(cap: \"arrow\"))\n$\n</code></pre>\n<p>or another syntax that is less verbose and more discoverable.</p>",
      "raw": "A relevant issue would be this one probably https://github.com/typst/typst/issues/1532.\n\nIdeally, you would write\n```typ\n$\n  cancel(a x + b, stroke: #(cap: \"arrow\"))\n$\n```\nor another syntax that is less verbose and more discoverable.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 70,
      "score": 59.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2409,
      "post_number": 6,
      "username": "Oddball777",
      "name": "Gustave Coulombe",
      "created_at": "2024-09-23T21:33:50.167Z",
      "updated_at": "2024-09-23T21:41:19.982Z",
      "cooked": "<p>There‚Äôs <a href=\"https://github.com/typst/typst/issues/3292\" rel=\"noopener nofollow ugc\">another issue</a> that was already created for this and was closed as not planned. The developers think it would be better as a package.</p>",
      "raw": "There's [another issue](https://github.com/typst/typst/issues/3292) that was already created for this and was closed as not planned. The developers think it would be better as a package.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 63,
      "score": 177.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 409
    },
    {
      "id": 2410,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-23T22:06:04.181Z",
      "updated_at": "2024-09-23T22:06:04.181Z",
      "cooked": "<p>I had a feeling that this is more of a package-level functionality. And since it‚Äôs a part of a package in LaTeX, this further proves the point. You can make a package yourself at any point if you want, otherwise we‚Äôll have to wait for someone else to do it.</p>",
      "raw": "I had a feeling that this is more of a package-level functionality. And since it's a part of a package in LaTeX, this further proves the point. You can make a package yourself at any point if you want, otherwise we'll have to wait for someone else to do it.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 61,
      "score": 12.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2411,
      "post_number": 8,
      "username": "afiaith",
      "name": "Maja Abramski-Kronenberg",
      "created_at": "2024-09-23T22:11:58.033Z",
      "updated_at": "2024-09-23T22:11:58.033Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Oddball777\" data-post=\"3\" data-topic=\"536\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/o/F7602B/48.png\" class=\"avatar\"> Oddball777:</div>\n<blockquote>\n<p>I‚Äôll try to find a way to determine the angle and scale automatically.</p>\n</blockquote>\n</aside>\n<p>Here is the Rust code for the <code>cancel()</code> function, in case there‚Äôs something helpful there:</p><aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/typst/typst/blob/8c813cb7a266225d0a4a3a2e62f10f6f5f774b7a/crates/typst/src/math/cancel.rs\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/blob/8c813cb7a266225d0a4a3a2e62f10f6f5f774b7a/crates/typst/src/math/cancel.rs\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/typst/typst/blob/8c813cb7a266225d0a4a3a2e62f10f6f5f774b7a/crates/typst/src/math/cancel.rs\" target=\"_blank\" rel=\"noopener nofollow ugc\">typst/typst/blob/8c813cb7a266225d0a4a3a2e62f10f6f5f774b7a/crates/typst/src/math/cancel.rs</a></h4>\n\n\n      <pre><code class=\"lang-rs\">use comemo::Track;\n\nuse crate::diag::{At, SourceResult};\nuse crate::foundations::{\n    cast, elem, Content, Context, Func, Packed, Resolve, Smart, StyleChain,\n};\nuse crate::layout::{\n    Abs, Angle, Frame, FrameItem, Length, Point, Ratio, Rel, Size, Transform,\n};\nuse crate::math::{FrameFragment, LayoutMath, MathContext};\nuse crate::syntax::Span;\nuse crate::text::TextElem;\nuse crate::visualize::{FixedStroke, Geometry, Stroke};\n\n/// Displays a diagonal line over a part of an equation.\n///\n/// This is commonly used to show the elimination of a term.\n///\n/// # Example\n/// ```example\n</code></pre>\n\n\n\n  This file has been truncated. <a href=\"https://github.com/typst/typst/blob/8c813cb7a266225d0a4a3a2e62f10f6f5f774b7a/crates/typst/src/math/cancel.rs\" target=\"_blank\" rel=\"noopener nofollow ugc\">show original</a>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "[quote=\"Oddball777, post:3, topic:536, full:true\"]\nI‚Äôll try to find a way to determine the angle and scale automatically.\n[/quote]\n\nHere is the Rust code for the `cancel()` function, in case there‚Äôs something helpful there:\nhttps://github.com/typst/typst/blob/8c813cb7a266225d0a4a3a2e62f10f6f5f774b7a/crates/typst/src/math/cancel.rs",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 55,
      "score": 51.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 91
    },
    {
      "id": 3416,
      "post_number": 9,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-04T18:11:19.726Z",
      "updated_at": "2024-10-04T18:11:19.726Z",
      "cooked": "<p>Now that Typst v0.12.0-rc1 is out, you can also use <a href=\"https://typst.app/docs/reference/math/stretch/\"><code>stretch</code></a> for long arrow:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">  // let arrow = math.stretch(sym.arrow.tr, size: 230%)\n  let arrow = rotate(-55deg, math.stretch(sym.arrow.r, size: 230%))\n</code></pre>\n<p>I also realized that if you are OK with 45 degree arrows, you can remove the <code>rotate()</code> call and use a specific arrow glyph instead: <a href=\"https://typst.app/docs/reference/symbols/sym/?query=arrow\">https://typst.app/docs/reference/symbols/sym/?query=arrow</a>.</p>",
      "raw": "Now that Typst v0.12.0-rc1 is out, you can also use [`stretch`](https://typst.app/docs/reference/math/stretch/) for long arrow:\n\n```typ\n  // let arrow = math.stretch(sym.arrow.tr, size: 230%)\n  let arrow = rotate(-55deg, math.stretch(sym.arrow.r, size: 230%))\n```\n\nI also realized that if you are OK with 45 degree arrows, you can remove the `rotate()` call and use a specific arrow glyph instead: <https://typst.app/docs/reference/symbols/sym/?query=arrow>.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 48,
      "score": 84.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12345,
      "post_number": 10,
      "username": "mndtr",
      "name": "mndtr",
      "created_at": "2025-05-12T14:37:45.317Z",
      "updated_at": "2025-05-12T14:39:20.893Z",
      "cooked": "<p>Looks amazing! But manually adjusting parameters is a little bit clunky. Maybe some day someone will do a package for it‚Ä¶ But this problem seems to be not so easy since every formula with <code>cancelto</code> needs to look nice and with no overlapping of other parts of an equation by an arrow and <code>to</code> part in addition to having enough space for that <code>to</code> part (and how we know people use this arrow in many ways and equations look different with various shapes.</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/5/54da6eb151621937e1c8b77e9dc64cc93912c4a7.png\" alt=\"–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ\" data-base62-sha1=\"c6E5ZX1BXMtAficnOk1z9hSsHR5\" width=\"451\" height=\"121\"></p>",
      "raw": "Looks amazing! But manually adjusting parameters is a little bit clunky. Maybe some day someone will do a package for it... But this problem seems to be not so easy since every formula with `cancelto` needs to look nice and with no overlapping of other parts of an equation by an arrow and `to` part in addition to having enough space for that `to` part (and how we know people use this arrow in many ways and equations look different with various shapes.\n\n![–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ|451x121](upload://c6E5ZX1BXMtAficnOk1z9hSsHR5.png)",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 28,
      "score": 20.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1586
    }
  ],
  "scraped_at": "2025-06-10T09:58:30.555196"
}
{
  "topic_metadata": {
    "id": 537,
    "title": "Can Vim mode keybindings in the web app be customized using TamperMonkey (or similar)?",
    "slug": "can-vim-mode-keybindings-in-the-web-app-be-customized-using-tampermonkey-or-similar",
    "posts_count": 4,
    "created_at": "2024-09-21T00:14:21.621Z",
    "last_posted_at": "2024-09-21T17:56:45.477Z",
    "views": 297,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "web-app",
      "neovim",
      "vim-mode"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 415
  },
  "posts": [
    {
      "id": 2114,
      "post_number": 1,
      "username": "Oddball777",
      "name": "Gustave Coulombe",
      "created_at": "2024-09-21T00:14:21.749Z",
      "updated_at": "2024-09-22T12:39:08.470Z",
      "cooked": "<p>Overleaf lets you use TamperMonkey to customize vim mode keybindings as described here:</p>\n<p><a href=\"https://www.overleaf.com/learn/how-to/How_can_I_define_custom_Vim_macros_in_a_vimrc_file_on_Overleaf%3F\" rel=\"noopener nofollow ugc\">https://www.overleaf.com/learn/how-to/How_can_I_define_custom_Vim_macros_in_a_vimrc_file_on_Overleaf%3F</a></p>\n<p>Is there any way to get this kind of thing working on Typst as well? I‚Äôve tried to play around with the script but haven‚Äôt managed to get it working yet.</p>",
      "raw": "Overleaf lets you use TamperMonkey to customize vim mode keybindings as described here:\n\n[https://www.overleaf.com/learn/how-to/How_can_I_define_custom_Vim_macros_in_a_vimrc_file_on_Overleaf%3F](https://www.overleaf.com/learn/how-to/How_can_I_define_custom_Vim_macros_in_a_vimrc_file_on_Overleaf%3F)\n\nIs there any way to get this kind of thing working on Typst as well? I've tried to play around with the script but haven't managed to get it working yet.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 1280.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 409
    },
    {
      "id": 2162,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-21T15:45:03.448Z",
      "updated_at": "2024-09-21T15:45:03.448Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Oddball777\" data-post=\"1\" data-topic=\"537\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/o/F7602B/48.png\" class=\"avatar\"> Oddball777:</div>\n<blockquote>\n<p>Is there any way to get this kind of thing working on Typst as well?</p>\n</blockquote>\n</aside>\n<p>I don‚Äôt think so. AFAIK, the creators don‚Äôt use Vim at all, so extensive Vim support isn‚Äôt something that is top priority.</p>\n<p>From <a href=\"https://github.com/typst/webapp-issues/issues/366#issuecomment-2142190128\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Vimrc and Langmaps ¬∑ Issue #366 ¬∑ typst/webapp-issues ¬∑ GitHub</a> :</p>\n<blockquote>\n<p>We use <code>@replit/codemirror-vim</code> [‚Ä¶]</p>\n</blockquote>\n<p>So you can try something out knowing the implementation that is used under the hood.</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://www.npmjs.com/package/@replit/codemirror-vim\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/ffe42f2f118adf74a0b48bdda83d7fbd18851639.png\" class=\"site-icon\" data-dominant-color=\"E06969\" width=\"32\" height=\"32\">\n\n      <a href=\"https://www.npmjs.com/package/@replit/codemirror-vim\" target=\"_blank\" rel=\"noopener nofollow ugc\">npm</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/362;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/ef0ba7cbf2b6749fe0220f6ed973027c4c61b251_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"D52E2E\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://www.npmjs.com/package/@replit/codemirror-vim\" target=\"_blank\" rel=\"noopener nofollow ugc\">@replit/codemirror-vim</a></h3>\n\n  <p>Vim keybindings for CodeMirror 6. Latest version: 6.2.1, last published: 6 months ago. Start using @replit/codemirror-vim in your project by running `npm i @replit/codemirror-vim`. There are 17 other projects in the npm registry using...</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Generally, for those rare occasions when I do have to use the web version, the default Vim mode is enough for most stuff. However, for others sites I switch to using <a href=\"https://github.com/fregante/GhostText\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">GitHub - fregante/GhostText: üëª Use your text editor to write in your browser. Everything you type in the editor will be instantly updated in the browser (and vice versa).</a>. I use Neovim, btw, and I just tried using this with Typst web app:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/88a0c0b818c8c9dd4a3da5184dababa7435ddae5.png\" data-download-href=\"https://forum.typst.app/uploads/default/88a0c0b818c8c9dd4a3da5184dababa7435ddae5\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/88a0c0b818c8c9dd4a3da5184dababa7435ddae5_2_690x151.png\" alt=\"image\" data-base62-sha1=\"juFlwY0Oq8m096vQwlvsbmt3gAR\" width=\"690\" height=\"151\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/88a0c0b818c8c9dd4a3da5184dababa7435ddae5_2_690x151.png, https://forum.typst.app/uploads/default/optimized/1X/88a0c0b818c8c9dd4a3da5184dababa7435ddae5_2_1035x226.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/88a0c0b818c8c9dd4a3da5184dababa7435ddae5_2_1380x302.png 2x\" data-dominant-color=\"161A1F\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1816√ó399 19.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>If you disconnect, it looks like the plugin breaks, and you need to reload the page (normally it just works, I think). But a huge advantage that I didn‚Äôt know is that you can connect to multiple files and modify all of them without touching the browser! This means, for example, if I connect to <code>main.typ</code>, create and connect to <code>other.typ</code>, then I can type in both buffers and all the changes will apply in real time. I can, for example, do <code>#include \"other.typ\"</code> in <code>main.typ</code> and write something in <code>other.typ</code> then it will show this in the preview, even though visually the <code>other.typ</code> file is selected in the web app (not <code>main.typ</code>). I think this is a huge productivity boost as you don‚Äôt need to constantly click between files in the web app and just switch between them in your editor.</p>",
      "raw": "[quote=\"Oddball777, post:1, topic:537\"]\nIs there any way to get this kind of thing working on Typst as well?\n[/quote]\n\nI don't think so. AFAIK, the creators don't use Vim at all, so extensive Vim support isn't something that is top priority.\n\nFrom https://github.com/typst/webapp-issues/issues/366#issuecomment-2142190128 :\n\n> We use `@replit/codemirror-vim` [...]\n\nSo you can try something out knowing the implementation that is used under the hood.\n\nhttps://www.npmjs.com/package/@replit/codemirror-vim\n\nGenerally, for those rare occasions when I do have to use the web version, the default Vim mode is enough for most stuff. However, for others sites I switch to using https://github.com/fregante/GhostText. I use Neovim, btw, and I just tried using this with Typst web app:\n\n![image|690x151](upload://juFlwY0Oq8m096vQwlvsbmt3gAR.png)\n\nIf you disconnect, it looks like the plugin breaks, and you need to reload the page (normally it just works, I think). But a huge advantage that I didn't know is that you can connect to multiple files and modify all of them without touching the browser! This means, for example, if I connect to `main.typ`, create and connect to `other.typ`, then I can type in both buffers and all the changes will apply in real time. I can, for example, do `#include \"other.typ\"` in `main.typ` and write something in `other.typ` then it will show this in the preview, even though visually the `other.typ` file is selected in the web app (not `main.typ`). I think this is a huge productivity boost as you don't need to constantly click between files in the web app and just switch between them in your editor.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 25,
      "score": 135.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2166,
      "post_number": 3,
      "username": "Oddball777",
      "name": "Gustave Coulombe",
      "created_at": "2024-09-21T16:45:41.892Z",
      "updated_at": "2024-09-21T16:45:41.892Z",
      "cooked": "<p>Thanks for the answer! Yeah I‚Äôve seen those issues, definitely doesn‚Äôt seem to be a priority which is why I was looking for some hacky fix. I‚Äôll definitely check out GhostTest though, sounds promising.</p>",
      "raw": "Thanks for the answer! Yeah I've seen those issues, definitely doesn't seem to be a priority which is why I was looking for some hacky fix. I'll definitely check out GhostTest though, sounds promising.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 409
    },
    {
      "id": 2186,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-21T17:56:45.477Z",
      "updated_at": "2024-09-21T17:56:45.477Z",
      "cooked": "<p>If you feel like this answers your question, please mark it as a solution to help others find the answer more quickly.</p>",
      "raw": "If you feel like this answers your question, please mark it as a solution to help others find the answer more quickly.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:58:29.839076"
}
{
  "topic_metadata": {
    "id": 540,
    "title": "Is it possible to avoid breaking a line of math over a linebreak?",
    "slug": "is-it-possible-to-avoid-breaking-a-line-of-math-over-a-linebreak",
    "posts_count": 6,
    "created_at": "2024-09-21T01:25:41.544Z",
    "last_posted_at": "2024-11-01T09:57:47.627Z",
    "views": 823,
    "like_count": 10,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "ludwig",
    "tags": [
      "layout",
      "math"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 399
  },
  "posts": [
    {
      "id": 2117,
      "post_number": 1,
      "username": "Monkey",
      "name": "",
      "created_at": "2024-09-21T01:25:41.646Z",
      "updated_at": "2024-09-23T07:04:44.057Z",
      "cooked": "<p>For instance, with margins and font I‚Äôm using, this code produces the following.<br>\n<code>#lorem(12) $forall a in (A sect B)$ #lorem(12)</code></p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/47c7d195559f02f66f8d5d278bf14c4ca585d458.png\" data-download-href=\"https://forum.typst.app/uploads/default/47c7d195559f02f66f8d5d278bf14c4ca585d458\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/47c7d195559f02f66f8d5d278bf14c4ca585d458_2_690x92.png\" alt=\"image\" data-base62-sha1=\"af00ChIF4EQ1MI30D2z2NEtvTe0\" width=\"690\" height=\"92\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/47c7d195559f02f66f8d5d278bf14c4ca585d458_2_690x92.png, https://forum.typst.app/uploads/default/original/1X/47c7d195559f02f66f8d5d278bf14c4ca585d458.png 1.5x, https://forum.typst.app/uploads/default/original/1X/47c7d195559f02f66f8d5d278bf14c4ca585d458.png 2x\" data-dominant-color=\"F2F2F2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">728√ó98 23.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>But I want the <code>$forall a in (A sect B)$</code> to appear on a single line. Is there a way to ensure this?</p>",
      "raw": "For instance, with margins and font I'm using, this code produces the following. \n``#lorem(12) $forall a in (A sect B)$ #lorem(12)``\n\n\n![image|690x92](upload://af00ChIF4EQ1MI30D2z2NEtvTe0.png)\n\n\nBut I want the ``$forall a in (A sect B)$`` to appear on a single line. Is there a way to ensure this?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 90,
      "score": 3778.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 411
    },
    {
      "id": 2119,
      "post_number": 2,
      "username": "ludwig",
      "name": "",
      "created_at": "2024-09-21T01:35:17.342Z",
      "updated_at": "2024-09-21T01:35:17.342Z",
      "cooked": "<p>You can do this be putting the it inside a box, i.e.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#lorem(12) #box($forall a in (A sect B)$) #lorem(12)\n</code></pre>\n<p>If you want this behaviour for all inline equations, you can do the following:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation.where(block: false): box\n</code></pre>\n<p>In this case all such equations would automatically be wrapped by a box.</p>",
      "raw": "You can do this be putting the it inside a box, i.e.\n\n```typ\n#lorem(12) #box($forall a in (A sect B)$) #lorem(12)\n```\n\nIf you want this behaviour for all inline equations, you can do the following:\n```typ\n#show math.equation.where(block: false): box\n```\nIn this case all such equations would automatically be wrapped by a box.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 89,
      "score": 162.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 300
    },
    {
      "id": 2120,
      "post_number": 3,
      "username": "Monkey",
      "name": "",
      "created_at": "2024-09-21T01:37:22.202Z",
      "updated_at": "2024-09-21T01:37:22.202Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"ludwig\" data-post=\"2\" data-topic=\"540\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/ludwig/48/279_2.png\" class=\"avatar\"> ludwig:</div>\n<blockquote>\n<p><code>#show math.equation.where(block: false): box</code></p>\n</blockquote>\n</aside>\n<p>Amazing!! Thank you!!!</p>",
      "raw": "[quote=\"ludwig, post:2, topic:540\"]\n`#show math.equation.where(block: false): box`\n[/quote]\n\nAmazing!! Thank you!!!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 85,
      "score": 17.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 411
    },
    {
      "id": 2121,
      "post_number": 4,
      "username": "afiaith",
      "name": "Maja Abramski-Kronenberg",
      "created_at": "2024-09-21T01:47:13.446Z",
      "updated_at": "2024-09-21T01:49:02.861Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/monkey\">@Monkey</a>,</p>\n<p>I‚Äôm glad <a class=\"mention\" href=\"/u/ludwig\">@ludwig</a>‚Äôs solution was helpful to you <img src=\"https://forum.typst.app/images/emoji/apple/slightly_smiling_face.png?v=12\" title=\":slightly_smiling_face:\" class=\"emoji\" alt=\":slightly_smiling_face:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>For the benefit of other users of the forum, please consider moving the question to the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category (this can be done by editing the question) and marking <a class=\"mention\" href=\"/u/ludwig\">@ludwig</a>‚Äôs answer as the solution (there is ‚Äòüóπ Solution‚Äô button below every reply).</p>",
      "raw": "Hi @Monkey,\n\nI‚Äôm glad @ludwig‚Äôs solution was helpful to you üôÇ\n\nFor the benefit of other users of the forum, please consider moving the question to the #questions category (this can be done by editing the question) and marking @ludwig‚Äôs answer as the solution (there is ‚Äòüóπ Solution‚Äô button below every reply).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 72,
      "score": 74.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 91
    },
    {
      "id": 2164,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-21T15:55:20.806Z",
      "updated_at": "2024-09-21T17:54:52.869Z",
      "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"Monkey\" data-post=\"1\" data-topic=\"540\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/m/D58100/48.png\" class=\"avatar\"> Monkey:</div>\n<blockquote>\n<p><span class=\"hashtag-raw\">#lorem</span>(12) $forall a in (A sect B)$ <span class=\"hashtag-raw\">#lorem</span>(12)</p>\n<p>[‚Ä¶]</p>\n<p>But I want the $forall a in (A sect B)$ to appear on a single line. Is there a way to ensure this?</p>\n</blockquote>\n</aside>\n<p>I would like to note that you should wrap code in `` (for inline code) or in code block fences to improve readability and add a button (for a code block only) to be able to quickly copy any code snippet.</p>\n<p>A quote from <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a> :</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p>If your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ ‚Ä¶ ````. It will then look like this:</p>\n<pre><code class=\"lang-auto\">#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n</code></pre>\n<p>If you need to highlight a code or math mode snippet instead, the language tags <code>typc</code> and <code>typm</code> do that, respectively.</p>\n</blockquote>\n</aside>",
      "raw": "[quote=\"Monkey, post:1, topic:540\"]\n#lorem(12) $forall a in (A sect B)$ #lorem(12)\n\n[...]\n\nBut I want the $forall a in (A sect B)$ to appear on a single line. Is there a way to ensure this?\n[/quote]\n\nI would like to note that you should wrap code in `` (for inline code) or in code block fences to improve readability and add a button (for a code block only) to be able to quickly copy any code snippet.\n\nA quote from https://forum.typst.app/t/how-to-post-in-the-questions-category/11 :\n[quote=\"reknih, post:1, topic:11\"]\nIf your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ ... ````. It will then look like this:\n\n```\n#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n```\n\nIf you need to highlight a code or math mode snippet instead, the language tags `typc` and `typm` do that, respectively.\n[/quote]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 2,
      "reads": 60,
      "score": 97.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 4964,
      "post_number": 6,
      "username": "Saroupille",
      "name": "Fran√ßois Thir√©",
      "created_at": "2024-11-01T09:57:47.627Z",
      "updated_at": "2024-11-01T09:57:47.627Z",
      "cooked": "<p>I have tried this solution, however it has an unexpected behaviour:</p>\n<p>Before:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/c/cf8864962a89b248811f3940a2a11f88104e7593.png\" data-download-href=\"https://forum.typst.app/uploads/default/cf8864962a89b248811f3940a2a11f88104e7593\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/c/cf8864962a89b248811f3940a2a11f88104e7593_2_690x117.png\" alt=\"image\" data-base62-sha1=\"tBV3wyYPg8tY7LU3QbGrnACFn1x\" width=\"690\" height=\"117\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/c/cf8864962a89b248811f3940a2a11f88104e7593_2_690x117.png, https://forum.typst.app/uploads/default/original/2X/c/cf8864962a89b248811f3940a2a11f88104e7593.png 1.5x, https://forum.typst.app/uploads/default/original/2X/c/cf8864962a89b248811f3940a2a11f88104e7593.png 2x\" data-dominant-color=\"E7F7E7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">694√ó118 18.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>After (using the solution provided by <a class=\"mention\" href=\"/u/ludwig\">@ludwig</a> ):<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/23a023ca4bed58ca372123db5a2206b8d9a6b500.png\" data-download-href=\"https://forum.typst.app/uploads/default/23a023ca4bed58ca372123db5a2206b8d9a6b500\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/23a023ca4bed58ca372123db5a2206b8d9a6b500_2_690x117.png\" alt=\"image\" data-base62-sha1=\"559OboFZMwuT5xsjL0LZnlp21IQ\" width=\"690\" height=\"117\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/23a023ca4bed58ca372123db5a2206b8d9a6b500_2_690x117.png, https://forum.typst.app/uploads/default/original/2X/2/23a023ca4bed58ca372123db5a2206b8d9a6b500.png 1.5x, https://forum.typst.app/uploads/default/original/2X/2/23a023ca4bed58ca372123db5a2206b8d9a6b500.png 2x\" data-dominant-color=\"E7F7E7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">694√ó118 19 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>So the box changes the alignement of the equation within text. Is this expected?</p>",
      "raw": "I have tried this solution, however it has an unexpected behaviour:\n\nBefore:\n![image|690x117](upload://tBV3wyYPg8tY7LU3QbGrnACFn1x.png)\n\nAfter (using the solution provided by @ludwig ):\n![image|690x117](upload://559OboFZMwuT5xsjL0LZnlp21IQ.png)\n\nSo the box changes the alignement of the equation within text. Is this expected?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 38,
      "score": 62.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 721
    }
  ],
  "scraped_at": "2025-06-10T09:58:29.084880"
}
{
  "topic_metadata": {
    "id": 545,
    "title": "How to change the page header without causing a pagebreak?",
    "slug": "how-to-change-the-page-header-without-causing-a-pagebreak",
    "posts_count": 12,
    "created_at": "2024-09-21T09:22:31.442Z",
    "last_posted_at": "2024-09-24T03:42:00.300Z",
    "views": 743,
    "like_count": 2,
    "reply_count": 7,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "huz",
    "tags": [],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 1030
  },
  "posts": [
    {
      "id": 2128,
      "post_number": 1,
      "username": "huz",
      "name": "huz",
      "created_at": "2024-09-21T09:22:31.587Z",
      "updated_at": "2024-09-24T03:41:12.542Z",
      "cooked": "<p>How do I set the page header (empty) for the current page (when starting a chapter) without adding an extra empty page?</p>",
      "raw": "How do I set the page header (empty) for the current page (when starting a chapter) without adding an extra empty page?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 87,
      "score": 3212.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 281
    },
    {
      "id": 2129,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-21T09:34:22.353Z",
      "updated_at": "2024-09-21T09:34:22.353Z",
      "cooked": "<p><code>set page()</code> always starts a new page. However, you can find out <em>in the header</em> what page you are on and whether a chapter starts there. If you want to e.g. not show headers on the page where a chapter begins, the package may be right for you:</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/universe/package/hydra\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/universe/package/hydra\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/universe/package/hydra\" target=\"_blank\" rel=\"noopener\">hydra ‚Äì Typst Universe</a></h3>\n\n  <p>Query and display headings in your documents and templates.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>PS: be sure to check out the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a>, maybe you can reformulate your post title as a question.</p>",
      "raw": "`set page()` always starts a new page. However, you can find out _in the header_ what page you are on and whether a chapter starts there. If you want to e.g. not show headers on the page where a chapter begins, the package may be right for you:\n\nhttps://typst.app/universe/package/hydra\n\nPS: be sure to check out the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11), maybe you can reformulate your post title as a question.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 87,
      "score": 67.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2132,
      "post_number": 3,
      "username": "huz",
      "name": "huz",
      "created_at": "2024-09-21T10:40:05.770Z",
      "updated_at": "2024-09-22T14:44:00.226Z",
      "cooked": "<p>Ok it was less effort for me to get to these 2 lines for the <code>header</code> definition than to understand the hydra manual:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\"> let ch = query(selector(&lt;chapter&gt;).after(here()))\n if ch.len() &gt; 0 and ch.first().location().page() == here().page() { return } // empty\n</code></pre>\n<p>(Then adding the <code>&lt;chapter&gt;</code> label to each chapter)<br>\nCan‚Äôt I just query the labels on the current page?</p>",
      "raw": "Ok it was less effort for me to get to these 2 lines for the `header` definition than to understand the hydra manual:\n```typc\n let ch = query(selector(<chapter>).after(here()))\n if ch.len() > 0 and ch.first().location().page() == here().page() { return } // empty\n```\n(Then adding the `<chapter>` label to each chapter)\nCan't I just query the labels on the current page?",
      "reply_to_post_number": null,
      "reply_count": 3,
      "quote_count": 0,
      "like_count": 0,
      "reads": 81,
      "score": 31.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 281
    },
    {
      "id": 2133,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-21T10:44:58.957Z",
      "updated_at": "2024-09-21T10:44:58.957Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"huz\" data-post=\"3\" data-topic=\"545\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/h/662200/48.png\" class=\"avatar\"> huz:</div>\n<blockquote>\n<p>Can‚Äôt I just query the labels on the current page?</p>\n</blockquote>\n</aside>\n<p>Not that I know of. I guess that may change in the future though.</p>\n<aside class=\"quote no-group\" data-username=\"huz\" data-post=\"3\" data-topic=\"545\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/h/662200/48.png\" class=\"avatar\"> huz:</div>\n<blockquote>\n<p>(Then adding the <code>&lt;chapter&gt;</code> label to each chapter)</p>\n</blockquote>\n</aside>\n<p>If your chapters are headings, you can instead query <code>heading.where(level: 1)</code>, that saves you assigning these labels manually.</p>",
      "raw": "[quote=\"huz, post:3, topic:545\"]\nCan‚Äôt I just query the labels on the current page?\n[/quote]\n\nNot that I know of. I guess that may change in the future though.\n\n[quote=\"huz, post:3, topic:545\"]\n(Then adding the `<chapter>` label to each chapter)\n[/quote]\n\nIf your chapters are headings, you can instead query `heading.where(level: 1)`, that saves you assigning these labels manually.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 78,
      "score": 125.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2188,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-21T18:17:41.842Z",
      "updated_at": "2024-09-22T13:38:23.051Z",
      "cooked": "<p>Yes, this solution is pretty short and works great:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(height: 5cm)\n\n#set page(header: context {\n  let ch = query(selector(&lt;chapter&gt;).after(here()))\n  if ch.len() &gt; 0 {\n    if ch.first().location().page() == here().page() { return }\n  }\n  \"not empty\"\n})\n\n#lorem(20)\n\n= Heading 1\n\n#lorem(50)\n\n= Heading 2 &lt;chapter&gt;\n\n#lorem(50)\n\n= Heading 3\n\n#lorem(50)\n\n= Heading 4 &lt;chapter&gt;\n\n#lorem(50)\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<div align=\"center\">\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/065dc2af2aa1e1b1b1b3ef12c4c74d0217b9ed2c.png\" data-download-href=\"https://forum.typst.app/uploads/default/065dc2af2aa1e1b1b1b3ef12c4c74d0217b9ed2c\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/065dc2af2aa1e1b1b1b3ef12c4c74d0217b9ed2c_2_509x499.png\" alt=\"image\" data-base62-sha1=\"UjKeBMzSdr333J4KgYqfRxmWbq\" width=\"509\" height=\"499\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/065dc2af2aa1e1b1b1b3ef12c4c74d0217b9ed2c_2_509x499.png, https://forum.typst.app/uploads/default/optimized/1X/065dc2af2aa1e1b1b1b3ef12c4c74d0217b9ed2c_2_763x748.png 1.5x, https://forum.typst.app/uploads/default/original/1X/065dc2af2aa1e1b1b1b3ef12c4c74d0217b9ed2c.png 2x\" data-dominant-color=\"0B0B0B\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">949√ó932 127 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</div>\n</details>\n<p>But <em>if</em> your chapters have a common name, then you can use heading names instead of labels, which means a cleaner document overall:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(height: 5cm)\n\n#set page(header: context {\n  let headings = query(selector(heading).after(here()))\n  if headings.len() &gt; 0 {\n    let h = headings.first()\n    let is-on-this-page = h.location().page() == here().page()\n    let contains-chapter-in-name = h.body.text.starts-with(\"Chapter\")\n    if is-on-this-page and contains-chapter-in-name { return }\n  }\n  \"not empty\"\n})\n\n#lorem(20)\n\n= Heading 1\n\n#lorem(50)\n\n= Chapter 2\n\n#lorem(50)\n\n= Heading 3\n\n#lorem(50)\n\n= Chapter 4\n\n#lorem(50)\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<div align=\"center\">\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/543d0e3e6f1377e9ef438516cae5927abcaa8d95.png\" data-download-href=\"https://forum.typst.app/uploads/default/543d0e3e6f1377e9ef438516cae5927abcaa8d95\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/543d0e3e6f1377e9ef438516cae5927abcaa8d95_2_504x500.png\" alt=\"image\" data-base62-sha1=\"c1cUXbHd25T6EVRkE2EPSkJjeaV\" width=\"504\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/543d0e3e6f1377e9ef438516cae5927abcaa8d95_2_504x500.png, https://forum.typst.app/uploads/default/optimized/1X/543d0e3e6f1377e9ef438516cae5927abcaa8d95_2_756x750.png 1.5x, https://forum.typst.app/uploads/default/original/1X/543d0e3e6f1377e9ef438516cae5927abcaa8d95.png 2x\" data-dominant-color=\"0B0B0B\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">944√ó936 127 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</div>\n</details>\n<aside class=\"quote no-group\" data-username=\"huz\" data-post=\"3\" data-topic=\"545\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/h/662200/48.png\" class=\"avatar\"> huz:</div>\n<blockquote>\n<p>Can‚Äôt I just query the labels on the current page?</p>\n</blockquote>\n</aside>\n<p>No, since <code>selector</code> doesn‚Äôt have such method: <a href=\"https://typst.app/docs/reference/foundations/selector/\" class=\"inline-onebox\">Selector Type ‚Äì Typst Documentation</a>. And you also can‚Äôt do <code>heading.where(location: here())</code>, but this won‚Äôt be useful, as this also would check the X and Y position on a page. Maybe something like <code>heading.where(on-page: here())</code> would be better. If you want, you can <a href=\"https://github.com/typst/typst/issues/new?assignees=&amp;labels=feature+request&amp;projects=&amp;template=feature.yml&amp;title=Write+a+short+and+descriptive+title%21\" rel=\"noopener nofollow ugc\">create a feature request issue</a>.</p>",
      "raw": "Yes, this solution is pretty short and works great:\n\n```typ\n#set page(height: 5cm)\n\n#set page(header: context {\n  let ch = query(selector(<chapter>).after(here()))\n  if ch.len() > 0 {\n    if ch.first().location().page() == here().page() { return }\n  }\n  \"not empty\"\n})\n\n#lorem(20)\n\n= Heading 1\n\n#lorem(50)\n\n= Heading 2 <chapter>\n\n#lorem(50)\n\n= Heading 3\n\n#lorem(50)\n\n= Heading 4 <chapter>\n\n#lorem(50)\n```\n\n[details=Output]\n<div align=center>\n\n![image|509x499](upload://UjKeBMzSdr333J4KgYqfRxmWbq.png)\n</div>\n[/details]\n\nBut _if_ your chapters have a common name, then you can use heading names instead of labels, which means a cleaner document overall:\n\n```typ\n#set page(height: 5cm)\n\n#set page(header: context {\n  let headings = query(selector(heading).after(here()))\n  if headings.len() > 0 {\n    let h = headings.first()\n    let is-on-this-page = h.location().page() == here().page()\n    let contains-chapter-in-name = h.body.text.starts-with(\"Chapter\")\n    if is-on-this-page and contains-chapter-in-name { return }\n  }\n  \"not empty\"\n})\n\n#lorem(20)\n\n= Heading 1\n\n#lorem(50)\n\n= Chapter 2\n\n#lorem(50)\n\n= Heading 3\n\n#lorem(50)\n\n= Chapter 4\n\n#lorem(50)\n```\n\n[details=Output]\n<div align=center>\n\n![image|504x500](upload://c1cUXbHd25T6EVRkE2EPSkJjeaV.png)\n</div>\n[/details]\n\n[quote=\"huz, post:3, topic:545\"]\nCan‚Äôt I just query the labels on the current page?\n[/quote]\n\nNo, since `selector` doesn't have such method: https://typst.app/docs/reference/foundations/selector/. And you also can't do `heading.where(location: here())`, but this won't be useful, as this also would check the X and Y position on a page. Maybe something like `heading.where(on-page: here())` would be better. If you want, you can [create a feature request issue](https://github.com/typst/typst/issues/new?assignees=&labels=feature+request&projects=&template=feature.yml&title=Write+a+short+and+descriptive+title%21).",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 69,
      "score": 48.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2190,
      "post_number": 6,
      "username": "huz",
      "name": "huz",
      "created_at": "2024-09-21T19:30:22.890Z",
      "updated_at": "2024-09-21T20:30:06.589Z",
      "cooked": "<blockquote>\n<pre><code class=\"lang-auto\">let is-on-this-page = ch.first().location().page() == here().page()\nif ch.len() &gt; 0 and is-on-this-page { return }\n</code></pre>\n</blockquote>\n<p>The first line is not evaluated before the <code>len() &gt; 0</code> test?<br>\nI think you don‚Äôt get an error only because you happen to have actual labels in the text.</p>\n<p>The <code>heading</code> version can work as <a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a> said with a level-check:<br>\n<code>ch = query(heading.where(level: 1).after(here()))</code></p>",
      "raw": "> ```\n> let is-on-this-page = ch.first().location().page() == here().page()\n> if ch.len() > 0 and is-on-this-page { return }\n>```\n\nThe first line is not evaluated before the `len() > 0` test?\nI think you don't get an error only because you happen to have actual labels in the text.\n\nThe `heading` version can work as @SillyFreak said with a level-check:\n`ch = query(heading.where(level: 1).after(here()))`",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 51,
      "score": 45.2,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 281
    },
    {
      "id": 2238,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-22T13:37:10.746Z",
      "updated_at": "2024-09-22T13:37:10.746Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"huz\" data-post=\"6\" data-topic=\"545\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/h/662200/48.png\" class=\"avatar\"> huz:</div>\n<blockquote>\n<p>The first line is not evaluated before the <code>len() &gt; 0</code> test?</p>\n</blockquote>\n</aside>\n<p>Oops, that was an oversight.</p>",
      "raw": "[quote=\"huz, post:6, topic:545\"]\nThe first line is not evaluated before the `len() > 0` test?\n[/quote]\n\nOops, that was an oversight.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 48,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2265,
      "post_number": 8,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-09-22T15:23:15.819Z",
      "updated_at": "2024-09-22T15:23:15.819Z",
      "cooked": "<p>Hey there, could you shoot me DM or reply elaborating which parts of the manual were confusing so that I may improve them? <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>If we knew a little more about your document and how the header looks otherwise, if chapters get their own title pages, etc. then we could perhaps help a little better.</p>",
      "raw": "Hey there, could you shoot me DM or reply elaborating which parts of the manual were confusing so that I may improve them? :slight_smile:\n\nIf we knew a little more about your document and how the header looks otherwise, if chapters get their own title pages, etc. then we could perhaps help a little better.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 46,
      "score": 29.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 2363,
      "post_number": 9,
      "username": "huz",
      "name": "huz",
      "created_at": "2024-09-23T11:22:20.269Z",
      "updated_at": "2024-09-23T11:22:20.269Z",
      "cooked": "<p>I guess you may probably mean the hydra manual and my further research lead me to that assumption. Almost every single sentence.</p>\n<p>I just want empty headers on chapter begin which is totally normal.</p>",
      "raw": "I guess you may probably mean the hydra manual and my further research lead me to that assumption. Almost every single sentence.\n\nI just want empty headers on chapter begin which is totally normal.",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 13.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 281
    },
    {
      "id": 2367,
      "post_number": 10,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-09-23T11:35:30.401Z",
      "updated_at": "2024-09-23T11:35:30.401Z",
      "cooked": "<p>Then <code>hydra</code> doesn‚Äôt seem like the right recommendation, but it does contain logic for this when displaying the current heading in the page header.</p>\n<p>I can outline how hydra does it so you can adapt it for your use case. As there‚Äôs no way to find out if an element (like a heading) is the first on a page semantically, the only way to guess if it is, is to measure it‚Äôs position relative to the header.</p>\n<p>This is what <code>hydra</code> does in order to skip pages where a heading is at the top of the page. The relevant source code is <a href=\"https://github.com/tingerrr/hydra/blob/05983946ce0c34fc9172d0cd43589ce55dc30d50/src/core.typ#L22-L47\" rel=\"noopener nofollow ugc\">here</a> and can be copied and used on it‚Äôs own. It boils down to recreating the page top margin from the current styles and check whether the y position of the heading you found on the current page matches this.</p>\n<p>This comes with some caveats on 0.11.1 and before if you have heading show rules which add <code>v(...)</code> before your show rules, see <a href=\"https://github.com/tingerrr/hydra/issues/16\" rel=\"noopener nofollow ugc\">here</a>, the main workaround is to place those rules in blocks or by adding invisible content before to force the show rule to have a y position before the spacing added by <code>v(...)</code>.</p>",
      "raw": "Then `hydra` doesn't seem like the right recommendation, but it does contain logic for this when displaying the current heading in the page header.\n\nI can outline how hydra does it so you can adapt it for your use case. As there's no way to find out if an element (like a heading) is the first on a page semantically, the only way to guess if it is, is to measure it's position relative to the header.\n\nThis is what `hydra` does in order to skip pages where a heading is at the top of the page. The relevant source code is [here](https://github.com/tingerrr/hydra/blob/05983946ce0c34fc9172d0cd43589ce55dc30d50/src/core.typ#L22-L47) and can be copied and used on it's own. It boils down to recreating the page top margin from the current styles and check whether the y position of the heading you found on the current page matches this.\n\nThis comes with some caveats on 0.11.1 and before if you have heading show rules which add `v(...)` before your show rules, see [here](https://github.com/tingerrr/hydra/issues/16), the main workaround is to place those rules in blocks or by adding invisible content before to force the show rule to have a y position before the spacing added by `v(...)`.",
      "reply_to_post_number": 9,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 23.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 2371,
      "post_number": 11,
      "username": "huz",
      "name": "huz",
      "created_at": "2024-09-23T12:10:59.865Z",
      "updated_at": "2024-09-23T12:10:59.865Z",
      "cooked": "<p>If I understand this correctly, you need detect if a chapter begins at the top of the page by measuring margins?<br>\nThen my two lines of code above are better anyway because I know which headings level starts a new page. And for other levels I don‚Äôt want it anyway wherever they occur.</p>",
      "raw": "If I understand this correctly, you need detect if a chapter begins at the top of the page by measuring margins? \nThen my two lines of code above are better anyway because I know which headings level starts a new page. And for other levels I don't want it anyway wherever they occur.",
      "reply_to_post_number": 10,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 8.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 281
    },
    {
      "id": 2419,
      "post_number": 12,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-24T03:42:00.300Z",
      "updated_at": "2024-09-24T03:42:00.300Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/huz\">@huz</a>, I went ahead and updated your post title to match our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>. Make sure your post title is something you‚Äôd ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @huz, I went ahead and updated your post title to match our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11. Make sure your post title is something you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 33.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:58:28.376256"
}
{
  "topic_metadata": {
    "id": 549,
    "title": "How can I have a linebreak in a section title, but not in outline?",
    "slug": "how-can-i-have-a-linebreak-in-a-section-title-but-not-in-outline",
    "posts_count": 5,
    "created_at": "2024-09-21T15:19:30.440Z",
    "last_posted_at": "2024-09-21T15:45:36.480Z",
    "views": 308,
    "like_count": 2,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "outline"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 189
  },
  "posts": [
    {
      "id": 2143,
      "post_number": 1,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-09-21T15:19:30.596Z",
      "updated_at": "2024-09-22T16:18:48.199Z",
      "cooked": "<p>I would like to have a linebreak in the title of one of the sections, but I don‚Äôt want this linebreak in the document outline, is there a way to do that?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.\")\n\nI want a linebreak here üëá\n= This is a \\ test\n\nBut I don't want a linebreak here üëá\n#outline()\n</code></pre>",
      "raw": "I would like to have a linebreak in the title of one of the sections, but I don't want this linebreak in the document outline, is there a way to do that?\n\n```typ\n#set heading(numbering: \"1.\")\n\nI want a linebreak here üëá\n= This is a \\ test\n\nBut I don't want a linebreak here üëá\n#outline()\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 1357.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 2144,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-21T15:26:13.824Z",
      "updated_at": "2024-09-21T15:26:13.824Z",
      "cooked": "<p>One possibility would be to apply a show rule on <code>outline.entry</code> that basically stops linebreaks from showing up, though I am not completely sure if this could maybe introduce any side effects:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.\")\n#show outline.entry: it =&gt; {\n  show linebreak: none\n  it\n}\n\n#outline()\n\n= This is a \\ test\n</code></pre>\n<p>Applying this show rule to <code>outline</code> itself doesn‚Äôt work, as it internally also uses line breaks for separating the entries, which would then also disappear.</p>",
      "raw": "One possibility would be to apply a show rule on `outline.entry` that basically stops linebreaks from showing up, though I am not completely sure if this could maybe introduce any side effects:\n\n```typ\n#set heading(numbering: \"1.\")\n#show outline.entry: it => {\n  show linebreak: none\n  it\n}\n\n#outline()\n\n= This is a \\ test\n```\n\nApplying this show rule to `outline` itself doesn't work, as it internally also uses line breaks for separating the entries, which would then also disappear.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 42.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2157,
      "post_number": 3,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-09-21T15:36:23.761Z",
      "updated_at": "2024-09-21T15:36:23.761Z",
      "cooked": "<p>That‚Äôs a nice solution, but is there a solution that also removes the linebreak in the PDF metadata (in the embedded outline of the PDF)?</p>",
      "raw": "That's a nice solution, but is there a solution that also removes the linebreak in the PDF metadata (in the embedded outline of the PDF)?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 21.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 2161,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-21T15:44:50.659Z",
      "updated_at": "2024-09-21T15:44:50.659Z",
      "cooked": "<p>As far as I can tell, line breaks are already automatically removed from the PDF metadata, so there is nothing else to be done.</p>",
      "raw": "As far as I can tell, line breaks are already automatically removed from the PDF metadata, so there is nothing else to be done.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 26.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2163,
      "post_number": 5,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-09-21T15:45:36.480Z",
      "updated_at": "2024-09-21T15:45:36.480Z",
      "cooked": "<p>Wonderful then, have a nice day!</p>",
      "raw": "Wonderful then, have a nice day!",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    }
  ],
  "scraped_at": "2025-06-10T09:58:27.645042"
}
{
  "topic_metadata": {
    "id": 556,
    "title": "How to keep the document title out of the table of contents and not have the numbering of the chapters start with 0?",
    "slug": "how-to-keep-the-document-title-out-of-the-table-of-contents-and-not-have-the-numbering-of-the-chapters-start-with-0",
    "posts_count": 6,
    "created_at": "2024-09-21T20:43:43.172Z",
    "last_posted_at": "2024-09-23T17:04:28.311Z",
    "views": 781,
    "like_count": 3,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Anemona-Anonima",
    "tags": [
      "outline"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 650
  },
  "posts": [
    {
      "id": 2196,
      "post_number": 1,
      "username": "Olaf",
      "name": "Olaf",
      "created_at": "2024-09-21T20:43:43.283Z",
      "updated_at": "2024-09-23T06:59:25.394Z",
      "cooked": "<p>I have a question about numbering of headings and in outlines. I have this example document:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= Title\n\n#outline()\n\n#set heading(numbering: \"1.\")\n\n== Section 1\n\n=== Subsection 1.1\n\n=== Subsection 1.2\n\n== Section 2\n\n=== Subsection 2.1\n</code></pre>\n<p>I would like to have this outline and heading numbering:</p>\n<ol>\n<li>Section 1<br>\n1.1  Subsection 1.1<br>\n1.2  Subsection 1.2</li>\n<li>Section 2<br>\n2.1  Subsection 2.1</li>\n</ol>\n<p>But the actual result is:</p>\n<p>Title<br>\n0.1.    Section 1<br>\n0.1.1.  Subsection 1.1<br>\n0.1.2.  Subsection 1.2<br>\n0.2.    Section 2<br>\n0.2.1   Subsection 2.1</p>\n<p>How can I get the expected numbering?</p>",
      "raw": "\nI have a question about numbering of headings and in outlines. I have this example document:\n\n```typ\n= Title\n\n#outline()\n\n#set heading(numbering: \"1.\")\n\n== Section 1\n\n=== Subsection 1.1\n\n=== Subsection 1.2\n\n== Section 2\n\n=== Subsection 2.1\n```\n\nI would like to have this outline and heading numbering:\n\n1.   Section 1 \n1.1  Subsection 1.1\n1.2  Subsection 1.2\n2.   Section 2\n2.1  Subsection 2.1\n\nBut the actual result is:\n\nTitle\n0.1.    Section 1 \n0.1.1.  Subsection 1.1\n0.1.2.  Subsection 1.2\n0.2.    Section 2\n0.2.1   Subsection 2.1\n\nHow can I get the expected numbering?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 66,
      "score": 3693.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 418
    },
    {
      "id": 2202,
      "post_number": 2,
      "username": "Anemona-Anonima",
      "name": "Esteban Mu√±oz",
      "created_at": "2024-09-22T00:22:00.288Z",
      "updated_at": "2024-09-22T00:22:00.288Z",
      "cooked": "<p>To get the expected result, you need to create a show rule for the headings and for the outline.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): set heading(outlined: false, numbering: none)\n\n#show outline.entry: it =&gt; context {\n  let el = it.element\n  if el.func() == heading [\n    #let c = counter(heading).at(el.location()).slice(1)\n    #numbering(el.numbering, ..c) #el.body #box(width: 1fr, it.fill) #it.page\n  ] else{\n    it\n  }\n}\n\n#show heading: it =&gt; context {\n  if it.level != 1 and it.numbering != none [\n    #let c = counter(heading).at(here()).slice(1)\n    #numbering(heading.numbering, ..c) #it.body\n  ] else {\n    it\n  }\n}\n\n#outline(indent: auto)\n#set heading(numbering: \"1.\")\n\n= Title\n\n== Section 1\n\n=== Subsection 1.1\n\n=== Subsection 1.2\n\n== Section 2\n\n=== Subsection 2.1\n\n</code></pre>\n<details>\n<summary>\nResult</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/159230e83770b7de30d38ec9e4c61e77ebb0cc01.png\" alt=\"heading-numbering\" data-base62-sha1=\"34PeRA0GuUNkFNL0qYHm1Yh6dln\" width=\"595\" height=\"372\"></p>\n</details>\n<p>Notice how the auto indent is a little off, as a result maybe you could prefer another indentation.</p>\n<p>Even though it is possible, I highly suggest to avoid this route. Everything would be so much easier if you just write <code>Title</code> with a bigger text size, and make every subheading 1 level higher. For a fully functional show rule you would need to handle the links in the outline, and maybe some other details that I‚Äôm not aware at this moment.</p>",
      "raw": "To get the expected result, you need to create a show rule for the headings and for the outline.\n\n```typ\n#show heading.where(level: 1): set heading(outlined: false, numbering: none)\n\n#show outline.entry: it => context {\n  let el = it.element\n  if el.func() == heading [\n    #let c = counter(heading).at(el.location()).slice(1)\n    #numbering(el.numbering, ..c) #el.body #box(width: 1fr, it.fill) #it.page\n  ] else{\n    it\n  }\n}\n\n#show heading: it => context {\n  if it.level != 1 and it.numbering != none [\n    #let c = counter(heading).at(here()).slice(1)\n    #numbering(heading.numbering, ..c) #it.body\n  ] else {\n    it\n  }\n}\n\n#outline(indent: auto)\n#set heading(numbering: \"1.\")\n\n= Title\n\n== Section 1\n\n=== Subsection 1.1\n\n=== Subsection 1.2\n\n== Section 2\n\n=== Subsection 2.1\n\n```\n\n[details=\"Result\"]\n![heading-numbering|595x372](upload://34PeRA0GuUNkFNL0qYHm1Yh6dln.png)\n[/details]\n\nNotice how the auto indent is a little off, as a result maybe you could prefer another indentation.\n\nEven though it is possible, I highly suggest to avoid this route. Everything would be so much easier if you just write `Title` with a bigger text size, and make every subheading 1 level higher. For a fully functional show rule you would need to handle the links in the outline, and maybe some other details that I'm not aware at this moment.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 60,
      "score": 87.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 41
    },
    {
      "id": 2225,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-22T10:43:25.797Z",
      "updated_at": "2024-09-22T10:43:25.797Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/olaf\">@Olaf</a> glad you got an answer that worked for you! Could you maybe try to revise your post‚Äôs title so others can find it easier in the future? The <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a> recommend a complete question:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>Also, please add relevant tags such as <a class=\"hashtag-cooked\" href=\"/tag/outline\" data-type=\"tag\" data-slug=\"outline\" data-id=\"83\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>outline</span></a>.</p>\n<aside class=\"quote no-group\" data-username=\"Anemona-Anonima\" data-post=\"2\" data-topic=\"556\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/anemona-anonima/48/81_2.png\" class=\"avatar\"> Anemona-Anonima:</div>\n<blockquote>\n<p>Even though it is possible, I highly suggest to avoid this route. Everything would be so much easier if you just write <code>Title</code> with a bigger text size, and make every subheading 1 level higher.</p>\n</blockquote>\n</aside>\n<p>While I‚Äôm here, I‚Äôd like to second that. The title is not really meant to be a heading, and making it one requires you to recreate some built-in stuff (more than the answer showed). So if it‚Äôs an option, just style the title. You can use <code>set document(title: ...)</code> if you want the title to be part of the PDF in a ‚Äústructured‚Äù way:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set document(title: [Title])\n\n#context {\n  set text(1.4em, weight: \"bold\")\n  document.title\n}\n</code></pre>",
      "raw": "@Olaf glad you got an answer that worked for you! Could you maybe try to revise your post's title so others can find it easier in the future? The [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11) recommend a complete question:\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nAlso, please add relevant tags such as #outline.\n\n[quote=\"Anemona-Anonima, post:2, topic:556\"]\nEven though it is possible, I highly suggest to avoid this route. Everything would be so much easier if you just write `Title` with a bigger text size, and make every subheading 1 level higher.\n[/quote]\n\nWhile I'm here, I'd like to second that. The title is not really meant to be a heading, and making it one requires you to recreate some built-in stuff (more than the answer showed). So if it's an option, just style the title. You can use `set document(title: ...)` if you want the title to be part of the PDF in a \"structured\" way:\n```typ\n#set document(title: [Title])\n\n#context {\n  set text(1.4em, weight: \"bold\")\n  document.title\n}\n```",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 49,
      "score": 69.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2323,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-23T06:01:51.225Z",
      "updated_at": "2024-09-23T06:02:17.628Z",
      "cooked": "<p>FYI, you can get everything done without context and inside the heading numbering function, resulting in a more minimal solution.<br>\nOutline indentation is an implemented feature of <code>outline</code>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#heading([Title], outlined: false)\n\n#set heading(numbering: (..numbers) =&gt; {\n  let n = numbers.pos() \n  if n.len() == 1 {\n    return numbering(\"1.\", ..n)\n  } else {\n    return numbering(\"1.1\", ..n.slice(1))\n  }\n})\n#set outline(indent: auto)\n\n#outline()\n\n== Section 1\n\n=== Subsection 1.1\n\n=== Subsection 1.2\n\n== Section 2\n\n=== Subsection 2.1\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/bf54482810690f2e532ece8cb40a9f3d46f86cf1.png\" data-download-href=\"https://forum.typst.app/uploads/default/bf54482810690f2e532ece8cb40a9f3d46f86cf1\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/bf54482810690f2e532ece8cb40a9f3d46f86cf1_2_690x359.png\" alt=\"image\" data-base62-sha1=\"rizLJxjLmOfv0gUs7b6WeRYMyOJ\" width=\"690\" height=\"359\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/bf54482810690f2e532ece8cb40a9f3d46f86cf1_2_690x359.png, https://forum.typst.app/uploads/default/optimized/1X/bf54482810690f2e532ece8cb40a9f3d46f86cf1_2_1035x538.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/bf54482810690f2e532ece8cb40a9f3d46f86cf1_2_1380x718.png 2x\" data-dominant-color=\"FAFAFA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1484√ó774 61.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>",
      "raw": "FYI, you can get everything done without context and inside the heading numbering function, resulting in a more minimal solution.\nOutline indentation is an implemented feature of `outline`.\n\n```typ\n#heading([Title], outlined: false)\n\n#set heading(numbering: (..numbers) => {\n  let n = numbers.pos() \n  if n.len() == 1 {\n    return numbering(\"1.\", ..n)\n  } else {\n    return numbering(\"1.1\", ..n.slice(1))\n  }\n})\n#set outline(indent: auto)\n\n#outline()\n\n== Section 1\n\n=== Subsection 1.1\n\n=== Subsection 1.2\n\n== Section 2\n\n=== Subsection 2.1\n```\n\n[details=\"Output\"]\n![image|690x359](upload://rizLJxjLmOfv0gUs7b6WeRYMyOJ.png)\n[/details]",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 41,
      "score": 83.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2374,
      "post_number": 5,
      "username": "Anemona-Anonima",
      "name": "Esteban Mu√±oz",
      "created_at": "2024-09-23T12:24:10.620Z",
      "updated_at": "2024-09-23T12:24:10.620Z",
      "cooked": "<p>That‚Äôs a much nicer solution! I forgot numbering accepts a fuction <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "That's a much nicer solution! I forgot numbering accepts a fuction :slight_smile:",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 17.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 41
    },
    {
      "id": 2399,
      "post_number": 6,
      "username": "Olaf",
      "name": "Olaf",
      "created_at": "2024-09-23T17:04:28.311Z",
      "updated_at": "2024-09-23T17:04:28.311Z",
      "cooked": "<p>It is as Anemona-Anonima said at the beginning. It is wrong to treat the title of the document as a heading. I did it this way because I know it from Markdown and AsciiDoc. If you don‚Äôt do that, all the problems disappear by themselves.</p>",
      "raw": "It is as Anemona-Anonima said at the beginning. It is wrong to treat the title of the document as a heading. I did it this way because I know it from Markdown and AsciiDoc. If you don't do that, all the problems disappear by themselves.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 418
    }
  ],
  "scraped_at": "2025-06-10T09:58:26.901992"
}
{
  "topic_metadata": {
    "id": 575,
    "title": "How do I change font and font size of text based on an #import[ed] template from 'Universe'?",
    "slug": "how-do-i-change-font-and-font-size-of-text-based-on-an-import-ed-template-from-universe",
    "posts_count": 7,
    "created_at": "2024-09-22T16:37:22.504Z",
    "last_posted_at": "2024-09-23T17:19:05.504Z",
    "views": 451,
    "like_count": 1,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "quachpas",
    "tags": [
      "templates"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 216
  },
  "posts": [
    {
      "id": 2272,
      "post_number": 1,
      "username": "Walter_H_Schreiber",
      "name": "Walter H. Schreiber",
      "created_at": "2024-09-22T16:37:22.606Z",
      "updated_at": "2024-09-24T10:50:55.449Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set text(font: \"Charter\")\n</code></pre>\n<p>for example does not change anything.</p>",
      "raw": "```typ\n#set text(font: \"Charter\")\n```\nfor example does not change anything.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 1989.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 429
    },
    {
      "id": 2281,
      "post_number": 2,
      "username": "Enivex",
      "name": "Enivex",
      "created_at": "2024-09-22T17:30:53.718Z",
      "updated_at": "2024-09-22T17:30:53.718Z",
      "cooked": "<p>Moved to <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a></p>\n<p>You will need to provide more information here. First of all, which template?</p>\n<p>Unfortunately if the template has been implemented in a sub-optimal way, it‚Äôs not possible to change the font without editing the template itself.</p>",
      "raw": "Moved to #questions \n\nYou will need to provide more information here. First of all, which template?\n\nUnfortunately if the template has been implemented in a sub-optimal way, it's not possible to change the font without editing the template itself.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 5
    },
    {
      "id": 2353,
      "post_number": 3,
      "username": "Walter_H_Schreiber",
      "name": "Walter H. Schreiber",
      "created_at": "2024-09-23T10:40:38.409Z",
      "updated_at": "2024-09-24T10:51:11.655Z",
      "cooked": "<p>For example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/letter-pro:2.1.0\": letter-simple\n</code></pre>",
      "raw": "For example:\n```typ\n#import \"@preview/letter-pro:2.1.0\": letter-simple\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 17.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 429
    },
    {
      "id": 2354,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-23T10:53:27.344Z",
      "updated_at": "2024-09-23T10:53:27.344Z",
      "cooked": "<p>The <code>letter-simple</code> function actually seems to provide a <code>font</code> parameter to customize the font.</p>\n<p>For other templates that don‚Äôt have such a parameter, you can sometimes override the font by setting it <em>after</em> applying the template.</p>",
      "raw": "The `letter-simple` function actually seems to provide a `font` parameter to customize the font.\n\nFor other templates that don't have such a parameter, you can sometimes override the font by setting it _after_ applying the template.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 26.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2368,
      "post_number": 5,
      "username": "Walter_H_Schreiber",
      "name": "Walter H. Schreiber",
      "created_at": "2024-09-23T11:37:51.708Z",
      "updated_at": "2024-09-24T10:51:29.788Z",
      "cooked": "<p>Thank you. But what does that mean? Can I change it in my text using some code like: <code>#set letter.with(font: \"...\")</code>? Or do I have to dig inside the template?</p>",
      "raw": "Thank you. But what does that mean? Can I change it in my text using some code like: `#set letter.with(font: \"...\")`? Or do I have to dig inside the template?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 36.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 429
    },
    {
      "id": 2369,
      "post_number": 6,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-23T11:51:25.809Z",
      "updated_at": "2024-09-23T11:52:25.493Z",
      "cooked": "<p>You need to write it like this.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/letter-pro:2.1.0\": letter-simple\n\n#show: letter-simple.with(\n  sender: (name: \"Charles\", address: \"123 Barker Street\"),\n  font: \"Charter\"\n)\n</code></pre>\n<p><code>letter-simple</code> is a function with argument <code>font</code> to which you can pass the fontnames as a <code>string</code> or an <code>array</code> of strings.</p>\n<p>Don‚Äôt hesitate to take a look at the <a href=\"https://typst.app/docs/tutorial/making-a-template/\">Typst Tutorial</a> on making a template.</p>",
      "raw": "You need to write it like this.\n```typ\n#import \"@preview/letter-pro:2.1.0\": letter-simple\n\n#show: letter-simple.with(\n  sender: (name: \"Charles\", address: \"123 Barker Street\"),\n  font: \"Charter\"\n)\n```\n\n`letter-simple` is a function with argument `font` to which you can pass the fontnames as a `string` or an `array` of strings.\n\nDon't hesitate to take a look at the [Typst Tutorial](https://typst.app/docs/tutorial/making-a-template/) on making a template.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 126.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2402,
      "post_number": 7,
      "username": "Walter_H_Schreiber",
      "name": "Walter H. Schreiber",
      "created_at": "2024-09-23T17:19:05.504Z",
      "updated_at": "2024-09-23T17:19:05.504Z",
      "cooked": "<p>That was it. Thank you very much.</p>",
      "raw": "That was it. Thank you very much.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 6.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 429
    }
  ],
  "scraped_at": "2025-06-10T09:58:26.168935"
}
{
  "topic_metadata": {
    "id": 586,
    "title": "How can I get a footnote on the same page as its reference in a multipage numbered-list enum?",
    "slug": "how-can-i-get-a-footnote-on-the-same-page-as-its-reference-in-a-multipage-numbered-list-enum",
    "posts_count": 4,
    "created_at": "2024-09-22T22:37:57.550Z",
    "last_posted_at": "2024-09-24T21:48:22.705Z",
    "views": 169,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "laurmaedje",
    "tags": [
      "layout",
      "footnotes"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 203
  },
  "posts": [
    {
      "id": 2292,
      "post_number": 1,
      "username": "adiabatic",
      "name": "",
      "created_at": "2024-09-22T22:37:57.664Z",
      "updated_at": "2024-09-23T07:25:33.033Z",
      "cooked": "<p>Here‚Äôs a (mostly) minimal case:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(\n    paper: \"a5\",\n)\n\n10. I like traffic lights,\n    #footnote[not stop signs]\n    but only when they're green.\n\n11. #lorem(500)\n</code></pre>\n<p>This generates a two-page PDF. I‚Äôd hoped that the ‚Äúnot stop signs‚Äù footnote text would be on the <em>first</em> page (with its item), but it gets pushed to the <em>second</em> page (after the list enum).</p>\n<p>Is there a way to keep the footnote on the same page as its reference even in multipage enums?</p>\n<p>Thanks!</p>",
      "raw": "Here's a (mostly) minimal case:\n\n```typst\n#set page(\n    paper: \"a5\",\n)\n\n10. I like traffic lights,\n    #footnote[not stop signs]\n    but only when they're green.\n\n11. #lorem(500)\n```\n\nThis generates a two-page PDF. I'd hoped that the \"not stop signs\" footnote text would be on the _first_ page (with its item), but it gets pushed to the _second_ page (after the list enum).\n\nIs there a way to keep the footnote on the same page as its reference even in multipage enums?\n\nThanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 406.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 437
    },
    {
      "id": 2325,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-23T06:18:39.118Z",
      "updated_at": "2024-09-23T06:18:39.118Z",
      "cooked": "<p>Hello,<br>\nI can reproduce this issue on the latest Typst master. This is a known limitation of the layout engine.</p>\n<p>Last I heard about this was from <span class=\"discourse-local-date\" data-date=\"2023-11-19\" data-email-preview=\"2023-11-19T00:00:00Z UTC\">2023-11-19T00:00:00Z</span> at <a href=\"https://github.com/typst/typst/issues/2449\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Footnote in block renders at the page where the block ends ¬∑ Issue #2449 ¬∑ typst/typst ¬∑ GitHub</a>.</p>\n<blockquote>\n<p>Unfortunately no [updates on this]. Tackling this will require larger changes to the layout engine, which will only happen in a longer timeframe.</p>\n</blockquote>\n<p>I am not aware if anything has changed yet, but maybe <a class=\"mention\" href=\"/u/laurmaedje\">@laurmaedje</a> can chime in on this question!</p>",
      "raw": "Hello,\nI can reproduce this issue on the latest Typst master. This is a known limitation of the layout engine. \n\nLast I heard about this was from [date=2023-11-19] at https://github.com/typst/typst/issues/2449.\n> Unfortunately no [updates on this]. Tackling this will require larger changes to the layout engine, which will only happen in a longer timeframe.\n\nI am not aware if anything has changed yet, but maybe @laurmaedje can chime in on this question!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 96.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2497,
      "post_number": 4,
      "username": "laurmaedje",
      "name": "Laurenz M√§dje",
      "created_at": "2024-09-24T21:34:05.830Z",
      "updated_at": "2024-09-24T21:34:05.830Z",
      "cooked": "<p>Will be fixed in the next version. The relevant change is here: <a href=\"https://github.com/typst/typst/pull/5017\" class=\"inline-onebox\">New flow layout, with multi-column floats by laurmaedje ¬∑ Pull Request #5017 ¬∑ typst/typst ¬∑ GitHub</a></p>",
      "raw": "Will be fixed in the next version. The relevant change is here: https://github.com/typst/typst/pull/5017",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 27,
      "score": 115.4,
      "accepted_answer": true,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 2498,
      "post_number": 5,
      "username": "adiabatic",
      "name": "",
      "created_at": "2024-09-24T21:48:22.705Z",
      "updated_at": "2024-09-24T21:48:22.705Z",
      "cooked": "<p>Sounds like the answer is ‚Äújust wait a bit and it‚Äôll work without me changing anything‚Äù. Thanks!</p>",
      "raw": "Sounds like the answer is \"just wait a bit and it'll work without me changing anything\". Thanks!",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 5.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 437
    }
  ],
  "scraped_at": "2025-06-10T09:58:25.444694"
}
