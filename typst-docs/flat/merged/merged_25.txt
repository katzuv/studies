{
  "topic_metadata": {
    "id": 3278,
    "title": "How do I make universal settings for my graphs?",
    "slug": "how-do-i-make-universal-settings-for-my-graphs",
    "posts_count": 6,
    "created_at": "2025-03-15T19:53:48.749Z",
    "last_posted_at": "2025-04-10T11:59:55.116Z",
    "views": 140,
    "like_count": 7,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Mathemensch",
    "tags": [
      "graphics",
      "cetz",
      "templates"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 645
  },
  "posts": [
    {
      "id": 9845,
      "post_number": 1,
      "username": "William",
      "name": "William",
      "created_at": "2025-03-15T19:53:48.940Z",
      "updated_at": "2025-03-15T19:53:48.940Z",
      "cooked": "<p>This is what I’m using right now, but I would really like to start using templates to change all my figures and documents at once, to achieve real consistency in my documents.</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/3/3e17550202353a5c81d5ac753fb58ae3b7a9b525.png\" alt=\"Screenshot 2025-03-15 at 1.50.09 PM\" data-base62-sha1=\"8RhAHbyuyoLJZ2kq0HlIQ0V1WE5\" width=\"457\" height=\"240\"></p>\n<p>Is made by</p>\n<pre><code class=\"lang-auto\">#import \"@preview/cetz:0.3.2\": canvas, draw, draw.set-style, draw.stroke, palette\n#import \"@preview/cetz-plot:0.1.1\": plot, chart\n\n  #canvas({\n\n  // Your plot/chart code goes here\n  import draw: *\n  set-style(axes: (\n    stroke: 0.5pt, \n    tick: (\n      stroke:0.5pt,\n    ),\n    grid: (\n      stroke: gray + 0.5pt,\n      dashed: \"dotted\",\n    )\n  )\n)\n  plot.plot(size: (5,2), x-tick-step: 2,\n  y-tick-step: 5,\n  x-format: v =&gt; text(6pt,str(v)),\n  y-format: v =&gt; text(6pt,str(v)),\n  x-label: text(7pt, [displacement (m) [west]]),\n  y-label: text(7pt, [Force (N) [west]]),\n  x-grid: \"both\",\n  y-max: 25,\n  x-max: 14,\n  y-grid:\"both\",\n  title: \"Filled\",\n  grid-style: (stroke: blue),\n  axis-style: \"scientific-auto\",\n  {\n    plot.add-fill-between(\n      ((0,10),(2,20), (12,20)),\n      ((0,0),(12,0),), style: (stroke: none))\n    plot.add(((0,10),(2,20),(12,20)), style: (stroke: black, ))\n  }\n)\n\n})\n</code></pre>\n<p>but I have to copy and paste this code and then I have to change all of them individually if I want something to be different.</p>\n<p>Any tips on making these settings part of a template would be appreciated and I would also appreciate any aesthetic criticisms and ideas to help make my graphs look nicer.</p>\n<p>Thanks!</p>",
      "raw": "This is what I'm using right now, but I would really like to start using templates to change all my figures and documents at once, to achieve real consistency in my documents. \n\n\n![Screenshot 2025-03-15 at 1.50.09 PM|457x240](upload://8RhAHbyuyoLJZ2kq0HlIQ0V1WE5.png)\n\nIs made by\n\n```\n#import \"@preview/cetz:0.3.2\": canvas, draw, draw.set-style, draw.stroke, palette\n#import \"@preview/cetz-plot:0.1.1\": plot, chart\n\n  #canvas({\n\n  // Your plot/chart code goes here\n  import draw: *\n  set-style(axes: (\n    stroke: 0.5pt, \n    tick: (\n      stroke:0.5pt,\n    ),\n    grid: (\n      stroke: gray + 0.5pt,\n      dashed: \"dotted\",\n    )\n  )\n)\n  plot.plot(size: (5,2), x-tick-step: 2,\n  y-tick-step: 5,\n  x-format: v => text(6pt,str(v)),\n  y-format: v => text(6pt,str(v)),\n  x-label: text(7pt, [displacement (m) [west]]),\n  y-label: text(7pt, [Force (N) [west]]),\n  x-grid: \"both\",\n  y-max: 25,\n  x-max: 14,\n  y-grid:\"both\",\n  title: \"Filled\",\n  grid-style: (stroke: blue),\n  axis-style: \"scientific-auto\",\n  {\n    plot.add-fill-between(\n      ((0,10),(2,20), (12,20)),\n      ((0,0),(12,0),), style: (stroke: none))\n    plot.add(((0,10),(2,20),(12,20)), style: (stroke: black, ))\n  }\n)\n\n})\n```\n\nbut I have to copy and paste this code and then I have to change all of them individually if I want something to be different. \n\nAny tips on making these settings part of a template would be appreciated and I would also appreciate any aesthetic criticisms and ideas to help make my graphs look nicer. \n\nThanks!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 93.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1356
    },
    {
      "id": 9847,
      "post_number": 2,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2025-03-15T23:52:07.826Z",
      "updated_at": "2025-03-15T23:52:07.826Z",
      "cooked": "<p>Hi, this is super easy.</p>\n<p>Could you tell me which settings should be identical to all graphs, and which you would like to set individually per graph? Maybe x-max for example?</p>\n<p>Then I could create a simple example code for you.</p>",
      "raw": "Hi, this is super easy.\n\nCould you tell me which settings should be identical to all graphs, and which you would like to set individually per graph? Maybe x-max for example?\n\nThen I could create a simple example code for you.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 27.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 9848,
      "post_number": 3,
      "username": "William",
      "name": "William",
      "created_at": "2025-03-16T01:08:09.136Z",
      "updated_at": "2025-03-16T01:08:09.136Z",
      "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"William\" data-post=\"1\" data-topic=\"3278\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/w/B14C00/48.png\" class=\"avatar\"> William:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">x-format: v =&gt; text(6pt,str(v)),\n  y-format: v =&gt; text(6pt,str(v)),\nx-grid: \"both\",\naxis-style: \"scientific-auto\"\n\n</code></pre>\n</blockquote>\n</aside>\n<p>These ones would be great. Thank you for your offer!</p>",
      "raw": "[quote=\"William, post:1, topic:3278\"]\n```\nx-format: v => text(6pt,str(v)),\n  y-format: v => text(6pt,str(v)),\nx-grid: \"both\",\naxis-style: \"scientific-auto\"\n\n```\n[/quote]\n\nThese ones would be great. Thank you for your offer!",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 40,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1356
    },
    {
      "id": 9882,
      "post_number": 4,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2025-03-16T23:27:37.609Z",
      "updated_at": "2025-03-16T23:27:37.609Z",
      "cooked": "<p>Hi William,</p>\n<p>I looked into your request and developed a solution that combines two different approaches. The goal is to define global settings for plots in a centralized way and have a function that automatically applies these settings to every graph.</p>\n<p><strong>First Approach: Global Settings</strong><br>\nI created a <code>plot-settings</code> variable that stores various parameters like <code>x-grid</code> or <code>axis-style</code>. This allows you to define these values in one place and reuse them in every plot.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let plot-settings = (\n  x-format: v =&gt; text(6pt,str(v)),\n  y-format: v =&gt; text(6pt,str(v)),\n  x-grid: \"both\",\n  axis-style: \"scientific-auto\",\n)\n</code></pre>\n<p><strong>Second Approach: A Wrapper Function</strong><br>\nAdditionally, I implemented a <code>william-graph</code> function that automatically applies axis styling. This way, you don’t have to manually define styling each time.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let william-graph(body) = canvas({\n  import draw: *\n  set-style(axes: (\n      stroke: 0.5pt, \n      tick: (\n        stroke:0.5pt,\n      ),\n      grid: (\n        stroke: gray + 0.5pt,\n        dashed: \"dotted\",\n      )\n    )\n  )\n  body\n})\n</code></pre>\n<p><strong>Example Usage</strong><br>\nHere, the function is used to create a plot with global settings and predefined axis styling:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#william-graph({\n  plot.plot(size: (5,2), x-tick-step: 2,\n  y-tick-step: 5,\n  x-label: text(7pt, [displacement (m) [west]]),\n  y-label: text(7pt, [Force (N) [west]]),\n  y-max: 25,\n  x-max: 14,\n  y-grid:\"both\",\n  title: \"Filled\",\n  ..plot-settings,\n  grid-style: (stroke: blue),\n  {\n    plot.add-fill-between(\n      ((0,10),(2,20), (12,20)),\n      ((0,0),(12,0),), style: (stroke: none))\n    plot.add(((0,10),(2,20),(12,20)), style: (stroke: black, ))\n  }\n)\n})\n</code></pre>\n<p>This setup allows you to manage your plots more easily and maintain consistent styling. You can find a working example here: <a href=\"https://typst.app/project/r2oZ82H5jr8Xar5Zg8Op79\">Example Project</a>. Let me know if you need further adjustments!</p>",
      "raw": "Hi William,\n\nI looked into your request and developed a solution that combines two different approaches. The goal is to define global settings for plots in a centralized way and have a function that automatically applies these settings to every graph.\n\n**First Approach: Global Settings**  \nI created a `plot-settings` variable that stores various parameters like `x-grid` or `axis-style`. This allows you to define these values in one place and reuse them in every plot.\n\n```typ\n#let plot-settings = (\n  x-format: v => text(6pt,str(v)),\n  y-format: v => text(6pt,str(v)),\n  x-grid: \"both\",\n  axis-style: \"scientific-auto\",\n)\n```\n\n**Second Approach: A Wrapper Function**  \nAdditionally, I implemented a `william-graph` function that automatically applies axis styling. This way, you don’t have to manually define styling each time.\n\n```typ\n#let william-graph(body) = canvas({\n  import draw: *\n  set-style(axes: (\n      stroke: 0.5pt, \n      tick: (\n        stroke:0.5pt,\n      ),\n      grid: (\n        stroke: gray + 0.5pt,\n        dashed: \"dotted\",\n      )\n    )\n  )\n  body\n})\n```\n\n**Example Usage**  \nHere, the function is used to create a plot with global settings and predefined axis styling:\n\n```typ\n#william-graph({\n  plot.plot(size: (5,2), x-tick-step: 2,\n  y-tick-step: 5,\n  x-label: text(7pt, [displacement (m) [west]]),\n  y-label: text(7pt, [Force (N) [west]]),\n  y-max: 25,\n  x-max: 14,\n  y-grid:\"both\",\n  title: \"Filled\",\n  ..plot-settings,\n  grid-style: (stroke: blue),\n  {\n    plot.add-fill-between(\n      ((0,10),(2,20), (12,20)),\n      ((0,0),(12,0),), style: (stroke: none))\n    plot.add(((0,10),(2,20),(12,20)), style: (stroke: black, ))\n  }\n)\n})\n```\n\nThis setup allows you to manage your plots more easily and maintain consistent styling. You can find a working example here: [Example Project](https://typst.app/project/r2oZ82H5jr8Xar5Zg8Op79). Let me know if you need further adjustments!",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 4,
      "reads": 36,
      "score": 72.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 10874,
      "post_number": 5,
      "username": "William",
      "name": "William",
      "created_at": "2025-04-10T11:54:00.172Z",
      "updated_at": "2025-04-10T11:54:00.172Z",
      "cooked": "<p>Thank you so much for this!</p>",
      "raw": "Thank you so much for this!",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 16,
      "score": 23.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1356
    },
    {
      "id": 10876,
      "post_number": 6,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2025-04-10T11:59:55.116Z",
      "updated_at": "2025-04-10T11:59:55.116Z",
      "cooked": "<p>You’re welcome!</p>\n<p>Please mark the answer as the solution, so others can easily see that the question has been answered and find the solution more quickly.</p>",
      "raw": "You’re welcome!\n\nPlease mark the answer as the solution, so others can easily see that the question has been answered and find the solution more quickly.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 307
    }
  ],
  "scraped_at": "2025-06-10T09:50:20.937758"
}
{
  "topic_metadata": {
    "id": 3279,
    "title": "How to keep text vertically centered in table when adjusting row height?",
    "slug": "how-to-keep-text-vertically-centered-in-table-when-adjusting-row-height",
    "posts_count": 5,
    "created_at": "2025-03-16T02:31:27.662Z",
    "last_posted_at": "2025-03-16T14:32:44.438Z",
    "views": 52,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "tables",
      "alignment"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 649
  },
  "posts": [
    {
      "id": 9850,
      "post_number": 1,
      "username": "Johannes",
      "name": "Johannes",
      "created_at": "2025-03-16T02:31:27.810Z",
      "updated_at": "2025-03-18T17:43:17.298Z",
      "cooked": "<p>So I wanted to shrink the row height of a table, but now the text is aligned to the bottom, so it touches horizontal lines below, while there is plenty of space above the text. Is there a way to change that? Thanks!</p>",
      "raw": "So I wanted to shrink the row height of a table, but now the text is aligned to the bottom, so it touches horizontal lines below, while there is plenty of space above the text. Is there a way to change that? Thanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 94.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1129
    },
    {
      "id": 9852,
      "post_number": 2,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-16T07:17:30.790Z",
      "updated_at": "2025-03-16T07:17:30.790Z",
      "cooked": "<p>Hi there! Could you please provide the code for the table? It would clarify your problem and help us come up with a solution.</p>",
      "raw": "Hi there! Could you please provide the code for the table? It would clarify your problem and help us come up with a solution.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 9868,
      "post_number": 3,
      "username": "Johannes",
      "name": "Johannes",
      "created_at": "2025-03-16T13:38:41.571Z",
      "updated_at": "2025-03-16T13:38:41.571Z",
      "cooked": "<p>Sure. Here’s what I’m working with:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">\n#set text(size: 8pt)\n\n#figure(\n  \n  table(\n    \n    \n    columns: (12),\n    stroke: none,\n    rows: (10pt),\n    fill: (_, y) =&gt; if calc.odd(y) and y &gt; 2 { rgb(\"EAF2F5\") },\n    \n    \n    \n    table.hline(start: 0, y: 0),\n    table.hline(start: 0, y: 3),\n    table.hline(start: 0, y: 5),\n    table.hline(start: 0, y: 6),\n    table.hline(start: 0, y: 11),\n  \n    \n    table.vline(x: 0, start: 0),\n    table.vline(x: 1, start: 0),\n    table.vline(x: 3, start: 0),\n    table.vline(x: 7, start: 0),\n    table.vline(x: 8, start: 0),\n    table.vline(x: 9, start: 0),\n    table.vline(x: 12, start: 0),\n\n    \n    [*Höhe*], table.cell(colspan: 2)[*Temperatur*], table.cell(colspan: 4)[*Druck*], [*Dichte*], [*Wichte*], table.cell(colspan: 3)[*Verhältniszahlen*], \n\n    [$h$], [$t$], [$T$], [N/$\"m\"^2$], [$p$], [], [], [$rho$], [$gamma$], [$T/T_n$], [$p/p_n$], [$gamma/gamma_n = rho/rho_n$],\n\n    [km], [°C], [K], [Pa], [Torr], [at], [mbar], [kg/$\"m\"^3$], [N/$\"m\"^3$], [], [], [],\n\n    [-0.2], [16.30], [289.46], [103750], [778.20], [1.05796], [1037.51], [1.2487], [12.246], [1.00451], [1.02394], [1.0193],\n\n    [-0.1], [15.65], [288.81], [102532], [769.05], [1.04554], [1025.32], [1.2368], [12.129], [1.00226], [1.01191], [1.0094],\n\n    [_0_], [_15.00_], [_288.16_], [_101325_], [_760.00_], [_1.03323_], [_1013.25_], [_1.2250_], [_12.013_], [_1.00000_], [_1.00000_], [_1.00000_],\n\n    [0.1], [14.35], [287.51], [100130], [751.03], [1.02104], [1001.29], [1.2133], [11.898], [0.99774], [0.98820], [0.99043],\n    \n    [0.2], [13.70], [286.86], [98945], [742.15], [1.00896], [989.45], [1.2017], [11.785], [0.99549], [0.97651], [0.98094],\n\n    [0.3], [13.05], [286.21], [97772], [733.35], [0.99700], [977.73], [1.1901], [11.671], [0.99323], [0.96494], [0.97151],\n\n    [0.4], [12.40], [285.56], [96611], [724.64], [0.98516], [966.11], [1.1787], [11.559], [0.99097], [0.95348], [0.96216],\n\n    [0.5], [11.75], [284.91], [95461], [716.01], [0.97343], [954.61], [1.1673], [11.447], [0.98872], [0.94213], [0.95287],\n\n))\n\n</code></pre>\n<p>Oh, and just in case you know - is there a way to change font size within the table or figure environment only, withouth changing the size for the entire page?</p>",
      "raw": "Sure. Here's what I'm working with:\n\n```typst\n\n#set text(size: 8pt)\n\n#figure(\n  \n  table(\n    \n    \n    columns: (12),\n    stroke: none,\n    rows: (10pt),\n    fill: (_, y) => if calc.odd(y) and y > 2 { rgb(\"EAF2F5\") },\n    \n    \n    \n    table.hline(start: 0, y: 0),\n    table.hline(start: 0, y: 3),\n    table.hline(start: 0, y: 5),\n    table.hline(start: 0, y: 6),\n    table.hline(start: 0, y: 11),\n  \n    \n    table.vline(x: 0, start: 0),\n    table.vline(x: 1, start: 0),\n    table.vline(x: 3, start: 0),\n    table.vline(x: 7, start: 0),\n    table.vline(x: 8, start: 0),\n    table.vline(x: 9, start: 0),\n    table.vline(x: 12, start: 0),\n\n    \n    [*Höhe*], table.cell(colspan: 2)[*Temperatur*], table.cell(colspan: 4)[*Druck*], [*Dichte*], [*Wichte*], table.cell(colspan: 3)[*Verhältniszahlen*], \n\n    [$h$], [$t$], [$T$], [N/$\"m\"^2$], [$p$], [], [], [$rho$], [$gamma$], [$T/T_n$], [$p/p_n$], [$gamma/gamma_n = rho/rho_n$],\n\n    [km], [°C], [K], [Pa], [Torr], [at], [mbar], [kg/$\"m\"^3$], [N/$\"m\"^3$], [], [], [],\n\n    [-0.2], [16.30], [289.46], [103750], [778.20], [1.05796], [1037.51], [1.2487], [12.246], [1.00451], [1.02394], [1.0193],\n\n    [-0.1], [15.65], [288.81], [102532], [769.05], [1.04554], [1025.32], [1.2368], [12.129], [1.00226], [1.01191], [1.0094],\n\n    [_0_], [_15.00_], [_288.16_], [_101325_], [_760.00_], [_1.03323_], [_1013.25_], [_1.2250_], [_12.013_], [_1.00000_], [_1.00000_], [_1.00000_],\n\n    [0.1], [14.35], [287.51], [100130], [751.03], [1.02104], [1001.29], [1.2133], [11.898], [0.99774], [0.98820], [0.99043],\n    \n    [0.2], [13.70], [286.86], [98945], [742.15], [1.00896], [989.45], [1.2017], [11.785], [0.99549], [0.97651], [0.98094],\n\n    [0.3], [13.05], [286.21], [97772], [733.35], [0.99700], [977.73], [1.1901], [11.671], [0.99323], [0.96494], [0.97151],\n\n    [0.4], [12.40], [285.56], [96611], [724.64], [0.98516], [966.11], [1.1787], [11.559], [0.99097], [0.95348], [0.96216],\n\n    [0.5], [11.75], [284.91], [95461], [716.01], [0.97343], [954.61], [1.1673], [11.447], [0.98872], [0.94213], [0.95287],\n\n))\n\n```\n\nOh, and just in case you know - is there a way to change font size within the table or figure environment only, withouth changing the size for the entire page?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 8.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1129
    },
    {
      "id": 9869,
      "post_number": 4,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-16T13:58:38.864Z",
      "updated_at": "2025-03-16T13:58:38.864Z",
      "cooked": "<p>You can set <a href=\"https://typst.app/docs/reference/model/table/#parameters-align\"><code>align</code></a> to <code>horizon</code> to make the content vertically centered. And you can use a show-set rule to change the font size within the figure or table environment.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// use figure here if you also want to include the caption\n#show table: set text(size: 8pt)\n\n#figure(\n  #table(\n    columns: 12,\n    stroke: none,\n    align: horizon,\n    rows: 10pt,\n    fill: (_, y) =&gt; if calc.odd(y) and y &gt; 2 { rgb(\"EAF2F5\") },\n\n    ..(0, 3, 5, 6, 11).map(y =&gt; table.hline(start: 0, y: y)),\n    ..(0, 1, 3, 7, 8, 9, 12).map(x =&gt; table.vline(start: 0, x: x)),\n\n    ...\n  )\n)\n</code></pre>\n<p>In general I would’ve also recommended you to pass a function to the property <code>stroke</code> instead of using <code>table.hline()</code> and <code>table.vline()</code>. But in your specific case this gets a bit weird due to the cell “Verhältniszahlen” that spans three columns. You can however clean up your table by creating the horizontal lines and vertical lines in a loop.</p>\n<p>And if you would want the row height to always be compact relative to the font size, you can use <code>rows: 1.25em</code> instead of <code>rows: 10pt</code>.</p>",
      "raw": "You can set [`align`](https://typst.app/docs/reference/model/table/#parameters-align) to `horizon` to make the content vertically centered. And you can use a show-set rule to change the font size within the figure or table environment.\n\n```typ\n// use figure here if you also want to include the caption\n#show table: set text(size: 8pt)\n\n#figure(\n  #table(\n    columns: 12,\n    stroke: none,\n    align: horizon,\n    rows: 10pt,\n    fill: (_, y) => if calc.odd(y) and y > 2 { rgb(\"EAF2F5\") },\n\n    ..(0, 3, 5, 6, 11).map(y => table.hline(start: 0, y: y)),\n    ..(0, 1, 3, 7, 8, 9, 12).map(x => table.vline(start: 0, x: x)),\n\n    ...\n  )\n)\n```\n\nIn general I would've also recommended you to pass a function to the property `stroke` instead of using `table.hline()` and `table.vline()`. But in your specific case this gets a bit weird due to the cell \"Verhältniszahlen\" that spans three columns. You can however clean up your table by creating the horizontal lines and vertical lines in a loop.\n\nAnd if you would want the row height to always be compact relative to the font size, you can use `rows: 1.25em` instead of `rows: 10pt`.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 16,
      "score": 23.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 9870,
      "post_number": 5,
      "username": "Johannes",
      "name": "Johannes",
      "created_at": "2025-03-16T14:32:44.438Z",
      "updated_at": "2025-03-16T14:32:44.438Z",
      "cooked": "<p>Thank you. Still trying to get used to the .map function, but you are right, that is way more elegant.</p>",
      "raw": "Thank you. Still trying to get used to the .map function, but you are right, that is way more elegant.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1129
    }
  ],
  "scraped_at": "2025-06-10T09:50:20.130565"
}
{
  "topic_metadata": {
    "id": 3281,
    "title": "How can I create an \"actions\" function and table of actions?",
    "slug": "how-can-i-create-an-actions-function-and-table-of-actions",
    "posts_count": 5,
    "created_at": "2025-03-16T10:25:24.971Z",
    "last_posted_at": "2025-04-14T18:03:10.385Z",
    "views": 85,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Adrian_Weitkemper",
    "tags": [
      "scripting",
      "outline"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 1090
  },
  "posts": [
    {
      "id": 9856,
      "post_number": 1,
      "username": "Beno",
      "name": "",
      "created_at": "2025-03-16T10:25:25.234Z",
      "updated_at": "2025-04-14T17:47:04.659Z",
      "cooked": "<p>I’m trying to create a function to be mark inline actions in a run of text which indicate the assignee in a margin note (via the drafting module) and then add them to a global dictionary to be able to render a table later at the end of the document.</p>\n<p>This was my attempt:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// Create a dictionary to store actions for each assignee.  \n// The key will be the assignee and the value will be array of actions\n// Due to scoping constraints, use the \"state\" function\n#let actions = state(\"actions\", (\"\": ()))\n\n// Define a helper function to add an action to the global dictionary\n#let _add_action(assignee, action) = {\n  let actions_for_assignee = actions.at(assignee, ())\n  actions_for_assignee.append(action)\n  actions.update(assignee, actions_for_assignee)\n}\n\n// Define an action for use in the body text\n#let action(body, assignee: \"\", side: left) = {\n    // Add action to the global state to be able to render a table later\n    _add_action(assignee, body)\n    // Display the action text inline as usual\n    body\n    // Mark the presence of an action in a sidenote with the assignee\n    margin-note(side: side)[#strong(\"Action:\") #assignee]\n}\n\nHere's an example of text with an #action(assignee: \"Ben\")[action for Ben to do].\n</code></pre>\n<p>This won’t compile, complaining at line</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">  let actions_for_assignee = actions.at(assignee, ())\n</code></pre>\n<p>“text is not locatable”</p>\n<p>I suspect I’m misunderstanding how dictionaries and/or state variables should working.  Any suggestions would be very welcome!</p>",
      "raw": "I'm trying to create a function to be mark inline actions in a run of text which indicate the assignee in a margin note (via the drafting module) and then add them to a global dictionary to be able to render a table later at the end of the document.\n\nThis was my attempt:\n\n```typ\n// Create a dictionary to store actions for each assignee.  \n// The key will be the assignee and the value will be array of actions\n// Due to scoping constraints, use the \"state\" function\n#let actions = state(\"actions\", (\"\": ()))\n\n// Define a helper function to add an action to the global dictionary\n#let _add_action(assignee, action) = {\n  let actions_for_assignee = actions.at(assignee, ())\n  actions_for_assignee.append(action)\n  actions.update(assignee, actions_for_assignee)\n}\n\n// Define an action for use in the body text\n#let action(body, assignee: \"\", side: left) = {\n    // Add action to the global state to be able to render a table later\n    _add_action(assignee, body)\n    // Display the action text inline as usual\n    body\n    // Mark the presence of an action in a sidenote with the assignee\n    margin-note(side: side)[#strong(\"Action:\") #assignee]\n}\n\nHere's an example of text with an #action(assignee: \"Ben\")[action for Ben to do].\n```\n\nThis won't compile, complaining at line\n```typc\n  let actions_for_assignee = actions.at(assignee, ())\n```\n\"text is not locatable\"\n\nI suspect I'm misunderstanding how dictionaries and/or state variables should working.  Any suggestions would be very welcome!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 80.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1355
    },
    {
      "id": 9866,
      "post_number": 2,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-16T12:34:35.471Z",
      "updated_at": "2025-03-21T08:45:11.312Z",
      "cooked": "<p>Hi there! Welcome to the Forum.<br>\nThe actions.at() doesn’t work, because it references the at method of the state element itself, not the dictionary (see the <a href=\"https://typst.app/docs/reference/introspection/state#time-travel\">typst doc</a>). The at function of the state expects a location in the document or something like that (label etc.), so that’s what the error is about. Here is:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">// Create a dictionary to store actions for each assignee.  \n// The key will be the assignee and the value will be array of actions\n// Due to scoping constraints, use the \"state\" function\n#let actions = state(\"actions\", (:))\n\n// Define a helper function to add an action to the global dictionary\n#let _add_action(actions, assignee, action) = {\n  if not assignee in actions {\n    actions.insert(assignee, (action,))\n  }\n  else {\n  actions.at(assignee).push(action)\n  }\n  return actions\n}\n\n// Define an action for use in the body text\n#let action(body, assignee: \"\", side: left) = {\n    // Add action to the global state to be able to render a table later\n    actions.update(x =&gt; _add_action(x, assignee, body))\n    // Display the action text inline as usual\n    body\n    // Mark the presence of an action in a sidenote with the assignee\n    // margin-note(side: side)[#strong(\"Action:\") #assignee]\n}\n\nHere's an example of text with an #action(assignee: \"Ben\")[action for Ben to do]\n\n#action(assignee: \"Ben\")[new action for Ben to do].\n\nThe current content of actions: \n\n#context actions.get()\n\n#action(assignee: \"Steven\")[a new person with some action].\n\n#action(assignee: \"Steven\")[steven action].\n\nThe current content of actions: \n\n#context actions.get()\n</code></pre>\n<p>Note that I commented the “margin-note” out, because you didn’t provide the function, so it wouldn’t compile otherwise.<br>\nI mainly changed the update function to “actions.update(x =&gt; _add_action(x, assignee, body))”. I also changed the helper function so it adds the actions to the array in the dictionary entry if it is present and add a dictionary entry otherwise. The x in the “actions.update” is the old value of the state and the content behind the “=&gt;” is the new value of the state. The helper function _add_action now changes the x (which is the first parameter of the function) and returns the new value.</p>\n<p>If there are any questions left or I misunderstood something, don’t hesitate to ask again <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">. If this answer solves your problem, please mark it as the solution.</p>\n<p>PS: when initializing the state, you can use “state(“actions”, (:))” to initialze an empty dictionary.</p>",
      "raw": "Hi there! Welcome to the Forum. \nThe actions.at() doesn't work, because it references the at method of the state element itself, not the dictionary (see the [typst doc](https://typst.app/docs/reference/introspection/state#time-travel)). The at function of the state expects a location in the document or something like that (label etc.), so that's what the error is about. Here is:\n\n```typst\n// Create a dictionary to store actions for each assignee.  \n// The key will be the assignee and the value will be array of actions\n// Due to scoping constraints, use the \"state\" function\n#let actions = state(\"actions\", (:))\n\n// Define a helper function to add an action to the global dictionary\n#let _add_action(actions, assignee, action) = {\n  if not assignee in actions {\n    actions.insert(assignee, (action,))\n  }\n  else {\n  actions.at(assignee).push(action)\n  }\n  return actions\n}\n\n// Define an action for use in the body text\n#let action(body, assignee: \"\", side: left) = {\n    // Add action to the global state to be able to render a table later\n    actions.update(x => _add_action(x, assignee, body))\n    // Display the action text inline as usual\n    body\n    // Mark the presence of an action in a sidenote with the assignee\n    // margin-note(side: side)[#strong(\"Action:\") #assignee]\n}\n\nHere's an example of text with an #action(assignee: \"Ben\")[action for Ben to do]\n\n#action(assignee: \"Ben\")[new action for Ben to do].\n\nThe current content of actions: \n\n#context actions.get()\n\n#action(assignee: \"Steven\")[a new person with some action].\n\n#action(assignee: \"Steven\")[steven action].\n\nThe current content of actions: \n\n#context actions.get()\n```\n Note that I commented the \"margin-note\" out, because you didn't provide the function, so it wouldn't compile otherwise. \nI mainly changed the update function to \"actions.update(x => _add_action(x, assignee, body))\". I also changed the helper function so it adds the actions to the array in the dictionary entry if it is present and add a dictionary entry otherwise. The x in the \"actions.update\" is the old value of the state and the content behind the \"=>\" is the new value of the state. The helper function _add_action now changes the x (which is the first parameter of the function) and returns the new value. \n\nIf there are any questions left or I misunderstood something, don't hesitate to ask again :slight_smile:. If this answer solves your problem, please mark it as the solution. \n\nPS: when initializing the state, you can use \"state(\"actions\", (:))\" to initialze an empty dictionary.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 23,
      "score": 34.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 9878,
      "post_number": 3,
      "username": "Beno",
      "name": "",
      "created_at": "2025-03-16T21:14:16.749Z",
      "updated_at": "2025-03-16T21:14:16.749Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/adrian_weitkemper\">@Adrian_Weitkemper</a> - thank you so much - this is really helpful and works for me perfectly.</p>",
      "raw": "@Adrian_Weitkemper - thank you so much - this is really helpful and works for me perfectly.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 3.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1355
    },
    {
      "id": 9919,
      "post_number": 4,
      "username": "Beno",
      "name": "",
      "created_at": "2025-03-17T13:01:46.110Z",
      "updated_at": "2025-03-17T13:02:36.507Z",
      "cooked": "<p>For anyone following along at home, here’s where I got to with my code (including a function to output the table of actions), thanks to help from <a class=\"mention\" href=\"/u/adrian_weitkemper\">@Adrian_Weitkemper</a>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/drafting:0.2.2\": margin-note\n\n// Create a dictionary to store actions for each assignee.  \n// The key will be the assignee and the value will be array of actions\n// Due to scoping constraints, use the \"state\" function\n#let actions = state(\"actions\", (:))\n\n// Define a helper function to add an action to the global dictionary\n#let _add_action(actions, assignee, action, timeframe, pos) = {\n\n  let action_and_timeframe = (action, timeframe, pos)\n\n  if not assignee in actions {\n    actions.insert(assignee, ( action_and_timeframe,))\n  }\n  else {\n    actions.at(assignee).push(action_and_timeframe)\n  }\n  return actions\n}\n\n// Define an action for use in the body text\n#let action(body, assignee: \"\", timeframe: \"ASAP\", side: right) = {\n    // Add action to the global state to be able to render a table later\n    context {\n      let pos = here().position()\n      actions.update(x =&gt; _add_action(x, assignee, body, timeframe, pos))\n    }\n    // Display the action text inline as usual\n    body\n    // Mark the presence of an action in a sidenote with the assignee\n    margin-note(side: side, stroke: red)[#strong(\"Action:\") #assignee]\n}\n\n// Define a function to render a table of actions\n#let table_of_actions() = {\n  context {\n\n    // Get the dictionary of actions\n    let actions_dict = actions.get()\n\n    // Custom styling for the table    \n    show table.cell: it =&gt; {\n      if it.y == 0 {\n        strong(it)\n      } else {\n        it\n      }\n    }\n    set table.hline(stroke: .6pt)\n\n    // Render the table\n    table(\n      columns: (4fr, 1fr, 1fr),\n      stroke: none,\n      [Action], [Assignee], [Due],\n      table.hline(),\n      // Iterate over the dictionary and render each assignees' actions\n      ..for pair in actions_dict.pairs() {\n\n        let (assignee, actions) = pair\n        // Iterate over the actions for each assignee\n        for action_timeframe_and_pos in actions {\n          // Unpack the action, timeframe, and position\n          let (action, timeframe, pos) = action_timeframe_and_pos\n          // Render the action in the table, linking back to the original text\n          (link(pos, action), assignee, timeframe, table.hline())\n        }\n      }\n    )\n  }\n}\n</code></pre>\n<p>Please do let me know if I missed a neater way of doing anything, or any other code improvements!</p>",
      "raw": "For anyone following along at home, here's where I got to with my code (including a function to output the table of actions), thanks to help from @Adrian_Weitkemper.\n\n```typ\n#import \"@preview/drafting:0.2.2\": margin-note\n\n// Create a dictionary to store actions for each assignee.  \n// The key will be the assignee and the value will be array of actions\n// Due to scoping constraints, use the \"state\" function\n#let actions = state(\"actions\", (:))\n\n// Define a helper function to add an action to the global dictionary\n#let _add_action(actions, assignee, action, timeframe, pos) = {\n\n  let action_and_timeframe = (action, timeframe, pos)\n\n  if not assignee in actions {\n    actions.insert(assignee, ( action_and_timeframe,))\n  }\n  else {\n    actions.at(assignee).push(action_and_timeframe)\n  }\n  return actions\n}\n\n// Define an action for use in the body text\n#let action(body, assignee: \"\", timeframe: \"ASAP\", side: right) = {\n    // Add action to the global state to be able to render a table later\n    context {\n      let pos = here().position()\n      actions.update(x => _add_action(x, assignee, body, timeframe, pos))\n    }\n    // Display the action text inline as usual\n    body\n    // Mark the presence of an action in a sidenote with the assignee\n    margin-note(side: side, stroke: red)[#strong(\"Action:\") #assignee]\n}\n\n// Define a function to render a table of actions\n#let table_of_actions() = {\n  context {\n\n    // Get the dictionary of actions\n    let actions_dict = actions.get()\n\n    // Custom styling for the table    \n    show table.cell: it => {\n      if it.y == 0 {\n        strong(it)\n      } else {\n        it\n      }\n    }\n    set table.hline(stroke: .6pt)\n\n    // Render the table\n    table(\n      columns: (4fr, 1fr, 1fr),\n      stroke: none,\n      [Action], [Assignee], [Due],\n      table.hline(),\n      // Iterate over the dictionary and render each assignees' actions\n      ..for pair in actions_dict.pairs() {\n\n        let (assignee, actions) = pair\n        // Iterate over the actions for each assignee\n        for action_timeframe_and_pos in actions {\n          // Unpack the action, timeframe, and position\n          let (action, timeframe, pos) = action_timeframe_and_pos\n          // Render the action in the table, linking back to the original text\n          (link(pos, action), assignee, timeframe, table.hline())\n        }\n      }\n    )\n  }\n}\n```\n\nPlease do let me know if I missed a neater way of doing anything, or any other code improvements!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1355
    },
    {
      "id": 11078,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-04-14T18:03:10.385Z",
      "updated_at": "2025-04-14T18:03:10.385Z",
      "cooked": "<p>fwiw, since you want to have a list of actions, you may be interested in how packages add outlines for custom elements. Usually they do that by producing figures with custom kinds, e.g. <a href=\"https://typst.app/universe/package/theorion\">theorion</a>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/theorion:0.3.3\": *\n\n...\n\n#theorem(title: \"Euclid's Theorem\")[\n  There are infinitely many prime numbers.\n] &lt;thm:euclid&gt;\n\n#outline(title: none, target: figure.where(kind: \"theorem\"))\n</code></pre>\n<p>The code to implement this is not trivial, but from a quick look it seems like the relevant parts are here, maybe you can use some of it: <a href=\"https://github.com/OrangeX4/typst-theorion/blob/main/core.typ#L259-L400\" class=\"inline-onebox\">typst-theorion/core.typ at main · OrangeX4/typst-theorion · GitHub</a> (the code is MIT licensed)</p>",
      "raw": "fwiw, since you want to have a list of actions, you may be interested in how packages add outlines for custom elements. Usually they do that by producing figures with custom kinds, e.g. [theorion](https://typst.app/universe/package/theorion):\n\n```typ\n#import \"@preview/theorion:0.3.3\": *\n\n...\n\n#theorem(title: \"Euclid's Theorem\")[\n  There are infinitely many prime numbers.\n] <thm:euclid>\n\n#outline(title: none, target: figure.where(kind: \"theorem\"))\n```\n\nThe code to implement this is not trivial, but from a quick look it seems like the relevant parts are here, maybe you can use some of it: https://github.com/OrangeX4/typst-theorion/blob/main/core.typ#L259-L400 (the code is MIT licensed)",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 13,
      "score": 2.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:50:19.398006"
}
{
  "topic_metadata": {
    "id": 3287,
    "title": "How to troubleshoot typeface with multiple optical weights?",
    "slug": "how-to-troubleshoot-typeface-with-multiple-optical-weights",
    "posts_count": 3,
    "created_at": "2025-03-16T21:18:40.614Z",
    "last_posted_at": "2025-03-17T10:19:48.527Z",
    "views": 38,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "fonts"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 185
  },
  "posts": [
    {
      "id": 9879,
      "post_number": 1,
      "username": "AJ_Rush",
      "name": "AJ Rush",
      "created_at": "2025-03-16T21:18:40.762Z",
      "updated_at": "2025-03-17T08:52:47.088Z",
      "cooked": "<p>I’ve heard that some people have difficulty using high-end fonts with multiple optical weights in Typst. I like Coelacanth, which has six different weights. I found that the display weight was being used for body text, but when I took the display weight out of my font folder—leaving heading, subheading, body, caption, and subcaption—it looks like it fixed the problem.</p>\n<p>Just visually inspecting elements with larger (e.g., 48pt) and smaller (e.g., 6pt) type looks like they might be right, but I’m not sure.</p>\n<p>I’d like some help getting the Typst code right in order to test it. Ideally I’d like to output the same text in, for example, 96pt, 48pt magnified x2, 24pt magnified x4, and so on all the way down to 4pt magnified x24. Then I could inspect them side by side and see how they’re (hopefully) different.</p>\n<p>I can’t find a Typst function for zooming in on text. Any suggestions?</p>",
      "raw": "I've heard that some people have difficulty using high-end fonts with multiple optical weights in Typst. I like Coelacanth, which has six different weights. I found that the display weight was being used for body text, but when I took the display weight out of my font folder---leaving heading, subheading, body, caption, and subcaption---it looks like it fixed the problem.\n\nJust visually inspecting elements with larger (e.g., 48pt) and smaller (e.g., 6pt) type looks like they might be right, but I'm not sure.\n\nI'd like some help getting the Typst code right in order to test it. Ideally I'd like to output the same text in, for example, 96pt, 48pt magnified x2, 24pt magnified x4, and so on all the way down to 4pt magnified x24. Then I could inspect them side by side and see how they're (hopefully) different.\n\nI can't find a Typst function for zooming in on text. Any suggestions?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 38.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 873
    },
    {
      "id": 9892,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-17T08:42:40.646Z",
      "updated_at": "2025-03-17T08:42:40.646Z",
      "cooked": "<p>I think you’re looking for the <a href=\"https://typst.app/docs/reference/layout/scale/\"><code>scale</code></a> function?</p>",
      "raw": "I think you're looking for the [`scale`](https://typst.app/docs/reference/layout/scale/) function?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 15,
      "score": 18.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9904,
      "post_number": 3,
      "username": "AJ_Rush",
      "name": "AJ Rush",
      "created_at": "2025-03-17T10:19:48.527Z",
      "updated_at": "2025-03-17T10:19:48.527Z",
      "cooked": "<p>Looks like it will, thanks!</p>",
      "raw": "Looks like it will, thanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 873
    }
  ],
  "scraped_at": "2025-06-10T09:50:18.687432"
}
{
  "topic_metadata": {
    "id": 3296,
    "title": "How do I count elements on a page so the result isn't always zero in the header?",
    "slug": "how-do-i-count-elements-on-a-page-so-the-result-isnt-always-zero-in-the-header",
    "posts_count": 7,
    "created_at": "2025-03-17T10:58:32.875Z",
    "last_posted_at": "2025-03-18T08:46:52.203Z",
    "views": 65,
    "like_count": 5,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "bluss",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 977
  },
  "posts": [
    {
      "id": 9907,
      "post_number": 1,
      "username": "a_w",
      "name": "Alex",
      "created_at": "2025-03-17T10:58:33.273Z",
      "updated_at": "2025-03-17T13:00:25.423Z",
      "cooked": "<p>Hello <img src=\"https://forum.typst.app/images/emoji/apple/smiling_face.png?v=12\" title=\":smiling_face:\" class=\"emoji\" alt=\":smiling_face:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>I’m trying to count elements on a page to give an overview of which of those can be found on a given page, next to the page number in the header.</p>\n<p>This is my current approach:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width:50mm, height: 50mm)\n#let v = counter(\"verse\")\n\n#show strong: it =&gt; {\n  v.step()\n  it\n}\n\n#set page(\n  header: {\n    v.update(0)\n    context v.display()\n  },\n  footer: context v.display(),\n)\n\n*1.* Strophe \\\n*2.* Strophe \\\n*3.* Strophe \\\n*4.* Strophe\n#pagebreak()\n*1.* Strophe \\\n*2.* Strophe \\\n*3.* Strophe\n</code></pre>\n<p>The result in the header is, somewhat expected, always zero, because it apparently gets drawn before the page content and context are updated. Is there a trick to “delay” the rendering of the header, re-render it or use location context (<code>.at()</code> in some way… unfortunately I couldn’t get it to work with a label at the end of each page as these would be duplicates) so the correct amount of occurrences on the current page is shown? Or am I maybe tackling the problem not in the best possible way altogether?</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/8/8e6781b10ccf281bcc531666b9676ee32e476d3b.png\" data-download-href=\"https://forum.typst.app/uploads/default/8e6781b10ccf281bcc531666b9676ee32e476d3b\" title=\"problem\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/8/8e6781b10ccf281bcc531666b9676ee32e476d3b_2_252x500.png\" alt=\"problem\" data-base62-sha1=\"kjLySYmQ6myjtYJTspuPnYVACef\" width=\"252\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/8/8e6781b10ccf281bcc531666b9676ee32e476d3b_2_252x500.png, https://forum.typst.app/uploads/default/optimized/2X/8/8e6781b10ccf281bcc531666b9676ee32e476d3b_2_378x750.png 1.5x, https://forum.typst.app/uploads/default/original/2X/8/8e6781b10ccf281bcc531666b9676ee32e476d3b.png 2x\" data-dominant-color=\"F5F3F4\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">problem</span><span class=\"informations\">498×988 62.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\n(Comments in red)</p>",
      "raw": "Hello ☺️\n\nI'm trying to count elements on a page to give an overview of which of those can be found on a given page, next to the page number in the header.\n\nThis is my current approach:\n```typ\n#set page(width:50mm, height: 50mm)\n#let v = counter(\"verse\")\n\n#show strong: it => {\n  v.step()\n  it\n}\n\n#set page(\n  header: {\n    v.update(0)\n    context v.display()\n  },\n  footer: context v.display(),\n)\n\n*1.* Strophe \\\n*2.* Strophe \\\n*3.* Strophe \\\n*4.* Strophe\n#pagebreak()\n*1.* Strophe \\\n*2.* Strophe \\\n*3.* Strophe\n```\n\nThe result in the header is, somewhat expected, always zero, because it apparently gets drawn before the page content and context are updated. Is there a trick to \"delay\" the rendering of the header, re-render it or use location context (`.at()` in some way… unfortunately I couldn't get it to work with a label at the end of each page as these would be duplicates) so the correct amount of occurrences on the current page is shown? Or am I maybe tackling the problem not in the best possible way altogether?\n\n![problem|252x500](upload://kjLySYmQ6myjtYJTspuPnYVACef.png)\n(Comments in red)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 100.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 566
    },
    {
      "id": 9921,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-17T13:17:18.710Z",
      "updated_at": "2025-03-17T13:18:32.745Z",
      "cooked": "<p>If you are willing to change your general approach a bit, I have a solution for you.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width:50mm, height: 50mm)\n#set heading(numbering: \"1.\")\n\n#let count-headings(level: 1) = {\n  let locations = query(heading.where(level: level)).map(h =&gt; h.location())\n  locations.filter(loc =&gt; loc.page() == here().page()).len()\n}\n\n#set page(\n  header: context count-headings(level: 1),\n  footer: context count-headings(level: 1),\n)\n\n= Strophe\n= Strophe\n= Strophe\n= Strophe\n\n#pagebreak()\n#counter(heading).update(0)\n= Strophe\n= Strophe\n= Strophe\n</code></pre>\n<p>Using headings as the “Strophen” allows you to <a href=\"https://typst.app/docs/reference/introspection/query/\"><code>query()</code></a> them. You can then just check if they are located on the current page to count them. I just used level 1 headings as an example here. There might be something that is more suitable for your case, this really depends on the rest of the document and also your preference. According to <a href=\"https://typst.app/docs/reference/introspection/location/#locatable\">location</a>, <code>*strong*</code> elements would also locatable but only if they have a label associated with them.</p>",
      "raw": "If you are willing to change your general approach a bit, I have a solution for you.\n\n```typ\n#set page(width:50mm, height: 50mm)\n#set heading(numbering: \"1.\")\n\n#let count-headings(level: 1) = {\n  let locations = query(heading.where(level: level)).map(h => h.location())\n  locations.filter(loc => loc.page() == here().page()).len()\n}\n\n#set page(\n  header: context count-headings(level: 1),\n  footer: context count-headings(level: 1),\n)\n\n= Strophe\n= Strophe\n= Strophe\n= Strophe\n\n#pagebreak()\n#counter(heading).update(0)\n= Strophe\n= Strophe\n= Strophe\n```\n\nUsing headings as the \"Strophen\" allows you to [`query()`](https://typst.app/docs/reference/introspection/query/) them. You can then just check if they are located on the current page to count them. I just used level 1 headings as an example here. There might be something that is more suitable for your case, this really depends on the rest of the document and also your preference. According to [location](https://typst.app/docs/reference/introspection/location/#locatable), `*strong*` elements would also locatable but only if they have a label associated with them.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 30.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 9927,
      "post_number": 3,
      "username": "a_w",
      "name": "Alex",
      "created_at": "2025-03-17T14:59:49.072Z",
      "updated_at": "2025-03-17T14:59:49.072Z",
      "cooked": "<p>Thanks, Janek! I’m glad the solution isn’t as obvious as I feared it could be <img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Do you think a custom function like <span class=\"hashtag-raw\">#verse</span><span class=\"chcklst-box fa fa-square-o fa-fw\"></span> could also be made locateable?</p>\n<p>This way all the headlines wouldn’t “mess up” the source when actual strongs or emphasis is used in the text. And, more important, in my case: I wouldn’t have block level elements because in reality I actually have:</p>\n<pre data-code-wrap=\"txt\"><code class=\"lang-txt\">1. Strophe Text 2. Strophe Text\n</code></pre>\n<p>instead of</p>\n<pre data-code-wrap=\"txt\"><code class=\"lang-txt\">1. Strophe Text\n2. Strophe Text\n</code></pre>\n<p>and in terms of syntax highlighting it would also make more sense</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= 1. Strophe with *strong* and _emphasis_\nvs.\n#verse[1. Strophe with *strong* and _emphasis_]\n</code></pre>\n<p>I just tried using labels, but since they need to be unique I couldn’t get it to work.</p>",
      "raw": "Thanks, Janek! I'm glad the solution isn't as obvious as I feared it could be 😄\n\nDo you think a custom function like #verse[] could also be made locateable?\n\nThis way all the headlines wouldn't \"mess up\" the source when actual strongs or emphasis is used in the text. And, more important, in my case: I wouldn't have block level elements because in reality I actually have: \n\n```txt\n1. Strophe Text 2. Strophe Text\n```\ninstead of\n```txt\n1. Strophe Text\n2. Strophe Text\n```\nand in terms of syntax highlighting it would also make more sense\n```typ\n= 1. Strophe with *strong* and _emphasis_\nvs.\n#verse[1. Strophe with *strong* and _emphasis_]\n```\n\nI just tried using labels, but since they need to be unique I couldn't get it to work.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 566
    },
    {
      "id": 9929,
      "post_number": 4,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-03-17T15:15:56.171Z",
      "updated_at": "2025-03-17T15:52:09.223Z",
      "cooked": "<p>If I’m just playing with it, it seems to work in sandbox to use page end labels, just giving each a unique name using <code>here().page()</code> (“physical” page number). This experiment is missing the nice display of the counter, but the count is correct…</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(width:50mm, height: 50mm)\n#let v = counter(\"verse\")\n\n#show strong: it =&gt; {\n  v.step()\n  it\n}\n\n#set page(\n  header: {\n    v.update(0)\n    context v.at(label(\"page_end\" + str(here().page())))\n  },\n  footer: context {\n    [#v.at(here())]\n    [[]#label(\"page_end\" + str(here().page()))]\n  }\n)\n\n*1.* Strophe \\\n*2.* Strophe \\\n*3.* Strophe \\\n*4.* Strophe\n#pagebreak()\n*1.* Strophe \\\n*2.* Strophe \\\n*3.* Strophe\n\n</code></pre>",
      "raw": "If I'm just playing with it, it seems to work in sandbox to use page end labels, just giving each a unique name using `here().page()` (\"physical\" page number). This experiment is missing the nice display of the counter, but the count is correct..\n\n```typst\n#set page(width:50mm, height: 50mm)\n#let v = counter(\"verse\")\n\n#show strong: it => {\n  v.step()\n  it\n}\n\n#set page(\n  header: {\n    v.update(0)\n    context v.at(label(\"page_end\" + str(here().page())))\n  },\n  footer: context {\n    [#v.at(here())]\n    [[]#label(\"page_end\" + str(here().page()))]\n  }\n)\n\n*1.* Strophe \\\n*2.* Strophe \\\n*3.* Strophe \\\n*4.* Strophe\n#pagebreak()\n*1.* Strophe \\\n*2.* Strophe \\\n*3.* Strophe\n\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 29.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 1272
    },
    {
      "id": 9930,
      "post_number": 5,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-03-17T15:44:52.983Z",
      "updated_at": "2025-03-17T15:44:52.983Z",
      "cooked": "<p>The value returned by <code>v.at(...)</code> is an array of one <code>int</code>.  Adding <a href=\"https://typst.app/docs/reference/foundations/array/#definitions-first\"><code>.first()</code></a> makes the formatting a bit nicer:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">//...\n  header: {\n    v.update(0)\n    context v.at(label(\"page_end\" + str(here().page()))).first()\n  },\n//...\n</code></pre>\n<p>The footer also needs the change.</p>",
      "raw": "The value returned by `v.at(...)` is an array of one `int`.  Adding [`.first()`](https://typst.app/docs/reference/foundations/array/#definitions-first) makes the formatting a bit nicer:\n```typ\n//...\n  header: {\n    v.update(0)\n    context v.at(label(\"page_end\" + str(here().page()))).first()\n  },\n//...\n```\nThe footer also needs the change.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 9931,
      "post_number": 6,
      "username": "a_w",
      "name": "Alex",
      "created_at": "2025-03-17T16:45:07.250Z",
      "updated_at": "2025-03-17T16:51:28.640Z",
      "cooked": "<p>Nice! The <code>label(\"page_end\" + str(here().page()))</code> is precisely what I couldn’t get to work, cause I always ended up with duplicate labels without including the page number.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width:50mm, height: 50mm)\n#let v = counter(\"verse\")\n\n#show strong: it =&gt; {\n  v.step()\n  it\n}\n\n#set page(\n  header: {\n    v.update(0)\n    context v.at(label(\"page_end\" + str(here().page()))).first()\n  },\n  footer: context {\n    [#v.at(here()).first()]\n    [#hide([])#label(\"page_end\" + str(here().page()).first())]\n  }\n)\n\n*1.* Strophe \\\n*2.* Strophe \\\n*3.* Strophe \\\n*4.* Strophe\n#pagebreak()\n*1.* Strophe \\\n*2.* Strophe \\\n*3.* Strophe\n</code></pre>\n<p>The <code>#hide([])</code> is of course super hacky… but… it seems to work! <img src=\"https://forum.typst.app/images/emoji/apple/face_holding_back_tears.png?v=12\" title=\":face_holding_back_tears:\" class=\"emoji\" alt=\":face_holding_back_tears:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Nice! The `label(\"page_end\" + str(here().page()))` is precisely what I couldn't get to work, cause I always ended up with duplicate labels without including the page number.\n\n```typ\n#set page(width:50mm, height: 50mm)\n#let v = counter(\"verse\")\n\n#show strong: it => {\n  v.step()\n  it\n}\n\n#set page(\n  header: {\n    v.update(0)\n    context v.at(label(\"page_end\" + str(here().page()))).first()\n  },\n  footer: context {\n    [#v.at(here()).first()]\n    [#hide([])#label(\"page_end\" + str(here().page()).first())]\n  }\n)\n\n*1.* Strophe \\\n*2.* Strophe \\\n*3.* Strophe \\\n*4.* Strophe\n#pagebreak()\n*1.* Strophe \\\n*2.* Strophe \\\n*3.* Strophe\n```\n\nThe `#hide([])` is of course super hacky… but… it seems to work! 🥹",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 566
    },
    {
      "id": 9942,
      "post_number": 7,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-18T08:46:52.203Z",
      "updated_at": "2025-03-18T08:46:52.203Z",
      "cooked": "<p>The closest thing you can get to a custom function that returns a locateable element would be a figure with a custom <code>kind</code>. This will also automatically create a corresponding counter, you can use show rules to target the elements and you could even create an outline only for the verses.</p>\n<p>I decided to use an empty figure body here. All the actual content is put inside the caption. You don’t have to do it like this, but this makes it easier to get the correct formatting for the custom counter and the custom supplement in the show rule for <code>figure.caption</code>.</p>\n<p>While the function <code>verse()</code> itself looks quite verbose, there is no “hacky” solution in there. If you know your way around show rules and set rules, this should be easy to understand and modify to your needs.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let verse(body, label: none) = [\n  #show figure: set align(left)\n  #set figure(numbering: \"1.\")\n  #show figure.caption: it =&gt; context { \n    strong(it.counter.display()) + [ ]\n    it.supplement + [: ]\n    linebreak()\n    it.body\n  }\n  #figure(kind: \"verse\", supplement: \"Strophe\", [], caption: body)\n  #label\n]\n\n#let count-verses() = {\n  let locations = query(figure.where(kind: \"verse\")).map(h =&gt; h.location())\n  locations.filter(loc =&gt; loc.page() == here().page()).len()\n}\n\n#set page(\n  header: context count-verses(),\n  footer: context count-verses(),\n)\n\n#verse(lorem(2))\n#verse(lorem(2))\n#verse(lorem(2))\n#verse(lorem(2))\n\n#pagebreak()\n#counter(figure.where(kind: \"verse\")).update(0)\n#verse(lorem(2))\n#verse(lorem(2))\n#verse(lorem(2))\n</code></pre>",
      "raw": "The closest thing you can get to a custom function that returns a locateable element would be a figure with a custom `kind`. This will also automatically create a corresponding counter, you can use show rules to target the elements and you could even create an outline only for the verses.\n\nI decided to use an empty figure body here. All the actual content is put inside the caption. You don't have to do it like this, but this makes it easier to get the correct formatting for the custom counter and the custom supplement in the show rule for `figure.caption`.\n\nWhile the function `verse()` itself looks quite verbose, there is no \"hacky\" solution in there. If you know your way around show rules and set rules, this should be easy to understand and modify to your needs.\n```typ\n#let verse(body, label: none) = [\n  #show figure: set align(left)\n  #set figure(numbering: \"1.\")\n  #show figure.caption: it => context { \n    strong(it.counter.display()) + [ ]\n    it.supplement + [: ]\n    linebreak()\n    it.body\n  }\n  #figure(kind: \"verse\", supplement: \"Strophe\", [], caption: body)\n  #label\n]\n\n#let count-verses() = {\n  let locations = query(figure.where(kind: \"verse\")).map(h => h.location())\n  locations.filter(loc => loc.page() == here().page()).len()\n}\n\n#set page(\n  header: context count-verses(),\n  footer: context count-verses(),\n)\n\n#verse(lorem(2))\n#verse(lorem(2))\n#verse(lorem(2))\n#verse(lorem(2))\n\n#pagebreak()\n#counter(figure.where(kind: \"verse\")).update(0)\n#verse(lorem(2))\n#verse(lorem(2))\n#verse(lorem(2))\n```",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 18,
      "score": 33.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    }
  ],
  "scraped_at": "2025-06-10T09:50:17.947412"
}
{
  "topic_metadata": {
    "id": 3299,
    "title": "How to make a diagonal split of a cell from a table",
    "slug": "how-to-make-a-diagonal-split-of-a-cell-from-a-table",
    "posts_count": 4,
    "created_at": "2025-03-17T11:10:04.762Z",
    "last_posted_at": "2025-03-17T13:34:34.730Z",
    "views": 144,
    "like_count": 5,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Electron_Wizard",
    "tags": [
      "tables"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 430
  },
  "posts": [
    {
      "id": 9910,
      "post_number": 1,
      "username": "Joao",
      "name": "Joao",
      "created_at": "2025-03-17T11:10:04.950Z",
      "updated_at": "2025-03-17T11:10:04.950Z",
      "cooked": "<p>I’m trying to name the category’s of my table headers in one cell that its split in two. How could I make it looks like in the image (I manage to do it but have to custom align it)</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/2/23ef85980295794f553d9a4f82a6465fd01cd1a4.png\" alt=\"header\" data-base62-sha1=\"57TSQEfqTG8NUMSCL4corwnK6Z6\" width=\"677\" height=\"206\"></p>",
      "raw": "I'm trying to name the category's of my table headers in one cell that its split in two. How could I make it looks like in the image (I manage to do it but have to custom align it)  \n\n![header|677x206](upload://57TSQEfqTG8NUMSCL4corwnK6Z6.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 42,
      "score": 498.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1360
    },
    {
      "id": 9916,
      "post_number": 2,
      "username": "Electron_Wizard",
      "name": "Electron Wizard",
      "created_at": "2025-03-17T12:45:55.220Z",
      "updated_at": "2025-03-17T12:45:55.220Z",
      "cooked": "<p>I’d imagine there are a lot of different ways to solve this, so here is one way to solve it:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(width: auto, height: auto, margin: 5mm)\n\n#let diagonal(body-r, body-l, width: auto, height: auto) = {\n  box(\n    width: width,\n    height: height)[\n      #place(top+right,body-r)\n      #place(bottom+left,body-l)\n      #line(start: (0%,0%),end: (100%,100%),stroke: 0.5pt)\n  ]\n}\n\n#table(stroke: 0.5pt, columns: 4 * (2cm,),\n  diagonal([hello],[test], width: auto, height: 2em),\n      [1],[2],[3],\n  [1],[ ],[ ],[ ],\n  [2],[ ],[ ],[ ],\n  [3]\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/7632895d7d24b430966aff0585fe4ce73e4077e8.png\" alt=\"image\" data-base62-sha1=\"gRCCawMtu6ZcVeDb8OhLDzlJ2NW\" width=\"623\" height=\"285\"></p>\n<p>The function <code>#diagonal</code> takes four arguments, the first two are the contents themselves and the other is sizing (<code>width</code> and <code>height</code>). The contents are placed into a box via two <code>#place</code>-functions and a diagonal line is drawn from top left to bottom right.</p>\n<p><strong>Is  this a perfect solution?</strong><br>\nNo, one thing it does not consider is the line itself. Content does not wrap inside their triangle space and therefore must be done manually. If no width and height is set, the sizes are inherited from parent components, meaning if it is used outside of <code>box</code>, <code>block</code> or other similar components, it will use the document’s page size!</p>\n<p>My solution does not change the table cell’s inset to fully connect the line to the corner. If you want to fill the diagonal line completely, use following code:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show table: set text(0.9em)\n#set page(width: auto, height: auto, margin: 5mm)\n\n#let diagonal(body1, body2, width: auto, height: auto, inset: 5pt) = {\n  table.cell(inset: 0pt,\n    box(\n    width: width,\n    height: height)[\n      #place(top+right,body1, dx: -inset, dy: inset)\n      #place(bottom+left,body2, dx: inset, dy: -inset)\n      #line(start: (0%,0%),end: (100%,100%),stroke: 0.5pt)\n  ])\n}\n\n#table(stroke: 0.5pt, columns: 4 * (2cm,),\n  diagonal([hello],[test], width: auto, height: 1cm),[1],[2],[3],[1],[],[],[],[2],[],[],[],[3])\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/d/dbcbfd0faddb9d6ceede5692c676c81542580ca7.png\" data-download-href=\"https://forum.typst.app/uploads/default/dbcbfd0faddb9d6ceede5692c676c81542580ca7\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/d/dbcbfd0faddb9d6ceede5692c676c81542580ca7_2_690x304.png\" alt=\"image\" data-base62-sha1=\"vmpBMBlm10PhNeBuyNb2v94OKHR\" width=\"690\" height=\"304\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/d/dbcbfd0faddb9d6ceede5692c676c81542580ca7_2_690x304.png, https://forum.typst.app/uploads/default/original/2X/d/dbcbfd0faddb9d6ceede5692c676c81542580ca7.png 1.5x, https://forum.typst.app/uploads/default/original/2X/d/dbcbfd0faddb9d6ceede5692c676c81542580ca7.png 2x\" data-dominant-color=\"F4F4F5\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">827×365 11 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>This unfortunately limits the function’s use to tables only!</p>\n<p>By default, the contents of the diagonal box are inset by the table’s default: <code>5pt</code>. This can be changed by assigning a length to <code>inset</code>.</p>",
      "raw": "I'd imagine there are a lot of different ways to solve this, so here is one way to solve it:\n\n```typst\n#set page(width: auto, height: auto, margin: 5mm)\n\n#let diagonal(body-r, body-l, width: auto, height: auto) = {\n  box(\n    width: width,\n    height: height)[\n      #place(top+right,body-r)\n      #place(bottom+left,body-l)\n      #line(start: (0%,0%),end: (100%,100%),stroke: 0.5pt)\n  ]\n}\n\n#table(stroke: 0.5pt, columns: 4 * (2cm,),\n  diagonal([hello],[test], width: auto, height: 2em),\n      [1],[2],[3],\n  [1],[ ],[ ],[ ],\n  [2],[ ],[ ],[ ],\n  [3]\n)\n```\n\n![image|623x285](upload://gRCCawMtu6ZcVeDb8OhLDzlJ2NW.png)\n\nThe function `#diagonal` takes four arguments, the first two are the contents themselves and the other is sizing (`width` and `height`). The contents are placed into a box via two `#place`-functions and a diagonal line is drawn from top left to bottom right.\n\n**Is  this a perfect solution?**\nNo, one thing it does not consider is the line itself. Content does not wrap inside their triangle space and therefore must be done manually. If no width and height is set, the sizes are inherited from parent components, meaning if it is used outside of `box`, `block` or other similar components, it will use the document's page size!\n\nMy solution does not change the table cell's inset to fully connect the line to the corner. If you want to fill the diagonal line completely, use following code:\n\n```typst\n#show table: set text(0.9em)\n#set page(width: auto, height: auto, margin: 5mm)\n\n#let diagonal(body1, body2, width: auto, height: auto, inset: 5pt) = {\n  table.cell(inset: 0pt,\n    box(\n    width: width,\n    height: height)[\n      #place(top+right,body1, dx: -inset, dy: inset)\n      #place(bottom+left,body2, dx: inset, dy: -inset)\n      #line(start: (0%,0%),end: (100%,100%),stroke: 0.5pt)\n  ])\n}\n\n#table(stroke: 0.5pt, columns: 4 * (2cm,),\n  diagonal([hello],[test], width: auto, height: 1cm),[1],[2],[3],[1],[],[],[],[2],[],[],[],[3])\n```\n\n![image|690x304](upload://vmpBMBlm10PhNeBuyNb2v94OKHR.png)\n\nThis unfortunately limits the function's use to tables only!\n\nBy default, the contents of the diagonal box are inset by the table's default: `5pt`. This can be changed by assigning a length to `inset`.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 42,
      "score": 103.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 997
    },
    {
      "id": 9918,
      "post_number": 3,
      "username": "Joao",
      "name": "Joao",
      "created_at": "2025-03-17T12:53:59.546Z",
      "updated_at": "2025-03-17T12:53:59.546Z",
      "cooked": "<p>That’s what was happening to me to, seems like there’s no perfect solution. That you very much for help.</p>",
      "raw": "That's what was happening to me to, seems like there's no perfect solution. That you very much for help.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 11.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1360
    },
    {
      "id": 9922,
      "post_number": 4,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2025-03-17T13:34:34.730Z",
      "updated_at": "2025-03-17T13:34:34.730Z",
      "cooked": "<p>For now, there is also this package: <a href=\"https://github.com/PgBiel/typst-diagbox\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">GitHub - PgBiel/typst-diagbox: A library for diagonal line dividers in Typst tables</a></p>",
      "raw": "For now, there is also this package: https://github.com/PgBiel/typst-diagbox",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 36.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    }
  ],
  "scraped_at": "2025-06-10T09:50:17.208251"
}
{
  "topic_metadata": {
    "id": 3303,
    "title": "Is there a way to remove footnotes from the outline?",
    "slug": "is-there-a-way-to-remove-footnotes-from-the-outline",
    "posts_count": 2,
    "created_at": "2025-03-17T12:52:07.229Z",
    "last_posted_at": "2025-03-17T14:02:32.197Z",
    "views": 65,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Adrian_Weitkemper",
    "tags": [
      "outline",
      "footnotes"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 191
  },
  "posts": [
    {
      "id": 9917,
      "post_number": 1,
      "username": "Moritz_Lerch",
      "name": "Moritz Lerch",
      "created_at": "2025-03-17T12:52:07.324Z",
      "updated_at": "2025-03-18T17:34:59.615Z",
      "cooked": "<p>In some of my figures, I have footnotes in the captions. Now I want to create a “Table of figures”, however, it seems the footnote will then also appear in the outline.<br>\nIs there a way, to remove the footnote from the outline, while still keeping it on the page of the figure?</p>\n<p>Here is a piece of code, that recreates my issue.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#outline(\n  title: [Table of figures],\n  target: figure.where(kind: image),\n  //fill: none,\n)\n#pagebreak()\n#figure(\n  image(\"placeholder.png\"),\n  caption:[Test. #footnote[This appears on the 'Table of Figures' page as well.]]\n)\n</code></pre>",
      "raw": "In some of my figures, I have footnotes in the captions. Now I want to create a \"Table of figures\", however, it seems the footnote will then also appear in the outline. \nIs there a way, to remove the footnote from the outline, while still keeping it on the page of the figure?\n\n\nHere is a piece of code, that recreates my issue.\n\n```typ\n#outline(\n  title: [Table of figures],\n  target: figure.where(kind: image),\n  //fill: none,\n)\n#pagebreak()\n#figure(\n  image(\"placeholder.png\"),\n  caption:[Test. #footnote[This appears on the 'Table of Figures' page as well.]]\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 70.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1362
    },
    {
      "id": 9923,
      "post_number": 2,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-17T14:02:32.197Z",
      "updated_at": "2025-03-21T08:44:29.801Z",
      "cooked": "<p>Hi there! Welcome to the Forum.<br>\nThis seems to be a bug that is on the radar already, as seen in <a href=\"https://github.com/typst/typst/issues/1880\" rel=\"noopener nofollow ugc\">this issue</a>:<br>\nUntil the error is fixed, you can do the following:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#[\n#show footnote.entry: hide\n#show ref: none\n#show footnote: none\n#outline(title: [Table of figures],\ntarget: figure.where(kind: image),\n//fill: none,\n)\n]\n#pagebreak()\n#counter(footnote).update(0)\n#figure(\nimage(\"placeholder.png\"),\ncaption:[Test. #footnote[This appears on the ‘Table of Figures’ page as well.]]\n)\n</code></pre>\n<p>If there are any questions left, don’t hesitate to ask again.</p>",
      "raw": "Hi there! Welcome to the Forum. \nThis seems to be a bug that is on the radar already, as seen in [this issue](https://github.com/typst/typst/issues/1880): \nUntil the error is fixed, you can do the following: \n```typst\n#[\n#show footnote.entry: hide\n#show ref: none\n#show footnote: none\n#outline(title: [Table of figures],\ntarget: figure.where(kind: image),\n//fill: none,\n)\n]\n#pagebreak()\n#counter(footnote).update(0)\n#figure(\nimage(\"placeholder.png\"),\ncaption:[Test. #footnote[This appears on the ‘Table of Figures’ page as well.]]\n)\n```\nIf there are any questions left, don't hesitate to ask again.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 20.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 277
    }
  ],
  "scraped_at": "2025-06-10T09:50:16.481301"
}
{
  "topic_metadata": {
    "id": 3310,
    "title": "How do I use the Typst application under Windows?",
    "slug": "how-do-i-use-the-typst-application-under-windows",
    "posts_count": 6,
    "created_at": "2025-03-18T09:28:50.069Z",
    "last_posted_at": "2025-03-18T17:22:43.457Z",
    "views": 228,
    "like_count": 5,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "gezepi",
    "tags": [
      "cli"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 570
  },
  "posts": [
    {
      "id": 9945,
      "post_number": 1,
      "username": "Mert_Karavin",
      "name": "Mert Karavin",
      "created_at": "2025-03-18T09:28:50.174Z",
      "updated_at": "2025-03-18T17:28:23.591Z",
      "cooked": "<p>Due to a School project we have to use the typst application, however after downloading it over the powershell via chocolatey, after starting the .exe file i get a cmd window telling me to press enter to continue… when I enter in the window, it disappears and nothing happens. Any ideas what went wrong?</p>",
      "raw": "Due to a School project we have to use the typst application, however after downloading it over the powershell via chocolatey, after starting the .exe file i get a cmd window telling me to press enter to continue... when I enter in the window, it disappears and nothing happens. Any ideas what went wrong?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 744.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1364
    },
    {
      "id": 9948,
      "post_number": 2,
      "username": "ssotoen",
      "name": "",
      "created_at": "2025-03-18T10:58:36.560Z",
      "updated_at": "2025-03-18T10:58:36.560Z",
      "cooked": "<p>What is the exact command you’re running? What does the error message say?</p>",
      "raw": "What is the exact command you’re running? What does the error message say?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 24.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 331
    },
    {
      "id": 9949,
      "post_number": 3,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-03-18T11:17:32.091Z",
      "updated_at": "2025-03-18T11:17:32.091Z",
      "cooked": "<p>My guess is that nothing has gone wrong <em>technically</em>.  The <code>typst.exe</code> you probably ran does not open a window to allow you to edit documents.  It simply takes a text file (usually ending in <code>.typ</code>) that you give it, compiles the document and writes a new file with the generated document (by default in <code>.pdf</code> format).</p>\n<p>The main <a href=\"https://github.com/typst/typst\">Typst GitHub</a> page has some more details.  An excerpt of two common uses:</p>\n<pre><code class=\"lang-auto\"># Creates `file.pdf` in working directory.\ntypst compile file.typ\n\n# Creates PDF file at the desired path.\ntypst compile path/to/source.typ path/to/output.pdf\n</code></pre>\n<p>Using this method to generate documents has a <em>lot</em> of flexibility.   There are other options of using Typst that are less flexible but have other strengths.</p>\n<ul>\n<li><a href=\"https://typst.app/\">Typst web app</a> - The easiest way to use Typst, but it is in the cloud so it requires an internet connection and it sounds like you have been given an assignment and the web app is not part of that assignment</li>\n<li><a href=\"https://github.com/Myriad-Dreamin/tinymist\">tinymist</a> - Can be installed as a plugin for many text editors / IDEs.  This provides a similar experience to the web app - source document on the left, generated document on the right</li>\n</ul>\n<p>A list of two items is pretty weak.  Maybe others have suggestions of how to use Typst.</p>\n<p>Good luck on your Typst journey and be sure to look here at the forum, or the Typst docs if you have questions.  If you can’t find anything that answers your question post it in the questions category.  When you do post questions please use the recommendations here: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">How to post in the Questions category</a></p>",
      "raw": "My guess is that nothing has gone wrong _technically_.  The `typst.exe` you probably ran does not open a window to allow you to edit documents.  It simply takes a text file (usually ending in `.typ`) that you give it, compiles the document and writes a new file with the generated document (by default in `.pdf` format).\n\nThe main [Typst GitHub](https://github.com/typst/typst) page has some more details.  An excerpt of two common uses:\n```\n# Creates `file.pdf` in working directory.\ntypst compile file.typ\n\n# Creates PDF file at the desired path.\ntypst compile path/to/source.typ path/to/output.pdf\n```\n\nUsing this method to generate documents has a _lot_ of flexibility.   There are other options of using Typst that are less flexible but have other strengths.\n\n* [Typst web app](https://typst.app/) - The easiest way to use Typst, but it is in the cloud so it requires an internet connection and it sounds like you have been given an assignment and the web app is not part of that assignment\n* [tinymist](https://github.com/Myriad-Dreamin/tinymist) - Can be installed as a plugin for many text editors / IDEs.  This provides a similar experience to the web app - source document on the left, generated document on the right\n\nA list of two items is pretty weak.  Maybe others have suggestions of how to use Typst.\n\nGood luck on your Typst journey and be sure to look here at the forum, or the Typst docs if you have questions.  If you can't find anything that answers your question post it in the questions category.  When you do post questions please use the recommendations here: [How to post in the Questions category](https://forum.typst.app/t/how-to-post-in-the-questions-category/11)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 46,
      "score": 109.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 9950,
      "post_number": 4,
      "username": "Mert_Karavin",
      "name": "Mert Karavin",
      "created_at": "2025-03-18T12:42:10.992Z",
      "updated_at": "2025-03-18T12:42:10.992Z",
      "cooked": "<p>there is no error when i execute the typst.exe file it says that i have to press enter to continue, however after pressing nothing happens</p>",
      "raw": "there is no error when i execute the typst.exe file it says that i have to press enter to continue, however after pressing nothing happens",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 27.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1364
    },
    {
      "id": 9953,
      "post_number": 5,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2025-03-18T13:09:26.972Z",
      "updated_at": "2025-03-18T13:09:26.972Z",
      "cooked": "<p>Just like <a class=\"mention\" href=\"/u/gezepi\">@gezepi</a> is saying, there is nothing wrong with the described behavior.</p>\n<p>You should <em>not</em> double click the typst.exe, because it is <em>not</em> like any other Windows application. There is <em>no</em> user interface in the typst.exe which you could use to write your documents. The typst.exe is just like a translator which you use to convert a .typ file to a .pdf file. But you need a different application to write your .typ file.</p>\n<p>It’s a good idea to read the post from <a class=\"mention\" href=\"/u/gezepi\">@gezepi</a> again, I guess. <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Just like @gezepi is saying, there is nothing wrong with the described behavior. \n\nYou should *not* double click the typst.exe, because it is *not* like any other Windows application. There is *no* user interface in the typst.exe which you could use to write your documents. The typst.exe is just like a translator which you use to convert a .typ file to a .pdf file. But you need a different application to write your .typ file.\n\nIt’s a good idea to read the post from @gezepi again, I guess. :slight_smile:",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 35,
      "score": 37.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 9968,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-18T17:22:43.457Z",
      "updated_at": "2025-04-14T20:11:13.303Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/mert_karavin\">@Mert_Karavin</a>, welcome and thank you for your post! I have moved it to the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\" data-ref=\"questions::category\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category as that category is better suited for topics that are seeking support because it also means that you can select an answer. And since in that category we prefer questions as post titles, I have renamed your topic.</p>\n<p>If you feel a response you got has sufficiently answered your question, be sure to give it a checkmark. This will help others find the solution in the future. Thanks!</p>",
      "raw": "Hi @Mert_Karavin, welcome and thank you for your post! I have moved it to the #questions::category category as that category is better suited for topics that are seeking support because it also means that you can select an answer. And since in that category we prefer questions as post titles, I have renamed your topic.\n\nIf you feel a response you got has sufficiently answered your question, be sure to give it a checkmark. This will help others find the solution in the future. Thanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 6.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:50:15.539539"
}
{
  "topic_metadata": {
    "id": 3321,
    "title": "How can I separate formatting and functionality in own templates?",
    "slug": "how-can-i-separate-formatting-and-functionality-in-own-templates",
    "posts_count": 9,
    "created_at": "2025-03-18T17:04:50.675Z",
    "last_posted_at": "2025-03-26T15:51:51.965Z",
    "views": 175,
    "like_count": 10,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "quachpas",
    "tags": [
      "scripting",
      "templates"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1520
  },
  "posts": [
    {
      "id": 9967,
      "post_number": 1,
      "username": "joscha_krug",
      "name": "Joscha Krug",
      "created_at": "2025-03-18T17:04:50.794Z",
      "updated_at": "2025-03-18T17:25:44.265Z",
      "cooked": "<p>Hi all,</p>\n<p>For a template I am developing, I need to both define formatting rules for built-in Typst element functions and write custom (pseudo-element) functions, like an extension of Typst’s <code>figure</code> that allows me to add a note between figure content and caption. My goal is to set this up such that I can define formatting rules in one central place where they are easy to track, and keep additional function definitions separate from that in a modular way. But I am unsure how I can achieve this in Typst.</p>\n<ul>\n<li>The first best would be to define my own pseudo-element functions as proper element functions and make some of their arguments settable. But Typst does not seem to allow that, or does it?</li>\n<li>The second best would be to define options for my own pseudo-element functions as ‘global constants’ within my main <code>template</code> function. But I don’t think there is a way to access variable definitions inside the <code>template</code> function from outside functions?</li>\n</ul>\n<p>This is a more generic question, so I appreciate any kind of insights, opinions or pointers to other resources or debates elsewhere. To make my issue a bit clearer, I have added a simple working example below.</p>\n<p>Cheers,</p>\n<p>Joscha</p>\n<p><strong>Example:</strong></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let template(body) = {\n  // this is where I would ideally like to keep all my style definitions\n  // in one place\n  show figure: set text(fill: red)\n  \n  body\n}\n\n// this is the function definition, which I would like to keep as generic\n// as possible for it to work well with many different potential templates\n// without needing to be re-written\n#let my-figure(content, note: [], ..args) = {\n  figure(..args)[\n    #content\n\n    #if note != [] {\n      block()[\n        // here is where I have to define the style of my figure note\n        // -&gt; ideally, I would define this in my central template function\n        // and only specify defaults here\n        #set text(fill: green)\n        Note: #note\n      ]\n    }\n  ]\n}\n\n#show: template\n\n#lorem(80)\n\n#my-figure(\n  rect(width: 80%, height: 20%),\n  note: [#lorem(30)],\n  caption: [#lorem(10)]\n)\n\n#lorem(80)\n</code></pre>",
      "raw": "Hi all,\n\nFor a template I am developing, I need to both define formatting rules for built-in Typst element functions and write custom (pseudo-element) functions, like an extension of Typst's `figure` that allows me to add a note between figure content and caption. My goal is to set this up such that I can define formatting rules in one central place where they are easy to track, and keep additional function definitions separate from that in a modular way. But I am unsure how I can achieve this in Typst.\n\n* The first best would be to define my own pseudo-element functions as proper element functions and make some of their arguments settable. But Typst does not seem to allow that, or does it?\n* The second best would be to define options for my own pseudo-element functions as 'global constants' within my main `template` function. But I don't think there is a way to access variable definitions inside the `template` function from outside functions?\n\nThis is a more generic question, so I appreciate any kind of insights, opinions or pointers to other resources or debates elsewhere. To make my issue a bit clearer, I have added a simple working example below.\n\nCheers,\n\nJoscha\n\n**Example:**\n\n```typ\n#let template(body) = {\n  // this is where I would ideally like to keep all my style definitions\n  // in one place\n  show figure: set text(fill: red)\n  \n  body\n}\n\n// this is the function definition, which I would like to keep as generic\n// as possible for it to work well with many different potential templates\n// without needing to be re-written\n#let my-figure(content, note: [], ..args) = {\n  figure(..args)[\n    #content\n\n    #if note != [] {\n      block()[\n        // here is where I have to define the style of my figure note\n        // -> ideally, I would define this in my central template function\n        // and only specify defaults here\n        #set text(fill: green)\n        Note: #note\n      ]\n    }\n  ]\n}\n\n#show: template\n\n#lorem(80)\n\n#my-figure(\n  rect(width: 80%, height: 20%),\n  note: [#lorem(30)],\n  caption: [#lorem(10)]\n)\n\n#lorem(80)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 158.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1135
    },
    {
      "id": 9980,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-18T23:03:20.800Z",
      "updated_at": "2025-03-18T23:03:20.800Z",
      "cooked": "<p>For your specific case of a figure with an optional and configurable note I would do the following:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let template(body) = {\n  // you can set up your default/recommended rules here\n  show figure.caption: set text(fill: red)\n\n  body\n}\n\n// you can set up the default style for your notes here\n#let my-note(fill: green, supplement: \"Note\", body) = block[\n  #set text(fill: fill)\n  #supplement: #body\n]\n\n// this function is kept very general, \"note\" can either be none or content\n#let my-figure(content, note: none, ..args) = {\n  figure(..args)[\n    #content\n    #if note != none { note }\n  ]\n}\n\n#show: template\n\n// you can override the rules from the template here if you don't like the default style\n// (this might not work for complex show rules that completely modify an element)\n#show figure.caption: set text(fill: purple)\n\n// you can override the style of the figure notes by redefining the default values\n#let my-note = my-note.with(fill: blue)\n\n#my-figure(\n  rect(width: 80%, height: 20%),\n  note: my-note(lorem(30)),\n  caption: [#lorem(10)]\n)\n</code></pre>\n<p>While this requires you to pass the note content through the function <code>figure-note()</code>, I wouldn’t mind the additional “verbosity” for the gain in the flexibility.</p>\n<p>If you haven’t seen it yet, this <a href=\"https://forum.typst.app/t/overriding-template-parameters-missing-social-convention-or-typst-design-flaw/2792\">post</a> is definitely worth reading if you want some more insights into writing and using templates. Don’t get too excited though, you won’t be able to directly apply everything you see there to your template. Some of the answers already look ahead what templates can/would look like when custom types are available.</p>",
      "raw": "For your specific case of a figure with an optional and configurable note I would do the following:\n\n```typ\n#let template(body) = {\n  // you can set up your default/recommended rules here\n  show figure.caption: set text(fill: red)\n\n  body\n}\n\n// you can set up the default style for your notes here\n#let my-note(fill: green, supplement: \"Note\", body) = block[\n  #set text(fill: fill)\n  #supplement: #body\n]\n\n// this function is kept very general, \"note\" can either be none or content\n#let my-figure(content, note: none, ..args) = {\n  figure(..args)[\n    #content\n    #if note != none { note }\n  ]\n}\n\n#show: template\n\n// you can override the rules from the template here if you don't like the default style\n// (this might not work for complex show rules that completely modify an element)\n#show figure.caption: set text(fill: purple)\n\n// you can override the style of the figure notes by redefining the default values\n#let my-note = my-note.with(fill: blue)\n\n#my-figure(\n  rect(width: 80%, height: 20%),\n  note: my-note(lorem(30)),\n  caption: [#lorem(10)]\n)\n```\n\nWhile this requires you to pass the note content through the function `figure-note()`, I wouldn't mind the additional \"verbosity\" for the gain in the flexibility.\n\nIf you haven't seen it yet, this [post](https://forum.typst.app/t/overriding-template-parameters-missing-social-convention-or-typst-design-flaw/2792) is definitely worth reading if you want some more insights into writing and using templates. Don't get too excited though, you won't be able to directly apply everything you see there to your template. Some of the answers already look ahead what templates can/would look like when custom types are available.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 27.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 9984,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-19T09:21:58.615Z",
      "updated_at": "2025-03-19T09:22:32.672Z",
      "cooked": "<p>As a rule, I think it’s best to stick to native elements functions and extend them with additional functions. Unless you <em>really</em> need it (eg for theorems, etc.), I don’t see the benefit of defining a custom figure function. Not only will it confuse the users of your template, but also just add unnecessary complexity to your template. I believe most styling can be achieved with show rules.</p>\n<p>As an example, here is how I defined figure notes for an INFORMS journal template.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let figure-note(body) = (\n  context {\n    let kind = {\n      query(selector(figure).before(here())).last().kind\n    }\n    set par(first-line-indent: 0pt)\n    set text(scriptsize)\n    if kind == table {\n      align(\n        center,\n        {\n          [Table Notes.]\n          h(.5em)\n          body\n        },\n      )\n    } else {\n      {\n        [_Note._]\n        h(.5em)\n        body\n      }\n    }\n  }\n)\n</code></pre>",
      "raw": "As a rule, I think it's best to stick to native elements functions and extend them with additional functions. Unless you _really_ need it (eg for theorems, etc.), I don't see the benefit of defining a custom figure function. Not only will it confuse the users of your template, but also just add unnecessary complexity to your template. I believe most styling can be achieved with show rules.\n\nAs an example, here is how I defined figure notes for an INFORMS journal template.\n```typ\n#let figure-note(body) = (\n  context {\n    let kind = {\n      query(selector(figure).before(here())).last().kind\n    }\n    set par(first-line-indent: 0pt)\n    set text(scriptsize)\n    if kind == table {\n      align(\n        center,\n        {\n          [Table Notes.]\n          h(.5em)\n          body\n        },\n      )\n    } else {\n      {\n        [_Note._]\n        h(.5em)\n        body\n      }\n    }\n  }\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 32,
      "score": 51.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9990,
      "post_number": 4,
      "username": "joscha_krug",
      "name": "Joscha Krug",
      "created_at": "2025-03-19T13:22:12.942Z",
      "updated_at": "2025-03-19T13:22:12.942Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/janekfleper\">@janekfleper</a> Thanks for the inspiration and the link - really interesting discussion, makes me hope that custom types will be implemented sooner rather than later.</p>\n<p><a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> I totally agree with you with respect to using native elements wherever possible, and thanks for sharing your approach. In this particular case, I do not see a straightforward way to implement my desired behaviour without a custom function, though. After all, I want the figure note to appear ‘within’ the figure; or at least to float with it in case I choose floating placement. Happy to be proven wrong though!</p>",
      "raw": "@janekfleper Thanks for the inspiration and the link - really interesting discussion, makes me hope that custom types will be implemented sooner rather than later.\n\n@quachpas I totally agree with you with respect to using native elements wherever possible, and thanks for sharing your approach. In this particular case, I do not see a straightforward way to implement my desired behaviour without a custom function, though. After all, I want the figure note to appear 'within' the figure; or at least to float with it in case I choose floating placement. Happy to be proven wrong though!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 11.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1135
    },
    {
      "id": 10042,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-20T15:42:20.695Z",
      "updated_at": "2025-03-20T15:45:28.719Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"joscha_krug\" data-post=\"4\" data-topic=\"3321\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/joscha_krug/48/1842_2.png\" class=\"avatar\"> joscha_krug:</div>\n<blockquote>\n<p>Happy to be proven wrong though!</p>\n</blockquote>\n</aside>\n<p><a href=\"https://xkcd.com/386/\">Duty calls</a>.</p>\n<p>A few comments:</p>\n<ul>\n<li>I prefer to define show/set rules as functions, and pass them at the templating stage to make things less of a clutter</li>\n<li>In a template, you control everything, so as long as you embed enough metadata you can entirely control the layout without affecting the user functions such as figures, etc. What you were missing was the usage of queries.</li>\n<li>Note styling is in the <code>note</code> function (green text)</li>\n<li>Figure styling is in the style-figure function (red text)</li>\n<li>An additional prefix is added for the metadata in order to differentiate it from other metadata which could be embedded in the document.</li>\n</ul>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// All styling show/set rules\n#let note(note) = { // Formatting of the note\n  set text(fill: green)\n  note\n}\n#let style-figure = it =&gt; context { // show figure rule\n  // Styling\n  set text(red)\n\n  // Retrieve figure note\n  let q = query(\n    selector(metadata) // Find the note between \n    .after(here()) // current figure and\n    .before(selector(figure).after(here())) // next figure, if it exists\n  )\n  q = q.filter(x =&gt; x.value.starts-with(\"fignote:\"))\n  let note-text = if q.len() &gt; 0 {\n    q.first().value.slice(8)\n  } else {\n    \"\"\n  }\n\n  // Layout Figure\n  it.body\n  if note-text != \"\" { note(note-text) }\n  it.caption\n}\n\n#let figure-note(note) = { // User interface to note a figure\n  metadata(\"fignote:\" + note)\n}\n\n#let template(body) = { // Template function for the _layout_\n  // Styling\n  show figure: style-figure  \n\n  // Layout\n  body\n}\n\n#show: template\n\n#lorem(80)\n\n#figure(\n  rect(width: 80%, height: 20%),\n  caption: [#lorem(6)]\n)\n#figure-note(lorem(6))\n\n#figure(\n  rect(width: 80%, height: 20%),\n  caption: [#lorem(7)]\n)\n\n#figure(\n  rect(width: 80%, height: 20%),\n  caption: [#lorem(8)]\n)\n#figure-note(lorem(8))\n\n// Incorrect usage of a figure note, nothing should happen\n#figure-note(lorem(1))\n\n#figure(\n  rect(width: 80%, height: 20%),\n  caption: [#lorem(9)]\n)\n#metadata(\"random metadata which should not appear\")\n#figure-note(lorem(9))\n\n#lorem(80)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/9/9e4d823d2a218d726b674bb71705511b3231822c.png\" data-download-href=\"https://forum.typst.app/uploads/default/9e4d823d2a218d726b674bb71705511b3231822c\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/9/9e4d823d2a218d726b674bb71705511b3231822c_2_690x388.png\" alt=\"image\" data-base62-sha1=\"mApv7Th7nzl82UBKubvbI1wF1RW\" width=\"690\" height=\"388\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/9/9e4d823d2a218d726b674bb71705511b3231822c_2_690x388.png, https://forum.typst.app/uploads/default/optimized/2X/9/9e4d823d2a218d726b674bb71705511b3231822c_2_1035x582.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/9/9e4d823d2a218d726b674bb71705511b3231822c_2_1380x776.png 2x\" data-dominant-color=\"FAFAFA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">2559×1440 165 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "[quote=\"joscha_krug, post:4, topic:3321\"]\nHappy to be proven wrong though!\n[/quote]\n\n[Duty calls](https://xkcd.com/386/).\n\nA few comments:\n- I prefer to define show/set rules as functions, and pass them at the templating stage to make things less of a clutter\n- In a template, you control everything, so as long as you embed enough metadata you can entirely control the layout without affecting the user functions such as figures, etc. What you were missing was the usage of queries.\n- Note styling is in the `note` function (green text)\n- Figure styling is in the style-figure function (red text)\n- An additional prefix is added for the metadata in order to differentiate it from other metadata which could be embedded in the document.\n\n```typ\n// All styling show/set rules\n#let note(note) = { // Formatting of the note\n  set text(fill: green)\n  note\n}\n#let style-figure = it => context { // show figure rule\n  // Styling\n  set text(red)\n\n  // Retrieve figure note\n  let q = query(\n    selector(metadata) // Find the note between \n    .after(here()) // current figure and\n    .before(selector(figure).after(here())) // next figure, if it exists\n  )\n  q = q.filter(x => x.value.starts-with(\"fignote:\"))\n  let note-text = if q.len() > 0 {\n    q.first().value.slice(8)\n  } else {\n    \"\"\n  }\n\n  // Layout Figure\n  it.body\n  if note-text != \"\" { note(note-text) }\n  it.caption\n}\n\n#let figure-note(note) = { // User interface to note a figure\n  metadata(\"fignote:\" + note)\n}\n\n#let template(body) = { // Template function for the _layout_\n  // Styling\n  show figure: style-figure  \n\n  // Layout\n  body\n}\n\n#show: template\n\n#lorem(80)\n\n#figure(\n  rect(width: 80%, height: 20%),\n  caption: [#lorem(6)]\n)\n#figure-note(lorem(6))\n\n#figure(\n  rect(width: 80%, height: 20%),\n  caption: [#lorem(7)]\n)\n\n#figure(\n  rect(width: 80%, height: 20%),\n  caption: [#lorem(8)]\n)\n#figure-note(lorem(8))\n\n// Incorrect usage of a figure note, nothing should happen\n#figure-note(lorem(1))\n\n#figure(\n  rect(width: 80%, height: 20%),\n  caption: [#lorem(9)]\n)\n#metadata(\"random metadata which should not appear\")\n#figure-note(lorem(9))\n\n#lorem(80)\n```\n![image|690x388](upload://mApv7Th7nzl82UBKubvbI1wF1RW.png)",
      "reply_to_post_number": 4,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 4,
      "reads": 28,
      "score": 80.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 10273,
      "post_number": 6,
      "username": "joscha_krug",
      "name": "Joscha Krug",
      "created_at": "2025-03-26T13:03:03.625Z",
      "updated_at": "2025-03-26T13:03:03.625Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> Thanks a lot for this detailed example! I had gotten to the point where I suspected querying might be the way to go but had failed to make it work because I did not know I could use <code>#metadata</code> in this way.</p>\n<p>I’ve marked this as a solution since it solves my immediate issue and may be a blueprint for similar cases. But will stay tuned for the discussion about custom types and ways to make templates more generic and easier to ‘tweak’.</p>",
      "raw": "@quachpas Thanks a lot for this detailed example! I had gotten to the point where I suspected querying might be the way to go but had failed to make it work because I did not know I could use `#metadata` in this way.\n\nI've marked this as a solution since it solves my immediate issue and may be a blueprint for similar cases. But will stay tuned for the discussion about custom types and ways to make templates more generic and easier to 'tweak'.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 24.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1135
    },
    {
      "id": 10274,
      "post_number": 7,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-26T13:05:56.396Z",
      "updated_at": "2025-03-26T13:05:56.396Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"joscha_krug\" data-post=\"6\" data-topic=\"3321\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/joscha_krug/48/1842_2.png\" class=\"avatar\"> joscha_krug:</div>\n<blockquote>\n<p>I did not know I could use <code>#metadata</code> in this way.</p>\n</blockquote>\n</aside>\n<p>Just consider <code>metadata</code> as addressable invisible content, similar to <code>counter/state.update</code>. They need to be output somewhere.</p>",
      "raw": "[quote=\"joscha_krug, post:6, topic:3321\"]\nI did not know I could use `#metadata` in this way.\n[/quote]\n\nJust consider `metadata` as addressable invisible content, similar to `counter/state.update`. They need to be output somewhere.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 10290,
      "post_number": 8,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-03-26T15:42:07.671Z",
      "updated_at": "2025-03-26T15:42:07.671Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"quachpas\" data-post=\"5\" data-topic=\"3321\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/q/662200/48.png\" class=\"avatar\"> quachpas:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">  // Layout Figure\n  it.body\n  if note-text != \"\" { note(note-text) }\n  it.caption\n}\n</code></pre>\n</blockquote>\n</aside>\n<p>This is maybe a meta question, how do I as a typst user know that <code>{it.body; it.caption}</code> is an acceptable figure show function (that it does the default thing?) and how does it interact with other templates, it could possibly conflict with other styling, right?</p>",
      "raw": "[quote=\"quachpas, post:5, topic:3321\"]\n```\n  // Layout Figure\n  it.body\n  if note-text != \"\" { note(note-text) }\n  it.caption\n}\n```\n[/quote]\n\nThis is maybe a meta question, how do I as a typst user know that `{it.body; it.caption}` is an acceptable figure show function (that it does the default thing?) and how does it interact with other templates, it could possibly conflict with other styling, right?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 1272
    },
    {
      "id": 10291,
      "post_number": 9,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-26T15:51:51.965Z",
      "updated_at": "2025-03-26T15:51:51.965Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"bluss\" data-post=\"8\" data-topic=\"3321\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/b/441A5E/48.png\" class=\"avatar\"> bluss:</div>\n<blockquote>\n<p>how do I as a typst user know that <code>{it.body; it.caption}</code> is an acceptable figure show function (that it does the default thing?)</p>\n</blockquote>\n</aside>\n<p>Typst does not prevent users from overwriting default layout behaviours of any elements, so there is no “acceptability criteria”. You can write <code>show figure: it =&gt; {}</code>, and typst couldn’t care less.</p>\n<p>As for the default layout, you don’t know that it is the default. I would actually argue that since you have overwritten, it’s already not the “default” behaviour. It just looks like it.</p>\n<aside class=\"quote no-group\" data-username=\"bluss\" data-post=\"8\" data-topic=\"3321\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/b/441A5E/48.png\" class=\"avatar\"> bluss:</div>\n<blockquote>\n<p>how does it interact with other templates, it could possibly conflict with other styling, right?</p>\n</blockquote>\n</aside>\n<p>It interacts very badly! At the moment, there is no way to know whether existing rules are registered for an element.</p>\n<p>There is a limited way to combine styling if you return the element itself (<code>it</code>), eg</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">show figure: it =&gt; {\n  if it.kind == table {\n    // stuff\n  } else {\n    it\n  }\n}\n</code></pre>\n<p>is potentially compatible with additional styling because it would end up in the else clause.</p>",
      "raw": "[quote=\"bluss, post:8, topic:3321\"]\nhow do I as a typst user know that `{it.body; it.caption}` is an acceptable figure show function (that it does the default thing?)\n[/quote]\n\nTypst does not prevent users from overwriting default layout behaviours of any elements, so there is no \"acceptability criteria\". You can write `show figure: it => {}`, and typst couldn't care less.\n\nAs for the default layout, you don't know that it is the default. I would actually argue that since you have overwritten, it's already not the \"default\" behaviour. It just looks like it.\n\n[quote=\"bluss, post:8, topic:3321\"]\nhow does it interact with other templates, it could possibly conflict with other styling, right?\n[/quote]\n\nIt interacts very badly! At the moment, there is no way to know whether existing rules are registered for an element. \n\nThere is a limited way to combine styling if you return the element itself (`it`), eg\n\n```typc\nshow figure: it => {\n  if it.kind == table {\n    // stuff\n  } else {\n    it\n  }\n}\n```\nis potentially compatible with additional styling because it would end up in the else clause.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 22,
      "score": 19.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:50:14.807516"
}
{
  "topic_metadata": {
    "id": 3331,
    "title": "How to hide list markers in Polylux?",
    "slug": "how-to-hide-list-markers-in-polylux",
    "posts_count": 2,
    "created_at": "2025-03-19T15:09:56.018Z",
    "last_posted_at": "2025-03-19T15:29:39.772Z",
    "views": 27,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "polylux"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 105
  },
  "posts": [
    {
      "id": 9994,
      "post_number": 1,
      "username": "Joel",
      "name": "Joel",
      "created_at": "2025-03-19T15:09:56.164Z",
      "updated_at": "2025-03-19T16:12:36.958Z",
      "cooked": "<p>The <a href=\"https://polylux.dev/book/dynamic/obo-lbl.html\" rel=\"noopener nofollow ugc\">Polylux book</a> states</p>\n<blockquote>\n<p>Note that the list markers and enum numbers are not hidden. You can truly consider this a bug or a feature…</p>\n</blockquote>\n<p>Let’s assume I’d consider this to be more on the bug side of things. Is there an easy way to hide the list markers?</p>",
      "raw": "The [Polylux book](https://polylux.dev/book/dynamic/obo-lbl.html) states\n\n> Note that the list markers and enum numbers are not hidden. You can truly consider this a bug or a feature...\n\nLet's assume I'd consider this to be more on the bug side of things. Is there an easy way to hide the list markers?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 28.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 479
    },
    {
      "id": 9996,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-03-19T15:29:39.772Z",
      "updated_at": "2025-03-19T15:34:06.073Z",
      "cooked": "<p>This is a general problem with <code>hide</code>, see <a href=\"https://github.com/typst/typst/issues/619\">#619</a>.</p>\n<p>A workaround is to set the marker to <code>none</code> inside of <code>hide</code>.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show hide: set list(marker: none)\n\n// and for numbered list\n#show hide: set enum(numbering: it =&gt; none)\n</code></pre>",
      "raw": "This is a general problem with `hide`, see [#619](https://github.com/typst/typst/issues/619).\n\nA workaround is to set the marker to `none` inside of `hide`.\n```typst\n#show hide: set list(marker: none)\n\n// and for numbered list\n#show hide: set enum(numbering: it => none)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 16,
      "score": 33.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    }
  ],
  "scraped_at": "2025-06-10T09:50:14.027784"
}
{
  "topic_metadata": {
    "id": 3332,
    "title": "How do I create weak padding between theorems?",
    "slug": "how-do-i-create-weak-padding-between-theorems",
    "posts_count": 7,
    "created_at": "2025-03-19T15:13:20.547Z",
    "last_posted_at": "2025-03-21T08:16:50.188Z",
    "views": 88,
    "like_count": 3,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 7,
    "accepted_answer_username": "bluss",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 1147
  },
  "posts": [
    {
      "id": 9995,
      "post_number": 1,
      "username": "Monkey",
      "name": "",
      "created_at": "2025-03-19T15:13:20.865Z",
      "updated_at": "2025-03-19T15:54:58.853Z",
      "cooked": "<p>I’m using the ctheorems package and for the most part am very happy with it. But I would like a uniform amount of space above and below each thmbox. Currently, if I have one definition right after another, there is more space between the two definitions than there is between the the upper definition and the “Upper line of text” (and more than between the lower definition and the “Lower Line of Text”). How can I fix this?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/ctheorems:1.1.3\": *\n#show: thmrules\n#let definition = thmbox(\"definition\", \"Definition\", inset: (x: 0em))\n\n\nUpper Line of Text\n#definition[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]\n#definition[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]\nLower Line of Text\n</code></pre>\n<p>Here’s what the code above gives.<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/e4901bf5856ec245ab74732186c6662d1b565125.png\" data-download-href=\"https://forum.typst.app/uploads/default/e4901bf5856ec245ab74732186c6662d1b565125\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/e4901bf5856ec245ab74732186c6662d1b565125_2_690x234.png\" alt=\"image\" data-base62-sha1=\"wBXCbfXzkLNw9V0PEb4OtTVGEst\" width=\"690\" height=\"234\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/e4901bf5856ec245ab74732186c6662d1b565125_2_690x234.png, https://forum.typst.app/uploads/default/original/2X/e/e4901bf5856ec245ab74732186c6662d1b565125.png 1.5x, https://forum.typst.app/uploads/default/original/2X/e/e4901bf5856ec245ab74732186c6662d1b565125.png 2x\" data-dominant-color=\"F5F5F2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">694×236 43.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "I'm using the ctheorems package and for the most part am very happy with it. But I would like a uniform amount of space above and below each thmbox. Currently, if I have one definition right after another, there is more space between the two definitions than there is between the the upper definition and the \"Upper line of text\" (and more than between the lower definition and the \"Lower Line of Text\"). How can I fix this?\n\n\n```typ\n#import \"@preview/ctheorems:1.1.3\": *\n#show: thmrules\n#let definition = thmbox(\"definition\", \"Definition\", inset: (x: 0em))\n\n\nUpper Line of Text\n#definition[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]\n#definition[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]\nLower Line of Text\n```\n\nHere's what the code above gives.\n![image|690x234](upload://wBXCbfXzkLNw9V0PEb4OtTVGEst.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 50.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 411
    },
    {
      "id": 9997,
      "post_number": 2,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-19T15:47:48.598Z",
      "updated_at": "2025-03-19T15:47:48.598Z",
      "cooked": "<p>I think you can achieve your desired distances by setting the padding to 0em:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let definition = thmbox(\n  \"definition\", \n  \"Definition\", \n  padding: (bottom: 0em, top: 0em), \n  inset: (x: 0em)\n)\n</code></pre>\n<p>Parameters top and bottom also exist inside the inset parameter, but it seems like the default of them is 0.<br>\nIf there is any question left, don’t hesitate to ask again.</p>",
      "raw": "I think you can achieve your desired distances by setting the padding to 0em:\n```typst\n#let definition = thmbox(\n  \"definition\", \n  \"Definition\", \n  padding: (bottom: 0em, top: 0em), \n  inset: (x: 0em)\n)\n```\nParameters top and bottom also exist inside the inset parameter, but it seems like the default of them is 0. \nIf there is any question left, don't hesitate to ask again.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 10010,
      "post_number": 3,
      "username": "Monkey",
      "name": "",
      "created_at": "2025-03-19T19:48:12.349Z",
      "updated_at": "2025-03-19T19:50:58.940Z",
      "cooked": "<p>Setting <code> padding: (bottom: 0em, top: 0em)</code> doesn’t work for me. This sets the space between the Definitions and the surrounding text to be the same as the space between lines. I want more space than that.</p>",
      "raw": "Setting ` padding: (bottom: 0em, top: 0em)` doesn't work for me. This sets the space between the Definitions and the surrounding text to be the same as the space between lines. I want more space than that.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 411
    },
    {
      "id": 10011,
      "post_number": 4,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-19T20:04:22.950Z",
      "updated_at": "2025-03-19T21:54:33.746Z",
      "cooked": "<p>Sry, I didn’t catch that part.<br>\nThe simplest thing that comes to my mind is using something like <span class=\"hashtag-raw\">#v</span>(0.75em) above the first and below the last definition. You could also create a custom function with the bodies of the definitions as parameters:</p>\n<details>\n<summary>\ncode</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/ctheorems:1.1.3\": *\n#show: thmrules\n#let definition = thmbox(\n  \"definition\", \n  \"Definition\", \n  padding: (bottom: 0em, top: 0em), \n  inset: (x: 0em)\n)\n\n#let definitions = (space: 0.75em, ..sink) =&gt; {\n  v(space)\n  for body in sink.pos() {\n    definition[\n      #body\n    ]\n  }\n  v(space)\n}\n\nUpper Line of Text\n#definitions(\n  [\n    A natural number is called a #highlight[_prime number_] if it is greater\n    than 1 and cannot be written as the product of two smaller natural numbers.\n  ],\n  [\n    A natural number is called a #highlight[_prime number_] if it is greater\n    than 1 and cannot be written as the product of two smaller natural numbers.\n\n    second definition\n  ]\n)\n\nLower Line of Text\n</code></pre>\n</details>\n<p>If you want to combine definitions and theorems or something like that, you could use something like this:</p>\n<details>\n<summary>\ngeneralized code</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let spacing = (body, space: 0.75em) =&gt; {\n  [\n    #v(space)\n    #body\n    #v(space)\n  ]\n}\nUpper Line of Text\n#spacing(\n  [\n    #definition[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]\n#definition[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]\n  ]\n)\nLower Line of Text\n</code></pre>\n</details>\n<p>The space parameter has the default value 0.75em, but you could change it if you would like to have different spacings.<br>\nAgain: If there are (related) questions left don’t hesitate to ask again <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Sry, I didn't catch that part. \nThe simplest thing that comes to my mind is using something like #v(0.75em) above the first and below the last definition. You could also create a custom function with the bodies of the definitions as parameters: \n[details=\"code\"]\n```typst\n#import \"@preview/ctheorems:1.1.3\": *\n#show: thmrules\n#let definition = thmbox(\n  \"definition\", \n  \"Definition\", \n  padding: (bottom: 0em, top: 0em), \n  inset: (x: 0em)\n)\n\n#let definitions = (space: 0.75em, ..sink) => {\n  v(space)\n  for body in sink.pos() {\n    definition[\n      #body\n    ]\n  }\n  v(space)\n}\n\nUpper Line of Text\n#definitions(\n  [\n    A natural number is called a #highlight[_prime number_] if it is greater\n    than 1 and cannot be written as the product of two smaller natural numbers.\n  ],\n  [\n    A natural number is called a #highlight[_prime number_] if it is greater\n    than 1 and cannot be written as the product of two smaller natural numbers.\n\n    second definition\n  ]\n)\n\nLower Line of Text\n```\n[/details]\nIf you want to combine definitions and theorems or something like that, you could use something like this: \n\n[details=\"generalized code\"]\n```typst\n#let spacing = (body, space: 0.75em) => {\n  [\n    #v(space)\n    #body\n    #v(space)\n  ]\n}\nUpper Line of Text\n#spacing(\n  [\n    #definition[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]\n#definition[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]\n  ]\n)\nLower Line of Text\n```\n[/details]\nThe space parameter has the default value 0.75em, but you could change it if you would like to have different spacings. \nAgain: If there are (related) questions left don't hesitate to ask again :slight_smile:",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 10051,
      "post_number": 5,
      "username": "Monkey",
      "name": "",
      "created_at": "2025-03-20T18:20:29.580Z",
      "updated_at": "2025-03-20T18:20:29.580Z",
      "cooked": "<p>Inspired by your suggestion, I created a wrapper as follows. It fixes the spacing issue. But it causes two other problems that I don’t know how to fix.</p>\n<ul>\n<li>Labels and tags don’t work as I want them too</li>\n<li>I would like to be able to include bibliographic information or a title to my definitions as in the example below. But I don’t know how to make that work</li>\n</ul>\n<p>I currently already have a very long document. I hope any solution will allow me to use my wrapper as the one labelled as the “good-definition”</p>\n<pre><code class=\"lang-auto\">#import \"@preview/ctheorems:1.1.3\": *\n#show: thmrules\n#let definition_inner = thmbox(\"definition\", \"Definition\", inset: (x: 0em), padding:(top: 0em, bottom: 0em), \n)\n#let definition = (top_space: 5em, bottom_space: 5em, body) =&gt; {\n  v(top_space, weak:true)\n  definition_inner[#body]\n  v(bottom_space, weak:true)\n}\n\nUpper Line of Text\n#definition(text[@this-would-be-a-bibliographic-reference])[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]&lt;good-definition&gt;\n#definition[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]&lt;better-definition&gt;\nLower Line of Text\n\n\nLet us talk about the @good-definition and the @better-definition...\n</code></pre>",
      "raw": "Inspired by your suggestion, I created a wrapper as follows. It fixes the spacing issue. But it causes two other problems that I don't know how to fix.\n\n* Labels and tags don't work as I want them too\n* I would like to be able to include bibliographic information or a title to my definitions as in the example below. But I don't know how to make that work \n\nI currently already have a very long document. I hope any solution will allow me to use my wrapper as the one labelled as the \"good-definition\"\n\n```\n#import \"@preview/ctheorems:1.1.3\": *\n#show: thmrules\n#let definition_inner = thmbox(\"definition\", \"Definition\", inset: (x: 0em), padding:(top: 0em, bottom: 0em), \n)\n#let definition = (top_space: 5em, bottom_space: 5em, body) => {\n  v(top_space, weak:true)\n  definition_inner[#body]\n  v(bottom_space, weak:true)\n}\n\nUpper Line of Text\n#definition(text[@this-would-be-a-bibliographic-reference])[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]<good-definition>\n#definition[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]<better-definition>\nLower Line of Text\n\n\nLet us talk about the @good-definition and the @better-definition...\n```",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 411
    },
    {
      "id": 10055,
      "post_number": 6,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-20T20:12:42.946Z",
      "updated_at": "2025-03-21T08:40:54.238Z",
      "cooked": "<p>I think I got both things working:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/ctheorems:1.1.3\": *\n#show: thmrules\n#let definition_inner = thmbox(\"definition\", \"Definition\", inset: (x: 0em), padding:(top: 0em, bottom: 0em)\n)\n#let definition = (top_space: 5em, bottom_space: 5em, pLabel: none, pTitle: none, body) =&gt; [\n  #v(top_space, weak:true)\n  #if (pLabel == none) [\n    #definition_inner(pTitle, supplement: \"Def.\", refnumbering: \"1.1)\")[#body]\n  ]\n  #if (pLabel != none) [\n    #definition_inner(pTitle, supplement: \"Def.\", refnumbering: \"1.1)\")[#body] #label(pLabel)\n  ]\n  #v(bottom_space, weak:true)\n]\n\nfigure(definition_inner[ein Text]) &lt;some-label&gt;\n\nUpper Line of Text\n#definition(pLabel: \"good-definition\", pTitle: \"a good definition\")[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]\n#definition(pLabel: \"better-definition\", pTitle: \"a better definition\")[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]\nLower Line of Text\n\nLet us talk about the @good-definition and the @better-definition...\n</code></pre>\n<p>Again: if there are questions left, don’t hesitate to ask again <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "I think I got both things working: \n```typst\n#import \"@preview/ctheorems:1.1.3\": *\n#show: thmrules\n#let definition_inner = thmbox(\"definition\", \"Definition\", inset: (x: 0em), padding:(top: 0em, bottom: 0em)\n)\n#let definition = (top_space: 5em, bottom_space: 5em, pLabel: none, pTitle: none, body) => [\n  #v(top_space, weak:true)\n  #if (pLabel == none) [\n    #definition_inner(pTitle, supplement: \"Def.\", refnumbering: \"1.1)\")[#body]\n  ]\n  #if (pLabel != none) [\n    #definition_inner(pTitle, supplement: \"Def.\", refnumbering: \"1.1)\")[#body] #label(pLabel)\n  ]\n  #v(bottom_space, weak:true)\n]\n\nfigure(definition_inner[ein Text]) <some-label>\n\nUpper Line of Text\n#definition(pLabel: \"good-definition\", pTitle: \"a good definition\")[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]\n#definition(pLabel: \"better-definition\", pTitle: \"a better definition\")[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]\nLower Line of Text\n\nLet us talk about the @good-definition and the @better-definition...\n```\nAgain: if there are questions left, don't hesitate to ask again :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 14,
      "score": 17.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 10063,
      "post_number": 7,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-03-21T08:16:50.188Z",
      "updated_at": "2025-03-21T08:16:50.188Z",
      "cooked": "<p>Here is a suggestion.</p>\n<p>Main thought: you showed how weak spacing can be made to work by inserting it directly. If you want to inser v spacing without getting in the way of label attachment, then insert the spacing using a show rule.</p>\n<p>The following works for that but the show rule selector needs to be redone to only apply to the right place. That could be the next thing to explore. In future typst with custom types it will be easier to do(?)</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/ctheorems:1.1.3\": *\n#show: thmrules\n#let definition = thmbox(\"definition\", \"Definition\", inset: (x: 0em), padding:(top: 0em, bottom: 0em), \n)\n\n#let sp = 2em\n#show pad: it =&gt; {\n  v(sp, weak:true)\n  it\n  v(sp, weak:true)\n}\nUpper Line of Text\n#definition()[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]&lt;good-definition&gt;\n#definition[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]&lt;better-definition&gt;\nLower Line of Text\n</code></pre>",
      "raw": "Here is a suggestion.\n\nMain thought: you showed how weak spacing can be made to work by inserting it directly. If you want to inser v spacing without getting in the way of label attachment, then insert the spacing using a show rule.\n\nThe following works for that but the show rule selector needs to be redone to only apply to the right place. That could be the next thing to explore. In future typst with custom types it will be easier to do(?)\n\n```typst\n#import \"@preview/ctheorems:1.1.3\": *\n#show: thmrules\n#let definition = thmbox(\"definition\", \"Definition\", inset: (x: 0em), padding:(top: 0em, bottom: 0em), \n)\n\n#let sp = 2em\n#show pad: it => {\n  v(sp, weak:true)\n  it\n  v(sp, weak:true)\n}\nUpper Line of Text\n#definition()[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]<good-definition>\n#definition[\n  A natural number is called a #highlight[_prime number_] if it is greater\n  than 1 and cannot be written as the product of two smaller natural numbers.\n]<better-definition>\nLower Line of Text\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 12,
      "score": 27.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 1272
    }
  ],
  "scraped_at": "2025-06-10T09:50:13.316264"
}
{
  "topic_metadata": {
    "id": 3336,
    "title": "How to write a multi-line set builder?",
    "slug": "how-to-write-a-multi-line-set-builder",
    "posts_count": 5,
    "created_at": "2025-03-19T17:39:06.884Z",
    "last_posted_at": "2025-03-19T18:31:52.430Z",
    "views": 75,
    "like_count": 8,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 412
  },
  "posts": [
    {
      "id": 10004,
      "post_number": 1,
      "username": "Jace",
      "name": "Jace",
      "created_at": "2025-03-19T17:39:07.015Z",
      "updated_at": "2025-03-19T17:44:10.768Z",
      "cooked": "<p>A set builder notation with multiple lines can be wrote in latex with array:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/d/dd13e1104f6df628e62073f6d6d3b3d8142ebc80.png\" alt=\"https://i.sstatic.net/TJ9lj.png\" data-base62-sha1=\"vxK6W00nE0sPOcJyIhlJl1yHpUA\" width=\"360\" height=\"50\">.<br>\nHow can this be done in typst?</p>",
      "raw": "A set builder notation with multiple lines can be wrote in latex with array:\n![https://i.sstatic.net/TJ9lj.png](upload://vxK6W00nE0sPOcJyIhlJl1yHpUA.png).\nHow can this be done in typst?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 194.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1368
    },
    {
      "id": 10005,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-03-19T17:58:01.004Z",
      "updated_at": "2025-03-19T17:58:01.004Z",
      "cooked": "<p>Hi and welcome to the forum!</p>\n<p>The technique i’ve been using is to use <code>cases</code>, although admittedly it’s a bit hacky:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">$\ncal(Z) = {\n  z\n  cases(\n    delim: \"|\",\n    1 &lt;= z_((k, m))^l &lt;= ...,\n    forall k in cal(K)\\, ...\n  )\n}\n$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/d/dc8dbebe7773111a9285cff42d78e837849a5482.png\" alt=\"image\" data-base62-sha1=\"vt6JjOCRp447tZFpyzA5eVaUOci\" width=\"325\" height=\"103\"></p>",
      "raw": "Hi and welcome to the forum!\n\nThe technique i've been using is to use `cases`, although admittedly it's a bit hacky:\n\n```typst\n$\ncal(Z) = {\n  z\n  cases(\n    delim: \"|\",\n    1 <= z_((k, m))^l <= ...,\n    forall k in cal(K)\\, ...\n  )\n}\n$\n```\n![image|325x103](upload://vt6JjOCRp447tZFpyzA5eVaUOci.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 22,
      "score": 54.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 10006,
      "post_number": 3,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-03-19T17:59:13.990Z",
      "updated_at": "2025-03-19T20:04:18.621Z",
      "cooked": "<p>My first approach would be like this, with stack and nested equations.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">$ cal(Z) = lr({z mid(|) #align(left)[#stack(spacing: 0.4em, dir: ttb, $A, B, C$, $a, b, c$)]}) $\n</code></pre>\n<p>This doesn’t feel so elegant, maybe because of the need to ensure left alignment or the nested equations in equation.</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/1/1e8fa32d6e4ef4de5704fb2e09bae4e5409e4273.png\" alt=\"bild\" data-base62-sha1=\"4mm457JNOT5iWLnNFTTiZpGzS3V\" width=\"330\" height=\"105\"></p>\n<p>Now that I compare, I think using <code>cases</code> is better!</p>\n<p>Edit: We can define a “math version of stack” and salvage the syntax. I think this is a win for typst!</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let mstack(..args) = $#align(left)[#stack(spacing: 0.4em, dir: ttb, ..args)]$\n\n$ cal(Z) = lr(\\{z mid(|) mstack(A#sym.comma B \"and\" C, a#sym.comma b \"and\" c) \\}) $\n</code></pre>",
      "raw": "My first approach would be like this, with stack and nested equations.\n\n```typst\n$ cal(Z) = lr({z mid(|) #align(left)[#stack(spacing: 0.4em, dir: ttb, $A, B, C$, $a, b, c$)]}) $\n```\n\nThis doesn't feel so elegant, maybe because of the need to ensure left alignment or the nested equations in equation.\n\n![bild|440x141, 75%](upload://4mm457JNOT5iWLnNFTTiZpGzS3V.png)\n\n\nNow that I compare, I think using `cases` is better!\n\n\nEdit: We can define a \"math version of stack\" and salvage the syntax. I think this is a win for typst!\n\n```typst\n#let mstack(..args) = $#align(left)[#stack(spacing: 0.4em, dir: ttb, ..args)]$\n\n$ cal(Z) = lr(\\{z mid(|) mstack(A#sym.comma B \"and\" C, a#sym.comma b \"and\" c) \\}) $\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 19.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 1272
    },
    {
      "id": 10007,
      "post_number": 4,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-19T17:59:28.556Z",
      "updated_at": "2025-03-19T18:03:33.953Z",
      "cooked": "<p>Disclaimer: This solution is equivalent to the one by <a class=\"mention\" href=\"/u/aarnent\">@aarnent</a>. He was just ~1 minute faster <img src=\"https://forum.typst.app/images/emoji/apple/cry.png?v=12\" title=\":cry:\" class=\"emoji\" alt=\":cry:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nYou can use <a href=\"https://typst.app/docs/reference/math/cases/\"><code>math.cases()</code></a> to get the multiple lines. And then you just wrap everything in curly brackets. Note that you have to use <code>sym.comma</code> (or <code>\\,</code>) since the regular comma will be interpreted as a new case.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set math.cases(delim: \"|\")\n\n$\n  cal(Z) = {\n    z cases(\n      #h(0.5em) 1 &lt;= z_((k,m))^l &lt;= ... ,\n      #h(0.5em) forall k in cal(K) #sym.comma forall m in cal(M)_k #sym.comma ...\n    )\n  }\n$\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/b/b08bce2eba4dfc9a3d2a91d83b6419b1a1091d2f.png\" data-download-href=\"https://forum.typst.app/uploads/default/b08bce2eba4dfc9a3d2a91d83b6419b1a1091d2f\" title=\"forum_3336_mulitline-set\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/b/b08bce2eba4dfc9a3d2a91d83b6419b1a1091d2f_2_517x129.png\" alt=\"forum_3336_mulitline-set\" data-base62-sha1=\"pbNz7zZXr2rUEdoFnXVaGiCegYT\" width=\"517\" height=\"129\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/b/b08bce2eba4dfc9a3d2a91d83b6419b1a1091d2f_2_517x129.png, https://forum.typst.app/uploads/default/optimized/2X/b/b08bce2eba4dfc9a3d2a91d83b6419b1a1091d2f_2_775x193.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/b/b08bce2eba4dfc9a3d2a91d83b6419b1a1091d2f_2_1034x258.png 2x\" data-dominant-color=\"F4F4F4\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">forum_3336_mulitline-set</span><span class=\"informations\">1472×367 79.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Disclaimer: This solution is equivalent to the one by @aarnent. He was just ~1 minute faster :cry:\nYou can use [`math.cases()`](https://typst.app/docs/reference/math/cases/) to get the multiple lines. And then you just wrap everything in curly brackets. Note that you have to use `sym.comma` (or `\\,`) since the regular comma will be interpreted as a new case.\n\n```typ\n#set math.cases(delim: \"|\")\n\n$\n  cal(Z) = {\n    z cases(\n      #h(0.5em) 1 <= z_((k,m))^l <= ... ,\n      #h(0.5em) forall k in cal(K) #sym.comma forall m in cal(M)_k #sym.comma ...\n    )\n  }\n$\n```\n\n![forum_3336_mulitline-set|690x172, 75%](upload://pbNz7zZXr2rUEdoFnXVaGiCegYT.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 4,
      "reads": 21,
      "score": 89.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 10008,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-19T18:31:52.430Z",
      "updated_at": "2025-03-19T18:31:52.430Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"janekfleper\" data-post=\"4\" data-topic=\"3336\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/j/8F38B1/48.png\" class=\"avatar\"> janekfleper:</div>\n<blockquote>\n<p>Note that you have to use <code>sym.comma</code> (or <code>\\,</code>) since the regular comma will be interpreted as a new case</p>\n</blockquote>\n</aside>\n<p>you can get around this by using a new equation for each case, like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$\n  cal(Z) = {\n    z #math.cases(\n      $#h(0.5em) 1 &lt;= z_((k,m))^l &lt;= ...$,\n      $#h(0.5em) forall k in cal(K), forall m in cal(M)_k, ...$,\n    )\n  }\n$\n</code></pre>\n<p>&nbsp;</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">instead of $       cases(a,   b  ) $\nuse        $ #math.cases($a$, $b$) $\n</code></pre>\n<p>this means the the <code>cases</code> call is in code mode, so each parameter needs to be wrapped in <code>$...$</code> – in return, each equation is isolated from math mode’s comma parsing.</p>",
      "raw": "[quote=\"janekfleper, post:4, topic:3336\"]\nNote that you have to use `sym.comma` (or `\\,`) since the regular comma will be interpreted as a new case\n[/quote]\n\nyou can get around this by using a new equation for each case, like this:\n\n```typ\n$\n  cal(Z) = {\n    z #math.cases(\n      $#h(0.5em) 1 <= z_((k,m))^l <= ...$,\n      $#h(0.5em) forall k in cal(K), forall m in cal(M)_k, ...$,\n    )\n  }\n$\n```\n\n&nbsp;\n\n```typ\ninstead of $       cases(a,   b  ) $\nuse        $ #math.cases($a$, $b$) $\n```\nthis means the the `cases` call is in code mode, so each parameter needs to be wrapped in `$...$` -- in return, each equation is isolated from math mode's comma parsing.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:50:12.534038"
}
{
  "topic_metadata": {
    "id": 3338,
    "title": "How to properly set heading numbering to include supplement?",
    "slug": "how-to-properly-set-heading-numbering-to-include-supplement",
    "posts_count": 7,
    "created_at": "2025-03-19T20:50:56.961Z",
    "last_posted_at": "2025-04-22T09:19:27.641Z",
    "views": 218,
    "like_count": 9,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "Andrew",
    "tags": [
      "outline",
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 931
  },
  "posts": [
    {
      "id": 10016,
      "post_number": 1,
      "username": "Gaweringo",
      "name": "Gaweringo",
      "created_at": "2025-03-19T20:50:57.093Z",
      "updated_at": "2025-03-26T13:21:44.104Z",
      "cooked": "<p>I am trying to create a system/layout/numbering like this:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/7/7bc55513b212eb2dd8c86369ff6f73d8cc278153.png\" data-download-href=\"https://forum.typst.app/uploads/default/7bc55513b212eb2dd8c86369ff6f73d8cc278153\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/7/7bc55513b212eb2dd8c86369ff6f73d8cc278153_2_517x335.png\" alt=\"image\" data-base62-sha1=\"hEVvHXzsuOBUgSGn0vlUfg7mZZp\" width=\"517\" height=\"335\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/7/7bc55513b212eb2dd8c86369ff6f73d8cc278153_2_517x335.png, https://forum.typst.app/uploads/default/original/2X/7/7bc55513b212eb2dd8c86369ff6f73d8cc278153.png 1.5x, https://forum.typst.app/uploads/default/original/2X/7/7bc55513b212eb2dd8c86369ff6f73d8cc278153.png 2x\" data-dominant-color=\"F1F1F1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">772×501 48.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>And I have now ended up at this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show heading.where(level: 1): set heading(\n  numbering: \"1:\",\n  supplement: [Example]\n)\n#show heading.where(level: 1): it =&gt; {\n  it.supplement + \" \" + context { numbering(it.numbering, counter(heading).get().first()) } + \" \" + it.body\n}\n\n= First one &lt;one&gt;\n== Level two\nSee things @two\n\n= Second One &lt;two&gt;\n== Level two\n</code></pre>\n<p>Which works, but I am wondering if there is a better/simpler method to have this behavior.</p>\n<p>With the behaviour being, that the heading numbering has some text before it, like<br>\n<code>Text [numbering]:</code> and that references to a heading show up as<br>\n<code>[supplement] [numbering]</code>, like shown in the picture.</p>\n<p>Is there a better way to do this?<br>\nAlso, how would I make the supplement be shown in the outline as well?</p>",
      "raw": "I am trying to create a system/layout/numbering like this:\n\n![image|690x447, 75%](upload://hEVvHXzsuOBUgSGn0vlUfg7mZZp.png)\n\nAnd I have now ended up at this:\n\n```typst\n#show heading.where(level: 1): set heading(\n  numbering: \"1:\",\n  supplement: [Example]\n)\n#show heading.where(level: 1): it => {\n  it.supplement + \" \" + context { numbering(it.numbering, counter(heading).get().first()) } + \" \" + it.body\n}\n\n= First one <one>\n== Level two\nSee things @two\n\n= Second One <two>\n== Level two\n```\n\nWhich works, but I am wondering if there is a better/simpler method to have this behavior.\n\nWith the behaviour being, that the heading numbering has some text before it, like\n`Text [numbering]:` and that references to a heading show up as \n`[supplement] [numbering]`, like shown in the picture.\n\nIs there a better way to do this?\nAlso, how would I make the supplement be shown in the outline as well?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 534.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 770
    },
    {
      "id": 10025,
      "post_number": 2,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-20T08:26:06.654Z",
      "updated_at": "2025-03-21T08:43:00.851Z",
      "cooked": "<p>Hi there!<br>\nYes, I do have a solution that might be a bit better:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show heading.where(level: 1): set heading(\n  numbering: (.., last) =&gt; {\n    if last != 1 {\n      \"Example \" + str(last - 1) + \":\"\n    }\n    else {\n      h(-0.4em)\n    }\n  }\n)\n#outline()\n= First one\n== Level two\nSee things \n\n= Second One\n== Level two\n\n</code></pre>\n<p>So you can actually create a custom function for the numbering (see <a href=\"https://typst.app/docs/reference/model/numbering/#numbering-patterns-and-numbering-functions\">documentation</a>). The parameter last is the number, which is converted into a string, so it can be added to the other strings.<br>\nRegarding the outline the “supplement” “Example 1:” etc. they now show up in the outline just like the numbering would, although the indent is pretty large. I think that’s because it’s dependent on the length of the numbering. Apparently the title of the outline is a heading as well, so I had to exclude it and lower the number by one. Because there was still an indent in front of the outline’s heading, I added the else clause. Here’s the result:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/b/b02a8fbb7cf9aa904df19c49db8aa5905ca9f88f.png\" alt=\"grafik\" data-base62-sha1=\"p8rdMv6Oi1H1W1d2yvaR6EwyHoz\" width=\"237\" height=\"279\"><br>\nIf there are any questions or wishes left, feel free to ask again <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hi there!\nYes, I do have a solution that might be a bit better: \n```typst\n#show heading.where(level: 1): set heading(\n  numbering: (.., last) => {\n    if last != 1 {\n      \"Example \" + str(last - 1) + \":\"\n    }\n    else {\n      h(-0.4em)\n    }\n  }\n)\n#outline()\n= First one\n== Level two\nSee things \n\n= Second One\n== Level two\n\n```\nSo you can actually create a custom function for the numbering (see [documentation](https://typst.app/docs/reference/model/numbering/#numbering-patterns-and-numbering-functions)). The parameter last is the number, which is converted into a string, so it can be added to the other strings. \nRegarding the outline the \"supplement\" \"Example 1:\" etc. they now show up in the outline just like the numbering would, although the indent is pretty large. I think that's because it's dependent on the length of the numbering. Apparently the title of the outline is a heading as well, so I had to exclude it and lower the number by one. Because there was still an indent in front of the outline's heading, I added the else clause. Here's the result:\n![grafik|237x279](upload://p8rdMv6Oi1H1W1d2yvaR6EwyHoz.png)\nIf there are any questions or wishes left, feel free to ask again :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 41,
      "score": 28.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 10039,
      "post_number": 3,
      "username": "Gaweringo",
      "name": "Gaweringo",
      "created_at": "2025-03-20T14:30:21.593Z",
      "updated_at": "2025-03-20T14:30:21.593Z",
      "cooked": "<p>Thanks, but the problem with using numbering to add <code>Example 1:</code>, is, that the <code>:</code> is included when using <code>@label</code> to reference a heading, which is not really desired.</p>\n<p>The upside is, that it shows up in the outline. And the outline indenting can be set easily:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set outline(indent: 2em)\n</code></pre>\n<p>But this gave me the idea to try to remove the <code>:</code> from the reference. And the  <a href=\"https://typst.app/docs/reference/model/ref/#customization\">customization section of <code>ref</code></a> had everything I needed.<br>\nNow I can use:</p>\n<details>\n<summary>\nUpdated Code</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set outline(indent: 2em)\n#outline()\n\n#set heading(numbering: \"1.a\")\n#show heading.where(level: 1): set heading(\n  numbering: (num) =&gt; {\"Example \" + numbering(\"1:\", num)},\n  supplement: [Example]\n)\n#show ref: it =&gt; {\n  let el = it.element\n  if el != none and el.func() == heading  and el.level == 1{\n    link(el.location(),\n      numbering(\n        (num) =&gt; el.supplement + \" \" + str(num),\n        ..counter(heading).at(el.location())\n    ))\n  } else {\n    it\n  }\n}\n#show ref: it =&gt; {\n  emph(it)\n}\n\n= First one &lt;one&gt;\n== Level two\nSee things @four and @sub_four\n\n= Second One &lt;two&gt;\n== Level two\n\n= Third one\n== Level two\nSee things at @two\n\n= Fourth Heading &lt;four&gt;\n== Sub fourth heading &lt;sub_four&gt;\n</code></pre>\n</details>\n<p>And that gives me exactly the layout/behaviour I want:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/c/ce3fc8228f767cf23e31460211cf3633c4de2607.png\" data-download-href=\"https://forum.typst.app/uploads/default/ce3fc8228f767cf23e31460211cf3633c4de2607\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/c/ce3fc8228f767cf23e31460211cf3633c4de2607_2_594x500.png\" alt=\"image\" data-base62-sha1=\"tqz0FhHtyXrc6DTOUqNehf1wE87\" width=\"594\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/c/ce3fc8228f767cf23e31460211cf3633c4de2607_2_594x500.png, https://forum.typst.app/uploads/default/original/2X/c/ce3fc8228f767cf23e31460211cf3633c4de2607.png 1.5x, https://forum.typst.app/uploads/default/original/2X/c/ce3fc8228f767cf23e31460211cf3633c4de2607.png 2x\" data-dominant-color=\"F8F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">711×598 75.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Thanks, but the problem with using numbering to add `Example 1:`, is, that the `:` is included when using `@label` to reference a heading, which is not really desired.\n\nThe upside is, that it shows up in the outline. And the outline indenting can be set easily:\n```typst\n#set outline(indent: 2em)\n```\n\nBut this gave me the idea to try to remove the `:` from the reference. And the  [customization section of `ref`](https://typst.app/docs/reference/model/ref/#customization) had everything I needed.\nNow I can use:\n\n[details=\"Updated Code\"]\n```typ\n#set outline(indent: 2em)\n#outline()\n\n#set heading(numbering: \"1.a\")\n#show heading.where(level: 1): set heading(\n  numbering: (num) => {\"Example \" + numbering(\"1:\", num)},\n  supplement: [Example]\n)\n#show ref: it => {\n  let el = it.element\n  if el != none and el.func() == heading  and el.level == 1{\n    link(el.location(),\n      numbering(\n        (num) => el.supplement + \" \" + str(num),\n        ..counter(heading).at(el.location())\n    ))\n  } else {\n    it\n  }\n}\n#show ref: it => {\n  emph(it)\n}\n\n= First one <one>\n== Level two\nSee things @four and @sub_four\n\n= Second One <two>\n== Level two\n\n= Third one\n== Level two\nSee things at @two\n\n= Fourth Heading <four>\n== Sub fourth heading <sub_four>\n```\n[/details]\n\nAnd that gives me exactly the layout/behaviour I want:\n![image|594x500](upload://tqz0FhHtyXrc6DTOUqNehf1wE87.png)",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 2,
      "reads": 33,
      "score": 51.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 770
    },
    {
      "id": 10041,
      "post_number": 4,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-20T14:58:37.082Z",
      "updated_at": "2025-03-20T14:58:37.082Z",
      "cooked": "<p>Great! So maybe mark your own answer as the solution, so it’s easier for others to find it <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Great! So maybe mark your own answer as the solution, so it's easier for others to find it :slight_smile:",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 32,
      "score": 46.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 10139,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-23T20:55:41.268Z",
      "updated_at": "2025-03-23T20:55:41.268Z",
      "cooked": "<p>I simplified your solution slightly, so it’s easier to read:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.a\")\n#show heading.where(level: 1): set heading(\n  numbering: num =&gt; \"Example \" + numbering(\"1:\", num),\n  supplement: \"Example\",\n)\n#show ref: it =&gt; {\n  let el = it.element\n  if el == none or el.func() != heading or el.level != 1 { return it }\n  let heading-levels = counter(heading).at(el.location())\n  let body = numbering(n =&gt; [#el.supplement #n], ..heading-levels)\n  link(el.location(), body)\n}\n#show ref: emph\n</code></pre>\n<p>Also note that you can use <code>-</code> in label/function/variable names, which is also a conventional way to name things. So the <code>&lt;sub_four&gt;</code> would be <code>&lt;sub-four&gt;</code> and the reference would be <code>@sub-four</code>.</p>",
      "raw": "I simplified your solution slightly, so it's easier to read:\n\n```typ\n#set heading(numbering: \"1.a\")\n#show heading.where(level: 1): set heading(\n  numbering: num => \"Example \" + numbering(\"1:\", num),\n  supplement: \"Example\",\n)\n#show ref: it => {\n  let el = it.element\n  if el == none or el.func() != heading or el.level != 1 { return it }\n  let heading-levels = counter(heading).at(el.location())\n  let body = numbering(n => [#el.supplement #n], ..heading-levels)\n  link(el.location(), body)\n}\n#show ref: emph\n```\n\nAlso note that you can use `-` in label/function/variable names, which is also a conventional way to name things. So the `<sub_four>` would be `<sub-four>` and the reference would be `@sub-four`.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 32,
      "score": 86.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10279,
      "post_number": 6,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-26T13:22:13.875Z",
      "updated_at": "2025-03-26T13:22:13.875Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/gaweringo\">@Gaweringo</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Gaweringo, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 26.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 11426,
      "post_number": 7,
      "username": "Seube",
      "name": "Seube",
      "created_at": "2025-04-22T09:19:27.641Z",
      "updated_at": "2025-04-22T09:19:27.641Z",
      "cooked": "<p>Thank you everyone for the helpful discussion and solutions. I’m currently writing a PhD thesis and encountered a closely related issue. My level-1 headings are labeled as “Chapters” with numeric numbering, but in the appendix, I need them to switch to “Appendix” with letter-based numbering. I wanted a clean and flexible way to implement this.</p>\n<p>I ended up using <a class=\"mention\" href=\"/u/andrew\">@Andrew</a>’s approach with a small adaptation to make it work for my structure:</p>\n<pre><code>\n#set heading(numbering: \"1.1\")\n#show heading.where(level: 1): set heading(\n  numbering: num =&gt; \"Chapter \" + numbering(\"1:\", num),\n  supplement: \"Chapter\",\n)\n#show ref: it =&gt; {\n  let el = it.element\n  if el == none or el.func() != heading or el.level != 1 { return it }\n  let heading-levels = counter(heading).at(el.location())\n  if el.supplement == [Chapter] {\n    let body = el.supplement + \" \" + numbering(\"1\", ..heading-levels)\n    link(el.location(), body)\n  }\n  else if el.supplement == [Appendix] {\n    let body = el.supplement + \" \" + numbering(\"A\", ..heading-levels)\n    link(el.location(), body)\n  }\n  else {\n    it\n  }\n}\n\n= First Chapter\ncontents\n\n#set heading(numbering: \"A.1\")\n#show heading.where(level: 1): set heading(\n  numbering: num =&gt; \"Appendix \" + numbering(\"A:\", num),\n  supplement: \"Appendix\",\n)\n#counter(heading).update(0)\n\n= First Appendix\nAppendix contents\n</code></pre>\n<p>I am quite new to typst, so this might not be optimal, but I thought it might be useful to share this anyway.</p>",
      "raw": "Thank you everyone for the helpful discussion and solutions. I'm currently writing a PhD thesis and encountered a closely related issue. My level-1 headings are labeled as \"Chapters\" with numeric numbering, but in the appendix, I need them to switch to \"Appendix\" with letter-based numbering. I wanted a clean and flexible way to implement this.\n\nI ended up using @Andrew’s approach with a small adaptation to make it work for my structure:\n\n<pre><code>\n#set heading(numbering: \"1.1\")\n#show heading.where(level: 1): set heading(\n  numbering: num => \"Chapter \" + numbering(\"1:\", num),\n  supplement: \"Chapter\",\n)\n#show ref: it => {\n  let el = it.element\n  if el == none or el.func() != heading or el.level != 1 { return it }\n  let heading-levels = counter(heading).at(el.location())\n  if el.supplement == [Chapter] {\n    let body = el.supplement + \" \" + numbering(\"1\", ..heading-levels)\n    link(el.location(), body)\n  }\n  else if el.supplement == [Appendix] {\n    let body = el.supplement + \" \" + numbering(\"A\", ..heading-levels)\n    link(el.location(), body)\n  }\n  else {\n    it\n  }\n}\n\n= First Chapter\ncontents\n\n#set heading(numbering: \"A.1\")\n#show heading.where(level: 1): set heading(\n  numbering: num => \"Appendix \" + numbering(\"A:\", num),\n  supplement: \"Appendix\",\n)\n#counter(heading).update(0)\n\n= First Appendix\nAppendix contents\n</code></pre>\n\nI am quite new to typst, so this might not be optimal, but I thought it might be useful to share this anyway.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1396
    }
  ],
  "scraped_at": "2025-06-10T09:50:11.737964"
}
{
  "topic_metadata": {
    "id": 3341,
    "title": "How can I include all entries from a bibliography file in my document's list of references (similar to LaTeX \\nocite{*})",
    "slug": "how-can-i-include-all-entries-from-a-bibliography-file-in-my-documents-list-of-references-similar-to-latex-nocite",
    "posts_count": 5,
    "created_at": "2025-03-20T07:57:13.644Z",
    "last_posted_at": "2025-03-22T20:50:02.234Z",
    "views": 86,
    "like_count": 4,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Mario",
    "tags": [
      "citation"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 180
  },
  "posts": [
    {
      "id": 10023,
      "post_number": 1,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-03-20T07:57:13.740Z",
      "updated_at": "2025-03-20T08:10:39.484Z",
      "cooked": "<p>I’m trying to generate a list of references listing all entries in an external BibTeX file. In LaTeX I would simply use <code>\\nocite{*}</code>, but I cannot find any equivalent in Typst. The <a href=\"https://typst.app/universe/package/hidden-bib\">hidden-bib</a> package allows for hidden citations, but not “regex” citations.</p>",
      "raw": "I'm trying to generate a list of references listing all entries in an external BibTeX file. In LaTeX I would simply use `\\nocite{*}`, but I cannot find any equivalent in Typst. The [hidden-bib](https://typst.app/universe/package/hidden-bib) package allows for hidden citations, but not \"regex\" citations.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 105.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 10026,
      "post_number": 2,
      "username": "Mario",
      "name": "Mario",
      "created_at": "2025-03-20T08:28:06.214Z",
      "updated_at": "2025-03-20T08:28:06.214Z",
      "cooked": "<p>Have a look at the <code>full</code> parameter of the <code>bibliography</code> function. :)<br>\n<a href=\"https://typst.app/docs/reference/model/bibliography/\">https://typst.app/docs/reference/model/bibliography/</a></p>",
      "raw": "Have a look at the `full` parameter of the `bibliography` function. :) \n[https://typst.app/docs/reference/model/bibliography/](https://typst.app/docs/reference/model/bibliography/)",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 30.0,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1370
    },
    {
      "id": 10027,
      "post_number": 3,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-20T09:25:19.975Z",
      "updated_at": "2025-03-20T09:27:48.479Z",
      "cooked": "<p>Hi there! Welcome to the forum.<br>\nA little hint (I didn’t know in the beginning as well): you can reference the parameter directly like this: <code>https://typst.app/docs/reference/model/bibliography/#parameters-full</code> (<a href=\"https://typst.app/docs/reference/model/bibliography/#parameters-full\">clickable hyperlink of it</a>)</p>",
      "raw": "Hi there! Welcome to the forum. \nA little hint (I didn't know in the beginning as well): you can reference the parameter directly like this: `https://typst.app/docs/reference/model/bibliography/#parameters-full` ([clickable hyperlink of it](https://typst.app/docs/reference/model/bibliography/#parameters-full))",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 25,
      "score": 45.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 10028,
      "post_number": 4,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-03-20T09:33:29.794Z",
      "updated_at": "2025-03-20T09:33:29.794Z",
      "cooked": "<p>Duh. Classic case of looking in the wrong place. Thanks!</p>",
      "raw": "Duh. Classic case of looking in the wrong place. Thanks!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 4.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 10121,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-22T20:50:02.234Z",
      "updated_at": "2025-03-22T20:50:02.234Z",
      "cooked": "<p>A hint for your hint: <a href=\"https://github.com/typst/webapp-issues/issues/322#issuecomment-2730241946\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Add clickable section links in documentation similar to that in README.md · Issue #322 · typst/webapp-issues · GitHub</a> :</p>\n<blockquote>\n<p>There’s an easier way than looking up the id: Just use the on-page navigation in the right column. It does the same thing.</p>\n</blockquote>\n<p>I now use it very frequently.</p>",
      "raw": "A hint for your hint: https://github.com/typst/webapp-issues/issues/322#issuecomment-2730241946 :\n\n> There's an easier way than looking up the id: Just use the on-page navigation in the right column. It does the same thing.\n\nI now use it very frequently.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 19.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:50:10.657975"
}
{
  "topic_metadata": {
    "id": 3348,
    "title": "How do I change the size of raw text?",
    "slug": "how-do-i-change-the-size-of-raw-text",
    "posts_count": 13,
    "created_at": "2025-03-20T13:27:40.743Z",
    "last_posted_at": "2025-03-27T10:37:27.096Z",
    "views": 516,
    "like_count": 16,
    "reply_count": 8,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 12,
    "accepted_answer_username": "Andrew",
    "tags": [
      "styling"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1488
  },
  "posts": [
    {
      "id": 10035,
      "post_number": 1,
      "username": "Tobias_Andersson_Gid",
      "name": "Tobias Andersson Gidlund",
      "created_at": "2025-03-20T13:27:40.864Z",
      "updated_at": "2025-03-20T15:47:13.471Z",
      "cooked": "<p>Hi,</p>\n<p>I use Typst to create lecture slides for computer science classes and overall it works great. I have a lot of programming code, however, and I find it tedious to set the text size just before the code block and then change it back to normal again afterwards if I have a need to adjust the typeface size when showing code.</p>\n<p>Is there a simple way to set the text size for raw text? I have tried to search for a solution but not come up with anything that is fast and simple.</p>\n<p>Thanks a lot for a nice forum!</p>\n<p>//Tobias</p>",
      "raw": "Hi,\n\nI use Typst to create lecture slides for computer science classes and overall it works great. I have a lot of programming code, however, and I find it tedious to set the text size just before the code block and then change it back to normal again afterwards if I have a need to adjust the typeface size when showing code. \n\nIs there a simple way to set the text size for raw text? I have tried to search for a solution but not come up with anything that is fast and simple.\n\nThanks a lot for a nice forum!\n\n//Tobias",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 62,
      "score": 1362.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 706
    },
    {
      "id": 10036,
      "post_number": 2,
      "username": "Birckk",
      "name": "Tobias Olrik Birck Kristensen",
      "created_at": "2025-03-20T13:56:08.598Z",
      "updated_at": "2025-03-20T14:00:25.454Z",
      "cooked": "<p>Hi there <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">,  I’m no expert but based on <a href=\"https://github.com/typst/typst/discussions/3057\" rel=\"noopener nofollow ugc\">this Github post</a> I were able to make some examples that hopefully can help you.<br>\nAlso check out the post itself perhaps, it might explain some of it better than I can.</p>\n<p><em>also it’s a little cumbersome to make “raw code examples” in a reply on this forum because of it already using that formatting <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\">, so that’s to explain to extra tabs / spaces in the examples.</em></p>\n<h2><a name=\"p-10036-isolated-raw-text-example-1\" class=\"anchor\" href=\"#p-10036-isolated-raw-text-example-1\"></a>Isolated raw text example</h2>\n<p><em>For a singular code block</em></p>\n<pre><code class=\"lang-auto\">#[\n  #show raw: set text(size: 20pt)\n    ```rust\n    fn main() {\n      println!(\"Hello World!\");\n    }\n    ```\n]\n</code></pre>\n<h2><a name=\"p-10036-all-raw-text-transform-example-2\" class=\"anchor\" href=\"#p-10036-all-raw-text-transform-example-2\"></a>All raw text transform example</h2>\n<p>for all <code>raw</code> code in the document/page below this</p>\n<p><strong>This should be the code you need for your question specifically. And you can just have this code in main file or similar as you please</strong></p>\n<pre><code class=\"lang-auto\">    #show raw: r =&gt; {\n      set text(size: 15pt, purple)\n      r\n    }\n    ```\n      fn main() {\n        println!(\"Hello World!\");\n      }\n    ```\n</code></pre>\n<h2><a name=\"p-10036-specific-raw-code-language-transform-example-3\" class=\"anchor\" href=\"#p-10036-specific-raw-code-language-transform-example-3\"></a>Specific raw code-language transform example</h2>\n<p>This will only affect code/raw blocks of a specific language, in this example “hex”.</p>\n<pre><code class=\"lang-auto\">  #show raw.where(lang: \"hex\"): r =&gt; {\n    set text(size: 20pt, purple)\n    show \"println!\": set text(green)\n    r\n  }\n    \n    ```hex\n      fn main() {\n        println!(\"Hello World!\");\n      }\n    ```\n</code></pre>\n<h2><a name=\"p-10036-a-function-4\" class=\"anchor\" href=\"#p-10036-a-function-4\"></a>A function</h2>\n<p>Missing some lines endings but can be useful for an alternative to <code>in-line-raw text</code> perhaps.</p>\n<pre><code class=\"lang-auto\">#let textCode = (content) =&gt; text(font: \"Inconsolata\", content)\n\n#textCode([\nfn main() {\\\n  println!(\"Hello World!\");\\\n}]\n)\n</code></pre>",
      "raw": "Hi there :slight_smile:,  I'm no expert but based on [this Github post](https://github.com/typst/typst/discussions/3057) I were able to make some examples that hopefully can help you. \nAlso check out the post itself perhaps, it might explain some of it better than I can. \n\n*also it's a little cumbersome to make \"raw code examples\" in a reply on this forum because of it already using that formatting :smiley:, so that's to explain to extra tabs / spaces in the examples.*\n\n## Isolated raw text example\n*For a singular code block*\n```\n#[\n  #show raw: set text(size: 20pt)\n    ```rust\n    fn main() {\n      println!(\"Hello World!\");\n    }\n    ```\n]\n```\n\n## All raw text transform example\nfor all `raw` code in the document/page below this\n\n**This should be the code you need for your question specifically. And you can just have this code in main file or similar as you please**\n```\n    #show raw: r => {\n      set text(size: 15pt, purple)\n      r\n    }\n    ```\n      fn main() {\n        println!(\"Hello World!\");\n      }\n    ```\n```\n\n## Specific raw code-language transform example\nThis will only affect code/raw blocks of a specific language, in this example \"hex\". \n```\n  #show raw.where(lang: \"hex\"): r => {\n    set text(size: 20pt, purple)\n    show \"println!\": set text(green)\n    r\n  }\n    \n    ```hex\n      fn main() {\n        println!(\"Hello World!\");\n      }\n    ```\n```\n\n## A function\nMissing some lines endings but can be useful for an alternative to `in-line-raw text` perhaps. \n\n```\n#let textCode = (content) => text(font: \"Inconsolata\", content)\n\n#textCode([\nfn main() {\\\n  println!(\"Hello World!\");\\\n}]\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 3,
      "reads": 61,
      "score": 172.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1372
    },
    {
      "id": 10049,
      "post_number": 3,
      "username": "ssotoen",
      "name": "",
      "created_at": "2025-03-20T17:56:28.951Z",
      "updated_at": "2025-03-20T17:56:28.951Z",
      "cooked": "<p>Or much simpler:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw: set text(20pt)\n</code></pre>",
      "raw": "Or much simpler:\n\n```typ\n#show raw: set text(20pt)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 6,
      "reads": 52,
      "score": 100.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 331
    },
    {
      "id": 10059,
      "post_number": 4,
      "username": "Tobias_Andersson_Gid",
      "name": "Tobias Andersson Gidlund",
      "created_at": "2025-03-21T07:42:24.208Z",
      "updated_at": "2025-03-21T07:42:24.208Z",
      "cooked": "<p>Thanks a lot, that answered a few of the questions I had on several things concerning the raw text – I will be using some of your ideas now and test them out.</p>\n<p>Much appreciated!</p>",
      "raw": "Thanks a lot, that answered a few of the questions I had on several things concerning the raw text -- I will be using some of your ideas now and test them out.\n\nMuch appreciated!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 10.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 706
    },
    {
      "id": 10102,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-21T21:08:44.614Z",
      "updated_at": "2025-03-21T21:08:44.614Z",
      "cooked": "<p>Here are some pro-tips.</p>\n<p>You probably noticed that your code highlighting doesn’t look right, this is because you need to add <code>typ</code> language (or <code>typc</code> for code/<code>typm</code> for math). I believe it is shown the first time a user writes a post/comment.</p>\n<pre data-code-wrap=\"md\"><code class=\"lang-md\">```typ\nYour Typst example.\n```\n</code></pre>\n<p>To write a code block in Typst and show it in a code snippet on the forum, just use a greater amount of backticks, i.e.:</p>\n<pre data-code-wrap=\"md\"><code class=\"lang-md\">````typ\nCode block:\n\n```py\nprint()\n```\n````\n</code></pre>\n<p>It looks like using just a different amount of backticks doesn’t work, since you can’t use 4 backticks wrapped in 3 backticks. (To write the example above, I used 5 backticks to wrap the code snippet in a code block.)</p>\n<p>For any show-set rules you don’t have to wrap inner set rule in a closure, like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw: r =&gt; {\n  set text(size: 15pt, purple)\n  r\n}\n</code></pre>\n<p>If you see this pattern, then simply drop the closure part:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw: set text(size: 15pt, purple)\n// Or a more narrow selector:\n#show raw.where(block: true): set text(size: 15pt, purple)\n</code></pre>\n<p>Since <code>text.size</code> is a bit special, you can drop the <code>size: </code> part as well, if you like it more this way:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw: set text(15pt, purple)\n</code></pre>\n<p>There is already an inline raw function, but if you need to use it on context:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let my-raw = text.with(font: \"Fira Code\") // Monospaced font\n#my-raw[content]\n#my-raw(\"or string\")\n#raw(\"string-only\")\n</code></pre>\n<p>Note that line spacing and font size settings (and some others) will be different between <code>my-raw</code> and <code>raw</code>.</p>\n<p>I hope you will use this tips in your future posts to make them even better! :)</p>\n<p>You can even try using some of them to improve <a href=\"https://forum.typst.app/t/how-do-i-change-the-size-of-raw-text/3348/2\">your post</a>.</p>\n<p><a class=\"mention\" href=\"/u/tobias_andersson_gid\">@Tobias_Andersson_Gid</a>, I’m sure you will find these useful too.</p>",
      "raw": "Here are some pro-tips.\n\nYou probably noticed that your code highlighting doesn't look right, this is because you need to add `typ` language (or `typc` for code/`typm` for math). I believe it is shown the first time a user writes a post/comment.\n\n````md\n```typ\nYour Typst example.\n```\n````\n\nTo write a code block in Typst and show it in a code snippet on the forum, just use a greater amount of backticks, i.e.:\n\n`````md\n````typ\nCode block:\n\n```py\nprint()\n```\n````\n`````\n\nIt looks like using just a different amount of backticks doesn't work, since you can't use 4 backticks wrapped in 3 backticks. (To write the example above, I used 5 backticks to wrap the code snippet in a code block.)\n\nFor any show-set rules you don't have to wrap inner set rule in a closure, like\n\n```typ\n#show raw: r => {\n  set text(size: 15pt, purple)\n  r\n}\n```\n\nIf you see this pattern, then simply drop the closure part:\n\n```typ\n#show raw: set text(size: 15pt, purple)\n// Or a more narrow selector:\n#show raw.where(block: true): set text(size: 15pt, purple)\n```\n\nSince `text.size` is a bit special, you can drop the `size: ` part as well, if you like it more this way:\n\n```typ\n#show raw: set text(15pt, purple)\n```\n\nThere is already an inline raw function, but if you need to use it on context:\n\n```typ\n#let my-raw = text.with(font: \"Fira Code\") // Monospaced font\n#my-raw[content]\n#my-raw(\"or string\")\n#raw(\"string-only\")\n```\n\nNote that line spacing and font size settings (and some others) will be different between `my-raw` and `raw`.\n\nI hope you will use this tips in your future posts to make them even better! :)\n\nYou can even try using some of them to improve [your post](https://forum.typst.app/t/how-do-i-change-the-size-of-raw-text/3348/2?u=andrew).\n\n@Tobias_Andersson_Gid, I'm sure you will find these useful too.",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 2,
      "reads": 50,
      "score": 90.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10177,
      "post_number": 6,
      "username": "Tobias_Andersson_Gid",
      "name": "Tobias Andersson Gidlund",
      "created_at": "2025-03-24T07:33:10.852Z",
      "updated_at": "2025-03-24T07:33:10.852Z",
      "cooked": "<p>Yes, thanks a lot! I now have a lot more to work with and a lot of more ideas from all of you. Thanks a lot for all help!</p>",
      "raw": "Yes, thanks a lot! I now have a lot more to work with and a lot of more ideas from all of you. Thanks a lot for all help!",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 22.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 706
    },
    {
      "id": 10178,
      "post_number": 7,
      "username": "Tobias_Andersson_Gid",
      "name": "Tobias Andersson Gidlund",
      "created_at": "2025-03-24T07:56:20.202Z",
      "updated_at": "2025-03-24T07:56:20.202Z",
      "cooked": "<p>Again, thanks a lot for all the help! I have looked more deeply into it now, but I think I might need some more help <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>I currently have the following function that I use for displaying code:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let code(\n  code,\n  lang: \"py\",\n  sz: 19pt\n) = {\n  set par(\n    leading: 0.65em\n  )\n  set text(\n    size: sz\n  )\n  box(\n    fill: rgb(\"#ededed\"),\n    inset: 8pt,\n    width: 1fr,\n    radius: 5pt,\n    stroke: 1pt,\n    raw(code, lang: lang)\n  )\n}\n</code></pre>\n<p>And the problem, as you might see, is that if I have code with \" in it, it will break the call to the function. I have currently mostly used Python, where it does not really matter as I can use ’ instead, but for many other languages, I would need something else. It is not a viable idea to keep escaping the quotation marks, so maybe I am basically asking if there is a way to send the data “as-is” to the function, rather than as a string?</p>",
      "raw": "Again, thanks a lot for all the help! I have looked more deeply into it now, but I think I might need some more help :slight_smile: \n\nI currently have the following function that I use for displaying code:\n\n```typst\n#let code(\n  code,\n  lang: \"py\",\n  sz: 19pt\n) = {\n  set par(\n    leading: 0.65em\n  )\n  set text(\n    size: sz\n  )\n  box(\n    fill: rgb(\"#ededed\"),\n    inset: 8pt,\n    width: 1fr,\n    radius: 5pt,\n    stroke: 1pt,\n    raw(code, lang: lang)\n  )\n}\n```\n\nAnd the problem, as you might see, is that if I have code with \" in it, it will break the call to the function. I have currently mostly used Python, where it does not really matter as I can use ' instead, but for many other languages, I would need something else. It is not a viable idea to keep escaping the quotation marks, so maybe I am basically asking if there is a way to send the data \"as-is\" to the function, rather than as a string?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 22.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 706
    },
    {
      "id": 10179,
      "post_number": 8,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-24T08:08:53.939Z",
      "updated_at": "2025-03-24T08:12:51.159Z",
      "cooked": "<p>There are two definitions for “as-is”: insert the code in the Typst file or read the code directly from the source code file.</p>\n<p>Here is the solution for inserting the code into the Typst file:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw.where(block: true): it =&gt; {\n  set par(leading: 0.65em)\n  set text(size: 19pt)\n  box(\n    fill: rgb(\"#ededed\"),\n    inset: 8pt,\n    width: 1fr,\n    radius: 5pt,\n    stroke: 1pt,\n    it,\n  )\n}\n\n```py\na = 5\nb = \"a\"\nprint(a, b)\n```\n</code></pre>\n<p>And here is the solution for reading the code from a file:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let code(path, lang: \"py\", sz: 19pt) = {\n  show raw: set par(leading: 0.65em)\n  show raw: set text(size: sz)\n  box(\n    fill: rgb(\"#ededed\"),\n    inset: 8pt,\n    width: 1fr,\n    radius: 5pt,\n    stroke: 1pt,\n    raw(read(path), lang: path.split(\".\").last()),\n  )\n}\n\n#code(\"file.py\")\n</code></pre>\n<p>In both cases, the output will be this:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/6/6c13e3f9b34b78fbba833f7ebc2e068265fbec1b.png\" alt=\"image\" data-base62-sha1=\"fq6bhSoA4ICxWPqdeAVJ9trKdDl\" width=\"581\" height=\"134\"></p>\n<p>You can also check out <a href=\"https://typst.app/universe/package/showybox\">Showybox</a> and <a href=\"https://typst.app/universe/package/codly\">Codly</a> if you want to have a more advanced styling without reinventing the wheel.</p>\n<p>When including the actual source code I always use <code>read()</code>, but if it’s some small demo, then inlining might be better.</p>",
      "raw": "There are two definitions for \"as-is\": insert the code in the Typst file or read the code directly from the source code file.\n\nHere is the solution for inserting the code into the Typst file:\n\n````typ\n#show raw.where(block: true): it => {\n  set par(leading: 0.65em)\n  set text(size: 19pt)\n  box(\n    fill: rgb(\"#ededed\"),\n    inset: 8pt,\n    width: 1fr,\n    radius: 5pt,\n    stroke: 1pt,\n    it,\n  )\n}\n\n```py\na = 5\nb = \"a\"\nprint(a, b)\n```\n````\n\nAnd here is the solution for reading the code from a file:\n\n```typ\n#let code(path, lang: \"py\", sz: 19pt) = {\n  show raw: set par(leading: 0.65em)\n  show raw: set text(size: sz)\n  box(\n    fill: rgb(\"#ededed\"),\n    inset: 8pt,\n    width: 1fr,\n    radius: 5pt,\n    stroke: 1pt,\n    raw(read(path), lang: path.split(\".\").last()),\n  )\n}\n\n#code(\"file.py\")\n```\n\nIn both cases, the output will be this:\n\n![image|581x134](upload://fq6bhSoA4ICxWPqdeAVJ9trKdDl.png)\n\nYou can also check out [Showybox](https://typst.app/universe/package/showybox) and [Codly](https://typst.app/universe/package/codly) if you want to have a more advanced styling without reinventing the wheel.\n\nWhen including the actual source code I always use `read()`, but if it's some small demo, then inlining might be better.",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 37,
      "score": 42.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10226,
      "post_number": 9,
      "username": "Birckk",
      "name": "Tobias Olrik Birck Kristensen",
      "created_at": "2025-03-25T14:33:00.421Z",
      "updated_at": "2025-03-25T14:33:00.421Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"5\" data-topic=\"3348\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>You can even try using some of them to improve <a href=\"https://forum.typst.app/t/how-do-i-change-the-size-of-raw-text/3348/2\">your post</a>.</p>\n</blockquote>\n</aside>\n<p>I can’t seem to edit the post anymore, to improve it, not sure why. but thanks for the hints and tips, it’s really appreciated. Didn’t spot it during readthrough of the guidelines, that’s my slip-up.</p>",
      "raw": "[quote=\"Andrew, post:5, topic:3348\"]\nYou can even try using some of them to improve [your post](https://forum.typst.app/t/how-do-i-change-the-size-of-raw-text/3348/2).\n[/quote]\n\nI can't seem to edit the post anymore, to improve it, not sure why. but thanks for the hints and tips, it's really appreciated. Didn't spot it during readthrough of the guidelines, that's my slip-up.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 30,
      "score": 26.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1372
    },
    {
      "id": 10228,
      "post_number": 10,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-25T15:38:13.757Z",
      "updated_at": "2025-03-25T15:38:13.757Z",
      "cooked": "<p>Yeah, I think there is a somewhat short period for when you can edit your post. Though usually it’s long enough.</p>",
      "raw": "Yeah, I think there is a somewhat short period for when you can edit your post. Though usually it's long enough.",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 5.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10257,
      "post_number": 11,
      "username": "Tobias_Andersson_Gid",
      "name": "Tobias Andersson Gidlund",
      "created_at": "2025-03-26T07:18:09.372Z",
      "updated_at": "2025-03-26T07:18:09.372Z",
      "cooked": "<p>Thanks for some great input and explanations! I do understand it a bit more now, and your suggestions are solid. However, I really do want to have it as a function so that I can control the language and the size of the source code (as well as being easier to just copy-and-paste from the editor to typst). I will have a look at codly and others as well, but previously, they have not been able to help me all the way.</p>\n<p>But thanks a lot for all the patience and the really good explaining!</p>",
      "raw": "Thanks for some great input and explanations! I do understand it a bit more now, and your suggestions are solid. However, I really do want to have it as a function so that I can control the language and the size of the source code (as well as being easier to just copy-and-paste from the editor to typst). I will have a look at codly and others as well, but previously, they have not been able to help me all the way.\n\nBut thanks a lot for all the patience and the really good explaining!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 25.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 706
    },
    {
      "id": 10258,
      "post_number": 12,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-26T09:56:31.976Z",
      "updated_at": "2025-03-27T12:32:30.336Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Tobias_Andersson_Gid\" data-post=\"11\" data-topic=\"3348\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/t/BF4705/48.png\" class=\"avatar\"> Tobias_Andersson_Gid:</div>\n<blockquote>\n<p>However, I really do want to have it as a function so that I can control the language and the size of the source code (as well as being easier to just copy-and-paste from the editor to typst)</p>\n</blockquote>\n</aside>\n<p>Here is a conventional-ish way, if you want to pass the code verbatim to the function:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/codly:1.2.0\": *\n#import \"@preview/codly-languages:0.1.8\": *\n\n#let code(body, sz: 19pt) = {\n  show: codly-init\n  codly(stroke: 1pt + black, languages: codly-languages)\n  show raw: set par(leading: 0.65em)\n  show raw: set text(size: sz)\n  body\n}\n\n#code(```py\na = 5\nb = \"a\"\nprint(a, b)\n```)\n</code></pre>\n<p>Or if you really want to set the language as a separate argument:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/codly:1.2.0\": *\n#import \"@preview/codly-languages:0.1.8\": *\n\n#let code(body, sz: 19pt, ..args) = {\n  show: codly-init\n  codly(stroke: 1pt + black, languages: codly-languages)\n  show raw: set par(leading: 0.65em)\n  show raw: set text(size: sz)\n  raw(body.text, block: true, ..args)\n}\n\n#code(lang: \"py\", ```\na = 5\nb = \"a\"\nprint(a, b)\n```)\n</code></pre>",
      "raw": "[quote=\"Tobias_Andersson_Gid, post:11, topic:3348\"]\nHowever, I really do want to have it as a function so that I can control the language and the size of the source code (as well as being easier to just copy-and-paste from the editor to typst)\n[/quote]\n\nHere is a conventional-ish way, if you want to pass the code verbatim to the function:\n\n````typ\n#import \"@preview/codly:1.2.0\": *\n#import \"@preview/codly-languages:0.1.8\": *\n\n#let code(body, sz: 19pt) = {\n  show: codly-init\n  codly(stroke: 1pt + black, languages: codly-languages)\n  show raw: set par(leading: 0.65em)\n  show raw: set text(size: sz)\n  body\n}\n\n#code(```py\na = 5\nb = \"a\"\nprint(a, b)\n```)\n````\n\nOr if you really want to set the language as a separate argument:\n\n````typ\n#import \"@preview/codly:1.2.0\": *\n#import \"@preview/codly-languages:0.1.8\": *\n\n#let code(body, sz: 19pt, ..args) = {\n  show: codly-init\n  codly(stroke: 1pt + black, languages: codly-languages)\n  show raw: set par(leading: 0.65em)\n  show raw: set text(size: sz)\n  raw(body.text, block: true, ..args)\n}\n\n#code(lang: \"py\", ```\na = 5\nb = \"a\"\nprint(a, b)\n```)\n````",
      "reply_to_post_number": 11,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 29,
      "score": 45.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10314,
      "post_number": 13,
      "username": "Tobias_Andersson_Gid",
      "name": "Tobias Andersson Gidlund",
      "created_at": "2025-03-27T10:37:27.096Z",
      "updated_at": "2025-03-27T10:37:27.096Z",
      "cooked": "<p>That was exactly what I was looking for! Thanks a million!</p>",
      "raw": "That was exactly what I was looking for! Thanks a million!",
      "reply_to_post_number": 12,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 706
    }
  ],
  "scraped_at": "2025-06-10T09:50:09.889993"
}
{
  "topic_metadata": {
    "id": 3349,
    "title": "How to customize citations, to be (author, year) instead of [number]?",
    "slug": "how-to-customize-citations-to-be-author-year-instead-of-number",
    "posts_count": 4,
    "created_at": "2025-03-20T14:25:27.139Z",
    "last_posted_at": "2025-06-05T07:51:16.021Z",
    "views": 95,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Adrian_Weitkemper",
    "tags": [
      "citation",
      "referencing",
      "bibtex"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 251
  },
  "posts": [
    {
      "id": 10037,
      "post_number": 1,
      "username": "Moritz_Lerch",
      "name": "Moritz Lerch",
      "created_at": "2025-03-20T14:25:27.249Z",
      "updated_at": "2025-03-20T14:25:27.249Z",
      "cooked": "<p>Hi,<br>\nIn science/astronomy, it is more common to give citations styled “(Einstein 1905)” instead of “[1]”. Is there a possibility to customize citations in such a way, that the bracket includes the author and year in any sort? ([Einstein 1905], [E. 1905], (Einstein, 1905), Einstein (1905), …)<br>\nIdeally, the reference should still be taken from a .bib file.<br>\nThanks in advance!</p>",
      "raw": "Hi, \nIn science/astronomy, it is more common to give citations styled \"(Einstein 1905)\" instead of \"[1]\". Is there a possibility to customize citations in such a way, that the bracket includes the author and year in any sort? ([Einstein 1905], [E. 1905], (Einstein, 1905), Einstein (1905), ...)\nIdeally, the reference should still be taken from a .bib file.\nThanks in advance!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 196.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1362
    },
    {
      "id": 10038,
      "post_number": 2,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-20T14:29:36.700Z",
      "updated_at": "2025-03-20T14:32:42.742Z",
      "cooked": "<p>Hi there!<br>\nYou can set the <a href=\"https://typst.app/docs/reference/model/bibliography/#styles\">citation style</a><br>\nI think in your case it would be \" <code>apa</code>\", which would result in (Einstein, 1905), so</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#bibliography(\"works.bib\", style: \"apa\")\n</code></pre>\n<p>This code also changes the citation style in the bibliography. If you don’t want that, you can also do</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set cite(style: \"apa\")\n</code></pre>\n<p>in the beginning of your document.<br>\nIf there are any questions left, don’t hesitate to ask again <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hi there!\nYou can set the [citation style](https://typst.app/docs/reference/model/bibliography/#styles)\nI think in your case it would be \" `apa`\", which would result in (Einstein, 1905), so\n```typst\n#bibliography(\"works.bib\", style: \"apa\")\n```\nThis code also changes the citation style in the bibliography. If you don't want that, you can also do \n```typst\n#set cite(style: \"apa\")\n```\nin the beginning of your document. \nIf there are any questions left, don't hesitate to ask again :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 32,
      "score": 41.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 13734,
      "post_number": 3,
      "username": "fabien_sanglard",
      "name": "fabien sanglard",
      "created_at": "2025-06-05T04:13:57.937Z",
      "updated_at": "2025-06-05T04:13:57.937Z",
      "cooked": "<p>Is there a way to customize the citation style without using a predefined style? Let’s say I want the <code>[1]</code> to be put in bold or superscript it?</p>",
      "raw": "Is there a way to customize the citation style without using a predefined style? Let's say I want the `[1]` to be put in bold or superscript it?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 13,
      "score": 7.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1707
    },
    {
      "id": 13741,
      "post_number": 4,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-06-05T07:51:16.021Z",
      "updated_at": "2025-06-05T08:00:35.738Z",
      "cooked": "<p>You can use <a href=\"https://typst.app/docs/reference/styling#show-rules\">show rules</a> for that:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// for bold citation\n#show cite: it =&gt; [\n  *#it*\n]\n// for superscript citation\n#show cite: it =&gt; [\n  #super[#it]\n]\n</code></pre>\n<p>If there are any questions left, don’t hesitate to ask again <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nPS: It might have been useful to open a new question for this, because it is not closely related. Also, it is already marked as solved, so it’s less likely your question gets answered (quickly).</p>",
      "raw": "You can use [show rules](https://typst.app/docs/reference/styling#show-rules) for that: \n```\n// for bold citation\n#show cite: it => [\n  *#it*\n]\n// for superscript citation\n#show cite: it => [\n  #super[#it]\n]\n```\nIf there are any questions left, don’t hesitate to ask again :slight_smile:\nPS: It might have been useful to open a new question for this, because it is not closely related. Also, it is already marked as solved, so it's less likely your question gets answered (quickly).",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 12,
      "score": 2.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    }
  ],
  "scraped_at": "2025-06-10T09:50:09.097519"
}
{
  "topic_metadata": {
    "id": 3350,
    "title": "How do I create a show rule for Lilaq to display a plus (+) sign before the tick labels when they are positive",
    "slug": "how-do-i-create-a-show-rule-for-lilaq-to-display-a-plus-sign-before-the-tick-labels-when-they-are-positive",
    "posts_count": 11,
    "created_at": "2025-03-20T14:48:14.512Z",
    "last_posted_at": "2025-03-21T09:21:46.319Z",
    "views": 136,
    "like_count": 5,
    "reply_count": 7,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "Mc-Zen",
    "tags": [
      "scripting",
      "lilaq"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 1131
  },
  "posts": [
    {
      "id": 10040,
      "post_number": 1,
      "username": "vmartel08",
      "name": "Vincent Martel",
      "created_at": "2025-03-20T14:48:14.699Z",
      "updated_at": "2025-03-20T14:48:14.699Z",
      "cooked": "<p>Greetings,</p>\n<p>First of all, thank you very much <a class=\"mention\" href=\"/u/mc-zen\">@Mc-Zen</a> for the Typst <a href=\"https://lilaq.org/\" rel=\"noopener nofollow ugc\">Lilaq package</a>. This will save me hours of work.</p>\n<p>I have been trying to create plots with an axis displaying a plus (+) sign next to the positive label values.</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/6/62e45e4f89ab9b012e2efb0978579135ffddbf21.png\" alt=\"image\" data-base62-sha1=\"e6Q4hNEyXPoRoRgAduCPKCiQ4hP\" width=\"86\" height=\"367\"></p>\n<p>The code below simulates that but it is clear to me that a show rule would be a much simpler approach. This was created to generate the screenshot below, which is what I would like to achieve.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/lilaq:0.1.0\" as lq\n\n#let myaxis= (\"+1\", \"0\", \"-1\")\n\n#lq.diagram(\n  yaxis: (ticks: myaxis.enumerate(start:1) ),\n  // Random values to display - result won't make sense\n  lq.plot((1,3),(3,1))\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/8/843e694f0c5b109f80f9673b440d5116b6f845f9.png\" alt=\"image\" data-base62-sha1=\"iRSJZA2ZakuQi7aaf7VvQAS2OVj\" width=\"425\" height=\"298\"></p>\n<p>After consulting the documentation, I can see that the answer is probably related to one of the following:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show lq.selector(lq.tick-label): ...\n\n// or\n\n#show: lq.set-tick-label() ...\n</code></pre>\n<p>The Lilaq documentation is great and filled with useful information and examples, but the section on <a href=\"https://lilaq.org/docs/tutorials/ticks\" rel=\"noopener nofollow ugc\">ticks</a> is not completed yet <img src=\"https://forum.typst.app/images/emoji/apple/face_with_hand_over_mouth.png?v=12\" title=\":face_with_hand_over_mouth:\" class=\"emoji\" alt=\":face_with_hand_over_mouth:\" loading=\"lazy\" width=\"20\" height=\"20\">. Any help would be much appreciated. Cheers and thank you in advance.</p>",
      "raw": "Greetings, \n\nFirst of all, thank you very much @Mc-Zen for the Typst [Lilaq package](https://lilaq.org/). This will save me hours of work. \n\nI have been trying to create plots with an axis displaying a plus (+) sign next to the positive label values. \n\n![image|86x367](upload://e6Q4hNEyXPoRoRgAduCPKCiQ4hP.png)\n\n\nThe code below simulates that but it is clear to me that a show rule would be a much simpler approach. This was created to generate the screenshot below, which is what I would like to achieve.\n\n```typ\n#import \"@preview/lilaq:0.1.0\" as lq\n\n#let myaxis= (\"+1\", \"0\", \"-1\")\n\n#lq.diagram(\n  yaxis: (ticks: myaxis.enumerate(start:1) ),\n  // Random values to display - result won't make sense\n  lq.plot((1,3),(3,1))\n)\n```\n\n![image|425x298](upload://iRSJZA2ZakuQi7aaf7VvQAS2OVj.png)\n\n\nAfter consulting the documentation, I can see that the answer is probably related to one of the following:\n\n```typ\n#show lq.selector(lq.tick-label): ...\n\n// or\n\n#show: lq.set-tick-label() ...\n```\n\nThe Lilaq documentation is great and filled with useful information and examples, but the section on [ticks](https://lilaq.org/docs/tutorials/ticks) is not completed yet :face_with_hand_over_mouth:. Any help would be much appreciated. Cheers and thank you in advance.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 129.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 936
    },
    {
      "id": 10043,
      "post_number": 2,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-20T16:01:29.089Z",
      "updated_at": "2025-03-21T08:41:46.040Z",
      "cooked": "<p>Hi there!<br>\nmy solution is rather complicated. Maybe there is a better way to do it, but I’m not aware of it. The problem is that I have to work with the “it” which is of the type content, so I <a href=\"https://github.com/typst/typst/discussions/3876\" rel=\"noopener nofollow ugc\">convert it into a string</a> first and after that try to convert it into a number to check if it is greater that 0. So here’s the code:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/lilaq:0.1.0\" as lq\n#let to-string(content) = {\n  if content.has(\"text\") {\n    if type(content.text) == str {\n      content.text\n    } else {\n      to-string(content.text)\n    }\n  } else if content.has(\"children\") {\n    content.children.map(to-string).join(\"\")\n  } else if content.has(\"body\") {\n    to-string(content.body)\n  } else if content == [ ] {\n    \" \"\n  }\n}\n\n#let myaxis= (\"1\", \"0\", \"-1\")\n#show lq.selector(lq.tick-label): it =&gt; {\n  let str_int = to-string(it)\n  if (str_int != \"\" and str_int.matches(regex(\"^-?\\d+(\\.\\d+)?$\")).len() &gt; 0 and float(str_int) &gt; 0) {\n    [+]\n  }\n  it\n}\n\n#lq.diagram(\n  yaxis: (ticks: myaxis.enumerate(start:1) ),\n  // Random values to display - result won't make sense\n  lq.plot((1,3),(3,1))\n)\n</code></pre>\n<p>If you have any questions left don’t hesitate to ask again <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hi there!\nmy solution is rather complicated. Maybe there is a better way to do it, but I'm not aware of it. The problem is that I have to work with the \"it\" which is of the type content, so I [convert it into a string](https://github.com/typst/typst/discussions/3876) first and after that try to convert it into a number to check if it is greater that 0. So here's the code: \n```typst\n#import \"@preview/lilaq:0.1.0\" as lq\n#let to-string(content) = {\n  if content.has(\"text\") {\n    if type(content.text) == str {\n      content.text\n    } else {\n      to-string(content.text)\n    }\n  } else if content.has(\"children\") {\n    content.children.map(to-string).join(\"\")\n  } else if content.has(\"body\") {\n    to-string(content.body)\n  } else if content == [ ] {\n    \" \"\n  }\n}\n\n#let myaxis= (\"1\", \"0\", \"-1\")\n#show lq.selector(lq.tick-label): it => {\n  let str_int = to-string(it)\n  if (str_int != \"\" and str_int.matches(regex(\"^-?\\d+(\\.\\d+)?$\")).len() > 0 and float(str_int) > 0) {\n    [+]\n  }\n  it\n}\n\n#lq.diagram(\n  yaxis: (ticks: myaxis.enumerate(start:1) ),\n  // Random values to display - result won't make sense\n  lq.plot((1,3),(3,1))\n)\n```\nIf you have any questions left don't hesitate to ask again :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 14.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 10044,
      "post_number": 3,
      "username": "vmartel08",
      "name": "Vincent Martel",
      "created_at": "2025-03-20T16:11:33.973Z",
      "updated_at": "2025-03-20T16:12:26.090Z",
      "cooked": "<p>Thanks for that!</p>\n<p>I will look into it. Just to be clear, the following is what I would end up writing:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/lilaq:0.1.0\" as lq\n\n#lq.diagram(\n  lq.plot((-1,3),(-3,1))\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/6/675657e19c2d4c05f3933d9c5031e816c21f3be1.png\" alt=\"image\" data-base62-sha1=\"eKaatZP8DFaLWkYGx5xquni9KYF\" width=\"392\" height=\"270\"><br>\nWe can see that the plus (+) signs are missing on this example. I would not use the quotes to pass custom axes labels to the plot. It was only to be able to generate the screenshot of the desired result.</p>\n<p>And I would like the plus (+) showing on the axes (at least one of them) when the label is positive. I will try to implement your solution into my project and let you know. Thank you again for your time.</p>",
      "raw": "Thanks for that!\n\nI will look into it. Just to be clear, the following is what I would end up writing:\n```typ\n#import \"@preview/lilaq:0.1.0\" as lq\n\n#lq.diagram(\n  lq.plot((-1,3),(-3,1))\n)\n```\n![image|392x270](upload://eKaatZP8DFaLWkYGx5xquni9KYF.png)\nWe can see that the plus (+) signs are missing on this example. I would not use the quotes to pass custom axes labels to the plot. It was only to be able to generate the screenshot of the desired result.\n\nAnd I would like the plus (+) showing on the axes (at least one of them) when the label is positive. I will try to implement your solution into my project and let you know. Thank you again for your time.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 13.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 936
    },
    {
      "id": 10046,
      "post_number": 4,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-20T16:56:21.238Z",
      "updated_at": "2025-03-20T17:42:24.356Z",
      "cooked": "<p>Oh, dam. Turns out it doesn’t work without the “myaxis” <img src=\"https://forum.typst.app/images/emoji/apple/slightly_frowning_face.png?v=12\" title=\":slightly_frowning_face:\" class=\"emoji\" alt=\":slightly_frowning_face:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nSo using “[<span class=\"hashtag-raw\">#it</span>.children.at(0)]” inside the show rule actually displays all the numbers correctly, but it still has the type content. Oddly enough, “[<span class=\"hashtag-raw\">#it</span>.children.at(0).fields()]” displays an empty dictionary (:)<br>\nBecause the dictionary is empty, the to-string function I implemented just returns an empty string.<br>\nSo at this point I don’t really know how to continue. The content has text in it, but I have no idea where to find it…</p>",
      "raw": "Oh, dam. Turns out it doesn't work without the \"myaxis\" :slightly_frowning_face: \nSo using \"[#it.children.at(0)]\" inside the show rule actually displays all the numbers correctly, but it still has the type content. Oddly enough, \"[#it.children.at(0).fields()]\" displays an empty dictionary (:) \nBecause the dictionary is empty, the to-string function I implemented just returns an empty string. \nSo at this point I don't really know how to continue. The content has text in it, but I have no idea where to find it...",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 10047,
      "post_number": 5,
      "username": "vmartel08",
      "name": "Vincent Martel",
      "created_at": "2025-03-20T17:52:51.087Z",
      "updated_at": "2025-03-20T17:52:51.087Z",
      "cooked": "<p>Yes me too! I was actually surprised your solution worked because I was trying to access the value in the same way in my show rule. As soon as I deleted the line with the hard coded axis values, your solution stopped working <img src=\"https://forum.typst.app/images/emoji/apple/frowning.png?v=12\" title=\":frowning:\" class=\"emoji\" alt=\":frowning:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Perhaps the values are left to empty or none when the axis labels are simply calculated from the plot…</p>",
      "raw": "Yes me too! I was actually surprised your solution worked because I was trying to access the value in the same way in my show rule. As soon as I deleted the line with the hard coded axis values, your solution stopped working :frowning: \n\nPerhaps the values are left to empty or none when the axis labels are simply calculated from the plot…",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 936
    },
    {
      "id": 10048,
      "post_number": 6,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-20T17:55:55.300Z",
      "updated_at": "2025-03-20T17:55:55.300Z",
      "cooked": "<blockquote>\n<p>Perhaps the values are left to empty or none when the axis labels are simply calculated from the plot…</p>\n</blockquote>\n<p>The thing I don’t understand is that [<span class=\"hashtag-raw\">#it</span>.children.at(0)] still displays the numbers. When I comment the line out, the numbers disappear. So they (in my opinion) have to be in there somewhere <img src=\"https://forum.typst.app/images/emoji/apple/eyes.png?v=12\" title=\":eyes:\" class=\"emoji\" alt=\":eyes:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "> Perhaps the values are left to empty or none when the axis labels are simply calculated from the plot…\n\nThe thing I don't understand is that [#it.children.at(0)] still displays the numbers. When I comment the line out, the numbers disappear. So they (in my opinion) have to be in there somewhere :eyes:",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 13.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 10052,
      "post_number": 7,
      "username": "vmartel08",
      "name": "Vincent Martel",
      "created_at": "2025-03-20T18:57:20.971Z",
      "updated_at": "2025-03-20T19:11:20.965Z",
      "cooked": "<p>From the doc:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">lq.tick(value, label=none, sub=false, stroke=auto, shorten-sub=0.5, align=right, pad=0.5em, inset=4pt, outset=0pt)\n</code></pre>\n<p>I haven’t gone deep into the Lilaq code (its all wrapped around by <strong>elembic</strong>).</p>\n<p>Perhaps <a class=\"mention\" href=\"/u/mc-zen\">@Mc-Zen</a> will be able to point us in the right direction.</p>\n<p>Thanks for your help <a class=\"mention\" href=\"/u/adrian_weitkemper\">@Adrian_Weitkemper</a> <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Edit:</p>\n<p>From the Lilaq doc:</p>\n<blockquote>\n<p>Axes use the Typst package <a href=\"https://typst.app/universe/package/zero\">Zero</a> for formatting numbers in a consistent way throughout a document.</p>\n</blockquote>\n<p>From Zero doc:</p>\n<pre><code class=\"lang-auto\">positive-sign:          bool = false,\n</code></pre>",
      "raw": "From the doc:\n\n```typ\nlq.tick(value, label=none, sub=false, stroke=auto, shorten-sub=0.5, align=right, pad=0.5em, inset=4pt, outset=0pt)\n```\n\nI haven't gone deep into the Lilaq code (its all wrapped around by **elembic**).\n\nPerhaps @Mc-Zen will be able to point us in the right direction. \n\nThanks for your help @Adrian_Weitkemper :slight_smile:\n\n\nEdit: \n\nFrom the Lilaq doc:\n\n> Axes use the Typst package [Zero](https://typst.app/universe/package/zero) for formatting numbers in a consistent way throughout a document.\n\nFrom Zero doc:\n\n```\npositive-sign:          bool = false,\n```",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 44,
      "score": 28.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 936
    },
    {
      "id": 10067,
      "post_number": 8,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-03-21T08:44:24.626Z",
      "updated_at": "2025-03-21T08:47:43.822Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/vmartel08\">@vmartel08</a> ,</p>\n<p>This is actually very easy to achieve through the interaction with <a href=\"https://typst.app/universe/package/zero\">zero – Typst Universe</a>, as you already suspected. All numbers in Lilaq are run through a tick <em>formatter</em> and the default tick formatter passes the values through <code>zero.num</code>.</p>\n<p>You can manipulate the appearance through settings like:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#zero.set-num(positive-sign: true)\n</code></pre>\n<p>Put this at the start of the document, or at least in front of the <code>lq.diagram()</code>. This should already do the trick.</p>",
      "raw": "Hi @vmartel08 ,\n\nThis is actually very easy to achieve through the interaction with [zero – Typst Universe](https://typst.app/universe/package/zero), as you already suspected. All numbers in Lilaq are run through a tick _formatter_ and the default tick formatter passes the values through `zero.num`. \n\nYou can manipulate the appearance through settings like:\n```typ\n#zero.set-num(positive-sign: true)\n```\nPut this at the start of the document, or at least in front of the `lq.diagram()`. This should already do the trick.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 37,
      "score": 62.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 10068,
      "post_number": 9,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-03-21T08:46:28.726Z",
      "updated_at": "2025-03-21T08:46:28.726Z",
      "cooked": "<p>Also: yes, I didn’t yet write the (very important) tutorial <a href=\"https://lilaq.org/docs/tutorials/ticks\" rel=\"noopener nofollow ugc\">Working with ticks − Lilaq</a>. This will be the place where such things should be mentioned.</p>\n<p>I’m still working on some of the details of how ticks are generated and formatted which is why I didn’t want to finalize any documentation about it.</p>",
      "raw": "Also: yes, I didn't yet write the (very important) tutorial [Working with ticks − Lilaq](https://lilaq.org/docs/tutorials/ticks). This will be the place where such things should be mentioned. \n\nI'm still working on some of the details of how ticks are generated and formatted which is why I didn't want to finalize any documentation about it.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 36,
      "score": 22.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 10069,
      "post_number": 10,
      "username": "vmartel08",
      "name": "Vincent Martel",
      "created_at": "2025-03-21T09:11:33.442Z",
      "updated_at": "2025-03-21T09:11:33.442Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Mc-Zen\" data-post=\"8\" data-topic=\"3350\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/mc-zen/48/234_2.png\" class=\"avatar\"> Mc-Zen:</div>\n<blockquote>\n<p><code>#zero.set-num(positive-sign: true)</code></p>\n</blockquote>\n</aside>\n<p>So easy! Thank you very much. I was looking too deep into Lilaq’s axis configuration and could not find the hint on how to configure Zero.</p>\n<p>Would it be possible to apply this setting, for example, only on the xaxis and let the yaxis to default?</p>",
      "raw": "[quote=\"Mc-Zen, post:8, topic:3350\"]\n`#zero.set-num(positive-sign: true)`\n[/quote]\n\nSo easy! Thank you very much. I was looking too deep into Lilaq's axis configuration and could not find the hint on how to configure Zero. \n\nWould it be possible to apply this setting, for example, only on the xaxis and let the yaxis to default?",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 36,
      "score": 12.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 936
    },
    {
      "id": 10070,
      "post_number": 11,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-03-21T09:21:46.319Z",
      "updated_at": "2025-03-21T09:23:27.513Z",
      "cooked": "<blockquote>\n<p>Would it be possible to apply this setting, for example, only on the xaxis and let the yaxis to default?</p>\n</blockquote>\n<p>Unfortunately not :/ this will be natively possible (even easy) when Typst has built-in user-defined types. But until then, it would be necessary to override the formatter, e.g., through</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#lq.diagram(\n  yaxis: (format-ticks: ...)\n)\n</code></pre>\n<p>but the signature for <code>format-ticks</code> is not finalized which is why it’s not yet documented properly!</p>\n<p>Edit: with the future types to come, the solution <em>would</em> look like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show lq.tick.where(kind: \"y\"): set zero.num(positive-sign: true)\n</code></pre>",
      "raw": "> Would it be possible to apply this setting, for example, only on the xaxis and let the yaxis to default?\n\nUnfortunately not :/ this will be natively possible (even easy) when Typst has built-in user-defined types. But until then, it would be necessary to override the formatter, e.g., through \n```typ\n#lq.diagram(\n  yaxis: (format-ticks: ...)\n)\n```\nbut the signature for `format-ticks` is not finalized which is why it's not yet documented properly!\n\nEdit: with the future types to come, the solution _would_ look like this:\n```typ\n#show lq.tick.where(kind: \"y\"): set zero.num(positive-sign: true)\n```",
      "reply_to_post_number": 10,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 34,
      "score": 21.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    }
  ],
  "scraped_at": "2025-06-10T09:50:08.348941"
}
{
  "topic_metadata": {
    "id": 3363,
    "title": "How to make centralized formulae in enums",
    "slug": "how-to-make-centralized-formulae-in-enums",
    "posts_count": 2,
    "created_at": "2025-03-21T13:22:55.664Z",
    "last_posted_at": "2025-03-21T13:47:11.545Z",
    "views": 99,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "layout",
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 182
  },
  "posts": [
    {
      "id": 10080,
      "post_number": 1,
      "username": "AprilGrimoire",
      "name": "AprilGrimoire",
      "created_at": "2025-03-21T13:22:55.868Z",
      "updated_at": "2025-03-21T13:26:21.308Z",
      "cooked": "<pre><code class=\"lang-auto\">+ + Let $R=FF_p (epsilon) slash (epsilon^2)$. Prove that\n    $\n      F(X, Y) = X + Y + epsilon X Y^p\n    $\n    defines a noncommutative formal group\n</code></pre>\n<p>gives</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/5/53f88afa45f3485049d91cc893a97e593b50301a.png\" alt=\"image\" data-base62-sha1=\"bYQ86sYOdTVOMNIb6lafnw1neu6\" width=\"596\" height=\"136\"></p>\n<p>Instead of</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/8/8a6b869346b701c9c6b641bd3acafec610db4c03.png\" data-download-href=\"https://forum.typst.app/uploads/default/8a6b869346b701c9c6b641bd3acafec610db4c03\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/8/8a6b869346b701c9c6b641bd3acafec610db4c03_2_690x135.png\" alt=\"image\" data-base62-sha1=\"jKwglqzPiCWMw5zhiQdMcXibb1N\" width=\"690\" height=\"135\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/8/8a6b869346b701c9c6b641bd3acafec610db4c03_2_690x135.png, https://forum.typst.app/uploads/default/optimized/2X/8/8a6b869346b701c9c6b641bd3acafec610db4c03_2_1035x202.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/8/8a6b869346b701c9c6b641bd3acafec610db4c03_2_1380x270.png 2x\" data-dominant-color=\"F8F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1649×323 87.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>How can I make an enum take as much horizontal space as possible? I hope there’s an option in enums to toggle this behavior, but there seemingly isn’t.</p>",
      "raw": "```\n+ + Let $R=FF_p (epsilon) slash (epsilon^2)$. Prove that\n    $\n      F(X, Y) = X + Y + epsilon X Y^p\n    $\n    defines a noncommutative formal group\n```\n\ngives\n\n![image|596x136](upload://bYQ86sYOdTVOMNIb6lafnw1neu6.png)\n\nInstead of\n\n![image|690x135](upload://jKwglqzPiCWMw5zhiQdMcXibb1N.png)\n\nHow can I make an enum take as much horizontal space as possible? I hope there's an option in enums to toggle this behavior, but there seemingly isn't.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 100.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1309
    },
    {
      "id": 10093,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-21T13:47:11.545Z",
      "updated_at": "2025-03-21T13:47:11.545Z",
      "cooked": "<p>This is a known issue: <a href=\"https://github.com/typst/typst/issues/529\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Center alignment broken in lists · Issue #529 · typst/typst · GitHub</a>. <em>I think</em> <a href=\"https://github.com/typst/typst/issues/529#issuecomment-2387094936\" rel=\"noopener nofollow ugc\">my fix at the bottom</a> should still be the best solution yet, since no one corrected it. Though I’m not sure in which cases you would need to use <code>inset: 0pt</code>, because, IIUC, <a href=\"https://typst.app/docs/reference/layout/block/#parameters-inset\"><code>block</code> has no inset by default</a>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation.where(block: true): eq =&gt; {\n  block(width: 100%, inset: 0pt, align(center, eq))\n}\n\n+ + Let $R=FF_p (epsilon) slash (epsilon^2)$. Prove that\n    $\n      F(X, Y) = X + Y + epsilon X Y^p\n    $\n    defines a noncommutative formal group\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/fe0c359a8ec843b413477203ed411ff22e2b4d29.png\" data-download-href=\"https://forum.typst.app/uploads/default/fe0c359a8ec843b413477203ed411ff22e2b4d29\" title=\"output\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/fe0c359a8ec843b413477203ed411ff22e2b4d29_2_690x130.png\" alt=\"output\" data-base62-sha1=\"Afpr1WMzkeevG7SHcmfa9XwwO25\" width=\"690\" height=\"130\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/fe0c359a8ec843b413477203ed411ff22e2b4d29_2_690x130.png, https://forum.typst.app/uploads/default/original/2X/f/fe0c359a8ec843b413477203ed411ff22e2b4d29.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/fe0c359a8ec843b413477203ed411ff22e2b4d29.png 2x\" data-dominant-color=\"121212\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">output</span><span class=\"informations\">796×150 13.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "This is a known issue: https://github.com/typst/typst/issues/529. _I think_ [my fix at the bottom](https://github.com/typst/typst/issues/529#issuecomment-2387094936) should still be the best solution yet, since no one corrected it. Though I'm not sure in which cases you would need to use `inset: 0pt`, because, IIUC, [`block` has no inset by default](https://typst.app/docs/reference/layout/block/#parameters-inset).\n\n\n```typ\n#show math.equation.where(block: true): eq => {\n  block(width: 100%, inset: 0pt, align(center, eq))\n}\n\n+ + Let $R=FF_p (epsilon) slash (epsilon^2)$. Prove that\n    $\n      F(X, Y) = X + Y + epsilon X Y^p\n    $\n    defines a noncommutative formal group\n```\n\n![output|690x130](upload://Afpr1WMzkeevG7SHcmfa9XwwO25.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 28,
      "score": 260.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:50:07.587195"
}
{
  "topic_metadata": {
    "id": 3371,
    "title": "How to rotate axis labels in lilaq?",
    "slug": "how-to-rotate-axis-labels-in-lilaq",
    "posts_count": 5,
    "created_at": "2025-03-22T20:31:44.679Z",
    "last_posted_at": "2025-03-23T12:16:05.684Z",
    "views": 122,
    "like_count": 5,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "lilaq"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 631
  },
  "posts": [
    {
      "id": 10117,
      "post_number": 1,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2025-03-22T20:31:44.814Z",
      "updated_at": "2025-03-22T20:31:44.814Z",
      "cooked": "<p>Hi everyone,</p>\n<p>I’m currently experimenting with switching my plots from cetz-plot to lilaq, and I have to say—I’m already quite impressed! The design flexibility is great, and I’ve managed to recreate most of my custom layout using the documentation and examples.</p>\n<p>One thing I’m still trying to figure out, though, is how to <strong>rotate and fine-tune the position of the axis labels</strong> (xlabel and ylabel). I’d like to rotate them slightly and adjust their placement to better match my preferred layout style (which I used in cetz-plot before).</p>\n<p>Here’s a minimal working example of what I have so far:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/lilaq:0.1.0\" as lq\n#import \"@preview/zero:0.3.3\": * \n#import \"@preview/tiptoe:0.3.0\"\n\n#let schoolbook-style = it =&gt; {\n  let filter(value, distance) = value != 0 and distance &gt;= 5pt\n  let axis-args = (position: 0, filter: filter)\n  \n  show: lq.set-tick(inset: 2pt, outset: 2pt, pad: 0.4em)\n  show: lq.set-spine(tip: tiptoe.triangle)\n  show: lq.set-diagram(xaxis: axis-args, yaxis: axis-args)\n  show lq.selector(lq.label): set align(top + right)\n  it\n}\n\n#set-num(decimal-separator: \",\")\n\n#show: schoolbook-style\n\n#let x = lq.linspace(0, 10, num:200) \n\n#lq.diagram(\n  xlabel: $x$, \n  ylabel: $y$,\n  lq.plot(\n    mark: none,\n    stroke: 1.5pt,\n    x,\n    x.map(x =&gt; \n      calc.pow(x,2)  \n    )\n  ),\n)\n</code></pre>\n<p>Any tips on how to manually rotate or reposition the axis labels (xlabel, ylabel)? Is there a clean way to apply a rotate or offset to them in the current lilaq API?</p>\n<p>Thanks in advance, and also big kudos to everyone working on these awesome libraries!</p>\n<p>CeTZ plot:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/60e1795e7fd02d09feb19e8983f7b6e26709caa1.png\" data-download-href=\"https://forum.typst.app/uploads/default/60e1795e7fd02d09feb19e8983f7b6e26709caa1\" title=\"SCR-20250322-sobo\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/6/60e1795e7fd02d09feb19e8983f7b6e26709caa1_2_543x500.png\" alt=\"SCR-20250322-sobo\" data-base62-sha1=\"dP2UCiSF8EL5gNFq5kKyg3j0aaZ\" width=\"543\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/6/60e1795e7fd02d09feb19e8983f7b6e26709caa1_2_543x500.png, https://forum.typst.app/uploads/default/optimized/2X/6/60e1795e7fd02d09feb19e8983f7b6e26709caa1_2_814x750.png 1.5x, https://forum.typst.app/uploads/default/original/2X/6/60e1795e7fd02d09feb19e8983f7b6e26709caa1.png 2x\" data-dominant-color=\"F7F8F9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">SCR-20250322-sobo</span><span class=\"informations\">844×776 43.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Current lilaq plot:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/9/95dd0efff16d8d74778beff659d29c2a49508909.png\" data-download-href=\"https://forum.typst.app/uploads/default/95dd0efff16d8d74778beff659d29c2a49508909\" title=\"SCR-20250322-soch\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/9/95dd0efff16d8d74778beff659d29c2a49508909_2_690x486.png\" alt=\"SCR-20250322-soch\" data-base62-sha1=\"lnKL3owEra713BPZOPaZ3Tu2eeZ\" width=\"690\" height=\"486\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/9/95dd0efff16d8d74778beff659d29c2a49508909_2_690x486.png, https://forum.typst.app/uploads/default/original/2X/9/95dd0efff16d8d74778beff659d29c2a49508909.png 1.5x, https://forum.typst.app/uploads/default/original/2X/9/95dd0efff16d8d74778beff659d29c2a49508909.png 2x\" data-dominant-color=\"F8F9FA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">SCR-20250322-soch</span><span class=\"informations\">874×616 38.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hi everyone,\n\nI’m currently experimenting with switching my plots from cetz-plot to lilaq, and I have to say—I’m already quite impressed! The design flexibility is great, and I’ve managed to recreate most of my custom layout using the documentation and examples.\n\nOne thing I’m still trying to figure out, though, is how to **rotate and fine-tune the position of the axis labels** (xlabel and ylabel). I’d like to rotate them slightly and adjust their placement to better match my preferred layout style (which I used in cetz-plot before).\n\nHere’s a minimal working example of what I have so far:\n```typ\n#import \"@preview/lilaq:0.1.0\" as lq\n#import \"@preview/zero:0.3.3\": * \n#import \"@preview/tiptoe:0.3.0\"\n\n#let schoolbook-style = it => {\n  let filter(value, distance) = value != 0 and distance >= 5pt\n  let axis-args = (position: 0, filter: filter)\n  \n  show: lq.set-tick(inset: 2pt, outset: 2pt, pad: 0.4em)\n  show: lq.set-spine(tip: tiptoe.triangle)\n  show: lq.set-diagram(xaxis: axis-args, yaxis: axis-args)\n  show lq.selector(lq.label): set align(top + right)\n  it\n}\n\n#set-num(decimal-separator: \",\")\n\n#show: schoolbook-style\n\n#let x = lq.linspace(0, 10, num:200) \n\n#lq.diagram(\n  xlabel: $x$, \n  ylabel: $y$,\n  lq.plot(\n    mark: none,\n    stroke: 1.5pt,\n    x,\n    x.map(x => \n      calc.pow(x,2)  \n    )\n  ),\n)\n```\nAny tips on how to manually rotate or reposition the axis labels (xlabel, ylabel)? Is there a clean way to apply a rotate or offset to them in the current lilaq API?\n\nThanks in advance, and also big kudos to everyone working on these awesome libraries!\n\nCeTZ plot:\n![SCR-20250322-sobo|543x500](upload://dP2UCiSF8EL5gNFq5kKyg3j0aaZ.png)\n\nCurrent lilaq plot:\n![SCR-20250322-soch|690x486](upload://lnKL3owEra713BPZOPaZ3Tu2eeZ.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 89.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 10123,
      "post_number": 2,
      "username": "vmartel08",
      "name": "Vincent Martel",
      "created_at": "2025-03-22T22:32:07.177Z",
      "updated_at": "2025-03-22T22:33:11.539Z",
      "cooked": "<p>Hi there, have you tried setting “angle:-90deg”?</p>\n<p>The Lilaq doc mentions:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">lq.label(body, dx=0pt, dy=0pt, pad=0.75em, angle=0deg)\n</code></pre>\n<h4><a name=\"p-10123-angle-angle-default-0deg-1\" class=\"anchor\" href=\"#p-10123-angle-angle-default-0deg-1\"></a>angle : <code>angle</code> <em>default:</em> <code>0deg</code></h4>\n<p>Angle at which the label is drawn. The label of a <code>y</code> axis is often drawn at <code>-90deg</code>.</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://lilaq.org/docs/reference/label\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/2X/8/819b1f818c46b8a56fc178bcef886895139c2e5a.png\" class=\"site-icon\" data-dominant-color=\"724A93\" width=\"16\" height=\"16\">\n\n      <a href=\"https://lilaq.org/docs/reference/label\" target=\"_blank\" rel=\"noopener nofollow ugc\">lilaq.org</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/388;\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/0/0a180e3a2c5896dc676770ee7ae28dd1810115e4_2_690x388.jpeg\" class=\"thumbnail\" data-dominant-color=\"6055BC\" width=\"690\" height=\"388\"></div>\n\n<h3><a href=\"https://lilaq.org/docs/reference/label\" target=\"_blank\" rel=\"noopener nofollow ugc\">label − Lilaq</a></h3>\n\n  <p>A label for a diagram axis.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Hi there, have you tried setting “angle:-90deg”?\n\nThe Lilaq doc mentions:\n\n```typ\nlq.label(body, dx=0pt, dy=0pt, pad=0.75em, angle=0deg)\n```\n#### angle : `angle` *default:* `0deg`\n\nAngle at which the label is drawn. The label of a `y` axis is often drawn at `-90deg`.\n\nhttps://lilaq.org/docs/reference/label",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 45,
      "score": 24.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 936
    },
    {
      "id": 10124,
      "post_number": 3,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-22T22:33:10.139Z",
      "updated_at": "2025-03-22T22:35:33.572Z",
      "cooked": "<p>You can pass a <a href=\"https://lilaq.org/docs/reference/label\"><code>label</code></a> to the parameters <code>xlabel</code> and <code>ylabel</code> to adjust the angle and the position.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#lq.diagram(\n  xlabel: lq.xlabel($x$, dx: 0.3cm, dy: -0.7cm, angle: 0deg),\n  ylabel: lq.ylabel($y$, dx: 0.9cm, dy: -0.4cm, angle: 0deg),\n  lq.plot(\n    mark: none,\n    stroke: 1.5pt,\n    x,\n    x.map(x =&gt; \n      calc.pow(x,2)  \n    )\n  ),\n)\n</code></pre>\n<p>I’m not sure if there is also a way to do this with a show rule? But since the position probably needs to be customized for every plot anyway, I think it is fine to create the elements here manually.</p>",
      "raw": "You can pass a [`label`](https://lilaq.org/docs/reference/label) to the parameters `xlabel` and `ylabel` to adjust the angle and the position.\n\n```typ\n#lq.diagram(\n  xlabel: lq.xlabel($x$, dx: 0.3cm, dy: -0.7cm, angle: 0deg),\n  ylabel: lq.ylabel($y$, dx: 0.9cm, dy: -0.4cm, angle: 0deg),\n  lq.plot(\n    mark: none,\n    stroke: 1.5pt,\n    x,\n    x.map(x => \n      calc.pow(x,2)  \n    )\n  ),\n)\n```\n\nI'm not sure if there is also a way to do this with a show rule? But since the position probably needs to be customized for every plot anyway, I think it is fine to create the elements here manually.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 44,
      "score": 43.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 10125,
      "post_number": 4,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2025-03-22T22:45:07.649Z",
      "updated_at": "2025-03-22T22:45:31.346Z",
      "cooked": "<p>Thank you very much for your code snippet!<br>\nIt results in the exact intended layout.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/a/a16295fcd60aa2209dde842128ff924de5c8aa8b.png\" data-download-href=\"https://forum.typst.app/uploads/default/a16295fcd60aa2209dde842128ff924de5c8aa8b\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/a/a16295fcd60aa2209dde842128ff924de5c8aa8b_2_335x250.png\" alt=\"image\" data-base62-sha1=\"n1G5HMIgjn4zO5wT0cFn2skJ1G3\" width=\"335\" height=\"250\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/a/a16295fcd60aa2209dde842128ff924de5c8aa8b_2_335x250.png, https://forum.typst.app/uploads/default/optimized/2X/a/a16295fcd60aa2209dde842128ff924de5c8aa8b_2_502x375.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/a/a16295fcd60aa2209dde842128ff924de5c8aa8b_2_670x500.png 2x\" data-dominant-color=\"F7F8F9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">802×598 36.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p><a href=\"https://typst.app/project/rMJq47dMdXyKz9LuqiLvsQ\" class=\"onebox\" target=\"_blank\" rel=\"noopener\">https://typst.app/project/rMJq47dMdXyKz9LuqiLvsQ</a></p>",
      "raw": "Thank you very much for your code snippet!\nIt results in the exact intended layout.\n\n![image|670x500, 50%](upload://n1G5HMIgjn4zO5wT0cFn2skJ1G3.png)\n\nhttps://typst.app/project/rMJq47dMdXyKz9LuqiLvsQ",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 13.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 10128,
      "post_number": 5,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2025-03-23T12:16:05.684Z",
      "updated_at": "2025-03-23T12:16:05.684Z",
      "cooked": "<p>Yes, using <code>lq.label</code> is indeed the way to go.</p>\n<p>Ideally you would want to write</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show lq.label.where(kind: \"y\"): set lq.label(angle: 0deg)\n</code></pre>\n<p>but it’s currently not possible due to a limitation of the package <em>elembic</em> which provides the “user-defined types/elements” in Lilaq. It will become possible though, when types are properly introduced in the Typst compiler.</p>\n<p>Regarding the preset: you can also add the label (if it always has the same text) to the <code>lq.diagram</code> set rule.</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">show: lq.set-diagram(\n  xaxis: axis-args + (\n    label: lq.xlabel($x$, dx: 0.3cm, dy: -0.7cm)\n  ), \n  yaxis: axis-args + (\n    label: lq.ylabel($y$, dx: 0.9cm, dy: -0.4cm, angle: 0deg)\n  ), \n)\n</code></pre>\n<p>This way you can avoid a good deal of repetition.</p>\n<p>I will think about how to improve positioning of the labels so that it does not need to be tuned each time the label text changes.</p>",
      "raw": "Yes, using `lq.label` is indeed the way to go. \n\nIdeally you would want to write\n```typ\n#show lq.label.where(kind: \"y\"): set lq.label(angle: 0deg)\n```\nbut it's currently not possible due to a limitation of the package *elembic* which provides the \"user-defined types/elements\" in Lilaq. It will become possible though, when types are properly introduced in the Typst compiler.\n\nRegarding the preset: you can also add the label (if it always has the same text) to the `lq.diagram` set rule. \n\n```typc\nshow: lq.set-diagram(\n  xaxis: axis-args + (\n    label: lq.xlabel($x$, dx: 0.3cm, dy: -0.7cm)\n  ), \n  yaxis: axis-args + (\n    label: lq.ylabel($y$, dx: 0.9cm, dy: -0.4cm, angle: 0deg)\n  ), \n)\n``` \nThis way you can avoid a good deal of repetition. \n\n\nI will think about how to improve positioning of the labels so that it does not need to be tuned each time the label text changes.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 31,
      "score": 36.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    }
  ],
  "scraped_at": "2025-06-10T09:50:06.847618"
}
{
  "topic_metadata": {
    "id": 3382,
    "title": "How can I include user privilege indicators in shell prompts while keeping syntax highlighting enabled in codeblocks?",
    "slug": "how-can-i-include-user-privilege-indicators-in-shell-prompts-while-keeping-syntax-highlighting-enabled-in-codeblocks",
    "posts_count": 4,
    "created_at": "2025-03-24T14:59:13.768Z",
    "last_posted_at": "2025-03-24T19:53:48.744Z",
    "views": 63,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "syntax"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 1110
  },
  "posts": [
    {
      "id": 10185,
      "post_number": 1,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2025-03-24T14:59:13.920Z",
      "updated_at": "2025-03-24T15:02:46.677Z",
      "cooked": "<p>Using the CLI compiler <code>typt</code> (0.13.1), I’ve been writing notes about using shell commands on Linux, with syntax highlighting enabled.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">Example snippet, to be run by a regular user:\n\n#raw(\"chmod test.sh\", lang: \"sh\")\n\nExample snippet, to be run by with root privileges:\n\n#raw(\"chown user test.sh\", lang: \"sh\")\n</code></pre>\n<details>\n<summary>\nOutput screenshot</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/f/f57036fa8921dfeaa5e1463d2384280eb2b9eb11.png\" alt=\"typst-raw-sh\" data-base62-sha1=\"z1foKOuavA8fu3RR7mZSSS5jw4x\" width=\"529\" height=\"169\"></p>\n</details>\n<p>I would like to include the symbol <code>$</code> for commands that can be run by regular users and <code>#</code> for commands that require root privileges at the beginning of each line. (This is a convention used by the Arch Wiki. See <a href=\"https://wiki.archlinux.org/title/File_permissions_and_attributes#Changing_ownership\" rel=\"noopener nofollow ugc\">this page</a> as an example.)</p>\n<p>Now, I’m wondering if it’s possible to do this with correct syntax highlighting. By ‘correct’, I’m thinking of how the Markdown renderer handles it here on Typst forums when a codeblock has the filetype set to <code>shell</code> or <code>console</code> instead of <code>sh</code>:</p>\n<pre data-code-wrap=\"console\"><code class=\"lang-console\">$ chmod test.sh\n# chown user test.sh\n</code></pre>\n<p>I’ve tried changing the <code>lang</code> option to <code>shell</code> or <code>console</code> in Typst, but doing so in disables syntax highlighting for the current <code>raw</code> block altogether.</p>\n<p>Currently, if I want to keep syntax highlighting on, I have to use <code>sh</code>, where <code>$</code> is marked as a command and everything after it as arguments:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">Example snippet, to be run by a regular user:\n\n#raw(\"$ chmod test.sh\", lang: \"sh\")\n</code></pre>\n<details>\n<summary>\nOutput screenshot</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/6/6aff9ceea89a1ace83ba0a11d3fa2b2248f5a54e.png\" alt=\"typst-raw-sh-p\" data-base62-sha1=\"fgyg8k6j10ZnpZCyWKyLN237sCO\" width=\"547\" height=\"83\"></p>\n</details>\n<p>And <code>#</code>, together with everything after it, is marked as a comment:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">Example snippet, to be run with root privileges:\n\n#raw(\"# chown user test.sh\", lang: \"sh\")\n</code></pre>\n<details>\n<summary>\nOutput screenshot</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/9/92703d8797784fc5228f250514c4eeaaaf6aacae.png\" alt=\"typst-raw-sh-pr\" data-base62-sha1=\"kTsbrjUDLkft26kJRuve8QJKmLk\" width=\"515\" height=\"92\"></p>\n</details>",
      "raw": "Using the CLI compiler `typt` (0.13.1), I've been writing notes about using shell commands on Linux, with syntax highlighting enabled.\n\n```typ\nExample snippet, to be run by a regular user:\n\n#raw(\"chmod test.sh\", lang: \"sh\")\n\nExample snippet, to be run by with root privileges:\n\n#raw(\"chown user test.sh\", lang: \"sh\")\n```\n\n[details=\"Output screenshot\"]\n![typst-raw-sh|529x169](upload://z1foKOuavA8fu3RR7mZSSS5jw4x.png)\n[/details]\n\nI would like to include the symbol `$` for commands that can be run by regular users and `#` for commands that require root privileges at the beginning of each line. (This is a convention used by the Arch Wiki. See [this page](https://wiki.archlinux.org/title/File_permissions_and_attributes#Changing_ownership) as an example.)\n\nNow, I'm wondering if it's possible to do this with correct syntax highlighting. By 'correct', I'm thinking of how the Markdown renderer handles it here on Typst forums when a codeblock has the filetype set to `shell` or `console` instead of `sh`:\n\n```console\n$ chmod test.sh\n# chown user test.sh\n```\n\nI've tried changing the `lang` option to `shell` or `console` in Typst, but doing so in disables syntax highlighting for the current `raw` block altogether.\n\nCurrently, if I want to keep syntax highlighting on, I have to use `sh`, where `$` is marked as a command and everything after it as arguments:\n\n```typ\nExample snippet, to be run by a regular user:\n\n#raw(\"$ chmod test.sh\", lang: \"sh\")\n```\n\n[details=\"Output screenshot\"]\n![typst-raw-sh-p|547x83](upload://fgyg8k6j10ZnpZCyWKyLN237sCO.png)\n[/details]\n\n\nAnd `#`, together with everything after it, is marked as a comment:\n\n```typ\nExample snippet, to be run with root privileges:\n\n#raw(\"# chown user test.sh\", lang: \"sh\")\n```\n\n[details=\"Output screenshot\"]\n![typst-raw-sh-pr|515x92](upload://kTsbrjUDLkft26kJRuve8QJKmLk.png)\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 76.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 738
    },
    {
      "id": 10186,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-24T15:38:24.057Z",
      "updated_at": "2025-03-24T15:39:26.579Z",
      "cooked": "<p>If you want to use it for only oneliners:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw: set text(font: \"Fira Mono\")\n\n#let user(command) = emph(raw(\"$ \")) + raw(command, lang: \"sh\")\n#let root(command) = emph(raw(\"# \")) + raw(command, lang: \"sh\")\n\nExample snippet, to be run by a regular user:\n\n`$ ````sh chmod test.sh```\n\n#user(\"chmod test.sh\")\n\nExample snippet, to be run by with root privileges:\n\n`# ````sh chown user test.sh```\n\n#root(\"chown user test.sh\")\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/9/94ef61ca03c521e630fc530d0354ed4b8907a758.png\" alt=\"image\" data-base62-sha1=\"lfxxqzMM0xBG1Tm3xKLaKSY1F9e\" width=\"415\" height=\"228\"></p>\n<p>For multi-line stuff you can do something like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw: set text(font: \"Fira Mono\")\n\n#let user(command) = {\n  show raw.line: it =&gt; emph(text(font: \"Fira Mono\", \"$ \")) + it\n  command\n}\n#let root(command) = {\n  show raw.line: it =&gt; emph(text(font: \"Fira Mono\", \"# \")) + it\n  command\n}\n\nExample snippet, to be run by a regular user:\n\n#user(```sh\nchmod this\nchmod that\n```)\n\nExample snippet, to be run by with root privileges:\n\n#root(```sh\nchown user this\nchown user that\n```)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/7a4ebfd25dafd574db59636d9442bd19d640f2fe.png\" alt=\"image\" data-base62-sha1=\"hrYYcwrbq0JgUsapydX5tsvvXk2\" width=\"420\" height=\"180\"></p>\n<p>Or if you want to write the appropriate prefix yourself, here is a little trick (note that you need to specify an absolute font size):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw: set text(font: \"Fira Mono\", size: 10pt)\n\n#show raw.where(lang: \"console\"): it =&gt; {\n  let user = emph(raw(\"$ \"))\n  let root = emph(raw(\"# \"))\n  it\n    .text\n    .split(\"\\n\")\n    .map(line =&gt; {\n      let starts(pattern) = line.starts-with(pattern)\n      let prefix = if starts(\"$ \") { user } else if starts(\"# \") { root }\n      let text = line.replace(regex(\"^[$#] \"), \"\")\n      prefix + raw(text, lang: \"sh\")\n    })\n    .join(\"\\n\")\n}\n\n```console\n$ chmod this\n$ chmod that\n# chown user this\n# chown user that\n```\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/3/3b2438fff3d3701faa1c196d3fb78620539d3278.png\" alt=\"image\" data-base62-sha1=\"8rbMctfEs9MKW2arfQSHwFCnKnC\" width=\"196\" height=\"108\"></p>\n<p>I tried using <code>show raw.line</code> inside <code>show raw.where(lang: \"console\")</code>, but I hit infinite show rule recursion and I don’t know if it is fixable. So this approach is the second one, and it actually works. But multi-line commands probably will not be highlighted properly. Maybe with enough dedication a more resilient solution can be found.</p>",
      "raw": "If you want to use it for only oneliners:\n\n````typ\n#show raw: set text(font: \"Fira Mono\")\n\n#let user(command) = emph(raw(\"$ \")) + raw(command, lang: \"sh\")\n#let root(command) = emph(raw(\"# \")) + raw(command, lang: \"sh\")\n\nExample snippet, to be run by a regular user:\n\n`$ ````sh chmod test.sh```\n\n#user(\"chmod test.sh\")\n\nExample snippet, to be run by with root privileges:\n\n`# ````sh chown user test.sh```\n\n#root(\"chown user test.sh\")\n````\n\n![image|554x305, 75%](upload://lfxxqzMM0xBG1Tm3xKLaKSY1F9e.png)\n\nFor multi-line stuff you can do something like this:\n\n````typ\n#show raw: set text(font: \"Fira Mono\")\n\n#let user(command) = {\n  show raw.line: it => emph(text(font: \"Fira Mono\", \"$ \")) + it\n  command\n}\n#let root(command) = {\n  show raw.line: it => emph(text(font: \"Fira Mono\", \"# \")) + it\n  command\n}\n\nExample snippet, to be run by a regular user:\n\n#user(```sh\nchmod this\nchmod that\n```)\n\nExample snippet, to be run by with root privileges:\n\n#root(```sh\nchown user this\nchown user that\n```)\n````\n\n![image|561x241, 75%](upload://hrYYcwrbq0JgUsapydX5tsvvXk2.png)\n\nOr if you want to write the appropriate prefix yourself, here is a little trick (note that you need to specify an absolute font size):\n\n````typ\n#show raw: set text(font: \"Fira Mono\", size: 10pt)\n\n#show raw.where(lang: \"console\"): it => {\n  let user = emph(raw(\"$ \"))\n  let root = emph(raw(\"# \"))\n  it\n    .text\n    .split(\"\\n\")\n    .map(line => {\n      let starts(pattern) = line.starts-with(pattern)\n      let prefix = if starts(\"$ \") { user } else if starts(\"# \") { root }\n      let text = line.replace(regex(\"^[$#] \"), \"\")\n      prefix + raw(text, lang: \"sh\")\n    })\n    .join(\"\\n\")\n}\n\n```console\n$ chmod this\n$ chmod that\n# chown user this\n# chown user that\n```\n````\n\n![image|262x145, 75%](upload://8rbMctfEs9MKW2arfQSHwFCnKnC.png)\n\nI tried using `show raw.line` inside `show raw.where(lang: \"console\")`, but I hit infinite show rule recursion and I don't know if it is fixable. So this approach is the second one, and it actually works. But multi-line commands probably will not be highlighted properly. Maybe with enough dedication a more resilient solution can be found.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 25.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10190,
      "post_number": 3,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2025-03-24T19:10:08.685Z",
      "updated_at": "2025-03-24T19:15:16.537Z",
      "cooked": "<p>Thank you for your reply! Out of these solutions, the third one seems the most appealing (where I provide <code>$</code> or <code>#</code> on each line myself).</p>\n<p>The only (minor) inconvenient part about it is this part you mentioned:</p>\n<blockquote>\n<p>note that you need to specify an absolute font size</p>\n</blockquote>\n<p>By that, did you mean that it has to be specified manually in <code>pt</code> or <code>em</code>, or that it can’t depend on whatever font size is set globally throughout the document?</p>\n<p>I’ve tried replicating the default size by giving the <code>console</code> block <code>1.11em</code> and compared it with a regular code block, like so:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set text(size: 10pt)\n\nRegular fence:\n\n```\n# chown user test.sh\n$ chmod this\n$ chmod that\n# chown user this\n# chown user that\n```\n\n#show raw: set text(font: \"DejaVu Sans Mono\", size: 1.11em)\n\n#show raw.where(lang: \"console\"): it =&gt; {\n  let user = emph(raw(\"$ \"))\n  let root = emph(raw(\"# \"))\n  it\n    .text\n    .split(\"\\n\")\n    .map(line =&gt; {\n      let starts(pattern) = line.starts-with(pattern)\n      let prefix = if starts(\"$ \") { user } else if starts(\"# \") { root }\n      let text = line.replace(regex(\"^[$#] \"), \"\")\n      prefix + raw(text, lang: \"sh\")\n    })\n    .join(\"\\n\")\n}\n\nConsole fence:\n\n```console\n# chown user test.sh\n$ chmod this\n$ chmod that\n# chown user this\n# chown user that\n```\n</code></pre>\n<p>I don’t know how accurate this setting is (can it be even more accurate?), but it seems to work fine. So, if I change the font size in the first line to something else, like <code>14pt</code>, the <code>console</code> block scales to it.</p>\n<details>\n<summary>\nOutput screenshot</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/4/407bcfa6b4edf17ca583eedb96ee2140ceb8ca98.png\" data-download-href=\"https://forum.typst.app/uploads/default/407bcfa6b4edf17ca583eedb96ee2140ceb8ca98\" title=\"typst-raw-comparison\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/4/407bcfa6b4edf17ca583eedb96ee2140ceb8ca98_2_384x500.png\" alt=\"typst-raw-comparison\" data-base62-sha1=\"9crOYIAlSRpAkQFQ8lpV6mHd3cs\" width=\"384\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/4/407bcfa6b4edf17ca583eedb96ee2140ceb8ca98_2_384x500.png, https://forum.typst.app/uploads/default/original/2X/4/407bcfa6b4edf17ca583eedb96ee2140ceb8ca98.png 1.5x, https://forum.typst.app/uploads/default/original/2X/4/407bcfa6b4edf17ca583eedb96ee2140ceb8ca98.png 2x\" data-dominant-color=\"F1F1F2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">typst-raw-comparison</span><span class=\"informations\">394×513 39.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>This is just my observation, so if you happen to know of any pitfalls about this that I’m not aware of, feel free to let me know.</p>",
      "raw": "Thank you for your reply! Out of these solutions, the third one seems the most appealing (where I provide `$` or `#` on each line myself).\n\nThe only (minor) inconvenient part about it is this part you mentioned:\n\n> note that you need to specify an absolute font size\n\nBy that, did you mean that it has to be specified manually in `pt` or `em`, or that it can't depend on whatever font size is set globally throughout the document?\n\nI've tried replicating the default size by giving the `console` block `1.11em` and compared it with a regular code block, like so:\n\n~~~typ\n#set text(size: 10pt)\n\nRegular fence:\n\n```\n# chown user test.sh\n$ chmod this\n$ chmod that\n# chown user this\n# chown user that\n```\n\n#show raw: set text(font: \"DejaVu Sans Mono\", size: 1.11em)\n\n#show raw.where(lang: \"console\"): it => {\n  let user = emph(raw(\"$ \"))\n  let root = emph(raw(\"# \"))\n  it\n    .text\n    .split(\"\\n\")\n    .map(line => {\n      let starts(pattern) = line.starts-with(pattern)\n      let prefix = if starts(\"$ \") { user } else if starts(\"# \") { root }\n      let text = line.replace(regex(\"^[$#] \"), \"\")\n      prefix + raw(text, lang: \"sh\")\n    })\n    .join(\"\\n\")\n}\n\nConsole fence:\n\n```console\n# chown user test.sh\n$ chmod this\n$ chmod that\n# chown user this\n# chown user that\n```\n~~~\n\nI don't know how accurate this setting is (can it be even more accurate?), but it seems to work fine. So, if I change the font size in the first line to something else, like `14pt`, the `console` block scales to it.\n\n[details=\"Output screenshot\"]\n![typst-raw-comparison|384x500](upload://9crOYIAlSRpAkQFQ8lpV6mHd3cs.png)\n[/details]\n\nThis is just my observation, so if you happen to know of any pitfalls about this that I'm not aware of, feel free to let me know.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 8.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 738
    },
    {
      "id": 10191,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-24T19:53:48.744Z",
      "updated_at": "2025-03-24T19:53:48.744Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"maxigaz\" data-post=\"3\" data-topic=\"3382\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/m/F7602B/48.png\" class=\"avatar\"> maxigaz:</div>\n<blockquote>\n<p>By that, did you mean that it has to be specified manually in <code>pt</code> or <code>em</code>, or that it can’t depend on whatever font size is set globally throughout the document?</p>\n</blockquote>\n</aside>\n<p>See <a href=\"https://typst.app/docs/reference/layout/length/#fields\" class=\"inline-onebox\">Length Type – Typst Documentation</a> and here is an example without the absolute font size set:</p>\n<details><summary>code</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw: set text(font: \"Fira Mono\")\n\n#show raw.where(lang: \"console\"): it =&gt; {\n  let user = emph(raw(\"$ \"))\n  let root = emph(raw(\"# \"))\n  it\n    .text\n    .split(\"\\n\")\n    .map(line =&gt; {\n      let starts(pattern) = line.starts-with(pattern)\n      let prefix = if starts(\"$ \") { user } else if starts(\"# \") { root }\n      let text = line.replace(regex(\"^[$#] \"), \"\")\n      prefix + raw(text, lang: \"sh\")\n    })\n    .join(\"\\n\")\n}\n\n```\n$ chmod this\n$ chmod that\n# chown user this\n# chown user that\n```\n\n```console\n$ chmod this\n$ chmod that\n# chown user this\n# chown user that\n```\n</code></pre>\n</details>\n<details><summary>output</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/8/839e90388a2de3d9bffb759b9048f6bfccb5b92a.png\" alt=\"image\" data-base62-sha1=\"iMmgGi7VzfQhbargG8F9sqwIyUO\" width=\"161\" height=\"161\"></p>\n</details>\n<p>After a quick search I didn’t find a place where this issue was discussed, but I think by default the raw font size is like <code>0.9em</code>, which means nested raw elements will have different font sizes due to 0.9 ⋅ 0.9 which doesn’t happen with absolute length value. You might be able to change the solution so that this issue doesn’t affect it.</p>",
      "raw": "[quote=\"maxigaz, post:3, topic:3382\"]\nBy that, did you mean that it has to be specified manually in `pt` or `em`, or that it can’t depend on whatever font size is set globally throughout the document?\n[/quote]\n\nSee https://typst.app/docs/reference/layout/length/#fields and here is an example without the absolute font size set:\n\n<details><summary>code</summary>\n\n````typ\n#show raw: set text(font: \"Fira Mono\")\n\n#show raw.where(lang: \"console\"): it => {\n  let user = emph(raw(\"$ \"))\n  let root = emph(raw(\"# \"))\n  it\n    .text\n    .split(\"\\n\")\n    .map(line => {\n      let starts(pattern) = line.starts-with(pattern)\n      let prefix = if starts(\"$ \") { user } else if starts(\"# \") { root }\n      let text = line.replace(regex(\"^[$#] \"), \"\")\n      prefix + raw(text, lang: \"sh\")\n    })\n    .join(\"\\n\")\n}\n\n```\n$ chmod this\n$ chmod that\n# chown user this\n# chown user that\n```\n\n```console\n$ chmod this\n$ chmod that\n# chown user this\n# chown user that\n```\n````\n\n</details>\n\n<details><summary>output</summary>\n\n![image|161x161](upload://iMmgGi7VzfQhbargG8F9sqwIyUO.png)\n\n</details>\n\nAfter a quick search I didn't find a place where this issue was discussed, but I think by default the raw font size is like `0.9em`, which means nested raw elements will have different font sizes due to 0.9 ⋅ 0.9 which doesn't happen with absolute length value. You might be able to change the solution so that this issue doesn't affect it.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 15,
      "score": 8.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:50:06.118005"
}
{
  "topic_metadata": {
    "id": 3386,
    "title": "How can I customize the font size of first and second order sub/superscripts?",
    "slug": "how-can-i-customize-the-font-size-of-first-and-second-order-sub-superscripts",
    "posts_count": 11,
    "created_at": "2025-03-24T20:42:28.586Z",
    "last_posted_at": "2025-03-25T15:19:22.307Z",
    "views": 104,
    "like_count": 11,
    "reply_count": 7,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 11,
    "accepted_answer_username": "Ullrich_Kothe",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 580
  },
  "posts": [
    {
      "id": 10193,
      "post_number": 1,
      "username": "Ullrich_Kothe",
      "name": "Ullrich Köthe",
      "created_at": "2025-03-24T20:42:28.689Z",
      "updated_at": "2025-03-25T15:23:24.485Z",
      "cooked": "<p>Consider</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$\nX_\"first\"_\"second\"\n$\n</code></pre>\n<p>I’d like to implement a rule that changes the font size of “first” and “second” separately. How?</p>\n<p>EDIT: See below for a possible answer.</p>",
      "raw": "Consider \n```typ\n$\nX_\"first\"_\"second\"\n$\n```\nI'd like to implement a rule that changes the font size of \"first\" and \"second\" separately. How?\n\nEDIT: See below for a possible answer.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 91.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1382
    },
    {
      "id": 10195,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-24T21:08:59.493Z",
      "updated_at": "2025-03-24T21:11:36.118Z",
      "cooked": "<p>It looks like it’s not possible. You can open an issue requesting this feature. Here are related places in the code:</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/math/style.rs?plain=1#L216-L227\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/math/style.rs?plain=1#L216-L227\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/math/style.rs?plain=1#L216-L227\" target=\"_blank\" rel=\"noopener nofollow ugc\">typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/math/style.rs?plain=1#L216-L227</a></h4>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-rs?plain=1\">\n      <ol class=\"start lines\" start=\"216\" style=\"counter-reset: li-counter 215 ;\">\n          <li>pub fn sscript(</li>\n          <li>    /// The content to size.</li>\n          <li>    body: Content,</li>\n          <li>    /// Whether to impose a height restriction for exponents, like regular sub-</li>\n          <li>    /// and superscripts do.</li>\n          <li>    #[named]</li>\n          <li>    #[default(true)]</li>\n          <li>    cramped: bool,</li>\n          <li>) -&gt; Content {</li>\n          <li>    body.styled(EquationElem::set_size(MathSize::ScriptScript))</li>\n          <li>        .styled(EquationElem::set_cramped(cramped))</li>\n          <li>}</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/text/mod.rs?plain=1#L977-L986\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/text/mod.rs?plain=1#L977-L986\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/text/mod.rs?plain=1#L977-L986\" target=\"_blank\" rel=\"noopener nofollow ugc\">typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/text/mod.rs?plain=1#L977-L986</a></h4>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-rs?plain=1\">\n      <ol class=\"start lines\" start=\"977\" style=\"counter-reset: li-counter 976 ;\">\n          <li>fn resolve(self, styles: StyleChain) -&gt; Self::Output {</li>\n          <li>    let factor = match EquationElem::size_in(styles) {</li>\n          <li>        MathSize::Display | MathSize::Text =&gt; 1.0,</li>\n          <li>        MathSize::Script =&gt; EquationElem::script_scale_in(styles).0 as f64 / 100.0,</li>\n          <li>        MathSize::ScriptScript =&gt; {</li>\n          <li>            EquationElem::script_scale_in(styles).1 as f64 / 100.0</li>\n          <li>        }</li>\n          <li>    };</li>\n          <li>    factor * self.0.resolve(styles)</li>\n          <li>}</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/math/equation.rs?plain=1#L141-L146\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/math/equation.rs?plain=1#L141-L146\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/math/equation.rs?plain=1#L141-L146\" target=\"_blank\" rel=\"noopener nofollow ugc\">typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/math/equation.rs?plain=1#L141-L146</a></h4>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-rs?plain=1\">\n      <ol class=\"start lines\" start=\"141\" style=\"counter-reset: li-counter 140 ;\">\n          <li>/// Values of `scriptPercentScaleDown` and `scriptScriptPercentScaleDown`</li>\n          <li>/// respectively in the current font's MathConstants table.</li>\n          <li>#[internal]</li>\n          <li>#[default((70, 50))]</li>\n          <li>#[ghost]</li>\n          <li>pub script_scale: (i16, i16),</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>So the script size is 70% of the display size (I assume) and sscript is 50%.</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/math/sizes#functions-script\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/math/sizes#functions-script\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/math/sizes#functions-script\" target=\"_blank\" rel=\"noopener\">Sizes Functions – Typst Documentation</a></h3>\n\n  <p>Documentation for the sizes functions.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "It looks like it's not possible. You can open an issue requesting this feature. Here are related places in the code:\n\nhttps://github.com/typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/math/style.rs?plain=1#L216-L227\n\nhttps://github.com/typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/text/mod.rs?plain=1#L977-L986\n\nhttps://github.com/typst/typst/blob/1b2714e1a758d6ee0f9471fd1e49cb02f6d8cde4/crates/typst-library/src/math/equation.rs?plain=1#L141-L146\n\nSo the script size is 70% of the display size (I assume) and sscript is 50%.\n\nhttps://typst.app/docs/reference/math/sizes#functions-script",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 10.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10196,
      "post_number": 3,
      "username": "Ullrich_Kothe",
      "name": "Ullrich Köthe",
      "created_at": "2025-03-24T21:32:27.962Z",
      "updated_at": "2025-03-24T21:32:27.962Z",
      "cooked": "<p>That’s bad news. Absolutely everything should be customizable!</p>",
      "raw": "That's bad news. Absolutely everything should be customizable!",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 15.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1382
    },
    {
      "id": 10197,
      "post_number": 4,
      "username": "vmartel08",
      "name": "Vincent Martel",
      "created_at": "2025-03-24T21:48:04.557Z",
      "updated_at": "2025-03-24T21:49:43.156Z",
      "cooked": "<p>Good thing it’s open source! How customizable is that?</p>\n<aside class=\"onebox githubrepo\" data-onebox-src=\"https://github.com/typst/typst\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\" data-github-private-repo=\"false\">\n  <img width=\"690\" height=\"344\" src=\"https://forum.typst.app/uploads/default/optimized/2X/2/2bf5ee9881d20e30a3069ce1efe624561e4500ba_2_690x344.png\" class=\"thumbnail\" data-dominant-color=\"EDF2F2\">\n\n  <h3><a href=\"https://github.com/typst/typst\" target=\"_blank\" rel=\"noopener nofollow ugc\">GitHub - typst/typst: A new markup-based typesetting system that is...</a></h3>\n\n    <p><span class=\"github-repo-description\">A new markup-based typesetting system that is powerful and easy to learn.</span></p>\n</div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Good thing it’s open source! How customizable is that?\n\nhttps://github.com/typst/typst",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 26,
      "score": 55.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 936
    },
    {
      "id": 10198,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-24T21:49:25.787Z",
      "updated_at": "2025-03-24T21:49:25.787Z",
      "cooked": "<p>Typst is still in active development and is missing a lot of small things (hence 700+ opened issues). And also there is a thing as too much customizability. Again, if you want it, feel free to open an issue.</p>",
      "raw": "Typst is still in active development and is missing a lot of small things (hence 700+ opened issues). And also there is a thing as too much customizability. Again, if you want it, feel free to open an issue.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 49.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10199,
      "post_number": 6,
      "username": "Ullrich_Kothe",
      "name": "Ullrich Köthe",
      "created_at": "2025-03-24T21:56:29.419Z",
      "updated_at": "2025-03-24T21:58:01.180Z",
      "cooked": "<p>I can’t even convince the devs to accept my documentation improvements, see <a href=\"https://github.com/typst/typst/pull/6008\" rel=\"noopener nofollow ugc\">Revision of the Context documentation</a> and <a href=\"https://github.com/typst/typst/pull/6016\" rel=\"noopener nofollow ugc\">Revised Styling documentation</a>. So I consider this hopeless for now.</p>",
      "raw": "I can't even convince the devs to accept my documentation improvements, see [Revision of the Context documentation](https://github.com/typst/typst/pull/6008) and [Revised Styling documentation](https://github.com/typst/typst/pull/6016). So I consider this hopeless for now.",
      "reply_to_post_number": 4,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 19.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1382
    },
    {
      "id": 10205,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-25T06:13:16.143Z",
      "updated_at": "2025-03-25T06:13:16.143Z",
      "cooked": "<p>If you’re new to open-source, the key is patience. I looked at them and they are still open. For the first one it means that it’s still “work in progress”, for the second it means it wasn’t reviewed yet. I have a pull request stale for almost 2 months now: <a href=\"https://github.com/typst/typst/pull/5750\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Improved ratio and relative length docs by Andrew15-5 · Pull Request #5750 · typst/typst · GitHub</a>. Moreover, feature request and proposed changes are two completely different things, so relating one to another isn’t really helpful.</p>",
      "raw": "If you're new to open-source, the key is patience. I looked at them and they are still open. For the first one it means that it's still \"work in progress\", for the second it means it wasn't reviewed yet. I have a pull request stale for almost 2 months now: https://github.com/typst/typst/pull/5750. Moreover, feature request and proposed changes are two completely different things, so relating one to another isn't really helpful.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 23,
      "score": 64.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10206,
      "post_number": 8,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2025-03-25T06:24:46.304Z",
      "updated_at": "2025-03-25T06:24:46.304Z",
      "cooked": "<p>I don’t think that’s entirely fair. I have spent a non-trivial amount of time already reviewing your context documentation changes and it’s on a path to be merged. But especially for docs I can’t just merge it in good faith if I still see issues with it.</p>\n<p>A lot of PRs are currently waiting for review because my time is limited. I could spend all my time on code review but then I wouldn’t get to work on the roadmap at all. It’s a balance and sometimes it goes more into one and sometimes more into the other direction.</p>",
      "raw": "I don't think that's entirely fair. I have spent a non-trivial amount of time already reviewing your context documentation changes and it's on a path to be merged. But especially for docs I can't just merge it in good faith if I still see issues with it.\n\nA lot of PRs are currently waiting for review because my time is limited. I could spend all my time on code review but then I wouldn't get to work on the roadmap at all. It's a balance and sometimes it goes more into one and sometimes more into the other direction.",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 5,
      "reads": 23,
      "score": 89.6,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 10207,
      "post_number": 9,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2025-03-25T06:26:01.482Z",
      "updated_at": "2025-03-25T06:26:01.482Z",
      "cooked": "<p>As for this issue: One (extremely complicated) solution is patching the math font as that’s where the numbers come from.</p>",
      "raw": "As for this issue: One (extremely complicated) solution is patching the math font as that's where the numbers come from.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 10223,
      "post_number": 10,
      "username": "Ullrich_Kothe",
      "name": "Ullrich Köthe",
      "created_at": "2025-03-25T09:58:46.215Z",
      "updated_at": "2025-03-25T10:03:45.286Z",
      "cooked": "<p>I highly appreciate your responsiveness, it is really great. However, yesterday I was really frustrated because we didn’t make progress on the important questions (e.g. an improved introductory example). And a colleague told me that he has given up on Typst and returned to LaTeX. Unfortunately, I read your encouraging comment “I think we’re on a good path and nearing consensus on how this should look!” last.</p>",
      "raw": "I highly appreciate your responsiveness, it is really great. However, yesterday I was really frustrated because we didn't make progress on the important questions (e.g. an improved introductory example). And a colleague told me that he has given up on Typst and returned to LaTeX. Unfortunately, I read your encouraging comment \"I think we're on a good path and nearing consensus on how this should look!\" last.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1382
    },
    {
      "id": 10227,
      "post_number": 11,
      "username": "Ullrich_Kothe",
      "name": "Ullrich Köthe",
      "created_at": "2025-03-25T15:19:22.307Z",
      "updated_at": "2025-03-25T15:34:10.908Z",
      "cooked": "<p>I figured out that enclosing the subscript within a box gives sufficient control for my needs, for example via the following function:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let SUB(body, size: 100%) = context box[\n  #set text(size: size*0.8em)\n  #set par(leading: par.leading*50%)\n  $body$\n]\n\n// Usage:\n$ X_SUB(bold(y)\\ bold(z)) $\n</code></pre>\n<p>Of course, the specific formatting instructions are varied according to purpose. Thanks for your help!</p>",
      "raw": "I figured out that enclosing the subscript within a box gives sufficient control for my needs, for example via the following function:\n```typ\n#let SUB(body, size: 100%) = context box[\n  #set text(size: size*0.8em)\n  #set par(leading: par.leading*50%)\n  $body$\n]\n\n// Usage:\n$ X_SUB(bold(y)\\ bold(z)) $\n```\nOf course, the specific formatting instructions are varied according to purpose. Thanks for your help!",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 9.0,
      "accepted_answer": true,
      "trust_level": 0,
      "user_id": 1382
    }
  ],
  "scraped_at": "2025-06-10T09:50:05.397878"
}
{
  "topic_metadata": {
    "id": 3389,
    "title": "How to text wrap inside a table cell?",
    "slug": "how-to-text-wrap-inside-a-table-cell",
    "posts_count": 11,
    "created_at": "2025-03-25T02:34:11.871Z",
    "last_posted_at": "2025-03-25T09:47:41.012Z",
    "views": 137,
    "like_count": 2,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 7,
    "accepted_answer_username": "Marius",
    "tags": [
      "tables"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1711
  },
  "posts": [
    {
      "id": 10202,
      "post_number": 1,
      "username": "Marius",
      "name": "Marius",
      "created_at": "2025-03-25T02:34:11.963Z",
      "updated_at": "2025-03-25T07:40:24.766Z",
      "cooked": "<p>I am struggling since several hours when trying to let words within a table cell wrap so that they don’t overlap the table cell’s width. I would appreciate any hint in the right direction.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\n  width: 297mm,   // A4 landscape width\n  height: 210mm,  // A4 landscape height\n  margin: 10mm    // 10mm margin on all sides\n)\n\n#set text(size: 6pt)\n\n#let results = csv(\"example.csv\")\n\n// Filter to match the exact 14 columns\n#let expected-headers = (\n  \"id\", \"volume\", \"asset_group\", \"asset_id\", \"date\", \"source_type\", \n  \"gain_loss\", \"gain_loss_within_1_year\", \"gain_loss_ge_1_year\", \n  \"consumed_volumes\", \"years_passed_list\", \"consumed_ledger_ids\", \n  \"gain_loss_list\", \"source_reference\"\n)\n#let headers = results.at(0)  // Extract the first row as headers\n#let header-indices = headers.enumerate().filter(((i, h)) =&gt; expected-headers.contains(h)).map(((i, _)) =&gt; i)\n#let filtered-headers = expected-headers  // Use exact headers\n#let data = results.slice(1)  // Remaining rows as data\n#let filtered-data = data.map(row =&gt; header-indices.map(i =&gt; row.at(i)))\n\n// Adjusted table-columns for 14 columns, summing to ~277mm (297mm - 20mm margins)\n#let table-columns = (\n  15mm,  // id\n  20mm,  // volume\n  20mm,  // asset_group\n  20mm,  // asset_id\n  25mm,  // date\n  18mm,  // source_type\n  18mm,  // gain_loss\n  23mm,  // gain_loss_within_1_year\n  23mm,  // gain_loss_ge_1_year\n  20mm,  // consumed_volumes\n  20mm,  // years_passed_list\n  20mm,  // consumed_ledger_ids\n  20mm,  // gain_loss_list\n  15mm   // source_reference\n)  // Total: 277mm\n\n#let wrap-long-content(content) = {\n  // Debug: Log the type and raw content\n  let debug-prefix = \"TYPE: \" + type(content) + \" | \"\n  if type(content) == str {\n    // Debug: Confirm function is processing strings\n    let result = debug-prefix\n    // Handle timestamp-like strings\n    if content.match(regex(\"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\+\\d{2}\")) != none {\n      let parts = content.split(\" \")\n      if parts.len() == 2 {\n        result += parts.at(0) + \"\\n\" + parts.at(1)\n        return result\n      }\n    }\n    // Handle empty or NULL arrays\n    if content == \"{}\" or content == \"{NULL}\" {\n      return result + \"\"\n    }\n    // Handle arrays (split on commas)\n    if content.starts-with(\"{\") and content.ends-with(\"}\") {\n      let trimmed = content.trim(\"{\", \"}\")\n      if trimmed.len() == 0 { return result + \"\" }\n      let parts = trimmed.split(\",\")\n      result += parts.join(\"\\n\")\n      return result\n    }\n    // Handle long strings with no spaces\n    if content.len() &gt; 10 and content.match(regex(\"\\s\")) == none {\n      let chars = content.clusters()\n      let broken = \"\"\n      for (i, c) in chars.enumerate() {\n        broken += c\n        if i &gt; 0 and calc.rem(i, 10) == 0 { broken += sym.zws }\n      }\n      result += broken\n      return result\n    }\n    return result + content\n  } else if type(content) == content {\n    if content.has(\"text\") {\n      return wrap-long-content(content.text)\n    }\n  }\n  // Fallback for non-string/non-text content\n  return debug-prefix + repr(content)\n}\n\n// General cell styling with wrapping\n#show table.cell: it =&gt; block(\n  width: 100%,\n  breakable: true,\n  inset: 2pt\n)[\n  #set text(hyphenate: true)\n  #box(width: 100%, wrap-long-content(it))\n]\n\n// Specific header row styling with forced breaking on underscores\n#show table.cell.where(y: 0): it =&gt; block(\n  width: 100%,\n  breakable: true,\n  inset: 2pt\n)[\n  #set text(hyphenate: true, size: 7pt, weight: \"bold\")\n  #let header-text = if type(it.body) == str { it.body } else if it.body.has(\"text\") { it.body.text } else { repr(it.body).trim(\"[]\") }\n  #box(width: 100%, header-text.replace(\"_\", \"_\\n\"))\n]\n\n#table(\n  columns: table-columns,\n  table.header(\n    ..filtered-headers.map(h =&gt; [#h]),  // Convert headers to content\n    repeat: true  // Ensure the header repeats on every page\n  ),\n  ..filtered-data.flatten()  // Flatten the filtered data rows\n)\n</code></pre>",
      "raw": "I am struggling since several hours when trying to let words within a table cell wrap so that they don't overlap the table cell's width. I would appreciate any hint in the right direction.\n\n```typ\n#set page(\n  width: 297mm,   // A4 landscape width\n  height: 210mm,  // A4 landscape height\n  margin: 10mm    // 10mm margin on all sides\n)\n\n#set text(size: 6pt)\n\n#let results = csv(\"example.csv\")\n\n// Filter to match the exact 14 columns\n#let expected-headers = (\n  \"id\", \"volume\", \"asset_group\", \"asset_id\", \"date\", \"source_type\", \n  \"gain_loss\", \"gain_loss_within_1_year\", \"gain_loss_ge_1_year\", \n  \"consumed_volumes\", \"years_passed_list\", \"consumed_ledger_ids\", \n  \"gain_loss_list\", \"source_reference\"\n)\n#let headers = results.at(0)  // Extract the first row as headers\n#let header-indices = headers.enumerate().filter(((i, h)) => expected-headers.contains(h)).map(((i, _)) => i)\n#let filtered-headers = expected-headers  // Use exact headers\n#let data = results.slice(1)  // Remaining rows as data\n#let filtered-data = data.map(row => header-indices.map(i => row.at(i)))\n\n// Adjusted table-columns for 14 columns, summing to ~277mm (297mm - 20mm margins)\n#let table-columns = (\n  15mm,  // id\n  20mm,  // volume\n  20mm,  // asset_group\n  20mm,  // asset_id\n  25mm,  // date\n  18mm,  // source_type\n  18mm,  // gain_loss\n  23mm,  // gain_loss_within_1_year\n  23mm,  // gain_loss_ge_1_year\n  20mm,  // consumed_volumes\n  20mm,  // years_passed_list\n  20mm,  // consumed_ledger_ids\n  20mm,  // gain_loss_list\n  15mm   // source_reference\n)  // Total: 277mm\n\n#let wrap-long-content(content) = {\n  // Debug: Log the type and raw content\n  let debug-prefix = \"TYPE: \" + type(content) + \" | \"\n  if type(content) == str {\n    // Debug: Confirm function is processing strings\n    let result = debug-prefix\n    // Handle timestamp-like strings\n    if content.match(regex(\"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\+\\d{2}\")) != none {\n      let parts = content.split(\" \")\n      if parts.len() == 2 {\n        result += parts.at(0) + \"\\n\" + parts.at(1)\n        return result\n      }\n    }\n    // Handle empty or NULL arrays\n    if content == \"{}\" or content == \"{NULL}\" {\n      return result + \"\"\n    }\n    // Handle arrays (split on commas)\n    if content.starts-with(\"{\") and content.ends-with(\"}\") {\n      let trimmed = content.trim(\"{\", \"}\")\n      if trimmed.len() == 0 { return result + \"\" }\n      let parts = trimmed.split(\",\")\n      result += parts.join(\"\\n\")\n      return result\n    }\n    // Handle long strings with no spaces\n    if content.len() > 10 and content.match(regex(\"\\s\")) == none {\n      let chars = content.clusters()\n      let broken = \"\"\n      for (i, c) in chars.enumerate() {\n        broken += c\n        if i > 0 and calc.rem(i, 10) == 0 { broken += sym.zws }\n      }\n      result += broken\n      return result\n    }\n    return result + content\n  } else if type(content) == content {\n    if content.has(\"text\") {\n      return wrap-long-content(content.text)\n    }\n  }\n  // Fallback for non-string/non-text content\n  return debug-prefix + repr(content)\n}\n\n// General cell styling with wrapping\n#show table.cell: it => block(\n  width: 100%,\n  breakable: true,\n  inset: 2pt\n)[\n  #set text(hyphenate: true)\n  #box(width: 100%, wrap-long-content(it))\n]\n\n// Specific header row styling with forced breaking on underscores\n#show table.cell.where(y: 0): it => block(\n  width: 100%,\n  breakable: true,\n  inset: 2pt\n)[\n  #set text(hyphenate: true, size: 7pt, weight: \"bold\")\n  #let header-text = if type(it.body) == str { it.body } else if it.body.has(\"text\") { it.body.text } else { repr(it.body).trim(\"[]\") }\n  #box(width: 100%, header-text.replace(\"_\", \"_\\n\"))\n]\n\n#table(\n  columns: table-columns,\n  table.header(\n    ..filtered-headers.map(h => [#h]),  // Convert headers to content\n    repeat: true  // Ensure the header repeats on every page\n  ),\n  ..filtered-data.flatten()  // Flatten the filtered data rows\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 455.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1384
    },
    {
      "id": 10209,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-03-25T06:38:34.568Z",
      "updated_at": "2025-03-25T06:38:34.568Z",
      "cooked": "<p>Could you provide some data that exhibits the behavior you are running into?  It’s much easier to answer questions with a minimum working example (MWE).  Currently I can’t recreate your problem because compilation fails on the line <code>FILENAME</code> because the variable isn’t defined anywhere (plus I don’t have any data to display in the table).</p>",
      "raw": "Could you provide some data that exhibits the behavior you are running into?  It's much easier to answer questions with a minimum working example (MWE).  Currently I can't recreate your problem because compilation fails on the line `FILENAME` because the variable isn't defined anywhere (plus I don't have any data to display in the table).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 25.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 10210,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-25T06:53:06.886Z",
      "updated_at": "2025-03-25T07:00:59.202Z",
      "cooked": "<p>A website that can be helpful: <a href=\"https://sscce.org\" rel=\"noopener nofollow ugc\">https://sscce.org</a>.</p>\n<hr>\n<p>The set page rule can be simplified like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(flipped: true, margin: 1cm)\n</code></pre>\n<p>I suspect that you just need to use these:</p>\n<ul>\n<li><a href=\"https://typst.app/docs/reference/model/table/#parameters-inset\"><code>table.inset</code></a> or <a href=\"https://typst.app/docs/reference/model/table/#definitions-cell-inset\"><code>table.cell.inset</code></a></li>\n<li><a href=\"https://typst.app/docs/reference/model/par/#parameters-justify\"><code>par.justify</code></a></li>\n<li><a href=\"https://typst.app/docs/reference/text/text/#parameters-hyphenate\"><code>text.hyphenate</code></a></li>\n<li><a href=\"https://typst.app/docs/reference/text/text/#parameters-size\"><code>text.size</code></a></li>\n<li><a href=\"https://typst.app/docs/reference/text/text/#parameters-costs\"><code>text.costs</code></a></li>\n</ul>\n<p>The problem the way it’s phrased should be very trivial and the fact that there is so much code is very surprising.</p>",
      "raw": "A website that can be helpful: https://sscce.org.\n\n---\n\nThe set page rule can be simplified like this:\n\n```typ\n#set page(flipped: true, margin: 1cm)\n```\n\nI suspect that you just need to use these:\n- [`table.inset`](https://typst.app/docs/reference/model/table/#parameters-inset) or [`table.cell.inset`](https://typst.app/docs/reference/model/table/#definitions-cell-inset)\n- [`par.justify`](https://typst.app/docs/reference/model/par/#parameters-justify)\n- [`text.hyphenate`](https://typst.app/docs/reference/text/text/#parameters-hyphenate)\n- [`text.size`](https://typst.app/docs/reference/text/text/#parameters-size)\n- [`text.costs`](https://typst.app/docs/reference/text/text/#parameters-costs)\n\nThe problem the way it's phrased should be very trivial and the fact that there is so much code is very surprising.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 30.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10211,
      "post_number": 4,
      "username": "Marius",
      "name": "Marius",
      "created_at": "2025-03-25T07:25:13.455Z",
      "updated_at": "2025-03-25T07:35:16.134Z",
      "cooked": "<p>Thanks for your replies. My template code reflects multiple iterations with the Groke AI because I thought that would be the easiest to get quick results. For instance I would prefer to let the header rows auto-break on underscore but only got it working with the custom code for that. While I can live with that the cell overlapping is a real issue.</p>\n<p>I simplied the “<span class=\"hashtag-raw\">#set</span> page” part as suggested and adapted my filename placeholder so you can more easily reproduce.</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"Andrew\" data-post=\"3\" data-topic=\"3389\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>I suspect that you just need to use these:</p>\n<ul>\n<li>[<code>table.inset</code> ] or [<code>table.cell.inset</code>]</li>\n<li>[<code>par.justify</code> ]</li>\n<li>[<code>text.hyphenate</code> ]</li>\n<li>[<code>text.size</code>]</li>\n<li>[<code>text.costs</code> ]</li>\n</ul>\n</blockquote>\n</aside>\n<p>I am afraid this only works well for natural words but not for identifiers like 3ddGwdKkUuUzcxwbMTXXooHMBMDKUieSmb69sRiZzdsVez7xfr2aJhopWk5fV3UvebuZ7vwhheCwzFB2Yx24S7hi.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(flipped: true, margin: 1cm)\n\n#set text(size: 6pt)\n\n#let results = csv(\"example.csv\")\n\n// Filter to match the exact 14 columns\n#let expected-headers = (\n  \"id\", \"volume\", \"asset_group\", \"asset_id\", \"date\", \"source_type\", \n  \"gain_loss\", \"gain_loss_within_1_year\", \"gain_loss_ge_1_year\", \n  \"consumed_volumes\", \"years_passed_list\", \"consumed_ledger_ids\", \n  \"gain_loss_list\", \"source_reference\"\n)\n#let headers = results.at(0)  // Extract the first row as headers\n#let header-indices = headers.enumerate().filter(((i, h)) =&gt; expected-headers.contains(h)).map(((i, _)) =&gt; i)\n#let filtered-headers = expected-headers  // Use exact headers\n#let data = results.slice(1)  // Remaining rows as data\n#let filtered-data = data.map(row =&gt; header-indices.map(i =&gt; row.at(i)))\n\n// Adjusted table-columns for 14 columns, summing to ~277mm (297mm - 20mm margins)\n#let table-columns = (\n  15mm,  // id\n  20mm,  // volume\n  20mm,  // asset_group\n  20mm,  // asset_id\n  25mm,  // date\n  18mm,  // source_type\n  18mm,  // gain_loss\n  23mm,  // gain_loss_within_1_year\n  23mm,  // gain_loss_ge_1_year\n  20mm,  // consumed_volumes\n  20mm,  // years_passed_list\n  20mm,  // consumed_ledger_ids\n  20mm,  // gain_loss_list\n  15mm   // source_reference\n)  // Total: 277mm\n\n#let wrap-long-content(content) = {\n  if type(content) == str {\n    // Handle timestamp-like strings\n    if content.match(regex(\"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\+\\d{2}\")) != none {\n      let parts = content.split(\" \")\n      if parts.len() == 2 {\n        return parts.at(0) + \"\\n\" + parts.at(1)\n      }\n    }\n    // Handle empty or NULL arrays\n    if content == \"{}\" or content == \"{NULL}\" {\n      return \"\"\n    }\n    // Handle arrays (split on commas)\n    if content.starts-with(\"{\") and content.ends-with(\"}\") {\n      let trimmed = content.trim(\"{\", \"}\")\n      if trimmed.len() == 0 { return \"\" }\n      let parts = trimmed.split(\",\")\n      return parts.join(\"\\n\")\n    }\n    // Handle long strings with no spaces\n    if content.len() &gt; 10 and content.match(regex(\"\\s\")) == none {\n      let chars = content.clusters()\n      let broken = \"\"\n      for (i, c) in chars.enumerate() {\n        broken += c\n        if i &gt; 0 and calc.rem(i, 10) == 0 { broken += sym.zws }\n      }\n      return broken\n    }\n    return content\n  } else if type(content) == content {\n    if content.has(\"text\") {\n      return wrap-long-content(content.text)\n    }\n  }\n  // Fallback for non-string/non-text content\n  return content\n}\n\n// General cell styling with wrapping\n#show table.cell: it =&gt; block(\n  width: 100%,\n  breakable: true,\n  inset: 2pt\n)[\n  #set text(hyphenate: true)\n  #box(width: 100%, wrap-long-content(it))\n]\n\n// Specific header row styling with forced breaking on underscores\n#show table.cell.where(y: 0): it =&gt; block(\n  width: 100%,\n  breakable: true,\n  inset: 2pt\n)[\n  #set text(hyphenate: true, size: 7pt, weight: \"bold\")\n  #let header-text = if type(it.body) == str { it.body } else if it.body.has(\"text\") { it.body.text } else { repr(it.body).trim(\"[]\") }\n  #box(width: 100%, header-text.replace(\"_\", \"_\\n\"))\n]\n\n#table(\n  columns: table-columns,\n  table.header(\n    ..filtered-headers.map(h =&gt; [#h]),  // Convert headers to content\n    repeat: true  // Ensure the header repeats on every page\n  ),\n  ..filtered-data.flatten()  // Flatten the filtered data rows\n)\n</code></pre>\n<p>example.csv</p>\n<pre data-code-wrap=\"csv\"><code class=\"lang-csv\">id,volume,asset_group,asset_id,date,source_type,gain_loss,gain_loss_within_1_year,gain_loss_ge_1_year,consumed_volumes,years_passed_list,consumed_ledger_ids,gain_loss_list,source_reference\n530285709,121.0587935,abc,3ddGwdKkUuUzcxwbMTXXooHMBMDKUieSmb69sRiZzdsVez7xfr2aJhopWk5fV3UvebuZ7vwhheCwzFB2Yx24S7hi,2013-12-31 01:00:00+01,2,,0,0,{NULL},{NULL},{NULL},{NULL},3ddGwdKkUuUzcxwbMTXXooHMBMDKUieSmb69sRiZzdsVez7xfr2aJhopWk5fV3UvebuZ7vwhheCwzFB2Yx24S7hi\n</code></pre>\n<p>Renders to</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/7/755d3806e5efd7b151f3a157f5997c2c3a24f802.png\" data-download-href=\"https://forum.typst.app/uploads/default/755d3806e5efd7b151f3a157f5997c2c3a24f802\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/7/755d3806e5efd7b151f3a157f5997c2c3a24f802_2_690x71.png\" alt=\"image\" data-base62-sha1=\"gKfAeTcBMVvNtgyvz5t4h95pski\" width=\"690\" height=\"71\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/7/755d3806e5efd7b151f3a157f5997c2c3a24f802_2_690x71.png, https://forum.typst.app/uploads/default/optimized/2X/7/755d3806e5efd7b151f3a157f5997c2c3a24f802_2_1035x106.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/7/755d3806e5efd7b151f3a157f5997c2c3a24f802_2_1380x142.png 2x\" data-dominant-color=\"EDEDED\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">3028×314 77.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Thanks for your replies. My template code reflects multiple iterations with the Groke AI because I thought that would be the easiest to get quick results. For instance I would prefer to let the header rows auto-break on underscore but only got it working with the custom code for that. While I can live with that the cell overlapping is a real issue.\n\nI simplied the \"#set page\" part as suggested and adapted my filename placeholder so you can more easily reproduce.\n\n[quote=\"Andrew, post:3, topic:3389\"]\nI suspect that you just need to use these:\n\n* [`table.inset` ] or [`table.cell.inset`]\n* [`par.justify` ]\n* [`text.hyphenate` ]\n* [`text.size`]\n* [`text.costs` ]\n[/quote]\n\nI am afraid this only works well for natural words but not for identifiers like 3ddGwdKkUuUzcxwbMTXXooHMBMDKUieSmb69sRiZzdsVez7xfr2aJhopWk5fV3UvebuZ7vwhheCwzFB2Yx24S7hi.\n\n```typ\n#set page(flipped: true, margin: 1cm)\n\n#set text(size: 6pt)\n\n#let results = csv(\"example.csv\")\n\n// Filter to match the exact 14 columns\n#let expected-headers = (\n  \"id\", \"volume\", \"asset_group\", \"asset_id\", \"date\", \"source_type\", \n  \"gain_loss\", \"gain_loss_within_1_year\", \"gain_loss_ge_1_year\", \n  \"consumed_volumes\", \"years_passed_list\", \"consumed_ledger_ids\", \n  \"gain_loss_list\", \"source_reference\"\n)\n#let headers = results.at(0)  // Extract the first row as headers\n#let header-indices = headers.enumerate().filter(((i, h)) => expected-headers.contains(h)).map(((i, _)) => i)\n#let filtered-headers = expected-headers  // Use exact headers\n#let data = results.slice(1)  // Remaining rows as data\n#let filtered-data = data.map(row => header-indices.map(i => row.at(i)))\n\n// Adjusted table-columns for 14 columns, summing to ~277mm (297mm - 20mm margins)\n#let table-columns = (\n  15mm,  // id\n  20mm,  // volume\n  20mm,  // asset_group\n  20mm,  // asset_id\n  25mm,  // date\n  18mm,  // source_type\n  18mm,  // gain_loss\n  23mm,  // gain_loss_within_1_year\n  23mm,  // gain_loss_ge_1_year\n  20mm,  // consumed_volumes\n  20mm,  // years_passed_list\n  20mm,  // consumed_ledger_ids\n  20mm,  // gain_loss_list\n  15mm   // source_reference\n)  // Total: 277mm\n\n#let wrap-long-content(content) = {\n  if type(content) == str {\n    // Handle timestamp-like strings\n    if content.match(regex(\"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\+\\d{2}\")) != none {\n      let parts = content.split(\" \")\n      if parts.len() == 2 {\n        return parts.at(0) + \"\\n\" + parts.at(1)\n      }\n    }\n    // Handle empty or NULL arrays\n    if content == \"{}\" or content == \"{NULL}\" {\n      return \"\"\n    }\n    // Handle arrays (split on commas)\n    if content.starts-with(\"{\") and content.ends-with(\"}\") {\n      let trimmed = content.trim(\"{\", \"}\")\n      if trimmed.len() == 0 { return \"\" }\n      let parts = trimmed.split(\",\")\n      return parts.join(\"\\n\")\n    }\n    // Handle long strings with no spaces\n    if content.len() > 10 and content.match(regex(\"\\s\")) == none {\n      let chars = content.clusters()\n      let broken = \"\"\n      for (i, c) in chars.enumerate() {\n        broken += c\n        if i > 0 and calc.rem(i, 10) == 0 { broken += sym.zws }\n      }\n      return broken\n    }\n    return content\n  } else if type(content) == content {\n    if content.has(\"text\") {\n      return wrap-long-content(content.text)\n    }\n  }\n  // Fallback for non-string/non-text content\n  return content\n}\n\n// General cell styling with wrapping\n#show table.cell: it => block(\n  width: 100%,\n  breakable: true,\n  inset: 2pt\n)[\n  #set text(hyphenate: true)\n  #box(width: 100%, wrap-long-content(it))\n]\n\n// Specific header row styling with forced breaking on underscores\n#show table.cell.where(y: 0): it => block(\n  width: 100%,\n  breakable: true,\n  inset: 2pt\n)[\n  #set text(hyphenate: true, size: 7pt, weight: \"bold\")\n  #let header-text = if type(it.body) == str { it.body } else if it.body.has(\"text\") { it.body.text } else { repr(it.body).trim(\"[]\") }\n  #box(width: 100%, header-text.replace(\"_\", \"_\\n\"))\n]\n\n#table(\n  columns: table-columns,\n  table.header(\n    ..filtered-headers.map(h => [#h]),  // Convert headers to content\n    repeat: true  // Ensure the header repeats on every page\n  ),\n  ..filtered-data.flatten()  // Flatten the filtered data rows\n)\n```\n\nexample.csv\n\n```csv\nid,volume,asset_group,asset_id,date,source_type,gain_loss,gain_loss_within_1_year,gain_loss_ge_1_year,consumed_volumes,years_passed_list,consumed_ledger_ids,gain_loss_list,source_reference\n530285709,121.0587935,abc,3ddGwdKkUuUzcxwbMTXXooHMBMDKUieSmb69sRiZzdsVez7xfr2aJhopWk5fV3UvebuZ7vwhheCwzFB2Yx24S7hi,2013-12-31 01:00:00+01,2,,0,0,{NULL},{NULL},{NULL},{NULL},3ddGwdKkUuUzcxwbMTXXooHMBMDKUieSmb69sRiZzdsVez7xfr2aJhopWk5fV3UvebuZ7vwhheCwzFB2Yx24S7hi\n```\n\nRenders to\n\n![image|690x71](upload://gKfAeTcBMVvNtgyvz5t4h95pski.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 24,
      "score": 14.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1384
    },
    {
      "id": 10212,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-25T07:40:01.429Z",
      "updated_at": "2025-03-25T07:41:27.618Z",
      "cooked": "<p>You can follow the answer at <a href=\"https://forum.typst.app/t/how-to-wrap-long-unbreakable-text-in-a-table-cell/1224/2\" class=\"inline-onebox\">How to wrap long \"unbreakable\" text in a table cell? - #2 by Eric</a> and use a regex to split the ID.</p>\n<hr>\n<p>P.S.: I have renamed your topic to “How to tex wrap inside a table cell?”, see</p>\n<aside class=\"quote no-group\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n</aside>",
      "raw": "You can follow the answer at https://forum.typst.app/t/how-to-wrap-long-unbreakable-text-in-a-table-cell/1224/2?u=quachpas and use a regex to split the ID.\n\n----------------------------------\nP.S.: I have renamed your topic to \"How to tex wrap inside a table cell?\", see\n[quote=\"reknih, post:1, topic:11\"]\n**Good titles are questions you would ask your friend about Typst.**\n[/quote]",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 29.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 10213,
      "post_number": 6,
      "username": "Marius",
      "name": "Marius",
      "created_at": "2025-03-25T07:45:12.601Z",
      "updated_at": "2025-03-25T07:45:12.601Z",
      "cooked": "<p>I am already giving long strings are special treatment</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let wrap-long-content(content) = {\n  if type(content) == str {\n    // Handle timestamp-like strings\n    if content.match(regex(\"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\+\\d{2}\")) != none {\n      let parts = content.split(\" \")\n      if parts.len() == 2 {\n        return parts.at(0) + \"\\n\" + parts.at(1)\n      }\n    }\n    // Handle empty or NULL arrays\n    if content == \"{}\" or content == \"{NULL}\" {\n      return \"\"\n    }\n    // Handle arrays (split on commas)\n    if content.starts-with(\"{\") and content.ends-with(\"}\") {\n      let trimmed = content.trim(\"{\", \"}\")\n      if trimmed.len() == 0 { return \"\" }\n      let parts = trimmed.split(\",\")\n      return parts.join(\"\\n\")\n    }\n    // Handle long strings with no spaces\n    if content.len() &gt; 10 and content.match(regex(\"\\s\")) == none {\n      let chars = content.clusters()\n      let broken = \"\"\n      for (i, c) in chars.enumerate() {\n        broken += c\n        if i &gt; 0 and calc.rem(i, 10) == 0 { broken += sym.zws }\n      }\n      return broken\n    }\n    return content\n  } else if type(content) == content {\n    if content.has(\"text\") {\n      return wrap-long-content(content.text)\n    }\n  }\n  // Fallback for non-string/non-text content\n  return content\n}\n\n// General cell styling with wrapping\n#show table.cell: it =&gt; block(\n  width: 100%,\n  breakable: true,\n  inset: 2pt\n)[\n  #set text(hyphenate: true)\n  #box(width: 100%, wrap-long-content(it))\n]\n</code></pre>",
      "raw": "I am already giving long strings are special treatment\n\n```typ\n#let wrap-long-content(content) = {\n  if type(content) == str {\n    // Handle timestamp-like strings\n    if content.match(regex(\"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\+\\d{2}\")) != none {\n      let parts = content.split(\" \")\n      if parts.len() == 2 {\n        return parts.at(0) + \"\\n\" + parts.at(1)\n      }\n    }\n    // Handle empty or NULL arrays\n    if content == \"{}\" or content == \"{NULL}\" {\n      return \"\"\n    }\n    // Handle arrays (split on commas)\n    if content.starts-with(\"{\") and content.ends-with(\"}\") {\n      let trimmed = content.trim(\"{\", \"}\")\n      if trimmed.len() == 0 { return \"\" }\n      let parts = trimmed.split(\",\")\n      return parts.join(\"\\n\")\n    }\n    // Handle long strings with no spaces\n    if content.len() > 10 and content.match(regex(\"\\s\")) == none {\n      let chars = content.clusters()\n      let broken = \"\"\n      for (i, c) in chars.enumerate() {\n        broken += c\n        if i > 0 and calc.rem(i, 10) == 0 { broken += sym.zws }\n      }\n      return broken\n    }\n    return content\n  } else if type(content) == content {\n    if content.has(\"text\") {\n      return wrap-long-content(content.text)\n    }\n  }\n  // Fallback for non-string/non-text content\n  return content\n}\n\n// General cell styling with wrapping\n#show table.cell: it => block(\n  width: 100%,\n  breakable: true,\n  inset: 2pt\n)[\n  #set text(hyphenate: true)\n  #box(width: 100%, wrap-long-content(it))\n]\n```",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1384
    },
    {
      "id": 10214,
      "post_number": 7,
      "username": "Marius",
      "name": "Marius",
      "created_at": "2025-03-25T07:54:01.458Z",
      "updated_at": "2025-03-25T07:54:01.458Z",
      "cooked": "<p>this regex works good for me</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show regex(\"[A-Za-z0-9]+\"): it =&gt; {\n  it.text.codepoints().join(sym.zws)\n}\n</code></pre>",
      "raw": "this regex works good for me\n\n```typ\n#show regex(\"[A-Za-z0-9]+\"): it => {\n  it.text.codepoints().join(sym.zws)\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 64.0,
      "accepted_answer": true,
      "trust_level": 0,
      "user_id": 1384
    },
    {
      "id": 10215,
      "post_number": 8,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-25T07:55:27.562Z",
      "updated_at": "2025-03-25T07:55:27.562Z",
      "cooked": "<p>Don’t forget to tick the answer checkbox if you found an answer satisfying ;). This marks the topic as solved.</p>",
      "raw": "Don't forget to tick the answer checkbox if you found an answer satisfying ;). This marks the topic as solved.",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 10216,
      "post_number": 9,
      "username": "Marius",
      "name": "Marius",
      "created_at": "2025-03-25T08:09:38.651Z",
      "updated_at": "2025-03-25T08:09:45.883Z",
      "cooked": "<p>Allow me a follow-up question. When inserting sym.zws after each character selecting the whole string via double click does not work anymore which is different to behavior we are used to see on websites. Is there a workaround for that?</p>",
      "raw": "Allow me a follow-up question. When inserting sym.zws after each character selecting the whole string via double click does not work anymore which is different to behavior we are used to see on websites. Is there a workaround for that?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 8.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1384
    },
    {
      "id": 10220,
      "post_number": 10,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-25T09:41:32.208Z",
      "updated_at": "2025-03-25T09:41:32.208Z",
      "cooked": "<p>A simpler regex would be <code>\\w+</code>, but it also matches letters/numbers from any script.</p>",
      "raw": "A simpler regex would be `\\w+`, but it also matches letters/numbers from any script.",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10221,
      "post_number": 11,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-25T09:47:41.012Z",
      "updated_at": "2025-03-25T09:48:13.693Z",
      "cooked": "<p>In Okular v24.12.3 selecting a whole line at a time works just fine.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show regex(\"\\w+\"): it =&gt; it.text.clusters().intersperse(sym.zws).join()\nsthciesatsctihascthiesathcsietahcstiehasctiheastchienastchiensatchiensatchieasnctiheasnctiheasntchieasntciheasnticheascitea\n</code></pre>\n<p>Oh, and also for some situations there is a difference between code points and code point clusters, so generally speaking <code>.clusters()</code> is superior, unless you specifically need to cut by code points.</p>",
      "raw": "In Okular v24.12.3 selecting a whole line at a time works just fine.\n\n```typ\n#show regex(\"\\w+\"): it => it.text.clusters().intersperse(sym.zws).join()\nsthciesatsctihascthiesathcsietahcstiehasctiheastchienastchiensatchiensatchieasnctiheasnctiheasntchieasntciheasnticheascitea\n```\n\nOh, and also for some situations there is a difference between code points and code point clusters, so generally speaking `.clusters()` is superior, unless you specifically need to cut by code points.",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:50:04.641657"
}
