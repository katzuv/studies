{
  "topic_metadata": {
    "id": 600,
    "title": "Why bottom pad in paragraph breaks left pad in quote?",
    "slug": "why-bottom-pad-in-paragraph-breaks-left-pad-in-quote",
    "posts_count": 14,
    "created_at": "2024-09-23T07:29:37.926Z",
    "last_posted_at": "2024-09-24T08:47:07.787Z",
    "views": 132,
    "like_count": 4,
    "reply_count": 11,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "Andrew",
    "tags": [
      "layout",
      "spacing"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1258
  },
  "posts": [
    {
      "id": 2333,
      "post_number": 1,
      "username": "JosiNeto",
      "name": "Josí Neto",
      "created_at": "2024-09-23T07:29:38.055Z",
      "updated_at": "2024-09-23T07:32:23.641Z",
      "cooked": "<p>If I add a relative bottom padding to paragraphs via <code>show</code> rule, it breaks an absolute left padding to quotes, which gets then wrong size. A minimal working example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\"a7\") // just for presentation here\n#show quote: set pad(left: 1cm)\nA text.\n\n#quote(block: true)[This quote gets correct padding.]\n\n#show par: it =&gt; {\n  pad(bottom: 1em, it)\n}\n#quote(block: true)[This quote gets wrong padding.]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/d9a57ed6b89ad4a63eadd3f1b1b7ac7472df2153.png\" data-download-href=\"https://forum.typst.app/uploads/default/d9a57ed6b89ad4a63eadd3f1b1b7ac7472df2153\" title=\"mwe\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/d9a57ed6b89ad4a63eadd3f1b1b7ac7472df2153_2_264x375.png\" alt=\"mwe\" data-base62-sha1=\"v3obnjgwzHfcEi6Zwzca6LgFnQ7\" width=\"264\" height=\"375\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/d9a57ed6b89ad4a63eadd3f1b1b7ac7472df2153_2_264x375.png, https://forum.typst.app/uploads/default/optimized/1X/d9a57ed6b89ad4a63eadd3f1b1b7ac7472df2153_2_396x562.png 1.5x, https://forum.typst.app/uploads/default/original/1X/d9a57ed6b89ad4a63eadd3f1b1b7ac7472df2153.png 2x\" data-dominant-color=\"FCFCFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">mwe</span><span class=\"informations\">420×595 28.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Ideally, in fact, I would use a weak vertical space after every paragraph, not padding. I tried to do so with code below, but it doesn’t work. That’s why I resorted to the <code>pad</code> function. If anyone knows a better way to accomplish this, please let me know.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show par: it =&gt; {\n  it\n  v(1em, weak: true)\n}\n</code></pre>",
      "raw": "If I add a relative bottom padding to paragraphs via `show` rule, it breaks an absolute left padding to quotes, which gets then wrong size. A minimal working example:\n\n```typ\n#set page(\"a7\") // just for presentation here\n#show quote: set pad(left: 1cm)\nA text.\n\n#quote(block: true)[This quote gets correct padding.]\n\n#show par: it => {\n  pad(bottom: 1em, it)\n}\n#quote(block: true)[This quote gets wrong padding.]\n```\n\n![mwe|352x500, 75%](upload://v3obnjgwzHfcEi6Zwzca6LgFnQ7.png)\n\n\nIdeally, in fact, I would use a weak vertical space after every paragraph, not padding. I tried to do so with code below, but it doesn't work. That's why I resorted to the `pad` function. If anyone knows a better way to accomplish this, please let me know.\n\n```typ\n#show par: it => {\n  it\n  v(1em, weak: true)\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 332.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 376
    },
    {
      "id": 2335,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-23T07:53:51.921Z",
      "updated_at": "2024-09-23T07:54:30.687Z",
      "cooked": "<p>Hello,<br>\nThe way you are writing things results in the following code:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\"a7\") // just for presentation here\n#quote(block: false)[\n  #set pad(left: 1cm)\n  Not padded.\n  #pad(bottom: 1em)[Padded.]\n]\n</code></pre>\n<p>To explain further:</p>\n<ol>\n<li>The first show rule sets the <code>left</code> property of <code>pad</code> for the entire document.</li>\n<li>The second show rule wraps the content of any <code>par</code> in <code>pad(bottom: 1em)</code>.</li>\n</ol>\n<p>The two rules do not interfere with each other. You can read the documentation at <a href=\"https://typst.app/docs/reference/styling/#:~:text=Work%20deadline%5D-,Show%20rules,-With%20show%20rules\" class=\"inline-onebox\">Styling – Typst Documentation</a> to get a better idea of how show rules work!</p>",
      "raw": "Hello,\nThe way you are writing things results in the following code:\n```typ\n#set page(\"a7\") // just for presentation here\n#quote(block: false)[\n  #set pad(left: 1cm)\n  Not padded.\n  #pad(bottom: 1em)[Padded.]\n]\n```\n\nTo explain further:\n1. The first show rule sets the `left` property of `pad` for the entire document.\n2. The second show rule wraps the content of any `par` in `pad(bottom: 1em)`.\n\nThe two rules do not interfere with each other. You can read the documentation at https://typst.app/docs/reference/styling/#:~:text=Work%20deadline%5D-,Show%20rules,-With%20show%20rules to get a better idea of how show rules work!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 12.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2397,
      "post_number": 3,
      "username": "JosiNeto",
      "name": "Josí Neto",
      "created_at": "2024-09-23T16:55:35.861Z",
      "updated_at": "2024-09-23T16:55:35.861Z",
      "cooked": "<p>It seems you didn’t try the minimal working example I wrote. I’ve put in it very small paragraphs and quotes, and a little padding (1cm) but the problem happens independently of that. Also, you’ve cited the docs: please note that I’ve styled the quotes according to <a href=\"https://typst.app/docs/reference/model/quote/\">the quotes documentation</a>.</p>\n<p>So, anyone has any idea why a paragraph’s bottom padding interferes (doubles) a quote’s left padding?</p>",
      "raw": "It seems you didn't try the minimal working example I wrote. I've put in it very small paragraphs and quotes, and a little padding (1cm) but the problem happens independently of that. Also, you've cited the docs: please note that I've styled the quotes according to [the quotes documentation](https://typst.app/docs/reference/model/quote/).\n\nSo, anyone has any idea why a paragraph's bottom padding interferes (doubles) a quote's left padding?",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 15.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 376
    },
    {
      "id": 2403,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-23T18:09:09.282Z",
      "updated_at": "2024-09-23T18:09:09.282Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"JosiNeto\" data-post=\"3\" data-topic=\"600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/josineto/48/393_2.png\" class=\"avatar\"> JosiNeto:</div>\n<blockquote>\n<p>So, anyone has any idea why a paragraph’s bottom padding interferes (doubles) a quote’s left padding?</p>\n</blockquote>\n</aside>\n<p>The problem, as I understand it, is that <code>show quote: set pad(...)</code> doesn’t just affect the specific <code>pad</code> that quote itself adds, but all <code>pad</code>s inside the <code>quote</code>. Your second show rule adds another <code>pad</code> inside, so it also gets <code>left: 1cm</code>.</p>\n<p>Unfortunately I’m not sure how to best fix this cleanly. As a workaround, you can manually specify <code>left: 0em</code> for that <code>pad</code>, I wouldn’t consider that clean really clean…</p>",
      "raw": "[quote=\"JosiNeto, post:3, topic:600\"]\nSo, anyone has any idea why a paragraph’s bottom padding interferes (doubles) a quote’s left padding?\n[/quote]\n\nThe problem, as I understand it, is that `show quote: set pad(...)` doesn't just affect the specific `pad` that quote itself adds, but all `pad`s inside the `quote`. Your second show rule adds another `pad` inside, so it also gets `left: 1cm`.\n\nUnfortunately I'm not sure how to best fix this cleanly. As a workaround, you can manually specify `left: 0em` for that `pad`, I wouldn't consider that clean really clean...",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 27,
      "score": 5.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2406,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-23T19:01:21.916Z",
      "updated_at": "2024-09-24T08:13:20.390Z",
      "cooked": "<p>Yeah, there is one pad already existing: <a href=\"https://github.com/typst/typst/blob/40fcd97d584fc1dfa6446bc4922d3b1e440e0afd/crates/typst/src/model/quote.rs#L216\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">typst/crates/typst/src/model/quote.rs at 40fcd97d584fc1dfa6446bc4922d3b1e440e0afd · typst/typst · GitHub</a>. The second one would wrap the whole quote. So there are 2 <code>pad</code> elements in total. And since the show-set rule is global, it applies to both <code>pad</code>s. Which indeed will explain why left padding has a x2 multiplier when it gets set.</p>\n<p>You probably don’t need a second <code>pad</code>, so I would write the last show rule like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show quote: set pad(bottom: 1em)\n</code></pre>\n<p>Otherwise, the solution given by <a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a> is probably your next best bet.</p>",
      "raw": "Yeah, there is one pad already existing: https://github.com/typst/typst/blob/40fcd97d584fc1dfa6446bc4922d3b1e440e0afd/crates/typst/src/model/quote.rs#L216. The second one would wrap the whole quote. So there are 2 `pad` elements in total. And since the show-set rule is global, it applies to both `pad`s. Which indeed will explain why left padding has a x2 multiplier when it gets set.\n\nYou probably don't need a second `pad`, so I would write the last show rule like this:\n\n```typ\n#show quote: set pad(bottom: 1em)\n```\n\nOtherwise, the solution given by @SillyFreak is probably your next best bet.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 24.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2408,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-23T20:54:47.837Z",
      "updated_at": "2024-09-23T20:54:57.125Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"5\" data-topic=\"600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>You probably don’t need a second <code>pad</code>, so I would write the last show rule like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show par: set pad(bottom: 1em)\n</code></pre>\n</blockquote>\n</aside>\n<p>I would have suggested that, but it doesn’t seem to do anything; I’m not sure why. Vertical spacing between blocks is something I have not understood fully yet…</p>",
      "raw": "[quote=\"Andrew, post:5, topic:600\"]\nYou probably don’t need a second `pad`, so I would write the last show rule like this:\n\n```typ\n#show par: set pad(bottom: 1em)\n```\n[/quote]\n\nI would have suggested that, but it doesn't seem to do anything; I'm not sure why. Vertical spacing between blocks is something I have not understood fully yet...",
      "reply_to_post_number": 5,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 1,
      "reads": 26,
      "score": 35.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2416,
      "post_number": 7,
      "username": "JosiNeto",
      "name": "Josí Neto",
      "created_at": "2024-09-24T01:12:57.390Z",
      "updated_at": "2024-09-24T01:13:28.174Z",
      "cooked": "<p>Here it does succeed in apply the paragraph’s padding without interfere in the quote’s padding…</p>\n<p>But in fact I changed the way of accomplish this to setting the <code>spacing</code> in <code>block</code> element:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\"a7\") // just for presentation here\n#show quote: set pad(left: 1cm) // left padding\n#show quote: set block(spacing: 2.2em) // vertical space around block quote\n#show par: set block(spacing: 1.5em) // vertical space around paragraphs\n\n#lorem(13)\n\n#lorem(13)\n\n#quote(block: true)[#lorem(13)]\n\n#lorem(13)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/045e41a417be3fb654a82da4658f7b30c8b4deba.png\" data-download-href=\"https://forum.typst.app/uploads/default/045e41a417be3fb654a82da4658f7b30c8b4deba\" title=\"mwe\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/045e41a417be3fb654a82da4658f7b30c8b4deba_2_352x500.png\" alt=\"mwe\" data-base62-sha1=\"CDQU7rVaPANRt0lb5924ftX96a\" width=\"352\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/045e41a417be3fb654a82da4658f7b30c8b4deba_2_352x500.png, https://forum.typst.app/uploads/default/original/1X/045e41a417be3fb654a82da4658f7b30c8b4deba.png 1.5x, https://forum.typst.app/uploads/default/original/1X/045e41a417be3fb654a82da4658f7b30c8b4deba.png 2x\" data-dominant-color=\"F2F2F2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">mwe</span><span class=\"informations\">420×595 117 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Here it does succeed in apply the paragraph's padding without interfere in the quote's padding...\n\nBut in fact I changed the way of accomplish this to setting the `spacing` in `block` element:\n\n```typ\n#set page(\"a7\") // just for presentation here\n#show quote: set pad(left: 1cm) // left padding\n#show quote: set block(spacing: 2.2em) // vertical space around block quote\n#show par: set block(spacing: 1.5em) // vertical space around paragraphs\n\n#lorem(13)\n\n#lorem(13)\n\n#quote(block: true)[#lorem(13)]\n\n#lorem(13)\n```\n![mwe|352x500](upload://CDQU7rVaPANRt0lb5924ftX96a.png)",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 23,
      "score": 69.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 376
    },
    {
      "id": 2424,
      "post_number": 8,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-24T06:25:51.438Z",
      "updated_at": "2024-09-24T06:25:51.438Z",
      "cooked": "<p>I did in in fact try your MWE before writing my answer, but it seems my reply was too confusing. Sorry about that! As you found your answer and <a class=\"mention\" href=\"/u/andrew\">@Andrew</a> explained, when I wrote</p>\n<blockquote>\n<p>The two rules do not interfere with each other</p>\n</blockquote>\n<p>I meant to emphasise that your <code>show quote: set pad</code> and <code>show par: it =&gt; {}</code> were adding up to each other.</p>\n<p>About the documentation, there is nothing wrong with the way you wrote quote styling. As you say, it’s very much the same way the documentation does things.</p>\n<p>Just so you’re aware,</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show par: set block(spacing: 1.5em) // vertical space around paragraphs\n</code></pre>\n<p>Removing this does not seem to affect your desired output, and I believe these exist only in the form of boxed display mathematics? See below</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\"a7\") // just for presentation here\n#show par: set block(fill: yellow, spacing: 1.5em) // vertical space around paragraphs\n\n#box[test, $\"test\"$, $ \"test\" a x + b $]\n\n#block[test, $\"test\"$, $ \"test\" a x + b $]\n\n#quote[test, $\"test\"$, $ \"test\" a x + b $]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/471bede0452600f48e3f30d406eafd44951a0232.png\" data-download-href=\"https://forum.typst.app/uploads/default/471bede0452600f48e3f30d406eafd44951a0232\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/471bede0452600f48e3f30d406eafd44951a0232_2_530x500.png\" alt=\"image\" data-base62-sha1=\"a93JMzTGtHxFn6hmqDfg8VoG5Bo\" width=\"530\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/471bede0452600f48e3f30d406eafd44951a0232_2_530x500.png, https://forum.typst.app/uploads/default/original/1X/471bede0452600f48e3f30d406eafd44951a0232.png 1.5x, https://forum.typst.app/uploads/default/original/1X/471bede0452600f48e3f30d406eafd44951a0232.png 2x\" data-dominant-color=\"FBFBF8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">562×530 20.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "I did in in fact try your MWE before writing my answer, but it seems my reply was too confusing. Sorry about that! As you found your answer and @Andrew explained, when I wrote \n\n> The two rules do not interfere with each other\n\nI meant to emphasise that your `show quote: set pad` and `show par: it => {}` were adding up to each other.\n\nAbout the documentation, there is nothing wrong with the way you wrote quote styling. As you say, it's very much the same way the documentation does things.\n\nJust so you're aware,\n\n```typ\n#show par: set block(spacing: 1.5em) // vertical space around paragraphs\n```\n\nRemoving this does not seem to affect your desired output, and I believe these exist only in the form of boxed display mathematics? See below\n\n```typ\n#set page(\"a7\") // just for presentation here\n#show par: set block(fill: yellow, spacing: 1.5em) // vertical space around paragraphs\n\n#box[test, $\"test\"$, $ \"test\" a x + b $]\n\n#block[test, $\"test\"$, $ \"test\" a x + b $]\n\n#quote[test, $\"test\"$, $ \"test\" a x + b $]\n```\n![image|530x500](upload://a93JMzTGtHxFn6hmqDfg8VoG5Bo.png)",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 8.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2430,
      "post_number": 9,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T08:17:38.348Z",
      "updated_at": "2024-09-24T08:17:38.348Z",
      "cooked": "<p>Oops, I didn’t test this. After some debugging, I think <code>par</code> should be replaced with <code>quote</code>. The problem is that (I’m pretty sure) <code>par</code> doesn’t have <code>pad</code> inside of it, so changing <code>pad</code> for <code>par</code> doesn’t have any effect. If <code>pad</code> affected the `par, then instead this could be used:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show quote: it =&gt; { show par: set pad(bottom: 1em); it }\n</code></pre>",
      "raw": "Oops, I didn't test this. After some debugging, I think `par` should be replaced with `quote`. The problem is that (I'm pretty sure) `par` doesn't have `pad` inside of it, so changing `pad` for `par` doesn't have any effect. If `pad` affected the `par, then instead this could be used:\n\n```typ\n#show quote: it => { show par: set pad(bottom: 1em); it }\n```",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 13,
      "score": 2.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2432,
      "post_number": 10,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T08:23:56.112Z",
      "updated_at": "2024-09-24T08:23:56.112Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"JosiNeto\" data-post=\"7\" data-topic=\"600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/josineto/48/393_2.png\" class=\"avatar\"> JosiNeto:</div>\n<blockquote>\n<p>Here it does succeed in apply the paragraph’s padding without interfere in the quote’s padding…</p>\n<p>But in fact I changed the way of accomplish this to setting the <code>spacing</code> in <code>block</code> element:</p>\n</blockquote>\n</aside>\n<p>This means that you didn’t in fact apply “paragraph’s padding”. Almost all elements are block-level, which means that modifying <code>block</code>’s settings will affect such elements. And you used <code>show par|quote: set block</code> in this case, so this would make sense (to work).</p>\n<aside class=\"quote no-group\" data-username=\"quachpas\" data-post=\"8\" data-topic=\"600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/q/662200/48.png\" class=\"avatar\"> quachpas:</div>\n<blockquote>\n<p>Just so you’re aware,</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show par: set block(spacing: 1.5em) // vertical space around paragraphs\n</code></pre>\n<p>Removing this does not seem to affect your desired output</p>\n</blockquote>\n</aside>\n<p>It does for me with v0.11.1.</p>",
      "raw": "[quote=\"JosiNeto, post:7, topic:600\"]\nHere it does succeed in apply the paragraph’s padding without interfere in the quote’s padding…\n\nBut in fact I changed the way of accomplish this to setting the `spacing` in `block` element:\n[/quote]\n\nThis means that you didn't in fact apply \"paragraph's padding\". Almost all elements are block-level, which means that modifying `block`'s settings will affect such elements. And you used `show par|quote: set block` in this case, so this would make sense (to work).\n\n[quote=\"quachpas, post:8, topic:600\"]\nJust so you’re aware,\n\n```typ\n#show par: set block(spacing: 1.5em) // vertical space around paragraphs\n```\n\nRemoving this does not seem to affect your desired output\n[/quote]\n\nIt does for me with v0.11.1.",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 2,
      "like_count": 0,
      "reads": 14,
      "score": 7.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2433,
      "post_number": 11,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-24T08:28:38.591Z",
      "updated_at": "2024-09-24T08:28:38.591Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"10\" data-topic=\"600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>It does for me with v0.11.1.</p>\n</blockquote>\n</aside>\n<p>I am running on the latest Typst master, which may explain why we don’t have the same output… nevertheless I’m surprised there’s a difference?</p>\n<p>I’m not familiar with Typst dev/internals, so I cannot think of any explanation <img src=\"https://forum.typst.app/images/emoji/apple/frowning.png?v=12\" title=\":frowning:\" class=\"emoji\" alt=\":frowning:\" loading=\"lazy\" width=\"20\" height=\"20\">.</p>\n<p>P.S.: just in case someone is also running on the master I have <code>8c813cb7</code>.</p>",
      "raw": "[quote=\"Andrew, post:10, topic:600\"]\nIt does for me with v0.11.1.\n[/quote]\n\nI am running on the latest Typst master, which may explain why we don't have the same output... nevertheless I'm surprised there's a difference?\n\nI'm not familiar with Typst dev/internals, so I cannot think of any explanation :frowning:.\n\nP.S.: just in case someone is also running on the master I have `8c813cb7`.",
      "reply_to_post_number": 10,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 15,
      "score": 7.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2434,
      "post_number": 12,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T08:36:55.104Z",
      "updated_at": "2024-09-24T08:36:55.104Z",
      "cooked": "<p>Ohhh! I remembered! It’s because now you have to write <code>set par(spacing: 1.5em)</code> instead. But… this still doesn’t affect the layout…</p>\n<aside class=\"onebox githubpullrequest\" data-onebox-src=\"https://github.com/typst/typst/pull/4390\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/pull/4390\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\" data-github-private-repo=\"false\">\n\n\n\n    <div class=\"github-icon-container\" title=\"Pull Request\">\n      <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 12 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z\"></path></svg>\n    </div>\n\n  <div class=\"github-info-container\">\n\n\n\n      <h4>\n        <a href=\"https://github.com/typst/typst/pull/4390\" target=\"_blank\" rel=\"noopener nofollow ugc\">Paragraph spacing property</a>\n      </h4>\n\n    <div class=\"branches\">\n      <code>typst:main</code> ← <code>typst:par-spacing</code>\n    </div>\n\n      <div class=\"github-info\">\n        <div class=\"date\">\n          opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-06-13\" data-time=\"15:48:35\" data-timezone=\"UTC\">03:48PM - 13 Jun 24 UTC</span>\n        </div>\n\n        <div class=\"user\">\n          <a href=\"https://github.com/laurmaedje\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n            <img alt=\"laurmaedje\" src=\"https://forum.typst.app/uploads/default/original/1X/3b88c54990118ecee7cb84cd4457a755764ea442.jpeg\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"2A2C27\">\n            laurmaedje\n          </a>\n        </div>\n\n        <div class=\"lines\" title=\"1 commits changed 25 files with 155 additions and 99 deletions\">\n          <a href=\"https://github.com/typst/typst/pull/4390/files\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n            <span class=\"added\">+155</span>\n            <span class=\"removed\">-99</span>\n          </a>\n        </div>\n      </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">This introduces a new `par.spacing` property. Paragraphs are [not considered `bl<span class=\"show-more-container\"><a href=\"https://github.com/typst/typst/pull/4390\" target=\"_blank\" rel=\"noopener nofollow ugc\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\">ock`s anymore](https://github.com/typst/typst/pull/4310) and are not affected by `block.spacing`. Instead `block.spacing` now delegates to `par.spacing`, when it is `auto` (the new default). If, however, it is set to a non-auto value, it has precedence over paragraph spacing.\n\nThis change has the following benefits:\n- Changing the paragraph spacing (and by extension the default block spacing) becomes simpler in the common case: `#set par(spacing: ..)` instead of `show par: set block(spacing: ..)`.\n- Previously, `block.above` and `block.below` created spacing with higher priority (and thus possibly different results) than `block.spacing` because otherwise it was impossible to override a larger spacing (e.g. for a heading to reduce the spacing below it). This was confusing. In the new system, `spacing` is really just a shorthand for `above` and `below` since these naturally have higher priority than paragraph spacing (and thus also `auto` block spacing, which is the same).\n- Because we can remove the internal hack, `block.above` and `block.below` are now available in context expressions. `par.spacing` is of course available as well.\n\nMoreover, I changed `list.spacing`, `enum.spacing`, and `terms.spacing` to select `leading`/`spacing` based on their tightness when set to `auto`, but to always respect the set value otherwise. Previously tight lists always ignored the `spacing` property. I believe the original reasoning was that `set list(spacing: ..)` shouldn't break tight lists, but this problem is better solved with `show list.where(tight: false): set list(spacing: ..)` in my opinion. \n\nI also improved the docs on `par.leading` and fixed a small bug with `quote` related to its block spacing.</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p><a class=\"mention\" href=\"/u/laurmaedje\">@laurmaedje</a>, do you know what’s the problem here?</p>",
      "raw": "Ohhh! I remembered! It's because now you have to write `set par(spacing: 1.5em)` instead. But... this still doesn't affect the layout...\n\nhttps://github.com/typst/typst/pull/4390\n\n@laurmaedje, do you know what's the problem here?",
      "reply_to_post_number": 11,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 22.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2435,
      "post_number": 13,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-24T08:39:52.949Z",
      "updated_at": "2024-09-24T08:43:50.746Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"12\" data-topic=\"600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>Ohhh! I remembered! It’s because now you have to write <code>set par(spacing: 1.5em)</code> instead.</p>\n</blockquote>\n</aside>\n<p>that seems to do the trick! how did you ever remember that haha</p>",
      "raw": "[quote=\"Andrew, post:12, topic:600\"]\nOhhh! I remembered! It’s because now you have to write `set par(spacing: 1.5em)` instead.\n[/quote]\n that seems to do the trick! how did you ever remember that haha",
      "reply_to_post_number": 12,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 15,
      "score": 7.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2437,
      "post_number": 14,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T08:47:07.787Z",
      "updated_at": "2024-09-24T08:47:07.787Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"quachpas\" data-post=\"13\" data-topic=\"600\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/q/662200/48.png\" class=\"avatar\"> quachpas:</div>\n<blockquote>\n<p>how did you ever remember that haha</p>\n</blockquote>\n</aside>\n<p>Some things are easily remembered. And with time, some issues are easier to remember, but others — harder. It also depends on whether the problem has surfaced/was mentioned several times or not. And on how big/impactful the change is. This will probably have a big impact.</p>",
      "raw": "[quote=\"quachpas, post:13, topic:600\"]\nhow did you ever remember that haha\n[/quote]\n\nSome things are easily remembered. And with time, some issues are easier to remember, but others — harder. It also depends on whether the problem has surfaced/was mentioned several times or not. And on how big/impactful the change is. This will probably have a big impact.",
      "reply_to_post_number": 13,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 14,
      "score": 2.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:58:24.727907"
}
{
  "topic_metadata": {
    "id": 602,
    "title": "How to remove lines around raw text block?",
    "slug": "how-to-remove-lines-around-raw-text-block",
    "posts_count": 5,
    "created_at": "2024-09-23T08:07:04.050Z",
    "last_posted_at": "2024-09-23T09:06:35.833Z",
    "views": 128,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 500
  },
  "posts": [
    {
      "id": 2336,
      "post_number": 1,
      "username": "fhaiuwfhlawf",
      "name": "fhaiuwfhlawf",
      "created_at": "2024-09-23T08:07:04.142Z",
      "updated_at": "2024-09-23T08:43:24.377Z",
      "cooked": "<p>Please see image:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/75251610dc75042ad2e7e020e5279f0b6f08fa39.png\" data-download-href=\"https://forum.typst.app/uploads/default/75251610dc75042ad2e7e020e5279f0b6f08fa39\" title=\"rawtextblocktest\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/75251610dc75042ad2e7e020e5279f0b6f08fa39_2_353x500.png\" alt=\"rawtextblocktest\" data-base62-sha1=\"gIjjTl9RbFnymkxw2gEZ92iiNyF\" width=\"353\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/75251610dc75042ad2e7e020e5279f0b6f08fa39_2_353x500.png, https://forum.typst.app/uploads/default/optimized/1X/75251610dc75042ad2e7e020e5279f0b6f08fa39_2_529x750.png 1.5x, https://forum.typst.app/uploads/default/original/1X/75251610dc75042ad2e7e020e5279f0b6f08fa39.png 2x\" data-dominant-color=\"FCFCFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">rawtextblocktest</span><span class=\"informations\">595×842 108 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I wish:</p>\n<ul>\n<li>START is not spaced from the paragraph by a line</li>\n<li>AB and CD is spaced by a line.</li>\n<li>XYZ is not spaced from the paragraph by a line</li>\n</ul>\n<p>Also the raw behavior is weird, try adding a blank line below XYZ, there will be no change in output document. But adding another line will, but now “two lines in raw” is “one line in output raw”, this is not counting the line I wish to remove.</p>\n<p>Thank you.</p>\n<p>This is the source code:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#lorem(40)\n\n#par(leading: 0.4em)[\n```\nSTART\n _   _      _ _        __        __         _     _ _ \n| | | | ___| | | ___   \\ \\      / /__  _ __| | __| | |\n| |_| |/ _ \\ | |/ _ \\   \\ \\ /\\ / / _ \\| '__| |/ _` | |\n|  _  |  __/ | | (_) |   \\ V  V / (_) | |  | | (_| |_|\n|_| |_|\\___|_|_|\\___/     \\_/\\_/ \\___/|_|  |_|\\__,_(_)\nThis is test, hello you\nare not the man.\nAB\n```\n]\n```\nCD\n _   _      _ _        __        __         _     _ _ \n| | | | ___| | | ___   \\ \\      / /__  _ __| | __| | |\n| |_| |/ _ \\ | |/ _ \\   \\ \\ /\\ / / _ \\| '__| |/ _` | |\n|  _  |  __/ | | (_) |   \\ V  V / (_) | |  | | (_| |_|\n|_| |_|\\___|_|_|\\___/     \\_/\\_/ \\___/|_|  |_|\\__,_(_)\nThis is test, hello you\nare not the man.\nXYZ\n```\n#lorem(40)\n</code></pre>",
      "raw": "Please see image:\n![rawtextblocktest|353x500](upload://gIjjTl9RbFnymkxw2gEZ92iiNyF.png)\n\nI wish: \n- START is not spaced from the paragraph by a line\n- AB and CD is spaced by a line.\n- XYZ is not spaced from the paragraph by a line\n\nAlso the raw behavior is weird, try adding a blank line below XYZ, there will be no change in output document. But adding another line will, but now \"two lines in raw\" is \"one line in output raw\", this is not counting the line I wish to remove. \n\nThank you.\n\nThis is the source code:\n````typ\n#lorem(40)\n\n#par(leading: 0.4em)[\n```\nSTART\n _   _      _ _        __        __         _     _ _ \n| | | | ___| | | ___   \\ \\      / /__  _ __| | __| | |\n| |_| |/ _ \\ | |/ _ \\   \\ \\ /\\ / / _ \\| '__| |/ _` | |\n|  _  |  __/ | | (_) |   \\ V  V / (_) | |  | | (_| |_|\n|_| |_|\\___|_|_|\\___/     \\_/\\_/ \\___/|_|  |_|\\__,_(_)\nThis is test, hello you\nare not the man.\nAB\n```\n]\n```\nCD\n _   _      _ _        __        __         _     _ _ \n| | | | ___| | | ___   \\ \\      / /__  _ __| | __| | |\n| |_| |/ _ \\ | |/ _ \\   \\ \\ /\\ / / _ \\| '__| |/ _` | |\n|  _  |  __/ | | (_) |   \\ V  V / (_) | |  | | (_| |_|\n|_| |_|\\___|_|_|\\___/     \\_/\\_/ \\___/|_|  |_|\\__,_(_)\nThis is test, hello you\nare not the man.\nXYZ\n```\n#lorem(40)\n````",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 556.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 445
    },
    {
      "id": 2337,
      "post_number": 2,
      "username": "fhaiuwfhlawf",
      "name": "fhaiuwfhlawf",
      "created_at": "2024-09-23T08:08:59.114Z",
      "updated_at": "2024-09-23T08:08:59.114Z",
      "cooked": "<p>Oh no the markdown ruined my source code.<br>\nPlease see source code here: <a href=\"https://pastebin.com/FGLpiTPz\" rel=\"noopener nofollow ugc\">https://pastebin.com/FGLpiTPz</a></p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://pastebin.com/FGLpiTPz\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/fc65bc191dbf268c70f2e739d1d5ae0f38244ef7.png\" class=\"site-icon\" data-dominant-color=\"B4B6B9\" width=\"16\" height=\"16\">\n\n      <a href=\"https://pastebin.com/FGLpiTPz\" target=\"_blank\" rel=\"noopener nofollow ugc\">Pastebin</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    \n\n<h3><a href=\"https://pastebin.com/FGLpiTPz\" target=\"_blank\" rel=\"noopener nofollow ugc\">#lorem(40)#par(leading: 0.4em)[``````START _   _      _ _        __ -...</a></h3>\n\n  <p>Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Oh no the markdown ruined my source code.\nPlease see source code here: [https://pastebin.com/FGLpiTPz](https://pastebin.com/FGLpiTPz)\n\nhttps://pastebin.com/FGLpiTPz",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 5.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 445
    },
    {
      "id": 2344,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-23T08:55:35.879Z",
      "updated_at": "2024-09-23T09:07:35.324Z",
      "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"fhaiuwfhlawf\" data-post=\"1\" data-topic=\"602\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/f/2DAB7D/48.png\" class=\"avatar\"> fhaiuwfhlawf:</div>\n<blockquote>\n<ul>\n<li>START is not spaced from the paragraph by a line</li>\n<li>XYZ is not spaced from the paragraph by a line</li>\n</ul>\n</blockquote>\n</aside>\n<p>These spaces come from <em>block spacing</em> that is automatically added before and after all kinds of blocks, including these code blocks. You can configure them with the <a href=\"https://typst.app/docs/reference/layout/block/#parameters-spacing\"><code>spacing</code>, <code>above</code> and <code>below</code> properties of the <code>block</code> element</a>. To remove this spacing, you can use a show-set rule and set the values to the same value used as the paragraph’s <code>leading</code> (by default <code>0.65em</code>):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw.where(block: true): set block(\n  above: 0.65em,\n  below: 0.65em\n)\n</code></pre>\n<p>You can’t currently use the <code>spacing</code> property in this case, as paragraphs themselves are also blocks and their block spacing would override the custom spacing you set. This may change with the next Typst version though.</p>\n<aside class=\"quote no-group\" data-username=\"fhaiuwfhlawf\" data-post=\"1\" data-topic=\"602\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/f/2DAB7D/48.png\" class=\"avatar\"> fhaiuwfhlawf:</div>\n<blockquote>\n<ul>\n<li>AB and CD is spaced by a line</li>\n</ul>\n</blockquote>\n</aside>\n<p>With the above, the additional spacing vanishes, so as you already found out, you then need to append two line breaks in the <code>raw</code> block to end the resulting code with an empty line.</p>",
      "raw": "[quote=\"fhaiuwfhlawf, post:1, topic:602\"]\n* START is not spaced from the paragraph by a line\n* XYZ is not spaced from the paragraph by a line\n[/quote]\nThese spaces come from _block spacing_ that is automatically added before and after all kinds of blocks, including these code blocks. You can configure them with the [`spacing`, `above` and `below` properties of the `block` element](https://typst.app/docs/reference/layout/block/#parameters-spacing). To remove this spacing, you can use a show-set rule and set the values to the same value used as the paragraph's `leading` (by default `0.65em`):\n```typ\n#show raw.where(block: true): set block(\n  above: 0.65em,\n  below: 0.65em\n)\n```\nYou can't currently use the `spacing` property in this case, as paragraphs themselves are also blocks and their block spacing would override the custom spacing you set. This may change with the next Typst version though.\n\n[quote=\"fhaiuwfhlawf, post:1, topic:602\"]\n* AB and CD is spaced by a line\n[/quote]\nWith the above, the additional spacing vanishes, so as you already found out, you then need to append two line breaks in the `raw` block to end the resulting code with an empty line.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 25,
      "score": 25.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2346,
      "post_number": 4,
      "username": "fhaiuwfhlawf",
      "name": "fhaiuwfhlawf",
      "created_at": "2024-09-23T09:03:33.310Z",
      "updated_at": "2024-09-23T09:03:33.310Z",
      "cooked": "<p>Eric Thank you for the reply Im very noob. I put your code in, but it shows (IMAGE)<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/0e9fc5903dc18450dc4aed7a9f69f8059ecbbb29.png\" data-download-href=\"https://forum.typst.app/uploads/default/0e9fc5903dc18450dc4aed7a9f69f8059ecbbb29\" title=\"Screenshot 2567-09-23 at 16.01.43\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/0e9fc5903dc18450dc4aed7a9f69f8059ecbbb29_2_690x310.png\" alt=\"Screenshot 2567-09-23 at 16.01.43\" data-base62-sha1=\"25mZCIDC4cXCbnxCkWpSU6VZFeV\" width=\"690\" height=\"310\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/0e9fc5903dc18450dc4aed7a9f69f8059ecbbb29_2_690x310.png, https://forum.typst.app/uploads/default/optimized/1X/0e9fc5903dc18450dc4aed7a9f69f8059ecbbb29_2_1035x465.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/0e9fc5903dc18450dc4aed7a9f69f8059ecbbb29_2_1380x620.png 2x\" data-dominant-color=\"F4F4F5\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2567-09-23 at 16.01.43</span><span class=\"informations\">1872×842 200 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nPlease help</p>\n<p>Also ABCD part is big typo from me, so it’s good thats its that way.<br>\nThank you.</p>",
      "raw": "Eric Thank you for the reply Im very noob. I put your code in, but it shows (IMAGE)\n![Screenshot 2567-09-23 at 16.01.43|690x310](upload://25mZCIDC4cXCbnxCkWpSU6VZFeV.png)\nPlease help\n\nAlso ABCD part is big typo from me, so it's good thats its that way.\nThank you.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 445
    },
    {
      "id": 2347,
      "post_number": 5,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-23T09:06:35.833Z",
      "updated_at": "2024-09-23T09:06:35.833Z",
      "cooked": "<p>Oh sorry, the parameters are called <code>above</code> and <code>below</code> and not <code>before</code> and <code>after</code>!</p>",
      "raw": "Oh sorry, the parameters are called `above` and `below` and not `before` and `after`!",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 29.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:58:17.255173"
}
{
  "topic_metadata": {
    "id": 609,
    "title": "How to customize figure reference with panel letter?",
    "slug": "how-to-customize-figure-reference-with-panel-letter",
    "posts_count": 4,
    "created_at": "2024-09-23T09:00:23.951Z",
    "last_posted_at": "2024-09-23T11:09:55.486Z",
    "views": 224,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "flokl",
    "tags": [
      "figures"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 344
  },
  "posts": [
    {
      "id": 2345,
      "post_number": 1,
      "username": "Rene_Skuk",
      "name": "René",
      "created_at": "2024-09-23T09:00:24.120Z",
      "updated_at": "2024-09-23T09:00:50.291Z",
      "cooked": "<p>I have a figure with multiple panels A-D. In text I would like to reference single panels of this figure. I am aware, that typst won’t be able to reference the panels by itself, so I was wondering if there is a way to add the panel label to the figure reference. Something like: <code>typ #ref(&lt;Figure1&gt;, panel = \"A\") </code>, which would then result in Figure 1.A</p>\n<p>The cases I tried so far are:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">@Figure1 // The normal case\n@Figure1 .A // This results into a space between the ref and .A\n#link(&lt;Figure1&gt;)[Figure 1.A] // This has the desired result, however, the downside is that the label number would not get updated if I add another figure\n</code></pre>\n<p>Anyone has an idea? I would appreciate the help.</p>",
      "raw": "I have a figure with multiple panels A-D. In text I would like to reference single panels of this figure. I am aware, that typst won't be able to reference the panels by itself, so I was wondering if there is a way to add the panel label to the figure reference. Something like: ```typ #ref(<Figure1>, panel = \"A\") ```, which would then result in Figure 1.A\n\nThe cases I tried so far are:\n```typ\n@Figure1 // The normal case\n@Figure1 .A // This results into a space between the ref and .A\n#link(<Figure1>)[Figure 1.A] // This has the desired result, however, the downside is that the label number would not get updated if I add another figure\n```\n\nAnyone has an idea? I would appreciate the help.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 982.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 447
    },
    {
      "id": 2349,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-23T09:37:20.915Z",
      "updated_at": "2024-09-23T10:00:02.140Z",
      "cooked": "<p>You might be interested in this package <a href=\"https://typst.app/universe/package/subpar\" class=\"inline-onebox\">subpar – Typst Universe</a> (shoutout to <a class=\"mention\" href=\"/u/tinger\">@Tinger</a>!).</p>\n<p>If your figure contains a single image with no referenceable content, I am afraid your only solution remains manually writing the panels. If your issue was with how to reference the figure’s number, it is solved by calling the function <a href=\"https://typst.app/docs/reference/model/ref/\"><code>ref</code></a>.</p>\n<p>EDIT: thanks <a class=\"mention\" href=\"/u/flokl\">@flokl</a>, your <a href=\"https://forum.typst.app/t/how-to-customize-figure-reference-with-panel-letter/609/3\">solution</a> is much better.</p>\n<div class=\"spoiler\">\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let lk(lab, suffix) = {\n  return {\n    link(lab)[#ref(lab).#suffix]\n  }\n}\n#lk(&lt;full&gt;, \"A\")\n</code></pre>\n</div>\n<p>See below for subfigures with subpar’s package.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/subpar:0.1.1\"\n\n#subpar.grid(\n  figure(rect(fill: red), caption: [\n    red block\n  ]), &lt;a&gt;,\n  figure(rect(fill: blue), caption: [\n    blue block\n  ]), &lt;b&gt;,\n  columns: (1fr, 1fr),\n  caption: [A figure composed of two sub figures.],\n  label: &lt;full&gt;,\n)\n\nAbove in @full, we see a figure which is composed of two other figures, namely @a and @b.\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/b280215928936ec5117845aeda2fd97f902c6a13.png\" data-download-href=\"https://forum.typst.app/uploads/default/b280215928936ec5117845aeda2fd97f902c6a13\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/b280215928936ec5117845aeda2fd97f902c6a13_2_690x185.png\" alt=\"image\" data-base62-sha1=\"pt5vt6cVyUsaV3TddGLajiqkLZh\" width=\"690\" height=\"185\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/b280215928936ec5117845aeda2fd97f902c6a13_2_690x185.png, https://forum.typst.app/uploads/default/optimized/1X/b280215928936ec5117845aeda2fd97f902c6a13_2_1035x277.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/b280215928936ec5117845aeda2fd97f902c6a13_2_1380x370.png 2x\" data-dominant-color=\"F1EFF1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">2834×762 94.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "You might be interested in this package https://typst.app/universe/package/subpar (shoutout to @Tinger!).\n\nIf your figure contains a single image with no referenceable content, I am afraid your only solution remains manually writing the panels. If your issue was with how to reference the figure's number, it is solved by calling the function [`ref`](https://typst.app/docs/reference/model/ref/).\n\nEDIT: thanks @flokl, your [solution](https://forum.typst.app/t/how-to-customize-figure-reference-with-panel-letter/609/3?u=quachpas) is much better.\n[spoiler]\n```typ\n#let lk(lab, suffix) = {\n  return {\n    link(lab)[#ref(lab).#suffix]\n  }\n}\n#lk(<full>, \"A\")\n```\n[/spoiler]\n\nSee below for subfigures with subpar's package.\n\n```typ\n#import \"@preview/subpar:0.1.1\"\n\n#subpar.grid(\n  figure(rect(fill: red), caption: [\n    red block\n  ]), <a>,\n  figure(rect(fill: blue), caption: [\n    blue block\n  ]), <b>,\n  columns: (1fr, 1fr),\n  caption: [A figure composed of two sub figures.],\n  label: <full>,\n)\n\nAbove in @full, we see a figure which is composed of two other figures, namely @a and @b.\n```\n![image|690x185](upload://pt5vt6cVyUsaV3TddGLajiqkLZh.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 34,
      "score": 36.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2350,
      "post_number": 3,
      "username": "flokl",
      "name": "",
      "created_at": "2024-09-23T09:53:15.177Z",
      "updated_at": "2024-09-23T10:05:55.413Z",
      "cooked": "<p>I think <a class=\"mention\" href=\"/u/rene_skuk\">@Rene_Skuk</a> has a single picture with A-D. You can escape the <code>.A</code> part with a backslash like this: <code>@figure-label\\.A</code>, which results in <code>Figure 1.A</code></p>",
      "raw": "I think @Rene_Skuk has a single picture with A-D. You can escape the `.A` part with a backslash like this: `@figure-label\\.A`, which results in `Figure 1.A`",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 30,
      "score": 56.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 2360,
      "post_number": 4,
      "username": "Rene_Skuk",
      "name": "René",
      "created_at": "2024-09-23T11:09:55.486Z",
      "updated_at": "2024-09-23T11:09:55.486Z",
      "cooked": "<p>Yes, that’s what I was looking for. Thanks <a class=\"mention\" href=\"/u/flokl\">@flokl</a></p>",
      "raw": "Yes, that's what I was looking for. Thanks @flokl",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 10.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 447
    }
  ],
  "scraped_at": "2025-06-10T09:58:16.514980"
}
{
  "topic_metadata": {
    "id": 614,
    "title": "How to customize the behaviour of how hydra displays a section or heading?",
    "slug": "how-to-customize-the-behaviour-of-how-hydra-displays-a-section-or-heading",
    "posts_count": 5,
    "created_at": "2024-09-23T11:06:05.663Z",
    "last_posted_at": "2024-09-23T15:00:56.101Z",
    "views": 299,
    "like_count": 3,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Tinger",
    "tags": [
      "header-footer",
      "hydra"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 478
  },
  "posts": [
    {
      "id": 2359,
      "post_number": 1,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-23T11:06:05.753Z",
      "updated_at": "2024-09-23T22:14:07.282Z",
      "cooked": "<p>I am using Hydra to display the current chapter’s title. However, I want to customize the output of the hydra() function.</p>\n<p>For chapter &lt;nr&gt; &lt;name&gt; the output is “&lt;nr&gt; &lt;name&gt;”. How can I change this to “Chapter &lt;nr&gt;: &lt;name&gt;”?</p>\n<p>I’d also like to know if Hydra allows me to determine whether a page is empty. I need this information to hide the header on empty pages.</p>\n<p>Thanks in advance!</p>",
      "raw": "I am using Hydra to display the current chapter's title. However, I want to customize the output of the hydra() function. \n\nFor chapter \\<nr> \\<name> the output is \"\\<nr> \\<name>\". How can I change this to \"Chapter \\<nr>: \\<name>\"?\n\nI'd also like to know if Hydra allows me to determine whether a page is empty. I need this information to hide the header on empty pages. \n\nThanks in advance!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 61,
      "score": 1022.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2366,
      "post_number": 2,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-09-23T11:27:33.667Z",
      "updated_at": "2024-09-23T13:54:20.354Z",
      "cooked": "<p>Hey there, thank you for using hydra!</p>\n<p>You can customize the behavior of how <code>hydra</code> displays the section or heading it found by passing a function to its <code>display</code> parameter. It works similar to a show rule, but also receives the internal context object, we’ll ignore this as its not relevant for the question.</p>\n<p>Assuming you’re chapters are headings as they usually are you can do it like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(header: hydra(display: (_, it) =&gt; {\n  [Chapter ]\n  numbering(it.numbering, ..counter(heading).at(it.location()))\n  [: ]\n  it.body\n}))\n</code></pre>\n<p>The first discarded parameter <code>_</code> is said context object, the second parameter <code>it</code> is the heading that <code>hydra</code> believes to be relevant at the current position.</p>\n<blockquote>\n<p>I’d also like to know if Hydra allows me to determine whether a page is empty. I need this information to hide the header on empty pages.</p>\n</blockquote>\n<p>Not at the moment, but there are other ways to completely ignore the page header, see <a href=\"https://github.com/typst/typst/issues/2722#issuecomment-1911150996\" rel=\"noopener nofollow ugc\">here</a> and <a href=\"https://github.com/typst/typst/issues/2722#issuecomment-2215031347\" rel=\"noopener nofollow ugc\">here</a> for some workaround to skip the header there.</p>",
      "raw": "Hey there, thank you for using hydra!\n\nYou can customize the behavior of how `hydra` displays the section or heading it found by passing a function to its `display` parameter. It works similar to a show rule, but also receives the internal context object, we'll ignore this as its not relevant for the question.\n\nAssuming you're chapters are headings as they usually are you can do it like this:\n```typ\n#set page(header: hydra(display: (_, it) => {\n  [Chapter ]\n  numbering(it.numbering, ..counter(heading).at(it.location()))\n  [: ]\n  it.body\n}))\n```\n\nThe first discarded parameter `_` is said context object, the second parameter `it` is the heading that `hydra` believes to be relevant at the current position.\n\n> I’d also like to know if Hydra allows me to determine whether a page is empty. I need this information to hide the header on empty pages.\n\nNot at the moment, but there are other ways to completely ignore the page header, see [here](https://github.com/typst/typst/issues/2722#issuecomment-1911150996) and [here](https://github.com/typst/typst/issues/2722#issuecomment-2215031347) for some workaround to skip the header there.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 151.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 2373,
      "post_number": 3,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-23T12:13:32.992Z",
      "updated_at": "2024-09-23T12:15:35.200Z",
      "cooked": "<p>Thanks for the answer, but I don’t get it to work.</p>\n<p>a) always shows the correct heading number</p>\n<pre><code class=\"lang-auto\">hydra(1, skip-starting: false)\n</code></pre>\n<p>b) doesn’t work. Starts with chapter 0, seems to always be one page behind</p>\n<pre><code class=\"lang-auto\">hydra(1, skip-starting: false, display: (_, it) =&gt; {\n        \"Chapter \" + counter(heading.where(level: 1)).display() + \": \" + it.body\n      })\n</code></pre>\n<p>What am I missing?</p>\n<p>Edit: A little more context:</p>\n<pre><code class=\"lang-auto\">  set page(numbering: \"1\", number-align: top, header: context{   \n    if calc.odd(here().page()) [  \n      #hydra(1, skip-starting: false, display: (_, it) =&gt; {\n        \"Chapter \" + counter(heading.where(level: 1)).display() + \": \" + it.body\n      })  \n      #h(1fr) \n      #counter(page).display(\"1\")\n    ] else [ \n      #counter(page).display(\"1\") \n      #h(1fr) \n      #hydra(1, skip-starting: false, display: (_, it) =&gt; {\n        \"Chapter \" + counter(heading.where(level: 1)).display() + \": \" + it.body\n      }) \n    ]\n  })\n</code></pre>",
      "raw": "Thanks for the answer, but I don't get it to work.\n\na) always shows the correct heading number\n```\nhydra(1, skip-starting: false)\n```\nb) doesn't work. Starts with chapter 0, seems to always be one page behind\n```\nhydra(1, skip-starting: false, display: (_, it) => {\n        \"Chapter \" + counter(heading.where(level: 1)).display() + \": \" + it.body\n      })\n```\n\nWhat am I missing?\n\n\nEdit: A little more context:\n```\n  set page(numbering: \"1\", number-align: top, header: context{   \n    if calc.odd(here().page()) [  \n      #hydra(1, skip-starting: false, display: (_, it) => {\n        \"Chapter \" + counter(heading.where(level: 1)).display() + \": \" + it.body\n      })  \n      #h(1fr) \n      #counter(page).display(\"1\")\n    ] else [ \n      #counter(page).display(\"1\") \n      #h(1fr) \n      #hydra(1, skip-starting: false, display: (_, it) => {\n        \"Chapter \" + counter(heading.where(level: 1)).display() + \": \" + it.body\n      }) \n    ]\n  })\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 53,
      "score": 20.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2382,
      "post_number": 4,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-09-23T13:53:45.481Z",
      "updated_at": "2024-09-23T13:53:45.481Z",
      "cooked": "<p>Oh that’s on me! I actually made a mistake here, the reason the counter is one page behind is that I forgot to pass the correct location to the counter display. It should be <code>numbering(it.numbering, ..counter(heading).at(it.location()))</code>. Indeed this is the counter the default display uses too, I forgot about that <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">. Keep in mind that this assumes all headings are numbered, you may need additional checks if you change the numbering or include other heading ranges.</p>\n<p>I have updated the original answer.</p>",
      "raw": "Oh that's on me! I actually made a mistake here, the reason the counter is one page behind is that I forgot to pass the correct location to the counter display. It should be `numbering(it.numbering, ..counter(heading).at(it.location()))`. Indeed this is the counter the default display uses too, I forgot about that :sweat_smile:. Keep in mind that this assumes all headings are numbered, you may need additional checks if you change the numbering or include other heading ranges.\n\nI have updated the original answer.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 42,
      "score": 28.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 2391,
      "post_number": 5,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-23T15:00:56.101Z",
      "updated_at": "2024-09-23T15:00:56.101Z",
      "cooked": "<p>Perfect! Thank you :)</p>",
      "raw": "Perfect! Thank you :)",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 7.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    }
  ],
  "scraped_at": "2025-06-10T09:58:15.677017"
}
{
  "topic_metadata": {
    "id": 630,
    "title": "Is it possible to make a breakable box or inline?",
    "slug": "is-it-possible-to-make-a-breakable-box-or-inline",
    "posts_count": 3,
    "created_at": "2024-09-24T05:07:30.255Z",
    "last_posted_at": "2024-09-24T08:42:36.612Z",
    "views": 248,
    "like_count": 4,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Blaz",
    "tags": [
      "layout",
      "layout-containers"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 186
  },
  "posts": [
    {
      "id": 2421,
      "post_number": 1,
      "username": "JosiNeto",
      "name": "Josí Neto",
      "created_at": "2024-09-24T05:07:30.371Z",
      "updated_at": "2024-09-24T05:07:30.371Z",
      "cooked": "<p>I’ve tried to use <code>box</code> to add a background to any <code>link</code> in my document. Problem is: there’s no <code>breakable</code> argument in <code>box</code> (allowing the box to break between lines). This argument only exists for <code>block</code> element.</p>\n<p>Is it possible to make a breakable inline? I’ve searched through docs, forum and repository and didn’t find any mention to that…</p>\n<p>Thank you in advance!</p>",
      "raw": "I've tried to use `box` to add a background to any `link` in my document. Problem is: there's no `breakable` argument in `box` (allowing the box to break between lines). This argument only exists for `block` element.\n\nIs it possible to make a breakable inline? I've searched through docs, forum and repository and didn't find any mention to that...\n\nThank you in advance!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 1079.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 376
    },
    {
      "id": 2423,
      "post_number": 2,
      "username": "Blaz",
      "name": "Blaz",
      "created_at": "2024-09-24T05:39:30.068Z",
      "updated_at": "2024-09-24T05:39:30.068Z",
      "cooked": "<p>I’m not sure if you can achieve that with a box, but if you want to add a background color to your links you can combine a <a href=\"https://typst.app/docs/reference/styling/#show-rules\">show rule</a> with <a href=\"https://typst.app/docs/reference/text/highlight/\">highlight</a>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show link: it =&gt; highlight(fill: blue, it)\n\nBreakable link with background:\n#link(\"https://typst.app\")[#lorem(50)]\n</code></pre>",
      "raw": "I'm not sure if you can achieve that with a box, but if you want to add a background color to your links you can combine a [show rule](https://typst.app/docs/reference/styling/#show-rules) with [highlight](https://typst.app/docs/reference/text/highlight/):\n\n```typ\n#show link: it => highlight(fill: blue, it)\n\nBreakable link with background:\n#link(\"https://typst.app\")[#lorem(50)]\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 44,
      "score": 203.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 98
    },
    {
      "id": 2436,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T08:42:36.612Z",
      "updated_at": "2024-09-24T08:42:36.612Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"JosiNeto\" data-post=\"1\" data-topic=\"630\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/josineto/48/393_2.png\" class=\"avatar\"> JosiNeto:</div>\n<blockquote>\n<p>Is it possible to make a breakable inline?</p>\n</blockquote>\n</aside>\n<p>No, <code>box</code> can’t be broken, that’s the point. You only want to break blocks, hence <code>block</code> has a parameter for that.</p>\n<p>FYI, a slightly simpler way to do this is:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show link: highlight.with(fill: blue)\n</code></pre>",
      "raw": "[quote=\"JosiNeto, post:1, topic:630\"]\nIs it possible to make a breakable inline?\n[/quote]\n\nNo, `box` can't be broken, that's the point. You only want to break blocks, hence `block` has a parameter for that.\n\nFYI, a slightly simpler way to do this is:\n\n```typ\n#show link: highlight.with(fill: blue)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 2,
      "reads": 37,
      "score": 47.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:58:14.974545"
}
{
  "topic_metadata": {
    "id": 632,
    "title": "What is the best way to get the total number of pages in a document and insert in the document?",
    "slug": "what-is-the-best-way-to-get-the-total-number-of-pages-in-a-document-and-insert-in-the-document",
    "posts_count": 10,
    "created_at": "2024-09-24T07:38:10.063Z",
    "last_posted_at": "2024-09-24T10:34:59.362Z",
    "views": 606,
    "like_count": 11,
    "reply_count": 10,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting",
      "context"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1254
  },
  "posts": [
    {
      "id": 2425,
      "post_number": 1,
      "username": "Bryn",
      "name": "Bryn Humberstone",
      "created_at": "2024-09-24T07:38:10.325Z",
      "updated_at": "2024-09-24T21:51:35.186Z",
      "cooked": "<p>I have an exam paper that I am typesetting in Typst, and I want the cover page to indicate the total number of pages (e.g. “This question and answer book contains 29 pages”).</p>\n<p>It took longer than I had hoped to get working syntax, and in the end I came up with the following:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">This question and answer book contains \n#context[#counter(page).final().at(0)] pages\n</code></pre>\n<p>Is this the best way to generate this text, or is there a more natural alternative which I am overlooking?</p>\n<p>Also, not that I understand the concept of context particularly, but the <a href=\"https://typst.app/docs/reference/context/\">documentation for Context</a> starts with</p>\n<blockquote>\n<p>Sometimes, we want to create content that reacts to its location in the document.</p>\n</blockquote>\n<p>But in this case, I would have assumed that the total number of pages in the document is not contingent on the location in the document. What am I missing here?</p>",
      "raw": "I have an exam paper that I am typesetting in Typst, and I want the cover page to indicate the total number of pages (e.g. \"This question and answer book contains 29 pages\").\n\nIt took longer than I had hoped to get working syntax, and in the end I came up with the following:\n\n```typ\nThis question and answer book contains \n#context[#counter(page).final().at(0)] pages\n```\n\nIs this the best way to generate this text, or is there a more natural alternative which I am overlooking?\n\nAlso, not that I understand the concept of context particularly, but the [documentation for Context](https://typst.app/docs/reference/context/) starts with\n\n> Sometimes, we want to create content that reacts to its location in the document.\n\nBut in this case, I would have assumed that the total number of pages in the document is not contingent on the location in the document. What am I missing here?",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 2827.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 389
    },
    {
      "id": 2427,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-24T07:55:16.915Z",
      "updated_at": "2024-09-24T08:16:03.124Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"quachpas\" data-post=\"5\" data-topic=\"632\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/q/662200/48.png\" class=\"avatar\"> quachpas:</div>\n<blockquote>\n<p>I think I might have misread, I am very sorry! I think <strong>your attempt is the best one</strong>, and what I gave should probably not be used, unless you need both first and final values.</p>\n</blockquote>\n</aside>\n<div class=\"spoiler\">\n<p>Hello Bryn,<br>\nYou can get the number of pages in the document using <code>display(both: true)</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context {\n  counter(page).display(\"1/1\", both: true)\n}\n</code></pre>\n<p>Getting your result is a matter of splitting the string</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context [\nThis question and answer book contains\n#counter(page).display(\"1/1\", both: true).split(\"/\").at(-1)\npages\n]\n</code></pre>\n<p>The final call should be deprecated soon (I believe), so the best way is to use display, to which you can pass a numbering.</p>\n<p>See <a href=\"https://typst.app/docs/reference/introspection/counter/#definitions-display-both\"><code>counter(both: bool)</code></a>.</p>\n</div>",
      "raw": "[quote=\"quachpas, post:5, topic:632\"]\nI think I might have misread, I am very sorry! I think **your attempt is the best one**, and what I gave should probably not be used, unless you need both first and final values.\n[/quote]\n\n[spoiler]\nHello Bryn,\nYou can get the number of pages in the document using `display(both: true)`:\n```typ\n#context {\n  counter(page).display(\"1/1\", both: true)\n}\n```\n\nGetting your result is a matter of splitting the string\n```typ\n#context [\nThis question and answer book contains\n#counter(page).display(\"1/1\", both: true).split(\"/\").at(-1)\npages\n]\n```\nThe final call should be deprecated soon (I believe), so the best way is to use display, to which you can pass a numbering.\n\nSee [`counter(both: bool)`](https://typst.app/docs/reference/introspection/counter/#definitions-display-both).\n[/spoiler]",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 56,
      "score": 101.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2428,
      "post_number": 4,
      "username": "Bryn",
      "name": "Bryn Humberstone",
      "created_at": "2024-09-24T08:12:08.554Z",
      "updated_at": "2024-09-24T08:13:53.874Z",
      "cooked": "<p>Oh dear, this seems even more obfuscated than my first attempt! Is your recommendation that I should create a larger string that also includes the current page number, which I then remove?</p>\n<p>I couldn’t see any reference to final() being deprecated but I’m hoping that the ability to “time travel” isn’t removed, as I also want to be able to “time travel” to the end of the document and know the total number of marks (which is stored in a counter).</p>",
      "raw": "Oh dear, this seems even more obfuscated than my first attempt! Is your recommendation that I should create a larger string that also includes the current page number, which I then remove?\n\nI couldn't see any reference to final() being deprecated but I'm hoping that the ability to \"time travel\" isn't removed, as I also want to be able to \"time travel\" to the end of the document and know the total number of marks (which is stored in a counter).",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 20.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 389
    },
    {
      "id": 2429,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-24T08:15:34.211Z",
      "updated_at": "2024-09-24T08:15:34.211Z",
      "cooked": "<p>I think I might have misread, I am very sorry! I think <strong>your attempt is the best one</strong>, and what I gave should probably not be used, unless you need both first and final values.</p>\n<p>The part I misread in the documentation was</p>\n<blockquote>\n<p>Compatibility: This argument only exists for compatibility with Typst 0.10 and lower and shouldn’t be used anymore.</p>\n</blockquote>\n<p>which referred only to the <code>location</code> argument of <code>final</code>, and not of final itself.</p>",
      "raw": "I think I might have misread, I am very sorry! I think **your attempt is the best one**, and what I gave should probably not be used, unless you need both first and final values.\n\nThe part I misread in the documentation was \n\n> Compatibility: This argument only exists for compatibility with Typst 0.10 and lower and shouldn't be used anymore.\n\nwhich referred only to the `location` argument of `final`, and not of final itself.",
      "reply_to_post_number": 4,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 2,
      "reads": 50,
      "score": 85.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2431,
      "post_number": 6,
      "username": "Bryn",
      "name": "Bryn Humberstone",
      "created_at": "2024-09-24T08:21:54.871Z",
      "updated_at": "2024-09-24T08:21:54.871Z",
      "cooked": "<p>Yes, I also found that compatibility note confusing too but I concluded that it used to be required to pass the location but now it stands for the final location in the document.</p>\n<p>I must say, it still seems a bit over-the-top to have to put the context etc. in, just to get the final page number.</p>",
      "raw": "Yes, I also found that compatibility note confusing too but I concluded that it used to be required to pass the location but now it stands for the final location in the document.\n\nI must say, it still seems a bit over-the-top to have to put the context etc. in, just to get the final page number.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 51,
      "score": 15.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 389
    },
    {
      "id": 2438,
      "post_number": 7,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-24T08:48:51.568Z",
      "updated_at": "2024-09-24T08:48:51.568Z",
      "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"Bryn\" data-post=\"1\" data-topic=\"632\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/bryn/48/513_2.png\" class=\"avatar\"> Bryn:</div>\n<blockquote>\n<p>Also, not that I understand the concept of context particularly, but the <a href=\"https://typst.app/docs/reference/context/\">documentation for Context</a> starts with</p>\n<blockquote>\n<p>Sometimes, we want to create content that reacts to its location in the document.</p>\n</blockquote>\n<p>But in this case, I would have assumed that the total number of pages in the document is not contingent on the location in the document. What am I missing here?</p>\n</blockquote>\n</aside>\n<aside class=\"quote no-group\" data-username=\"Bryn\" data-post=\"6\" data-topic=\"632\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/bryn/48/513_2.png\" class=\"avatar\"> Bryn:</div>\n<blockquote>\n<p>I must say, it still seems a bit over-the-top to have to put the context etc.</p>\n</blockquote>\n</aside>\n<p>The value here is really not dependent on the <em>location</em>, but the documentation simplifies a bit here which is confusing in this particular instance.</p>\n<p>The final counter value depends on the document as a whole, so it can’t be evaluated immediately; only after the whole document was put together. <code>context</code> allows Typst to delay the execution, or even execute multiple times – imagine the counter was so big that it caused an extra page to appear in the document. In that case Typst evaluates the context again with the new value.</p>\n<p>Each expression in Typst needs some definitive value, and if <code>counter.final()</code> returned a number <em>without</em> context, that would not work out.</p>",
      "raw": "[quote=\"Bryn, post:1, topic:632\"]\nAlso, not that I understand the concept of context particularly, but the [documentation for Context](https://typst.app/docs/reference/context/) starts with\n\n> Sometimes, we want to create content that reacts to its location in the document.\n\nBut in this case, I would have assumed that the total number of pages in the document is not contingent on the location in the document. What am I missing here?\n[/quote]\n\n[quote=\"Bryn, post:6, topic:632\"]\nI must say, it still seems a bit over-the-top to have to put the context etc.\n[/quote]\n\nThe value here is really not dependent on the _location_, but the documentation simplifies a bit here which is confusing in this particular instance.\n\nThe final counter value depends on the document as a whole, so it can't be evaluated immediately; only after the whole document was put together. `context` allows Typst to delay the execution, or even execute multiple times -- imagine the counter was so big that it caused an extra page to appear in the document. In that case Typst evaluates the context again with the new value.\n\nEach expression in Typst needs some definitive value, and if `counter.final()` returned a number _without_ context, that would not work out.",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 2,
      "like_count": 1,
      "reads": 49,
      "score": 64.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2439,
      "post_number": 8,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T08:54:40.177Z",
      "updated_at": "2024-09-24T08:54:40.177Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Bryn\" data-post=\"1\" data-topic=\"632\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/bryn/48/513_2.png\" class=\"avatar\"> Bryn:</div>\n<blockquote>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">This question and answer book contains \n#context[#counter(page).final().at(0)] pages\n</code></pre>\n<p>Is this the best way to generate this text, or is there a more natural alternative which I am overlooking?</p>\n</blockquote>\n</aside>\n<p>Yes, but you can optimize/simplify it like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context counter(page).final().first()\n</code></pre>\n<aside class=\"quote no-group quote-modified\" data-username=\"Bryn\" data-post=\"1\" data-topic=\"632\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/bryn/48/513_2.png\" class=\"avatar\"> Bryn:</div>\n<blockquote>\n<p>Also, not that I understand the concept of context particularly, but the <a href=\"https://typst.app/docs/reference/context/\">documentation for Context</a> starts with</p>\n<blockquote>\n<p>Sometimes, we want to create content that reacts to its location in the document.</p>\n</blockquote>\n<p>But in this case, I would have assumed that the total number of pages in the document is not contingent on the location in the document. What am I missing here?</p>\n</blockquote>\n</aside>\n<p>The key part here is “sometimes”. This does not apply to your example, but does for this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context here().position()\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/7c5ae821a4be5b00bc8876e0f9c93d3e2bb49e92.png\" alt=\"image\" data-base62-sha1=\"hK5YkTy0JLUEwHjlImdYlwtYNrk\" width=\"227\" height=\"25\"></p>",
      "raw": "[quote=\"Bryn, post:1, topic:632\"]\n```typ\nThis question and answer book contains \n#context[#counter(page).final().at(0)] pages\n```\n\nIs this the best way to generate this text, or is there a more natural alternative which I am overlooking?\n[/quote]\n\nYes, but you can optimize/simplify it like this:\n\n```typ\n#context counter(page).final().first()\n```\n\n[quote=\"Bryn, post:1, topic:632\"]\nAlso, not that I understand the concept of context particularly, but the [documentation for Context](https://typst.app/docs/reference/context/) starts with\n\n> Sometimes, we want to create content that reacts to its location in the document.\n\nBut in this case, I would have assumed that the total number of pages in the document is not contingent on the location in the document. What am I missing here?\n[/quote]\n\nThe key part here is \"sometimes\". This does not apply to your example, but does for this:\n\n```typ\n#context here().position()\n```\n\n![image|227x25](upload://hK5YkTy0JLUEwHjlImdYlwtYNrk.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 48,
      "score": 134.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2444,
      "post_number": 9,
      "username": "Bryn",
      "name": "Bryn Humberstone",
      "created_at": "2024-09-24T10:25:51.032Z",
      "updated_at": "2024-09-24T10:25:51.032Z",
      "cooked": "<p>That makes good sense, thanks! I hadn’t thought about the fact that not only can Typst not calculate it yet but it needs to find a fixed point if it’s a rather large document (or I print the page number in such a large font) and the printing of the final page number causes the page count to increase. Maybe I should think of <a class=\"hashtag-cooked\" href=\"/tag/context\" data-type=\"tag\" data-slug=\"context\" data-id=\"61\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>context</span></a> as for the type of thing that would require a second run of a LaTeX compiler, if I were typesetting the document in LaTeX.</p>",
      "raw": "That makes good sense, thanks! I hadn't thought about the fact that not only can Typst not calculate it yet but it needs to find a fixed point if it's a rather large document (or I print the page number in such a large font) and the printing of the final page number causes the page count to increase. Maybe I should think of #context as for the type of thing that would require a second run of a LaTeX compiler, if I were typesetting the document in LaTeX.",
      "reply_to_post_number": 7,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 22.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 389
    },
    {
      "id": 2448,
      "post_number": 10,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-24T10:33:41.377Z",
      "updated_at": "2024-09-24T10:33:41.377Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Bryn\" data-post=\"9\" data-topic=\"632\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/bryn/48/513_2.png\" class=\"avatar\"> Bryn:</div>\n<blockquote>\n<p>Maybe I should think of <a class=\"hashtag-cooked\" href=\"/tag/context\" data-type=\"tag\" data-slug=\"context\" data-id=\"61\" data-ref=\"context::tag\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>context</span></a> as for the type of thing that would require a second run of a LaTeX compiler, if I were typesetting the document in LaTeX.</p>\n</blockquote>\n</aside>\n<p>I think that’s a pretty good mental model. It also gives a feeling for the dreaded “layout did not converge within 5 attempts” warning: that’s how often Typst will try to recompile before giving up.</p>\n<p>btw, don’t forget to tick one of the responses if you got a satisfying answer. The answer you choose should usually be the response that you found most correct/helpful/comprehensive for the question you asked.</p>",
      "raw": "[quote=\"Bryn, post:9, topic:632\"]\nMaybe I should think of #context::tag as for the type of thing that would require a second run of a LaTeX compiler, if I were typesetting the document in LaTeX.\n[/quote]\n\nI think that's a pretty good mental model. It also gives a feeling for the dreaded \"layout did not converge within 5 attempts\" warning: that's how often Typst will try to recompile before giving up.\n\nbtw, don't forget to tick one of the responses if you got a satisfying answer. The answer you choose should usually be the response that you found most correct/helpful/comprehensive for the question you asked.",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 2,
      "reads": 38,
      "score": 42.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2449,
      "post_number": 11,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T10:34:59.362Z",
      "updated_at": "2024-09-24T10:34:59.362Z",
      "cooked": "<p>Typst indeed uses the same tactic as LaTeX, but the difference is that with LaTeX you have to manually re-run the compiler, while Typst does this automatically. And if something needs more than 2 compilations to converge, it provides 5 attempts for such documents.</p>\n<p>From <a href=\"https://typst.app/docs/reference/context/#compiler-iterations\" class=\"inline-onebox\">Context – Typst Documentation</a> :</p>\n<blockquote>\n<p>To resolve contextual interactions, the Typst compiler processes your document multiple times. For instance, to resolve a <code>locate</code> call, Typst first provides a placeholder position, layouts your document and then recompiles with the known position from the finished layout. The same approach is taken to resolve counters, states, and queries. In certain cases, Typst may even need more than two iterations to resolve everything. While that’s sometimes a necessity, it may also be a sign of misuse of contextual functions (e.g. of <a href=\"https://typst.app/docs/reference/introspection/state/#caution\">state</a>). <strong>If Typst cannot resolve everything within five attempts</strong>, it will stop and output the warning “layout did not converge within 5 attempts.”</p>\n</blockquote>",
      "raw": "Typst indeed uses the same tactic as LaTeX, but the difference is that with LaTeX you have to manually re-run the compiler, while Typst does this automatically. And if something needs more than 2 compilations to converge, it provides 5 attempts for such documents.\n\nFrom https://typst.app/docs/reference/context/#compiler-iterations :\n\n> To resolve contextual interactions, the Typst compiler processes your document multiple times. For instance, to resolve a `locate` call, Typst first provides a placeholder position, layouts your document and then recompiles with the known position from the finished layout. The same approach is taken to resolve counters, states, and queries. In certain cases, Typst may even need more than two iterations to resolve everything. While that's sometimes a necessity, it may also be a sign of misuse of contextual functions (e.g. of [state](https://typst.app/docs/reference/introspection/state/#caution)). **If Typst cannot resolve everything within five attempts**, it will stop and output the warning \"layout did not converge within 5 attempts.\"",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 17.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:58:14.235441"
}
{
  "topic_metadata": {
    "id": 638,
    "title": "How to set texts above and below a self adjusting arrow?",
    "slug": "how-to-set-texts-above-and-below-a-self-adjusting-arrow",
    "posts_count": 5,
    "created_at": "2024-09-24T11:58:34.059Z",
    "last_posted_at": "2025-03-13T18:11:26.953Z",
    "views": 732,
    "like_count": 4,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "flokl",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 227
  },
  "posts": [
    {
      "id": 2458,
      "post_number": 1,
      "username": "samirchmandal",
      "name": "Samir Ch Mandal",
      "created_at": "2024-09-24T11:58:34.223Z",
      "updated_at": "2024-09-24T11:58:34.223Z",
      "cooked": "<p>I want to show Gauss Elimination process where I need to write R_2-R_1 above an arrow and similar things in below too. I want the arrow to be self adjusted according to the above contents. How can I achieve this?</p>",
      "raw": "I want to show Gauss Elimination process where I need to write R_2-R_1 above an arrow and similar things in below too. I want the arrow to be self adjusted according to the above contents. How can I achieve this?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 58,
      "score": 3731.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 116
    },
    {
      "id": 2461,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2024-09-24T13:34:46.449Z",
      "updated_at": "2024-09-24T13:36:38.941Z",
      "cooked": "<p>I think you are looking for the <a href=\"https://typst.app/universe/package/xarrow\">xarrow</a> package. You can use it like this <code>xarrow(\"above\", opposite: \"below\")</code>.</p>\n<p>Full example:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/f0df263f0853f1f6c9233b3d981ea1cda1a02608.png\" data-download-href=\"https://forum.typst.app/uploads/default/f0df263f0853f1f6c9233b3d981ea1cda1a02608\" title=\"aaaa\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/f0df263f0853f1f6c9233b3d981ea1cda1a02608_2_690x183.png\" alt=\"aaaa\" data-base62-sha1=\"ymQGFMYqYZj1MiHesW1YIVNUSco\" width=\"690\" height=\"183\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/f0df263f0853f1f6c9233b3d981ea1cda1a02608_2_690x183.png, https://forum.typst.app/uploads/default/original/1X/f0df263f0853f1f6c9233b3d981ea1cda1a02608.png 1.5x, https://forum.typst.app/uploads/default/original/1X/f0df263f0853f1f6c9233b3d981ea1cda1a02608.png 2x\" data-dominant-color=\"F2F2F2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">aaaa</span><span class=\"informations\">891×237 57 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<details>\n<summary>\nCode</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/xarrow:0.3.1\": xarrow\n\n$ \nmat(\n  delim: \"[\",\n  augment: #3,\n  1,2,-1,3;\n  2,-2,3,2;\n  3,-1,2,1;   \n) \nxarrow(\n  R_2 -&gt; R_2 - 2R_1, \n  opposite: R_3 -&gt; R_3 - 3R_1\n)\nmat(\n  delim: \"[\",\n  augment: #3,\n  2,-2,3,2;\n  0,-6,5,-4;\n  0,-7,5,-8;   \n) \n$\n</code></pre>\n</details>",
      "raw": "I think you are looking for the [xarrow](https://typst.app/universe/package/xarrow) package. You can use it like this `xarrow(\"above\", opposite: \"below\")`.\n\nFull example:\n![aaaa|690x183](upload://ymQGFMYqYZj1MiHesW1YIVNUSco.png)\n\n[details=\"Code\"]\n```typst\n#import \"@preview/xarrow:0.3.1\": xarrow\n\n$ \nmat(\n  delim: \"[\",\n  augment: #3,\n  1,2,-1,3;\n  2,-2,3,2;\n  3,-1,2,1;   \n) \nxarrow(\n  R_2 -> R_2 - 2R_1, \n  opposite: R_3 -> R_3 - 3R_1\n)\nmat(\n  delim: \"[\",\n  augment: #3,\n  2,-2,3,2;\n  0,-6,5,-4;\n  0,-7,5,-8;   \n) \n$\n```\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 55,
      "score": 216.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 2462,
      "post_number": 3,
      "username": "samirchmandal",
      "name": "Samir Ch Mandal",
      "created_at": "2024-09-24T14:06:51.820Z",
      "updated_at": "2024-09-24T14:06:51.820Z",
      "cooked": "<p>Thank you very much, this is what I need.</p>",
      "raw": "Thank you very much, this is what I need.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 20.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 116
    },
    {
      "id": 2473,
      "post_number": 4,
      "username": "Enivex",
      "name": "Enivex",
      "created_at": "2024-09-24T16:03:05.832Z",
      "updated_at": "2024-09-24T16:03:05.832Z",
      "cooked": "<p>There’s also an active PR for a built-in version of xarrow, but it hasn’t been merged yet.</p>\n<aside class=\"onebox githubpullrequest\" data-onebox-src=\"https://github.com/typst/typst/pull/4569\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/pull/4569\" target=\"_blank\" rel=\"noopener\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\" data-github-private-repo=\"false\">\n\n\n\n    <div class=\"github-icon-container\" title=\"Pull Request\">\n      <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 12 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z\"></path></svg>\n    </div>\n\n  <div class=\"github-info-container\">\n\n\n\n      <h4>\n        <a href=\"https://github.com/typst/typst/pull/4569\" target=\"_blank\" rel=\"noopener\">Let base be `stretch()`-able to accommodate wide attachments</a>\n      </h4>\n\n    <div class=\"branches\">\n      <code>typst:main</code> ← <code>Leedehai:attach-long</code>\n    </div>\n\n      <div class=\"github-info\">\n        <div class=\"date\">\n          opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-07-16\" data-time=\"22:44:23\" data-timezone=\"UTC\">10:44PM - 16 Jul 24 UTC</span>\n        </div>\n\n        <div class=\"user\">\n          <a href=\"https://github.com/Leedehai\" target=\"_blank\" rel=\"noopener\">\n            <img alt=\"Leedehai\" src=\"https://forum.typst.app/uploads/default/original/1X/4d228dd918476710f282b0bed56bcfbb13e0225d.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"6E98C3\">\n            Leedehai\n          </a>\n        </div>\n\n        <div class=\"lines\" title=\"5 commits changed 6 files with 130 additions and 14 deletions\">\n          <a href=\"https://github.com/typst/typst/pull/4569/files\" target=\"_blank\" rel=\"noopener\">\n            <span class=\"added\">+130</span>\n            <span class=\"removed\">-14</span>\n          </a>\n        </div>\n      </div>\n  </div>\n</div>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "There's also an active PR for a built-in version of xarrow, but it hasn't been merged yet.\n\nhttps://github.com/typst/typst/pull/4569",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 25.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 5
    },
    {
      "id": 9775,
      "post_number": 5,
      "username": "flokl",
      "name": "",
      "created_at": "2025-03-13T18:11:26.953Z",
      "updated_at": "2025-03-13T18:11:26.953Z",
      "cooked": "<p>The mentioned PR was merged and Typst v0.12 has introduced the <a href=\"https://typst.app/docs/reference/math/stretch/\">strech</a> function.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">$ \nmat(\n  delim: \"[\",\n  augment: #3,\n  1,2,-1,3;\n  2,-2,3,2;\n  3,-1,2,1;   \n) \nstretch(-&gt;)^(R_2 -&gt; R_2 - 2R_1)_(R_3 -&gt; R_3 - 3R_1)\nmat(\n  delim: \"[\",\n  augment: #3,\n  2,-2,3,2;\n  0,-6,5,-4;\n  0,-7,5,-8;   \n) \n$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/5/55cb27f26ffcb93068d521658fcd87bd3b835105.png\" alt=\"test\" data-base62-sha1=\"ceXQnqd9oB30mv7j3abJPurFjIF\" width=\"508\" height=\"195\"></p>",
      "raw": "The mentioned PR was merged and Typst v0.12 has introduced the [strech](https://typst.app/docs/reference/math/stretch/) function.\n\n```typst\n$ \nmat(\n  delim: \"[\",\n  augment: #3,\n  1,2,-1,3;\n  2,-2,3,2;\n  3,-1,2,1;   \n) \nstretch(->)^(R_2 -> R_2 - 2R_1)_(R_3 -> R_3 - 3R_1)\nmat(\n  delim: \"[\",\n  augment: #3,\n  2,-2,3,2;\n  0,-6,5,-4;\n  0,-7,5,-8;   \n) \n$\n```\n![test|508x195](upload://ceXQnqd9oB30mv7j3abJPurFjIF.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 23,
      "score": 114.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    }
  ],
  "scraped_at": "2025-06-10T09:58:13.494866"
}
{
  "topic_metadata": {
    "id": 639,
    "title": "How can I get a box to use all height under a floating element?",
    "slug": "how-can-i-get-a-box-to-use-all-height-under-a-floating-element",
    "posts_count": 10,
    "created_at": "2024-09-24T14:16:06.795Z",
    "last_posted_at": "2024-10-09T15:07:14.151Z",
    "views": 260,
    "like_count": 2,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "Andrew",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 1349
  },
  "posts": [
    {
      "id": 2463,
      "post_number": 1,
      "username": "sijo",
      "name": "",
      "created_at": "2024-09-24T14:16:06.993Z",
      "updated_at": "2024-09-24T14:16:06.993Z",
      "cooked": "<p>I want to offer two functions:</p>\n<ul>\n<li><code>floating(it)</code>: places <code>it</code> as a floating element at the top of the page (plus some other stuff irrelevant to this question)</li>\n<li><code>tall-box(it)</code>: wraps <code>it</code> in a box that uses the full height, minus the height of the floating element if present</li>\n</ul>\n<p>My idea was to have <code>floating</code> add metadata with the float height, and have <code>tall-box</code> retrieve the metadata to size the box correctly.</p>\n<p>But that doesn’t seem to work:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 8cm, height: 6cm, margin: 1cm)\n\n#let float-label() = label(\"float\" + str(here().page()))\n\n#let floating(it) = context {\n  let height = measure(it).height\n  let new-it = [#it #metadata(height) #float-label()]\n  place(top, float: true, clearance: 0pt, new-it)\n}\n\n#let tall-box(color, it) = context {\n  let floats = query(float-label())\n  let float-h = if floats.len() == 0 { 0pt } else { floats.first().value }\n  context box(fill: color, height: 100% - float-h, it)\n}\n\n#set align(horizon)\n\n// page with tall box using the full height\n#box(fill: red, inset: 5mm)[User content]\n#tall-box(green)[Tall box]\n\n#pagebreak(weak: true)\n\n// page with blue float, and tall box using remaining height\n#floating(box(fill: blue, inset: 5mm, [Floating element]))\n#box(fill: red, inset: 5mm)[User content]\n#tall-box(green)[Tall box]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/ad5c6e51996a5c345e0f88a89e486b93cddb0812.png\" data-download-href=\"https://forum.typst.app/uploads/default/ad5c6e51996a5c345e0f88a89e486b93cddb0812\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/ad5c6e51996a5c345e0f88a89e486b93cddb0812_2_223x500.png\" alt=\"image\" data-base62-sha1=\"oJCDlY61XNeK8st9XJE4Jdwyhhw\" width=\"223\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/ad5c6e51996a5c345e0f88a89e486b93cddb0812_2_223x500.png, https://forum.typst.app/uploads/default/original/1X/ad5c6e51996a5c345e0f88a89e486b93cddb0812.png 1.5x, https://forum.typst.app/uploads/default/original/1X/ad5c6e51996a5c345e0f88a89e486b93cddb0812.png 2x\" data-dominant-color=\"E1E8E1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">305×682 8.38 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>The tall box gets pushed to a third page. I guess on the first iteration the float is not found so the tall box is sized too high, then the float is placed and the tall box is pushed to the next page. How can I avoid that?</p>\n<p>Weirdly it seems to work if I put the <code>#floating</code> line last:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">...\n#box(fill: red, inset: 5mm)[User content]\n#tall-box(green)[Tall box]\n#floating(box(fill: blue, inset: 5mm, [Floating element]))\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/d66bd7a5d8dda8d973daf7db9fa446b83b773a40.png\" alt=\"image\" data-base62-sha1=\"uARefJ2d9XT5lBBo1ugMvC1i3jq\" width=\"225\" height=\"339\"></p>\n<p>but in my application <code>floating</code> will usually be called first so I can’t rely on that.</p>",
      "raw": "I want to offer two functions:\n\n* `floating(it)`: places `it` as a floating element at the top of the page (plus some other stuff irrelevant to this question)\n* `tall-box(it)`: wraps `it` in a box that uses the full height, minus the height of the floating element if present\n\nMy idea was to have `floating` add metadata with the float height, and have `tall-box` retrieve the metadata to size the box correctly.\n\nBut that doesn't seem to work:\n\n```typ\n#set page(width: 8cm, height: 6cm, margin: 1cm)\n\n#let float-label() = label(\"float\" + str(here().page()))\n\n#let floating(it) = context {\n  let height = measure(it).height\n  let new-it = [#it #metadata(height) #float-label()]\n  place(top, float: true, clearance: 0pt, new-it)\n}\n\n#let tall-box(color, it) = context {\n  let floats = query(float-label())\n  let float-h = if floats.len() == 0 { 0pt } else { floats.first().value }\n  context box(fill: color, height: 100% - float-h, it)\n}\n\n#set align(horizon)\n\n// page with tall box using the full height\n#box(fill: red, inset: 5mm)[User content]\n#tall-box(green)[Tall box]\n\n#pagebreak(weak: true)\n\n// page with blue float, and tall box using remaining height\n#floating(box(fill: blue, inset: 5mm, [Floating element]))\n#box(fill: red, inset: 5mm)[User content]\n#tall-box(green)[Tall box]\n```\n\n![image|223x500, 100%](upload://oJCDlY61XNeK8st9XJE4Jdwyhhw.png)\n\nThe tall box gets pushed to a third page. I guess on the first iteration the float is not found so the tall box is sized too high, then the float is placed and the tall box is pushed to the next page. How can I avoid that?\n\nWeirdly it seems to work if I put the `#floating` line last:\n\n```typ\n...\n#box(fill: red, inset: 5mm)[User content]\n#tall-box(green)[Tall box]\n#floating(box(fill: blue, inset: 5mm, [Floating element]))\n```\n\n![image|301x453, 75%](upload://uARefJ2d9XT5lBBo1ugMvC1i3jq.png)\n\nbut in my application `floating` will usually be called first so I can't rely on that.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 55,
      "score": 570.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 2480,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T16:51:37.729Z",
      "updated_at": "2024-09-24T16:51:37.729Z",
      "cooked": "<p>When compiling it with 2024-09-09 version, it gives a warning about not being able to converge in 5 tries.</p>\n<p>I think it is because floating figures will be inserted last, after everything else is typeset, and it is clear where it is better to put it. But <code>tall-box</code> depends on the floating position, and it should be placed first. So there is some time-related conflict.</p>\n<p>I don’t really know how adding float last fixes this, but it somehow does. Either there is some hidden behavior that I don’t know, or it’s some sort of bug.</p>\n<p>The solution is very clever, and I personally don’t know how to change it.</p>\n<aside class=\"quote no-group\" data-username=\"sijo\" data-post=\"1\" data-topic=\"639\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/0A3649/48.png\" class=\"avatar\"> sijo:</div>\n<blockquote>\n<p>but in my application <code>floating</code> will usually be called first so I can’t rely on that.</p>\n</blockquote>\n</aside>\n<p>I assume that this is because it places some other stuff at the top too?</p>",
      "raw": "When compiling it with 2024-09-09 version, it gives a warning about not being able to converge in 5 tries.\n\nI think it is because floating figures will be inserted last, after everything else is typeset, and it is clear where it is better to put it. But `tall-box` depends on the floating position, and it should be placed first. So there is some time-related conflict.\n\nI don't really know how adding float last fixes this, but it somehow does. Either there is some hidden behavior that I don't know, or it's some sort of bug.\n\nThe solution is very clever, and I personally don't know how to change it.\n\n[quote=\"sijo, post:1, topic:639\"]\nbut in my application `floating` will usually be called first so I can’t rely on that.\n[/quote]\n\nI assume that this is because it places some other stuff at the top too?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 46,
      "score": 19.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2481,
      "post_number": 3,
      "username": "sijo",
      "name": "",
      "created_at": "2024-09-24T17:00:28.980Z",
      "updated_at": "2024-09-24T17:09:32.995Z",
      "cooked": "<p>Thanks, I just tried with the current main and don’t see any convergence issue so something must have changed recently.</p>\n<p>Regarding what you say about floats being inserted last: at first I thought that cannot be it because here with <code>place(top, float: true, ...)</code> the float position is already given. But maybe the implementation is shared with other types of floats that don’t have fix position, so indeed that could explain it.</p>\n<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"2\" data-topic=\"639\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>I assume that this is because it places some other stuff at the top too?</p>\n</blockquote>\n</aside>\n<p>That can happen, though the typical use for this <code>floating</code> function would be a show rule for some headings, and the red and green boxes correspond to content that the user adds later in the document.</p>\n<p>Edit: thinking more about it, another reason why the float insertion could be delayed is because typst might decide to insert first another float (this one without fixed alignment.</p>",
      "raw": "Thanks, I just tried with the current main and don't see any convergence issue so something must have changed recently.\n\nRegarding what you say about floats being inserted last: at first I thought that cannot be it because here with `place(top, float: true, ...)` the float position is already given. But maybe the implementation is shared with other types of floats that don't have fix position, so indeed that could explain it.\n\n[quote=\"Andrew, post:2, topic:639\"]\nI assume that this is because it places some other stuff at the top too?\n[/quote]\n\nThat can happen, though the typical use for this `floating` function would be a show rule for some headings, and the red and green boxes correspond to content that the user adds later in the document.\n\nEdit: thinking more about it, another reason why the float insertion could be delayed is because typst might decide to insert first another float (this one without fixed alignment.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 42,
      "score": 18.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 2501,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T22:37:49.165Z",
      "updated_at": "2024-09-24T22:37:49.165Z",
      "cooked": "<p>I’m not 100% sure, but <a class=\"mention\" href=\"/u/laurmaedje\">@laurmaedje</a> is working on <a href=\"https://github.com/typst/typst/pull/5017\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">New flow layout, with multi-column floats by laurmaedje · Pull Request #5017 · typst/typst · GitHub</a>, which <em>might</em> introduce <em>enough</em> changes so that this question can be solved more easily. One of the linked issues might be helpful too: <a href=\"https://github.com/typst/typst/issues/4220\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Support fraction as block height · Issue #4220 · typst/typst · GitHub</a>.</p>",
      "raw": "I'm not 100% sure, but @laurmaedje is working on https://github.com/typst/typst/pull/5017, which *might* introduce *enough* changes so that this question can be solved more easily. One of the linked issues might be helpful too: https://github.com/typst/typst/issues/4220.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 26.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2602,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2024-09-25T17:38:16.222Z",
      "updated_at": "2024-09-25T17:38:55.227Z",
      "cooked": "<p>Haha I reported that linked issue :) Indeed now that this awesome PR fixed it I can use <code>block(height: 1fr, ...)</code> which covers the main use case.</p>\n<p>It’s not a complete fix since I also have the red box on the left, so I must get the user to put red and green together in a <code>block(height: 1fr)</code>. It’s also a bit less flexible than what I had in mind: I thought <code>tall-box</code> could have a parameter to make the height only <code>90%</code> or <code>50%</code> or whatever, but <code>height: 1fr</code> will always take the full height.</p>\n<p>Anyway I think this will be good enough for now.</p>",
      "raw": "Haha I reported that linked issue :) Indeed now that this awesome PR fixed it I can use `block(height: 1fr, ...)` which covers the main use case.\n\nIt's not a complete fix since I also have the red box on the left, so I must get the user to put red and green together in a `block(height: 1fr)`. It's also a bit less flexible than what I had in mind: I thought `tall-box` could have a parameter to make the height only `90%` or `50%` or whatever, but `height: 1fr` will always take the full height.\n\nAnyway I think this will be good enough for now.",
      "reply_to_post_number": 4,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 16.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 2606,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-25T18:38:55.375Z",
      "updated_at": "2024-09-25T18:39:14.721Z",
      "cooked": "<p>You can try <code>0.5fr</code>, but I think it won’t make a difference since it’s the only block that has a fraction height.</p>",
      "raw": "You can try `0.5fr`, but I think it won't make a difference since it's the only block that has a fraction height.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 12.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2640,
      "post_number": 7,
      "username": "sijo",
      "name": "",
      "created_at": "2024-09-26T10:12:24.271Z",
      "updated_at": "2024-09-26T10:12:24.271Z",
      "cooked": "<p>Yeah exactly… Also I’d like to be able to reserve some space on the page for other things above or below, e.g. having a tall-box height of <code>100% - 2cm</code>. I can convert that to the correct height if I know the height of the floating element (though it doesn’t work as discussed above because the floating element is found too late). With a <code>...fr</code> height I cannot reserve space.</p>",
      "raw": "Yeah exactly... Also I'd like to be able to reserve some space on the page for other things above or below, e.g. having a tall-box height of `100% - 2cm`. I can convert that to the correct height if I know the height of the floating element (though it doesn't work as discussed above because the floating element is found too late). With a `...fr` height I cannot reserve space.",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 11.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3413,
      "post_number": 8,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-04T16:39:58.458Z",
      "updated_at": "2024-10-04T16:44:45.441Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"sijo\" data-post=\"5\" data-topic=\"639\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/0A3649/48.png\" class=\"avatar\"> sijo:</div>\n<blockquote>\n<p>I thought <code>tall-box</code> could have a parameter to make the height only <code>90%</code> or <code>50%</code> or whatever</p>\n</blockquote>\n</aside>\n<p>Doesn’t this work how you want it?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 8cm, height: 6cm, margin: 1cm)\n\n#let floating = place.with(top, float: true, clearance: 0pt)\n#let tall-box(color, height: 100%, it) = {\n  box(fill: color, height: height, align(horizon, it))\n}\n\n// page with tall box using the full height\n#box(fill: red, inset: 5mm)[User content]\n#tall-box(green)[Tall box]\n\n#pagebreak()\n\n// page with blue float, and tall box using remaining height\n#floating(box(fill: blue, inset: 5mm, [Floating element]))\n#block(height: 1fr, {\n  set align(bottom)\n  box(fill: red, inset: 5mm)[User content]\n  tall-box(green, height: 50%)[Tall box]\n})\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/3f0d1f2dd6d0071572c9f31147709c0f3edab953.png\" data-download-href=\"https://forum.typst.app/uploads/default/3f0d1f2dd6d0071572c9f31147709c0f3edab953\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/3f0d1f2dd6d0071572c9f31147709c0f3edab953_2_332x500.png\" alt=\"image\" data-base62-sha1=\"8ZMc1xQGhi7Ol2okCDJ6L81tTaz\" width=\"332\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/3f0d1f2dd6d0071572c9f31147709c0f3edab953_2_332x500.png, https://forum.typst.app/uploads/default/original/1X/3f0d1f2dd6d0071572c9f31147709c0f3edab953.png 1.5x, https://forum.typst.app/uploads/default/original/1X/3f0d1f2dd6d0071572c9f31147709c0f3edab953.png 2x\" data-dominant-color=\"181B15\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">461×694 13.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<aside class=\"quote no-group\" data-username=\"sijo\" data-post=\"7\" data-topic=\"639\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/0A3649/48.png\" class=\"avatar\"> sijo:</div>\n<blockquote>\n<p>Also I’d like to be able to reserve some space on the page for other things above or below, e.g. having a tall-box height of <code>100% - 2cm</code>.</p>\n</blockquote>\n</aside>\n<p>Since <code>box.height</code> already supports <a href=\"https://typst.app/docs/reference/layout/relative/\"><code>relative</code></a> type, you can do that.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#block(height: 1fr, {\n  set align(bottom)\n  box(fill: red, inset: 5mm)[User content]\n  tall-box(green, height: 100% - 2cm)[Tall box]\n})\n</code></pre>\n<p>There is also <code>v(1fr)</code> that you can integrate somewhere, maybe.</p>",
      "raw": "[quote=\"sijo, post:5, topic:639\"]\nI thought `tall-box` could have a parameter to make the height only `90%` or `50%` or whatever\n[/quote]\n\nDoesn't this work how you want it?\n\n```typ\n#set page(width: 8cm, height: 6cm, margin: 1cm)\n\n#let floating = place.with(top, float: true, clearance: 0pt)\n#let tall-box(color, height: 100%, it) = {\n  box(fill: color, height: height, align(horizon, it))\n}\n\n// page with tall box using the full height\n#box(fill: red, inset: 5mm)[User content]\n#tall-box(green)[Tall box]\n\n#pagebreak()\n\n// page with blue float, and tall box using remaining height\n#floating(box(fill: blue, inset: 5mm, [Floating element]))\n#block(height: 1fr, {\n  set align(bottom)\n  box(fill: red, inset: 5mm)[User content]\n  tall-box(green, height: 50%)[Tall box]\n})\n```\n\n![image|332x500](upload://8ZMc1xQGhi7Ol2okCDJ6L81tTaz.png)\n\n[quote=\"sijo, post:7, topic:639\"]\nAlso I’d like to be able to reserve some space on the page for other things above or below, e.g. having a tall-box height of `100% - 2cm`.\n[/quote]\n\nSince `box.height` already supports [`relative`](https://typst.app/docs/reference/layout/relative/) type, you can do that.\n\n```typ\n#block(height: 1fr, {\n  set align(bottom)\n  box(fill: red, inset: 5mm)[User content]\n  tall-box(green, height: 100% - 2cm)[Tall box]\n})\n```\n\nThere is also `v(1fr)` that you can integrate somewhere, maybe.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 2,
      "like_count": 1,
      "reads": 34,
      "score": 66.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3526,
      "post_number": 9,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-07T13:06:11.135Z",
      "updated_at": "2024-10-07T13:06:50.960Z",
      "cooked": "<p>Yes that works! I got to the same solution :) The downside is that I must ask the user to add this <code>block(height: 1fr, it)</code> wrapper themselves. I was hoping I could get <code>floating</code> and <code>tall-box</code> to just work. For now I’ll add the <code>block</code> wrapper method to the documentation.</p>",
      "raw": "Yes that works! I got to the same solution :) The downside is that I must ask the user to add this `block(height: 1fr, it)` wrapper themselves. I was hoping I could get `floating` and `tall-box` to just work. For now I'll add the `block` wrapper method to the documentation.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3617,
      "post_number": 10,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-09T15:07:14.151Z",
      "updated_at": "2024-10-09T15:07:14.151Z",
      "cooked": "<p>So I finally found a solution that checks all the boxes, though I’m not sure how much I can rely on it working with future typst versions:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 8cm, height: 6cm, margin: 1cm)\n\n#let float-label(page) = label(\"float\" + str(page))\n\n#let floating(it) = context {\n  let height = measure(it).height\n  let new-it = [#it #metadata(height) #float-label(here().page())]\n  place(top, float: true, clearance: 0pt, new-it)\n}\n\n#let tall-box(color, it) = {\n  context [#metadata((page: here().page()))&lt;tall-box-pos&gt;]\n  context {\n    let md = query(selector(&lt;tall-box-pos&gt;).before(here())).last()\n    let floats = query(float-label(md.value.page))\n    let float-h = if floats.len() == 0 { 0pt } else { floats.first().value }\n    context box(fill: color, height: 100% - float-h, it)\n  }\n}\n\n#set align(horizon)\n\n// page with tall box using the full height\n#box(fill: red, inset: 5mm)[User content]\n#tall-box(green)[Tall box]\n#pagebreak(weak: true)\n\n// page with blue float, and tall box using remaining height\n#floating(box(fill: blue, inset: 5mm, [Floating element]))\n#box(fill: red, inset: 5mm)[User content]\n#tall-box(green)[Tall box]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/346b4cb366e40f91a11d725bfefe91e41af64123.png\" data-download-href=\"https://forum.typst.app/uploads/default/346b4cb366e40f91a11d725bfefe91e41af64123\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/346b4cb366e40f91a11d725bfefe91e41af64123_2_250x375.png\" alt=\"image\" data-base62-sha1=\"7tIIrsWBuG5fgMw4k2VHevKt587\" width=\"250\" height=\"375\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/346b4cb366e40f91a11d725bfefe91e41af64123_2_250x375.png, https://forum.typst.app/uploads/default/original/1X/346b4cb366e40f91a11d725bfefe91e41af64123.png 1.5x, https://forum.typst.app/uploads/default/original/1X/346b4cb366e40f91a11d725bfefe91e41af64123.png 2x\" data-dominant-color=\"D6DDD4\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">349×521 8.51 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "So I finally found a solution that checks all the boxes, though I'm not sure how much I can rely on it working with future typst versions:\n\n```typ\n#set page(width: 8cm, height: 6cm, margin: 1cm)\n\n#let float-label(page) = label(\"float\" + str(page))\n\n#let floating(it) = context {\n  let height = measure(it).height\n  let new-it = [#it #metadata(height) #float-label(here().page())]\n  place(top, float: true, clearance: 0pt, new-it)\n}\n\n#let tall-box(color, it) = {\n  context [#metadata((page: here().page()))<tall-box-pos>]\n  context {\n    let md = query(selector(<tall-box-pos>).before(here())).last()\n    let floats = query(float-label(md.value.page))\n    let float-h = if floats.len() == 0 { 0pt } else { floats.first().value }\n    context box(fill: color, height: 100% - float-h, it)\n  }\n}\n\n#set align(horizon)\n\n// page with tall box using the full height\n#box(fill: red, inset: 5mm)[User content]\n#tall-box(green)[Tall box]\n#pagebreak(weak: true)\n\n// page with blue float, and tall box using remaining height\n#floating(box(fill: blue, inset: 5mm, [Floating element]))\n#box(fill: red, inset: 5mm)[User content]\n#tall-box(green)[Tall box]\n```\n\n![image|334x500, 75%](upload://7tIIrsWBuG5fgMw4k2VHevKt587.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:58:12.735354"
}
{
  "topic_metadata": {
    "id": 640,
    "title": "How to increase the spacing between the number and the title of a heading?",
    "slug": "how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading",
    "posts_count": 25,
    "created_at": "2024-09-24T15:02:06.612Z",
    "last_posted_at": "2024-11-16T19:38:05.365Z",
    "views": 1820,
    "like_count": 23,
    "reply_count": 17,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "spacing"
    ],
    "category_id": 5,
    "participant_count": 8,
    "word_count": 3229
  },
  "posts": [
    {
      "id": 2467,
      "post_number": 1,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-09-24T15:02:06.725Z",
      "updated_at": "2024-09-24T15:09:41.897Z",
      "cooked": "<p>I want to increase the default spacing between the number and the title of a heading.</p>\n<p>This solution does <strong>not</strong> work, it inserts a vertical space before the heading.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1\")\n\nBlabla 1\n\n= This is test 1\n\n#show heading: it =&gt; [#h(1em) #it]\n\nBlabla 2\n\n= This is test 2\n\nBlabla 3\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/c06006f95181a1ceaa8a9a9c11d11e441a750a6e.png\" alt=\"image\" data-base62-sha1=\"rrPpwJRGi9zw2Mi5oDLEVtRGO06\" width=\"225\" height=\"248\"></p>",
      "raw": "I want to increase the default spacing between the number and the title of a heading.\n\nThis solution does **not** work, it inserts a vertical space before the heading.\n\n```typ\n#set heading(numbering: \"1.1\")\n\nBlabla 1\n\n= This is test 1\n\n#show heading: it => [#h(1em) #it]\n\nBlabla 2\n\n= This is test 2\n\nBlabla 3\n```\n\n![image|225x248](upload://rrPpwJRGi9zw2Mi5oDLEVtRGO06.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 119,
      "score": 8403.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 2468,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T15:12:48.366Z",
      "updated_at": "2024-09-24T16:39:09.163Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1\")\nBlabla 1\n= This is test 1\n#set heading(numbering: (..n) =&gt; h(1cm) + numbering(\"1.1\", ..n))\nBlabla 2\n= This is test 2\nBlabla 3\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/8a2ffed2e663349660ef15e21fec7d341852b790.png\" alt=\"image\" data-base62-sha1=\"jIsIG09p70pGwCjhUbn7s1yXuec\" width=\"343\" height=\"277\"></p>\n<p>You probably can also use <code>pad(left: 1cm, &lt;numbering&gt;)</code> instead of <code>h() + </code>, if you want. Or you can even <a href=\"https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/3\">reconstruct the heading and embed the spacing there</a>, but <a href=\"https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/4\">be sure to wrap it all in <code>block()</code></a>.</p>\n<p>However, note that if you plan on using a period (or other symbol) at the end of the numbering format string, this will introduce an unwanted behavior when referencing a heading label:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1.\")\n= A &lt;a&gt;\n@a.\n#set heading(numbering: (..n) =&gt; numbering(\"1.1.\", ..n))\n= B &lt;b&gt;\n@b.\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/5cd3b4f7a389c5bbaa893b35fc441dca3f49bc42.png\" alt=\"image\" data-base62-sha1=\"dfbvrNeNYpJn4gJFEEhhucJrD4S\" width=\"137\" height=\"204\"></p>\n<p>This is because with a custom/user function, Typst can’t know if the last period is mandatory or can be lifted when a period already exist (at the end of a sentence).</p>",
      "raw": "```typ\n#set heading(numbering: \"1.1\")\nBlabla 1\n= This is test 1\n#set heading(numbering: (..n) => h(1cm) + numbering(\"1.1\", ..n))\nBlabla 2\n= This is test 2\nBlabla 3\n```\n\n![image|343x277](upload://jIsIG09p70pGwCjhUbn7s1yXuec.png)\n\nYou probably can also use `pad(left: 1cm, <numbering>)` instead of `h() + `, if you want. Or you can even [reconstruct the heading and embed the spacing there](https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/3), but [be sure to wrap it all in `block()`](https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/4).\n\nHowever, note that if you plan on using a period (or other symbol) at the end of the numbering format string, this will introduce an unwanted behavior when referencing a heading label:\n\n```typ\n#set heading(numbering: \"1.1.\")\n= A <a>\n@a.\n#set heading(numbering: (..n) => numbering(\"1.1.\", ..n))\n= B <b>\n@b.\n```\n\n![image|137x204](upload://dfbvrNeNYpJn4gJFEEhhucJrD4S.png)\n\nThis is because with a custom/user function, Typst can't know if the last period is mandatory or can be lifted when a period already exist (at the end of a sentence).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 112,
      "score": 152.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2469,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-24T15:37:10.229Z",
      "updated_at": "2024-09-24T23:45:25.805Z",
      "cooked": "<p>If you want to have more spacing between “1.” and “Heading” in “1. Heading”, you can use a show rule to “rebuild” the heading from scratch:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.\")\n#show heading: it =&gt; block(counter(heading).display(it.numbering) + h(2em) + it.body)\n\n= Hello world!\n\n== Hello.\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/81ee903579031a650a859bf9e02e42875c993bc9.png\" data-download-href=\"https://forum.typst.app/uploads/default/81ee903579031a650a859bf9e02e42875c993bc9\" title=\"output with spacing between 1. and title\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/81ee903579031a650a859bf9e02e42875c993bc9_2_690x124.png\" alt=\"output with spacing between 1. and title\" data-base62-sha1=\"ixqIdFSHvev9Q3QPwUyrFzLxntv\" width=\"690\" height=\"124\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/81ee903579031a650a859bf9e02e42875c993bc9_2_690x124.png, https://forum.typst.app/uploads/default/optimized/1X/81ee903579031a650a859bf9e02e42875c993bc9_2_1035x186.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/81ee903579031a650a859bf9e02e42875c993bc9_2_1380x248.png 2x\" data-dominant-color=\"F7F7F7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">output with spacing between 1. and title</span><span class=\"informations\">1500×271 21.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p><em>(Update [2024-09-24]: added <code>block()</code> around the replaced heading’s contents to ensure block spacing around headings is preserved, see <a href=\"https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/4\" class=\"inline-onebox\">How to increase the spacing between the number and the title of a heading? - #4 by Eric</a>)</em></p>",
      "raw": "If you want to have more spacing between \"1.\" and \"Heading\" in \"1. Heading\", you can use a show rule to \"rebuild\" the heading from scratch:\n\n```typ\n#set heading(numbering: \"1.\")\n#show heading: it => block(counter(heading).display(it.numbering) + h(2em) + it.body)\n\n= Hello world!\n\n== Hello.\n```\n![output with spacing between 1. and title|690x124](upload://ixqIdFSHvev9Q3QPwUyrFzLxntv.png)\n\n_(Update [2024-09-24]: added `block()` around the replaced heading's contents to ensure block spacing around headings is preserved, see https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/4)_",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 5,
      "reads": 102,
      "score": 175.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 2477,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-24T16:33:17.763Z",
      "updated_at": "2024-09-24T16:33:17.763Z",
      "cooked": "<p>One thing to note when rebuilding the heading like that is that you should wrap it in a block to keep the spacing behavior of the original heading. When just using <code>it.body</code>, the heading gets display inline (or here as a normal paragraph).</p>",
      "raw": "One thing to note when rebuilding the heading like that is that you should wrap it in a block to keep the spacing behavior of the original heading. When just using `it.body`, the heading gets display inline (or here as a normal paragraph).",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 4,
      "reads": 92,
      "score": 173.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2504,
      "post_number": 5,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-24T23:45:44.465Z",
      "updated_at": "2024-09-24T23:45:44.465Z",
      "cooked": "<p>Thanks, I’ve updated my answer.</p>",
      "raw": "Thanks, I've updated my answer.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 94,
      "score": 23.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 2516,
      "post_number": 6,
      "username": "sijo",
      "name": "",
      "created_at": "2024-09-25T06:57:00.376Z",
      "updated_at": "2024-09-25T06:57:15.657Z",
      "cooked": "<p>If you also want the additional spacing in the outline, you can just do <code>#set heading(numbering: \"1.1  \")</code> (with extra spaces in the string)</p>",
      "raw": "If you also want the additional spacing in the outline, you can just do `#set heading(numbering: \"1.1  \")` (with extra spaces in the string)",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 90,
      "score": 53.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 2564,
      "post_number": 7,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-09-25T12:15:25.751Z",
      "updated_at": "2024-09-25T12:15:25.751Z",
      "cooked": "<p>This solution is also very elegant! I’m not sure which answer to accept.</p>",
      "raw": "This solution is also very elegant! I'm not sure which answer to accept.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 82,
      "score": 26.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 2675,
      "post_number": 8,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-26T20:12:17.197Z",
      "updated_at": "2024-09-26T20:22:29.429Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"sijo\" data-post=\"6\" data-topic=\"640\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/0A3649/48.png\" class=\"avatar\"> sijo:</div>\n<blockquote>\n<p>If you also want the additional spacing in the outline, you can just do <code>#set heading(numbering: \"1.1  \")</code> (with extra spaces in the string)</p>\n</blockquote>\n</aside>\n<p>This will affect <code>@references</code> as well, so it’s not recommended. Use a show rule similar to the one in <a href=\"https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/3\">my answer</a> but for <code>outline.entry</code> instead. Note that it gets a bit longer though, since you also have to add <code>it.fill</code> and <code>it.page</code> after the title.</p>\n<p>You will also have to write <code>numbering(it.element.numbering, ..counter(heading).at(it.element.location()))</code> instead of just <code>counter(heading).display(it.element.numbering)</code> to ensure it uses the numbers from the heading’s original location instead of the outline entry’s location (which would always return the number 0, since the outline comes before any headings).</p>\n<p>Here’s the complete deal:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.\")\n\n// Don't add spacing when there's no numbering (which is the case for the outline title)\n#show heading: it =&gt; if it.numbering == none { it } else { block(counter(heading).display(it.numbering) + h(2em) + it.body) }\n\n// NEW! Add spacing in the entries\n#show outline.entry: it =&gt; {\n  if it.element.func() == heading { // don't interfere with figure outlines (optional if you don't have one)\n    let head = it.element // just to make our code shorter\n    let number = numbering(head.numbering, ..counter(heading).at(head.location()))\n    let fill = box(width: 1fr, it.fill)  // ensure the fill doesn't occupy the full page width, just the available space (1fr)\n    [#number #h(2em) #head.body #fill #it.page]\n  }\n}\n\n#outline()\n= Hello world!\n\n== Hello world!\n\n= Hello world!\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/657dee848c553ec501b7aa76a509f6dd711898aa.png\" data-download-href=\"https://forum.typst.app/uploads/default/657dee848c553ec501b7aa76a509f6dd711898aa\" title=\"output: spacing in heading and outline\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/657dee848c553ec501b7aa76a509f6dd711898aa_2_690x363.png\" alt=\"output: spacing in heading and outline\" data-base62-sha1=\"etQ1YQTUoBlLabVEErcIzDbTIxA\" width=\"690\" height=\"363\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/657dee848c553ec501b7aa76a509f6dd711898aa_2_690x363.png, https://forum.typst.app/uploads/default/optimized/1X/657dee848c553ec501b7aa76a509f6dd711898aa_2_1035x544.png 1.5x, https://forum.typst.app/uploads/default/original/1X/657dee848c553ec501b7aa76a509f6dd711898aa.png 2x\" data-dominant-color=\"F5F5F5\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">output: spacing in heading and outline</span><span class=\"informations\">1378×726 85.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "[quote=\"sijo, post:6, topic:640, full:true\"]\nIf you also want the additional spacing in the outline, you can just do `#set heading(numbering: \"1.1  \")` (with extra spaces in the string)\n[/quote]\n\n\nThis will affect `@references` as well, so it's not recommended. Use a show rule similar to the one in [my answer](https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/3) but for `outline.entry` instead. Note that it gets a bit longer though, since you also have to add `it.fill` and `it.page` after the title.\n\nYou will also have to write `numbering(it.element.numbering, ..counter(heading).at(it.element.location()))` instead of just `counter(heading).display(it.element.numbering)` to ensure it uses the numbers from the heading's original location instead of the outline entry's location (which would always return the number 0, since the outline comes before any headings).\n\nHere's the complete deal:\n\n```typ\n#set heading(numbering: \"1.\")\n\n// Don't add spacing when there's no numbering (which is the case for the outline title)\n#show heading: it => if it.numbering == none { it } else { block(counter(heading).display(it.numbering) + h(2em) + it.body) }\n\n// NEW! Add spacing in the entries\n#show outline.entry: it => {\n  if it.element.func() == heading { // don't interfere with figure outlines (optional if you don't have one)\n    let head = it.element // just to make our code shorter\n    let number = numbering(head.numbering, ..counter(heading).at(head.location()))\n    let fill = box(width: 1fr, it.fill)  // ensure the fill doesn't occupy the full page width, just the available space (1fr)\n    [#number #h(2em) #head.body #fill #it.page]\n  }\n}\n\n#outline()\n= Hello world!\n\n== Hello world!\n\n= Hello world!\n```\n![output: spacing in heading and outline|690x363](upload://etQ1YQTUoBlLabVEErcIzDbTIxA.png)",
      "reply_to_post_number": 6,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 1,
      "reads": 75,
      "score": 90.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 2700,
      "post_number": 9,
      "username": "sijo",
      "name": "",
      "created_at": "2024-09-27T07:17:20.312Z",
      "updated_at": "2024-09-27T07:17:20.312Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"PgBiel\" data-post=\"8\" data-topic=\"640\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/F64C96/48.png\" class=\"avatar\"> PgBiel:</div>\n<blockquote>\n<p>This will affect <code>@references</code> as well, so it’s not recommended.</p>\n</blockquote>\n</aside>\n<p>Actually it doesn’t for some reason:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.   \")\n= A &lt;a&gt;\nSee @a. \n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/47d7391930be1a78d80d10f779e0002379b5a962.png\" alt=\"image\" data-base62-sha1=\"afx0QqK7Oz2MY0A0HYktydIhVwC\" width=\"121\" height=\"67\"></p>\n<p>or did you have something else in mind?</p>\n<p>In any case I agree it might be a hack rather than a clean solution, unless the ref behavior of stripping the space gets documented.</p>",
      "raw": "[quote=\"PgBiel, post:8, topic:640\"]\nThis will affect `@references` as well, so it’s not recommended.\n[/quote]\n\nActually it doesn't for some reason:\n\n```typ\n#set heading(numbering: \"1.   \")\n= A <a>\nSee @a. \n```\n![image|162x90, 75%](upload://afx0QqK7Oz2MY0A0HYktydIhVwC.png)\n\nor did you have something else in mind?\n\nIn any case I agree it might be a hack rather than a clean solution, unless the ref behavior of stripping the space gets documented.",
      "reply_to_post_number": 8,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 1,
      "reads": 60,
      "score": 42.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 2710,
      "post_number": 10,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-09-27T09:57:27.704Z",
      "updated_at": "2024-09-27T09:57:27.704Z",
      "cooked": "<p>Indeed that’s why I used sijo’s solution in the end, Typst seems to do smart trailing space elision for references.</p>",
      "raw": "Indeed that's why I used sijo's solution in the end, Typst seems to do smart trailing space elision for references.",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 57,
      "score": 21.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 2719,
      "post_number": 11,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-27T11:44:39.172Z",
      "updated_at": "2024-09-27T11:44:39.172Z",
      "cooked": "<p>Hmm, this is slightly weird as I thought it won’t add any additional space to the heading because multiple spaces are generally always merged into one. But for references this rule does apply, although it removes <strong>all</strong> spaces, since the period is connected to the reference body.</p>",
      "raw": "Hmm, this is slightly weird as I thought it won't add any additional space to the heading because multiple spaces are generally always merged into one. But for references this rule does apply, although it removes **all** spaces, since the period is connected to the reference body.",
      "reply_to_post_number": 9,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 59,
      "score": 16.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2725,
      "post_number": 12,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-27T13:52:09.370Z",
      "updated_at": "2024-09-27T13:52:09.370Z",
      "cooked": "<p>This doesn’t actually have to do with multiple spaces being merged into one. In references, the <em>trimmed</em> numbering pattern is used, which consists only of the actual number. Any prefixes and suffixes are removed. This is also why a reference to an equation with the numbering <code>\"(1)\"</code> shows as “Equation 1” instead of “Equation (1)”.</p>",
      "raw": "This doesn't actually have to do with multiple spaces being merged into one. In references, the _trimmed_ numbering pattern is used, which consists only of the actual number. Any prefixes and suffixes are removed. This is also why a reference to an equation with the numbering `\"(1)\"` shows as \"Equation 1\" instead of \"Equation (1)\".",
      "reply_to_post_number": 11,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 59,
      "score": 91.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2964,
      "post_number": 13,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-29T20:44:54.169Z",
      "updated_at": "2024-09-29T20:44:54.169Z",
      "cooked": "<p>Thanks, I wasn’t fully aware that spaces were also trimmed. Though I’d still be wary of issues popping up when e.g. manually invoking <code>numbering(it.numbering, ..numbers)</code> in a show rule.</p>",
      "raw": "Thanks, I wasn't fully aware that spaces were also trimmed. Though I'd still be wary of issues popping up when e.g. manually invoking `numbering(it.numbering, ..numbers)` in a show rule.",
      "reply_to_post_number": 12,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 57,
      "score": 11.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5258,
      "post_number": 14,
      "username": "a_w",
      "name": "Alex",
      "created_at": "2024-11-07T13:09:04.181Z",
      "updated_at": "2024-11-07T13:09:04.181Z",
      "cooked": "<p>The example currently seems to fail with:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/7/7126cc840d4bf1ff9be9d74dda2f1118bbaa2a2f.png\" data-download-href=\"https://forum.typst.app/uploads/default/7126cc840d4bf1ff9be9d74dda2f1118bbaa2a2f\" title=\"error\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/7/7126cc840d4bf1ff9be9d74dda2f1118bbaa2a2f_2_690x335.png\" alt=\"error\" data-base62-sha1=\"g8Z4Z3m0kF8MtvarErnZUcJxa11\" width=\"690\" height=\"335\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/7/7126cc840d4bf1ff9be9d74dda2f1118bbaa2a2f_2_690x335.png, https://forum.typst.app/uploads/default/optimized/2X/7/7126cc840d4bf1ff9be9d74dda2f1118bbaa2a2f_2_1035x502.png 1.5x, https://forum.typst.app/uploads/default/original/2X/7/7126cc840d4bf1ff9be9d74dda2f1118bbaa2a2f.png 2x\" data-dominant-color=\"333642\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">error</span><span class=\"informations\">1048×510 96.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\n<code>error: expected string or function, found none</code></p>\n<p>Could this be due to a 0.11 &lt;&gt; 0.12 change?</p>",
      "raw": "The example currently seems to fail with:\n\n![error|690x335](upload://g8Z4Z3m0kF8MtvarErnZUcJxa11.png)\n`error: expected string or function, found none`\n\nCould this be due to a 0.11 <> 0.12 change?",
      "reply_to_post_number": 8,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 30.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 566
    },
    {
      "id": 5264,
      "post_number": 15,
      "username": "flokl",
      "name": "",
      "created_at": "2024-11-07T15:32:57.602Z",
      "updated_at": "2024-11-07T15:38:24.973Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/a_w\">@a_w</a> it works for me on v0.12. Did you by any chance not add any heading numbering like <code>#set heading(numbering: \"1.\")</code>?</p>",
      "raw": "@a_w it works for me on v0.12. Did you by any chance not add any heading numbering like `#set heading(numbering: \"1.\")`?",
      "reply_to_post_number": 14,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 46,
      "score": 24.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 5269,
      "post_number": 16,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-11-07T16:16:40.330Z",
      "updated_at": "2024-11-07T16:18:21.040Z",
      "cooked": "<p>If you have any unnumbered headings (e.g. bibliography), the given show rule will error as you can’t pass <code>none</code> to the <code>numbering</code> function. This is why I would always suggest putting the number (and the following space) in a conditional. For example, when adjusting <a class=\"mention\" href=\"/u/pgbiel\">@PgBiel</a>’s code from above:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; {\n  if it.element.func() == heading { // don't interfere with figure outlines (optional if you don't have one)\n    let head = it.element // just to make our code shorter\n    let number = if head.numbering != none {\n      numbering(head.numbering, ..counter(heading).at(head.location()))\n    }\n    let fill = box(width: 1fr, it.fill)  // ensure the fill doesn't occupy the full page width, just the available space (1fr)\n    [#number #h(2em, weak: true) #head.body #fill #it.page]\n  } else {\n    it // use default style for figure outlines\n  }\n}\n</code></pre>\n<p>By making the <code>2em</code> spacing weak, it will collapse if there is no number before it.</p>",
      "raw": "If you have any unnumbered headings (e.g. bibliography), the given show rule will error as you can't pass `none` to the `numbering` function. This is why I would always suggest putting the number (and the following space) in a conditional. For example, when adjusting @PgBiel's code from above:\n\n```typ\n#show outline.entry: it => {\n  if it.element.func() == heading { // don't interfere with figure outlines (optional if you don't have one)\n    let head = it.element // just to make our code shorter\n    let number = if head.numbering != none {\n      numbering(head.numbering, ..counter(heading).at(head.location()))\n    }\n    let fill = box(width: 1fr, it.fill)  // ensure the fill doesn't occupy the full page width, just the available space (1fr)\n    [#number #h(2em, weak: true) #head.body #fill #it.page]\n  } else {\n    it // use default style for figure outlines\n  }\n}\n```\n\nBy making the `2em` spacing weak, it will collapse if there is no number before it.",
      "reply_to_post_number": 14,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 49,
      "score": 74.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 5271,
      "post_number": 17,
      "username": "a_w",
      "name": "Alex",
      "created_at": "2024-11-07T17:56:34.934Z",
      "updated_at": "2024-11-13T08:12:55.852Z",
      "cooked": "<p>You were both right, I have one unnumbered headline (Bibliography). Very, very helpful thanks so much! <img src=\"https://forum.typst.app/images/emoji/apple/pray.png?v=12\" title=\":pray:\" class=\"emoji\" alt=\":pray:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Update: Original part of the post:</p>\n<blockquote>\n<p>This is more of a learning question, but maybe it is also useful for others (and actually related to the topic). I have this if-condition to make the level: 1 heads bold:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">    if head.level == 1 {\n      [*#number #h(1em, weak: true) #head.body #fill #it.page*]\n    } else {\n      [#number #h(1em, weak: true) #head.body #fill #it.page]\n    }\n</code></pre>\n<p>It works, but it is quite repetitive – is there a better, more elegant way to make such modifications? I don’t think there is a ternary, but I think I had situations like this a couple of times now and always wondered if I could do it better somehow.</p>\n</blockquote>\n<p>Update: My approach to making this shorter and easier to maintain was to store the string contruction in a variable and using that, instead of repeating the line. See <a href=\"https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/19\">post 19</a>.</p>\n<blockquote>\n<p>And while I wrote this actually a follow-up question came up. My</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">[#number #h(1em, weak: true) #head.body #fill #it.page]\n#v(0.1pt, weak: true) // spaces way more than expected\n</code></pre>\n<p>I had in there now goes rampant even if I make it <code>0.01pt</code> I guess that is because the boxes/blocks collapsed and the vertical space stops that. I can get the expected result by making the <code>#v</code> negative, but it doesn’t seem like the “correct” solution? How would control of the vertical spacing be approach best?</p>\n</blockquote>\n<p>This is still relevant but might get answered below.</p>",
      "raw": "You were both right, I have one unnumbered headline (Bibliography). Very, very helpful thanks so much! 🙏\n\nUpdate: Original part of the post:\n> This is more of a learning question, but maybe it is also useful for others (and actually related to the topic). I have this if-condition to make the level: 1 heads bold:\n> \n> ```typ\n>     if head.level == 1 {\n>       [*#number #h(1em, weak: true) #head.body #fill #it.page*]\n>     } else {\n>       [#number #h(1em, weak: true) #head.body #fill #it.page]\n>     }\n> ```\n>\n> It works, but it is quite repetitive – is there a better, more elegant way to make such modifications? I don't think there is a ternary, but I think I had situations like this a couple of times now and always wondered if I could do it better somehow.\n\nUpdate: My approach to making this shorter and easier to maintain was to store the string contruction in a variable and using that, instead of repeating the line. See [post 19](https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/19?u=a_w).\n\n> And while I wrote this actually a follow-up question came up. My\n> \n> ```typ\n> [#number #h(1em, weak: true) #head.body #fill #it.page]\n> #v(0.1pt, weak: true) // spaces way more than expected\n> ```\n> \n> I had in there now goes rampant even if I make it `0.01pt` I guess that is because the boxes/blocks collapsed and the vertical space stops that. I can get the expected result by making the `#v` negative, but it doesn't seem like the \"correct\" solution? How would control of the vertical spacing be approach best?\n\nThis is still relevant but might get answered below.",
      "reply_to_post_number": 16,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 29.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 566
    },
    {
      "id": 5307,
      "post_number": 18,
      "username": "a_w",
      "name": "Alex",
      "created_at": "2024-11-08T09:58:09.780Z",
      "updated_at": "2024-11-13T08:04:33.791Z",
      "cooked": "<p>Update: Original post, no longer relevant:</p>\n<blockquote>\n<p>Addendum: I also just realized the reconstructing the outline this way removed the link functionality within the document.</p>\n<p>Using</p>\n<pre><code class=\"lang-auto\">repr(head)\n</code></pre>\n<p>I found no obvious clue to “correctly” link to the headline (such as a label?).</p>\n<p>I can get</p>\n<pre><code class=\"lang-auto\">link(\"https://forum.typst.app\")[*#number #h(0.75em, weak: true) #head.body #fill #it.page*]\n</code></pre>\n<p>as a test to work. But not:</p>\n<pre><code class=\"lang-auto\">link(page: it.page)[*#number #h(0.75em, weak: true) #head.body #fill #it.page*]\n// or something like\nlink((page: int(it.page), x: 0pt, y: 0pt))[*#number #h(0.75em, weak: true) #head.body #fill #it.page*]\n</code></pre>\n<p>Fails with “error: expected string, dictionary, location, or label, found content”. or “error: expected integer, boolean, float, decimal, or string, found content”</p>\n</blockquote>\n<p>This can be solved by using <code>head.location()</code>, please see below.</p>",
      "raw": "Update: Original post, no longer relevant:\n\n> Addendum: I also just realized the reconstructing the outline this way removed the link functionality within the document.\n> \n> Using\n> ```\n> repr(head)\n> ```\n> \n> I found no obvious clue to \"correctly\" link to the headline (such as a label?).\n> \n> I can get\n> \n> ```\n> link(\"https://forum.typst.app\")[*#number #h(0.75em, weak: true) #head.body #fill #it.page*]\n> ```\n> \n> as a test to work. But not:\n> \n> ```\n> link(page: it.page)[*#number #h(0.75em, weak: true) #head.body #fill #it.page*]\n> // or something like\n> link((page: int(it.page), x: 0pt, y: 0pt))[*#number #h(0.75em, weak: true) #head.body #fill #it.page*]\n> ```\n> \n> Fails with \"error: expected string, dictionary, location, or label, found content\". or \"error: expected integer, boolean, float, decimal, or string, found content\"\n\nThis can be solved by using `head.location()`, please see below.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 13.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 566
    },
    {
      "id": 5572,
      "post_number": 19,
      "username": "a_w",
      "name": "Alex",
      "created_at": "2024-11-13T07:57:13.371Z",
      "updated_at": "2024-11-13T10:30:14.090Z",
      "cooked": "<p>This is what I came up with to get the links in the outline back:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; {\n  if it.element.func() == heading {\n    // don't interfere with figure outlines (optional if you don't have one)\n    let head = it.element // just to make our code shorter\n    let number = if head.numbering != none {\n      numbering(head.numbering, ..counter(heading).at(head.location()))\n    }\n    let fill = box(\n      width: 1fr,\n      it.fill,\n    ) // ensure the fill doesn't occupy the full page width, just the available space (1fr)\n    let toc-entry = box(\n      //stroke: 1pt + red, //used for debugging\n      link(head.location(), box(number + h(0.75em, weak: true) + head.body + fill + it.page)),\n    )\n    if head.level == 1 {\n      strong(toc-entry)\n    } else {\n      toc-entry\n    }\n    v(-0.4em, weak: true)\n  } else {\n    it // use default style for figure outlines\n  }\n}\n\n#outline(indent: 1.65em)\n#pagebreak()\n\n#set page(numbering: \"1\")\n#counter(page).update(1)\n\n#set heading(numbering: \"1.1 \")\n\n= First Headline 1\n== First Headline 2\n== Second Headline 2\n#lorem(800)\n= Second Headline 1\n= Third Headline 1\n#heading(numbering: none)[Literature]\n</code></pre>\n<details>\n<summary>\nResult</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/f84bb62e9d0ea8fa9781a34244ab772538e72385.png\" data-download-href=\"https://forum.typst.app/uploads/default/f84bb62e9d0ea8fa9781a34244ab772538e72385\" title=\"outline-line-breaks\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/f84bb62e9d0ea8fa9781a34244ab772538e72385_2_536x500.png\" alt=\"outline-line-breaks\" data-base62-sha1=\"zqwCH9Pr7JvMrDdTR9kqCiZzqBL\" width=\"536\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/f84bb62e9d0ea8fa9781a34244ab772538e72385_2_536x500.png, https://forum.typst.app/uploads/default/original/2X/f/f84bb62e9d0ea8fa9781a34244ab772538e72385.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/f84bb62e9d0ea8fa9781a34244ab772538e72385.png 2x\" data-dominant-color=\"F2F1F1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">outline-line-breaks</span><span class=\"informations\">790×736 97.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>What I couldn’t solve:</p>\n<ul>\n<li>\n<p>If you need indents for everything below level 1 you get line breaks, messing up the spacing, because the indent “overfills” due to the <code>1fr</code> fill. <s>I guess it would be possible to leave the indent and add a own spacing instead, substracting this spacing from the <code>1fr</code>, but then the code would bloat even further and another if/loop for subsequent levels would be necessary.</s> Update: I tried that but subsctracting from fractions is not possible or at least would involve further measuring steps. Maybe there is a compact/elegant solution I’m just not seeing? I also tried <code>pad()</code> for the indents, but that leads to the same problem, just that the line breaks is below instead of above.</p>\n</li>\n<li>\n<p>The spacing needs the weird <code>v(-0.4em, weak: true)</code>, which I suppose should not be necessary if done right – I think my code introduces some space where it should not?</p>\n</li>\n</ul>\n<p>Here is an <a href=\"https://typst.app/project/wXVIchVRKhV-yDcwJ44euj\">editable link</a> to see the example.</p>\n<p>Would be really great if someone more experienced could take a look. <img src=\"https://forum.typst.app/images/emoji/apple/pray.png?v=12\" title=\":pray:\" class=\"emoji\" alt=\":pray:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "This is what I came up with to get the links in the outline back:\n\n```typ\n#show outline.entry: it => {\n  if it.element.func() == heading {\n    // don't interfere with figure outlines (optional if you don't have one)\n    let head = it.element // just to make our code shorter\n    let number = if head.numbering != none {\n      numbering(head.numbering, ..counter(heading).at(head.location()))\n    }\n    let fill = box(\n      width: 1fr,\n      it.fill,\n    ) // ensure the fill doesn't occupy the full page width, just the available space (1fr)\n    let toc-entry = box(\n      //stroke: 1pt + red, //used for debugging\n      link(head.location(), box(number + h(0.75em, weak: true) + head.body + fill + it.page)),\n    )\n    if head.level == 1 {\n      strong(toc-entry)\n    } else {\n      toc-entry\n    }\n    v(-0.4em, weak: true)\n  } else {\n    it // use default style for figure outlines\n  }\n}\n\n#outline(indent: 1.65em)\n#pagebreak()\n\n#set page(numbering: \"1\")\n#counter(page).update(1)\n\n#set heading(numbering: \"1.1 \")\n\n= First Headline 1\n== First Headline 2\n== Second Headline 2\n#lorem(800)\n= Second Headline 1\n= Third Headline 1\n#heading(numbering: none)[Literature]\n```\n\n[details=\"Result\"]\n![outline-line-breaks|536x500](upload://zqwCH9Pr7JvMrDdTR9kqCiZzqBL.png)\n[/details]\n\nWhat I couldn't solve:\n\n- If you need indents for everything below level 1 you get line breaks, messing up the spacing, because the indent \"overfills\" due to the `1fr` fill. ~~I guess it would be possible to leave the indent and add a own spacing instead, substracting this spacing from the `1fr`, but then the code would bloat even further and another if/loop for subsequent levels would be necessary.~~ Update: I tried that but subsctracting from fractions is not possible or at least would involve further measuring steps. Maybe there is a compact/elegant solution I'm just not seeing? I also tried `pad()` for the indents, but that leads to the same problem, just that the line breaks is below instead of above.\n\n- The spacing needs the weird `v(-0.4em, weak: true)`, which I suppose should not be necessary if done right – I think my code introduces some space where it should not?\n\nHere is an [editable link](https://typst.app/project/wXVIchVRKhV-yDcwJ44euj) to see the example.\n\nWould be really great if someone more experienced could take a look. 🙏",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 402.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 566
    },
    {
      "id": 5677,
      "post_number": 20,
      "username": "Xodarap",
      "name": "Xodarap",
      "created_at": "2024-11-15T17:11:11.554Z",
      "updated_at": "2024-11-15T17:21:17.077Z",
      "cooked": "<p>Hey what do you say about this solution?</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">// style outline: chapters as bold and without dots\n#show outline.entry: entry =&gt; {\n  if entry.element.func() == heading {\n    // because we modify entries by replacing them with new ones, we need to recognize them to avoid endless recursion\n    if entry.at(\"label\", default: none) == &lt;modified-outline-entry&gt; {\n      entry\n    } else {\n      // we destructure entry, change fields and then reassemble the entry\n      let fields = entry.fields()\n      let he = fields.element\n      let number = if he.numbering != none {\n        numbering(he.numbering, ..counter(heading).at(he.location()))\n      }\n      let prefix = if number != none [ #number #h(3em) ]\n      fields.body = [ #prefix #he.body ]\n      let newe = outline.entry(..fields.values())\n      [ #newe &lt;modified-outline-entry&gt; ]\n    }\n  } else {\n    entry\n  }\n}\n</code></pre>\n<p>Here the entry-object gets deconstructed into a dictionary. Then the crucial field (body) is replaced with a new one. And at the end a new entry object is constructed and returned. Because it’s a new entry object the show rule is called again. But this time the entry object has a specific label attached to it. This way we skip the destruct-modify-construct case this time.</p>\n<p>It looks like this:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/8/85d44500a2f0bba708dbedb93f6c31caef1a0b84.png\" alt=\"image\" data-base62-sha1=\"j5UhUMa0T90xRcqkNNsxpGZ2ksI\" width=\"544\" height=\"311\"><br>\nNote that your <code>indent: 1.65em</code> as outline parameter now also takes effect. I guess it didn’t in your solution because you built an entry dummy entirely from scratch.</p>",
      "raw": "Hey what do you say about this solution?\n\n```typst\n// style outline: chapters as bold and without dots\n#show outline.entry: entry => {\n  if entry.element.func() == heading {\n    // because we modify entries by replacing them with new ones, we need to recognize them to avoid endless recursion\n    if entry.at(\"label\", default: none) == <modified-outline-entry> {\n      entry\n    } else {\n      // we destructure entry, change fields and then reassemble the entry\n      let fields = entry.fields()\n      let he = fields.element\n      let number = if he.numbering != none {\n        numbering(he.numbering, ..counter(heading).at(he.location()))\n      }\n      let prefix = if number != none [ #number #h(3em) ]\n      fields.body = [ #prefix #he.body ]\n      let newe = outline.entry(..fields.values())\n      [ #newe <modified-outline-entry> ]\n    }\n  } else {\n    entry\n  }\n}\n```\n\nHere the entry-object gets deconstructed into a dictionary. Then the crucial field (body) is replaced with a new one. And at the end a new entry object is constructed and returned. Because it's a new entry object the show rule is called again. But this time the entry object has a specific label attached to it. This way we skip the destruct-modify-construct case this time.\n\nIt looks like this:\n![image|544x311](upload://j5UhUMa0T90xRcqkNNsxpGZ2ksI.png)\nNote that your `indent: 1.65em` as outline parameter now also takes effect. I guess it didn't in your solution because you built an entry dummy entirely from scratch.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 71.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 797
    },
    {
      "id": 5697,
      "post_number": 21,
      "username": "a_w",
      "name": "Alex",
      "created_at": "2024-11-16T10:26:47.163Z",
      "updated_at": "2024-11-16T10:26:47.163Z",
      "cooked": "<p>I say it is great <img src=\"https://forum.typst.app/images/emoji/apple/face_holding_back_tears.png?v=12\" title=\":face_holding_back_tears:\" class=\"emoji\" alt=\":face_holding_back_tears:\" loading=\"lazy\" width=\"20\" height=\"20\"> your approach is way more elegant as it doesn’t make it necessary to reassemble the links. Thank you very much!</p>\n<p>Maybe you had another version of your code that made the first level bold, because in the pasted example, that doesn’t seem to be the case?</p>\n<p>So this is what I ended up with:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// style outline\n#show outline.entry: entry =&gt; {\n  if entry.element.func() == heading {\n    // because we modify entries by replacing them with new ones, we need to recognize them to avoid endless recursion\n    if entry.at(\"label\", default: none) == &lt;modified-outline-entry&gt; {\n      entry\n    } else {\n      // we destructure entry, change fields and then reassemble the entry\n      let fields = entry.fields()\n      let he = fields.element\n      let number = if he.numbering != none {\n        numbering(he.numbering, ..counter(heading).at(he.location()))\n      }\n      let prefix = if number != none [ #number #h(0.8em) ]\n      fields.body = [ #prefix #he.body ]\n      let newe = outline.entry(..fields.values())\n      if entry.level == 1 {\n        [ *#newe &lt;modified-outline-entry&gt;* ]  \n      }\n      else if entry.level == 3 {\n        [ #h(0.6em) #newe &lt;modified-outline-entry&gt; ]\n      }\n      else {\n        [ #newe &lt;modified-outline-entry&gt; ]  \n      }\n      v(-0.4em, weak: true)\n    }\n  } else {\n    entry\n  }\n}\n</code></pre>\n<p>Basically just adding/changing this part:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">      if entry.level == 1 {\n        [ *#newe &lt;modified-outline-entry&gt;* ]  \n      }\n      else if entry.level == 3 {\n        [ #h(0.6em) #newe &lt;modified-outline-entry&gt; ]\n      }\n      else {\n        [ #newe &lt;modified-outline-entry&gt; ]  \n      }\n      v(-0.4em, weak: true)\n</code></pre>\n<p>To:</p>\n<ul>\n<li>Make level 1 bold</li>\n<li>Correct the level 3 indent (this wasn’t in the original question/case it come up once I added a level 3 headline in my paper <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">)</li>\n<li>Add vertical spacing (still in the weird negative way, but hey… it works)</li>\n</ul>\n<p>Overall this feels like a lot of hassle to style outlines currently, especially since even the outrageous package suffers from some of the problems (especially the unwanted line break if a space is added between prefix-number and body).</p>\n<p>But I think your solution is as good as currently possibly. So everybody landing here, please give issues like the on of PgBiel <a href=\"https://github.com/typst/typst/issues/1424\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Add outline spacing/gutter · Issue #1424 · typst/typst · GitHub</a> some thumbs up <img src=\"https://forum.typst.app/images/emoji/apple/up.png?v=12\" title=\":up:\" class=\"emoji\" alt=\":up:\" loading=\"lazy\" width=\"20\" height=\"20\"><img src=\"https://forum.typst.app/images/emoji/apple/smiling_face.png?v=12\" title=\":smiling_face:\" class=\"emoji\" alt=\":smiling_face:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>The result:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/9/9cfc4842213a41fc889a9937aa41bd762536e1ea.png\" data-download-href=\"https://forum.typst.app/uploads/default/9cfc4842213a41fc889a9937aa41bd762536e1ea\" title=\"outline-result\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/9/9cfc4842213a41fc889a9937aa41bd762536e1ea_2_690x238.png\" alt=\"outline-result\" data-base62-sha1=\"moKZQUTyZvOZAoBRbZmzAjAyARQ\" width=\"690\" height=\"238\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/9/9cfc4842213a41fc889a9937aa41bd762536e1ea_2_690x238.png, https://forum.typst.app/uploads/default/optimized/2X/9/9cfc4842213a41fc889a9937aa41bd762536e1ea_2_1035x357.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/9/9cfc4842213a41fc889a9937aa41bd762536e1ea_2_1380x476.png 2x\" data-dominant-color=\"F6F6F6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">outline-result</span><span class=\"informations\">1506×520 97.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "I say it is great 🥹 your approach is way more elegant as it doesn't make it necessary to reassemble the links. Thank you very much!\n\nMaybe you had another version of your code that made the first level bold, because in the pasted example, that doesn't seem to be the case?\n\nSo this is what I ended up with:\n\n```typ\n// style outline\n#show outline.entry: entry => {\n  if entry.element.func() == heading {\n    // because we modify entries by replacing them with new ones, we need to recognize them to avoid endless recursion\n    if entry.at(\"label\", default: none) == <modified-outline-entry> {\n      entry\n    } else {\n      // we destructure entry, change fields and then reassemble the entry\n      let fields = entry.fields()\n      let he = fields.element\n      let number = if he.numbering != none {\n        numbering(he.numbering, ..counter(heading).at(he.location()))\n      }\n      let prefix = if number != none [ #number #h(0.8em) ]\n      fields.body = [ #prefix #he.body ]\n      let newe = outline.entry(..fields.values())\n      if entry.level == 1 {\n        [ *#newe <modified-outline-entry>* ]  \n      }\n      else if entry.level == 3 {\n        [ #h(0.6em) #newe <modified-outline-entry> ]\n      }\n      else {\n        [ #newe <modified-outline-entry> ]  \n      }\n      v(-0.4em, weak: true)\n    }\n  } else {\n    entry\n  }\n}\n```\n\nBasically just adding/changing this part:\n\n```typ\n      if entry.level == 1 {\n        [ *#newe <modified-outline-entry>* ]  \n      }\n      else if entry.level == 3 {\n        [ #h(0.6em) #newe <modified-outline-entry> ]\n      }\n      else {\n        [ #newe <modified-outline-entry> ]  \n      }\n      v(-0.4em, weak: true)\n```\n\nTo:\n- Make level 1 bold\n- Correct the level 3 indent (this wasn't in the original question/case it come up once I added a level 3 headline in my paper 😅)\n- Add vertical spacing (still in the weird negative way, but hey… it works)\n\nOverall this feels like a lot of hassle to style outlines currently, especially since even the outrageous package suffers from some of the problems (especially the unwanted line break if a space is added between prefix-number and body).\n\nBut I think your solution is as good as currently possibly. So everybody landing here, please give issues like the on of PgBiel https://github.com/typst/typst/issues/1424 some thumbs up 🆙☺️\n\nThe result:\n![outline-result|690x238](upload://moKZQUTyZvOZAoBRbZmzAjAyARQ.png)",
      "reply_to_post_number": 20,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 21.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 566
    },
    {
      "id": 5703,
      "post_number": 22,
      "username": "Xodarap",
      "name": "Xodarap",
      "created_at": "2024-11-16T18:28:18.069Z",
      "updated_at": "2024-11-16T18:28:18.069Z",
      "cooked": "<p>Some further thoughts on your last code snippet:</p>\n<p>A)<br>\nI prefer to change the weight or add a strong function. This makes it more obvious what is different in the two cases:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#{\n      let w = if entry.level == 1 { \"bold\" } else { \"regular\" }\n      text(weight: w)[ #newe &lt;modified-outline-entry&gt; ] \n}\n</code></pre>\n<p>But this is probably really just preference.</p>\n<p>B)<br>\nI saw that you added another case for <code>level == 3</code> with even more indent. Maybe you should then use a separate function to control the indent:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let indent_func = i =&gt; {\n  (0em, 1.5em, 3.6em).at(i)\n}\n#outline(indent: indent_func)\n</code></pre>\n<p>This again separates the different logical units.</p>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/8/8178dad43d846fa6fe4ba8eed739f073f8a557ad.png\" data-download-href=\"https://forum.typst.app/uploads/default/8178dad43d846fa6fe4ba8eed739f073f8a557ad\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/8/8178dad43d846fa6fe4ba8eed739f073f8a557ad_2_690x304.png\" alt=\"image\" data-base62-sha1=\"itmwtTdJQwa6d9tB7OEIYEvDcEl\" width=\"690\" height=\"304\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/8/8178dad43d846fa6fe4ba8eed739f073f8a557ad_2_690x304.png, https://forum.typst.app/uploads/default/original/2X/8/8178dad43d846fa6fe4ba8eed739f073f8a557ad.png 1.5x, https://forum.typst.app/uploads/default/original/2X/8/8178dad43d846fa6fe4ba8eed739f073f8a557ad.png 2x\" data-dominant-color=\"F5F5F5\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">978×431 79.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>",
      "raw": "Some further thoughts on your last code snippet:\n\nA)\nI prefer to change the weight or add a strong function. This makes it more obvious what is different in the two cases:\n```typst\n#{\n      let w = if entry.level == 1 { \"bold\" } else { \"regular\" }\n      text(weight: w)[ #newe <modified-outline-entry> ] \n}\n```\nBut this is probably really just preference.\n\nB)\nI saw that you added another case for `level == 3` with even more indent. Maybe you should then use a separate function to control the indent:\n```typst\n#let indent_func = i => {\n  (0em, 1.5em, 3.6em).at(i)\n}\n#outline(indent: indent_func)\n```\nThis again separates the different logical units.\n\n[details=\"Output\"]\n![image|690x304](upload://itmwtTdJQwa6d9tB7OEIYEvDcEl.png)\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 28,
      "score": 30.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 797
    },
    {
      "id": 5705,
      "post_number": 23,
      "username": "a_w",
      "name": "Alex",
      "created_at": "2024-11-16T18:57:28.216Z",
      "updated_at": "2024-11-16T18:57:28.216Z",
      "cooked": "<p>Wow, thanks again, great additions.</p>\n<blockquote>\n<p>But this is probably really just preference.</p>\n</blockquote>\n<p>No, no, I actually asked about exactly that case above. So how it could be improved/reduced the repetitiveness. So perfect, learned something, I wondered a couple of times how others solve these cases.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let indent_func = i =&gt; {\n  (0em, 1.5em, 3.6em).at(i)\n}\n#outline(indent: indent_func)\n</code></pre>\n<p>Black magic. How does that even work <img src=\"https://forum.typst.app/images/emoji/apple/open_mouth.png?v=12\" title=\":open_mouth:\" class=\"emoji\" alt=\":open_mouth:\" loading=\"lazy\" width=\"20\" height=\"20\"> <code>i</code>… no loop, no count up, no nothing?</p>",
      "raw": "Wow, thanks again, great additions.\n\n> But this is probably really just preference.\n\nNo, no, I actually asked about exactly that case above. So how it could be improved/reduced the repetitiveness. So perfect, learned something, I wondered a couple of times how others solve these cases.\n\n```typ\n#let indent_func = i => {\n  (0em, 1.5em, 3.6em).at(i)\n}\n#outline(indent: indent_func)\n```\n\nBlack magic. How does that even work 😮 `i`… no loop, no count up, no nothing?",
      "reply_to_post_number": 22,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 566
    },
    {
      "id": 5706,
      "post_number": 24,
      "username": "Xodarap",
      "name": "Xodarap",
      "created_at": "2024-11-16T19:22:09.542Z",
      "updated_at": "2024-11-16T19:26:58.788Z",
      "cooked": "<p>(Now our discussion is not about the original topic anymore xD)</p>\n<p>My intuition told me that the devs probably added the option to provide a function for the outline indent … and indeed they did: <a href=\"https://typst.app/docs/reference/model/outline/#parameters-indent\" class=\"inline-onebox\">Outline Function – Typst Documentation</a></p>\n<p>I think the part in the documentation about the function is very well written. You can provide a function that takes one number as argument and returns a relative length or even content. (I think the documentation is mostly very worth to read and often provides answers. If you are used to this.)</p>\n<p>So i defined the function <code>indent_func</code>. In it I create an array with 3 elements and return the element at position <code>i</code>, which is the level of the entry.</p>\n<p>All three following code snippets should be equivalent to the above:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let arr = (0em, 1.5em, 3.6em)\n#let func(i) = arr.at(i)\n#outline(indent: func)\n</code></pre>\n<p>and</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#outline(indent: i =&gt; (0em, 1.5em, 3.6em).at(i))\n</code></pre>\n<p>I like this the most:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let indent_func(i) = (0em, 1.5em, 3.6em).at(i)\n#outline(indent: indent_func)\n</code></pre>\n<p>(That being said: my original function is somewhat ugly as it states an anonymous function which is then given an explicit name.)</p>\n<p>If you are not familiar with the concepts used here, you might want to read about:</p>\n<ul>\n<li>arrays: <a href=\"https://typst.app/docs/reference/foundations/array/\">array (docs)</a></li>\n<li>functions: <a href=\"https://typst.app/docs/reference/foundations/function/#unnamed\">unnamed functions (docs)</a></li>\n</ul>",
      "raw": "(Now our discussion is not about the original topic anymore xD)\n\nMy intuition told me that the devs probably added the option to provide a function for the outline indent ... and indeed they did: https://typst.app/docs/reference/model/outline/#parameters-indent\n\nI think the part in the documentation about the function is very well written. You can provide a function that takes one number as argument and returns a relative length or even content. (I think the documentation is mostly very worth to read and often provides answers. If you are used to this.)\n\nSo i defined the function `indent_func`. In it I create an array with 3 elements and return the element at position `i`, which is the level of the entry.\n\nAll three following code snippets should be equivalent to the above:\n```typst\n#let arr = (0em, 1.5em, 3.6em)\n#let func(i) = arr.at(i)\n#outline(indent: func)\n```\nand\n```typst\n#outline(indent: i => (0em, 1.5em, 3.6em).at(i))\n```\n\nI like this the most:\n```typst\n#let indent_func(i) = (0em, 1.5em, 3.6em).at(i)\n#outline(indent: indent_func)\n```\n\n(That being said: my original function is somewhat ugly as it states an anonymous function which is then given an explicit name.)\n\nIf you are not familiar with the concepts used here, you might want to read about:\n- arrays: [array (docs)](https://typst.app/docs/reference/foundations/array/)\n- functions: [unnamed functions (docs)](https://typst.app/docs/reference/foundations/function/#unnamed)",
      "reply_to_post_number": 23,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 31.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 797
    },
    {
      "id": 5707,
      "post_number": 25,
      "username": "a_w",
      "name": "Alex",
      "created_at": "2024-11-16T19:38:05.365Z",
      "updated_at": "2024-11-16T19:38:05.365Z",
      "cooked": "<blockquote>\n<p>(Now our discussion is not about the original topic anymore xD)</p>\n</blockquote>\n<p>Well, it explains how the solution works <img src=\"https://forum.typst.app/images/emoji/apple/blush.png?v=12\" title=\":blush:\" class=\"emoji\" alt=\":blush:\" loading=\"lazy\" width=\"20\" height=\"20\"> thanks for taking the time to explain!</p>\n<p>And for anyone landing here because you want the number of your outline indented/add space before the numbering, make the level 1 headings bold and horizontally align the levels in the outline. Here is the refactored code you can copy and paste:</p>\n<p>(Adjust em-values as needed)</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: entry =&gt; {\n  if entry.element.func() == heading {\n    // because we modify entries by replacing them with new ones, we need to recognize them to avoid endless recursion\n    if entry.at(\"label\", default: none) == &lt;modified-outline-entry&gt; {\n      entry\n    } else {\n      // we destructure entry, change fields and then reassemble the entry\n      let fields = entry.fields()\n      let he = fields.element\n      let number = if he.numbering != none {\n        numbering(he.numbering, ..counter(heading).at(he.location()))\n      }\n      let prefix = if number != none [ #number #h(0.5em) ]\n      fields.body = [ #prefix #he.body ]\n      let newe = outline.entry(..fields.values())\n      let w = if entry.level == 1 {\n        \"bold\"\n      } else {\n        \"regular\"\n      }\n      text(weight: w)[ #newe &lt;modified-outline-entry&gt; ]\n      v(-0.4em, weak: true)\n    }\n  } else {\n    entry\n  }\n}\n\n#let indent_level(i) = (0em, 1.575em, 4em).at(i)\n#outline(indent: indent_level)\n</code></pre>\n<p>PS: <a class=\"mention\" href=\"/u/pgbiel\">@PgBiel</a> since this topic evolved from numbering and adjusting the spacing of headlines to also control said spacing in the outline, but provides solutions for both now, maybe it would make sense to rename the topic to reflect that? <img src=\"https://forum.typst.app/images/emoji/apple/smiling_face.png?v=12\" title=\":smiling_face:\" class=\"emoji\" alt=\":smiling_face:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "> (Now our discussion is not about the original topic anymore xD)\n\nWell, it explains how the solution works 😊 thanks for taking the time to explain!\n\nAnd for anyone landing here because you want the number of your outline indented/add space before the numbering, make the level 1 headings bold and horizontally align the levels in the outline. Here is the refactored code you can copy and paste:\n\n(Adjust em-values as needed) \n\n```typ\n#show outline.entry: entry => {\n  if entry.element.func() == heading {\n    // because we modify entries by replacing them with new ones, we need to recognize them to avoid endless recursion\n    if entry.at(\"label\", default: none) == <modified-outline-entry> {\n      entry\n    } else {\n      // we destructure entry, change fields and then reassemble the entry\n      let fields = entry.fields()\n      let he = fields.element\n      let number = if he.numbering != none {\n        numbering(he.numbering, ..counter(heading).at(he.location()))\n      }\n      let prefix = if number != none [ #number #h(0.5em) ]\n      fields.body = [ #prefix #he.body ]\n      let newe = outline.entry(..fields.values())\n      let w = if entry.level == 1 {\n        \"bold\"\n      } else {\n        \"regular\"\n      }\n      text(weight: w)[ #newe <modified-outline-entry> ]\n      v(-0.4em, weak: true)\n    }\n  } else {\n    entry\n  }\n}\n\n#let indent_level(i) = (0em, 1.575em, 4em).at(i)\n#outline(indent: indent_level)\n```\n\nPS: @PgBiel since this topic evolved from numbering and adjusting the spacing of headlines to also control said spacing in the outline, but provides solutions for both now, maybe it would make sense to rename the topic to reflect that? ☺️",
      "reply_to_post_number": 24,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 6.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 566
    }
  ],
  "scraped_at": "2025-06-10T09:58:11.995166"
}
{
  "topic_metadata": {
    "id": 641,
    "title": "How to customize the style of equation numbering?",
    "slug": "how-to-customize-the-style-of-equation-numbering",
    "posts_count": 6,
    "created_at": "2024-09-24T15:51:08.665Z",
    "last_posted_at": "2024-10-06T21:17:27.727Z",
    "views": 638,
    "like_count": 4,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting",
      "math",
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 743
  },
  "posts": [
    {
      "id": 2470,
      "post_number": 1,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-24T15:51:08.868Z",
      "updated_at": "2024-10-10T15:42:00.825Z",
      "cooked": "<p>Hi,</p>\n<p>For figures I use the following method:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let SIZE_SMALL = 9pt\n#show figure.caption: it =&gt; text(\n  size: SIZE_SMALL, \n  [*#it.supplement #it.counter.display(it.numbering):* #it.body]\n)\n</code></pre>\n<p>Is there a similar method to achieve bold equation numbering?</p>\n<p>Thanks in advance!</p>\n<p><br>\nEDIT:<br>\nIf you are using the <a href=\"https://typst.app/universe/package/i-figured/#:~:text=Show%20a%20figure%20with%20per-section\">i-figured</a> module: <a href=\"https://forum.typst.app/t/how-to-customize-the-style-of-equation-numbering/641/3\">see here</a></p>",
      "raw": "Hi, \n\nFor figures I use the following method:\n```typ \n#let SIZE_SMALL = 9pt\n#show figure.caption: it => text(\n  size: SIZE_SMALL, \n  [*#it.supplement #it.counter.display(it.numbering):* #it.body]\n)\n``` \n\nIs there a similar method to achieve bold equation numbering?\n\nThanks in advance!\n\n\\\nEDIT:\nIf you are using the [i-figured](https://typst.app/universe/package/i-figured/#:~:text=Show%20a%20figure%20with%20per-section) module: [see here](https://forum.typst.app/t/how-to-customize-the-style-of-equation-numbering/641/3?u=jacobdabozze)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 76,
      "score": 2410.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2476,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T16:13:53.743Z",
      "updated_at": "2024-10-05T20:45:52.340Z",
      "cooked": "<p>For <code>figure.caption</code> you’ve missed the <code>it.separator</code> which is equal to <code>:</code> by default.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let JF_FS_SMALL = 14pt\n#set page(paper: \"a6\")\n#let your-default-font = \"Linux Libertine\"\n#set text(font: your-default-font)\n\n#show figure.caption: it =&gt; context text(\n  size: JF_FS_SMALL,\n  [*#it.supplement #it.counter.display(it.numbering)#it.separator* #it.body],\n)\n\n// #set math.equation(numbering: \"(1)\") // not bold\n#set math.equation(numbering: (..n) =&gt; {\n  strong(text(font: your-default-font, numbering(\"(1)\", ..n)))\n})\n\n#figure(caption: [caption], rect())\n$ y = 2x $\n</code></pre>\n<div align=\"center\">\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/cefb0751284c5817ce8dd7221d718289a67a8a3a.png\" alt=\"image\" data-base62-sha1=\"tx2btN18HMaLu7gHnTw1IOt0lbI\" width=\"578\" height=\"224\"></p>\n</div>\n<p>The problem with equation is that it uses the default math font (which I didn’t really think/know about before), therefore <code>strong()</code> has no effect on it. To fix this, you have to use some other typeface that has a bold font.</p>\n<p>Note that using a custom numbering function has a side effect that is described here: <a href=\"https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/2\" class=\"inline-onebox\">How to increase the spacing between the number and the title of a heading? - #2 by Andrew</a>.</p>\n<hr>\n<h3><a name=\"p-2476-typst-012-update-1\" class=\"anchor\" href=\"#p-2476-typst-012-update-1\"></a>Typst 0.12 update</h3>\n<p><a href=\"https://github.com/typst/typst/pull/5126#issuecomment-2395118793\" rel=\"noopener nofollow ugc\">With Typst v0.12.0</a> you can use the built-in bold math font like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set math.equation(numbering: (..n) =&gt; strong(numbering(\"(1)\", ..n)))\n$ y = 2x $\n</code></pre>\n<p>This means that the <code>your-default-font</code> stuff can be removed.</p>",
      "raw": "For `figure.caption` you've missed the `it.separator` which is equal to `:` by default.\n\n```typ\n#let JF_FS_SMALL = 14pt\n#set page(paper: \"a6\")\n#let your-default-font = \"Linux Libertine\"\n#set text(font: your-default-font)\n\n#show figure.caption: it => context text(\n  size: JF_FS_SMALL,\n  [*#it.supplement #it.counter.display(it.numbering)#it.separator* #it.body],\n)\n\n// #set math.equation(numbering: \"(1)\") // not bold\n#set math.equation(numbering: (..n) => {\n  strong(text(font: your-default-font, numbering(\"(1)\", ..n)))\n})\n\n#figure(caption: [caption], rect())\n$ y = 2x $\n```\n\n<div align=center>\n\n![image|578x224](upload://tx2btN18HMaLu7gHnTw1IOt0lbI.png)\n</div>\n\nThe problem with equation is that it uses the default math font (which I didn't really think/know about before), therefore `strong()` has no effect on it. To fix this, you have to use some other typeface that has a bold font.\n\nNote that using a custom numbering function has a side effect that is described here: https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/2.\n\n---\n\n### Typst 0.12 update\n\n[With Typst v0.12.0](https://github.com/typst/typst/pull/5126#issuecomment-2395118793) you can use the built-in bold math font like this:\n\n```typ\n#set math.equation(numbering: (..n) => strong(numbering(\"(1)\", ..n)))\n$ y = 2x $\n```\n\nThis means that the `your-default-font` stuff can be removed.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 76,
      "score": 110.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2556,
      "post_number": 3,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-25T11:11:03.929Z",
      "updated_at": "2024-09-25T11:26:01.683Z",
      "cooked": "<p>Clever! This is a great solution.</p>\n<p>I’d like to add an example of how I used this with the <a href=\"https://typst.app/universe/package/i-figured/#:~:text=Show%20a%20figure%20with%20per-section\">i-figured</a> module:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/i-figured:0.2.4\"\n\n#set page(paper: \"a7\")\n#set heading(numbering: \"1\")\n\n#let custom-font = \"Buenard\"\n#set text(font: custom-font)\n\n#show heading: i-figured.reset-counters\n#show math.equation: it =&gt; i-figured.show-equation(\n  it, \n  numbering: (..n) =&gt; text(\n    font: custom-font,\n    strong(numbering(\"(1.1)\", ..n))\n  )\n)\n\n= Heading One \n$ y = x^2 + 1 $\n$ y = x^2 + 2 $\n\n= Heading Two\n*#lorem(5)*\n$ y = x^2 + 3 $\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/040ac86886634cf0adbb70e0a508ccba48b6d159.png\" alt=\"image\" data-base62-sha1=\"zL0KcOX4AIWCX69JHuzTi3sKSZ\" width=\"262\" height=\"378\"></p>",
      "raw": "Clever! This is a great solution.\n\nI'd like to add an example of how I used this with the [i-figured](https://typst.app/universe/package/i-figured/#:~:text=Show%20a%20figure%20with%20per-section) module:\n\n```typ\n#import \"@preview/i-figured:0.2.4\"\n\n#set page(paper: \"a7\")\n#set heading(numbering: \"1\")\n\n#let custom-font = \"Buenard\"\n#set text(font: custom-font)\n\n#show heading: i-figured.reset-counters\n#show math.equation: it => i-figured.show-equation(\n  it, \n  numbering: (..n) => text(\n    font: custom-font,\n    strong(numbering(\"(1.1)\", ..n))\n  )\n)\n\n= Heading One \n$ y = x^2 + 1 $\n$ y = x^2 + 2 $\n\n= Heading Two\n*#lorem(5)*\n$ y = x^2 + 3 $\n```\n\n![image|262x378](upload://zL0KcOX4AIWCX69JHuzTi3sKSZ.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 63,
      "score": 72.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2573,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-25T13:25:05.273Z",
      "updated_at": "2024-09-25T13:25:05.273Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Jacobdabozze\" data-post=\"3\" data-topic=\"641\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/j/E95420/48.png\" class=\"avatar\"> Jacobdabozze:</div>\n<blockquote>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation: it =&gt; i-figured.show-equation(\n  it, \n  numbering: (..n) =&gt; text(\n    font: custom-font,\n    strong(numbering(\"(1.1)\", ..n))\n  )\n)\n</code></pre>\n</blockquote>\n</aside>\n<p>This can be optimized like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation: i-figured.show-equation.with(\n  numbering: (..n) =&gt; text(\n    font: custom-font,\n    strong(numbering(\"(1.1)\", ..n))\n  )\n)\n</code></pre>\n<p>Because even though the <code>it</code> is the first positional argument, you still can use <code>.with()</code> with named arguments, which wouldn’t interfere with positional arguments. It won’t work if you set/pass positional arguments and first argument should be <code>it</code>. In other cases <code>.with()</code> nicely reduces code clutter.</p>",
      "raw": "[quote=\"Jacobdabozze, post:3, topic:641\"]\n```typ\n#show math.equation: it => i-figured.show-equation(\n  it, \n  numbering: (..n) => text(\n    font: custom-font,\n    strong(numbering(\"(1.1)\", ..n))\n  )\n)\n```\n[/quote]\n\nThis can be optimized like this:\n\n```typ\n#show math.equation: i-figured.show-equation.with(\n  numbering: (..n) => text(\n    font: custom-font,\n    strong(numbering(\"(1.1)\", ..n))\n  )\n)\n```\n\nBecause even though the `it` is the first positional argument, you still can use `.with()` with named arguments, which wouldn't interfere with positional arguments. It won't work if you set/pass positional arguments and first argument should be `it`. In other cases `.with()` nicely reduces code clutter.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 49,
      "score": 29.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3472,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-05T20:48:05.183Z",
      "updated_at": "2024-10-05T20:48:05.183Z",
      "cooked": "<p>I expanded the post with a new solution for Typst 0.12. I also added the now missing <code>context</code> from the <code>show figure.caption</code> rule because <code>counter.display</code> should be used inside a context.</p>",
      "raw": "I expanded the post with a new solution for Typst 0.12. I also added the now missing `context` from the `show figure.caption` rule because `counter.display` should be used inside a context.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 24.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3503,
      "post_number": 8,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-06T21:17:27.727Z",
      "updated_at": "2024-10-06T21:18:18.767Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"7\" data-topic=\"641\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>I expanded the post with a new solution for Typst 0.12. I also added the now missing <code>context</code> from the <code>show figure.caption</code> rule because <code>counter.display</code> should be used inside a context.</p>\n</blockquote>\n</aside>\n<p>Careful with <code>counter.display()</code> now. First of all, it’s probably enough to just move the <code>context</code> only before <code>counter.display()</code> but more importantly this now won’t work anymore with 0.12 <strong>and</strong> floating figures, see <a href=\"https://github.com/typst/typst/issues/4966\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Wrong counter value when accessed from inside floating figure · Issue #4966 · typst/typst · GitHub</a>.</p>\n<p>This is technically correct as, according to <a class=\"mention\" href=\"/u/laurmaedje\">@laurmaedje</a>, it was kind of more luck that it even worked at all and now it doesn’t anymore. The correct solution would be to pass the location of <code>figure.caption</code> to the counter with <code>.at()</code> but since <code>.location()</code> of <code>figure.caption()</code> returns <code>none</code>, the next best and (for now) correct way is to nest the <code>figure.caption()</code> show rule inside a <code>figure</code> show rule and use its location.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure: fig =&gt; {\n  show figure.caption: c =&gt; [\n    #let fig-num = numbering(fig.numbering, ..c.counter.at(fig.location()))\n    *#it.supplement #fig-num#it.separator* #it.body\n  ]\n  fig\n}\n</code></pre>",
      "raw": "[quote=\"Andrew, post:7, topic:641, full:true\"]\nI expanded the post with a new solution for Typst 0.12. I also added the now missing `context` from the `show figure.caption` rule because `counter.display` should be used inside a context.\n[/quote]\n\nCareful with `counter.display()` now. First of all, it's probably enough to just move the `context` only before `counter.display()` but more importantly this now won't work anymore with 0.12 **and** floating figures, see https://github.com/typst/typst/issues/4966.\n\nThis is technically correct as, according to @laurmaedje, it was kind of more luck that it even worked at all and now it doesn't anymore. The correct solution would be to pass the location of `figure.caption` to the counter with `.at()` but since `.location()` of `figure.caption()` returns `none`, the next best and (for now) correct way is to nest the `figure.caption()` show rule inside a `figure` show rule and use its location.\n\n```typ\n#show figure: fig => {\n  show figure.caption: c => [\n    #let fig-num = numbering(fig.numbering, ..c.counter.at(fig.location()))\n    *#it.supplement #fig-num#it.separator* #it.body\n  ]\n  fig\n}\n```",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 43,
      "score": 38.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    }
  ],
  "scraped_at": "2025-06-10T09:58:10.555111"
}
{
  "topic_metadata": {
    "id": 643,
    "title": "How do I add bibliography to a Touying presentation?",
    "slug": "how-do-i-add-bibliography-to-a-touying-presentation",
    "posts_count": 10,
    "created_at": "2024-09-24T16:08:14.675Z",
    "last_posted_at": "2025-04-19T03:33:38.092Z",
    "views": 633,
    "like_count": 4,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 9,
    "accepted_answer_username": "OrangeX4",
    "tags": [
      "literature",
      "touying"
    ],
    "category_id": 5,
    "participant_count": 6,
    "word_count": 628
  },
  "posts": [
    {
      "id": 2475,
      "post_number": 1,
      "username": "eduard",
      "name": "Eduard Antonovic Occhipinti",
      "created_at": "2024-09-24T16:08:15.080Z",
      "updated_at": "2025-02-05T15:15:30.287Z",
      "cooked": "<p>I’m trying to add bibliography as footnotes in touying, I added the <code>show</code> rule</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\"> #show: magic.bibliography-as-footnote.with(bibliography(\"refs.bib\"))\n</code></pre>\n<p>at the start of my document but that creates an empty page. I have a feeling I have to declare it in some way under the <code>preamble</code> like <code>codly</code>, can anybody show me the correct way to do it? Thanks</p>",
      "raw": "I'm trying to add bibliography as footnotes in touying, I added the `show` rule \n```typ\n #show: magic.bibliography-as-footnote.with(bibliography(\"refs.bib\"))\n```\nat the start of my document but that creates an empty page. I have a feeling I have to declare it in some way under the `preamble` like `codly`, can anybody show me the correct way to do it? Thanks",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 68,
      "score": 2848.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 464
    },
    {
      "id": 2490,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-09-24T18:35:42.520Z",
      "updated_at": "2024-09-24T18:44:11.893Z",
      "cooked": "<p>Not super familiar with touying but what could be happening is that you have not referenced anything from your bibliography yet. By default, <code>#bibliography()</code> will only display the references that were used in the document but you can include all of them with the <code>full</code>-parameter: <code>#bibliography(\"refs.bib\", full: true)</code>.</p>\n<p><strong>EDIT:</strong> After testing myself, it is true – you do have to cite anything for a footnote to appear but I also do not know how to remove the empty page.</p>",
      "raw": "Not super familiar with touying but what could be happening is that you have not referenced anything from your bibliography yet. By default, `#bibliography()` will only display the references that were used in the document but you can include all of them with the `full`-parameter: `#bibliography(\"refs.bib\", full: true)`.\n\n**EDIT:** After testing myself, it is true -- you do have to cite anything for a footnote to appear but I also do not know how to remove the empty page.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 66,
      "score": 28.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 2491,
      "post_number": 3,
      "username": "eduard",
      "name": "Eduard Antonovic Occhipinti",
      "created_at": "2024-09-24T19:01:21.418Z",
      "updated_at": "2024-09-24T19:01:21.418Z",
      "cooked": "<p>Yes, I wasn’t clear enough, I did cite some sources in the presentation and they appear alright, it’s just the starting blank page that I can’t get rid of</p>",
      "raw": "Yes, I wasn’t clear enough, I did cite some sources in the presentation and they appear alright, it’s just the starting blank page that I can’t get rid of",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 59,
      "score": 36.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 464
    },
    {
      "id": 2513,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-25T06:28:05.279Z",
      "updated_at": "2024-09-25T07:34:30.269Z",
      "cooked": "<p>I believe this to be a bug in the package. In order to make references available, they place and hide the bibliography, which results in the blank empty page.</p>\n<p><a class=\"mention\" href=\"/u/orangex4\">@OrangeX4</a> Would you be able to fix this upstream? I’ve identified the offending line as</p><aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/touying-typ/touying/blob/d3c83778068b81bfb81db5fe772bd72e0e3e1597/src/magic.typ#L119\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/touying-typ/touying/blob/d3c83778068b81bfb81db5fe772bd72e0e3e1597/src/magic.typ#L119\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/touying-typ/touying/blob/d3c83778068b81bfb81db5fe772bd72e0e3e1597/src/magic.typ#L119\" target=\"_blank\" rel=\"noopener nofollow ugc\">touying-typ/touying/blob/d3c83778068b81bfb81db5fe772bd72e0e3e1597/src/magic.typ#L119</a></h4>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-typ\">\n      <ol class=\"start lines\" start=\"109\" style=\"counter-reset: li-counter 108 ;\">\n          <li>    footnote(numbering: numbering, context bibliography-map.final().at(str(it.key)))</li>\n          <li>  }</li>\n          <li></li>\n          <li>  // Record the bibliography items.</li>\n          <li>  {</li>\n          <li>    show grid: it =&gt; {</li>\n          <li>      bibliography-state.update(</li>\n          <li>        range(it.children.len()).filter(i =&gt; calc.rem(i, 2) == 1).map(i =&gt; it.children.at(i).body),</li>\n          <li>      )</li>\n          <li>    }</li>\n          <li class=\"selected\">    place(hide(bibliography))</li>\n          <li>  }</li>\n          <li></li>\n          <li>  body</li>\n          <li>}</li>\n          <li></li>\n          <li>/// Display the bibliography.</li>\n          <li>///</li>\n          <li>/// You can avoid `multiple bibliographies are not yet supported` error by using this function.</li>\n          <li>///</li>\n          <li>/// Usage: `#magic.bibliography()`</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/touying:0.5.2\": *\n#import themes.simple: *\n\n#show: simple-theme.with(aspect-ratio: \"16-9\")\n#let bib = bibliography(\"bib.bib\")\n#show: magic.bibliography-as-footnote.with(bib)\n\n= Title\n\n== First Slide\n\nHello, Touying!\n\n#pause\n\nHello, Typst!\n\n= Bibliography\n#magic.bibliography()\n</code></pre>",
      "raw": "I believe this to be a bug in the package. In order to make references available, they place and hide the bibliography, which results in the blank empty page.\n\n@OrangeX4 Would you be able to fix this upstream? I've identified the offending line as \nhttps://github.com/touying-typ/touying/blob/d3c83778068b81bfb81db5fe772bd72e0e3e1597/src/magic.typ#L119\n\n```typ\n#import \"@preview/touying:0.5.2\": *\n#import themes.simple: *\n\n#show: simple-theme.with(aspect-ratio: \"16-9\")\n#let bib = bibliography(\"bib.bib\")\n#show: magic.bibliography-as-footnote.with(bib)\n\n= Title\n\n== First Slide\n\nHello, Touying!\n\n#pause\n\nHello, Typst!\n\n= Bibliography\n#magic.bibliography()\n```",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 57,
      "score": 46.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2517,
      "post_number": 5,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-09-25T07:08:26.698Z",
      "updated_at": "2024-09-25T07:08:26.698Z",
      "cooked": "<p><code>show bibliography: none</code> would probably do the job instead</p>",
      "raw": "`show bibliography: none` would probably do the job instead",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 50,
      "score": 34.8,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 2561,
      "post_number": 6,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-09-25T12:03:25.748Z",
      "updated_at": "2024-09-25T16:56:21.685Z",
      "cooked": "<p>Ah yea, that is definitely it. I did see the <code>place + hide</code> in the source code but figured it would work since the package authors are experienced so it is surprising that they missed the <code>#show &lt;xyz&gt;: none</code> idiom.</p>",
      "raw": "Ah yea, that is definitely it. I did see the `place + hide` in the source code but figured it would work since the package authors are experienced so it is surprising that they missed the `#show <xyz>: none` idiom.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 2576,
      "post_number": 7,
      "username": "OrangeX4",
      "name": "OrangeX4",
      "created_at": "2024-09-25T13:41:50.393Z",
      "updated_at": "2024-09-25T13:41:50.393Z",
      "cooked": "<p>Indeed, here I wrote a bug. But <code>#show bibliography: none</code> doesn’t solve the problem (since we need to record bibitems), and you should consider putting it after the heading of <strong>the first slide</strong> before the next version fixes. For example</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/touying:0.5.2\": *\n#import themes.simple: *\n\n#show: simple-theme.with(aspect-ratio: \"16-9\")\n\n= Title\n\n== First Slide\n\n#show: magic.bibliography-as-footnote.with(bibliography(\"refs.bib\"))\n\nHello, Touying!\n\nHello, Typst!\n\n= Bibliography\n\n#magic.bibliography()\n</code></pre>",
      "raw": "Indeed, here I wrote a bug. But `#show bibliography: none` doesn't solve the problem (since we need to record bibitems), and you should consider putting it after the heading of **the first slide** before the next version fixes. For example\n\n```typst\n#import \"@preview/touying:0.5.2\": *\n#import themes.simple: *\n\n#show: simple-theme.with(aspect-ratio: \"16-9\")\n\n= Title\n\n== First Slide\n\n#show: magic.bibliography-as-footnote.with(bibliography(\"refs.bib\"))\n\nHello, Touying!\n\nHello, Typst!\n\n= Bibliography\n\n#magic.bibliography()\n```",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 49.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 18
    },
    {
      "id": 2632,
      "post_number": 8,
      "username": "eduard",
      "name": "Eduard Antonovic Occhipinti",
      "created_at": "2024-09-26T08:49:35.913Z",
      "updated_at": "2024-09-26T08:50:06.555Z",
      "cooked": "<p>This doesn’t seem to work, the “bibliography” section appears in the outline twice, I have something like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/touying:0.5.2\": *\n#import themes.dewdrop: *\n#import \"@preview/codly:1.0.0\": *\n#import \"@preview/numbly:0.1.0\": numbly\n\n#show: codly-init.with()\n\n#show: dewdrop-theme.with(\n  aspect-ratio: \"16-9\",\n  footer: self =&gt; self.info.institution,\n  navigation: \"mini-slides\",\n  config-common(preamble: {\n    codly(\n      languages: (\n        python: (name: \"Python\",  color: rgb(\"#306998\")),\n      ),\n      zebra-fill: none,\n      number-align: right + horizon,\n    )\n  }),\n  config-info(\n    title: [Title],\n    subtitle: [subtitle],\n    author: [Name Surname],\n    date: datetime.today(),\n    institution: [University],\n  ),\n)\n\n#show raw.where(block: true): set text(size: 0.8em)\n\n#title-slide()\n\n#outline-slide()\n\n= Introduction\n\n#show: magic.bibliography-as-footnote.with(bibliography(\"refs.bib\"))\n\nbla bla bla\n\n= Second section\n\nbla bla\n\n== Subsection\n\nbla bla\n\n``py\nprint(\"Hello World!\")\n``\n\n= Third section\n\nbla bla @citation\n\n#magic.bibliography()\n</code></pre>\n<p>I’m including part of the <code>codly</code> code in case the bug is due to some interaction between the two packages</p>",
      "raw": "This doesn't seem to work, the \"bibliography\" section appears in the outline twice, I have something like\n\n```typ\n#import \"@preview/touying:0.5.2\": *\n#import themes.dewdrop: *\n#import \"@preview/codly:1.0.0\": *\n#import \"@preview/numbly:0.1.0\": numbly\n\n#show: codly-init.with()\n\n#show: dewdrop-theme.with(\n  aspect-ratio: \"16-9\",\n  footer: self => self.info.institution,\n  navigation: \"mini-slides\",\n  config-common(preamble: {\n    codly(\n      languages: (\n        python: (name: \"Python\",  color: rgb(\"#306998\")),\n      ),\n      zebra-fill: none,\n      number-align: right + horizon,\n    )\n  }),\n  config-info(\n    title: [Title],\n    subtitle: [subtitle],\n    author: [Name Surname],\n    date: datetime.today(),\n    institution: [University],\n  ),\n)\n\n#show raw.where(block: true): set text(size: 0.8em)\n\n#title-slide()\n\n#outline-slide()\n\n= Introduction\n\n#show: magic.bibliography-as-footnote.with(bibliography(\"refs.bib\"))\n\nbla bla bla\n\n= Second section\n\nbla bla\n\n== Subsection\n\nbla bla\n\n``py\nprint(\"Hello World!\")\n``\n\n= Third section\n\nbla bla @citation\n\n#magic.bibliography()\n```\n\nI'm including part of the `codly` code in case the bug is due to some interaction between the two packages",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 63.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 464
    },
    {
      "id": 2654,
      "post_number": 9,
      "username": "OrangeX4",
      "name": "OrangeX4",
      "created_at": "2024-09-26T12:21:01.449Z",
      "updated_at": "2024-09-26T12:21:01.449Z",
      "cooked": "<p>This is another problem, you just need:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show: magic.bibliography-as-footnote.with(bibliography(\"refs.bib\", title: none))\n</code></pre>",
      "raw": "This is another problem, you just need:\n\n```typst\n#show: magic.bibliography-as-footnote.with(bibliography(\"refs.bib\", title: none))\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 39,
      "score": 162.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 18
    },
    {
      "id": 11320,
      "post_number": 10,
      "username": "acme",
      "name": "",
      "created_at": "2025-04-19T03:33:38.092Z",
      "updated_at": "2025-04-19T03:33:38.092Z",
      "cooked": "<p>Hi! The solution works perfectly, except that if the first page has several frames, then it raises the error saying <code>multiple bibliographies are not yet supported</code>. but if I wrap it in an only, then seems no bibliography can be imported. will there be a solution for this?</p>",
      "raw": "Hi! The solution works perfectly, except that if the first page has several frames, then it raises the error saying `multiple bibliographies are not yet supported`. but if I wrap it in an only, then seems no bibliography can be imported. will there be a solution for this?",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 3.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1483
    }
  ],
  "scraped_at": "2025-06-10T09:58:09.835486"
}
{
  "topic_metadata": {
    "id": 646,
    "title": "Is there a command for generating an empty symbol with an output size of 0?",
    "slug": "is-there-a-command-for-generating-an-empty-symbol-with-an-output-size-of-0",
    "posts_count": 8,
    "created_at": "2024-09-24T17:21:26.054Z",
    "last_posted_at": "2024-09-26T07:54:47.461Z",
    "views": 318,
    "like_count": 1,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting",
      "symbols"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1062
  },
  "posts": [
    {
      "id": 2482,
      "post_number": 1,
      "username": "Dirk",
      "name": "Dirk",
      "created_at": "2024-09-24T17:21:26.145Z",
      "updated_at": "2024-09-24T23:49:37.483Z",
      "cooked": "<p>Hi there,</p>\n<p>I use Typst to create texts, some of which are also provided by other tools.</p>\n<p>An input data can be any ASCII text that also contains Typst commands.</p>\n<p>My first idea was to use the raw function. Unfortunately, this does not wrap longer lines correctly and writes out of the page.</p>\n<p>So I used “Courier New” as the font, which is generally ok. However, strings that could be a Typst command are then output as a Typst command.</p>\n<p>Accordingly, I have written an input filter that easily converts the input characters: <code>&amp;</code> becomes <code>\\&amp;</code>, <code>#</code> becomes <code>\\#</code> and so on.</p>\n<p>This works quite well, but input lines like</p>\n<p><code>'\\$recyle.bin\\user123\\myfile'</code></p>\n<p>are a bit difficult, they become <code>\\\\$</code> if I only replace <code>$</code> and <code>\\\\\\\\$</code> if I replace <code>\\</code> and <code>$</code>. Since I can only control the input character stream to a limited extent, I have switched to turning a <code>$</code> into a <code>~\\&amp;</code> rather than a <code>\\$</code>. This ensures that the characters stand individually, and that input characters do not inadvertently create a command that flies around my ears.</p>\n<p>This works reliably. Unfortunately, I have a space between the expressions due to the <code>~</code>.</p>\n<p>This doesn’t look really great in the output.</p>\n<p><code>'\\$recyle.bin\\user123\\myfile' </code>then becomes <code>'~\\\\~\\$recyle.bin~\\\\user123~\\\\myfile'</code></p>\n<p>Now my question: is there a character in Typst that can be used as a separator and that is not a space, but a character of length 0?</p>\n<p>Many thanks</p>",
      "raw": "Hi there,\n\nI use Typst to create texts, some of which are also provided by other tools.\n\nAn input data can be any ASCII text that also contains Typst commands.\n\nMy first idea was to use the raw function. Unfortunately, this does not wrap longer lines correctly and writes out of the page.\n\nSo I used “Courier New” as the font, which is generally ok. However, strings that could be a Typst command are then output as a Typst command.\n\nAccordingly, I have written an input filter that easily converts the input characters: `&` becomes `\\&`, `#` becomes `\\#` and so on.\n\nThis works quite well, but input lines like\n\n`'\\$recyle.bin\\user123\\myfile'`\n\nare a bit difficult, they become `\\\\$` if I only replace `$` and `\\\\\\\\$` if I replace `\\` and `$`. Since I can only control the input character stream to a limited extent, I have switched to turning a `$` into a `~\\&` rather than a `\\$`. This ensures that the characters stand individually, and that input characters do not inadvertently create a command that flies around my ears.\n\nThis works reliably. Unfortunately, I have a space between the expressions due to the `~`. \n\nThis doesn't look really great in the output.\n\n`'\\$recyle.bin\\user123\\myfile' `then becomes `'~\\\\~\\$recyle.bin~\\\\user123~\\\\myfile'`\n\nNow my question: is there a character in Typst that can be used as a separator and that is not a space, but a character of length 0?\n\nMany thanks",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 994.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 466
    },
    {
      "id": 2484,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T17:33:32.129Z",
      "updated_at": "2024-09-24T17:38:18.440Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">a#(sym.zws)b\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/bd5629bce59e6a3c9aa942f3068b6c4ee5521ef0.png\" alt=\"image\" data-base62-sha1=\"r0WQpCdk2vzEga4Kf0m2TNJBRV6\" width=\"58\" height=\"42\"></p>\n<aside class=\"onebox wikipedia\" data-onebox-src=\"https://en.wikipedia.org/wiki/Zero-width_space\">\n  <header class=\"source\">\n\n      <a href=\"https://en.wikipedia.org/wiki/Zero-width_space\" target=\"_blank\" rel=\"noopener nofollow ugc\">en.wikipedia.org</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    \n\n<h3><a href=\"https://en.wikipedia.org/wiki/Zero-width_space\" target=\"_blank\" rel=\"noopener nofollow ugc\">Zero-width space</a></h3>\n\n<p>The zero-width space (ZWSP) is a non-printing character used in computerized typesetting to indicate where the word boundaries are, without actually displaying a visible space in the rendered text. This enables text-processing systems for scripts that do not use explicit spacing to recognize where word boundaries are for the purpose of handling line breaks appropriately. Zero-width space is unicode character U+200B, and is located in the unicode General Punctuation block, and can be represented b...</p>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>There are a few <a href=\"https://typst.app/docs/reference/symbols/sym/\">built-in characters</a>:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/1220dfe44485a5ddad0bfb9cbfff83ba189cc88f.png\" alt=\"image\" data-base62-sha1=\"2An1Jl6dVPubcsSMidlH7A0EteT\" width=\"429\" height=\"107\"></p>\n<p>They are all part of a Unicode character set (not included in ASCII character set), there might be some other similar characters that are not a part of <code>sym</code> module (but still can be inserted and typeset by Typst).</p>",
      "raw": "```typ\na#(sym.zws)b\n```\n\n![image|58x42](upload://r0WQpCdk2vzEga4Kf0m2TNJBRV6.png)\n\nhttps://en.wikipedia.org/wiki/Zero-width_space\n\nThere are a few [built-in characters](https://typst.app/docs/reference/symbols/sym/):\n\n![image|429x107](upload://2An1Jl6dVPubcsSMidlH7A0EteT.png)\n\nThey are all part of a Unicode character set (not included in ASCII character set), there might be some other similar characters that are not a part of `sym` module (but still can be inserted and typeset by Typst).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 45,
      "score": 564.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2492,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-24T20:13:27.337Z",
      "updated_at": "2024-09-24T20:13:27.337Z",
      "cooked": "<p>Hi, welcome and thank you for your question! I have changed your post’s title slightly to better fit the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a>. I also added tags, as it makes your question easier to find.</p>\n<p>Your post was also affected by your problem because Discourse, like Typst, treats backslashes (<code>\\</code>) specially. I put your examples in backticks (<code>`</code>); could you check the edit history to make sure that I did not accidentally destroy any of your examples?</p>",
      "raw": "Hi, welcome and thank you for your question! I have changed your post's title slightly to better fit the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11). I also added tags, as it makes your question easier to find.\n\nYour post was also affected by your problem because Discourse, like Typst, treats backslashes (`\\`) specially. I put your examples in backticks (``` ` ```); could you check the edit history to make sure that I did not accidentally destroy any of your examples?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 13.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2494,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-24T20:30:18.320Z",
      "updated_at": "2024-09-24T20:30:18.320Z",
      "cooked": "<p>I think there could be a better solution to your problem; may I ask a bit more about your situation?</p>\n<p>Where does the text come from? Is it in a text file, or directly in Typst source code? If it’s in a text file and you <code>read()</code> it, there should actually be no problem at all. You get a string with the correct content, and you can insert that into your document:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#read(\"file.txt\")\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/10f97d4ae4fb1e7ff687173776ad3a807f3c6618.png\" alt=\"from file\" data-base62-sha1=\"2qaaqnz4CIilw3oVHn2ild3AhSg\" width=\"296\" height=\"50\"></p>\n<p>Since you face this problem, I assume that you have this text directly in your Typst code, and this is not satisfactory:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">'\\$recyle.bin\\user123\\myfile'\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/fbd63dfb1f6a6fc4eb06c5fea9fd5bf82078ad7c.png\" alt=\"plain text\" data-base62-sha1=\"zVQR77WgPiCllLVcCAcSqefrTQM\" width=\"280\" height=\"50\"></p>\n<p>Neither is this due to the lack of line breaks:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">```\n'\\$recyle.bin\\user123\\myfile'\n```\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/3dacdb9b46f229a293e192f1310ca74b2890bde3.png\" data-download-href=\"https://forum.typst.app/uploads/default/3dacdb9b46f229a293e192f1310ca74b2890bde3\" title=\"raw block\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/3dacdb9b46f229a293e192f1310ca74b2890bde3_2_345x48.png\" alt=\"raw block\" data-base62-sha1=\"8NBtg0LxBiDLfcSmdGqbNgaEdiP\" width=\"345\" height=\"48\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/3dacdb9b46f229a293e192f1310ca74b2890bde3_2_345x48.png, https://forum.typst.app/uploads/default/optimized/1X/3dacdb9b46f229a293e192f1310ca74b2890bde3_2_517x72.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/3dacdb9b46f229a293e192f1310ca74b2890bde3_2_690x96.png 2x\" data-dominant-color=\"EEEEEE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">raw block</span><span class=\"informations\">711×99 22.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p><strong>However</strong>, you can get the content from a raw block (<code>```...```</code>) <em>as a string</em>, exactly as if you had read it out of a file:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#```\n'\\$recyle.bin\\user123\\myfile'\n```.text\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/10f97d4ae4fb1e7ff687173776ad3a807f3c6618.png\" alt=\"text from raw block\" data-base62-sha1=\"2qaaqnz4CIilw3oVHn2ild3AhSg\" width=\"296\" height=\"50\"></p>",
      "raw": "I think there could be a better solution to your problem; may I ask a bit more about your situation?\n\nWhere does the text come from? Is it in a text file, or directly in Typst source code? If it's in a text file and you `read()` it, there should actually be no problem at all. You get a string with the correct content, and you can insert that into your document:\n```typ\n#read(\"file.txt\")\n```\n![from file|592x101, 50%](upload://2qaaqnz4CIilw3oVHn2ild3AhSg.png)\n\nSince you face this problem, I assume that you have this text directly in your Typst code, and this is not satisfactory:\n```typ\n'\\$recyle.bin\\user123\\myfile'\n```\n![plain text|560x101, 50%](upload://zVQR77WgPiCllLVcCAcSqefrTQM.png)\n\nNeither is this due to the lack of line breaks:\n````typ\n```\n'\\$recyle.bin\\user123\\myfile'\n```\n````\n![raw block|690x96, 50%](upload://8NBtg0LxBiDLfcSmdGqbNgaEdiP.png)\n\n**However**, you can get the content from a raw block (```` ```...``` ````) _as a string_, exactly as if you had read it out of a file:\n````typ\n#```\n'\\$recyle.bin\\user123\\myfile'\n```.text\n````\n![text from raw block|592x101, 50%](upload://2qaaqnz4CIilw3oVHn2ild3AhSg.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 22.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2499,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T22:20:32.064Z",
      "updated_at": "2024-09-24T22:20:32.064Z",
      "cooked": "<p>This can be written as a one-liner like so:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#`'\\$recyle.bin\\user123\\myfile'`.text\n</code></pre>",
      "raw": "This can be written as a one-liner like so:\n\n```typ\n#`'\\$recyle.bin\\user123\\myfile'`.text\n```",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 6.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2629,
      "post_number": 6,
      "username": "Dirk",
      "name": "Dirk",
      "created_at": "2024-09-26T05:59:52.681Z",
      "updated_at": "2024-09-26T06:01:07.456Z",
      "cooked": "<p>In fact, my prozess is a little more complex:</p>\n<p>We use a tool for our reports that creates outputs in XML. A converter script runs over the output, which parses individual XML entries and generates typst code for a complex table. I can control some parts of the output well because these data is hard-coded into typst entries.</p>\n<p>However, some parts of the XML file contains output that is completely variable. These can be long texts, lists, file paths or even Windows registry keys. In general, it can also contain excerpts from memory dumps.</p>\n<p>I currently use the following macro:</p>\n<p><code>#let textoutput(body) = { </code><br>\n<code> set par(justify: false)</code><br>\n<code>  align(left)[#text(size: 10pt, hyphenate: true, font: “Courier New”)[#body]]</code><br>\n<code>}</code></p>\n<p>Additionally I change the input manually so that typst control commands are escaped by a backslash. In addition, a #(sym.zws) is entered after some characters so that long lines consisting of blocks of digits are better separated.</p>\n<p>This works quite well for me.</p>",
      "raw": "In fact, my prozess is a little more complex:\n\nWe use a tool for our reports that creates outputs in XML. A converter script runs over the output, which parses individual XML entries and generates typst code for a complex table. I can control some parts of the output well because these data is hard-coded into typst entries.\n\nHowever, some parts of the XML file contains output that is completely variable. These can be long texts, lists, file paths or even Windows registry keys. In general, it can also contain excerpts from memory dumps. \n\nI currently use the following macro:\n\n`#let textoutput(body) = { `\n`  set par(justify: false) `\n`  align(left)[#text(size: 10pt, hyphenate: true, font: “Courier New”)[#body]]`\n`}` \n\nAdditionally I change the input manually so that typst control commands are escaped by a backslash. In addition, a #(sym.zws) is entered after some characters so that long lines consisting of blocks of digits are better separated.\n\nThis works quite well for me.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 20.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 466
    },
    {
      "id": 2630,
      "post_number": 7,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-26T06:48:34.279Z",
      "updated_at": "2024-09-26T06:48:34.279Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Dirk\" data-post=\"6\" data-topic=\"646\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/dirk/48/908_2.png\" class=\"avatar\"> Dirk:</div>\n<blockquote>\n<p>We use a tool for our reports that creates outputs in XML.</p>\n</blockquote>\n</aside>\n<p>In case you didn’t know (and for future visitors to this post) Typst GmbH<br>\n(the company) also provides commercial support contracts in addition to a free web app.</p>\n<p>See at <a href=\"https://typst.app/pricing/#:~:text=Are%20you%20using%20the%20open%2Dsource%20Typst%20compiler%20in%20your%20company%3F\">Pricing</a></p>\n<blockquote>\n<p><strong>Are you using the open-source Typst compiler in your company?</strong> We offer commercial support contracts and can help with deployment, patches, and usage. <a href=\"https://typst.app/contact/\">Contact us</a> to learn more!</p>\n</blockquote>",
      "raw": "[quote=\"Dirk, post:6, topic:646\"]\nWe use a tool for our reports that creates outputs in XML.\n[/quote]\n\nIn case you didn't know (and for future visitors to this post) Typst GmbH\n (the company) also provides commercial support contracts in addition to a free web app.\n\nSee at [Pricing](https://typst.app/pricing/#:~:text=Are%20you%20using%20the%20open%2Dsource%20Typst%20compiler%20in%20your%20company%3F)\n> **Are you using the open-source Typst compiler in your company?** We offer commercial support contracts and can help with deployment, patches, and usage. [Contact us](https://typst.app/contact/) to learn more!",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 27,
      "score": 5.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2631,
      "post_number": 8,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-26T07:54:47.461Z",
      "updated_at": "2024-09-26T07:55:31.716Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Dirk\" data-post=\"6\" data-topic=\"646\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/dirk/48/908_2.png\" class=\"avatar\"> Dirk:</div>\n<blockquote>\n<p>A converter script runs over the output, which parses individual XML entries and generates typst code for a complex table.</p>\n</blockquote>\n</aside>\n<p>Just so you know, Typst supports reading xml directly: <a href=\"https://typst.app/docs/reference/data-loading/xml/\" class=\"inline-onebox\">XML Function – Typst Documentation</a></p>\n<p>You may be interested in these other threads:</p>\n<ul>\n<li><a href=\"https://forum.typst.app/t/is-there-a-way-to-programmaticaly-generate-documents/417\" class=\"inline-onebox\">Is there a way to programmaticaly generate documents?</a> – discusses how templating with external software could be replaced with Typst scripting</li>\n<li><a href=\"https://forum.typst.app/t/can-i-configure-my-document-e-g-draft-release-version-color-theme-when-creating-a-pdf-without-modifying-the-typst-file-directly/160/3\" class=\"inline-onebox\">Can I configure my document (e.g. draft/release version, color theme) when creating a PDF without modifying the Typst file directly? - #3 by SillyFreak</a> – discusses loading data into Typst in general, particularly avoiding having to put data into the Typst source code directly by instead loading it from a file (the example in that post uses JSON, but you could use XML)</li>\n</ul>\n<p>Also to reiterate: if you use raw blocks (<code>```...```</code>), you don’t need to escape Typst control commands. Raw blocks can also use more that three backticks (e.g. (<code>``````...``````</code>) if you can’t guarantee that your inputs won’t contain <code>```</code>. But you get around <em>all</em> needs for escaping by loading the data from file instead of putting it in your Typst source code.</p>",
      "raw": "[quote=\"Dirk, post:6, topic:646\"]\nA converter script runs over the output, which parses individual XML entries and generates typst code for a complex table.\n[/quote]\n\nJust so you know, Typst supports reading xml directly: https://typst.app/docs/reference/data-loading/xml/\n\nYou may be interested in these other threads:\n- https://forum.typst.app/t/is-there-a-way-to-programmaticaly-generate-documents/417 -- discusses how templating with external software could be replaced with Typst scripting\n- https://forum.typst.app/t/can-i-configure-my-document-e-g-draft-release-version-color-theme-when-creating-a-pdf-without-modifying-the-typst-file-directly/160/3 -- discusses loading data into Typst in general, particularly avoiding having to put data into the Typst source code directly by instead loading it from a file (the example in that post uses JSON, but you could use XML)\n\nAlso to reiterate: if you use raw blocks (` ```...``` `), you don't need to escape Typst control commands. Raw blocks can also use more that three backticks (e.g. (` ``````...`````` `) if you can't guarantee that your inputs won't contain ` ``` `. But you get around _all_ needs for escaping by loading the data from file instead of putting it in your Typst source code.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 26,
      "score": 15.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:58:09.084670"
}
{
  "topic_metadata": {
    "id": 652,
    "title": "How can I instantiate a dictionary with a variable key name?",
    "slug": "how-can-i-instantiate-a-dictionary-with-a-variable-key-name",
    "posts_count": 4,
    "created_at": "2024-09-24T20:24:18.546Z",
    "last_posted_at": "2024-09-25T09:38:40.067Z",
    "views": 374,
    "like_count": 4,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 453
  },
  "posts": [
    {
      "id": 2493,
      "post_number": 1,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-09-24T20:24:18.728Z",
      "updated_at": "2024-09-25T08:07:08.069Z",
      "cooked": "<p>I feel like I’m missing something obvious, but for all my looking and attempts I haven’t been able to find the answer.</p>\n<p>I am loading data from a text file and after some processing adding it to a dictionary.  I want a dictionary where the keys are user names and the values are dictionaries describing the user.   On the docs page for dictionaries it shows how to create a dictionary with key value pairs:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let dict = (\n  name: \"Typst\",\n  born: 2019,\n)\n</code></pre>\n<p>But because the keys I will be using are variables I can’t type them in like this.</p>\n<p>Here are the methods I’ve tried.  Only the fourth version achieves what I want, however, I cant help but think there is a more elegant way of doing it.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let userName = \"joe\"\n#let userData = (birthday: 1, phone: 123)\n\n//Doesn't work - key is the name of the userName variable, not its value\n#let dict1 = (userName: userData)\n#dict1\n//(userName: (birthday: 1, phone: 123))\n\n//Error at 'userName'\n#let dict2 = dictionary(userName, userData)\n#dict2\n//expected module, found string\n\n//Error at 'userName'\n#let dict3 = ()\n#dict3.insert(userName, userData)\n#dict3\n//expected integer, found string\n\n//Works\n#let dict4 = (x: none)\n#dict4.insert(userName, userData)\n//Only remove if the value remains unchanged - shouldn't remove a user with \"x\" as a name\n#if dict4.at(\"x\") == none { dict4.remove(\"x\") }\n#dict4\n//(joe: (birthday: 1, phone: 123))\n</code></pre>\n<p>To give a bit more context, l am creating a variable that is set to <code>none</code>, then when I get my first user data I set that variable to a new dictionary.  Any further users are simply added to the existing dictionary with <code>.insert(keyName, value)</code>.</p>",
      "raw": "I feel like I'm missing something obvious, but for all my looking and attempts I haven't been able to find the answer.\n\nI am loading data from a text file and after some processing adding it to a dictionary.  I want a dictionary where the keys are user names and the values are dictionaries describing the user.   On the docs page for dictionaries it shows how to create a dictionary with key value pairs:\n```typ\n#let dict = (\n  name: \"Typst\",\n  born: 2019,\n)\n```\nBut because the keys I will be using are variables I can't type them in like this.\n\nHere are the methods I've tried.  Only the fourth version achieves what I want, however, I cant help but think there is a more elegant way of doing it.\n```typ\n#let userName = \"joe\"\n#let userData = (birthday: 1, phone: 123)\n\n//Doesn't work - key is the name of the userName variable, not its value\n#let dict1 = (userName: userData)\n#dict1\n//(userName: (birthday: 1, phone: 123))\n\n//Error at 'userName'\n#let dict2 = dictionary(userName, userData)\n#dict2\n//expected module, found string\n\n//Error at 'userName'\n#let dict3 = ()\n#dict3.insert(userName, userData)\n#dict3\n//expected integer, found string\n\n//Works\n#let dict4 = (x: none)\n#dict4.insert(userName, userData)\n//Only remove if the value remains unchanged - shouldn't remove a user with \"x\" as a name\n#if dict4.at(\"x\") == none { dict4.remove(\"x\") }\n#dict4\n//(joe: (birthday: 1, phone: 123))\n```\n\nTo give a bit more context, l am creating a variable that is set to `none`, then when I get my first user data I set that variable to a new dictionary.  Any further users are simply added to the existing dictionary with `.insert(keyName, value)`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 1923.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 2495,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-09-24T20:33:35.244Z",
      "updated_at": "2024-09-25T08:07:19.321Z",
      "cooked": "<p>While editing my initial post I found another way which provides the correct result.  It still doesn’t answer the question of how to create a dictionary with a variable key name, however.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let userName = \"joe\"\n#let userData = (birthday: 1, phone: 123)\n\n//Works\n#let dict5 = (:)\n#dict5.insert(userName, userData)\n#dict5\n//(joe: (birthday: 1, phone: 123))\n</code></pre>",
      "raw": "While editing my initial post I found another way which provides the correct result.  It still doesn't answer the question of how to create a dictionary with a variable key name, however.\n\n```typ\n#let userName = \"joe\"\n#let userData = (birthday: 1, phone: 123)\n\n//Works\n#let dict5 = (:)\n#dict5.insert(userName, userData)\n#dict5\n//(joe: (birthday: 1, phone: 123))\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 17.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 2496,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-24T20:38:31.689Z",
      "updated_at": "2024-09-24T20:40:51.086Z",
      "cooked": "<p>You’re looking for this syntax:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let userName = \"joe\"\n#let userData = (birthday: 1, phone: 123)\n\n#let dict1 = ((userName): userData)\n#dict1\n</code></pre>\n<p>This is not really special syntax, it’s just a parenthesized expression. As you’ve seen, a bare identifier will be directly used as the key – but any other expression will be evaluated to get the key. By putting the identifier in parentheses, you make sure that a variable access is performed.</p>",
      "raw": "You're looking for this syntax:\n```typ\n#let userName = \"joe\"\n#let userData = (birthday: 1, phone: 123)\n\n#let dict1 = ((userName): userData)\n#dict1\n```\nThis is not really special syntax, it's just a parenthesized expression. As you've seen, a bare identifier will be directly used as the key -- but any other expression will be evaluated to get the key. By putting the identifier in parentheses, you make sure that a variable access is performed.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 35,
      "score": 87.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2533,
      "post_number": 4,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-09-25T09:38:40.067Z",
      "updated_at": "2024-09-25T09:38:40.067Z",
      "cooked": "<p>Thanks, that’s what I was missing.  So this uses a similar syntax when you have a function defined as the value of a dictionary:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">#let funcs = (\"add1\": x =&gt; x + 1)\n#funcs.add1(0) //Doesn't work\n#(funcs.add1)(0) //Works\n</code></pre>\n<p>Thanks for the help!</p>",
      "raw": "Thanks, that's what I was missing.  So this uses a similar syntax when you have a function defined as the value of a dictionary:\n```typc\n#let funcs = (\"add1\": x => x + 1)\n#funcs.add1(0) //Doesn't work\n#(funcs.add1)(0) //Works\n```\n\nThanks for the help!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 71.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    }
  ],
  "scraped_at": "2025-06-10T09:58:08.324895"
}
{
  "topic_metadata": {
    "id": 653,
    "title": "Why am I not able to time travel to find the value of a counter at a later point?",
    "slug": "why-am-i-not-able-to-time-travel-to-find-the-value-of-a-counter-at-a-later-point",
    "posts_count": 6,
    "created_at": "2024-09-24T22:20:47.176Z",
    "last_posted_at": "2024-09-25T00:59:32.162Z",
    "views": 89,
    "like_count": 3,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "scripting",
      "counter",
      "context"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 922
  },
  "posts": [
    {
      "id": 2500,
      "post_number": 1,
      "username": "Bryn",
      "name": "Bryn Humberstone",
      "created_at": "2024-09-24T22:20:47.384Z",
      "updated_at": "2024-09-25T08:58:31.541Z",
      "cooked": "<p>I am trying to typeset an exam and I would like to have questions and subquestions. I would like the total number of marks for the subquestions to be at the top of the question, but I don’t seem to able to use <code>#context</code> with time-travelling to achieve this goal.</p>\n<p>I seem, at best, to be able to time travel to the second last subquestion, using <code>&lt;label2&gt;</code> in my code.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let qnum = counter(\"questionnumber\")\n#let subqnum = counter(\"subquestionnumber\")\n#let subqmarks = counter(\"subquestionmarks\")\n\n#let question(content) = [\n    #qnum.step()\n    #subqnum.update(0)  // any subquestions (a), (b), (c) start again...\n    #subqmarks.update(0)\n\n    *Question #qnum.display()*\n    (Total marks calculated as #context subqmarks.at(&lt;label1&gt;).first()? or #context subqmarks.at(&lt;label2&gt;).first()?)\n    #linebreak()\n    \n    #content \n    &lt;label1&gt;\n    Actual total marks for this question: #subqmarks.display()\n  ]\n\n#let subquestion(nummarks: 0, content) = [\n  #subqnum.step()\n  #subqmarks.update(n =&gt; n + nummarks)\n  #block[#subqnum.display(\"a.\") #content (#nummarks marks)]\n]\n\n\n#question[\n#subquestion(nummarks: 3)[ 1 + 1 ]\n#subquestion(nummarks: 4)[ 2 + 2 ]\n#subquestion(nummarks: 5)[ 3 + 3 ]\n#subquestion(nummarks: 6)[ 4 + 4 ]\n&lt;label2&gt;\n]\n</code></pre>\n<p>I do not understand why neither label1, nor label2, would tell me that the value of my <code>subqmarks</code> counter is 18 after all the subquestions have been considered.</p>\n<p>The output I receive is:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/6c43d89c042b4d484bdbab49dee2ba780ec9d8fa.png\" data-download-href=\"https://forum.typst.app/uploads/default/6c43d89c042b4d484bdbab49dee2ba780ec9d8fa\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/6c43d89c042b4d484bdbab49dee2ba780ec9d8fa_2_345x186.png\" alt=\"image\" data-base62-sha1=\"frKVrmrJllRWItJy07OQUPjbtW2\" width=\"345\" height=\"186\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/6c43d89c042b4d484bdbab49dee2ba780ec9d8fa_2_345x186.png, https://forum.typst.app/uploads/default/optimized/1X/6c43d89c042b4d484bdbab49dee2ba780ec9d8fa_2_517x279.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/6c43d89c042b4d484bdbab49dee2ba780ec9d8fa_2_690x372.png 2x\" data-dominant-color=\"F4F4F4\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1138×614 75.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Moreover, if there is a much better way to achieve my goal, then I’d also like to hear that because even if I understand this context stuff, I still have the problem that I need to generate and refer to a unique label for each question.</p>",
      "raw": "I am trying to typeset an exam and I would like to have questions and subquestions. I would like the total number of marks for the subquestions to be at the top of the question, but I don't seem to able to use `#context` with time-travelling to achieve this goal.\n\nI seem, at best, to be able to time travel to the second last subquestion, using `<label2>` in my code.\n\n```typ\n#let qnum = counter(\"questionnumber\")\n#let subqnum = counter(\"subquestionnumber\")\n#let subqmarks = counter(\"subquestionmarks\")\n\n#let question(content) = [\n    #qnum.step()\n    #subqnum.update(0)  // any subquestions (a), (b), (c) start again...\n    #subqmarks.update(0)\n\n    *Question #qnum.display()*\n    (Total marks calculated as #context subqmarks.at(<label1>).first()? or #context subqmarks.at(<label2>).first()?)\n    #linebreak()\n    \n    #content \n    <label1>\n    Actual total marks for this question: #subqmarks.display()\n  ]\n\n#let subquestion(nummarks: 0, content) = [\n  #subqnum.step()\n  #subqmarks.update(n => n + nummarks)\n  #block[#subqnum.display(\"a.\") #content (#nummarks marks)]\n]\n\n\n#question[\n#subquestion(nummarks: 3)[ 1 + 1 ]\n#subquestion(nummarks: 4)[ 2 + 2 ]\n#subquestion(nummarks: 5)[ 3 + 3 ]\n#subquestion(nummarks: 6)[ 4 + 4 ]\n<label2>\n]\n```\n\nI do not understand why neither label1, nor label2, would tell me that the value of my `subqmarks` counter is 18 after all the subquestions have been considered.\n\nThe output I receive is:\n![image|690x372, 50%](upload://frKVrmrJllRWItJy07OQUPjbtW2.png)\n\nMoreover, if there is a much better way to achieve my goal, then I'd also like to hear that because even if I understand this context stuff, I still have the problem that I need to generate and refer to a unique label for each question.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 111.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 389
    },
    {
      "id": 2502,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-24T22:44:01.239Z",
      "updated_at": "2024-09-24T22:45:06.382Z",
      "cooked": "<p>When you use labels the way you do in</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#content \n&lt;label1&gt;\n\n// or later\n\n#subquestion(nummarks: 6)[ 4 + 4 ]\n&lt;label2&gt;\n</code></pre>\n<p>the label is attached to the previous element (<code>#content</code> or the <code>#subquestion</code>). The associated location of these elements point to where they begin, which is <em>before</em> the counter is stepped.</p>\n<p>What you want instead, is to have the label at an element <em>after</em> the content that contains the counter step. You can achieve this, for example, by attaching the label to an empty element:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#content \n#[] &lt;label1&gt;\n</code></pre>\n<hr>\n<p>For your other problem of getting a unique label, you could use the current value of the <code>#qnum</code> counter, for example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let question(content) = {\n  qnum.step()\n  subqnum.update(0)  // any subquestions (a), (b), (c) start again...\n  subqmarks.update(0)\n\n  context [\n    #let lbl = label(\"after-question-\" + str(qnum.get().first()))\n    \n    *Question #qnum.display()*\n    (Total marks calculated as #context subqmarks.at(lbl).first())\n\n    #content\n\n    #[] #lbl\n  ]\n}\n</code></pre>",
      "raw": "When you use labels the way you do in\n```typ\n#content \n<label1>\n\n// or later\n\n#subquestion(nummarks: 6)[ 4 + 4 ]\n<label2>\n```\nthe label is attached to the previous element (`#content` or the `#subquestion`). The associated location of these elements point to where they begin, which is _before_ the counter is stepped.\n\nWhat you want instead, is to have the label at an element _after_ the content that contains the counter step. You can achieve this, for example, by attaching the label to an empty element:\n```typ\n#content \n#[] <label1>\n```\n---\n\nFor your other problem of getting a unique label, you could use the current value of the `#qnum` counter, for example:\n```typ\n#let question(content) = {\n  qnum.step()\n  subqnum.update(0)  // any subquestions (a), (b), (c) start again...\n  subqmarks.update(0)\n\n  context [\n    #let lbl = label(\"after-question-\" + str(qnum.get().first()))\n    \n    *Question #qnum.display()*\n    (Total marks calculated as #context subqmarks.at(lbl).first())\n\n    #content\n\n    #[] #lbl\n  ]\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 21.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2503,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-24T23:11:05.229Z",
      "updated_at": "2024-09-24T23:11:05.229Z",
      "cooked": "<p>As an alternative approach, you can also use a separate marks counter for each question, and combine the question and sub-question counter into one. This eliminates the need for any labels:</p>\n<details>\n<summary>\nImplementation</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let question-counter = counter(\"question\")\n#let marks-counter(num) = counter(\"marks-\" + str(num))\n\n#let question(content) = {\n  // Step main number, reset any sub-question number.\n  question-counter.update((num, ..) =&gt; num + 1)\n\n  context [\n    #let (num, ..) = question-counter.get()\n    #let total-marks = marks-counter(num).final().first()\n    \n    *Question #num* (Total marks calculated as #total-marks)\n    \n    #content\n  ]\n}\n\n#let subquestion(nummarks: 0, content) = {\n  // Step only the sub-question number.\n  question-counter.step(level: 2)\n  \n  context [\n    #let (num, sub) = question-counter.get()\n\n    // Update marks counter for this question number.\n    #marks-counter(num).update(n =&gt; n + nummarks)\n\n    #block[#numbering(\"(a)\", sub) #content (#nummarks marks)]\n  ]\n}\n</code></pre>\n</details>\n<p>Whether one approach is better than the other is hard to say, as whatever works is good enough <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "As an alternative approach, you can also use a separate marks counter for each question, and combine the question and sub-question counter into one. This eliminates the need for any labels:\n\n[details=Implementation]\n```typ\n#let question-counter = counter(\"question\")\n#let marks-counter(num) = counter(\"marks-\" + str(num))\n\n#let question(content) = {\n  // Step main number, reset any sub-question number.\n  question-counter.update((num, ..) => num + 1)\n\n  context [\n    #let (num, ..) = question-counter.get()\n    #let total-marks = marks-counter(num).final().first()\n    \n    *Question #num* (Total marks calculated as #total-marks)\n    \n    #content\n  ]\n}\n\n#let subquestion(nummarks: 0, content) = {\n  // Step only the sub-question number.\n  question-counter.step(level: 2)\n  \n  context [\n    #let (num, sub) = question-counter.get()\n\n    // Update marks counter for this question number.\n    #marks-counter(num).update(n => n + nummarks)\n\n    #block[#numbering(\"(a)\", sub) #content (#nummarks marks)]\n  ]\n}\n```\n[/details]\n\nWhether one approach is better than the other is hard to say, as whatever works is good enough :wink:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 24.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2506,
      "post_number": 4,
      "username": "Bryn",
      "name": "Bryn Humberstone",
      "created_at": "2024-09-24T23:59:00.728Z",
      "updated_at": "2024-09-24T23:59:00.728Z",
      "cooked": "<p>I prefer your alternative implementation but accepted your first answer since that addressed my immediate question, regarding being able to time travel. I hadn’t realised that labels were like functions which applied to the previous item, so that answer was helpful.</p>\n<p>However, now that I have tried your alternative approach, I am faced with a new problem, namely, how to add up all the marks for the paper and get the total.</p>\n<p>I added to the top:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let overall-marks = counter(\"overall\")\n</code></pre>\n<p>and then edited your definition of <code>question</code>, partly so I could have questions with a number of marks on their own and no subquestions:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let question(nummarks: 0, content) = {\n  question-counter.update((num, ..) =&gt; num + 1)\n\n  context [\n    #let (num, ..) = question-counter.get()\n    #let total-marks = if nummarks == 0 { marks-counter(num).final().first() } else { nummarks }\n    #overall-marks.update(n =&gt; n + total-marks)\n\n    *Question #num* (#total-marks marks)\n\n    #content\n\n    The overall marks is now at #overall-marks.display()\n  ]\n}\n</code></pre>\n<p>However, this also seems to have the issue of always being a question behind in its totals (i.e., after the first question is printed, it says “The overall marks is now at 0.”)</p>\n<p>Do you have any advice for how I can flesh out your alternative approach to keep track of the total marks too?</p>",
      "raw": "I prefer your alternative implementation but accepted your first answer since that addressed my immediate question, regarding being able to time travel. I hadn't realised that labels were like functions which applied to the previous item, so that answer was helpful.\n\nHowever, now that I have tried your alternative approach, I am faced with a new problem, namely, how to add up all the marks for the paper and get the total.\n\nI added to the top:\n\n```typ\n#let overall-marks = counter(\"overall\")\n```\n\nand then edited your definition of `question`, partly so I could have questions with a number of marks on their own and no subquestions:\n\n```typ\n#let question(nummarks: 0, content) = {\n  question-counter.update((num, ..) => num + 1)\n\n  context [\n    #let (num, ..) = question-counter.get()\n    #let total-marks = if nummarks == 0 { marks-counter(num).final().first() } else { nummarks }\n    #overall-marks.update(n => n + total-marks)\n\n    *Question #num* (#total-marks marks)\n\n    #content\n\n    The overall marks is now at #overall-marks.display()\n  ]\n}\n```\n\nHowever, this also seems to have the issue of always being a question behind in its totals (i.e., after the first question is printed, it says \"The overall marks is now at 0.\")\n\nDo you have any advice for how I can flesh out your alternative approach to keep track of the total marks too?",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 4.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 389
    },
    {
      "id": 2507,
      "post_number": 5,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-25T00:17:45.545Z",
      "updated_at": "2024-09-25T00:19:54.503Z",
      "cooked": "<p>The problem here is that the counter update and counter display are within the same context block, in which the context represents the state before the <code>overall-marks</code> counter was updated. Thus, when the counter is displayed, it shows the value of the previous question.</p>\n<p>To fix this, you can simply move the counter display in a separate context expression:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let question(...) = {\n  question-counter.update(...)\n\n  context [\n    ... #overall-marks.update(...)\n\n    Overall: #context overall-marks.display()\n  ]\n}\n</code></pre>",
      "raw": "The problem here is that the counter update and counter display are within the same context block, in which the context represents the state before the `overall-marks` counter was updated. Thus, when the counter is displayed, it shows the value of the previous question.\n\nTo fix this, you can simply move the counter display in a separate context expression:\n```typ\n#let question(...) = {\n  question-counter.update(...)\n\n  context [\n    ... #overall-marks.update(...)\n\n    Overall: #context overall-marks.display()\n  ]\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 24.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2508,
      "post_number": 6,
      "username": "Bryn",
      "name": "Bryn Humberstone",
      "created_at": "2024-09-25T00:59:32.162Z",
      "updated_at": "2024-09-25T00:59:32.162Z",
      "cooked": "<p>Thanks, this is excellent. I see that there is some discussion of <code>#context</code> within <code>context</code> in the <a href=\"https://typst.app/docs/reference/context/\">Typst documentation</a>, but I must admit I did not really understand it (as made evident by the questions above). I wonder if anyone will make a video explaining it really clearly for those of us who might have grown too lazy to read documentation thoroughly!</p>",
      "raw": "Thanks, this is excellent. I see that there is some discussion of `#context` within `context` in the [Typst documentation](https://typst.app/docs/reference/context/), but I must admit I did not really understand it (as made evident by the questions above). I wonder if anyone will make a video explaining it really clearly for those of us who might have grown too lazy to read documentation thoroughly!",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 389
    }
  ],
  "scraped_at": "2025-06-10T09:58:07.497253"
}
{
  "topic_metadata": {
    "id": 665,
    "title": "What are the rules for identifiers in Typst?",
    "slug": "what-are-the-rules-for-identifiers-in-typst",
    "posts_count": 2,
    "created_at": "2024-09-25T11:17:38.953Z",
    "last_posted_at": "2024-09-25T12:11:46.062Z",
    "views": 355,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "xkevio",
    "tags": [
      "scripting",
      "syntax"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 183
  },
  "posts": [
    {
      "id": 2557,
      "post_number": 1,
      "username": "Yahuxo",
      "name": "Tobias",
      "created_at": "2024-09-25T11:17:39.182Z",
      "updated_at": "2024-09-25T12:49:42.635Z",
      "cooked": "<p>The scripting part of Typst allows users to define their own functions and variables. From my tests it seems that these identifiers are allowed to contain Unicode characters (including underscores and dashes).</p>\n<p>Example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let ÿøúr-nãmê = \"Typst\"\nHello, #ÿøúr-nãmê!\n</code></pre>\n<p>Using a plain underscore character “_” for identifiers does not fully work, though. You can define a variable like <code>#let _ = [Foo]</code> but referencing it seems to cause errors.</p>\n<p>What are the exact rules for identifiers in Typst? And what are best practices, e.g. for shared templates?</p>",
      "raw": "The scripting part of Typst allows users to define their own functions and variables. From my tests it seems that these identifiers are allowed to contain Unicode characters (including underscores and dashes).\n\nExample:\n```typ\n#let ÿøúr-nãmê = \"Typst\"\nHello, #ÿøúr-nãmê!\n```\n\nUsing a plain underscore character \"_\" for identifiers does not fully work, though. You can define a variable like `#let _ = [Foo]` but referencing it seems to cause errors.\n\nWhat are the exact rules for identifiers in Typst? And what are best practices, e.g. for shared templates?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 1237.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 472
    },
    {
      "id": 2563,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-09-25T12:11:46.062Z",
      "updated_at": "2024-09-25T12:12:33.182Z",
      "cooked": "<p>According to the lexer inside of Typst’s source code, an identifier is valid if it follows the Unicode standard <a href=\"http://www.unicode.org/reports/tr31/\" rel=\"noopener nofollow ugc\">uax31</a> and, additionally, Typst allows <code>_</code> as a starting and continuing character and <code>-</code> as a continuing character.</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/typst/typst/blob/main/crates/typst-syntax/src/lexer.rs#L898-L911\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/blob/main/crates/typst-syntax/src/lexer.rs#L898-L911\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/typst/typst/blob/main/crates/typst-syntax/src/lexer.rs#L898-L911\" target=\"_blank\" rel=\"noopener nofollow ugc\">typst/typst/blob/main/crates/typst-syntax/src/lexer.rs#L898-L911</a></h4>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-rs\">\n      <ol class=\"start lines\" start=\"898\" style=\"counter-reset: li-counter 897 ;\">\n          <li>/// Whether a string is a valid Typst identifier.</li>\n          <li>///</li>\n          <li>/// In addition to what is specified in the [Unicode Standard][uax31], we allow:</li>\n          <li>/// - `_` as a starting character,</li>\n          <li>/// - `_` and `-` as continuing characters.</li>\n          <li>///</li>\n          <li>/// [uax31]: http://www.unicode.org/reports/tr31/</li>\n          <li>#[inline]</li>\n          <li>pub fn is_ident(string: &amp;str) -&gt; bool {</li>\n          <li>    let mut chars = string.chars();</li>\n          <li>    chars</li>\n          <li>        .next()</li>\n          <li>        .is_some_and(|c| is_id_start(c) &amp;&amp; chars.all(is_id_continue))</li>\n          <li>}</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>As for how users should name their variables and functions, the standard seems to be kebab-case. Referencing a variable with just an underscore won’t work since that is probably reserved for explicitly nameless variables.</p>",
      "raw": "According to the lexer inside of Typst's source code, an identifier is valid if it follows the Unicode standard [uax31](http://www.unicode.org/reports/tr31/) and, additionally, Typst allows `_` as a starting and continuing character and `-` as a continuing character. \n\nhttps://github.com/typst/typst/blob/main/crates/typst-syntax/src/lexer.rs#L898-L911\n\nAs for how users should name their variables and functions, the standard seems to be kebab-case. Referencing a variable with just an underscore won't work since that is probably reserved for explicitly nameless variables.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 56,
      "score": 91.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    }
  ],
  "scraped_at": "2025-06-10T09:58:06.764952"
}
{
  "topic_metadata": {
    "id": 667,
    "title": "How to have different supplements for the same heading depending on the location?",
    "slug": "how-to-have-different-supplements-for-the-same-heading-depending-on-the-location",
    "posts_count": 5,
    "created_at": "2024-09-25T12:05:23.898Z",
    "last_posted_at": "2024-09-25T12:32:47.320Z",
    "views": 237,
    "like_count": 5,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Eric",
    "tags": [],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 303
  },
  "posts": [
    {
      "id": 2562,
      "post_number": 1,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-09-25T12:05:24.034Z",
      "updated_at": "2024-09-25T12:05:24.034Z",
      "cooked": "<p>In my PhD thesis, I have to do a small introduction in French, but the rest of the document is in English. In this introduction, I must have French supplements for the headings I’m referring to, however the following solution does not work. It seems that the supplement that is chosen when we do a reference is the one applied at the location of the heading. Is there a simple solution to fix this?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.\", supplement: [Chapitre])\n\n= C'est une introduction en français\n// It's displaying \"Chapter 2\", but I want \"Chapitre 2\"\nDans cette thèse on va voir @chap.\n\n#set heading(supplement: [Chapter])\n\n= This is a chapter in English &lt;chap&gt;\nThis is @chap.\n</code></pre>",
      "raw": "In my PhD thesis, I have to do a small introduction in French, but the rest of the document is in English. In this introduction, I must have French supplements for the headings I'm referring to, however the following solution does not work. It seems that the supplement that is chosen when we do a reference is the one applied at the location of the heading. Is there a simple solution to fix this?\n\n```typ\n#set heading(numbering: \"1.\", supplement: [Chapitre])\n\n= C'est une introduction en français\n// It's displaying \"Chapter 2\", but I want \"Chapitre 2\"\nDans cette thèse on va voir @chap.\n\n#set heading(supplement: [Chapter])\n\n= This is a chapter in English <chap>\nThis is @chap.\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 1009.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 2565,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-09-25T12:15:41.678Z",
      "updated_at": "2024-09-25T12:15:41.678Z",
      "cooked": "<p>Not sure how to properly fix it with the <code>set</code>-rules but in the meantime, you can manually change the supplement where needed with <code>@chap[Chapitre]</code>.</p>",
      "raw": "Not sure how to properly fix it with the `set`-rules but in the meantime, you can manually change the supplement where needed with `@chap[Chapitre]`.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 14.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 2566,
      "post_number": 3,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-09-25T12:18:57.129Z",
      "updated_at": "2024-09-25T12:18:57.129Z",
      "cooked": "<p>Yes that’s what I do currently, I’m just asking in case there is a more general solution. I also understand that this is the correct behaviour for referencing headings, as when we redefine the supplement to “Appendix” at the start of the appendix, we want the references to appendices in the body of the document to display “Appendix”, not “Chapter”.</p>",
      "raw": "Yes that's what I do currently, I'm just asking in case there is a more general solution. I also understand that this is the correct behaviour for referencing headings, as when we redefine the supplement to \"Appendix\" at the start of the appendix, we want the references to appendices in the body of the document to display \"Appendix\", not \"Chapter\".",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 34.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 2567,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-25T12:26:26.987Z",
      "updated_at": "2024-09-25T12:26:26.987Z",
      "cooked": "<p>You can use contextual content as the supplement</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.\", supplement: context {\n  if text.lang == \"fr\" [ Chapitre ] else [ Chapter ]\n})\n</code></pre>\n<p>and then wrap any French chapters in a to <code>text(lang: \"fr\")[ ... ]</code>. If French is the default language of your document, and only some parts are in English, you can of course do the same with <code>\"en\"</code> instead of <code>\"fr\"</code>.</p>",
      "raw": "You can use contextual content as the supplement\n```typ\n#set heading(numbering: \"1.\", supplement: context {\n  if text.lang == \"fr\" [ Chapitre ] else [ Chapter ]\n})\n```\n\nand then wrap any French chapters in a to `text(lang: \"fr\")[ ... ]`. If French is the default language of your document, and only some parts are in English, you can of course do the same with `\"en\"` instead of `\"fr\"`.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 4,
      "reads": 43,
      "score": 103.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2568,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-25T12:32:47.320Z",
      "updated_at": "2024-09-25T12:32:47.320Z",
      "cooked": "<p>If you do no want to wrap the whole chapter, you can also set the lang at the beginning, and set it back to another language at the end.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set text(lang: \"fr\")\n</code></pre>",
      "raw": "If you do no want to wrap the whole chapter, you can also set the lang at the beginning, and set it back to another language at the end.\n```typ\n#set text(lang: \"fr\")\n```",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 23.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:58:05.984643"
}
{
  "topic_metadata": {
    "id": 672,
    "title": "How to mutate variables in a show rule?",
    "slug": "how-to-mutate-variables-in-a-show-rule",
    "posts_count": 8,
    "created_at": "2024-09-25T13:29:55.516Z",
    "last_posted_at": "2024-09-25T15:02:19.369Z",
    "views": 478,
    "like_count": 9,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting",
      "layout",
      "counter",
      "context"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 596
  },
  "posts": [
    {
      "id": 2574,
      "post_number": 1,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-25T13:29:55.639Z",
      "updated_at": "2024-09-25T13:49:22.243Z",
      "cooked": "<p>Let’s take a look at the following example:<br>\nEvery second level 1 heading is supposed to appear bold in the outline.<br>\n<br>\nEasy, right? Just use an integer variable, calculate variable mod 2, and set the style accordingly.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let i = 1\n#show outline.entry.where(level: 1): it =&gt; context {\n  if calc.rem(i, 2) == 1 {\n    strong(it)\n  } else {\n    it\n  }\n  i += 1\n}\n\n#outline(depth: 3, indent: auto)\n</code></pre>\n<p>Well… Not so easy. I am not allowed to mutate integers within a show rule.<br>\n<br>\nThat’s why I came up with the following hack using a counter.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let i = counter(\"i-counter\")\n#i.update(0)\n#show outline.entry.where(level: 1): it =&gt; context {\n  if calc.rem(i.get().at(0), 2) == 1 {\n    strong(it)\n  } else {\n    it\n  }\n  i.step()\n}\n    \n#outline(depth: 3, indent: auto)\n</code></pre>\n<p>But I have to admit that it just doesn’t feel right. I am pretty sure this isn’t how I am supposed to use a counter.</p>\n<p><br>\nThat’s why I wonder:<br>\nWhat is the Typst-way to approach a problem like this?</p>",
      "raw": "Let's take a look at the following example:\nEvery second level 1 heading is supposed to appear bold in the outline.\n\\\nEasy, right? Just use an integer variable, calculate variable mod 2, and set the style accordingly.\n```typ\n#let i = 1\n#show outline.entry.where(level: 1): it => context {\n  if calc.rem(i, 2) == 1 {\n    strong(it)\n  } else {\n    it\n  }\n  i += 1\n}\n\n#outline(depth: 3, indent: auto)\n```\nWell... Not so easy. I am not allowed to mutate integers within a show rule. \n\\\nThat's why I came up with the following hack using a counter.\n```typ\n#let i = counter(\"i-counter\")\n#i.update(0)\n#show outline.entry.where(level: 1): it => context {\n  if calc.rem(i.get().at(0), 2) == 1 {\n    strong(it)\n  } else {\n    it\n  }\n  i.step()\n}\n    \n#outline(depth: 3, indent: auto)\n```\n \nBut I have to admit that it just doesn't feel right. I am pretty sure this isn't how I am supposed to use a counter.\n\n\\\nThat's why I wonder:\nWhat is the Typst-way to approach a problem like this?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 2075.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2577,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-25T13:43:03.164Z",
      "updated_at": "2024-09-25T13:47:12.974Z",
      "cooked": "<p>No, you are pretty much spot on. Here is a slightly modified version:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(paper: \"a5\")\n\n#show outline.entry.where(level: 1): it =&gt; {\n  let i = counter(\"i-counter\")\n  i.step()\n  context if calc.even(i.get().first()) {\n    strong(it)\n  } else {\n    it\n  }\n}\n\n#outline(depth: 3, indent: auto)\n\n= First\n= Second\n= Third\n= Fourth\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/9b3cb73114e729450ee439d3dfeaed79a3f8d1f0.png\" alt=\"image\" data-base62-sha1=\"m9i5BNceuFLlWeV41nuXszhY1aM\" width=\"687\" height=\"423\"></p>\n<p>If you don’t use the counter anywhere else, then it’s a good idea to put it where it is used. You can also use functions like <a href=\"https://typst.app/docs/reference/foundations/calc#functions-even\"><code>even</code></a> which will improve readability.</p>\n<p>From <a href=\"https://typst.app/docs/reference/introspection/counter/:herb:\">https://typst.app/docs/reference/introspection/counter/:herb:</a></p>\n<blockquote>\n<p>Counts through pages, elements, and more.</p>\n<p>With the counter function, you can access and modify counters for pages, headings, figures, and more. Moreover, you can define custom counters for other things you want to count.</p>\n<p>Since counters change throughout the course of the document, their current value is <em>contextual.</em> It is recommended to read the chapter on <a href=\"https://typst.app/docs/reference/context/\">context</a> before continuing here.</p>\n</blockquote>",
      "raw": "No, you are pretty much spot on. Here is a slightly modified version:\n\n```typ\n#set page(paper: \"a5\")\n\n#show outline.entry.where(level: 1): it => {\n  let i = counter(\"i-counter\")\n  i.step()\n  context if calc.even(i.get().first()) {\n    strong(it)\n  } else {\n    it\n  }\n}\n\n#outline(depth: 3, indent: auto)\n\n= First\n= Second\n= Third\n= Fourth\n```\n\n![image|687x423](upload://m9i5BNceuFLlWeV41nuXszhY1aM.png)\n\nIf you don't use the counter anywhere else, then it's a good idea to put it where it is used. You can also use functions like [`even`](https://typst.app/docs/reference/foundations/calc#functions-even) which will improve readability.\n\nFrom https://typst.app/docs/reference/introspection/counter/:herb: \n\n> Counts through pages, elements, and more.\n> \n> With the counter function, you can access and modify counters for pages, headings, figures, and more. Moreover, you can define custom counters for other things you want to count.\n> \n> Since counters change throughout the course of the document, their current value is *contextual.* It is recommended to read the chapter on [context](https://typst.app/docs/reference/context/) before continuing here.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 2,
      "reads": 48,
      "score": 99.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2578,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-25T13:46:28.910Z",
      "updated_at": "2024-09-25T13:46:38.603Z",
      "cooked": "<p>There are many Typst ways… Here is below an approach without a counter, but I think much more expensive, because you query headings in the document.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry.where(level: 1): it =&gt; context {\n  let i = query(heading.where(level: 1).before(it.element.location())).len()\n  if calc.rem(i, 2) == 1 {\n    str(i) + \"-\" + strong(it)\n  } else {\n    str(i) + \"-\" + it\n  }\n}\n\n= A\n= B\n= C\n= D\n= E\n#outline(depth: 3, indent: auto)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/a6be1fc4b32d9b1ebde93f57a9942b46aad35f2a.png\" data-download-href=\"https://forum.typst.app/uploads/default/a6be1fc4b32d9b1ebde93f57a9942b46aad35f2a\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/original/1X/a6be1fc4b32d9b1ebde93f57a9942b46aad35f2a.png\" alt=\"image\" data-base62-sha1=\"nN4B8TRSwRAY7Ko5nBR3XOSKt7k\" width=\"690\" height=\"367\" data-dominant-color=\"FBFBFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">756×403 10.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "There are many Typst ways... Here is below an approach without a counter, but I think much more expensive, because you query headings in the document.\n\n```typ\n#show outline.entry.where(level: 1): it => context {\n  let i = query(heading.where(level: 1).before(it.element.location())).len()\n  if calc.rem(i, 2) == 1 {\n    str(i) + \"-\" + strong(it)\n  } else {\n    str(i) + \"-\" + it\n  }\n}\n\n= A\n= B\n= C\n= D\n= E\n#outline(depth: 3, indent: auto)\n```\n![image|690x367](upload://nN4B8TRSwRAY7Ko5nBR3XOSKt7k.png)",
      "reply_to_post_number": 2,
      "reply_count": 3,
      "quote_count": 0,
      "like_count": 2,
      "reads": 40,
      "score": 62.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2579,
      "post_number": 4,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-25T13:46:59.678Z",
      "updated_at": "2024-09-25T13:46:59.678Z",
      "cooked": "<p>Thank you! That makes it more readable :)</p>",
      "raw": "Thank you! That makes it more readable :)",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 11.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2580,
      "post_number": 5,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-25T13:48:18.910Z",
      "updated_at": "2024-09-25T13:48:18.910Z",
      "cooked": "<p>I never would have thought of this. Really good to know! Thank you :)</p>",
      "raw": "I never would have thought of this. Really good to know! Thank you :)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 21.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2583,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-25T13:59:13.252Z",
      "updated_at": "2024-09-25T14:02:43.908Z",
      "cooked": "<p>Yeah, that’s great too (more verbose, but doesn’t use a custom counter). I was only thinking by looking at the initial example. But you can slightly improve it:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(paper: \"a5\")\n\n#show outline.entry.where(level: 1): it =&gt; context {\n  let selector = heading.where(level: 1).before(it.element.location())\n  let count = query(selector).len() + 1\n  if calc.even(count) {\n    strong(it)\n  } else {\n    it\n  }\n}\n\n#outline(depth: 3, indent: auto)\n\n= #lorem(6)\n= #lorem(6)\n= #lorem(6)\n= #lorem(6)\n= #lorem(6)\n= #lorem(6)\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/1b4c17e5ea5940c718d99e3f591cb5e81e33ed59.png\" data-download-href=\"https://forum.typst.app/uploads/default/1b4c17e5ea5940c718d99e3f591cb5e81e33ed59\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/1b4c17e5ea5940c718d99e3f591cb5e81e33ed59_2_564x500.png\" alt=\"image\" data-base62-sha1=\"3TtV69O11nX1Gl1ozu94yCIYSIV\" width=\"564\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/1b4c17e5ea5940c718d99e3f591cb5e81e33ed59_2_564x500.png, https://forum.typst.app/uploads/default/original/1X/1b4c17e5ea5940c718d99e3f591cb5e81e33ed59.png 1.5x, https://forum.typst.app/uploads/default/original/1X/1b4c17e5ea5940c718d99e3f591cb5e81e33ed59.png 2x\" data-dominant-color=\"232323\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">826×732 97.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>One small mistake I noticed is that your code makes odd entries bold, not even.</p>",
      "raw": "Yeah, that's great too (more verbose, but doesn't use a custom counter). I was only thinking by looking at the initial example. But you can slightly improve it:\n\n```typ\n#set page(paper: \"a5\")\n\n#show outline.entry.where(level: 1): it => context {\n  let selector = heading.where(level: 1).before(it.element.location())\n  let count = query(selector).len() + 1\n  if calc.even(count) {\n    strong(it)\n  } else {\n    it\n  }\n}\n\n#outline(depth: 3, indent: auto)\n\n= #lorem(6)\n= #lorem(6)\n= #lorem(6)\n= #lorem(6)\n= #lorem(6)\n= #lorem(6)\n```\n\n[details=\"Output\"]\n![image|564x500](upload://3TtV69O11nX1Gl1ozu94yCIYSIV.png)\n[/details]\n\nOne small mistake I noticed is that your code makes odd entries bold, not even.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 30.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2586,
      "post_number": 7,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-25T14:03:29.157Z",
      "updated_at": "2024-09-25T14:03:29.157Z",
      "cooked": "<p>Thanks for clearing it up! I did not notice the bug <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\">. Although, I still think the counter solution is easier to think of, and might be more performant…</p>",
      "raw": "Thanks for clearing it up! I did not notice the bug :smiley:. Although, I still think the counter solution is easier to think of, and might be more performant...",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 25.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2591,
      "post_number": 8,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-09-25T15:02:19.369Z",
      "updated_at": "2024-09-25T15:02:19.369Z",
      "cooked": "<p>Shouldn’t be much more expensive, if at all. This one seems most idiomatic.</p>",
      "raw": "Shouldn't be much more expensive, if at all. This one seems most idiomatic.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 24,
      "score": 44.6,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    }
  ],
  "scraped_at": "2025-06-10T09:58:05.275054"
}
{
  "topic_metadata": {
    "id": 683,
    "title": "How can I remove extra padding above and below block quotations?",
    "slug": "how-can-i-remove-extra-padding-above-and-below-block-quotations",
    "posts_count": 8,
    "created_at": "2024-09-25T15:50:41.897Z",
    "last_posted_at": "2024-10-02T10:17:23.639Z",
    "views": 262,
    "like_count": 3,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 415
  },
  "posts": [
    {
      "id": 2594,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-09-25T15:50:42.236Z",
      "updated_at": "2024-09-25T16:03:28.066Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set quote(\n  block: true,\n)\n\n#show quote: set pad(y: 1em)\n\n#quote([\n  Quote 1. #lorem(25)\n])\n\n#lorem(50)\n\n#quote([\n  Quote 2. #lorem(25)\n])\n\n#lorem(50)\n\n#quote([\n  Quote 3. #lorem(25)\n])\n\n#quote([\n  Quote 4. #lorem(25)\n])\n\n#lorem(50)\n</code></pre>\n<p>How can I remove extra padding above and below block quotations?</p>\n<p>I tried  <code>#show quote: set pad(y: 1em)</code>, but this didn’t help.</p>",
      "raw": "```typ\n#set quote(\n  block: true,\n)\n\n#show quote: set pad(y: 1em)\n\n#quote([\n  Quote 1. #lorem(25)\n])\n\n#lorem(50)\n\n#quote([\n  Quote 2. #lorem(25)\n])\n\n#lorem(50)\n\n#quote([\n  Quote 3. #lorem(25)\n])\n\n#quote([\n  Quote 4. #lorem(25)\n])\n\n#lorem(50)\n```\n\nHow can I remove extra padding above and below block quotations?\n\nI tried  `#show quote: set pad(y: 1em)`, but this didn't help.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 1076.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 2596,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-25T16:06:01.662Z",
      "updated_at": "2024-09-25T16:07:31.611Z",
      "cooked": "<p>As a quote is a block element, you can use a show-set rule to override the above and below spacing values:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show quote: set block(above: 2.4em, below: 1.8em)\n</code></pre>\n<p>These values are the default values that are set internally, so you want to choose something smaller than that. You can also set the <code>spacing</code> property instead to set both the above and below spacing to the same value.</p>",
      "raw": "As a quote is a block element, you can use a show-set rule to override the above and below spacing values:\n\n```typ\n#show quote: set block(above: 2.4em, below: 1.8em)\n```\nThese values are the default values that are set internally, so you want to choose something smaller than that. You can also set the `spacing` property instead to set both the above and below spacing to the same value.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 55.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2598,
      "post_number": 4,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-09-25T16:28:47.496Z",
      "updated_at": "2024-09-25T16:29:22.238Z",
      "cooked": "<p>This works, thanks. But could you explain why using <code>y: &lt;value&gt;</code> instead of <code>above: &lt;value&gt;, below: &lt;value&gt;</code> doesn’t work?</p>\n<p>You said “You <strong>can also</strong> set the <code>spacing</code> property instead to set both the above and below spacing to the same value”. But it seems this is the only option then?</p>",
      "raw": "This works, thanks. But could you explain why using `y: <value>` instead of `above: <value>, below: <value>` doesn't work?\n\nYou said \"You **can also** set the `spacing` property instead to set both the above and below spacing to the same value\". But it seems this is the only option then?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 10.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 2599,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-25T17:03:28.160Z",
      "updated_at": "2024-09-25T17:03:28.160Z",
      "cooked": "<p>Note Eric used <code>set block()</code>, not <code>set pad()</code>. the horizontal padding and vertical spacing are set via properties of different elements. <code>spacing</code> is a shortcut for <code>above</code> and <code>below</code>, separate from <code>pad.y</code>.</p>",
      "raw": "Note Eric used `set block()`, not `set pad()`. the horizontal padding and vertical spacing are set via properties of different elements. `spacing` is a shortcut for `above` and `below`, separate from `pad.y`.",
      "reply_to_post_number": 4,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 29.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2604,
      "post_number": 6,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-09-25T17:51:58.714Z",
      "updated_at": "2024-09-25T17:51:58.714Z",
      "cooked": "<p>Thanks, now I see. (Lorem ipsum dolor sit amet. Post must be at least 20 characters. Not sure this is a good UI idea.)</p>",
      "raw": "Thanks, now I see. (Lorem ipsum dolor sit amet. Post must be at least 20 characters. Not sure this is a good UI idea.)",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 14.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 2624,
      "post_number": 7,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-09-25T21:19:33.186Z",
      "updated_at": "2024-09-25T21:23:14.445Z",
      "cooked": "<p>Could you explain, why</p>\n<ul>\n<li><code>#show quote: set block(above: 1em, below: 1em)</code> and</li>\n<li><code>#show quote: set block(above: 0em, below: 0em)</code></li>\n</ul>\n<p>give different visual outputs, whereas</p>\n<ul>\n<li><code>#show quote: set block(spacing: 1em)</code> and</li>\n<li><code>#show quote: set block(spacing: 0em)</code></li>\n</ul>\n<p>give the same visual output (and which is the same as produced by <code>above: 1em, below: 1em</code>? Which version makes more sense: <code>spacing: 1em</code> or <code>spacing: 0em</code>?</p>",
      "raw": "Could you explain, why\n\n- `#show quote: set block(above: 1em, below: 1em)` and\n- `#show quote: set block(above: 0em, below: 0em)`\n\ngive different visual outputs, whereas\n\n-  `#show quote: set block(spacing: 1em)` and\n-  `#show quote: set block(spacing: 0em)`\n\ngive the same visual output (and which is the same as produced by `above: 1em, below: 1em`? Which version makes more sense: `spacing: 1em` or `spacing: 0em`?",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 19.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 2625,
      "post_number": 8,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-25T21:32:31.164Z",
      "updated_at": "2024-09-25T21:32:31.164Z",
      "cooked": "<p>As far as I know, that has to do with the <code>above</code> and <code>below</code> parameters currently taking priority over the <code>spacing</code> parameter. Normal text paragraphs also have a spacing that is set via the <code>above</code> property. Thus, when a paragraph collides a quote whose spacing is set via the <code>spacing</code> property, the <code>above</code> value of the paragraph wins.</p>\n<p>That is actually an issue with the current Typst version that will be fixed very soon with the release of v0.12.</p>",
      "raw": "As far as I know, that has to do with the `above` and `below` parameters currently taking priority over the `spacing` parameter. Normal text paragraphs also have a spacing that is set via the `above` property. Thus, when a paragraph collides a quote whose spacing is set via the `spacing` property, the `above` value of the paragraph wins.\n\nThat is actually an issue with the current Typst version that will be fixed very soon with the release of v0.12.",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 19.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 3199,
      "post_number": 9,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-02T10:17:23.639Z",
      "updated_at": "2024-10-02T10:18:06.553Z",
      "cooked": "<p>In reply to my own question above:</p>\n<p>One practical difference between <code>above: Xem, below: Xem</code> and <code>spacing: Xem</code> can be seen here: <a href=\"https://forum.typst.app/t/856\" class=\"inline-onebox\">Why 'where(block: true)' doesn't work with 'set block'?</a></p>",
      "raw": "In reply to my own question above:\n\nOne practical difference between `above: Xem, below: Xem` and `spacing: Xem` can be seen here: https://forum.typst.app/t/856",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 13.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    }
  ],
  "scraped_at": "2025-06-10T09:58:04.564591"
}
{
  "topic_metadata": {
    "id": 685,
    "title": "How to add an invisible Heading to an outline?",
    "slug": "how-to-add-an-invisible-heading-to-an-outline",
    "posts_count": 10,
    "created_at": "2024-09-25T17:05:53.547Z",
    "last_posted_at": "2024-09-26T18:43:39.962Z",
    "views": 757,
    "like_count": 8,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 9,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting",
      "outline"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 1136
  },
  "posts": [
    {
      "id": 2600,
      "post_number": 1,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-25T17:05:53.663Z",
      "updated_at": "2024-09-25T17:06:42.230Z",
      "cooked": "<p>Basically I want to insert an invisible “heading” into the outline. The heading should not not effect the rest of the document. I am looking for some sort of heading-label that is only shown in the outline to mark a new section: the appendix.</p>\n<p>The outline should look like this:</p>\n<pre><code class=\"lang-auto\">...\nAppendix                             \n&lt;appendix 1&gt;\n...\n</code></pre>\n<p>Appendix should show the same page as &lt;appendix 1&gt;.</p>\n<p>Do you have an idea how to do this?</p>",
      "raw": "Basically I want to insert an invisible \"heading\" into the outline. The heading should not not effect the rest of the document. I am looking for some sort of heading-label that is only shown in the outline to mark a new section: the appendix.\n\nThe outline should look like this:\n```\n...\nAppendix                             \n<appendix 1>\n...\n```\nAppendix should show the same page as <appendix 1>. \n\nDo you have an idea how to do this?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 80,
      "score": 2861.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2601,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-25T17:16:55.290Z",
      "updated_at": "2024-09-25T21:21:40.901Z",
      "cooked": "<p>You can use a scoped show rule</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">...\n\n#{\n  show heading: none\n  heading(numbering: none)[Appendix]\n}\n\n== &lt;appendix 1&gt;\n</code></pre>\n<p>so that the heading is added to the document tree but not actually shown. As the outline queries for all headings that exist in the document tree, the fact that it’s not actually visible doesn’t matter for the outline entry.</p>\n<p>Note that (if a numbering is set) the heading counter will still be stepped, though you probably want to reset the counter value and update the numbering anyway for the appendix.</p>",
      "raw": "You can use a scoped show rule\n```typ\n...\n\n#{\n  show heading: none\n  heading(numbering: none)[Appendix]\n}\n\n== <appendix 1>\n```\nso that the heading is added to the document tree but not actually shown. As the outline queries for all headings that exist in the document tree, the fact that it's not actually visible doesn't matter for the outline entry.\n\nNote that (if a numbering is set) the heading counter will still be stepped, though you probably want to reset the counter value and update the numbering anyway for the appendix.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 79,
      "score": 85.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2610,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-25T19:24:19.672Z",
      "updated_at": "2024-09-25T19:24:19.672Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Jacobdabozze\" data-post=\"1\" data-topic=\"685\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/j/E95420/48.png\" class=\"avatar\"> Jacobdabozze:</div>\n<blockquote>\n<p>I want to insert an invisible “heading” into the outline.</p>\n</blockquote>\n</aside>\n<p>Why do you want something invisible to be inserted in the outline, which also shouldn’t affect the rest of the document? Do you still need the heading to be seen in the document? Otherwise, just don’t add the heading in the first place.</p>\n<p>As a real example, when I had the same problem, it was because of a complex document structure (nested/bundled documents). Basically I need to insert the headings to then <strong>use them</strong> in a <strong>global-scope outline</strong> (and in the <strong>PDF outline</strong>), but the <strong>headings themselves shouldn’t be visible in the document</strong> (outside the outline), because they serve a semantic purpose instead of a literal one. I fixed it like illustrated <a href=\"https://forum.typst.app/t/how-to-add-an-invisible-heading-to-an-outline/685/2\">here</a>.</p>",
      "raw": "[quote=\"Jacobdabozze, post:1, topic:685\"]\nI want to insert an invisible “heading” into the outline.\n[/quote]\n\nWhy do you want something invisible to be inserted in the outline, which also shouldn't affect the rest of the document? Do you still need the heading to be seen in the document? Otherwise, just don't add the heading in the first place.\n\nAs a real example, when I had the same problem, it was because of a complex document structure (nested/bundled documents). Basically I need to insert the headings to then **use them** in a **global-scope outline** (and in the **PDF outline**), but the **headings themselves shouldn't be visible in the document** (outside the outline), because they serve a semantic purpose instead of a literal one. I fixed it like illustrated [here](https://forum.typst.app/t/how-to-add-an-invisible-heading-to-an-outline/685/2).",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 70,
      "score": 39.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2614,
      "post_number": 4,
      "username": "Blaz",
      "name": "Blaz",
      "created_at": "2024-09-25T19:57:37.932Z",
      "updated_at": "2024-09-25T20:01:53.085Z",
      "cooked": "<p>You can use show rules to customise the outline. In this case I inserted a block with the text “Appendix” right before “Heading 2”:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry.where(body: [Heading 2]): it =&gt; {\n  block(spacing: 0pt)[\n    #link(it.element.location())[Appendix]\n  ]\n  it\n}\n\n#outline(indent: 1em)\n\n= Heading 1\n== Subheading 1\n== Subheading 2\n= Heading 2\n== Subheading 3\n= Heading 3\n== Subheading 4\n</code></pre>\n<p>If the heading name is not unique, you can use labels instead. I’m not sure how to write this one in a cleaner way:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; context {\n  if it.element.location() == locate(&lt;appendix-heading&gt;) {\n    block(spacing: 0pt)[\n      #link(&lt;appendix-heading&gt;)[Appendix]\n    ]\n    it\n  }\n  else {\n    it\n  }\n}\n\n#outline(indent: 1em)\n\n= Heading 1\n== Subheading 1\n== Subheading 2\n= Heading 2 &lt;appendix-heading&gt;\n== Subheading 3\n= Heading 3\n== Subheading 4\n</code></pre>\n<p>It’s a bit verbose of a solution (and it’s not really a heading shown in the outline but an inserted block of text before an entry) but gives you more freedom to customise the appearance of your section marker.</p>",
      "raw": "You can use show rules to customise the outline. In this case I inserted a block with the text \"Appendix\" right before \"Heading 2\":\n\n```typ\n#show outline.entry.where(body: [Heading 2]): it => {\n  block(spacing: 0pt)[\n    #link(it.element.location())[Appendix]\n  ]\n  it\n}\n\n#outline(indent: 1em)\n\n= Heading 1\n== Subheading 1\n== Subheading 2\n= Heading 2\n== Subheading 3\n= Heading 3\n== Subheading 4\n```\n\nIf the heading name is not unique, you can use labels instead. I'm not sure how to write this one in a cleaner way:\n```typ\n#show outline.entry: it => context {\n  if it.element.location() == locate(<appendix-heading>) {\n    block(spacing: 0pt)[\n      #link(<appendix-heading>)[Appendix]\n    ]\n    it\n  }\n  else {\n    it\n  }\n}\n\n#outline(indent: 1em)\n\n= Heading 1\n== Subheading 1\n== Subheading 2\n= Heading 2 <appendix-heading>\n== Subheading 3\n= Heading 3\n== Subheading 4\n```\n\nIt's a bit verbose of a solution (and it's not really a heading shown in the outline but an inserted block of text before an entry) but gives you more freedom to customise the appearance of your section marker.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 62,
      "score": 67.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 98
    },
    {
      "id": 2615,
      "post_number": 5,
      "username": "Blaz",
      "name": "Blaz",
      "created_at": "2024-09-25T20:00:17.781Z",
      "updated_at": "2024-09-25T20:00:17.781Z",
      "cooked": "<p>I think they mean that the heading should be visible in the outline but invisible in the rest of the document, as they mention it should be visible in the outline.</p>",
      "raw": "I think they mean that the heading should be visible in the outline but invisible in the rest of the document, as they mention it should be visible in the outline.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 19.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 98
    },
    {
      "id": 2617,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-25T20:20:03.017Z",
      "updated_at": "2024-09-25T20:20:03.017Z",
      "cooked": "<p>Oh, this would make much more sense.</p>",
      "raw": "Oh, this would make much more sense.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2623,
      "post_number": 7,
      "username": "huz",
      "name": "huz",
      "created_at": "2024-09-25T20:57:18.395Z",
      "updated_at": "2024-09-25T22:11:25.995Z",
      "cooked": "<p>A generic function would be nice to add random content to the outline … for example it would be easy if I could find out how to check <code>it.body</code> for strings (<code>starts-with</code>) (if it is a <code>sequence</code>)?</p>",
      "raw": "A generic function would be nice to add random content to the outline ... for example it would be easy if I could find out how to check `it.body` for strings (`starts-with`) (if it is a `sequence`)?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 14.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 281
    },
    {
      "id": 2633,
      "post_number": 8,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-26T08:58:14.211Z",
      "updated_at": "2024-09-26T09:05:29.575Z",
      "cooked": "<p>First of all, thanks for helping!</p>\n<p>As <a class=\"mention\" href=\"/u/blaz\">@Blaz</a> clarified I was looking for a “Heading” that is visible in the outline but invisible in the rest of the document. Also I didn’t want it to be effected by styling-rules. So basically a label I place somewhere in the document.</p>\n<p><a class=\"mention\" href=\"/u/eric\">@Eric</a> Unfortunately your solution wasn’t what I was looking for because it actually creates a heading.</p>\n<p><a class=\"mention\" href=\"/u/blaz\">@Blaz</a> You lead me into the right direction. My solution is heavily inspired by your examples :)</p>\n<p><br>\nThis is what I came up with. It is kind of hacky but works pretty well:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let APPENDIX = [\n  = A1 (Appendix starts here)\n  #lorem(25)\n  = A2 \n]\n\n#let is_set = counter(\"is_set\") \n#is_set.update(0)\n\n#show outline.entry: it =&gt; context {\n  if is_set.get().at(0) == 0 {\n    let pos_it = it.element.location().position()\n    let pos_appendix = locate(&lt;appendix&gt;).position()\n    let page_diff = pos_it.page - pos_appendix.page\n    \n    if page_diff &gt; 0 or (page_diff == 0 and pos_it.y &gt; pos_appendix.y) {\n      block(link(&lt;appendix&gt;, strong({\n        [Appendix ]\n        box(width: 1fr, repeat[.])\n        counter(page).display()\n      })))\n      is_set.update(1) \n    }\n  }\n  it\n}\n\n#outline()\\\n\n= H1\n#lorem(25)\n= H2\n#lorem(25)\n\n&lt;appendix&gt;\n#APPENDIX\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/652f4194cc057483906f4f7d32e483d4f404c27d.png\" alt=\"image\" data-base62-sha1=\"er7tafa96EjEWwsFHDlZTop5XRj\" width=\"663\" height=\"485\"></p>\n</details>\n<p><br>\nIf you have any ideas on how to improve this, please let me know!</p>",
      "raw": "First of all, thanks for helping!\n\nAs @Blaz clarified I was looking for a \"Heading\" that is visible in the outline but invisible in the rest of the document. Also I didn't want it to be effected by styling-rules. So basically a label I place somewhere in the document.\n\n@Eric Unfortunately your solution wasn't what I was looking for because it actually creates a heading.\n\n@Blaz You lead me into the right direction. My solution is heavily inspired by your examples :) \n\n\\\nThis is what I came up with. It is kind of hacky but works pretty well:\n```typ\n#let APPENDIX = [\n  = A1 (Appendix starts here)\n  #lorem(25)\n  = A2 \n]\n\n#let is_set = counter(\"is_set\") \n#is_set.update(0)\n\n#show outline.entry: it => context {\n  if is_set.get().at(0) == 0 {\n    let pos_it = it.element.location().position()\n    let pos_appendix = locate(<appendix>).position()\n    let page_diff = pos_it.page - pos_appendix.page\n    \n    if page_diff > 0 or (page_diff == 0 and pos_it.y > pos_appendix.y) {\n      block(link(<appendix>, strong({\n        [Appendix ]\n        box(width: 1fr, repeat[.])\n        counter(page).display()\n      })))\n      is_set.update(1) \n    }\n  }\n  it\n}\n\n#outline()\\\n\n= H1\n#lorem(25)\n= H2\n#lorem(25)\n\n<appendix>\n#APPENDIX\n```\n\n[details=\"Output\"]\n![image|663x485](upload://er7tafa96EjEWwsFHDlZTop5XRj.png)\n[/details]\n\n\\\nIf you have any ideas on how to improve this, please let me know!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 45,
      "score": 69.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2665,
      "post_number": 9,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-26T16:39:57.048Z",
      "updated_at": "2024-09-26T19:44:35.245Z",
      "cooked": "<p>By using some of the same optimizations from <a href=\"https://forum.typst.app/t/how-to-mutate-variables-in-a-show-rule/672/2\" class=\"inline-onebox\">How to mutate variables in a show rule? - #2 by Andrew</a>, here is my slightly improved version:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let make-outline-entry(label, body) = {\n  let filler = box(width: 1fr, repeat[.])\n  let content = body + \" \" + filler + counter(page).display()\n  block(link(label, strong(content)))\n}\n\n#show outline.entry: it =&gt; {\n  let label = &lt;appendix&gt;\n  let is-set = state(\"is-set\", false)\n  context if not is-set.get() {\n    let found = query(selector(label).before(it.element.location()))\n    let is-after-appendix = found.len() &gt; 0\n    if is-after-appendix {\n      make-outline-entry(&lt;appendix&gt;)[Appendix]\n      is-set.update(true)\n    }\n  }\n  it\n}\n</code></pre>\n<details>\n<summary>\nThe rest</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#outline()\n\n= H1\n#lorem(25)\n= H2\n#lorem(25)\n\n&lt;appendix&gt;\n= A1 (Appendix starts here)\n#lorem(25)\n= A2\n</code></pre>\n</details>\n<p>I made it more readable/maintainable. Or you can slap everything together to make the code smaller:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; {\n  let label = &lt;appendix&gt;\n  let is-set = state(\"is-set\", false)\n  context if not is-set.get() {\n    let found = query(selector(label).before(it.element.location()))\n    if found.len() &gt; 0 {\n      block(link(label, strong({\n        \"Appendix \"\n        // box(width: 1fr, repeat[.])\n        box(width: 1fr, it.fill)\n        counter(page).display()\n      })))\n      is-set.update(true)\n    }\n  }\n  it\n}\n</code></pre>\n<p>Some things (e.g., using <code>\"\"</code> instead of <code>[]</code> for the name) are pure preference, but most things are the recommended way of writing Typst code (or code in general):</p>\n<ul>\n<li>using descriptive variable/function names;</li>\n<li>using <code>state()</code> over <code>counter()</code> if you don’t need to count natural numbers;</li>\n<li>btw, <code>counter()</code> is initially set to <code>0</code>, so you don’t have to explicitly set it initially unless you need to reset it at some point;</li>\n<li>using <code>query(selector(pivot).before(location)).len() &gt; 0</code> over manually comparing pages/y position;\n<ul>\n<li>there is also <code>.after()</code>;</li>\n<li>sometimes you need to use things like <code>&lt;element&gt;.where()</code> which is already a <code>selector</code>;</li>\n</ul>\n</li>\n<li>the recommended variable/function naming convention is to use kebab case (which is typically easier to type).</li>\n</ul>\n<p>A <em>little bit</em> less “you should do it” things:</p>\n<ul>\n<li>adding aliases for things that need to be used multiple times (i.e., <code>label</code>) to reduce chance of a “desync value” bug (and similar stuff);</li>\n<li>making <code>context</code> scope as small as possible.</li>\n</ul>",
      "raw": "By using some of the same optimizations from https://forum.typst.app/t/how-to-mutate-variables-in-a-show-rule/672/2, here is my slightly improved version:\n\n```typ\n#let make-outline-entry(label, body) = {\n  let filler = box(width: 1fr, repeat[.])\n  let content = body + \" \" + filler + counter(page).display()\n  block(link(label, strong(content)))\n}\n\n#show outline.entry: it => {\n  let label = <appendix>\n  let is-set = state(\"is-set\", false)\n  context if not is-set.get() {\n    let found = query(selector(label).before(it.element.location()))\n    let is-after-appendix = found.len() > 0\n    if is-after-appendix {\n      make-outline-entry(<appendix>)[Appendix]\n      is-set.update(true)\n    }\n  }\n  it\n}\n```\n\n\n[details=\"The rest\"]\n```typ\n#outline()\n\n= H1\n#lorem(25)\n= H2\n#lorem(25)\n\n<appendix>\n= A1 (Appendix starts here)\n#lorem(25)\n= A2\n```\n[/details]\n\n\nI made it more readable/maintainable. Or you can slap everything together to make the code smaller:\n\n```typ\n#show outline.entry: it => {\n  let label = <appendix>\n  let is-set = state(\"is-set\", false)\n  context if not is-set.get() {\n    let found = query(selector(label).before(it.element.location()))\n    if found.len() > 0 {\n      block(link(label, strong({\n        \"Appendix \"\n        // box(width: 1fr, repeat[.])\n        box(width: 1fr, it.fill)\n        counter(page).display()\n      })))\n      is-set.update(true)\n    }\n  }\n  it\n}\n```\n\nSome things (e.g., using `\"\"` instead of `[]` for the name) are pure preference, but most things are the recommended way of writing Typst code (or code in general):\n- using descriptive variable/function names;\n- using `state()` over `counter()` if you don't need to count natural numbers;\n- btw, `counter()` is initially set to `0`, so you don't have to explicitly set it initially unless you need to reset it at some point;\n- using `query(selector(pivot).before(location)).len() > 0` over manually comparing pages/y position;\n  - there is also `.after()`;\n  - sometimes you need to use things like `<element>.where()` which is already a `selector`;\n- the recommended variable/function naming convention is to use kebab case (which is typically easier to type).\n\nA _little bit_ less \"you should do it\" things:\n- adding aliases for things that need to be used multiple times (i.e., `label`) to reduce chance of a \"desync value\" bug (and similar stuff);\n- making `context` scope as small as possible.",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 39,
      "score": 127.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2672,
      "post_number": 10,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-26T18:43:39.962Z",
      "updated_at": "2024-09-26T18:43:39.962Z",
      "cooked": "<p>This is a wonderful addition! Thanks a lot!</p>\n<p>I didn’t know about <code>state</code> - this is very helpful :)</p>",
      "raw": "This is a wonderful addition! Thanks a lot!\n\nI didn't know about ```state``` - this is very helpful :)",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 22.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    }
  ],
  "scraped_at": "2025-06-10T09:58:03.825388"
}
{
  "topic_metadata": {
    "id": 687,
    "title": "How can I define custom colored blocks, e.g. green \"Do\" and red \"Don't\" blocks?",
    "slug": "how-can-i-define-custom-colored-blocks-e-g-green-do-and-red-dont-blocks",
    "posts_count": 5,
    "created_at": "2024-09-25T18:29:37.156Z",
    "last_posted_at": "2024-09-25T20:57:01.404Z",
    "views": 198,
    "like_count": 7,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "xkevio",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 346
  },
  "posts": [
    {
      "id": 2605,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-09-25T18:29:37.309Z",
      "updated_at": "2024-10-02T19:42:05.148Z",
      "cooked": "<p>I have a document with many “do” and “don’t” examples. I want to fill “dos” with green and “donts” with red. How is it possible without specifying color for each block again and again?</p>\n<p>Here is my current attempt (Doesn’t work. Both “do” and “dont” blocks are white.):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// This is for \"do\" and \"don't\" blocks.\n// Not sure it will affect them.\n#set block(\n  inset: 8pt,\n  radius: 4pt,\n)\n\n#let do() = {\n  fill: green\n}\n\n#let dont() = {\n  fill: red\n}\n\n= Heading\n\nBody text.\n\n#do[\n  Do this. This should be green.\n]\n\n#dont[\n  Don't do this. This should be red.\n]\n\nBody text.\n</code></pre>",
      "raw": "I have a document with many \"do\" and \"don't\" examples. I want to fill \"dos\" with green and \"donts\" with red. How is it possible without specifying color for each block again and again?\n\nHere is my current attempt (Doesn't work. Both \"do\" and \"dont\" blocks are white.):\n\n```typ\n// This is for \"do\" and \"don't\" blocks.\n// Not sure it will affect them.\n#set block(\n  inset: 8pt,\n  radius: 4pt,\n)\n\n#let do() = {\n  fill: green\n}\n\n#let dont() = {\n  fill: red\n}\n\n= Heading\n\nBody text.\n\n#do[\n  Do this. This should be green.\n]\n\n#dont[\n  Don't do this. This should be red.\n]\n\nBody text.\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 51,
      "score": 485.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 2607,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-09-25T18:42:29.371Z",
      "updated_at": "2024-09-25T18:42:29.371Z",
      "cooked": "<p>Currently, your <code>#do</code> and <code>#dont</code> functions do not generate <code>block</code>s but rather they just enter code mode and imitate dictionary syntax but not in a valid way. You have to explicitly return a block with the fill applied like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let do = block.with(fill: green)\n\n#do[\n  Do this. This should be green.\n]\n</code></pre>",
      "raw": "Currently, your `#do` and `#dont` functions do not generate `block`s but rather they just enter code mode and imitate dictionary syntax but not in a valid way. You have to explicitly return a block with the fill applied like this:\n\n```typ\n#let do = block.with(fill: green)\n\n#do[\n  Do this. This should be green.\n]\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 49,
      "score": 34.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 2611,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-25T19:27:09.742Z",
      "updated_at": "2024-09-25T19:27:09.742Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"jsx97\" data-post=\"1\" data-topic=\"687\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/j/3DA8FF/48.png\" class=\"avatar\"> jsx97:</div>\n<blockquote>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// This is for \"do\" and \"don't\" blocks.\n// Not sure it will affect them.\n#set block(\n  inset: 8pt,\n  radius: 4pt,\n)\n</code></pre>\n</blockquote>\n</aside>\n<p>It <em>will</em> if functions are defined something like <a href=\"https://forum.typst.app/t/do-and-dont-blocks-green-and-red-fill/687/2\">this</a>.</p>",
      "raw": "[quote=\"jsx97, post:1, topic:687\"]\n```typ\n// This is for \"do\" and \"don't\" blocks.\n// Not sure it will affect them.\n#set block(\n  inset: 8pt,\n  radius: 4pt,\n)\n```\n[/quote]\n\nIt *will* if functions are defined something like [this](https://forum.typst.app/t/do-and-dont-blocks-green-and-red-fill/687/2).",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 47,
      "score": 39.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2621,
      "post_number": 4,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-09-25T20:49:57.450Z",
      "updated_at": "2024-09-25T20:55:04.999Z",
      "cooked": "<p>But then <code>inset</code> and <code>radius</code> affect headings, aren’t they?</p>\n<p>To add <code>inset</code> and <code>radius</code> for “dos” and “donts” only, I currently use this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let do = block.with(fill: green, inset: 8pt, radius: 4pt)\n#let dont = block.with(fill: red, inset: 8pt, radius: 4pt)\n</code></pre>\n<p>But I would prefer to avoid using <code>inset: 8pt, radius: 4pt</code> twice. Maybe there exists something like this?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let [do, dont](inset: 8pt, radius: 4pt)\n#let do = block.with(fill: green)\n#let dont = block.with(fill: red)\n</code></pre>",
      "raw": "But then `inset` and `radius` affect headings, aren't they?\n\nTo add `inset` and `radius` for \"dos\" and \"donts\" only, I currently use this:\n\n```typ\n#let do = block.with(fill: green, inset: 8pt, radius: 4pt)\n#let dont = block.with(fill: red, inset: 8pt, radius: 4pt)\n```\n\nBut I would prefer to avoid using `inset: 8pt, radius: 4pt` twice. Maybe there exists something like this?\n\n```typ\n#let [do, dont](inset: 8pt, radius: 4pt)\n#let do = block.with(fill: green)\n#let dont = block.with(fill: red)\n```",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 18.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 2622,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-25T20:57:01.404Z",
      "updated_at": "2024-09-25T20:57:11.109Z",
      "cooked": "<p><code>with()</code> makes a new function out of a different function by setting some of its parameters, so you can call <code>with()</code> again on its result. That means you can do the following:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let block-template = block.with(inset: 8pt, radius: 4pt)\n\n#let do = block-template.with(fill: green)\n#let dont = block-template.with(fill: red)\n</code></pre>",
      "raw": "`with()` makes a new function out of a different function by setting some of its parameters, so you can call `with()` again on its result. That means you can do the following:\n\n```typ\n#let block-template = block.with(inset: 8pt, radius: 4pt)\n\n#let do = block-template.with(fill: green)\n#let dont = block-template.with(fill: red)\n```",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 5,
      "reads": 43,
      "score": 83.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:58:03.104684"
}
{
  "topic_metadata": {
    "id": 692,
    "title": "How to expand a table's width over the page margins?",
    "slug": "how-to-expand-a-tables-width-over-the-page-margins",
    "posts_count": 10,
    "created_at": "2024-09-26T02:51:33.132Z",
    "last_posted_at": "2025-02-08T17:37:50.373Z",
    "views": 474,
    "like_count": 3,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "tables"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 944
  },
  "posts": [
    {
      "id": 2627,
      "post_number": 1,
      "username": "Akshay_Raj_Gollahall",
      "name": "Akshay Raj Gollahalli",
      "created_at": "2024-09-26T02:51:33.294Z",
      "updated_at": "2024-09-26T20:28:39.040Z",
      "cooked": "<p>I have a margin on the page set to something like - <code>(left: 4cm, bottom: 2cm, top: 2cm, right: 2cm)</code></p>\n<p>How should I increase the width of the table? It looks like this</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/10b2affe401c32fdf69b02c9bc2d7525950c9087.png\" data-download-href=\"https://forum.typst.app/uploads/default/10b2affe401c32fdf69b02c9bc2d7525950c9087\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/10b2affe401c32fdf69b02c9bc2d7525950c9087_2_690x179.png\" alt=\"image\" data-base62-sha1=\"2nItuudNrLo9ywyGWlZGfDTDVzh\" width=\"690\" height=\"179\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/10b2affe401c32fdf69b02c9bc2d7525950c9087_2_690x179.png, https://forum.typst.app/uploads/default/optimized/1X/10b2affe401c32fdf69b02c9bc2d7525950c9087_2_1035x268.png 1.5x, https://forum.typst.app/uploads/default/original/1X/10b2affe401c32fdf69b02c9bc2d7525950c9087.png 2x\" data-dominant-color=\"DFDFDF\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1262×328 68.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>and here is my code</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#figure(\n  box(width: 15fr, table(\n    stroke: none,\n    columns: (auto, 2fr, 2fr, 2fr),\n    align: (left, center, center, center),\n    table.hline(),\n    table.header(\n      [header 1], [header 2], [header 3], [header 4],\n    ),\n    table.hline(),\n    [#lorem(4)],[123456789456123456],[0.123456789456123456], [0.123456789456123456],\n    [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n    [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n    [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n    table.hline(),\n  )),\n  caption: [#lorem(10)],\n)\n</code></pre>\n<p>I tried adding the box but that does nothing</p>\n<p><strong>Update</strong></p>\n<p>I tried <code>block</code> instead of <code>box</code> and set it’s width, but it expands only to the left and not to the center or right</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/db8be8cc6f4f334220f5361d4272cb5b0540c8eb.png\" data-download-href=\"https://forum.typst.app/uploads/default/db8be8cc6f4f334220f5361d4272cb5b0540c8eb\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db8be8cc6f4f334220f5361d4272cb5b0540c8eb_2_690x178.png\" alt=\"image\" data-base62-sha1=\"vkcjRSWKqFtLsfjPnIeXHiTomZt\" width=\"690\" height=\"178\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/db8be8cc6f4f334220f5361d4272cb5b0540c8eb_2_690x178.png, https://forum.typst.app/uploads/default/optimized/1X/db8be8cc6f4f334220f5361d4272cb5b0540c8eb_2_1035x267.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/db8be8cc6f4f334220f5361d4272cb5b0540c8eb_2_1380x356.png 2x\" data-dominant-color=\"F1F1F1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1417×366 65.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<details>\n<summary>\nCode</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#figure(\n  block(width: 60em, table(\n    stroke: none,\n    columns: (auto,) + 3 * (auto,),\n    align: (left, center, center, center),\n    table.hline(),\n    table.header(\n      [header 1], [header 2], [header 3], [header 4],\n    ),\n    table.hline(),\n    [#lorem(4)],[123456789456123456],[0.123456789456123456], [0.123456789456123456],\n    [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n    [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n    [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n    table.hline(),\n  )),\n  caption: [#lorem(10)],\n)\n</code></pre>\n</details>",
      "raw": "I have a margin on the page set to something like - `(left: 4cm, bottom: 2cm, top: 2cm, right: 2cm)`\n\nHow should I increase the width of the table? It looks like this\n\n![image|690x179](upload://2nItuudNrLo9ywyGWlZGfDTDVzh.png)\n\nand here is my code\n\n```typ\n#figure(\n  box(width: 15fr, table(\n    stroke: none,\n    columns: (auto, 2fr, 2fr, 2fr),\n    align: (left, center, center, center),\n    table.hline(),\n    table.header(\n      [header 1], [header 2], [header 3], [header 4],\n    ),\n    table.hline(),\n    [#lorem(4)],[123456789456123456],[0.123456789456123456], [0.123456789456123456],\n    [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n    [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n    [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n    table.hline(),\n  )),\n  caption: [#lorem(10)],\n)\n```\n\nI tried adding the box but that does nothing\n\n**Update**\n\nI tried `block` instead of `box` and set it's width, but it expands only to the left and not to the center or right\n\n![image|690x178](upload://vkcjRSWKqFtLsfjPnIeXHiTomZt.png)\n\n\n[details=\"Code\"]\n```typ\n#figure(\n  block(width: 60em, table(\n    stroke: none,\n    columns: (auto,) + 3 * (auto,),\n    align: (left, center, center, center),\n    table.hline(),\n    table.header(\n      [header 1], [header 2], [header 3], [header 4],\n    ),\n    table.hline(),\n    [#lorem(4)],[123456789456123456],[0.123456789456123456], [0.123456789456123456],\n    [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n    [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n    [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n    table.hline(),\n  )),\n  caption: [#lorem(10)],\n)\n```\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 58,
      "score": 1686.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 106
    },
    {
      "id": 2628,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-09-26T05:37:49.156Z",
      "updated_at": "2024-09-26T05:37:49.156Z",
      "cooked": "<p>Wrapping the <code>table</code> in a call to <code>align</code> achieves this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#figure(\n  block(width: 60em,\n    align(center, //Align starts here\n      table(\n        stroke: none,\n        columns: (auto,) + 3 * (auto,),\n        align: (left, center, center, center),\n        table.hline(),\n        table.header(\n          [header 1], [header 2], [header 3], [header 4],\n        ),\n        table.hline(),\n        [#lorem(4)],[123456789456123456],[0.123456789456123456], [0.123456789456123456],\n        [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n        [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n        [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n        table.hline(),\n      )\n    ) //Align ends here\n  ),\n  caption: [#lorem(10)],\n)\n</code></pre>",
      "raw": "Wrapping the `table` in a call to `align` achieves this:\n\n```typ\n#figure(\n  block(width: 60em,\n    align(center, //Align starts here\n      table(\n        stroke: none,\n        columns: (auto,) + 3 * (auto,),\n        align: (left, center, center, center),\n        table.hline(),\n        table.header(\n          [header 1], [header 2], [header 3], [header 4],\n        ),\n        table.hline(),\n        [#lorem(4)],[123456789456123456],[0.123456789456123456], [0.123456789456123456],\n        [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n        [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n        [#lorem(4)], [0.123456789456123456], [0.123456789456123456], [0.123456789456123456],\n        table.hline(),\n      )\n    ) //Align ends here\n  ),\n  caption: [#lorem(10)],\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 57,
      "score": 161.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 2676,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-26T20:28:06.733Z",
      "updated_at": "2024-09-26T20:28:06.733Z",
      "cooked": "<p>You can use pad with negative lengths to “bypass” the margins:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(margin: (x: 5em))\n\n#lorem(20)\n\n#figure(table(\n  columns: (1fr,) * 4,\n  ..([abcabcabcabc],)*4*3\n), caption: [Short table])\n\n#pad(x: -4em, figure(table(\n  columns: (1fr,) * 4,\n  ..([abcabcabcabc],)*4*3\n), caption: [Long table]))\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/06db433b89e700ddc191a5b8ef543ead48a441dd.png\" data-download-href=\"https://forum.typst.app/uploads/default/06db433b89e700ddc191a5b8ef543ead48a441dd\" title=\"output: 'Long table' displays properly, unlike 'Short table'\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/06db433b89e700ddc191a5b8ef543ead48a441dd_2_654x500.png\" alt=\"output: 'Long table' displays properly, unlike 'Short table'\" data-base62-sha1=\"YEDeCiFA5jqSnGPd69UrWNZTdP\" width=\"654\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/06db433b89e700ddc191a5b8ef543ead48a441dd_2_654x500.png, https://forum.typst.app/uploads/default/optimized/1X/06db433b89e700ddc191a5b8ef543ead48a441dd_2_981x750.png 1.5x, https://forum.typst.app/uploads/default/original/1X/06db433b89e700ddc191a5b8ef543ead48a441dd.png 2x\" data-dominant-color=\"E6E6E6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">output: 'Long table' displays properly, unlike 'Short table'</span><span class=\"informations\">1144×874 192 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "You can use pad with negative lengths to \"bypass\" the margins:\n\n```typ\n#set page(margin: (x: 5em))\n\n#lorem(20)\n\n#figure(table(\n  columns: (1fr,) * 4,\n  ..([abcabcabcabc],)*4*3\n), caption: [Short table])\n\n#pad(x: -4em, figure(table(\n  columns: (1fr,) * 4,\n  ..([abcabcabcabc],)*4*3\n), caption: [Long table]))\n```\n![output: 'Long table' displays properly, unlike 'Short table'|654x500](upload://YEDeCiFA5jqSnGPd69UrWNZTdP.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 74.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 2677,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-26T20:29:48.134Z",
      "updated_at": "2024-09-26T20:29:48.134Z",
      "cooked": "<p>By the way, I’ve updated your post title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Please ensure your title is a Typst question you’d ask to a friend. <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "By the way, I've updated your post title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nPlease ensure your title is a Typst question you'd ask to a friend. :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 33.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 2694,
      "post_number": 5,
      "username": "Akshay_Raj_Gollahall",
      "name": "Akshay Raj Gollahalli",
      "created_at": "2024-09-26T23:57:44.269Z",
      "updated_at": "2024-09-26T23:57:44.269Z",
      "cooked": "<p>I tried doing this, but using pad worked. Thanks for the help</p>",
      "raw": "I tried doing this, but using pad worked. Thanks for the help",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 7.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 106
    },
    {
      "id": 8289,
      "post_number": 6,
      "username": "Evon_Vootlo",
      "name": "Evon Vootlo",
      "created_at": "2025-02-07T01:49:23.629Z",
      "updated_at": "2025-02-07T01:49:23.629Z",
      "cooked": "<p>Is there a nicer way to do this besides using manual padding?  <a class=\"mention\" href=\"/u/gezepi\">@gezepi</a> 's solution looks clean, but it doesn’t work for me:</p>\n<pre><code class=\"lang-auto\">  #figure(\n      align(center,\n          table(\n              table.header([Symbol], [Meaning], [Description], [Shape]),\n              align: horizon,\n              columns: (5em, 10em, 14em, 12em),\n              $f$, [Forward operator], [Mapping from 3D H-density to column density], [$f: bb(R)^3 → bb(R)^3$ (static) \\ $f: bb(R)^4→bb(R)^3$ (dynamic)],\n              $m$, [Model], [Mapping from model parameters to 3D H-density], [$m: bb(R)^* → bb(R)^3$ (static) \\ $m: bb(R)^* → bb(R)^4$ (dynamic)],\n              $bold(c)$, [Model params.], \"Free model variables,\\n usually low-dimensional.\", [$bold(c) ∈ bb(R)^*$ \\ \\* model dependent],\n              $bold(y)$, [Measurements.], \"Column densities measured\\n by instrument\", [$bold(y) ∈ bb(R)^3$],\n          ),\n      ),\n      caption: [Symbols],\n      // FIXME: move to glossary section?\n  )\n\n  An inverse problem is the procedure of determining the causative factors of a set of measurements derived from some observation process.  In exospheric tomography, the factor driving the intensity of column density measurements is the distribution of hydrogen in the regions being observed.  In general, a direct analytic solution to tomography or other inverse problems is not feasible, so numerical approximations and discretization become necessary.  In this chapter, I lay out key concepts of linear inverse problems, detail discretization for approaching tomographic inversion numerically, and introduce notation which will be used later in the manuscript to describe tomographic retrieval algorithms.\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/573c46e3d41367d94650785ad20c5dfceff89cb0.png\" data-download-href=\"https://forum.typst.app/uploads/default/573c46e3d41367d94650785ad20c5dfceff89cb0\" title=\"out\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/573c46e3d41367d94650785ad20c5dfceff89cb0_2_645x500.png\" alt=\"out\" data-base62-sha1=\"crIGjZOaU1NF8qoBf1b0Vx0kego\" width=\"645\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/573c46e3d41367d94650785ad20c5dfceff89cb0_2_645x500.png, https://forum.typst.app/uploads/default/original/2X/5/573c46e3d41367d94650785ad20c5dfceff89cb0.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/573c46e3d41367d94650785ad20c5dfceff89cb0.png 2x\" data-dominant-color=\"EFEFEF\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">out</span><span class=\"informations\">666×516 108 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Is there a nicer way to do this besides using manual padding?  @gezepi 's solution looks clean, but it doesn't work for me:\n\n```\n  #figure(\n      align(center,\n          table(\n              table.header([Symbol], [Meaning], [Description], [Shape]),\n              align: horizon,\n              columns: (5em, 10em, 14em, 12em),\n              $f$, [Forward operator], [Mapping from 3D H-density to column density], [$f: bb(R)^3 → bb(R)^3$ (static) \\ $f: bb(R)^4→bb(R)^3$ (dynamic)],\n              $m$, [Model], [Mapping from model parameters to 3D H-density], [$m: bb(R)^* → bb(R)^3$ (static) \\ $m: bb(R)^* → bb(R)^4$ (dynamic)],\n              $bold(c)$, [Model params.], \"Free model variables,\\n usually low-dimensional.\", [$bold(c) ∈ bb(R)^*$ \\ \\* model dependent],\n              $bold(y)$, [Measurements.], \"Column densities measured\\n by instrument\", [$bold(y) ∈ bb(R)^3$],\n          ),\n      ),\n      caption: [Symbols],\n      // FIXME: move to glossary section?\n  )\n\n  An inverse problem is the procedure of determining the causative factors of a set of measurements derived from some observation process.  In exospheric tomography, the factor driving the intensity of column density measurements is the distribution of hydrogen in the regions being observed.  In general, a direct analytic solution to tomography or other inverse problems is not feasible, so numerical approximations and discretization become necessary.  In this chapter, I lay out key concepts of linear inverse problems, detail discretization for approaching tomographic inversion numerically, and introduce notation which will be used later in the manuscript to describe tomographic retrieval algorithms.\n```\n\n![out|645x500](upload://crIGjZOaU1NF8qoBf1b0Vx0kego.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1151
    },
    {
      "id": 8315,
      "post_number": 7,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-07T08:01:38.249Z",
      "updated_at": "2025-02-07T08:01:38.249Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/evon_vootlo\">@Evon_Vootlo</a><br>\nhave you tried this?</p>\n<aside class=\"quote no-group\" data-username=\"PgBiel\" data-post=\"3\" data-topic=\"692\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/F64C96/48.png\" class=\"avatar\"> PgBiel:</div>\n<blockquote>\n<p>You can use pad with negative lengths to “bypass” the margins:</p>\n</blockquote>\n</aside>",
      "raw": "Hello @Evon_Vootlo \nhave you tried this?\n\n[quote=\"PgBiel, post:3, topic:692\"]\nYou can use pad with negative lengths to “bypass” the margins:\n[/quote]",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 8339,
      "post_number": 8,
      "username": "Evon_Vootlo",
      "name": "Evon Vootlo",
      "created_at": "2025-02-08T02:45:16.373Z",
      "updated_at": "2025-02-08T02:45:16.373Z",
      "cooked": "<p>I have, but I want to avoid manual padding because it has to been changed if the table width changes.</p>",
      "raw": "I have, but I want to avoid manual padding because it has to been changed if the table width changes.",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 29.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1151
    },
    {
      "id": 8343,
      "post_number": 9,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-08T09:46:09.288Z",
      "updated_at": "2025-02-08T09:46:09.288Z",
      "cooked": "<p>Ah indeed! I didn’t understand that, sorry.<br>\nyou can just use a show rule and pad by 50%</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure: f =&gt; {\n  pad(x: -50%, f)\n}\n</code></pre>",
      "raw": "Ah indeed! I didn't understand that, sorry.\nyou can just use a show rule and pad by 50% \n\n```typ\n#show figure: f => {\n  pad(x: -50%, f)\n}\n```",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 8353,
      "post_number": 10,
      "username": "Evon_Vootlo",
      "name": "Evon Vootlo",
      "created_at": "2025-02-08T17:37:50.373Z",
      "updated_at": "2025-02-08T17:38:54.405Z",
      "cooked": "<p>Thanks for the tip!  Here’s the inline version for posterity:</p>\n<pre><code class=\"lang-auto\"> #figure(\n      pad(x: -50%,\n          table(\n              table.header([Symbol], [Meaning], [Description], [Shape]),\n              align: horizon,\n              columns: (5em, 10em, 14em, 12em),\n              $f$, [Forward operator], [Mapping from 3D H-density to column density], [$f: bb(R)^3 → bb(R)^3$ (static) \\ $f: bb(R)^4→bb(R)^3$ (dynamic)],\n              $m$, [Model], [Mapping from model parameters to 3D H-density], [$m: bb(R)^* → bb(R)^3$ (static) \\ $m: bb(R)^* → bb(R)^4$ (dynamic)],\n              $bold(c)$, [Model params.], \"Free model variables,\\n usually low-dimensional.\", [$bold(c) ∈ bb(R)^*$ \\ \\* model dependent],\n              $bold(y)$, [Measurements.], \"Column densities measured\\n by instrument\", [$bold(y) ∈ bb(R)^3$],\n          ),\n      ),\n      caption: [Symbols],\n      // FIXME: move to glossary section?\n  )\n\n  An inverse problem is the procedure of determining the causative factors of a set of measurements derived from some observation process.  In exospheric tomography, the factor driving the intensity of column density measurements is the distribution of hydrogen in the regions being observed.  In general, a direct analytic solution to tomography or other inverse problems is not feasible, so numerical approximations and discretization become necessary.  In this chapter, I lay out key concepts of linear inverse problems, detail discretization for approaching tomographic inversion numerically, and introduce notation which will be used later in the manuscript to describe tomographic retrieval algorithms.\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/5f8b1ea587a16aaa749403d1c9543161b1bb8eb3.png\" data-download-href=\"https://forum.typst.app/uploads/default/5f8b1ea587a16aaa749403d1c9543161b1bb8eb3\" title=\"out\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/5f8b1ea587a16aaa749403d1c9543161b1bb8eb3_2_690x399.png\" alt=\"out\" data-base62-sha1=\"dDdqbkNGF4sgPlLv5Rr9FXlWM4r\" width=\"690\" height=\"399\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/5f8b1ea587a16aaa749403d1c9543161b1bb8eb3_2_690x399.png, https://forum.typst.app/uploads/default/original/2X/5/5f8b1ea587a16aaa749403d1c9543161b1bb8eb3.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/5f8b1ea587a16aaa749403d1c9543161b1bb8eb3.png 2x\" data-dominant-color=\"EEEEEE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">out</span><span class=\"informations\">746×432 90.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Thanks for the tip!  Here's the inline version for posterity:\n\n```\n #figure(\n      pad(x: -50%,\n          table(\n              table.header([Symbol], [Meaning], [Description], [Shape]),\n              align: horizon,\n              columns: (5em, 10em, 14em, 12em),\n              $f$, [Forward operator], [Mapping from 3D H-density to column density], [$f: bb(R)^3 → bb(R)^3$ (static) \\ $f: bb(R)^4→bb(R)^3$ (dynamic)],\n              $m$, [Model], [Mapping from model parameters to 3D H-density], [$m: bb(R)^* → bb(R)^3$ (static) \\ $m: bb(R)^* → bb(R)^4$ (dynamic)],\n              $bold(c)$, [Model params.], \"Free model variables,\\n usually low-dimensional.\", [$bold(c) ∈ bb(R)^*$ \\ \\* model dependent],\n              $bold(y)$, [Measurements.], \"Column densities measured\\n by instrument\", [$bold(y) ∈ bb(R)^3$],\n          ),\n      ),\n      caption: [Symbols],\n      // FIXME: move to glossary section?\n  )\n\n  An inverse problem is the procedure of determining the causative factors of a set of measurements derived from some observation process.  In exospheric tomography, the factor driving the intensity of column density measurements is the distribution of hydrogen in the regions being observed.  In general, a direct analytic solution to tomography or other inverse problems is not feasible, so numerical approximations and discretization become necessary.  In this chapter, I lay out key concepts of linear inverse problems, detail discretization for approaching tomographic inversion numerically, and introduce notation which will be used later in the manuscript to describe tomographic retrieval algorithms.\n```\n\n![out|690x399](upload://dDdqbkNGF4sgPlLv5Rr9FXlWM4r.png)",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 23.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1151
    }
  ],
  "scraped_at": "2025-06-10T09:58:02.406262"
}
{
  "topic_metadata": {
    "id": 694,
    "title": "How to add a space in formula?",
    "slug": "how-to-add-a-space-in-formula",
    "posts_count": 4,
    "created_at": "2024-09-26T09:30:44.896Z",
    "last_posted_at": "2024-09-26T11:14:46.986Z",
    "views": 547,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 122
  },
  "posts": [
    {
      "id": 2635,
      "post_number": 1,
      "username": "InAnYan",
      "name": "Ruslan",
      "created_at": "2024-09-26T09:30:45.169Z",
      "updated_at": "2024-09-26T12:50:12.154Z",
      "cooked": "<p>Such  a simple question, and I can’t find answer to it.</p>\n<p>Using  a backslash introduces a new line, instead of a space</p>",
      "raw": "Such  a simple question, and I can't find answer to it.\n\nUsing  a backslash introduces a new line, instead of a space",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 2635.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 481
    },
    {
      "id": 2639,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-26T10:05:11.224Z",
      "updated_at": "2024-09-26T10:05:11.224Z",
      "cooked": "<p>Hi, thanks for your question! I have moved it to the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category ;)</p>\n<p>There are a couple of kinds of space available, they are listed here: <a href=\"https://typst.app/docs/reference/symbols/sym/?query=space\" class=\"inline-onebox\">General Symbols – Typst Documentation</a></p>\n<p>As the page says:</p>\n<blockquote>\n<p>For example, <code>#sym.arrow</code> produces the → symbol. Within <a href=\"https://typst.app/docs/reference/math/\">formulas</a>, these symbols can be used without the <code>#sym.</code> prefix.</p>\n</blockquote>\n<p>That means you could e.g. write</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ a quad b $\n</code></pre>",
      "raw": "Hi, thanks for your question! I have moved it to the #questions category ;)\n\nThere are a couple of kinds of space available, they are listed here: https://typst.app/docs/reference/symbols/sym/?query=space\n\nAs the page says:\n> For example, `#sym.arrow` produces the → symbol. Within [formulas](https://typst.app/docs/reference/math/), these symbols can be used without the `#sym.` prefix.\n\nThat means you could e.g. write\n```typ\n$ a quad b $\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 51,
      "score": 50.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2650,
      "post_number": 3,
      "username": "InAnYan",
      "name": "Ruslan",
      "created_at": "2024-09-26T11:13:18.157Z",
      "updated_at": "2024-09-26T11:13:18.157Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a>, thank you!</p>",
      "raw": "@SillyFreak, thank you!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 51,
      "score": 25.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 481
    },
    {
      "id": 2651,
      "post_number": 4,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-09-26T11:14:46.986Z",
      "updated_at": "2024-09-26T11:14:46.986Z",
      "cooked": "<p>Instead of editing the title with <code>[ANSWERED]</code>, it’d be nicer if you could just mark <a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a>’s answer as the solution :)</p>",
      "raw": "Instead of editing the title with `[ANSWERED]`, it'd be nicer if you could just mark @SillyFreak's answer as the solution :)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 50,
      "score": 25.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    }
  ],
  "scraped_at": "2025-06-10T09:58:01.674737"
}
