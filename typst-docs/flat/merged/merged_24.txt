{
  "topic_metadata": {
    "id": 3143,
    "title": "How to upgrade an in-list `show par: set align(start)` to typst 0.13?",
    "slug": "how-to-upgrade-an-in-list-show-par-set-align-start-to-typst-0-13",
    "posts_count": 4,
    "created_at": "2025-03-07T15:12:28.987Z",
    "last_posted_at": "2025-03-08T04:55:48.436Z",
    "views": 43,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "layout",
      "alignment",
      "v0-13"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 302
  },
  "posts": [
    {
      "id": 9471,
      "post_number": 1,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2025-03-07T15:12:29.135Z",
      "updated_at": "2025-03-07T15:36:12.247Z",
      "cooked": "<p><img src=\"https://forum.typst.app/uploads/default/original/2X/2/2e1def4799e055a7bda75d9593c608957a9a80f4.png\" alt=\"图片\" data-base62-sha1=\"6zY66hV31AzlvjNw6iDFIZm6ov2\" width=\"635\" height=\"158\"></p>\n<p>I want to move a small list to the center, but keep its items next to their bullet points, as shown in the above image.</p>\n<p>In typst 0.12.0, the following works.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#[\n  #show list: set align(center)\n  #show par: set align(start)\n\n  - #lorem(5)\n  - #lorem(2)\n]\n\n#lorem(20)\n</code></pre>\n<p>However in typst 0.13.0/0.13.1, <code>show par: set align(start)</code> makes no difference:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/a/a0444adb43dab462587c09051e91a2133385da69.png\" alt=\"图片\" data-base62-sha1=\"mRMI5oFu7nl3HImEAeEMCL5Pr6N\" width=\"601\" height=\"134\"></p>\n<p>Typst v0.13.0 introduced <a href=\"https://typst.app/docs/changelog/0.13.0/#model\">the distinction between <em>proper paragraphs</em> and just <em>inline-level content</em></a>. I guess that’s the cause.</p>\n<p>Therefore, I try to replace <code>par</code> with <code>list.item</code>, but it also moves the bullet points, which is not desired either:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/78d846584d3fccb917d311ae6a28a91d5c24bc47.png\" alt=\"图片\" data-base62-sha1=\"hf2F6JOZPe0wQn4i8pz9tzQPH2n\" width=\"586\" height=\"142\"></p>\n<p>Then how to restore the original layout in typst 0.13?<br>\nExplanation and partial solutions are also welcome. Thanks in advance!</p>",
      "raw": "![图片|635x158](upload://6zY66hV31AzlvjNw6iDFIZm6ov2.png)\n\nI want to move a small list to the center, but keep its items next to their bullet points, as shown in the above image.\n\nIn typst 0.12.0, the following works.\n\n```typst\n#[\n  #show list: set align(center)\n  #show par: set align(start)\n\n  - #lorem(5)\n  - #lorem(2)\n]\n\n#lorem(20)\n```\n\nHowever in typst 0.13.0/0.13.1, `show par: set align(start)` makes no difference:\n\n![图片|601x134](upload://mRMI5oFu7nl3HImEAeEMCL5Pr6N.png)\n\nTypst v0.13.0 introduced [the distinction between *proper paragraphs* and just *inline-level content*](https://typst.app/docs/changelog/0.13.0/#model). I guess that's the cause.\n\nTherefore, I try to replace `par` with `list.item`, but it also moves the bullet points, which is not desired either:\n\n![图片|586x142](upload://hf2F6JOZPe0wQn4i8pz9tzQPH2n.png)\n\nThen how to restore the original layout in typst 0.13?\nExplanation and partial solutions are also welcome. Thanks in advance!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 35.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 9474,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-03-07T15:35:45.885Z",
      "updated_at": "2025-03-07T15:36:10.458Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/y.d.x\">@Y.D.X</a>,</p>\n<p>this behavior is a <a href=\"https://github.com/typst/typst/issues/3605\">bug #3605</a>, a workaround was mentioned in <a href=\"https://github.com/typst/typst/issues/3815\">#3815</a>.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#[\n  #show list: it =&gt; align(center, block(align(start, it)))\n\n  - #lorem(5)\n  - #lorem(2)\n]\n</code></pre>",
      "raw": "Hi @Y.D.X,\n\nthis behavior is a [bug #3605](https://github.com/typst/typst/issues/3605), a workaround was mentioned in [#3815](https://github.com/typst/typst/issues/3815).\n\n```typst\n#[\n  #show list: it => align(center, block(align(start, it)))\n\n  - #lorem(5)\n  - #lorem(2)\n]\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 9.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9475,
      "post_number": 3,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2025-03-07T15:40:05.396Z",
      "updated_at": "2025-03-07T15:40:05.396Z",
      "cooked": "<p>Thank you!<br>\nIt’s weird that the issue was created before typst v0.13.</p>",
      "raw": "Thank you!\nIt's weird that the issue was created before typst v0.13.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 9488,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-08T04:55:48.436Z",
      "updated_at": "2025-03-08T04:55:48.436Z",
      "cooked": "<p>I’m not sure if I’d call it a bug, it has always behaved this way. It’s more of an undesirable behavior at times.</p>\n<p>It’s also worth noting that you were using a similar trick but using <code>par</code> inside each item’s <strong>body</strong> (not the items themselves) instead of <code>block</code>, basically. That’s why it doesn’t work now (the list item bodies no longer are paragraphs unless you add parbreaks), and also why <code>show list.item</code> is undesirable as it applies to each bullet point + body.</p>",
      "raw": "I'm not sure if I'd call it a bug, it has always behaved this way. It's more of an undesirable behavior at times.\n\nIt's also worth noting that you were using a similar trick but using `par` inside each item's **body** (not the items themselves) instead of `block`, basically. That's why it doesn't work now (the list item bodies no longer are paragraphs unless you add parbreaks), and also why `show list.item` is undesirable as it applies to each bullet point + body.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 3.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:50:36.527970"
}
{
  "topic_metadata": {
    "id": 3144,
    "title": "How to use variables in eval, when variables are defined in another document?",
    "slug": "how-to-use-variables-in-eval-when-variables-are-defined-in-another-document",
    "posts_count": 6,
    "created_at": "2025-03-07T15:23:43.507Z",
    "last_posted_at": "2025-03-09T14:53:25.548Z",
    "views": 95,
    "like_count": 2,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "aarnent",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 533
  },
  "posts": [
    {
      "id": 9472,
      "post_number": 1,
      "username": "Mikael",
      "name": "Mikaël",
      "created_at": "2025-03-07T15:23:43.607Z",
      "updated_at": "2025-03-08T20:27:26.509Z",
      "cooked": "<p>Hi,</p>\n<p>I want to create a document where the content will be stored in YAML files. However the YAML file may contain variables that should be defined in the main Typst file.</p>\n<p>Here is an example of Typst file:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let content = yaml(\"content.yaml\")\n#let stuff = \"Stuff\"\n\n#eval(content.content, mode: \"markup\")\n</code></pre>\n<p>And the <code>content.yaml</code> file:</p>\n<pre data-code-wrap=\"yaml\"><code class=\"lang-yaml\">content: |\n  It _appears_ that the #stuff matters.\n</code></pre>\n<p>When compiling, I get this error:</p>\n<pre><code class=\"lang-auto\">error: unknown variable: stuff\n  ┌─ test.typ:4:6\n  │\n4 │ #eval(content.content, mode: \"markup\")\n  │       ^^^^^^^^^^^^^^^\n</code></pre>\n<p>So, <code>#stuff</code> is correctly identified as a variable, but the issue is that the eval function seems not to take into account the calling environment.</p>\n<p>In order to fix this, I need to provide a <code>scope</code> parameter to the <code>eval</code> function, such as:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#eval(content.content, mode: \"markup\", scope: (stuff: stuff))\n</code></pre>\n<p>However my framework is slightly more complicated in practice and the <code>eval</code> function is called in a package that should not know the variables that are defined in the main document (and the package shouldn’t even know about the main document). Therefore, how to achieve the same behaviour, with the constraint that we cannot ask the package to load variables from the main document?</p>\n<p>Thanks!</p>",
      "raw": "Hi,\n\nI want to create a document where the content will be stored in YAML files. However the YAML file may contain variables that should be defined in the main Typst file.\n\nHere is an example of Typst file:\n```typ\n#let content = yaml(\"content.yaml\")\n#let stuff = \"Stuff\"\n\n#eval(content.content, mode: \"markup\")\n```\n\nAnd the `content.yaml` file:\n```yaml\ncontent: |\n  It _appears_ that the #stuff matters.\n```\n\nWhen compiling, I get this error:\n```\nerror: unknown variable: stuff\n  ┌─ test.typ:4:6\n  │\n4 │ #eval(content.content, mode: \"markup\")\n  │       ^^^^^^^^^^^^^^^\n```\n\nSo, `#stuff` is correctly identified as a variable, but the issue is that the eval function seems not to take into account the calling environment.\n\nIn order to fix this, I need to provide a `scope` parameter to the `eval` function, such as:\n```typ\n#eval(content.content, mode: \"markup\", scope: (stuff: stuff))\n```\n\nHowever my framework is slightly more complicated in practice and the `eval` function is called in a package that should not know the variables that are defined in the main document (and the package shouldn't even know about the main document). Therefore, how to achieve the same behaviour, with the constraint that we cannot ask the package to load variables from the main document?\n\nThanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 125.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1314
    },
    {
      "id": 9482,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-03-07T22:01:02.547Z",
      "updated_at": "2025-03-07T22:01:02.547Z",
      "cooked": "<p>The reason for <code>eval</code> not being able to access arbitrary variables is because (AFAIK) security reasons.</p>\n<p>But if I understand your question correctly, you are calling <code>eval</code> inside a package which is itself inside main? If so, you can just define the <code>scope</code> (a dictionary) in main, and pass that to the package (which would then pass it to <code>eval</code>)</p>",
      "raw": "The reason for `eval` not being able to access arbitrary variables is because (AFAIK) security reasons. \n\nBut if I understand your question correctly, you are calling `eval` inside a package which is itself inside main? If so, you can just define the `scope` (a dictionary) in main, and pass that to the package (which would then pass it to `eval`)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 5.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9493,
      "post_number": 3,
      "username": "Mikael",
      "name": "Mikaël",
      "created_at": "2025-03-08T11:06:53.017Z",
      "updated_at": "2025-03-08T11:06:53.017Z",
      "cooked": "<p>Thanks for your reply! And sorry, I didn’t make that clear.</p>\n<p>Let’s assume I have three files:</p>\n<ol>\n<li>the main file: <code>main.typ</code></li>\n<li>a package: <code>mypackage.typ</code></li>\n<li>a YAML file with the content: <code>content.yaml</code></li>\n</ol>\n<p>The content of <code>main.typ</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"./mypackage.typ\": *\n#let content = yaml(\"content.yaml\")\n#let stuff = \"Stuff\"\n\n#display(content)\n</code></pre>\n<p>The content of <code>mypackage.typ</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let display(content) = {\n    eval(content.content, mode: \"markup\")\n}\n</code></pre>\n<p>And the content of <code>content.yaml</code>:</p>\n<pre data-code-wrap=\"yaml\"><code class=\"lang-yaml\">content: |\n  It appears that #stuff matters\n</code></pre>\n<p>So, indeed I would like to pass all the variables/functions to <code>mypackage</code> but the problem is that I don’t know how to pass the dictionary of the scope to <code>mypackage.typ</code>.</p>\n<p>Thanks again!</p>",
      "raw": "Thanks for your reply! And sorry, I didn't make that clear.\n\nLet's assume I have three files:\n1. the main file: `main.typ`\n2. a package: `mypackage.typ`\n3. a YAML file with the content: `content.yaml`\n\nThe content of `main.typ`:\n\n```typ\n#import \"./mypackage.typ\": *\n#let content = yaml(\"content.yaml\")\n#let stuff = \"Stuff\"\n\n#display(content)\n```\n\nThe content of `mypackage.typ`:\n```typ\n#let display(content) = {\n    eval(content.content, mode: \"markup\")\n}\n```\n\nAnd the content of `content.yaml`:\n```yaml\ncontent: |\n  It appears that #stuff matters\n```\n\nSo, indeed I would like to pass all the variables/functions to `mypackage` but the problem is that I don't know how to pass the dictionary of the scope to `mypackage.typ`.\n\nThanks again!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1314
    },
    {
      "id": 9498,
      "post_number": 4,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-03-08T14:52:33.868Z",
      "updated_at": "2025-03-08T14:52:33.868Z",
      "cooked": "<p>Would something like this work for you?</p>\n<p><code>main.typ</code>:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"./mypackage.typ\": *\n#let content = yaml(\"content.yaml\")\n#let stuff = \"Stuff\"\n\n#let scopedict = (\n  stuff: stuff,\n)\n\n#display(content, scopedict)\n</code></pre>\n<p><code>mypackage.typ</code>:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let display(content, scope) = {\n    eval(content.content, mode: \"markup\", scope: scope)\n}\n</code></pre>\n<p>With <code>content.yaml</code> being defined as before. If you’re seeking a way to maintain the scope dictionary automatically, you’ll have to program your own external tools</p>",
      "raw": "Would something like this work for you?\n\n`main.typ`:\n```typst\n#import \"./mypackage.typ\": *\n#let content = yaml(\"content.yaml\")\n#let stuff = \"Stuff\"\n\n#let scopedict = (\n  stuff: stuff,\n)\n\n#display(content, scopedict)\n```\n\n`mypackage.typ`:\n```typst\n#let display(content, scope) = {\n    eval(content.content, mode: \"markup\", scope: scope)\n}\n```\n\nWith `content.yaml` being defined as before. If you're seeking a way to maintain the scope dictionary automatically, you'll have to program your own external tools",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 24.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9511,
      "post_number": 5,
      "username": "Mikael",
      "name": "Mikaël",
      "created_at": "2025-03-09T07:49:36.523Z",
      "updated_at": "2025-03-09T07:49:36.523Z",
      "cooked": "<p>Thanks! Is there a way to include all the variables from the scope, without explicitly adding them to the dictionary?</p>\n<p>Something similar to</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"imports.typ\" as imported\n#let scopedict = dictionary(imported)\n</code></pre>\n<p>but instead of <code>imports.typ</code> it would only import what is declared so far in the current document? Otherwise, I would move my variable declarations in another file.</p>\n<p>Thanks again!</p>",
      "raw": "Thanks! Is there a way to include all the variables from the scope, without explicitly adding them to the dictionary?\n\nSomething similar to \n```typst\n#import \"imports.typ\" as imported\n#let scopedict = dictionary(imported)\n```\nbut instead of `imports.typ` it would only import what is declared so far in the current document? Otherwise, I would move my variable declarations in another file.\n\nThanks again!",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1314
    },
    {
      "id": 9522,
      "post_number": 6,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-03-09T14:53:25.548Z",
      "updated_at": "2025-03-09T14:53:25.548Z",
      "cooked": "<p>Sadly, I don’t think there’s currently a way of finding all variables in scope</p>",
      "raw": "Sadly, I don't think there's currently a way of finding all variables in scope",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 15,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    }
  ],
  "scraped_at": "2025-06-10T09:50:35.627733"
}
{
  "topic_metadata": {
    "id": 3145,
    "title": "Why a set-if rule requires `context`, but only outside a show-rule function?",
    "slug": "why-a-set-if-rule-requires-context-but-only-outside-a-show-rule-function",
    "posts_count": 4,
    "created_at": "2025-03-07T15:32:05.344Z",
    "last_posted_at": "2025-03-08T06:46:33.202Z",
    "views": 102,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "aarnent",
    "tags": [
      "styling",
      "syntax",
      "context"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 325
  },
  "posts": [
    {
      "id": 9473,
      "post_number": 1,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2025-03-07T15:32:05.737Z",
      "updated_at": "2025-03-07T15:42:27.144Z",
      "cooked": "<p>Accessing <code>text.lang</code>  requires <code>context</code>. The following three <a href=\"https://typst.app/docs/reference/styling/#set-rules\">set-if rules</a> have conditions depending on it.</p>\n<ol>\n<li>The first one is a bare set-if rule.</li>\n<li>The second one is composed into a show-set rule.</li>\n<li>The third one is wrapped into the function of a show rule.</li>\n</ol>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">// ❌: Can only be used when context is known\n#set text(font: \"Libertinus Sans\") if text.lang == \"en\"\n\n// ❌: Can only be used when context is known\n#show \"Why\": set text(font: \"Libertinus Sans\") if text.lang == \"en\"\n\n// ✅\n#show \"Why\": it =&gt; {\n  set text(font: \"Libertinus Sans\") if text.lang == \"en\"\n  it\n}\n</code></pre>\n<p>Surprisingly, the third one compiles but the first two do not. Why?</p>",
      "raw": "Accessing `text.lang`  requires `context`. The following three [set-if rules](https://typst.app/docs/reference/styling/#set-rules) have conditions depending on it.\n\n1. The first one is a bare set-if rule.\n2. The second one is composed into a show-set rule.\n3. The third one is wrapped into the function of a show rule.\n\n```typst\n// ❌: Can only be used when context is known\n#set text(font: \"Libertinus Sans\") if text.lang == \"en\"\n\n// ❌: Can only be used when context is known\n#show \"Why\": set text(font: \"Libertinus Sans\") if text.lang == \"en\"\n\n// ✅\n#show \"Why\": it => {\n  set text(font: \"Libertinus Sans\") if text.lang == \"en\"\n  it\n}\n```\n\nSurprisingly, the third one compiles but the first two do not. Why?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 161.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 9483,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-03-07T22:22:27.890Z",
      "updated_at": "2025-03-07T22:22:27.890Z",
      "cooked": "<p>It’s kind of hidden, but the <a href=\"https://typst.app/docs/reference/context/\">docs state</a>:</p>\n<blockquote>\n<p>Aside from explicit context expressions, context is also established implicitly in some places that are also aware of their location in the document: <a href=\"https://typst.app/docs/reference/styling/#show-rules\">Show rules</a> provide context<a href=\"https://typst.app/docs/reference/context/#1a%3C\">1</a> and numberings in the outline, for instance, also provide the proper context to resolve counters.<br>\n1: Currently, all show rules provide styling context, but only show rules on <a href=\"https://typst.app/docs/reference/introspection/location/#locatable\">locatable</a> elements provide a location context</p>\n</blockquote>",
      "raw": "It's kind of hidden, but the [docs state](https://typst.app/docs/reference/context/):\n\n> Aside from explicit context expressions, context is also established implicitly in some places that are also aware of their location in the document: [Show rules](https://typst.app/docs/reference/styling/#show-rules) provide context[1](https://typst.app/docs/reference/context/#1a<) and numberings in the outline, for instance, also provide the proper context to resolve counters.\n1: Currently, all show rules provide styling context, but only show rules on [locatable](https://typst.app/docs/reference/introspection/location/#locatable) elements provide a location context",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 28,
      "score": 70.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9489,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-08T04:57:26.513Z",
      "updated_at": "2025-03-08T04:58:00.283Z",
      "cooked": "<p>Here’s one way to provide the context, by wrapping the rest of the document in a context block:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show: doc =&gt; context {\n  set text(font: \"Libertinus Sans\") if text.lang == \"en\"\n  show \"Why\": set text(font: \"Libertinus Sans\") if text.lang == \"en\"\n  doc\n}\n</code></pre>\n<p>This could also be used inside a template function, for example.</p>",
      "raw": "Here's one way to provide the context, by wrapping the rest of the document in a context block:\n\n```typ\n#show: doc => context {\n  set text(font: \"Libertinus Sans\") if text.lang == \"en\"\n  show \"Why\": set text(font: \"Libertinus Sans\") if text.lang == \"en\"\n  doc\n}\n```\n\nThis could also be used inside a template function, for example.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 9490,
      "post_number": 4,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2025-03-08T06:46:33.202Z",
      "updated_at": "2025-03-08T06:50:10.780Z",
      "cooked": "<p>Thanks for providing a workaround. Actually, I ended up with a new function.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let en = text.with(lang: \"en\", font: \"Libertinus Serif\")\n\n#set text(lang: \"zh\", font: \"Noto Serif CJK SC\")\n\n国“Why quote”国\n\n国#en[“Why ‘quote’”]国\n\n国“Why ‘quote’”国\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/7dbc85179f32a57d4693e1f0d29d5e70742d1dd5.png\" alt=\"图片\" data-base62-sha1=\"hWjAjReEFcYfT9efKnBRL5E8a7r\" width=\"611\" height=\"289\"></p>",
      "raw": "Thanks for providing a workaround. Actually, I ended up with a new function.\n\n```typst\n#let en = text.with(lang: \"en\", font: \"Libertinus Serif\")\n\n#set text(lang: \"zh\", font: \"Noto Serif CJK SC\")\n\n国“Why quote”国\n\n国#en[“Why ‘quote’”]国\n\n国“Why ‘quote’”国\n```\n\n![图片|611x289](upload://hWjAjReEFcYfT9efKnBRL5E8a7r.png)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    }
  ],
  "scraped_at": "2025-06-10T09:50:34.915941"
}
{
  "topic_metadata": {
    "id": 3156,
    "title": "How can I write chemical equations with oxidation numbers?",
    "slug": "how-can-i-write-chemical-equations-with-oxidation-numbers",
    "posts_count": 4,
    "created_at": "2025-03-09T15:23:37.955Z",
    "last_posted_at": "2025-03-10T14:11:56.865Z",
    "views": 107,
    "like_count": 4,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 719
  },
  "posts": [
    {
      "id": 9524,
      "post_number": 1,
      "username": "Tobias1",
      "name": "Tobias",
      "created_at": "2025-03-09T15:23:38.081Z",
      "updated_at": "2025-03-09T18:39:58.910Z",
      "cooked": "<p>I’m trying to write a simple chemical equation with oxidation numbers. In latex I managed to get it to work by using the <code>overset</code> function. Although this was not the ideal solution it did get the job done without having to install a package.</p>\n<p>Here is what I typed in latex:</p>\n<pre><code class=\"lang-auto\">$\\overset{\\rm 0}{Zn} + 2\\overset{\\rm I}{Na} \\overset{\\rm -II}{O} \\overset{\\rm I}{H} \\longrightarrow \\overset{\\rm I}{Na_2} \\overset{\\rm II}{Zn} \\overset{\\rm -II}{O_2} + \\overset{\\rm 0}{H_2}$\n</code></pre>\n<p>And here is what I did so far in typst:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">$ \\Zn + 2\\Na \\O \\H --&gt; \\Na_2 \\Zn \\O_2 + \\H_2$\n</code></pre>\n<p>What I hoped to achieve was something like this:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/9/9c17a96739f2e804e4dccb99722e9d370a56ef29.png\" alt=\"image\" data-base62-sha1=\"mgRbbw6NT4AhWh5hvpf4jxlQgvn\" width=\"409\" height=\"73\"></p>\n<p>Does anyone know how to recreate this? I also thought about creating a feature request on GitHub but wanted to consult the community first.</p>",
      "raw": "I'm trying to write a simple chemical equation with oxidation numbers. In latex I managed to get it to work by using the `overset` function. Although this was not the ideal solution it did get the job done without having to install a package.\n\nHere is what I typed in latex:\n```\n$\\overset{\\rm 0}{Zn} + 2\\overset{\\rm I}{Na} \\overset{\\rm -II}{O} \\overset{\\rm I}{H} \\longrightarrow \\overset{\\rm I}{Na_2} \\overset{\\rm II}{Zn} \\overset{\\rm -II}{O_2} + \\overset{\\rm 0}{H_2}$\n```\n\nAnd here is what I did so far in typst:\n\n```typst\n$ \\Zn + 2\\Na \\O \\H --> \\Na_2 \\Zn \\O_2 + \\H_2$\n```\n\nWhat I hoped to achieve was something like this:\n![image|409x73](upload://mgRbbw6NT4AhWh5hvpf4jxlQgvn.png)\n\nDoes anyone know how to recreate this? I also thought about creating a feature request on GitHub but wanted to consult the community first.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 236.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1317
    },
    {
      "id": 9527,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-09T15:52:47.375Z",
      "updated_at": "2025-03-09T16:31:34.039Z",
      "cooked": "<p>You can use <a href=\"https://typst.app/docs/reference/math/attach\"><code>math.attach()</code></a> to write the oxidation numbers on top of the elements. Two comments to explain the code below:</p>\n<ul>\n<li>Wrapping the base in <code>math.limits()</code> is required to force the attachment to actually be on top. Otherwise the attachments would be formatted like an exponent.</li>\n<li>You can use strings in math mode to get regular (upright) text. As far as I know the chemical elements should be formatted upright?</li>\n</ul>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let ox(base, attachement) = {\n  math.attach(math.limits(base), t: math.upright(attachement))\n}\n\n$ ox(\"Zn\", 0) + 2 ox(\"Na\", I) ox(\"O\", -\"II\") ox(\"H\", I) -&gt; ox(\"Na\"_2, I) ox(\"Zn\", \"II\") ox(\"O\"_2, -\"II\") + ox(\"H\"_2, 0) $\n</code></pre>\n<p>There are also two chemistry packages (that I know of) available in the Typst universe, namely <a href=\"https://typst.app/universe/package/whalogen\">whalogen</a> and <a href=\"https://typst.app/universe/package/typsium\">typsium</a>. The whalogen manual even mentions oxidation states but they are formatted as exponents there. I don’t know if there is an easy way to modify this.</p>\n<p>In any case I would recommend you to check out those packages if you are writing chemical formulas. The features you need might already be implemented there.</p>",
      "raw": "You can use [`math.attach()`](https://typst.app/docs/reference/math/attach) to write the oxidation numbers on top of the elements. Two comments to explain the code below: \n- Wrapping the base in `math.limits()` is required to force the attachment to actually be on top. Otherwise the attachments would be formatted like an exponent.\n- You can use strings in math mode to get regular (upright) text. As far as I know the chemical elements should be formatted upright?\n\n```typ\n#let ox(base, attachement) = {\n  math.attach(math.limits(base), t: math.upright(attachement))\n}\n\n$ ox(\"Zn\", 0) + 2 ox(\"Na\", I) ox(\"O\", -\"II\") ox(\"H\", I) -> ox(\"Na\"_2, I) ox(\"Zn\", \"II\") ox(\"O\"_2, -\"II\") + ox(\"H\"_2, 0) $\n```\n\nThere are also two chemistry packages (that I know of) available in the Typst universe, namely [whalogen](https://typst.app/universe/package/whalogen) and [typsium](https://typst.app/universe/package/typsium). The whalogen manual even mentions oxidation states but they are formatted as exponents there. I don't know if there is an easy way to modify this.\n\nIn any case I would recommend you to check out those packages if you are writing chemical formulas. The features you need might already be implemented there.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 32,
      "score": 41.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 9553,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-10T07:35:42.760Z",
      "updated_at": "2025-03-10T07:35:42.760Z",
      "cooked": "<p>As a comment, there is a call for a Typst Chemistry Community <a href=\"https://forum.typst.app/t/typsium-typst-for-chemistry/3067\" class=\"inline-onebox\">Typsium - Typst for chemistry</a>.</p>",
      "raw": "As a comment, there is a call for a Typst Chemistry Community https://forum.typst.app/t/typsium-typst-for-chemistry/3067.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 19.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9572,
      "post_number": 4,
      "username": "Ants_Aare_Alamaa",
      "name": "Ants Aare Alamaa",
      "created_at": "2025-03-10T14:11:56.865Z",
      "updated_at": "2025-03-10T14:11:56.865Z",
      "cooked": "<p>Hey Tobias!<br>\nI’m one of the core maintainers of both the Typsium Organisation and wrote the Oxidation number support for Whalogen.<br>\nAs <a class=\"mention\" href=\"/u/janekfleper\">@janekfleper</a> mentioned the attach method would work just fine, even without needing any packages, but if you’re doing lots of chemistry stuff I’d definitely recommend using<a href=\"https://typst.app/universe/package/whalogen\">Whalogen</a> for now as it’s most stable. I just recently added oxidation number support to it and you can get the newest package from the github (it may take a bit until the newest version is on typst universe, so just get the newest version here: <a href=\"https://github.com/schang412/typst-whalogen\" rel=\"noopener nofollow ugc\">Whalogen Github</a>).</p>\n<p>The main method is <span class=\"hashtag-raw\">#ce</span> (chemical equation)<br>\nIf you wrap your element in vertical bars | and a comma. Anything that’s after the comma but still inside the bars will be placed ontop.</p>\n<pre><code class=\"lang-auto\">#ce(\"H2O\") &lt;-normal H2O with proper formatting\n#ce(\"|H2,+I| |O, -II|\")&lt;- H2 with oxidation state of +I on top of it and O with -II\n</code></pre>\n<p>We understand that this is not perfect syntax and are currently working on a bigger more wholistic approach to writing chemistry in typst. As <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> mentioned we have a small but great chemistry package developer community working on multiple packages that will work together and are more aware of the meaning of the written symbols. We’ve actually been talking about adding an oxidation number calculator into the rendering package similar to how these online calculators do it: <a href=\"https://www.chemicalaid.com/tools/oxidationnumber.php?hl=en\" rel=\"noopener nofollow ugc\">Oxidation Number Calculator</a><br>\nBut right now there’s bigger fish to fry and we’re not sure if it’s worth the effort right now.<br>\nThe typsium package is currently still work in progress and not as stable as whalogen, but long term we’re planning to make Typsium the main formula rendering package. The Whalogen core maintainer just recently joined us, so things are going really well! If anyone is interested, we are actively working on things and could use any help, wether experienced in chemistry or not!</p>",
      "raw": "Hey Tobias!\nI'm one of the core maintainers of both the Typsium Organisation and wrote the Oxidation number support for Whalogen.\nAs @janekfleper mentioned the attach method would work just fine, even without needing any packages, but if you're doing lots of chemistry stuff I'd definitely recommend using[Whalogen](https://typst.app/universe/package/whalogen) for now as it's most stable. I just recently added oxidation number support to it and you can get the newest package from the github (it may take a bit until the newest version is on typst universe, so just get the newest version here: [Whalogen Github](https://github.com/schang412/typst-whalogen)).\n\nThe main method is #ce (chemical equation)\nIf you wrap your element in vertical bars | and a comma. Anything that's after the comma but still inside the bars will be placed ontop.\n```\n#ce(\"H2O\") <-normal H2O with proper formatting\n#ce(\"|H2,+I| |O, -II|\")<- H2 with oxidation state of +I on top of it and O with -II\n```\n\nWe understand that this is not perfect syntax and are currently working on a bigger more wholistic approach to writing chemistry in typst. As @quachpas mentioned we have a small but great chemistry package developer community working on multiple packages that will work together and are more aware of the meaning of the written symbols. We've actually been talking about adding an oxidation number calculator into the rendering package similar to how these online calculators do it: [Oxidation Number Calculator](https://www.chemicalaid.com/tools/oxidationnumber.php?hl=en)\nBut right now there's bigger fish to fry and we're not sure if it's worth the effort right now.\nThe typsium package is currently still work in progress and not as stable as whalogen, but long term we're planning to make Typsium the main formula rendering package. The Whalogen core maintainer just recently joined us, so things are going really well! If anyone is interested, we are actively working on things and could use any help, wether experienced in chemistry or not!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 19.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1028
    }
  ],
  "scraped_at": "2025-06-10T09:50:34.127986"
}
{
  "topic_metadata": {
    "id": 3162,
    "title": "How to programatically set the first row in a table as table.header?",
    "slug": "how-to-programatically-set-the-first-row-in-a-table-as-table-header",
    "posts_count": 2,
    "created_at": "2025-03-09T21:33:20.944Z",
    "last_posted_at": "2025-03-09T23:08:23.129Z",
    "views": 68,
    "like_count": 5,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "aarnent",
    "tags": [
      "scripting",
      "layout",
      "tables"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 109
  },
  "posts": [
    {
      "id": 9536,
      "post_number": 1,
      "username": "bauble5078",
      "name": "",
      "created_at": "2025-03-09T21:33:21.093Z",
      "updated_at": "2025-03-09T21:33:21.093Z",
      "cooked": "<p>Hi, I would like to set the first row in my tables as the table header. This is particularly useful when importing tables from csv files, for example.</p>",
      "raw": "Hi, I would like to set the first row in my tables as the table header. This is particularly useful when importing tables from csv files, for example.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 154.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1320
    },
    {
      "id": 9539,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-03-09T23:08:23.129Z",
      "updated_at": "2025-03-09T23:08:23.129Z",
      "cooked": "<p>Hi and welcome to the forum!</p>\n<p>This should achieve what you’re looking for:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show table: it =&gt; {\n  let fields = it.fields()\n  let children = fields.remove(\"children\")\n  if children.at(0, default: none).func() == table.header {\n    // already has a header\n    return it\n  }\n  \n  let cols = it.columns.len()\n  let firstrow = children.slice(0, cols)\n  let rest = children.slice(cols)\n  table(\n    ..fields,\n    table.header(..firstrow),\n    ..rest\n  )\n}\n</code></pre>\n<p>(Inspiration taken from <a href=\"https://forum.typst.app/t/how-to-justify-long-paragraphs-only/3061/3\">here</a>)</p>",
      "raw": "Hi and welcome to the forum!\n\nThis should achieve what you're looking for: \n```typst\n#show table: it => {\n  let fields = it.fields()\n  let children = fields.remove(\"children\")\n  if children.at(0, default: none).func() == table.header {\n    // already has a header\n    return it\n  }\n  \n  let cols = it.columns.len()\n  let firstrow = children.slice(0, cols)\n  let rest = children.slice(cols)\n  table(\n    ..fields,\n    table.header(..firstrow),\n    ..rest\n  )\n}\n```\n\n(Inspiration taken from [here](https://forum.typst.app/t/how-to-justify-long-paragraphs-only/3061/3))",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 4,
      "reads": 23,
      "score": 74.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 501
    }
  ],
  "scraped_at": "2025-06-10T09:50:33.396914"
}
{
  "topic_metadata": {
    "id": 3164,
    "title": "Can I define show rules that apply to table headers (or first row) only?",
    "slug": "can-i-define-show-rules-that-apply-to-table-headers-or-first-row-only",
    "posts_count": 5,
    "created_at": "2025-03-09T22:59:59.489Z",
    "last_posted_at": "2025-03-10T16:35:58.673Z",
    "views": 82,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "ssotoen",
    "tags": [
      "scripting",
      "tables",
      "styling"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 351
  },
  "posts": [
    {
      "id": 9538,
      "post_number": 1,
      "username": "bauble5078",
      "name": "",
      "created_at": "2025-03-09T22:59:59.649Z",
      "updated_at": "2025-03-09T23:18:44.623Z",
      "cooked": "<p>Is there a way to define a set of show rules (for example a bunch of regex search and replace) that would apply only to table headers? Or to the first row if we can’t access table headers?</p>",
      "raw": "Is there a way to define a set of show rules (for example a bunch of regex search and replace) that would apply only to table headers? Or to the first row if we can't access table headers?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 90.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1320
    },
    {
      "id": 9540,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-09T23:19:11.945Z",
      "updated_at": "2025-03-09T23:19:11.945Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/bauble5078\">@bauble5078</a>, thank you for your question! I have changed your post’s title to bring it in line with the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a> and thus make it easier to understand from the title:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>",
      "raw": "Hi @bauble5078, thank you for your question! I have changed your post’s title to bring it in line with the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11) and thus make it easier to understand from the title:\n\n> **Good titles are questions you would ask your friend about Typst.**",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 25.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 9555,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-10T07:59:03.052Z",
      "updated_at": "2025-03-10T08:02:44.676Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/bauble5078\">@bauble5078</a>, would the example at <a href=\"https://typst.app/docs/guides/table-guide/#basic-tables\" class=\"inline-onebox\">Table guide – Typst Documentation</a> be what you were looking for?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show table.cell.where(y: 0): strong\n</code></pre>\n<p>FYI, show rules on table.header do not work yet (I think).</p>\n<blockquote>\n<p>It is best to wrap the header row of your table in the <a href=\"https://typst.app/docs/reference/model/table/#definitions-header\"><code>table.header</code> function</a>. This clarifies your intent and will also allow future versions of Typst to make the output more accessible to users with a screen reader</p>\n</blockquote>\n<p>See <a href=\"https://typst.app/docs/guides/table-guide/#basic-tables:~:text=It%20is%20best%20to%20wrap%20the%20header%20row%20of%20your%20table%20in%20the%20table.header%20function.%20This%20clarifies%20your%20intent%20and%20will%20also%20allow%20future%20versions%20of%20Typst%20to%20make%20the%20output%20more%20accessible%20to%20users%20with%20a%20screen%20reader%3A\" class=\"inline-onebox\">Table guide – Typst Documentation</a></p>",
      "raw": "Hello @bauble5078, would the example at https://typst.app/docs/guides/table-guide/#basic-tables be what you were looking for?\n\n```typ\n#show table.cell.where(y: 0): strong\n```\nFYI, show rules on table.header do not work yet (I think).\n> It is best to wrap the header row of your table in the [`table.header` function](https://typst.app/docs/reference/model/table/#definitions-header). This clarifies your intent and will also allow future versions of Typst to make the output more accessible to users with a screen reader\n\nSee https://typst.app/docs/guides/table-guide/#basic-tables:~:text=It%20is%20best%20to%20wrap%20the%20header%20row%20of%20your%20table%20in%20the%20table.header%20function.%20This%20clarifies%20your%20intent%20and%20will%20also%20allow%20future%20versions%20of%20Typst%20to%20make%20the%20output%20more%20accessible%20to%20users%20with%20a%20screen%20reader%3A",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9608,
      "post_number": 4,
      "username": "bauble5078",
      "name": "",
      "created_at": "2025-03-10T16:24:14.686Z",
      "updated_at": "2025-03-10T16:25:30.835Z",
      "cooked": "<p>Thanks <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a>, I indeed saw that section of the docs and was trying to adapt it to my case but I can’t figure it out… What I’m trying to do is to define a simple search and replace show rule that applies only to the first row of a table. Something like that, but restricted to row 0 of all tables:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show regex(\"\\&lt;old\\&gt;\"): [new]\n</code></pre>\n<p>Indeed, I also later read somewhere (can’t find the link back) that there is currently no API to access table.header() for this kind of things.</p>",
      "raw": "Thanks @quachpas, I indeed saw that section of the docs and was trying to adapt it to my case but I can't figure it out... What I'm trying to do is to define a simple search and replace show rule that applies only to the first row of a table. Something like that, but restricted to row 0 of all tables:\n\n```typst\n#show regex(\"\\<old\\>\"): [new]\n```\n\nIndeed, I also later read somewhere (can't find the link back) that there is currently no API to access table.header() for this kind of things.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1320
    },
    {
      "id": 9610,
      "post_number": 5,
      "username": "ssotoen",
      "name": "",
      "created_at": "2025-03-10T16:35:58.673Z",
      "updated_at": "2025-03-10T16:35:58.673Z",
      "cooked": "<p>You can nest show rules:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show table.cell.where(y: 0): it =&gt; {\n  show regex(\"\\&lt;old\\&gt;\"): [new]\n  it\n}\n</code></pre>",
      "raw": "You can nest show rules:\n```typ\n#show table.cell.where(y: 0): it => {\n  show regex(\"\\<old\\>\"): [new]\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 15,
      "score": 33.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 331
    }
  ],
  "scraped_at": "2025-06-10T09:50:32.659857"
}
{
  "topic_metadata": {
    "id": 3168,
    "title": "How do I attach a subscript with inline behaviour in display math?",
    "slug": "how-do-i-attach-a-subscript-with-inline-behaviour-in-display-math",
    "posts_count": 10,
    "created_at": "2025-03-10T04:38:40.680Z",
    "last_posted_at": "2025-03-10T16:48:27.247Z",
    "views": 203,
    "like_count": 4,
    "reply_count": 10,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Electron_Wizard",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 616
  },
  "posts": [
    {
      "id": 9548,
      "post_number": 1,
      "username": "rudy",
      "name": "Michael Newman Fortunato",
      "created_at": "2025-03-10T04:38:40.797Z",
      "updated_at": "2025-03-10T08:15:07.247Z",
      "cooked": "<p>Original<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/d/d72bf232074007b3e6faf79416eb7979261746cc.png\" data-download-href=\"https://forum.typst.app/uploads/default/d72bf232074007b3e6faf79416eb7979261746cc\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/d/d72bf232074007b3e6faf79416eb7979261746cc_2_690x133.png\" alt=\"image\" data-base62-sha1=\"uHuOekxWs9FztTuaS3mK3uaikXy\" width=\"690\" height=\"133\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/d/d72bf232074007b3e6faf79416eb7979261746cc_2_690x133.png, https://forum.typst.app/uploads/default/original/2X/d/d72bf232074007b3e6faf79416eb7979261746cc.png 1.5x, https://forum.typst.app/uploads/default/original/2X/d/d72bf232074007b3e6faf79416eb7979261746cc.png 2x\" data-dominant-color=\"F6F6F6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">944×182 26.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nMy attempt<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/c/c82bd57270f0727c8bea98f71869593d8b9b993b.png\" alt=\"image\" data-base62-sha1=\"syNpgwBw9gBPXjuVDi7qfTOdA0j\" width=\"642\" height=\"176\"></p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">  $\n    f arrow.b_(i_(1),...i_(k)) = (m - k)!^(-1) sum_(s in SS_(m-k))^()f(tilde(u) tilde(s) t)\n  $\n</code></pre>\n<p>I think “!” with the subscript looks different too than on Latex.</p>",
      "raw": "Original\n![image|690x133](upload://uHuOekxWs9FztTuaS3mK3uaikXy.png)\nMy attempt\n![image|642x176](upload://syNpgwBw9gBPXjuVDi7qfTOdA0j.png)\n```typst\n  $\n    f arrow.b_(i_(1),...i_(k)) = (m - k)!^(-1) sum_(s in SS_(m-k))^()f(tilde(u) tilde(s) t)\n  $\n```\nI think \"!\" with the subscript looks different too than on Latex.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 756.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1242
    },
    {
      "id": 9551,
      "post_number": 2,
      "username": "Electron_Wizard",
      "name": "Electron Wizard",
      "created_at": "2025-03-10T06:32:07.116Z",
      "updated_at": "2025-03-10T06:38:32.842Z",
      "cooked": "<p>hey <a class=\"mention\" href=\"/u/rudy\">@rudy</a>,</p>\n<p>You can use <a href=\"https://typst.app/docs/reference/math/attach/\">Attach Functions – Typst Documentation</a> to get the desired effect. By encasing the down arrow with a <code>scripts</code>, this redefines <code>_</code> or <code>^</code> to be placed like super- and subscript (<code>limits</code> has it top and bottom). Also encasing the subscript part in double casing renders the inner braces!</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">$ f scripts(arrow.b)_((i_(1),...i_(k))) = (m - k)!^(-1) sum_(s in SS_(m-k))^()f(acute(u) grave(s) t) $\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/5a3604fd709ef0b197a02c179a80eb1a9a67d6e1.png\" data-download-href=\"https://forum.typst.app/uploads/default/5a3604fd709ef0b197a02c179a80eb1a9a67d6e1\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/5a3604fd709ef0b197a02c179a80eb1a9a67d6e1_2_690x151.png\" alt=\"image\" data-base62-sha1=\"cS2HVJKvUi6OyyzSjfkftvTTKLL\" width=\"690\" height=\"151\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/5a3604fd709ef0b197a02c179a80eb1a9a67d6e1_2_690x151.png, https://forum.typst.app/uploads/default/original/2X/5/5a3604fd709ef0b197a02c179a80eb1a9a67d6e1.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/5a3604fd709ef0b197a02c179a80eb1a9a67d6e1.png 2x\" data-dominant-color=\"F2F2F4\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">836×184 11.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>And the <code>!</code> looks the same to me :)</p>\n<p>And Accent functions can be found in the docs at <a href=\"https://typst.app/docs/reference/math/accent/\">Accent Function – Typst Documentation</a>!</p>\n<p>And I forgot the <code>(u)</code>, so don’t forget that one :)</p>",
      "raw": "hey @rudy,\n\nYou can use [Attach Functions – Typst Documentation](https://typst.app/docs/reference/math/attach/) to get the desired effect. By encasing the down arrow with a `scripts`, this redefines `_` or `^` to be placed like super- and subscript (`limits` has it top and bottom). Also encasing the subscript part in double casing renders the inner braces!\n\n```typst\n$ f scripts(arrow.b)_((i_(1),...i_(k))) = (m - k)!^(-1) sum_(s in SS_(m-k))^()f(acute(u) grave(s) t) $\n```\n\n![image|690x151](upload://cS2HVJKvUi6OyyzSjfkftvTTKLL.png)\n\nAnd the `!` looks the same to me :)\n\nAnd Accent functions can be found in the docs at [Accent Function – Typst Documentation](https://typst.app/docs/reference/math/accent/)!\n\nAnd I forgot the `(u)`, so don't forget that one :)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 20.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 997
    },
    {
      "id": 9556,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-10T08:04:23.783Z",
      "updated_at": "2025-03-10T08:04:23.783Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Electron_Wizard\" data-post=\"2\" data-topic=\"3168\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/electron_wizard/48/1615_2.png\" class=\"avatar\"> Electron_Wizard:</div>\n<blockquote>\n<p>And the <code>!</code> looks the same to me :)</p>\n</blockquote>\n</aside>\n<p>I think they mean that the big space between <code>!</code> and the sum is different?</p>",
      "raw": "[quote=\"Electron_Wizard, post:2, topic:3168\"]\nAnd the `!` looks the same to me :)\n[/quote]\n\nI think they mean that the big space between `!` and the sum is different?",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 0,
      "reads": 26,
      "score": 15.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 9558,
      "post_number": 4,
      "username": "Electron_Wizard",
      "name": "Electron Wizard",
      "created_at": "2025-03-10T08:08:48.093Z",
      "updated_at": "2025-03-10T08:08:48.093Z",
      "cooked": "<p>ah oops. Not aware of any parameter to fix this, but a workaround is to use <code>#h(-0.3em)</code> between the <code>sum</code> and <code>!</code></p>",
      "raw": "ah oops. Not aware of any parameter to fix this, but a workaround is to use `#h(-0.3em)` between the `sum` and `!`",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 997
    },
    {
      "id": 9559,
      "post_number": 5,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-03-10T08:18:08.396Z",
      "updated_at": "2025-03-10T08:18:08.396Z",
      "cooked": "<p>You could use something like the <code>smash</code> function I defined in <a href=\"https://forum.typst.app/t/smashoperator-analogue/1763/4\" class=\"inline-onebox\">Smashoperator Analogue - #4 by Eric</a>, though that will remove the extra spacing on <em>both</em> sides of the sum symbol.</p>",
      "raw": "You could use something like the `smash` function I defined in https://forum.typst.app/t/smashoperator-analogue/1763/4?u=eric, though that will remove the extra spacing on _both_ sides of the sum symbol.",
      "reply_to_post_number": 4,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 3,
      "reads": 23,
      "score": 89.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 9560,
      "post_number": 6,
      "username": "Electron_Wizard",
      "name": "Electron Wizard",
      "created_at": "2025-03-10T08:22:49.271Z",
      "updated_at": "2025-03-10T08:22:49.271Z",
      "cooked": "<p>That’s a much better solution!</p>",
      "raw": "That's a much better solution!",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 997
    },
    {
      "id": 9597,
      "post_number": 8,
      "username": "rudy",
      "name": "Michael Newman Fortunato",
      "created_at": "2025-03-10T15:09:02.757Z",
      "updated_at": "2025-03-10T17:24:07.257Z",
      "cooked": "<p>Hi sorry I do not know why my post got deleted that was an accident.<br>\nThanks for the reply everyone and welcome this is awesome.<br>\nWhat I actually meant about my comment about the <code>!</code> symbol (though what I wrote then wasn’t even a full sentence, apologies) is that the superscript’s (in this <code>-1</code>) position on it differs from Latex in Typst.</p>\n<h2><a name=\"p-9597-latex-1\" class=\"anchor\" href=\"#p-9597-latex-1\"></a>Latex</h2>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/a/a2d15c2c537d6a0722082ee7f3e871c5763788a1.png\" alt=\"image\" data-base62-sha1=\"nelTVuKmWUJShaXMLz8yf9ccAgN\" width=\"110\" height=\"124\"></p>\n<h2><a name=\"p-9597-typst-2\" class=\"anchor\" href=\"#p-9597-typst-2\"></a>Typst</h2>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/73d3dd443c842d01ef06afb5ec703290aa7c78bc.png\" alt=\"image\" data-base62-sha1=\"gwEPemY1pNuL1C88DzTnXuadIyo\" width=\"92\" height=\"72\"></p>\n<p>I personally do not mind the difference, both look good, and this may be a New Computer Modern thing, I just want to help find a bug if there is one.</p>",
      "raw": "Hi sorry I do not know why my post got deleted that was an accident. \nThanks for the reply everyone and welcome this is awesome. \nWhat I actually meant about my comment about the `!` symbol (though what I wrote then wasn't even a full sentence, apologies) is that the superscript's (in this `-1`) position on it differs from Latex in Typst.   \n\n## Latex \n![image|110x124](upload://nelTVuKmWUJShaXMLz8yf9ccAgN.png)\n\n## Typst\n![image|92x72](upload://gwEPemY1pNuL1C88DzTnXuadIyo.png)\n\nI personally do not mind the difference, both look good, and this may be a New Computer Modern thing, I just want to help find a bug if there is one.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 18.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1242
    },
    {
      "id": 9606,
      "post_number": 10,
      "username": "rudy",
      "name": "Michael Newman Fortunato",
      "created_at": "2025-03-10T16:09:43.991Z",
      "updated_at": "2025-03-10T16:09:43.991Z",
      "cooked": "<p>I was using the smash operator to try to reduce the distance between the <code>f</code> and the arrow. It seemed to make the symbols smaller however.<br>\nHere is the code snippet.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">// From: https://forum.typst.app/t/smashoperator-analogue/1763/4?u=rudy\n#let smash(body, side: center) = math.display(\n  box(\n    width: 0pt,\n    align(\n      side.inv(),\n      box(width: float.inf * 1pt, $ script(body) $),\n    ),\n  ),\n)\n$\n    f scripts(arrow.b)_((i_(1),...i_(k)))\n    \\\n    smash(f scripts(arrow.b)_((i_(1),...i_(k))))\n$\n</code></pre>\n<p>And here is the output<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/c/cb4af7c8e5747c5d7c0233849aafa64dd071d3e1.png\" alt=\"image\" data-base62-sha1=\"t0pxL4YZG5LkqK7suwlWcNmDlap\" width=\"378\" height=\"190\"></p>",
      "raw": "I was using the smash operator to try to reduce the distance between the `f` and the arrow. It seemed to make the symbols smaller however.\nHere is the code snippet.\n\n```typst\n// From: https://forum.typst.app/t/smashoperator-analogue/1763/4?u=rudy\n#let smash(body, side: center) = math.display(\n  box(\n    width: 0pt,\n    align(\n      side.inv(),\n      box(width: float.inf * 1pt, $ script(body) $),\n    ),\n  ),\n)\n$\n    f scripts(arrow.b)_((i_(1),...i_(k)))\n    \\\n    smash(f scripts(arrow.b)_((i_(1),...i_(k))))\n$\n``` \nAnd here is the output\n![image|378x190](upload://t0pxL4YZG5LkqK7suwlWcNmDlap.png)",
      "reply_to_post_number": 5,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 13.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1242
    },
    {
      "id": 9607,
      "post_number": 11,
      "username": "rudy",
      "name": "Michael Newman Fortunato",
      "created_at": "2025-03-10T16:16:07.389Z",
      "updated_at": "2025-03-10T16:16:07.389Z",
      "cooked": "<p>I ended up doing this at the end and I think the output looks great!</p>\n<ul>\n<li>Use <code>scripts(arrow.b)</code> to place subscript under the arrow</li>\n<li>Use <code>#h(-.01em)</code> to move the arrow slightly over to the left.</li>\n</ul>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">  \n  $\n    \"Way Before\"&amp;: f  arrow.b_(i_(1),...i_(k)) = (m - k)!^(-1) sum_(s in SS_(m-k))^()f(tilde(u) tilde(s) t) \\\n    \"Before\"&amp;: f  scripts(arrow.b)_(i_(1),...i_(k)) = (m - k)!^(-1) sum_(s in SS_(m-k))^()f(tilde(u) tilde(s) t) \\\n    \"After\"&amp;: f #h(-.01em) scripts(arrow.b)_(i_(1),...i_(k)) = (m - k)!^(-1) sum_(s in SS_(m-k))^()f(tilde(u) tilde(s) t)\n\n  $\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/a/a0f808513476fad572e3d3f36e923d9dc0c24d12.png\" data-download-href=\"https://forum.typst.app/uploads/default/a0f808513476fad572e3d3f36e923d9dc0c24d12\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/a/a0f808513476fad572e3d3f36e923d9dc0c24d12_2_690x211.png\" alt=\"image\" data-base62-sha1=\"mXZNKxh12pUpeLPtTnVJm8EN2W6\" width=\"690\" height=\"211\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/a/a0f808513476fad572e3d3f36e923d9dc0c24d12_2_690x211.png, https://forum.typst.app/uploads/default/optimized/2X/a/a0f808513476fad572e3d3f36e923d9dc0c24d12_2_1035x316.png 1.5x, https://forum.typst.app/uploads/default/original/2X/a/a0f808513476fad572e3d3f36e923d9dc0c24d12.png 2x\" data-dominant-color=\"F8F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1236×378 58.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "I ended up doing this at the end and I think the output looks great! \n- Use `scripts(arrow.b)` to place subscript under the arrow\n- Use `#h(-.01em)` to move the arrow slightly over to the left.\n```typst\n  \n  $\n    \"Way Before\"&: f  arrow.b_(i_(1),...i_(k)) = (m - k)!^(-1) sum_(s in SS_(m-k))^()f(tilde(u) tilde(s) t) \\\n    \"Before\"&: f  scripts(arrow.b)_(i_(1),...i_(k)) = (m - k)!^(-1) sum_(s in SS_(m-k))^()f(tilde(u) tilde(s) t) \\\n    \"After\"&: f #h(-.01em) scripts(arrow.b)_(i_(1),...i_(k)) = (m - k)!^(-1) sum_(s in SS_(m-k))^()f(tilde(u) tilde(s) t)\n\n  $\n```\n![image|690x211](upload://mXZNKxh12pUpeLPtTnVJm8EN2W6.png)",
      "reply_to_post_number": 10,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1242
    },
    {
      "id": 9611,
      "post_number": 12,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-03-10T16:48:27.247Z",
      "updated_at": "2025-03-10T16:48:27.247Z",
      "cooked": "<p>Yes that is not what that function is for. As mentioned in the post I linked, it is meant for getting rid of additional spacing caused by wide sub- or superscripts.</p>",
      "raw": "Yes that is not what that function is for. As mentioned in the post I linked, it is meant for getting rid of additional spacing caused by wide sub- or superscripts.",
      "reply_to_post_number": 10,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 12,
      "score": 22.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:50:31.809382"
}
{
  "topic_metadata": {
    "id": 3178,
    "title": "Is there a way to write Swiss Standard German in typst?",
    "slug": "is-there-a-way-to-write-swiss-standard-german-in-typst",
    "posts_count": 2,
    "created_at": "2025-03-10T15:08:28.466Z",
    "last_posted_at": "2025-03-10T15:22:42.087Z",
    "views": 77,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 270
  },
  "posts": [
    {
      "id": 9596,
      "post_number": 1,
      "username": "fungusworld",
      "name": "fungusworld",
      "created_at": "2025-03-10T15:08:28.564Z",
      "updated_at": "2025-03-10T15:09:22.252Z",
      "cooked": "<p>Hello there!<br>\nI have a bit of an issue with the way typst formats languages. I am from Switzerland, and frequently write reports and papers for university, which I have increasingly been using typst for. <a href=\"https://en.wikipedia.org/wiki/Swiss_Standard_German\" rel=\"noopener nofollow ugc\">The Swiss variety of german</a> has some subtle differences to classic german (high german) that typst can’t take into account, because it uses ISO language codes and many local language varieties like Swiss German don’t have their own ISO language codes. The subtle differences include things like there not being an “ß” (Eszett) in Swiss German, and quotation marks usually being in the « french » style, rather than the „ german “ style.</p>\n<p>Now I was wondering if there is a way to customize whatever <code> lang: \"de\"</code> is pointing to when it refers to <code>\"de\"</code>, so at least minor things like quotation marks can be changed, or if there is maybe even a simple tag in <code>lang</code> or <code>quotes</code> that I’ve missed? I was also wondering if maybe I should open an issue on github about this. It would obviously be easiest if typst included regional language variant options, like maybe <code>lang: \"de:ch\"</code> for swiss german, or <code>lang: \"de:au\"</code> for austrian german.</p>",
      "raw": "Hello there!\nI have a bit of an issue with the way typst formats languages. I am from Switzerland, and frequently write reports and papers for university, which I have increasingly been using typst for. [The Swiss variety of german](https://en.wikipedia.org/wiki/Swiss_Standard_German) has some subtle differences to classic german (high german) that typst can't take into account, because it uses ISO language codes and many local language varieties like Swiss German don't have their own ISO language codes. The subtle differences include things like there not being an \"ß\" (Eszett) in Swiss German, and quotation marks usually being in the « french » style, rather than the „ german “ style.\n\nNow I was wondering if there is a way to customize whatever ` lang: \"de\"` is pointing to when it refers to `\"de\"`, so at least minor things like quotation marks can be changed, or if there is maybe even a simple tag in `lang` or `quotes` that I've missed? I was also wondering if maybe I should open an issue on github about this. It would obviously be easiest if typst included regional language variant options, like maybe `lang: \"de:ch\"` for swiss german, or `lang: \"de:au\"` for austrian german.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 155.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1325
    },
    {
      "id": 9602,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-10T15:22:42.087Z",
      "updated_at": "2025-03-10T15:22:42.087Z",
      "cooked": "<p>I think you’re looking for the <a href=\"https://typst.app/docs/reference/text/text/#parameters-region\"><code>region</code></a> parameter of <code>text</code> <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set text(lang: \"de\", region: \"CH\")\n\"Hello!\"\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/a/a36140b5c05c9d882fab56079a67fd035eb0ae00.png\" alt=\"image\" data-base62-sha1=\"njkbPon1zi1LJb6JB2HSggFpkc0\" width=\"90\" height=\"36\"></p>\n<p>Though this won’t automatically replace <code>ß</code> with <code>ss</code> in your text (and I don’t think it should). But if you want you can do</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show \"ß\": \"ss\"\n</code></pre>",
      "raw": "I think you're looking for the [`region`](https://typst.app/docs/reference/text/text/#parameters-region) parameter of `text` :slight_smile: \n\n```typ\n#set text(lang: \"de\", region: \"CH\")\n\"Hello!\"\n```\n![image|120x48, 75%](upload://njkbPon1zi1LJb6JB2HSggFpkc0.png)\n\nThough this won't automatically replace `ß` with `ss` in your text (and I don't think it should). But if you want you can do\n\n```typ\n#show \"ß\": \"ss\"\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 27,
      "score": 35.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:50:31.056477"
}
{
  "topic_metadata": {
    "id": 3189,
    "title": "How to change the size of headings?",
    "slug": "how-to-change-the-size-of-headings",
    "posts_count": 3,
    "created_at": "2025-03-11T10:27:48.704Z",
    "last_posted_at": "2025-03-11T12:44:43.511Z",
    "views": 171,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "styling"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 132
  },
  "posts": [
    {
      "id": 9630,
      "post_number": 1,
      "username": "differentialprime",
      "name": "differentialprime",
      "created_at": "2025-03-11T10:27:48.862Z",
      "updated_at": "2025-03-11T11:00:34.167Z",
      "cooked": "<p>Hi there,</p>\n<p>I would like to change the size (e.g. to 14pt) for level 1 headings.<br>\nI couldn’t find an option for this.</p>\n<p>The heading function has no argument “size”.</p>\n<p>I would like to set this once at the top of the file.</p>\n<p>Thanks in advance.</p>",
      "raw": "Hi there, \n\nI would like to change the size (e.g. to 14pt) for level 1 headings. \nI couldn't find an option for this. \n\nThe heading function has no argument \"size\".\n\nI would like to set this once at the top of the file.\n\nThanks in advance.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 790.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1329
    },
    {
      "id": 9632,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-11T11:03:36.864Z",
      "updated_at": "2025-03-11T11:03:36.864Z",
      "cooked": "<p>Hi, welcome to the Typst forum! I suggest you have a look at the styling documentation: <a href=\"https://typst.app/docs/tutorial/formatting/\">basic tutorial</a>, <a href=\"https://typst.app/docs/tutorial/formatting/\">advanced tutorial</a> and <a href=\"https://typst.app/docs/reference/styling/\">reference</a>. For your problem the simplest is</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): set text(size: 14pt)\n</code></pre>\n<p>As you can see, the size is a property of text rather than of the heading itself.</p>",
      "raw": "Hi, welcome to the Typst forum! I suggest you have a look at the styling documentation: [basic tutorial](https://typst.app/docs/tutorial/formatting/), [advanced tutorial](https://typst.app/docs/tutorial/formatting/) and [reference](https://typst.app/docs/reference/styling/). For your problem the simplest is\n\n```typ\n#show heading.where(level: 1): set text(size: 14pt)\n```\n\nAs you can see, the size is a property of text rather than of the heading itself.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 30.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9640,
      "post_number": 3,
      "username": "differentialprime",
      "name": "differentialprime",
      "created_at": "2025-03-11T12:44:43.511Z",
      "updated_at": "2025-03-11T12:44:43.511Z",
      "cooked": "<p>Thank you, that worked! I didn’t find this <code>.where</code> syntax.</p>",
      "raw": "Thank you, that worked! I didn't find this `.where` syntax.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1329
    }
  ],
  "scraped_at": "2025-06-10T09:50:30.289865"
}
{
  "topic_metadata": {
    "id": 3193,
    "title": "How to embed HTML content into a typst document?",
    "slug": "how-to-embed-html-content-into-a-typst-document",
    "posts_count": 5,
    "created_at": "2025-03-11T17:25:24.020Z",
    "last_posted_at": "2025-03-13T07:28:19.675Z",
    "views": 234,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "aarnent",
    "tags": [
      "html"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 607
  },
  "posts": [
    {
      "id": 9650,
      "post_number": 1,
      "username": "Raffael",
      "name": "",
      "created_at": "2025-03-11T17:25:24.172Z",
      "updated_at": "2025-03-13T07:26:14.316Z",
      "cooked": "<p>In our web application, we have WYSIWYG text editor fields. The content of the text editor is stored as HTML, for example:</p>\n<pre data-code-wrap=\"html\"><code class=\"lang-html\">&lt;div class=\"ql-editor read-mode\"&gt;\n\t&lt;p&gt;Spezifikation: 8 Stunden Rechenzeit pro Monat; 4 GB Datenbank; 25 GB Speicherplatz für Anhänge.&lt;/p&gt;\n\t&lt;p&gt;&lt;br&gt;&lt;/p&gt;\n\t&lt;p&gt;Beinhaltet &lt;strong&gt;Hosting und Second-Level-Support&lt;/strong&gt;.\n\t\tFirst-Level-Support, Bugfixes und Wartungsarbeiten werden separat nach Aufwand berechnet. Es\n\t\tgelten die Nutzungsbedingungen und die Datenschutzerklärung:&lt;/p&gt;\n\t&lt;p&gt;&lt;a href=\"https://example.org/terms\" rel=\"noopener noreferrer\"&gt;https://example.org/terms&lt;/a&gt; / &lt;a\n\t\t\thref=\"https://example.org/privacy\" rel=\"noopener noreferrer\"&gt;https://example.org/privacy&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n<p>Now in typst, I would like this text to show up in a table cell, with the appropriate formatting (at least for basic elements like <code>p</code>, <code>strong</code>, <code>br</code> or <code>a</code>).</p>\n<p>Is there any way to achieve this, apart from writing my own html-to-typst converter?</p>",
      "raw": "In our web application, we have WYSIWYG text editor fields. The content of the text editor is stored as HTML, for example:\n\n```html\n<div class=\"ql-editor read-mode\">\n\t<p>Spezifikation: 8 Stunden Rechenzeit pro Monat; 4 GB Datenbank; 25 GB Speicherplatz für Anhänge.</p>\n\t<p><br></p>\n\t<p>Beinhaltet <strong>Hosting und Second-Level-Support</strong>.\n\t\tFirst-Level-Support, Bugfixes und Wartungsarbeiten werden separat nach Aufwand berechnet. Es\n\t\tgelten die Nutzungsbedingungen und die Datenschutzerklärung:</p>\n\t<p><a href=\"https://example.org/terms\" rel=\"noopener noreferrer\">https://example.org/terms</a> / <a\n\t\t\thref=\"https://example.org/privacy\" rel=\"noopener noreferrer\">https://example.org/privacy</a></p>\n</div>\n```\n\nNow in typst, I would like this text to show up in a table cell, with the appropriate formatting (at least for basic elements like `p`, `strong`, `br` or `a`).\n\nIs there any way to achieve this, apart from writing my own html-to-typst converter?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 957.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1331
    },
    {
      "id": 9651,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-03-11T17:30:22.554Z",
      "updated_at": "2025-03-11T17:30:22.554Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/raffael\">@Raffael</a> and welcome to the forum!</p>\n<p>To clarify what you want to achieve, are you asking if there are HTML parsers written in typst, or if there is an easy way to convert HTML to typst code? If it’s the latter, I suggest using <a href=\"https://pandoc.org/try/?params=%7B%22text%22%3A%22%3Cdiv+class%3D%5C%22ql-editor+read-mode%5C%22%3E%5Cn%5Ct%3Cp%3ESpezifikation%3A+8+Stunden+Rechenzeit+pro+Monat%3B+4+GB+Datenbank%3B+25+GB+Speicherplatz+f%C3%BCr+Anh%C3%A4nge.%3C%2Fp%3E%5Cn%5Ct%3Cp%3E%3Cbr%3E%3C%2Fp%3E%5Cn%5Ct%3Cp%3EBeinhaltet+%3Cstrong%3EHosting+und+Second-Level-Support%3C%2Fstrong%3E.%5Cn%5Ct%5CtFirst-Level-Support%2C+Bugfixes+und+Wartungsarbeiten+werden+separat+nach+Aufwand+berechnet.+Es%5Cn%5Ct%5Ctgelten+die+Nutzungsbedingungen+und+die+Datenschutzerkl%C3%A4rung%3A%3C%2Fp%3E%5Cn%5Ct%3Cp%3E%3Ca+href%3D%5C%22https%3A%2F%2Fexample.org%2Fterms%5C%22+rel%3D%5C%22noopener+noreferrer%5C%22%3Ehttps%3A%2F%2Fexample.org%2Fterms%3C%2Fa%3E+%2F+%3Ca%5Cn%5Ct%5Ct%5Cthref%3D%5C%22https%3A%2F%2Fexample.org%2Fprivacy%5C%22+rel%3D%5C%22noopener+noreferrer%5C%22%3Ehttps%3A%2F%2Fexample.org%2Fprivacy%3C%2Fa%3E%3C%2Fp%3E%5Cn%3C%2Fdiv%3E%22%2C%22to%22%3A%22typst%22%2C%22from%22%3A%22html%22%2C%22standalone%22%3Afalse%2C%22embed-resources%22%3Afalse%2C%22table-of-contents%22%3Afalse%2C%22number-sections%22%3Afalse%2C%22citeproc%22%3Afalse%2C%22html-math-method%22%3A%22plain%22%2C%22wrap%22%3A%22auto%22%2C%22highlight-style%22%3Anull%2C%22files%22%3A%7B%7D%2C%22template%22%3Anull%7D\">pandoc</a></p>",
      "raw": "Hi @Raffael and welcome to the forum!\n\nTo clarify what you want to achieve, are you asking if there are HTML parsers written in typst, or if there is an easy way to convert HTML to typst code? If it's the latter, I suggest using [pandoc](https://pandoc.org/try/?params=%7B%22text%22%3A%22%3Cdiv+class%3D%5C%22ql-editor+read-mode%5C%22%3E%5Cn%5Ct%3Cp%3ESpezifikation%3A+8+Stunden+Rechenzeit+pro+Monat%3B+4+GB+Datenbank%3B+25+GB+Speicherplatz+f%C3%BCr+Anh%C3%A4nge.%3C%2Fp%3E%5Cn%5Ct%3Cp%3E%3Cbr%3E%3C%2Fp%3E%5Cn%5Ct%3Cp%3EBeinhaltet+%3Cstrong%3EHosting+und+Second-Level-Support%3C%2Fstrong%3E.%5Cn%5Ct%5CtFirst-Level-Support%2C+Bugfixes+und+Wartungsarbeiten+werden+separat+nach+Aufwand+berechnet.+Es%5Cn%5Ct%5Ctgelten+die+Nutzungsbedingungen+und+die+Datenschutzerkl%C3%A4rung%3A%3C%2Fp%3E%5Cn%5Ct%3Cp%3E%3Ca+href%3D%5C%22https%3A%2F%2Fexample.org%2Fterms%5C%22+rel%3D%5C%22noopener+noreferrer%5C%22%3Ehttps%3A%2F%2Fexample.org%2Fterms%3C%2Fa%3E+%2F+%3Ca%5Cn%5Ct%5Ct%5Cthref%3D%5C%22https%3A%2F%2Fexample.org%2Fprivacy%5C%22+rel%3D%5C%22noopener+noreferrer%5C%22%3Ehttps%3A%2F%2Fexample.org%2Fprivacy%3C%2Fa%3E%3C%2Fp%3E%5Cn%3C%2Fdiv%3E%22%2C%22to%22%3A%22typst%22%2C%22from%22%3A%22html%22%2C%22standalone%22%3Afalse%2C%22embed-resources%22%3Afalse%2C%22table-of-contents%22%3Afalse%2C%22number-sections%22%3Afalse%2C%22citeproc%22%3Afalse%2C%22html-math-method%22%3A%22plain%22%2C%22wrap%22%3A%22auto%22%2C%22highlight-style%22%3Anull%2C%22files%22%3A%7B%7D%2C%22template%22%3Anull%7D)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 52.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9652,
      "post_number": 3,
      "username": "Raffael",
      "name": "",
      "created_at": "2025-03-11T17:38:49.084Z",
      "updated_at": "2025-03-11T17:38:49.084Z",
      "cooked": "<p>Thanks for the quick reply.</p>\n<p>To rephrase, I’m looking for a way to use our existing HTML content when creating PDFs with typst. E.g. I want to create invoice PDFs, but all my existing item descriptions are stored as HTML. What is the easiest way to still print them, without losing the markup?</p>\n<p>Pandoc looks promising, I’ll give that a try!</p>",
      "raw": "Thanks for the quick reply.\n\nTo rephrase, I'm looking for a way to use our existing HTML content when creating PDFs with typst. E.g. I want to create invoice PDFs, but all my existing item descriptions are stored as HTML. What is the easiest way to still print them, without losing the markup?\n\nPandoc looks promising, I'll give that a try!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 12.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1331
    },
    {
      "id": 9653,
      "post_number": 4,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-03-11T17:45:56.218Z",
      "updated_at": "2025-03-11T17:47:04.194Z",
      "cooked": "<p>Yeah so in that case probably use pandoc. You could make some sort of script to automate this task and <code>#include</code> the converted file into the main invoice file which would probably reduce errors. AFAIK there are no HTML parsers written in typst so external tools are the way to go</p>",
      "raw": "Yeah so in that case probably use pandoc. You could make some sort of script to automate this task and `#include` the converted file into the main invoice file which would probably reduce errors. AFAIK there are no HTML parsers written in typst so external tools are the way to go",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 26.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9736,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-13T07:28:19.675Z",
      "updated_at": "2025-03-13T07:28:19.675Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/raffael\">@Raffael</a>, I’ve renamed your topic to “How to embed a HTML file into a typst document?”, don’t hesitate to read through <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>.</p>\n<aside class=\"quote no-group\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n</aside>",
      "raw": "Hello @Raffael, I've renamed your topic to \"How to embed a HTML file into a typst document?\", don't hesitate to read through https://forum.typst.app/t/how-to-post-in-the-questions-category/11.\n\n[quote=\"reknih, post:1, topic:11\"]\n**Good titles are questions you would ask your friend about Typst.**\n[/quote]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 24.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:50:29.501114"
}
{
  "topic_metadata": {
    "id": 3195,
    "title": "Is there a way to automatically determine the page height for balanced two-column page?",
    "slug": "is-there-a-way-to-automatically-determine-the-page-height-for-balanced-two-column-page",
    "posts_count": 4,
    "created_at": "2025-03-11T18:37:00.851Z",
    "last_posted_at": "2025-03-12T07:04:18.983Z",
    "views": 103,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Philipp",
    "tags": [
      "layout",
      "layout-containers"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 518
  },
  "posts": [
    {
      "id": 9656,
      "post_number": 1,
      "username": "nik_nul",
      "name": "nik_nul",
      "created_at": "2025-03-11T18:37:00.972Z",
      "updated_at": "2025-03-12T09:33:00.905Z",
      "cooked": "<p><code>#set page(height: auto)</code> can make typst automatically determine the proper height to display all the stuffs in one page, like:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(height: auto, width: 4.5in)\n#lorem(100)\n</code></pre>\n<p>But now I want to use <code>height: auto</code> option for two columns page, and this is how it looks like:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(height: auto, width: 4.5in, columns: 2)\n#lorem(50)\n</code></pre>\n<p>or</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(height: auto, width: 4.5in)\n#columns(2)[#lorem(150)]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/7/798826d8ce3fd4b3878ebac8e5825526a456d2d9.png\" data-download-href=\"https://forum.typst.app/uploads/default/798826d8ce3fd4b3878ebac8e5825526a456d2d9\" title=\"Auto height, two columns, unbalanced\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/7/798826d8ce3fd4b3878ebac8e5825526a456d2d9_2_540x500.png\" alt=\"Auto height, two columns, unbalanced\" data-base62-sha1=\"hl7tCfTmK7SxIyiK35xs2LyaKjn\" width=\"540\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/7/798826d8ce3fd4b3878ebac8e5825526a456d2d9_2_540x500.png, https://forum.typst.app/uploads/default/original/2X/7/798826d8ce3fd4b3878ebac8e5825526a456d2d9.png 1.5x, https://forum.typst.app/uploads/default/original/2X/7/798826d8ce3fd4b3878ebac8e5825526a456d2d9.png 2x\" data-dominant-color=\"F7F7F7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Auto height, two columns, unbalanced</span><span class=\"informations\">648×600 116 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nAll the content is on the one side, and the other side is left blank, which is not that good.</p>\n<p>What I want is something like:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/240408d71e0ed14169c580263ddc6e6dcf8cea2f.png\" data-download-href=\"https://forum.typst.app/uploads/default/240408d71e0ed14169c580263ddc6e6dcf8cea2f\" title=\"Manually-specified height, two columns, balanced\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/240408d71e0ed14169c580263ddc6e6dcf8cea2f_2_576x500.png\" alt=\"Manually-specified height, two columns, balanced\" data-base62-sha1=\"58BPDB6MSqhwj5TY5nwL3vedm47\" width=\"576\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/240408d71e0ed14169c580263ddc6e6dcf8cea2f_2_576x500.png, https://forum.typst.app/uploads/default/original/2X/2/240408d71e0ed14169c580263ddc6e6dcf8cea2f.png 1.5x, https://forum.typst.app/uploads/default/original/2X/2/240408d71e0ed14169c580263ddc6e6dcf8cea2f.png 2x\" data-dominant-color=\"EEEEEE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Manually-specified height, two columns, balanced</span><span class=\"informations\">648×562 223 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\ni.e. two columns are balanced and just fit in one page.</p>\n<p>At first, I tried to use <code>measure</code> to get the height of all content and set the page height to half of it, but there are spacing between two columns, so the height is not always (maybe always not) that exact, even if I did some experiments and got a relatively good coefficient rather than simply using 1/2 to calculate the height for two columns from the original height.</p>\n<p>Another idea is to detect whether a page is enough for the content and iterate several times to find the critical point and finally get a tight bound for height, but this may be of low efficiency and may encounter <code>layout did not converge within 5 attempts</code> if doing this inside the typst document.</p>\n<p>So what is the best practice for making a one page two columns document, or is that possible?</p>\n<p>I am new to this community and not proficient in typst and English, and I’ve already searched the web and this forum for something relevant but in vain. I would appreciate it if you could offer any help, thanks in advance.</p>\n<p>P.S. I need to do so as I am currently working with an automatic publishing system for campus news &amp; information. We previously found out that this form may be the best for phone readers, and we could manually adjust the geometry for LaTeX document everyday in the past.</p>",
      "raw": "`#set page(height: auto)` can make typst automatically determine the proper height to display all the stuffs in one page, like:\n```typst\n#set page(height: auto, width: 4.5in)\n#lorem(100)\n```\nBut now I want to use `height: auto` option for two columns page, and this is how it looks like:\n```typst\n#set page(height: auto, width: 4.5in, columns: 2)\n#lorem(50)\n```\nor\n```typst\n#set page(height: auto, width: 4.5in)\n#columns(2)[#lorem(150)]\n```\n![Auto height, two columns, unbalanced|540x500](upload://hl7tCfTmK7SxIyiK35xs2LyaKjn.png)\nAll the content is on the one side, and the other side is left blank, which is not that good.\n\nWhat I want is something like:\n![Manually-specified height, two columns, balanced|576x500](upload://58BPDB6MSqhwj5TY5nwL3vedm47.png)\ni.e. two columns are balanced and just fit in one page.\n\nAt first, I tried to use `measure` to get the height of all content and set the page height to half of it, but there are spacing between two columns, so the height is not always (maybe always not) that exact, even if I did some experiments and got a relatively good coefficient rather than simply using 1/2 to calculate the height for two columns from the original height.\n\nAnother idea is to detect whether a page is enough for the content and iterate several times to find the critical point and finally get a tight bound for height, but this may be of low efficiency and may encounter `layout did not converge within 5 attempts` if doing this inside the typst document.\n\nSo what is the best practice for making a one page two columns document, or is that possible?\n\nI am new to this community and not proficient in typst and English, and I've already searched the web and this forum for something relevant but in vain. I would appreciate it if you could offer any help, thanks in advance.\n\nP.S. I need to do so as I am currently working with an automatic publishing system for campus news & information. We previously found out that this form may be the best for phone readers, and we could manually adjust the geometry for LaTeX document everyday in the past.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 131.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1332
    },
    {
      "id": 9659,
      "post_number": 2,
      "username": "Philipp",
      "name": "Philipp",
      "created_at": "2025-03-11T21:12:09.349Z",
      "updated_at": "2025-03-11T21:12:09.349Z",
      "cooked": "<p>There is currently no proper way to do this, but there is an open issue on GitHub for balancing the columns, and I believe this would then also allow for auto page height. In that issue people have posted several workarounds which could be helpful for your use case. Here the link:</p>\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/typst/issues/466\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/issues/466\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/typst/issues/466\" target=\"_blank\" rel=\"noopener nofollow ugc\">Balancing the contents of multiple columns to the same vertical space</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2023-03-30\" data-time=\"18:09:42\" data-timezone=\"UTC\">06:09PM - 30 Mar 23 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/ghost\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n          <img alt=\"ghost\" src=\"https://forum.typst.app/uploads/default/original/2X/d/dd7897793c3382c0099bc223bdb0e85421106565.jpeg\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"383838\">\n          ghost\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          feature request\n        </span>\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          layout\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">I remember that in LaTeX the output of multicolumns will be balanced to the same<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\"> vertical space in all columns to have enough space below that could start a new single column layout or an image or so.\n\nIn Typst the output for\n\n```typst\n#set par(justify: true)\n\n#set page(columns: 2)\n\n#lorem(500)\n```\n\nis currently unbalanced which looks not so professional, I think.\n\n![balanced](https://user-images.githubusercontent.com/107212151/228925442-2115e896-ba41-4689-a8f1-e72f88f4d4aa.PNG)\n\nMaybe a parameter like `balance-columns` or `columns: (balance: bool)` can be added to make this possible.</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "There is currently no proper way to do this, but there is an open issue on GitHub for balancing the columns, and I believe this would then also allow for auto page height. In that issue people have posted several workarounds which could be helpful for your use case. Here the link:\n\nhttps://github.com/typst/typst/issues/466",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 32,
      "score": 56.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 798
    },
    {
      "id": 9674,
      "post_number": 3,
      "username": "nik_nul",
      "name": "nik_nul",
      "created_at": "2025-03-12T02:42:05.580Z",
      "updated_at": "2025-03-12T02:42:05.580Z",
      "cooked": "<p>The <code>eqcolumns</code> workaround provided by <a href=\"https://github.com/dahooz\" rel=\"noopener nofollow ugc\">@dahooz</a> in <a href=\"https://github.com/typst/typst/issues/466#issuecomment-2035134448\" rel=\"noopener nofollow ugc\">issue 466</a> seems to perfectly resolve my problem. Thank you for the instruction!</p>",
      "raw": "The `eqcolumns` workaround provided by [@dahooz](https://github.com/dahooz) in [issue 466](https://github.com/typst/typst/issues/466#issuecomment-2035134448) seems to perfectly resolve my problem. Thank you for the instruction!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 5.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1332
    },
    {
      "id": 9681,
      "post_number": 4,
      "username": "nik_nul",
      "name": "nik_nul",
      "created_at": "2025-03-12T07:04:18.983Z",
      "updated_at": "2025-03-12T07:04:18.983Z",
      "cooked": "<p>Update: Sometimes <code>eqcolumns</code> will underestimate the height needed, like:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/1/199fd7472417bc05b5d78bb0de9f7a2348ca09d5.png\" data-download-href=\"https://forum.typst.app/uploads/default/199fd7472417bc05b5d78bb0de9f7a2348ca09d5\" title=\"Insufficient block height for table\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/1/199fd7472417bc05b5d78bb0de9f7a2348ca09d5_2_657x500.png\" alt=\"Insufficient block height for table\" data-base62-sha1=\"3EGorY51agtZu4B6B8PsWxAhz0N\" width=\"657\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/1/199fd7472417bc05b5d78bb0de9f7a2348ca09d5_2_657x500.png, https://forum.typst.app/uploads/default/original/2X/1/199fd7472417bc05b5d78bb0de9f7a2348ca09d5.png 1.5x, https://forum.typst.app/uploads/default/original/2X/1/199fd7472417bc05b5d78bb0de9f7a2348ca09d5.png 2x\" data-dominant-color=\"EAE8E9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Insufficient block height for table</span><span class=\"informations\">738×561 120 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nEspecially some layout rules are applied to add some space.<br>\nI suggest to add some extra space in the parameter <code>height</code> passed to block. Basically, <code>+ 0.3 em</code> to <code>+ 0.6 em</code> at <code>12pt</code> font size will be enough for most circumstances.</p>",
      "raw": "Update: Sometimes `eqcolumns` will underestimate the height needed, like:\n![Insufficient block height for table|657x500](upload://3EGorY51agtZu4B6B8PsWxAhz0N.png)\nEspecially some layout rules are applied to add some space.\nI suggest to add some extra space in the parameter `height` passed to block. Basically, `+ 0.3 em` to `+ 0.6 em` at `12pt` font size will be enough for most circumstances.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 10.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1332
    }
  ],
  "scraped_at": "2025-06-10T09:50:28.648059"
}
{
  "topic_metadata": {
    "id": 3204,
    "title": "How can I sort a list of abbreviations?",
    "slug": "how-can-i-sort-a-list-of-abbreviations",
    "posts_count": 4,
    "created_at": "2025-03-12T00:49:26.313Z",
    "last_posted_at": "2025-03-13T15:59:39.223Z",
    "views": 102,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "gezepi",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 200
  },
  "posts": [
    {
      "id": 9670,
      "post_number": 1,
      "username": "FelixD",
      "name": "",
      "created_at": "2025-03-12T00:49:26.407Z",
      "updated_at": "2025-03-12T09:32:03.235Z",
      "cooked": "<p>Hey everyone, I want to include a list of abbreviations, and I want to sort them so that entries starting with numbers come first, followed by those starting with ‘A’ through ‘Z’. What would be the best way to get this in my typst document? Thanks!</p>",
      "raw": "Hey everyone, I want to include a list of abbreviations, and I want to sort them so that entries starting with numbers come first, followed by those starting with 'A' through 'Z'. What would be the best way to get this in my typst document? Thanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 245.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1334
    },
    {
      "id": 9680,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-03-12T06:43:19.577Z",
      "updated_at": "2025-03-12T06:43:19.577Z",
      "cooked": "<p>The <a href=\"https://typst.app/docs/reference/foundations/array/#definitions-sorted\"><code>sorted</code></a> function of an array is probably what you need here.  It has more flexibility than shown here, but its default should be what you’re looking for.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let abbreviations = (\"73\", \"zs\", \"0b\", \"0a\", \"ab\", \"cd\")\n#abbreviations\n\n#let abbrInOrder = abbreviations.sorted()\n#abbrInOrder\n\nThe abbreviations are: #abbrInOrder.map(a =&gt; \"'\" + upper(a) + \"'\").join(\", \", last: \" and \").\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/7564cbb7afdbbd12e9ee292c6c2ff01ef1863fd9.png\" alt=\"image\" data-base62-sha1=\"gKvOIlfKvuqYOAZBjahOUVR5PkJ\" width=\"633\" height=\"172\"></p>",
      "raw": "The [`sorted`](https://typst.app/docs/reference/foundations/array/#definitions-sorted) function of an array is probably what you need here.  It has more flexibility than shown here, but its default should be what you're looking for.\n\n```typ\n#let abbreviations = (\"73\", \"zs\", \"0b\", \"0a\", \"ab\", \"cd\")\n#abbreviations\n\n#let abbrInOrder = abbreviations.sorted()\n#abbrInOrder\n\nThe abbreviations are: #abbrInOrder.map(a => \"'\" + upper(a) + \"'\").join(\", \", last: \" and \").\n```\n![image|633x172](upload://gKvOIlfKvuqYOAZBjahOUVR5PkJ.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 9689,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-12T09:32:36.837Z",
      "updated_at": "2025-03-12T09:32:36.837Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/felixd\">@FelixD</a>, welcome and thank you for your question! I have changed your post’s title to bring it in line with the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a> and thus make it easier to understand from the title:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>I also added the <a class=\"hashtag-cooked\" href=\"/tag/scripting\" data-type=\"tag\" data-slug=\"scripting\" data-id=\"84\" data-ref=\"scripting::tag\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>scripting</span></a> tag, as it makes your question easier to find.</p>",
      "raw": "Hi @FelixD, welcome and thank you for your question! I have changed your post’s title to bring it in line with the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11) and thus make it easier to understand from the title:\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nI also added the #scripting::tag tag, as it makes your question easier to find.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 9767,
      "post_number": 4,
      "username": "FelixD",
      "name": "",
      "created_at": "2025-03-13T15:59:39.223Z",
      "updated_at": "2025-03-13T15:59:39.223Z",
      "cooked": "<p>Thanks a lot! That’s exactly what I was looking for.</p>",
      "raw": "Thanks a lot! That's exactly what I was looking for.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 14,
      "score": 2.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1334
    }
  ],
  "scraped_at": "2025-06-10T09:50:27.907742"
}
{
  "topic_metadata": {
    "id": 3208,
    "title": "How to align bibliography numbers to the right?",
    "slug": "how-to-align-bibliography-numbers-to-the-right",
    "posts_count": 6,
    "created_at": "2025-03-12T03:25:02.257Z",
    "last_posted_at": "2025-03-12T16:05:23.660Z",
    "views": 51,
    "like_count": 4,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "literature"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 246
  },
  "posts": [
    {
      "id": 9676,
      "post_number": 1,
      "username": "kongdd",
      "name": "Dongdond Kong",
      "created_at": "2025-03-12T03:25:02.366Z",
      "updated_at": "2025-03-12T16:04:39.271Z",
      "cooked": "<p>Any idea how to align bibliography number into right?<br>\n<code>align left</code> will leave too many space, and looks informal.</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/4/45ef6f1f7e043b47d8a69d1046729c649da22956.png\" alt=\"image\" data-base62-sha1=\"9YFVHdRzv3ls2bTt06GiMGBVQSG\" width=\"208\" height=\"263\"></p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/f12c7811e04568424d8eda0e340e2e25e048df15.png\" data-download-href=\"https://forum.typst.app/uploads/default/f12c7811e04568424d8eda0e340e2e25e048df15\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/f12c7811e04568424d8eda0e340e2e25e048df15_2_690x285.png\" alt=\"image\" data-base62-sha1=\"ypwlnuhDSzOhpbp0dix9k8atlPL\" width=\"690\" height=\"285\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/f12c7811e04568424d8eda0e340e2e25e048df15_2_690x285.png, https://forum.typst.app/uploads/default/optimized/2X/f/f12c7811e04568424d8eda0e340e2e25e048df15_2_1035x427.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/f12c7811e04568424d8eda0e340e2e25e048df15.png 2x\" data-dominant-color=\"ECECEC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1230×509 141 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Any idea how to align bibliography number into right?\n`align left` will leave too many space, and looks informal. \n\n![image|208x263](upload://9YFVHdRzv3ls2bTt06GiMGBVQSG.png)\n\n![image|690x285](upload://ypwlnuhDSzOhpbp0dix9k8atlPL.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 55.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1336
    },
    {
      "id": 9682,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-12T07:38:12.883Z",
      "updated_at": "2025-03-12T07:38:31.263Z",
      "cooked": "<p>There are no show rules for the bibliography entries available yet. You can however apply a show rule to the grid that is used internally by the bibliography. The show rule below targets the first column in the grid which holds the numbers of the citations.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show bibliography: it =&gt; {\n  show grid.cell.where(x: 0): it =&gt; align(right, it)\n  it\n}\n</code></pre>",
      "raw": "There are no show rules for the bibliography entries available yet. You can however apply a show rule to the grid that is used internally by the bibliography. The show rule below targets the first column in the grid which holds the numbers of the citations.\n\n```typ\n#show bibliography: it => {\n  show grid.cell.where(x: 0): it => align(right, it)\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 4,
      "reads": 26,
      "score": 75.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 9683,
      "post_number": 3,
      "username": "kongdd",
      "name": "Dongdond Kong",
      "created_at": "2025-03-12T07:51:41.115Z",
      "updated_at": "2025-03-12T07:51:41.115Z",
      "cooked": "<p>You are really a genius. This issue stuck me for a longtime. You script solve my problem.</p>",
      "raw": "You are really a genius. This issue stuck me for a longtime. You script solve my problem.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 5.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1336
    },
    {
      "id": 9688,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-12T09:29:28.302Z",
      "updated_at": "2025-03-12T09:30:52.374Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/kongdd\">@kongdd</a>, welcome and thank you for your question! I have changed your post’s title to bring it in line with the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a> and thus make it easier to understand from the title:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>I also moved it to <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> and added the <a class=\"hashtag-cooked\" href=\"/tag/literature\" data-type=\"tag\" data-slug=\"literature\" data-id=\"39\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>literature</span></a> tag, as it makes your question easier to find.</p>\n<p>Finally, if you feel the response you got has sufficiently answered your question, be sure to give it a checkmark <img src=\"https://forum.typst.app/images/emoji/apple/ballot_box_with_check.png?v=12\" title=\":ballot_box_with_check:\" class=\"emoji\" alt=\":ballot_box_with_check:\" loading=\"lazy\" width=\"20\" height=\"20\">. This will help others find the solution in the future. Thanks!</p>",
      "raw": "Hi @kongdd, welcome and thank you for your question! I have changed your post’s title to bring it in line with the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11) and thus make it easier to understand from the title:\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nI also moved it to #questions and added the #literature tag, as it makes your question easier to find.\n\nFinally, if you feel the response you got has sufficiently answered your question, be sure to give it a checkmark :ballot_box_with_check:. This will help others find the solution in the future. Thanks!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 9702,
      "post_number": 5,
      "username": "flokl",
      "name": "",
      "created_at": "2025-03-12T15:08:03.124Z",
      "updated_at": "2025-03-12T15:08:03.124Z",
      "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"SillyFreak\" data-post=\"4\" data-topic=\"3208\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/sillyfreak/48/1483_2.png\" class=\"avatar\"> SillyFreak:</div>\n<blockquote>\n<p>I have changed your post’s title […]</p>\n</blockquote>\n</aside>\n<p>I have done it for you <img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "[quote=\"SillyFreak, post:4, topic:3208\"]\nI have changed your post’s title [...]\n[/quote]\n\nI have done it for you :smile:",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9708,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-12T16:05:23.660Z",
      "updated_at": "2025-03-12T16:05:23.660Z",
      "cooked": "<p>whoops, I guess I forgot to save :P</p>",
      "raw": "whoops, I guess I forgot to save :P",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 3.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:50:27.137247"
}
{
  "topic_metadata": {
    "id": 3210,
    "title": "How to access the revisions variable in pandoc template?",
    "slug": "how-to-access-the-revisions-variable-in-pandoc-template",
    "posts_count": 4,
    "created_at": "2025-03-12T04:52:39.611Z",
    "last_posted_at": "2025-03-13T08:09:50.821Z",
    "views": 78,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "irontiga",
    "tags": [
      "pandoc"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 518
  },
  "posts": [
    {
      "id": 9679,
      "post_number": 1,
      "username": "irontiga",
      "name": "irontiga",
      "created_at": "2025-03-12T04:52:39.706Z",
      "updated_at": "2025-03-13T08:09:01.986Z",
      "cooked": "<p>Hi! Working with Pandoc to convert markdown to pdf via typst. I’m trying to access the first item in an array that’s pulled in from a markdown file.</p>\n<p>In my MD file i have</p>\n<pre data-code-wrap=\"markdown\"><code class=\"lang-markdown\">---\ntitle: My Title\nrevisions:\n    - action: Prepared\n      author: Joe\n      date: 10.03.2025\n    - action: Dave\n      author: name 1\n      date: 12.03.2025\n---\n</code></pre>\n<p>Then in my typst template i can do the following to create a table. This works perfectly.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#table(\n  columns: (1fr, auto, auto),\n  inset: 10pt,\n  align: horizon,\n  table.header(\n    [*Date*], [*Action*], [*Name*],\n  ),\n  $for(revisions)$\n[$revisions.date$],\n[$revisions.action$],\n[$revisions.author$],\n$endfor$\n)\n</code></pre>\n<p>My trouble is that i’m trying to access only the first dict in the array, using something like <code>revisions.at(0)</code> - however I have had no luck whatsoever with this.</p>\n<pre><code class=\"lang-auto\">revisions.at(0).date\n</code></pre>\n<p>results in</p>\n<pre><code class=\"lang-auto\">error: unknown variable: revisions\n    ┌─ toPdfViaTempFile18345-0.typ:141:1\n    │\n141 │ #revisions.at(0).date\n</code></pre>\n<p>Whilst If I try to use the <code>$revision.at(0).date$</code> I get weird syntax errors. I’m rather lost! How would I access the first item in this array? Thank you guys very much for any help on this!</p>",
      "raw": "Hi! Working with Pandoc to convert markdown to pdf via typst. I'm trying to access the first item in an array that's pulled in from a markdown file.\n\nIn my MD file i have\n```markdown\n---\ntitle: My Title\nrevisions:\n    - action: Prepared\n      author: Joe\n      date: 10.03.2025\n    - action: Dave\n      author: name 1\n      date: 12.03.2025\n---\n```\n\nThen in my typst template i can do the following to create a table. This works perfectly.\n```typst\n#table(\n  columns: (1fr, auto, auto),\n  inset: 10pt,\n  align: horizon,\n  table.header(\n    [*Date*], [*Action*], [*Name*],\n  ),\n  $for(revisions)$\n[$revisions.date$],\n[$revisions.action$],\n[$revisions.author$],\n$endfor$\n)\n```\n\nMy trouble is that i'm trying to access only the first dict in the array, using something like `revisions.at(0)` - however I have had no luck whatsoever with this.\n```\nrevisions.at(0).date\n```\nresults in\n```\nerror: unknown variable: revisions\n    ┌─ toPdfViaTempFile18345-0.typ:141:1\n    │\n141 │ #revisions.at(0).date\n```\nWhilst If I try to use the `$revision.at(0).date$` I get weird syntax errors. I'm rather lost! How would I access the first item in this array? Thank you guys very much for any help on this!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 150.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1337
    },
    {
      "id": 9719,
      "post_number": 2,
      "username": "sitandr",
      "name": "sitandr",
      "created_at": "2025-03-12T23:26:49.196Z",
      "updated_at": "2025-03-12T23:26:49.196Z",
      "cooked": "<p>Ok, as I understand, it’s about how pandoc works, not Typst.</p>\n<p>The <code>revisions</code> you use here isn’t a variable in your generated Typst document. It’s an internal thing of pandoc that is used for templating. To see how to access “first” element here, see Pandoc’s guide on templating, I guess.</p>\n<p>Of course, you can create such a variable inside Typst document, with things like (not sure at all about syntax, consult pandoc docs, just to show the general idea):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let revs = (\n    $for(revisions)$\n    (\n    $for(revisions.item)\n    $revisions.item.key$: $revisions.item.value$\n    $endfor$\n    )\n    $endfor$\n)\n</code></pre>\n<p>And use Typst code to work with <code>revs</code> as intended.</p>\n<p>Btw, I would strongly recommend to avoid using Markdown if possible and just write everything with Typst Markdown, if possible. That would be much simpler and comfortable to work with. There is even a package to render Markdown, the one you are used to, just with Typst scripting (<code>cmarker</code>).</p>\n<p>Feel free to ask more questions. Good luck!</p>",
      "raw": "Ok, as I understand, it's about how pandoc works, not Typst.\n\nThe `revisions` you use here isn't a variable in your generated Typst document. It's an internal thing of pandoc that is used for templating. To see how to access \"first\" element here, see Pandoc's guide on templating, I guess.\n\nOf course, you can create such a variable inside Typst document, with things like (not sure at all about syntax, consult pandoc docs, just to show the general idea):\n\n```typ\n#let revs = (\n    $for(revisions)$\n    (\n    $for(revisions.item)\n    $revisions.item.key$: $revisions.item.value$\n    $endfor$\n    )\n    $endfor$\n)\n```\n\nAnd use Typst code to work with `revs` as intended.\n\nBtw, I would strongly recommend to avoid using Markdown if possible and just write everything with Typst Markdown, if possible. That would be much simpler and comfortable to work with. There is even a package to render Markdown, the one you are used to, just with Typst scripting (`cmarker`).\n\nFeel free to ask more questions. Good luck!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 8.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 19
    },
    {
      "id": 9722,
      "post_number": 3,
      "username": "irontiga",
      "name": "irontiga",
      "created_at": "2025-03-13T01:20:35.444Z",
      "updated_at": "2025-03-13T01:20:35.444Z",
      "cooked": "<p>Hi sitandr!</p>\n<p>Thankyou so much! That makes perfect sense - the $$ made me think it was typst but yes, it is indeed pandoc templating prior to being run through typst. The following ended up working for me:</p>\n<pre><code class=\"lang-auto\">$for(revisions/first)$\n    $it.author$ - $it.date$\n$endfor$\n</code></pre>\n<p>as per <a href=\"https://pandoc.org/chunkedhtml-demo/6.1-template-syntax.html\" rel=\"noopener nofollow ugc\">https://pandoc.org/chunkedhtml-demo/6.1-template-syntax.html</a></p>\n<p>Cheers for pointing me in the right direction! I will have a look at what you mentioned with regards to cmarker- although the main goal here is to have the very least friction possible to creating documents, hence going for markdown.</p>\n<p>Regards</p>",
      "raw": "Hi sitandr!\n\nThankyou so much! That makes perfect sense - the $$ made me think it was typst but yes, it is indeed pandoc templating prior to being run through typst. The following ended up working for me:\n```\n$for(revisions/first)$\n    $it.author$ - $it.date$\n$endfor$\n```\nas per [https://pandoc.org/chunkedhtml-demo/6.1-template-syntax.html](https://pandoc.org/chunkedhtml-demo/6.1-template-syntax.html)\n\nCheers for pointing me in the right direction! I will have a look at what you mentioned with regards to cmarker- although the main goal here is to have the very least friction possible to creating documents, hence going for markdown.\n\nRegards",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 13,
      "score": 2.6,
      "accepted_answer": true,
      "trust_level": 0,
      "user_id": 1337
    },
    {
      "id": 9742,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-13T08:09:50.821Z",
      "updated_at": "2025-03-13T08:09:50.821Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/irontiga\">@irontiga</a>, I’ve renamed your topic to “How to access the revisions variable in pandoc template?”, don’t hesitate to read through <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>.</p>\n<aside class=\"quote no-group\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n</aside>",
      "raw": "Hello @irontiga, I've renamed your topic to \"How to access the revisions variable in pandoc template?\", don't hesitate to read through https://forum.typst.app/t/how-to-post-in-the-questions-category/11.\n\n[quote=\"reknih, post:1, topic:11\"]\n**Good titles are questions you would ask your friend about Typst.**\n[/quote]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 13,
      "score": 2.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:50:26.099864"
}
{
  "topic_metadata": {
    "id": 3214,
    "title": "How can I prevent indent on paragraphs with run-in headings?",
    "slug": "how-can-i-prevent-indent-on-paragraphs-with-run-in-headings",
    "posts_count": 5,
    "created_at": "2025-03-12T09:47:27.793Z",
    "last_posted_at": "2025-03-13T08:43:52.381Z",
    "views": 83,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "sijo",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 374
  },
  "posts": [
    {
      "id": 9691,
      "post_number": 1,
      "username": "AJ_Rush",
      "name": "AJ Rush",
      "created_at": "2025-03-12T09:47:27.793Z",
      "updated_at": "2025-03-12T09:54:33.425Z",
      "cooked": "<p>My body paragraphs are indented. Run-in headings then also indent. How do I prevent this (aside from manually removing indenting on every body paragraph which follows a run-in heading)?</p>",
      "raw": "My body paragraphs are indented. Run-in headings then also indent. How do I prevent this (aside from manually removing indenting on every body paragraph which follows a run-in heading)?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 134.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 873
    },
    {
      "id": 9693,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-12T09:54:22.317Z",
      "updated_at": "2025-03-12T09:54:22.317Z",
      "cooked": "<p>I think your question is distinct enough that it warrants its own topic; this way people can better find it by the title. Feel free to change it if I didn’t get it right <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Could you add an example of the layout you have? That will help us find the necessary changes to make it work.</p>",
      "raw": "I think your question is distinct enough that it warrants its own topic; this way people can better find it by the title. Feel free to change it if I didn't get it right :slight_smile: \n\nCould you add an example of the layout you have? That will help us find the necessary changes to make it work.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 9707,
      "post_number": 3,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-12T15:48:27.736Z",
      "updated_at": "2025-03-12T15:48:27.736Z",
      "cooked": "<p>This seems to work in this simple example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set par(first-line-indent: (amount: 2em, all: true))\n\n#show par: it =&gt; {\n  if it.first-line-indent == (amount: 0pt, all: false) { return it }\n  let children = it.body.at(\"children\", default: none)\n  if children == none or children.len() == 0 { return it }\n  let child = children.first().at(\"child\", default: none)\n  if child == none { return it }\n  if child.func() != box { return it }\n  let body = child.at(\"body\", default: none)\n  if body == none { return it }\n  if body.func() == figure and body.kind == \"h2\" {\n    return par(first-line-indent: 0pt, it.body)\n  }\n  return it\n}\n\n#show heading.where(level: 2): it =&gt; box(\n  figure(kind: \"h2\", supplement: none, it.body))\n\n= A\n#lorem(30)\n\n== A1\n#lorem(30)\n\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/690209d835dbfa0db39372c604bf939916e62ed8.png\" data-download-href=\"https://forum.typst.app/uploads/default/690209d835dbfa0db39372c604bf939916e62ed8\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/6/690209d835dbfa0db39372c604bf939916e62ed8_2_517x130.png\" alt=\"image\" data-base62-sha1=\"eYWv6NgREmuFxlc8e3P3eN80RUk\" width=\"517\" height=\"130\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/6/690209d835dbfa0db39372c604bf939916e62ed8_2_517x130.png, https://forum.typst.app/uploads/default/optimized/2X/6/690209d835dbfa0db39372c604bf939916e62ed8_2_775x195.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/6/690209d835dbfa0db39372c604bf939916e62ed8_2_1034x260.png 2x\" data-dominant-color=\"F0F0F0\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1130×286 53.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Surely there’s a better way <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "This seems to work in this simple example:\n\n```typ\n#set par(first-line-indent: (amount: 2em, all: true))\n\n#show par: it => {\n  if it.first-line-indent == (amount: 0pt, all: false) { return it }\n  let children = it.body.at(\"children\", default: none)\n  if children == none or children.len() == 0 { return it }\n  let child = children.first().at(\"child\", default: none)\n  if child == none { return it }\n  if child.func() != box { return it }\n  let body = child.at(\"body\", default: none)\n  if body == none { return it }\n  if body.func() == figure and body.kind == \"h2\" {\n    return par(first-line-indent: 0pt, it.body)\n  }\n  return it\n}\n\n#show heading.where(level: 2): it => box(\n  figure(kind: \"h2\", supplement: none, it.body))\n\n= A\n#lorem(30)\n\n== A1\n#lorem(30)\n\n```\n\n![image|690x174, 75%](upload://eYWv6NgREmuFxlc8e3P3eN80RUk.png)\n\nSurely there's a better way :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 18.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9716,
      "post_number": 4,
      "username": "AJ_Rush",
      "name": "AJ Rush",
      "created_at": "2025-03-12T22:52:14.448Z",
      "updated_at": "2025-03-12T22:52:14.448Z",
      "cooked": "<p>Yes, you’ve summed up my problem correctly. Here’s my MWE:</p>\n<pre><code class=\"lang-auto\">#show heading.where(level: 1): it =&gt;     upper(it.body)\n#set par(first-line-indent: 1em)\n\n= Heading\n#lorem(20)\n\n= Heading\n#lorem(20)\n</code></pre>\n<p>Gives me:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/a/a3f815c11e125b4c71a32de8d8414caf06548672.png\" alt=\"image\" data-base62-sha1=\"noxlx0E27xZQ0nRjFvaIIaMSMYq\" width=\"414\" height=\"101\"></p>\n<p>I want it to look like:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/e/ef5bd720097e2eb21e476d0546603111a0b73d35.png\" alt=\"image\" data-base62-sha1=\"y9sSI6JTnkR5CzyQKBbiws3hA69\" width=\"414\" height=\"101\"></p>\n<p>The suggested solution looks clever, also much more complicated than it seems like it ought to be. Particularly if I have more than one style of run-in heading (which I generally do).</p>\n<p>I agree, there should be an easier way.</p>",
      "raw": "Yes, you've summed up my problem correctly. Here's my MWE:\n\n\n```\n#show heading.where(level: 1): it =>     upper(it.body)\n#set par(first-line-indent: 1em)\n\n= Heading\n#lorem(20)\n\n= Heading\n#lorem(20)\n```\n\nGives me:\n![image|414x101](upload://noxlx0E27xZQ0nRjFvaIIaMSMYq.png)\n\nI want it to look like:\n![image|414x101](upload://y9sSI6JTnkR5CzyQKBbiws3hA69.png)\n\nThe suggested solution looks clever, also much more complicated than it seems like it ought to be. Particularly if I have more than one style of run-in heading (which I generally do).\n\nI agree, there should be an easier way.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 14,
      "score": 17.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 873
    },
    {
      "id": 9745,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-13T08:43:52.381Z",
      "updated_at": "2025-03-13T08:44:01.044Z",
      "cooked": "<p>Ah your problem is actually a bit different from what I thought: you’re not using <code>first-line-indent: (all: true, ...)</code>. Then you can solve it by making sure that the headings are always in a “first paragraph” after a block:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): it =&gt; block() + upper(it.body)\n</code></pre>\n<p>You can adjust the <code>block()</code> parameters to tune the spacing.</p>",
      "raw": "Ah your problem is actually a bit different from what I thought: you're not using `first-line-indent: (all: true, ...)`. Then you can solve it by making sure that the headings are always in a \"first paragraph\" after a block:\n\n```typ\n#show heading.where(level: 1): it => block() + upper(it.body)\n```\n\nYou can adjust the `block()` parameters to tune the spacing.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 13,
      "score": 22.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:50:25.327624"
}
{
  "topic_metadata": {
    "id": 322,
    "title": "How to get differently-sized header or footer depending on page number?",
    "slug": "how-to-get-differently-sized-header-or-footer-depending-on-page-number",
    "posts_count": 14,
    "created_at": "2024-09-16T09:56:06.269Z",
    "last_posted_at": "2024-10-25T19:09:11.709Z",
    "views": 1490,
    "like_count": 13,
    "reply_count": 8,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "laurmaedje",
    "tags": [
      "page",
      "header-footer"
    ],
    "category_id": 5,
    "participant_count": 8,
    "word_count": 2804
  },
  "posts": [
    {
      "id": 1201,
      "post_number": 1,
      "username": "maven",
      "name": "",
      "created_at": "2024-09-16T09:56:06.389Z",
      "updated_at": "2024-09-23T07:13:40.877Z",
      "cooked": "<p>With a <code>#set page</code> rule and <code>context</code>, it is possible to define header, footer, and page background depending on the page number.</p>\n<p>How to do something similar for the size of header and footer, meaning page margins? Imagine wanting a much larger footer on odd pages, for example. If I understand correctly, the above approach does not work here because <code>context</code> always produces (opaque) <code>content</code> values, not a length value or other types required for the <code>margin</code> parameter in the <code>page</code> function.</p>",
      "raw": "With a `#set page` rule and `context`, it is possible to define header, footer, and page background depending on the page number.\n\nHow to do something similar for the size of header and footer, meaning page margins? Imagine wanting a much larger footer on odd pages, for example. If I understand correctly, the above approach does not work here because `context` always produces (opaque) `content` values, not a length value or other types required for the `margin` parameter in the `page` function.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 114,
      "score": 5452.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 256
    },
    {
      "id": 1253,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-09-16T12:22:07.193Z",
      "updated_at": "2024-09-16T12:23:12.290Z",
      "cooked": "<p>If you want alternating page margins for binding, i.e., inside and outside margins that alternate based on whether it’s the inner or outer side of a page, you can use <code>inside</code> and <code>outside</code> inside a dictionary for the <code>margin</code> parameter.</p>\n<p>For top and bottom margins, it is indeed more difficult. I think it is currently not possible, precisely because of the reason you stated. As a workaround you can always manually add <code>v(1cm)</code> for example in the header or footer.</p>",
      "raw": "If you want alternating page margins for binding, i.e., inside and outside margins that alternate based on whether it's the inner or outer side of a page, you can use `inside` and `outside` inside a dictionary for the `margin` parameter.\n\nFor top and bottom margins, it is indeed more difficult. I think it is currently not possible, precisely because of the reason you stated. As a workaround you can always manually add `v(1cm)` for example in the header or footer.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 114,
      "score": 77.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 1377,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-16T17:06:06.253Z",
      "updated_at": "2024-09-16T17:13:45.968Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"maven\" data-post=\"1\" data-topic=\"322\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/m/F88938/48.png\" class=\"avatar\"> maven:</div>\n<blockquote>\n<p>With a <code>#set page</code> rule and <code>context</code>, it is possible to define header, footer, and page background depending on the page number.</p>\n</blockquote>\n</aside>\n<p>Yes. But what does “page background” mean? <code>background</code> or <code>fill</code>? <a href=\"https://typst.app/docs/reference/layout/page/\" class=\"inline-onebox\">Page Function – Typst Documentation</a></p>\n<p>Here are a few examples that should cover all basic cases:</p>\n<details>\n<summary>\nset page(header + footer + background)</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(fill: gray, height: 4cm, width: 4cm, margin: 1cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#set page(\n  header: context if is-odd-page() [odd] else [even] + \" header\",\n  footer: context if is-odd-page() [odd] else [even] + \" footer\",\n  background: context if is-odd-page() [odd] else [even] + \" background\",\n)\n#for n in range(1, 5) {\n  [page #n]\n  n += 1\n  pagebreak(weak: true)\n}\n</code></pre>\n<div align=\"center\">\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/3412a0b06ef7e16d2f0262471502b330662dc5f7.png\" alt=\"image\" data-base62-sha1=\"7qEJLidADFa8MOJJs43HE8q2vqv\" width=\"170\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/1229b3e0753b0adce3a2ff25ed0a0ee0ea1d02d5.png\" alt=\"image\" data-base62-sha1=\"2AFWoVRxSx5kllRzqnAEOugKMnP\" width=\"170\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/d5723ca75bc92b143cbe58800d84ddcd91f5bae9.png\" alt=\"image\" data-base62-sha1=\"uses4agNBKq6tetmxM8lQHIuWcF\" width=\"170\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/3cac84bc7335d7157ad7e4a43cf969fac50ce486.png\" alt=\"image\" data-base62-sha1=\"8EKgzVcHnHJ0TNcbrmcY1Qsru1E\" width=\"170\" height=\"170\"></p>\n</div>\n</details>\n<details>\n<summary>\ncontext set page(fill)</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(height: 4cm, width: 4cm, margin: 1cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#for n in range(1, 5) {\n  context {\n    set page(fill: if is-odd-page() { orange } else { purple })\n    [page #n]\n  }\n  n += 1\n  pagebreak(weak: true)\n}\n</code></pre>\n<div align=\"center\">\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/575f2143dd93807b82c257e065a02f47c60d5676.png\" alt=\"image\" data-base62-sha1=\"csVm0c4Jmi42KlJpxL1iFREBftY\" width=\"170\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/afcbbbb3a5fe4f0eaab116b6aba1b3a7139030c8.png\" alt=\"image\" data-base62-sha1=\"p5a3kusQdT76Ki8LIiazjteHfTi\" width=\"170\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/058027641dc539921387a3209b60bdec9b646708.png\" alt=\"image\" data-base62-sha1=\"MEXfVhnLZg1qXmtxRnmO4R6IKk\" width=\"170\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/2896ddfac48d06075a37ccc29756ab26a377690f.png\" alt=\"image\" data-base62-sha1=\"5N4ksVmliQKjkAwG0prfAt4Iroj\" width=\"170\" height=\"170\"></p>\n</div>\n</details>\n<details>\n<summary>\ncontext page(fill)[]</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(height: 4cm, width: 4cm, margin: 1cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#for n in range(1, 5) {\n  context page(fill: if is-odd-page() { orange } else { purple })[\n    page #n\n  ]\n  n += 1\n  pagebreak(weak: true)\n}\n</code></pre>\n<div align=\"center\">\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/575f2143dd93807b82c257e065a02f47c60d5676.png\" alt=\"image\" data-base62-sha1=\"csVm0c4Jmi42KlJpxL1iFREBftY\" width=\"170\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/afcbbbb3a5fe4f0eaab116b6aba1b3a7139030c8.png\" alt=\"image\" data-base62-sha1=\"p5a3kusQdT76Ki8LIiazjteHfTi\" width=\"170\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/058027641dc539921387a3209b60bdec9b646708.png\" alt=\"image\" data-base62-sha1=\"MEXfVhnLZg1qXmtxRnmO4R6IKk\" width=\"170\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/2896ddfac48d06075a37ccc29756ab26a377690f.png\" alt=\"image\" data-base62-sha1=\"5N4ksVmliQKjkAwG0prfAt4Iroj\" width=\"170\" height=\"170\"></p>\n</div>\n</details>\n<details>\n<summary>\nset page(header + footer + background) + context page(fill)[]</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(height: 4cm, width: 4cm, margin: 1cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#set page(\n  header: context if is-odd-page() [odd] else [even] + \" header\",\n  footer: context if is-odd-page() [odd] else [even] + \" footer\",\n  background: context if is-odd-page() [odd] else [even] + \" background\",\n)\n#for n in range(1, 5) {\n  context page(fill: if is-odd-page() { orange } else { purple })[\n    page #n\n  ]\n  n += 1\n  pagebreak(weak: true)\n}\n</code></pre>\n<div align=\"center\">\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/35bc999032dc4488abc8441abec80fdde1c698eb.png\" alt=\"image\" data-base62-sha1=\"7FnnvSXPH5OvpLjc3IljnkFbn6z\" width=\"170\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/cd8991d90961e9d46903af48150e3647dab77eaa.png\" alt=\"image\" data-base62-sha1=\"tkgCDAPMUwR7RS0VDHH4C3cAb7c\" width=\"170\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/74eaae8c59ca0c0c956f7f1a8f5dd7ee372ae9f8.png\" alt=\"image\" data-base62-sha1=\"gGibMDtEi3dgj1BxnZUVzDxmMyY\" width=\"170\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/f87f1b53a9debdd3b1a32803cee931529bc9e5c2.png\" alt=\"image\" data-base62-sha1=\"zsiJJoRCPeNA2S41IgadofFrYHg\" width=\"170\" height=\"170\"></p>\n</div>\n</details>\n<p>Note that some of these only work (correctly or at all) from the git version, meaning they all will work in the future version 0.12.0. Try compiling them with v0.11.1 and see if it works.</p>\n<p>Overall, you can define <code>set page()</code> once at the top of a document if you need for a field that can be of a <code>content</code> type to be set (because <code>context</code> will return <code>content</code> type, at least in the v0.11.1 and in git version from 2024-09-09). This includes <code>header</code>, <code>footer</code>, <code>background</code> etc.</p>\n<p>But if you need to set a field that cannot be of a <code>content</code> type, then you would have to use <code>set page()</code> or <code>page()[]</code> for every new page (where you want the behavior to apply).  This includes <code>fill</code>, <code>margin</code> etc.</p>\n<p>Thankfully, you can split mixed <code>set page()</code> into two: 1 for <code>content</code>-type fields and 1 for other-type fields.</p>\n<aside class=\"quote no-group\" data-username=\"maven\" data-post=\"1\" data-topic=\"322\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/m/F88938/48.png\" class=\"avatar\"> maven:</div>\n<blockquote>\n<p>How to do something similar for the size of header and footer, meaning page margins? Imagine wanting a much larger footer on odd pages, for example.</p>\n</blockquote>\n</aside>\n<p>For <code>margin</code> it’s practically the same thing as the example with <code>fill</code>:</p>\n<details>\n<summary>\nset page(header, footer) + context page(margin)[]</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(fill: gray, height: 4cm, width: 6cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#set page(\n  header: context if is-odd-page() [odd] else [even] + \" header\",\n  footer: context if is-odd-page() [odd] else [even] + \" footer\",\n)\n#for n in range(1, 5) {\n  context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[\n    page #n\n  ]\n  n += 1\n  pagebreak(weak: true)\n}\n</code></pre>\n<div align=\"center\">\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/7c08a7f1e3311c5c55e68252e049116536bba36b.png\" alt=\"image\" data-base62-sha1=\"hHfKBW2zHOjQ1VK2aItuogbimAX\" width=\"255\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/3915bf8d1ecbf73c5e5969ea0d8320e8212c8302.png\" alt=\"image\" data-base62-sha1=\"88ZOiks9lxWKwUj7a2jY7LryPUC\" width=\"255\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/e39c3dede8689077950f5a451d5b399de7f9d029.png\" alt=\"image\" data-base62-sha1=\"wtx8duN4XdM8zGneB5pB05rO7kR\" width=\"255\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/5be474aa4480a270e511c5bcaf1ba3963ba239ac.png\" alt=\"image\" data-base62-sha1=\"d6UUFbx4pf0DMs7DWncYXKoz4de\" width=\"255\" height=\"170\"></p>\n</div>\n</details>\n<details>\n<summary>\nLoop clarification</summary>\n<p>The loop in the examples is a shorthand for this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[page 1]\n#pagebreak()\n#context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[page 2]\n#pagebreak()\n#context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[page 3]\n#pagebreak()\n#context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[page 4]\n</code></pre>\n<p>But you can simplify this by using a wrapper function:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#let page-margin(..args) = {\n  context page(margin: if is-odd-page() { 1cm } else { 1.5cm }, ..args)\n}\n#page-margin[page 1]\n#pagebreak()\n#page-margin[page 2]\n#pagebreak()\n#page-margin[page 3]\n#pagebreak()\n#page-margin[page 4]\n</code></pre>\n</details>\n<p>As you can see, there are quite a few thing that can be written in different ways to achieve the same goal. Use whichever is more readable so that you will be able to maintain/go back to the code snippet and understand what it does.</p>\n<p>One last note that is worth mentioning is that to have a syntax that accesses some context-based value (without the <code>context</code> keyword) in a separate place (to re-use it multiple times) you have to define a function and not a variable.</p>\n<details>\n<summary>\nExamples (variable vs. function)</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// error: `counter(page).get()` can only be used when context is known\n#let is-odd-page = calc.rem(counter(page).get().first(), 2) == 1\n\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n// error: `counter(page).get()` can only be used when context is known\n#let page-margin = page.with(margin: if is-odd-page() { 1cm } else { 1.5cm }) \n\n// Correct:\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#let page-margin(..args) = page(margin: if is-odd-page() { 1cm } else { 1.5cm }, ..args) \n\n// Or consume the context altogether:\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#let page-margin(..args) = context {\n  page(margin: if is-odd-page() { 1cm } else { 1.5cm }, ..args)\n}\n</code></pre>\n</details>",
      "raw": "[quote=\"maven, post:1, topic:322\"]\nWith a `#set page` rule and `context`, it is possible to define header, footer, and page background depending on the page number.\n[/quote]\n\nYes. But what does \"page background\" mean? `background` or `fill`? https://typst.app/docs/reference/layout/page/\n\nHere are a few examples that should cover all basic cases:\n\n[details=\"set page(header + footer + background)\"]\n```typ\n#set page(fill: gray, height: 4cm, width: 4cm, margin: 1cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#set page(\n  header: context if is-odd-page() [odd] else [even] + \" header\",\n  footer: context if is-odd-page() [odd] else [even] + \" footer\",\n  background: context if is-odd-page() [odd] else [even] + \" background\",\n)\n#for n in range(1, 5) {\n  [page #n]\n  n += 1\n  pagebreak(weak: true)\n}\n```\n\n<div align=\"center\">\n\n![image|227x227, 75%](upload://7qEJLidADFa8MOJJs43HE8q2vqv.png)\n\n![image|227x227, 75%](upload://2AFWoVRxSx5kllRzqnAEOugKMnP.png)\n\n![image|227x227, 75%](upload://uses4agNBKq6tetmxM8lQHIuWcF.png)\n\n![image|227x227, 75%](upload://8EKgzVcHnHJ0TNcbrmcY1Qsru1E.png)\n</div>\n[/details]\n\n[details=\"context set page(fill)\"]\n```typ\n#set page(height: 4cm, width: 4cm, margin: 1cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#for n in range(1, 5) {\n  context {\n    set page(fill: if is-odd-page() { orange } else { purple })\n    [page #n]\n  }\n  n += 1\n  pagebreak(weak: true)\n}\n```\n\n<div align=\"center\">\n\n![image|227x227, 75%](upload://csVm0c4Jmi42KlJpxL1iFREBftY.png)\n\n![image|227x227, 75%](upload://p5a3kusQdT76Ki8LIiazjteHfTi.png)\n\n![image|227x227, 75%](upload://MEXfVhnLZg1qXmtxRnmO4R6IKk.png)\n\n![image|227x227, 75%](upload://5N4ksVmliQKjkAwG0prfAt4Iroj.png)\n</div>\n[/details]\n\n[details=\"context page(fill)[]\"]\n```typ\n#set page(height: 4cm, width: 4cm, margin: 1cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#for n in range(1, 5) {\n  context page(fill: if is-odd-page() { orange } else { purple })[\n    page #n\n  ]\n  n += 1\n  pagebreak(weak: true)\n}\n```\n\n<div align=\"center\">\n\n![image|227x227, 75%](upload://csVm0c4Jmi42KlJpxL1iFREBftY.png)\n\n![image|227x227, 75%](upload://p5a3kusQdT76Ki8LIiazjteHfTi.png)\n\n![image|227x227, 75%](upload://MEXfVhnLZg1qXmtxRnmO4R6IKk.png)\n\n![image|227x227, 75%](upload://5N4ksVmliQKjkAwG0prfAt4Iroj.png)\n</div>\n[/details]\n\n[details=\"set page(header + footer + background) + context page(fill)[]\"]\n```typ\n#set page(height: 4cm, width: 4cm, margin: 1cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#set page(\n  header: context if is-odd-page() [odd] else [even] + \" header\",\n  footer: context if is-odd-page() [odd] else [even] + \" footer\",\n  background: context if is-odd-page() [odd] else [even] + \" background\",\n)\n#for n in range(1, 5) {\n  context page(fill: if is-odd-page() { orange } else { purple })[\n    page #n\n  ]\n  n += 1\n  pagebreak(weak: true)\n}\n```\n\n<div align=\"center\">\n\n![image|227x227, 75%](upload://7FnnvSXPH5OvpLjc3IljnkFbn6z.png)\n\n![image|227x227, 75%](upload://tkgCDAPMUwR7RS0VDHH4C3cAb7c.png)\n\n![image|227x227, 75%](upload://gGibMDtEi3dgj1BxnZUVzDxmMyY.png)\n\n![image|227x227, 75%](upload://zsiJJoRCPeNA2S41IgadofFrYHg.png)\n</div>\n[/details]\n\nNote that some of these only work (correctly or at all) from the git version, meaning they all will work in the future version 0.12.0. Try compiling them with v0.11.1 and see if it works.\n\nOverall, you can define `set page()` once at the top of a document if you need for a field that can be of a `content` type to be set (because `context` will return `content` type, at least in the v0.11.1 and in git version from 2024-09-09). This includes `header`, `footer`, `background` etc.\n\nBut if you need to set a field that cannot be of a `content` type, then you would have to use `set page()` or `page()[]` for every new page (where you want the behavior to apply).  This includes `fill`, `margin` etc.\n\nThankfully, you can split mixed `set page()` into two: 1 for `content`-type fields and 1 for other-type fields.\n\n[quote=\"maven, post:1, topic:322\"]\nHow to do something similar for the size of header and footer, meaning page margins? Imagine wanting a much larger footer on odd pages, for example.\n[/quote]\n\nFor `margin` it's practically the same thing as the example with `fill`:\n\n[details=\"set page(header, footer) + context page(margin)[]\"]\n```typ\n#set page(fill: gray, height: 4cm, width: 6cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#set page(\n  header: context if is-odd-page() [odd] else [even] + \" header\",\n  footer: context if is-odd-page() [odd] else [even] + \" footer\",\n)\n#for n in range(1, 5) {\n  context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[\n    page #n\n  ]\n  n += 1\n  pagebreak(weak: true)\n}\n```\n\n<div align=\"center\">\n\n![image|340x227, 75%](upload://hHfKBW2zHOjQ1VK2aItuogbimAX.png)\n\n![image|340x227, 75%](upload://88ZOiks9lxWKwUj7a2jY7LryPUC.png)\n\n![image|340x227, 75%](upload://wtx8duN4XdM8zGneB5pB05rO7kR.png)\n\n![image|340x227, 75%](upload://d6UUFbx4pf0DMs7DWncYXKoz4de.png)\n</div>\n[/details]\n\n[details=\"Loop clarification\"]\n\nThe loop in the examples is a shorthand for this:\n\n```typ\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[page 1]\n#pagebreak()\n#context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[page 2]\n#pagebreak()\n#context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[page 3]\n#pagebreak()\n#context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[page 4]\n```\n\nBut you can simplify this by using a wrapper function:\n\n```typ\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#let page-margin(..args) = {\n  context page(margin: if is-odd-page() { 1cm } else { 1.5cm }, ..args)\n}\n#page-margin[page 1]\n#pagebreak()\n#page-margin[page 2]\n#pagebreak()\n#page-margin[page 3]\n#pagebreak()\n#page-margin[page 4]\n```\n\n[/details]\n\nAs you can see, there are quite a few thing that can be written in different ways to achieve the same goal. Use whichever is more readable so that you will be able to maintain/go back to the code snippet and understand what it does.\n\nOne last note that is worth mentioning is that to have a syntax that accesses some context-based value (without the `context` keyword) in a separate place (to re-use it multiple times) you have to define a function and not a variable.\n\n[details=\"Examples (variable vs. function)\"]\n```typ\n// error: `counter(page).get()` can only be used when context is known\n#let is-odd-page = calc.rem(counter(page).get().first(), 2) == 1\n\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n// error: `counter(page).get()` can only be used when context is known\n#let page-margin = page.with(margin: if is-odd-page() { 1cm } else { 1.5cm }) \n\n// Correct:\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#let page-margin(..args) = page(margin: if is-odd-page() { 1cm } else { 1.5cm }, ..args) \n\n// Or consume the context altogether:\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#let page-margin(..args) = context {\n  page(margin: if is-odd-page() { 1cm } else { 1.5cm }, ..args)\n}\n```\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 3,
      "quote_count": 1,
      "like_count": 2,
      "reads": 108,
      "score": 251.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 1623,
      "post_number": 4,
      "username": "maven",
      "name": "",
      "created_at": "2024-09-17T13:18:05.209Z",
      "updated_at": "2024-09-17T13:18:05.209Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"xkevio\" data-post=\"2\" data-topic=\"322\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/xkevio/48/37_2.png\" class=\"avatar\"> xkevio:</div>\n<blockquote>\n<p>As a workaround you can always manually add <code>v(1cm)</code> for example in the header or footer.</p>\n</blockquote>\n</aside>\n<p>That does not change the size of the header/footer however. The header/footer content is then just clipped at page top/bottom.</p>",
      "raw": "[quote=\"xkevio, post:2, topic:322\"]\nAs a workaround you can always manually add `v(1cm)` for example in the header or footer.\n[/quote]\n\nThat does not change the size of the header/footer however. The header/footer content is then just clipped at page top/bottom.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 84,
      "score": 26.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 256
    },
    {
      "id": 1625,
      "post_number": 5,
      "username": "maven",
      "name": "",
      "created_at": "2024-09-17T13:38:06.522Z",
      "updated_at": "2024-09-17T13:38:06.522Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/andrew\">@Andrew</a></p>\n<p>Thanks for the extensive reply. Unfortunately, my question is still not answered. (I suspect that it’s simply not possible though.)</p>\n<p>When using <code>page</code> as a function, a “subdocument” of sorts with its own content is created and inserted as separate pages. What I wanted was to have a document (imagine it just being <code>#lorem(10000)</code>) have non-trivial per-page styling. This is possible, as everyone agrees, for header/footer and background content, but probably not for other page properties like margins.</p>\n<p>Unless someone knows more?</p>\n<p>I thought that <code>#show: it =&gt; ...</code> might help, but it doesn’t, as far as I could see, because it postprocesses the main document content, not the typeset pages…</p>\n<p>By the way, there is a simple workaround for <code>fill</code>, using <code>background</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// instead of `#set page(fill: context { ... })`\n#set page(\n  background: context {\n    let color = if calc.rem(counter(page).get().at(0), 2) == 0 {\n      aqua\n    } else {\n      lime\n    }\n    rect(\n      height: 100%,\n      width: 100%,\n      fill: color,\n    )\n  }\n)\n\n#lorem(10000)\n</code></pre>",
      "raw": "@Andrew \n\nThanks for the extensive reply. Unfortunately, my question is still not answered. (I suspect that it's simply not possible though.)\n\nWhen using `page` as a function, a \"subdocument\" of sorts with its own content is created and inserted as separate pages. What I wanted was to have a document (imagine it just being `#lorem(10000)`) have non-trivial per-page styling. This is possible, as everyone agrees, for header/footer and background content, but probably not for other page properties like margins.\n\nUnless someone knows more?\n\nI thought that `#show: it => ...` might help, but it doesn't, as far as I could see, because it postprocesses the main document content, not the typeset pages...\n\nBy the way, there is a simple workaround for `fill`, using `background`:\n\n```typ\n// instead of `#set page(fill: context { ... })`\n#set page(\n  background: context {\n    let color = if calc.rem(counter(page).get().at(0), 2) == 0 {\n      aqua\n    } else {\n      lime\n    }\n    rect(\n      height: 100%,\n      width: 100%,\n      fill: color,\n    )\n  }\n)\n\n#lorem(10000)\n```",
      "reply_to_post_number": 3,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 85,
      "score": 76.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 256
    },
    {
      "id": 1628,
      "post_number": 6,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-09-17T13:48:47.563Z",
      "updated_at": "2024-09-17T13:48:47.563Z",
      "cooked": "<p>I don’t think you can do this at the moment, there are some related discussions about specifying styles which depend on other styles scattered over various issues.</p>\n<p>One I remember which is fairly similar at the core is defining themes for documents using a state variable, the same problem presented itself for setting the colors depending on the variable in the state, e.g.:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let theme = state(\"theme\", (\n  foreground: black,\n  background: white,\n))\n\n#set text(fill: theme.get()) // doens't work, needs context\n#set text(fill: context theme.get()) // doens't work, is opaque\n</code></pre>\n<p>You can see the whole discussion here:</p>\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/typst/issues/3104\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/issues/3104\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/typst/issues/3104\" target=\"_blank\" rel=\"noopener nofollow ugc\">Theme-dependent default color value, so packages don't use hardcoded `black` as the default line/fill color</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2023-12-30\" data-time=\"20:17:53\" data-timezone=\"UTC\">08:17PM - 30 Dec 23 UTC</span>\n      </div>\n\n        <div class=\"date\">\n          closed <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-02-28\" data-time=\"11:30:03\" data-timezone=\"UTC\">11:30AM - 28 Feb 24 UTC</span>\n        </div>\n\n      <div class=\"user\">\n        <a href=\"https://github.com/Leedehai\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n          <img alt=\"Leedehai\" src=\"https://forum.typst.app/uploads/default/original/1X/4d228dd918476710f282b0bed56bcfbb13e0225d.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"6E98C3\">\n          Leedehai\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          feature request\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">### Description\n\nAs discussed in Discord, nowadays authors of packages often s<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\">et the default color of strokes, filles etc. to be `black`, while in most cases what they actually intended is \"the foreground color\". At the moment, using `black` as the default color is okay since the only current export format is PDF and PDF's background is almost always white.\n\nHowever, this assumption will change when Typst supports [HTML export]([HTML output](https://github.com/typst/typst/issues/721)) format, where the background color could be black-ish (especially Dark Mode, if Typst wants to [support this trend](https://bootcamp.uxdesign.cc/the-rise-of-dark-mode-a-design-trend-thats-here-to-stay-fdcacc28bd30)) or other customizable theme color. Therefore, we need to provide a color value that is theme-aware, so that package authors can set the default stroke/fill color to this value, instead of hardcoding it to `black`.\n\n👉 This might look a bit too ahead-thinking at the first glance, but in fact there's value to provide this feature early on. Otherwise, packages would be locked in the hardcoded `black` default color, and it would be a HUGE pain to ask third-party packages to migrate to theme-dependent default color later when Typst supports Dark Mode (or user-customizable themes).\n\n---\n🔔  Below is a _possible_ API proposal. There can be widely different ways to address the issue above. This proposal _is not tied_ to the issue in and of itself.\n\nA possible API (thanks to @tingerrr) is\n```typ\n#set color(theme: (fg: black, bg: white))\n\n#let draw-something(..., color:  color.theme(\"fg\")) = { ... }  // A package function's implementation\n```\n`color.theme(\"fg\")` will pick the `theme.fg` color customized above, and if it's missing or no theme was set, it defaults to `black`.\n\nA detail worth noting is `color.theme()`'s computation needs to take `Location` into account, because the actual color value of the default color depends on where `draw-something()` is called in the user doc.\n\n\n### Use Case\n\nIf one day Typst supports Dark Mode, packages that use `color.theme(\"fg\")` (instead of hardcoded `black`) as the default color can still draw nicely. Otherwise, those packages would render bad, and therefore Dark Mode wouldn't be enabled after all, and the impression \"Typst doesn't support Dark Mode nicely; let's use X instead\" might ensue.</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>While the underlying motivation different, the problem of one of the solutions was the same and remains unsolved. I outlined some ideas for resolving some of the style values contextually (see the comment about <code>Lazy Colors</code>, which could probably be applied to all style rules).</p>",
      "raw": "I don't think you can do this at the moment, there are some related discussions about specifying styles which depend on other styles scattered over various issues.\n\nOne I remember which is fairly similar at the core is defining themes for documents using a state variable, the same problem presented itself for setting the colors depending on the variable in the state, e.g.:\n\n```typ\n#let theme = state(\"theme\", (\n  foreground: black,\n  background: white,\n))\n\n#set text(fill: theme.get()) // doens't work, needs context\n#set text(fill: context theme.get()) // doens't work, is opaque\n```\n You can see the whole discussion here:\n\nhttps://github.com/typst/typst/issues/3104\n\nWhile the underlying motivation different, the problem of one of the solutions was the same and remains unsolved. I outlined some ideas for resolving some of the style values contextually (see the comment about `Lazy Colors`, which could probably be applied to all style rules).",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 80,
      "score": 45.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 1636,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-17T14:12:54.868Z",
      "updated_at": "2024-09-17T14:12:54.868Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"maven\" data-post=\"5\" data-topic=\"322\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/m/F88938/48.png\" class=\"avatar\"> maven:</div>\n<blockquote>\n<p>Unfortunately, my question is still not answered.</p>\n</blockquote>\n</aside>\n<aside class=\"quote no-group\" data-username=\"maven\" data-post=\"1\" data-topic=\"322\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/m/F88938/48.png\" class=\"avatar\"> maven:</div>\n<blockquote>\n<p>How to do something similar for the size of header and footer, meaning page margins? Imagine wanting a much larger footer on odd pages, for example.</p>\n</blockquote>\n</aside>\n<p>I don’t understand how this does not answer the question:</p>\n<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"3\" data-topic=\"322\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>For <code>margin</code> it’s practically the same thing as the example with <code>fill</code>:</p>\n<details>\n<summary>\nset page(header, footer) + context page(margin)[]</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(fill: gray, height: 4cm, width: 6cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#set page(\n  header: context if is-odd-page() [odd] else [even] + \" header\",\n  footer: context if is-odd-page() [odd] else [even] + \" footer\",\n)\n#for n in range(1, 5) {\n  context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[\n    page #n\n  ]\n  n += 1\n  pagebreak(weak: true)\n}\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/7c08a7f1e3311c5c55e68252e049116536bba36b.png\" alt=\"image\" data-base62-sha1=\"hHfKBW2zHOjQ1VK2aItuogbimAX\" width=\"255\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/3915bf8d1ecbf73c5e5969ea0d8320e8212c8302.png\" alt=\"image\" data-base62-sha1=\"88ZOiks9lxWKwUj7a2jY7LryPUC\" width=\"255\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/e39c3dede8689077950f5a451d5b399de7f9d029.png\" alt=\"image\" data-base62-sha1=\"wtx8duN4XdM8zGneB5pB05rO7kR\" width=\"255\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/5be474aa4480a270e511c5bcaf1ba3963ba239ac.png\" alt=\"image\" data-base62-sha1=\"d6UUFbx4pf0DMs7DWncYXKoz4de\" width=\"255\" height=\"170\"></p>\n</details>\n</blockquote>\n</aside>\n<p>The code does allow you to have a much larger footer/header (margins) on odd pages than on even pages. Well, actually, I messed up a little, I set smaller margins for odd pages, but the fix is to just swap the values:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">context page(margin: if is-odd-page() { 1.5cm } else { 1cm })[\n</code></pre>\n<p>Maybe you mean how to do the same thing but without calling <code>context page()[]</code> or <code>context [#set page();]</code> at the start of every new page? Meaning, you are only allowed to call <code>set page()</code> once at the very top of a document. Then I don’t think it is possible.</p>\n<aside class=\"quote no-group\" data-username=\"maven\" data-post=\"5\" data-topic=\"322\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/m/F88938/48.png\" class=\"avatar\"> maven:</div>\n<blockquote>\n<p>By the way, there is a simple workaround for <code>fill</code>, using <code>background</code></p>\n</blockquote>\n</aside>\n<p>If I <em>now</em> understand correctly, then sure. There is a similar topic, where I wrote a <a href=\"https://forum.typst.app/t/how-to-use-a-pattern-image-as-the-page-background/370/6\">post</a> comparing <code>page.fill</code> and <code>page.background</code>.</p>",
      "raw": "[quote=\"maven, post:5, topic:322\"]\nUnfortunately, my question is still not answered.\n[/quote]\n\n[quote=\"maven, post:1, topic:322\"]\nHow to do something similar for the size of header and footer, meaning page margins? Imagine wanting a much larger footer on odd pages, for example.\n[/quote]\n\nI don't understand how this does not answer the question:\n\n[quote=\"Andrew, post:3, topic:322\"]\nFor `margin` it’s practically the same thing as the example with `fill`:\n\n[details=\"set page(header, footer) + context page(margin)[]\"]\n```typ\n#set page(fill: gray, height: 4cm, width: 6cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#set page(\n  header: context if is-odd-page() [odd] else [even] + \" header\",\n  footer: context if is-odd-page() [odd] else [even] + \" footer\",\n)\n#for n in range(1, 5) {\n  context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[\n    page #n\n  ]\n  n += 1\n  pagebreak(weak: true)\n}\n```\n\n![image|255x170](upload://hHfKBW2zHOjQ1VK2aItuogbimAX)\n\n![image|255x170](upload://88ZOiks9lxWKwUj7a2jY7LryPUC)\n\n![image|255x170](upload://wtx8duN4XdM8zGneB5pB05rO7kR)\n\n![image|255x170](upload://d6UUFbx4pf0DMs7DWncYXKoz4de)\n[/details]\n[/quote]\n\nThe code does allow you to have a much larger footer/header (margins) on odd pages than on even pages. Well, actually, I messed up a little, I set smaller margins for odd pages, but the fix is to just swap the values:\n\n```typc\ncontext page(margin: if is-odd-page() { 1.5cm } else { 1cm })[\n```\n\nMaybe you mean how to do the same thing but without calling `context page()[]` or `context [#set page();]` at the start of every new page? Meaning, you are only allowed to call `set page()` once at the very top of a document. Then I don't think it is possible.\n\n[quote=\"maven, post:5, topic:322\"]\nBy the way, there is a simple workaround for `fill`, using `background`\n[/quote]\n\nIf I *now* understand correctly, then sure. There is a similar topic, where I wrote a [post](https://forum.typst.app/t/how-to-use-a-pattern-image-as-the-page-background/370/6) comparing `page.fill` and `page.background`.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 3,
      "like_count": 0,
      "reads": 81,
      "score": 76.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 1640,
      "post_number": 8,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-09-17T14:18:28.858Z",
      "updated_at": "2024-09-17T14:18:28.858Z",
      "cooked": "<p>I can confirm that it is not possible. Especially varying side margins are hard to implement because the paragraph width can then change based on where a pagebreak falls. That’s why inside/outside margins are ok: They don’t affect the inner width in this way.</p>\n<p>There are plans to make this kind of stuff possible at the layout engine level in the future.</p>",
      "raw": "I can confirm that it is not possible. Especially varying side margins are hard to implement because the paragraph width can then change based on where a pagebreak falls. That's why inside/outside margins are ok: They don't affect the inner width in this way.\n\nThere are plans to make this kind of stuff possible at the layout engine level in the future.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 4,
      "reads": 78,
      "score": 200.4,
      "accepted_answer": true,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 1667,
      "post_number": 9,
      "username": "maven",
      "name": "",
      "created_at": "2024-09-17T15:17:22.355Z",
      "updated_at": "2024-09-17T15:17:22.355Z",
      "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"Andrew\" data-post=\"7\" data-topic=\"322\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>I don’t understand how this does not answer the question:</p>\n<p>For <code>margin</code> it’s practically the same thing as the example with <code>fill</code>:</p>\n<p>set page(header, footer) + context page(margin)<span class=\"chcklst-box fa fa-square-o fa-fw\"></span></p>\n<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"3\" data-topic=\"322\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">#set page(fill: gray, height: 4cm, width: 6cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#set page(\n  header: context if is-odd-page() [odd] else [even] + \" header\",\n  footer: context if is-odd-page() [odd] else [even] + \" footer\",\n)\n#for n in range(1, 5) {\n  context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[\n    page #n\n  ]\n  n += 1\n  pagebreak(weak: true)\n}\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/7c08a7f1e3311c5c55e68252e049116536bba36b.png\" alt=\"image\" data-base62-sha1=\"hHfKBW2zHOjQ1VK2aItuogbimAX\" width=\"255\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/3915bf8d1ecbf73c5e5969ea0d8320e8212c8302.png\" alt=\"image\" data-base62-sha1=\"88ZOiks9lxWKwUj7a2jY7LryPUC\" width=\"255\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/e39c3dede8689077950f5a451d5b399de7f9d029.png\" alt=\"image\" data-base62-sha1=\"wtx8duN4XdM8zGneB5pB05rO7kR\" width=\"255\" height=\"170\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/5be474aa4480a270e511c5bcaf1ba3963ba239ac.png\" alt=\"image\" data-base62-sha1=\"d6UUFbx4pf0DMs7DWncYXKoz4de\" width=\"255\" height=\"170\"></p>\n</blockquote>\n</aside>\n<p>The code does allow you to have a much larger footer/header (margins) on odd pages than on even pages.</p>\n</blockquote>\n</aside>\n<p>Let me still reply to this: You’re calling <code>page</code> multiple times to create pages with specific properties. That of course you can do, but then, each of those pages has separate content provided to each <code>page</code> call. In such a case, depending on what you want to do, you probably don’t even need <code>context</code>, just a good old <code>page</code> call with whatever arguments/properties you desire per page. I’m aware it’s not exactly the same thing, but when I would create individual separate pages like this, I probably would not use <code>context</code> to set their individual properties.</p>\n<p>What I wanted is to have page-number-specific layout or style (top/bottom margins specifically) applied to the (however many) pages that are typeset from one content value (the “entire” document).</p>\n<p>I hope that clears it up. But thanks for your inputs anyway!</p>\n<p>Cheers</p>",
      "raw": "[quote=\"Andrew, post:7, topic:322\"]\nI don’t understand how this does not answer the question:\n\nFor `margin` it’s practically the same thing as the example with `fill`:\n\nset page(header, footer) + context page(margin)[]\n[quote=\"Andrew, post:3, topic:322\"]\n```\n#set page(fill: gray, height: 4cm, width: 6cm)\n#let is-odd-page() = calc.rem(counter(page).get().first(), 2) == 1\n#set page(\n  header: context if is-odd-page() [odd] else [even] + \" header\",\n  footer: context if is-odd-page() [odd] else [even] + \" footer\",\n)\n#for n in range(1, 5) {\n  context page(margin: if is-odd-page() { 1cm } else { 1.5cm })[\n    page #n\n  ]\n  n += 1\n  pagebreak(weak: true)\n}\n```\n\n![image|255x170](upload://hHfKBW2zHOjQ1VK2aItuogbimAX)\n\n![image|255x170](upload://88ZOiks9lxWKwUj7a2jY7LryPUC)\n\n![image|255x170](upload://wtx8duN4XdM8zGneB5pB05rO7kR)\n\n![image|255x170](upload://d6UUFbx4pf0DMs7DWncYXKoz4de)\n[/quote]\n\nThe code does allow you to have a much larger footer/header (margins) on odd pages than on even pages.\n[/quote]\n\nLet me still reply to this: You're calling `page` multiple times to create pages with specific properties. That of course you can do, but then, each of those pages has separate content provided to each `page` call. In such a case, depending on what you want to do, you probably don't even need `context`, just a good old `page` call with whatever arguments/properties you desire per page. I'm aware it's not exactly the same thing, but when I would create individual separate pages like this, I probably would not use `context` to set their individual properties.\n\nWhat I wanted is to have page-number-specific layout or style (top/bottom margins specifically) applied to the (however many) pages that are typeset from one content value (the \"entire\" document).\n\nI hope that clears it up. But thanks for your inputs anyway!\n\nCheers",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 2,
      "like_count": 0,
      "reads": 79,
      "score": 65.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 256
    },
    {
      "id": 1772,
      "post_number": 10,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-18T14:17:56.737Z",
      "updated_at": "2024-09-18T14:17:56.737Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"maven\" data-post=\"9\" data-topic=\"322\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/m/F88938/48.png\" class=\"avatar\"> maven:</div>\n<blockquote>\n<p>I hope that clears it up.</p>\n</blockquote>\n</aside>\n<p>Yes, it did, thank you.</p>",
      "raw": "[quote=\"maven, post:9, topic:322\"]\nI hope that clears it up.\n[/quote]\n\nYes, it did, thank you.",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 2,
      "reads": 67,
      "score": 68.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3685,
      "post_number": 11,
      "username": "RamkumarKB",
      "name": "Ramkumar KB",
      "created_at": "2024-10-11T03:13:22.826Z",
      "updated_at": "2024-10-11T03:13:22.826Z",
      "cooked": "<p>I have logged an issue, capturing the gist of this discussion, in the Github project - <a href=\"https://github.com/typst/typst/issues/5182\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Ability to use context in page margin attribute · Issue #5182 · typst/typst · GitHub</a></p>",
      "raw": "I have logged an issue, capturing the gist of this discussion, in the Github project - https://github.com/typst/typst/issues/5182",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 12.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 294
    },
    {
      "id": 4624,
      "post_number": 12,
      "username": "mojtaba_baghban",
      "name": "",
      "created_at": "2024-10-24T15:42:40.529Z",
      "updated_at": "2024-10-24T15:42:40.529Z",
      "cooked": "<p>Is it possible to have differently-sized header for odd and even page in new version 0.12?</p>",
      "raw": "Is it possible to have differently-sized header for odd and even page in new version 0.12?",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 52,
      "score": 45.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 671
    },
    {
      "id": 4647,
      "post_number": 13,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-25T07:40:52.764Z",
      "updated_at": "2024-10-25T07:40:52.764Z",
      "cooked": "<p>No, it’s not possible yet.</p>",
      "raw": "No, it's not possible yet.",
      "reply_to_post_number": 12,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 120.8,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 4685,
      "post_number": 14,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-25T19:09:11.709Z",
      "updated_at": "2024-10-25T19:26:38.841Z",
      "cooked": "<p>Here’s an attempt. Unfortunately it leads to layout divergence very easily (as is to be expected with this kind of hack), in particular if you have anything (a paragraph, grid etc.) that spans more than one page at once. You also need to ensure there’s at least <em>one</em> top-level paragraph or block on every page so the workaround is applied. Even though it’s cumbersome and (most of the time) broken, I’ll leave it here in case others want to improve on it.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// === CHANGE THESE ===\n#let smallest-margin = 2em\n#let margin-for(page) = if calc.even(page) { 7em } else { smallest-margin }\n// ====================\n\n#let in-block = metadata(\"Yup, we are in a block\")\n#let in-header = metadata(\"We are in the header\")\n\n// === USE MAKE-HEADER FOR YOUR HEADER ===\n#let make-header(body) = {\n  // Indicate to our show rule we should ignore headers\n  // Use style instead of state to avoid layout divergence\n  set outline(title: in-header)\n  context place(top, dy: -page.header-ascent, {\n  // Pretend stuff inside the header has as much height as our concept of margin allows\n    block(height: margin-for(here().page()), body)\n  })\n}\n\n// Ensure we don't try to place floats inside blocks (doesn't work)\n#show &lt;marg&gt;: set bibliography(title: in-block)\n#show block: it =&gt; {\n  show block: set bibliography(title: in-block)\n  it\n}\n\n#set page(margin: smallest-margin)\n\n// On each top-level paragraph or block\n#show selector(par).or(block): it =&gt; context {\n  if outline.title == in-header {\n    // Don't try to add fake margin inside the header\n    // (it is, itself, limited by the real margin)\n    return it\n  }\n  if bibliography.title == in-block {\n    // Can't parent-scope stuff inside a block.\n    return it\n  }\n  // Add a top float to the page to simulate increased margin.\n  let previous = query(selector(&lt;marg&gt;).before(here()))\n  let this-page = here().page()\n  if previous.len() == 0 or previous.last().location().page() != this-page {\n    [#place(\n      top,\n      float: true,\n      scope: \"parent\",\n      clearance: margin-for(this-page) - smallest-margin,\n    )[] &lt;marg&gt;]\n    it\n  } else {\n    it\n  }\n}\n</code></pre>\n<p>Here’s some sample usage.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// USAGE:\n\n// Use make-header!\n#set page(height: 200pt, header: make-header[\n  #rect(height: 100%)\n])\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#rect(fill: red)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/2ca22a02675805d43f186578d8b0e0faab990a71.png\" data-download-href=\"https://forum.typst.app/uploads/default/2ca22a02675805d43f186578d8b0e0faab990a71\" title=\"output: different margins for even pages\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/2ca22a02675805d43f186578d8b0e0faab990a71_2_368x500.png\" alt=\"output: different margins for even pages\" data-base62-sha1=\"6mQrvvlaKMvyQrEUbWBpFdSyQxP\" width=\"368\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/2ca22a02675805d43f186578d8b0e0faab990a71_2_368x500.png, https://forum.typst.app/uploads/default/optimized/2X/2/2ca22a02675805d43f186578d8b0e0faab990a71_2_552x750.png 1.5x, https://forum.typst.app/uploads/default/original/2X/2/2ca22a02675805d43f186578d8b0e0faab990a71.png 2x\" data-dominant-color=\"DADADC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">output: different margins for even pages</span><span class=\"informations\">609×826 146 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Any very long paragraph or block (or basically almost anything) will lead to problems… so usage of this solution is extremely discouraged. <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>The only ideal solution would be a built-in implementation, which unfortunately isn’t there yet.</p>",
      "raw": "Here's an attempt. Unfortunately it leads to layout divergence very easily (as is to be expected with this kind of hack), in particular if you have anything (a paragraph, grid etc.) that spans more than one page at once. You also need to ensure there's at least _one_ top-level paragraph or block on every page so the workaround is applied. Even though it's cumbersome and (most of the time) broken, I'll leave it here in case others want to improve on it.\n\n```typ\n// === CHANGE THESE ===\n#let smallest-margin = 2em\n#let margin-for(page) = if calc.even(page) { 7em } else { smallest-margin }\n// ====================\n\n#let in-block = metadata(\"Yup, we are in a block\")\n#let in-header = metadata(\"We are in the header\")\n\n// === USE MAKE-HEADER FOR YOUR HEADER ===\n#let make-header(body) = {\n  // Indicate to our show rule we should ignore headers\n  // Use style instead of state to avoid layout divergence\n  set outline(title: in-header)\n  context place(top, dy: -page.header-ascent, {\n  // Pretend stuff inside the header has as much height as our concept of margin allows\n    block(height: margin-for(here().page()), body)\n  })\n}\n\n// Ensure we don't try to place floats inside blocks (doesn't work)\n#show <marg>: set bibliography(title: in-block)\n#show block: it => {\n  show block: set bibliography(title: in-block)\n  it\n}\n\n#set page(margin: smallest-margin)\n\n// On each top-level paragraph or block\n#show selector(par).or(block): it => context {\n  if outline.title == in-header {\n    // Don't try to add fake margin inside the header\n    // (it is, itself, limited by the real margin)\n    return it\n  }\n  if bibliography.title == in-block {\n    // Can't parent-scope stuff inside a block.\n    return it\n  }\n  // Add a top float to the page to simulate increased margin.\n  let previous = query(selector(<marg>).before(here()))\n  let this-page = here().page()\n  if previous.len() == 0 or previous.last().location().page() != this-page {\n    [#place(\n      top,\n      float: true,\n      scope: \"parent\",\n      clearance: margin-for(this-page) - smallest-margin,\n    )[] <marg>]\n    it\n  } else {\n    it\n  }\n}\n```\n\nHere's some sample usage.\n\n```typ\n// USAGE:\n\n// Use make-header!\n#set page(height: 200pt, header: make-header[\n  #rect(height: 100%)\n])\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#rect(fill: red)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n\n#lorem(25)\n```\n![output: different margins for even pages|368x500](upload://6mQrvvlaKMvyQrEUbWBpFdSyQxP.png)\n\nAny very long paragraph or block (or basically almost anything) will lead to problems... so usage of this solution is extremely discouraged. :sweat_smile:\n\nThe only ideal solution would be a built-in implementation, which unfortunately isn't there yet.",
      "reply_to_post_number": 12,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 54,
      "score": 80.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:58:53.457278"
}
{
  "topic_metadata": {
    "id": 324,
    "title": "Could commas be optional at end of line, like semicolons?",
    "slug": "could-commas-be-optional-at-end-of-line-like-semicolons",
    "posts_count": 13,
    "created_at": "2024-09-16T10:12:40.229Z",
    "last_posted_at": "2024-09-18T10:08:14.336Z",
    "views": 263,
    "like_count": 3,
    "reply_count": 9,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 12,
    "accepted_answer_username": "maven",
    "tags": [
      "syntax"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1498
  },
  "posts": [
    {
      "id": 1205,
      "post_number": 1,
      "username": "maven",
      "name": "",
      "created_at": "2024-09-16T10:12:40.322Z",
      "updated_at": "2024-09-16T10:32:47.170Z",
      "cooked": "<p>The syntax of the Typst scripting language is very enjoyable. One thing that keeps coming up for me personally though is the necessity for putting commas even in <strong>multi-line</strong> arrays, dictionaries, and function calls.</p>\n<p>So the question is this: Would it be possible (and desirable) to change the syntax such that the following snippet:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#rect(\n  height: 100%,\n  width: 100%,\n  fill: aqua\n)\n</code></pre>\n<p>Could be written as:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#rect(\n  height: 100%\n  width: 100%\n  fill: aqua\n)\n</code></pre>\n<p>This would mean that commas need to be used only where multiple values occur per line, meaning linebreaks would also act as value separator, as with semicolons and “statements”. If this is possible, it would make the syntax even more lightweight and enjoyable to use, in my opinion.</p>\n<p>What do others think of this? <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "The syntax of the Typst scripting language is very enjoyable. One thing that keeps coming up for me personally though is the necessity for putting commas even in **multi-line** arrays, dictionaries, and function calls.\n\nSo the question is this: Would it be possible (and desirable) to change the syntax such that the following snippet:\n\n```typ\n#rect(\n  height: 100%,\n  width: 100%,\n  fill: aqua\n)\n```\n\nCould be written as:\n\n```typ\n#rect(\n  height: 100%\n  width: 100%\n  fill: aqua\n)\n```\n\nThis would mean that commas need to be used only where multiple values occur per line, meaning linebreaks would also act as value separator, as with semicolons and \"statements\". If this is possible, it would make the syntax even more lightweight and enjoyable to use, in my opinion.\n\nWhat do others think of this? :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 62,
      "score": 367.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 256
    },
    {
      "id": 1208,
      "post_number": 2,
      "username": "Aegon",
      "name": "Aegon Huke",
      "created_at": "2024-09-16T10:27:53.991Z",
      "updated_at": "2024-09-16T10:27:53.991Z",
      "cooked": "<p>To be honest, I don’t think so. Because once when you’d like to refractor your code from something like</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#rect(\n  height: 100%\n  width: 100%\n  fill: aqua\n)\n</code></pre>\n<p>To</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#rect(height: 100%, width: 100%, fill: aqua)\n</code></pre>\n<p>You would retype all the commas. It would be annoying, trust me.</p>",
      "raw": "To be honest, I don't think so. Because once when you'd like to refractor your code from something like\n\n```typst\n#rect(\n  height: 100%\n  width: 100%\n  fill: aqua\n)\n```\n\nTo\n\n```typst\n#rect(height: 100%, width: 100%, fill: aqua)\n```\n\nYou would retype all the commas. It would be annoying, trust me.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 59,
      "score": 36.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 269
    },
    {
      "id": 1214,
      "post_number": 3,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-09-16T10:54:23.504Z",
      "updated_at": "2024-09-16T10:54:23.504Z",
      "cooked": "<p>What is problematic about this, is that <code>(...)</code> is also used for grouping multi-line expressions (code blocks <em>cannot</em> be used for this precisely because the semicolons can be omitted in favor of line breaks). This means something like this works:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">let val = (\n  \"one\"\n    + \"two\"\n)\n\nassert.eq(val, \"onetwo\")\n</code></pre>\n<p>With your proposal, however, this would become an array and then there would be no way at all to have a multiline expression.</p>",
      "raw": "What is problematic about this, is that `(...)` is also used for grouping multi-line expressions (code blocks _cannot_ be used for this precisely because the semicolons can be omitted in favor of line breaks). This means something like this works:\n```typc\nlet val = (\n  \"one\"\n    + \"two\"\n)\n\nassert.eq(val, \"onetwo\")\n```\nWith your proposal, however, this would become an array and then there would be no way at all to have a multiline expression.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 56,
      "score": 36.2,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 1244,
      "post_number": 4,
      "username": "maven",
      "name": "",
      "created_at": "2024-09-16T11:31:20.272Z",
      "updated_at": "2024-09-16T11:31:20.272Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Aegon\" data-post=\"2\" data-topic=\"324\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/aegon/48/232_2.png\" class=\"avatar\"> Aegon:</div>\n<blockquote>\n<p>You would retype all the commas.</p>\n</blockquote>\n</aside>\n<p>That’s true.</p>\n<p>Which of these is better (always commas vs sometimes commas) is of course a matter of opinion. I’d happily reintroduce commas if I could omit them most of the time.</p>\n<p>Thanks for making that valid point though!</p>",
      "raw": "[quote=\"Aegon, post:2, topic:324\"]\nYou would retype all the commas.\n[/quote]\n\nThat's true.\n\nWhich of these is better (always commas vs sometimes commas) is of course a matter of opinion. I'd happily reintroduce commas if I could omit them most of the time.\n\nThanks for making that valid point though!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 52,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 256
    },
    {
      "id": 1250,
      "post_number": 5,
      "username": "maven",
      "name": "",
      "created_at": "2024-09-16T11:57:17.007Z",
      "updated_at": "2024-09-16T11:57:17.007Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"laurmaedje\" data-post=\"3\" data-topic=\"324\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/laurmaedje/48/14_2.png\" class=\"avatar\"> laurmaedje:</div>\n<blockquote>\n<p>With your proposal, however, this would become an array and then there would be no way at all to have a multiline expression.</p>\n</blockquote>\n</aside>\n<p>Ah, that’s a good point. I understand that this issue alone means that we are unlikely to see a change here, as it might cause some disruption wherever multiline expressions are in use currently. I was unaware of the issue probably because I never felt the need (in my very limited experience with Typst) to use them.</p>\n<p>I’d like to entertain the thought just a little more, to better understand whether this would really not be possible at all, or why even I would not want this after all:</p>\n<p>The case above and similar ones could be handled by only interpreting linebreaks as commas where that is syntactically valid, right? – Admittedly, that’d be a weird feature. (Isn’t there some programming language having this though?!)</p>\n<p>In any case, this problem could be handled by explicit line continuation, e.g. like a slash at the end of the line as in Python, correct? Whether that’s preferrable though is of course another question entirely.</p>\n<p>Thanks for replying!</p>",
      "raw": "[quote=\"laurmaedje, post:3, topic:324\"]\nWith your proposal, however, this would become an array and then there would be no way at all to have a multiline expression.\n[/quote]\n\nAh, that's a good point. I understand that this issue alone means that we are unlikely to see a change here, as it might cause some disruption wherever multiline expressions are in use currently. I was unaware of the issue probably because I never felt the need (in my very limited experience with Typst) to use them.\n\nI'd like to entertain the thought just a little more, to better understand whether this would really not be possible at all, or why even I would not want this after all:\n\nThe case above and similar ones could be handled by only interpreting linebreaks as commas where that is syntactically valid, right? -- Admittedly, that'd be a weird feature. (Isn't there some programming language having this though?!)\n\nIn any case, this problem could be handled by explicit line continuation, e.g. like a slash at the end of the line as in Python, correct? Whether that's preferrable though is of course another question entirely.\n\nThanks for replying!",
      "reply_to_post_number": 3,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 0,
      "reads": 50,
      "score": 20.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 256
    },
    {
      "id": 1251,
      "post_number": 6,
      "username": "maven",
      "name": "",
      "created_at": "2024-09-16T12:06:30.228Z",
      "updated_at": "2024-09-16T12:06:30.228Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Aegon\" data-post=\"2\" data-topic=\"324\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/aegon/48/232_2.png\" class=\"avatar\"> Aegon:</div>\n<blockquote>\n<p>You would retype all the commas. It would be annoying, trust me.</p>\n</blockquote>\n</aside>\n<p>Oh and, I forgot to say: I already have a similar annoyance now, because I follow the general style of putting commas in each line, including the last line, in multiline situations (especially arrays). That means adding or removing that last comma whenever changing to multiline or singleline respectively.</p>\n<p>And just not putting that last comma also has cons, namely that reordering the arguments or values then requires adding <em>and</em> removing commas, also annoying.</p>\n<p>I wonder whether there is a good solution to this in general…</p>",
      "raw": "[quote=\"Aegon, post:2, topic:324\"]\nYou would retype all the commas. It would be annoying, trust me.\n[/quote]\n\nOh and, I forgot to say: I already have a similar annoyance now, because I follow the general style of putting commas in each line, including the last line, in multiline situations (especially arrays). That means adding or removing that last comma whenever changing to multiline or singleline respectively.\n\nAnd just not putting that last comma also has cons, namely that reordering the arguments or values then requires adding _and_ removing commas, also annoying.\n\nI wonder whether there is a good solution to this in general...",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 0,
      "reads": 47,
      "score": 19.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 256
    },
    {
      "id": 1266,
      "post_number": 7,
      "username": "Aegon",
      "name": "Aegon Huke",
      "created_at": "2024-09-16T13:02:26.656Z",
      "updated_at": "2024-09-16T13:02:26.656Z",
      "cooked": "<p>A better solution is to support putting a comma after each line no matter whether it is the last argument or not, like Python.</p>",
      "raw": "A better solution is to support putting a comma after each line no matter whether it is the last argument or not, like Python.",
      "reply_to_post_number": 6,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 269
    },
    {
      "id": 1271,
      "post_number": 8,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-09-16T13:18:01.978Z",
      "updated_at": "2024-09-16T13:18:01.978Z",
      "cooked": "<p>That’s already supported.</p>",
      "raw": "That's already supported.",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 13.4,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 1525,
      "post_number": 9,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-17T08:46:03.980Z",
      "updated_at": "2024-09-17T08:46:03.980Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"maven\" data-post=\"5\" data-topic=\"324\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/m/F88938/48.png\" class=\"avatar\"> maven:</div>\n<blockquote>\n<p>The case above and similar ones could be handled by only interpreting linebreaks as commas where that is syntactically valid, right? – Admittedly, that’d be a weird feature.</p>\n</blockquote>\n</aside>\n<p>No, that would not be enough. unary plus and unary minus are supported operators, so even the exact example Laurenz made would still be interpreted as an array. (<code>+ \"two\"</code> is a type error, but syntactically no problem)</p>\n<aside class=\"quote no-group\" data-username=\"maven\" data-post=\"5\" data-topic=\"324\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/m/F88938/48.png\" class=\"avatar\"> maven:</div>\n<blockquote>\n<p>(Isn’t there some programming language having this though?!)</p>\n</blockquote>\n</aside>\n<p>For semicolons, there are; the book <em>Crafting Interpreters</em> lists some <a href=\"http://www.craftinginterpreters.com/scanning.html#design-note\" rel=\"noopener nofollow ugc\">in a design note</a>:</p>\n<blockquote>\n<p><a href=\"https://docs.python.org/3.5/reference/lexical_analysis.html#implicit-line-joining\" rel=\"noopener nofollow ugc\">Python</a> treats all newlines as significant unless an explicit backslash is used at the end of a line to continue it to the next line. […] This rule works well for Python because it is a highly statement-oriented language.</p>\n</blockquote>\n<p>(Typst is very expression-oriented)</p>\n<blockquote>\n<p>JavaScript’s “<a href=\"https://www.ecma-international.org/ecma-262/5.1/#sec-7.9\" rel=\"noopener nofollow ugc\">automatic semicolon insertion</a>” rule is the real odd one. Where other languages assume most newlines <em>are</em> meaningful and only a few should be ignored in multi-line statements, JS assumes the opposite. […]</p>\n<p>This design note would turn into a design diatribe if I went into complete detail about how that even <em>works</em>, much less all the various ways that JavaScript’s “solution” is a bad idea. It’s a mess. […]</p>\n</blockquote>\n<p>The design note also says “If you’re designing a new language, you almost surely <em>should</em> avoid an explicit statement terminator” – but that advice can’t very easily be applied to commas, and Typst <em>did</em> avoid mandatory semicolons.</p>",
      "raw": "[quote=\"maven, post:5, topic:324\"]\nThe case above and similar ones could be handled by only interpreting linebreaks as commas where that is syntactically valid, right? – Admittedly, that’d be a weird feature.\n[/quote]\n\nNo, that would not be enough. unary plus and unary minus are supported operators, so even the exact example Laurenz made would still be interpreted as an array. (`+ \"two\"` is a type error, but syntactically no problem)\n\n[quote=\"maven, post:5, topic:324\"]\n(Isn’t there some programming language having this though?!)\n[/quote]\n\nFor semicolons, there are; the book _Crafting Interpreters_ lists some [in a design note](http://www.craftinginterpreters.com/scanning.html#design-note):\n\n> [Python](https://docs.python.org/3.5/reference/lexical_analysis.html#implicit-line-joining) treats all newlines as significant unless an explicit backslash is used at the end of a line to continue it to the next line. [...] This rule works well for Python because it is a highly statement-oriented language.\n\n(Typst is very expression-oriented)\n\n> JavaScript’s “[automatic semicolon insertion](https://www.ecma-international.org/ecma-262/5.1/#sec-7.9)” rule is the real odd one. Where other languages assume most newlines *are* meaningful and only a few should be ignored in multi-line statements, JS assumes the opposite. [...]\n>\n> This design note would turn into a design diatribe if I went into complete detail about how that even *works*, much less all the various ways that JavaScript’s “solution” is a bad idea. It’s a mess. [...]\n\nThe design note also says \"If you’re designing a new language, you almost surely *should* avoid an explicit statement terminator\" -- but that advice can't very easily be applied to commas, and Typst _did_ avoid mandatory semicolons.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 36,
      "score": 27.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 1618,
      "post_number": 10,
      "username": "maven",
      "name": "",
      "created_at": "2024-09-17T12:44:14.291Z",
      "updated_at": "2024-09-17T12:44:14.291Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Aegon\" data-post=\"7\" data-topic=\"324\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/aegon/48/232_2.png\" class=\"avatar\"> Aegon:</div>\n<blockquote>\n<p>A better solution is to support putting a comma after each line no matter whether it is the last argument or not, like Python.</p>\n</blockquote>\n</aside>\n<aside class=\"quote no-group\" data-username=\"laurmaedje\" data-post=\"8\" data-topic=\"324\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/laurmaedje/48/14_2.png\" class=\"avatar\"> laurmaedje:</div>\n<blockquote>\n<p>That’s already supported.</p>\n</blockquote>\n</aside>\n<p><a class=\"mention\" href=\"/u/aegon\">@Aegon</a> You probably meant “support putting a comma after the last argument”. That’s indeed supported, and I use it almost always, as mentioned above:</p>\n<aside class=\"quote no-group\" data-username=\"maven\" data-post=\"6\" data-topic=\"324\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/m/F88938/48.png\" class=\"avatar\"> maven:</div>\n<blockquote>\n<p>because I follow the general style of putting commas in each line, including the last line, in multiline situations (especially arrays).</p>\n</blockquote>\n</aside>",
      "raw": "[quote=\"Aegon, post:7, topic:324, full:true\"]\nA better solution is to support putting a comma after each line no matter whether it is the last argument or not, like Python.\n[/quote]\n\n[quote=\"laurmaedje, post:8, topic:324, full:true\"]\nThat’s already supported.\n[/quote]\n\n@Aegon You probably meant \"support putting a comma after the last argument\". That's indeed supported, and I use it almost always, as mentioned above:\n\n[quote=\"maven, post:6, topic:324\"]\nbecause I follow the general style of putting commas in each line, including the last line, in multiline situations (especially arrays).\n[/quote]",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 3,
      "like_count": 0,
      "reads": 32,
      "score": 11.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 256
    },
    {
      "id": 1621,
      "post_number": 11,
      "username": "maven",
      "name": "",
      "created_at": "2024-09-17T12:56:23.267Z",
      "updated_at": "2024-09-17T12:56:23.267Z",
      "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"SillyFreak\" data-post=\"9\" data-topic=\"324\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/sillyfreak/48/1483_2.png\" class=\"avatar\"> SillyFreak:</div>\n<blockquote>\n<aside class=\"quote no-group\" data-username=\"maven\" data-post=\"5\" data-topic=\"324\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/m/F88938/48.png\" class=\"avatar\"> maven:</div>\n<blockquote>\n<p>The case above and similar ones could be handled by only interpreting linebreaks as commas where that is syntactically valid, right? – Admittedly, that’d be a weird feature.</p>\n</blockquote>\n</aside>\n<p>No, that would not be enough. unary plus and unary minus are supported operators, so even the exact example Laurenz made would still be interpreted as an array. (<code>+ \"two\"</code> is a type error, but syntactically no problem)</p>\n</blockquote>\n</aside>\n<p>You are correct. It would require somehow detecting errors other than syntax errors, and that would definitely be way too weird. I would not want that either. (And it would still not solve the problem of having arrays of numbers, including negative numbers, vs subtraction.)</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"SillyFreak\" data-post=\"9\" data-topic=\"324\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/sillyfreak/48/1483_2.png\" class=\"avatar\"> SillyFreak:</div>\n<blockquote>\n<blockquote>\n<p>JavaScript’s “<a href=\"https://www.ecma-international.org/ecma-262/5.1/#sec-7.9\" rel=\"noopener nofollow ugc\">automatic semicolon insertion</a>” rule is the real odd one. Where other languages assume most newlines <em>are</em> meaningful and only a few should be ignored in multi-line statements, JS assumes the opposite. […]</p>\n<p>This design note would turn into a design diatribe if I went into complete detail about how that even <em>works</em>, much less all the various ways that JavaScript’s “solution” is a bad idea. It’s a mess. […]</p>\n</blockquote>\n<p>The design note also says “If you’re designing a new language, you almost surely <em>should</em> avoid an explicit statement terminator” – but that advice can’t very easily be applied to commas, and Typst <em>did</em> avoid mandatory semicolons.</p>\n</blockquote>\n</aside>\n<p>Thanks a lot for that link! I see that such “magic” as in JS is probably a bad idea (“weird”), as I have stated above. Though I don’t see why it shouldn’t be in principle possible to do something similar with commas. But it might require significant changes in grammar… See next post.</p>",
      "raw": "[quote=\"SillyFreak, post:9, topic:324\"]\n[quote=\"maven, post:5, topic:324\"]\nThe case above and similar ones could be handled by only interpreting linebreaks as commas where that is syntactically valid, right? – Admittedly, that’d be a weird feature.\n[/quote]\n\nNo, that would not be enough. unary plus and unary minus are supported operators, so even the exact example Laurenz made would still be interpreted as an array. (`+ \"two\"` is a type error, but syntactically no problem)\n[/quote]\n\nYou are correct. It would require somehow detecting errors other than syntax errors, and that would definitely be way too weird. I would not want that either. (And it would still not solve the problem of having arrays of numbers, including negative numbers, vs subtraction.)\n\n[quote=\"SillyFreak, post:9, topic:324\"]\n> JavaScript’s “[automatic semicolon insertion](https://www.ecma-international.org/ecma-262/5.1/#sec-7.9)” rule is the real odd one. Where other languages assume most newlines *are* meaningful and only a few should be ignored in multi-line statements, JS assumes the opposite. […]\n>\n>\n>\n> This design note would turn into a design diatribe if I went into complete detail about how that even *works*, much less all the various ways that JavaScript’s “solution” is a bad idea. It’s a mess. […]\n\nThe design note also says “If you’re designing a new language, you almost surely *should* avoid an explicit statement terminator” – but that advice can’t very easily be applied to commas, and Typst *did* avoid mandatory semicolons.\n[/quote]\n\nThanks a lot for that link! I see that such \"magic\" as in JS is probably a bad idea (\"weird\"), as I have stated above. Though I don't see why it shouldn't be in principle possible to do something similar with commas. But it might require significant changes in grammar... See next post.",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 2,
      "like_count": 0,
      "reads": 33,
      "score": 6.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 256
    },
    {
      "id": 1622,
      "post_number": 12,
      "username": "maven",
      "name": "",
      "created_at": "2024-09-17T13:12:43.764Z",
      "updated_at": "2024-09-17T13:12:43.764Z",
      "cooked": "<p>The main reason “optional commas” would not work cleanly:</p>\n<aside class=\"quote no-group\" data-username=\"laurmaedje\" data-post=\"3\" data-topic=\"324\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/laurmaedje/48/14_2.png\" class=\"avatar\"> laurmaedje:</div>\n<blockquote>\n<p>What is problematic about this, is that <code>(...)</code> is also used for grouping multi-line expressions</p>\n</blockquote>\n</aside>\n<p>I think the main problem isn’t multiline expressions though (which could be solved by explicit line continuation via backslash at EOL for example), but that array construction in the current grammar really needs commas:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">// a is a string\nlet a = \"foo\"\n\n// b should also be a string\nlet b = (\"foo\")\n\n// c would be an array of two strings if EOL commas were optional\nlet c = (\n  \"foo\"\n  \"bar\"\n)\n\n// What should this be however? string or single-element array?\nlet d = (\n  \"foo\"\n)\n</code></pre>\n<p>So the overload of <code>()</code> as array constructor, and/or some other far-reaching changes to grammar would have to be implemented, and I see that this is out of scope for Typst. This then answers my original question <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Thanks to <a class=\"mention\" href=\"/u/laurmaedje\">@laurmaedje</a>, <a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a> and <a class=\"mention\" href=\"/u/aegon\">@Aegon</a> for replying.</p>",
      "raw": "The main reason \"optional commas\" would not work cleanly:\n\n[quote=\"laurmaedje, post:3, topic:324\"]\nWhat is problematic about this, is that `(...)` is also used for grouping multi-line expressions\n[/quote]\n\nI think the main problem isn't multiline expressions though (which could be solved by explicit line continuation via backslash at EOL for example), but that array construction in the current grammar really needs commas:\n\n```typc\n// a is a string\nlet a = \"foo\"\n\n// b should also be a string\nlet b = (\"foo\")\n\n// c would be an array of two strings if EOL commas were optional\nlet c = (\n  \"foo\"\n  \"bar\"\n)\n\n// What should this be however? string or single-element array?\nlet d = (\n  \"foo\"\n)\n```\n\nSo the overload of `()` as array constructor, and/or some other far-reaching changes to grammar would have to be implemented, and I see that this is out of scope for Typst. This then answers my original question :slight_smile: \n\nThanks to @laurmaedje, @SillyFreak and @Aegon for replying.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 33,
      "score": 11.6,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 256
    },
    {
      "id": 1755,
      "post_number": 13,
      "username": "Aegon",
      "name": "Aegon Huke",
      "created_at": "2024-09-18T10:08:14.336Z",
      "updated_at": "2024-09-18T10:08:14.336Z",
      "cooked": "<p>Thanks for telling me this.</p>",
      "raw": "Thanks for telling me this.",
      "reply_to_post_number": 10,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 269
    }
  ],
  "scraped_at": "2025-06-10T09:58:52.676000"
}
{
  "topic_metadata": {
    "id": 3246,
    "title": "How can I format an enum's numbering without overriding the numbering style?",
    "slug": "how-can-i-format-an-enums-numbering-without-overriding-the-numbering-style",
    "posts_count": 5,
    "created_at": "2025-03-13T15:31:28.896Z",
    "last_posted_at": "2025-03-16T11:31:00.241Z",
    "views": 102,
    "like_count": 3,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "numbering",
      "lists"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 333
  },
  "posts": [
    {
      "id": 9766,
      "post_number": 1,
      "username": "SilverWolf",
      "name": "Javier",
      "created_at": "2025-03-13T15:31:29.006Z",
      "updated_at": "2025-03-18T18:06:48.534Z",
      "cooked": "<p>I’m really stuck on this one. If anyone could help I will appreciate it a lot.</p>\n<p>This one works</p>\n<pre><code class=\"lang-auto\">#set enum(numbering: \"1)a)\", spacing: 1.5em)\n\n</code></pre>\n<p>and this one also works</p>\n<pre><code class=\"lang-auto\">#set enum(numbering:  it =&gt; {\n  text(fill: purple, weight: \"bold\", [#it] })\n\n</code></pre>\n<p>How can achieve both?</p>\n<p>Everything I’ve tried so far overrides one option or it brokes the code.</p>\n<p>Hope anyone can bring some light here.</p>\n<p>Thank you in advance!</p>",
      "raw": "I'm really stuck on this one. If anyone could help I will appreciate it a lot.\n\nThis one works\n```\n#set enum(numbering: \"1)a)\", spacing: 1.5em)\n\n```\nand this one also works\n\n```\n#set enum(numbering:  it => {\n  text(fill: purple, weight: \"bold\", [#it] })\n\n```\n\nHow can achieve both?\n\nEverything I've tried so far overrides one option or it brokes the code.\n\nHope anyone can bring some light here.\n\nThank you in advance!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 185.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1330
    },
    {
      "id": 9769,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-03-13T17:17:31.394Z",
      "updated_at": "2025-03-13T17:17:31.394Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/silverwolf\">@SilverWolf</a>,</p>\n<p>as far as I know, it’s currently a bit tricky.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set enum(\n  full: true, \n  spacing: 1.5em,\n  numbering: (..nums, last) =&gt; {\n    text(\n      fill: purple, \n      weight: \"bold\", \n      numbering((\"1)\",\"a)\").at(nums.pos().len(), default: \"I)\"), last)\n    )\n  }\n)\n\n\n+ first\n  + second\n    + third \n+ fourth\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/1/1f18439808adc0ff46059a5f3ec552997bd5b6fd.png\" data-download-href=\"https://forum.typst.app/uploads/default/1f18439808adc0ff46059a5f3ec552997bd5b6fd\" title=\"test\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/1/1f18439808adc0ff46059a5f3ec552997bd5b6fd_2_690x134.png\" alt=\"test\" data-base62-sha1=\"4r4MNpj3itGrBJK5qGyKSDcCV7T\" width=\"690\" height=\"134\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/1/1f18439808adc0ff46059a5f3ec552997bd5b6fd_2_690x134.png, https://forum.typst.app/uploads/default/optimized/2X/1/1f18439808adc0ff46059a5f3ec552997bd5b6fd_2_1035x201.png 1.5x, https://forum.typst.app/uploads/default/original/2X/1/1f18439808adc0ff46059a5f3ec552997bd5b6fd.png 2x\" data-dominant-color=\"FEFEFE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">test</span><span class=\"informations\">1191×233 17 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hi @SilverWolf,\n\nas far as I know, it's currently a bit tricky. \n\n```typst\n#set enum(\n  full: true, \n  spacing: 1.5em,\n  numbering: (..nums, last) => {\n    text(\n      fill: purple, \n      weight: \"bold\", \n      numbering((\"1)\",\"a)\").at(nums.pos().len(), default: \"I)\"), last)\n    )\n  }\n)\n\n\n+ first\n  + second\n    + third \n+ fourth\n``` \n![test|690x134](upload://4r4MNpj3itGrBJK5qGyKSDcCV7T.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 25.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9777,
      "post_number": 3,
      "username": "SilverWolf",
      "name": "Javier",
      "created_at": "2025-03-13T18:45:54.385Z",
      "updated_at": "2025-03-13T18:45:54.385Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"flokl\" data-post=\"2\" data-topic=\"3246\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/flokl/48/28_2.png\" class=\"avatar\"> flokl:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">#set enum(\n  full: true, \n  spacing: 1.5em,\n  numbering: (..nums, last) =&gt; {\n    text(\n      fill: purple, \n      weight: \"bold\", \n      numbering((\"1)\",\"a)\").at(nums.pos().len(), default: \"I)\"), last)\n    )\n  }\n)\n</code></pre>\n</blockquote>\n</aside>\n<p>WOOOO <img src=\"https://forum.typst.app/images/emoji/apple/astonished.png?v=12\" title=\":astonished:\" class=\"emoji\" alt=\":astonished:\" loading=\"lazy\" width=\"20\" height=\"20\"> it works like a champ! Thanks a lot. Would you mind sharing how you figured it out? Why did you need that “last”? I spent hours without success.  You nailed it!</p>\n<p>Thanks <a class=\"mention\" href=\"/u/flokl\">@flokl</a>  !!</p>",
      "raw": "[quote=\"flokl, post:2, topic:3246\"]\n```\n#set enum(\n  full: true, \n  spacing: 1.5em,\n  numbering: (..nums, last) => {\n    text(\n      fill: purple, \n      weight: \"bold\", \n      numbering((\"1)\",\"a)\").at(nums.pos().len(), default: \"I)\"), last)\n    )\n  }\n)\n```\n[/quote]\n\nWOOOO :astonished: it works like a champ! Thanks a lot. Would you mind sharing how you figured it out? Why did you need that \"last\"? I spent hours without success.  You nailed it!\n\nThanks @flokl  !!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 23,
      "score": 29.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1330
    },
    {
      "id": 9778,
      "post_number": 4,
      "username": "flokl",
      "name": "",
      "created_at": "2025-03-13T19:31:11.657Z",
      "updated_at": "2025-03-13T19:40:38.204Z",
      "cooked": "<p>My starting point were amazing answers to questions about numbering enum items per level, here and on Discord. With <code>full: true</code> you get an array containing the numbers of the parent enumerations and the number of the current item.</p>\n<pre><code class=\"lang-plaintext\">+ a    (1,)\n++ b   (1, 1)\n++ c   (1, 2)\n+++ d  (1, 2, 1)\n+ e    (2,)\n</code></pre>\n<p>The <code>..nums</code> is a sink which collects all excess arguments (parent numbers) and <code>last</code> is the last array item (the number of the current enum item).</p>\n<p>I hope that clarifies the code a bit.</p>",
      "raw": "My starting point were amazing answers to questions about numbering enum items per level, here and on Discord. With `full: true` you get an array containing the numbers of the parent enumerations and the number of the current item.\n```text\n+ a    (1,)\n++ b   (1, 1)\n++ c   (1, 2)\n+++ d  (1, 2, 1)\n+ e    (2,)\n```\nThe `..nums` is a sink which collects all excess arguments (parent numbers) and `last` is the last array item (the number of the current enum item).\n\nI hope that clarifies the code a bit.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9859,
      "post_number": 5,
      "username": "SilverWolf",
      "name": "Javier",
      "created_at": "2025-03-16T11:31:00.241Z",
      "updated_at": "2025-03-16T11:33:30.241Z",
      "cooked": "<p>Hi! Sorry for the delay in answering, I was dealing with a heavy workload. Thank you very much for your response, I just joined the Discord server! I’m going to study your explanation, I love Typst (from someone who has been using LaTeX for 15 years). You are amazing! See you in the amazing Typst universe haha</p>",
      "raw": "Hi! Sorry for the delay in answering, I was dealing with a heavy workload. Thank you very much for your response, I just joined the Discord server! I'm going to study your explanation, I love Typst (from someone who has been using LaTeX for 15 years). You are amazing! See you in the amazing Typst universe haha",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 15,
      "score": 23.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1330
    }
  ],
  "scraped_at": "2025-06-10T09:50:24.614124"
}
{
  "topic_metadata": {
    "id": 3252,
    "title": "Symbol for Arc Not Available in General Symbols",
    "slug": "symbol-for-arc-not-available-in-general-symbols",
    "posts_count": 6,
    "created_at": "2025-03-14T07:54:35.827Z",
    "last_posted_at": "2025-03-14T08:25:57.636Z",
    "views": 43,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "quachpas",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 140
  },
  "posts": [
    {
      "id": 9784,
      "post_number": 1,
      "username": "DMDM",
      "name": "DMDM",
      "created_at": "2025-03-14T07:54:36.021Z",
      "updated_at": "2025-03-14T07:54:36.021Z",
      "cooked": "<p>Hello. I am typesetting a geometry book and I need to use the arc symbol (the symbol used over letters which looks like a downward parentheses). But I can’t find anything of that kind in the symbols list. Please help me with this. Thank you.</p>",
      "raw": "Hello. I am typesetting a geometry book and I need to use the arc symbol (the symbol used over letters which looks like a downward parentheses). But I can't find anything of that kind in the symbols list. Please help me with this. Thank you.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 29.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1228
    },
    {
      "id": 9785,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-03-14T07:57:25.737Z",
      "updated_at": "2025-03-14T07:57:25.737Z",
      "cooked": "<p>Are you looking for the Breve accent?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ breve(a) $\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/a/ab3756f18d8088cb160c8906ddd7b3f0907390b3.png\" alt=\"image\" data-base62-sha1=\"oqEd95L7Od3ue76uunX6qQOCLBh\" width=\"70\" height=\"67\"></p>\n<p>More information:</p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/math/accent/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/math/accent/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/math/accent/\" target=\"_blank\" rel=\"noopener\">Accent Function – Typst Documentation</a></h3>\n\n  <p>Documentation for the `accent` function.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Are you looking for the Breve accent?\n```typ\n$ breve(a) $\n```\n![image|70x67](upload://oqEd95L7Od3ue76uunX6qQOCLBh.png)\n\nMore information:\nhttps://typst.app/docs/reference/math/accent/",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 9.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 9787,
      "post_number": 3,
      "username": "DMDM",
      "name": "DMDM",
      "created_at": "2025-03-14T07:58:58.369Z",
      "updated_at": "2025-03-14T07:58:58.369Z",
      "cooked": "<p>Almost there. The inverted Breve thing is what I want.</p>",
      "raw": "Almost there. The inverted Breve thing is what I want.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1228
    },
    {
      "id": 9788,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-14T08:05:14.970Z",
      "updated_at": "2025-03-14T08:05:14.970Z",
      "cooked": "<p>This should be <code>paren.t</code> I think</p>\n<pre><code class=\"lang-auto\">$accent(a, paren.t)$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/b/b55eb41a671337c609a4cc6e7607806e13cdb6d2.png\" alt=\"image\" data-base62-sha1=\"pStk3COWlK6zZrexPAtl6jTNVyG\" width=\"74\" height=\"102\"></p>",
      "raw": "This should be `paren.t` I think\n```\n$accent(a, paren.t)$\n```\n![image|74x102](upload://pStk3COWlK6zZrexPAtl6jTNVyG.png)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9789,
      "post_number": 5,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-03-14T08:13:00.533Z",
      "updated_at": "2025-03-14T08:13:00.533Z",
      "cooked": "<p>Another option is to use the character itself which is <code>U+0311</code> according to <a href=\"https://en.wikipedia.org/wiki/Inverted_breve\" rel=\"noopener nofollow ugc\">Wikipedia</a>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ accent(a, \\u{0311}) $\n$ accent(a, paren.t) $\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/6/6a3fec4a7cc64adc28eb06abc280462d26dca7e9.png\" alt=\"image\" data-base62-sha1=\"f9Vz6OmaZgxaC2hSNotwUwki8Wd\" width=\"91\" height=\"119\"></p>",
      "raw": "Another option is to use the character itself which is `U+0311` according to [Wikipedia](https://en.wikipedia.org/wiki/Inverted_breve).\n```typ\n$ accent(a, \\u{0311}) $\n$ accent(a, paren.t) $\n```\n![image|91x119](upload://f9Vz6OmaZgxaC2hSNotwUwki8Wd.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 9790,
      "post_number": 6,
      "username": "DMDM",
      "name": "DMDM",
      "created_at": "2025-03-14T08:25:57.636Z",
      "updated_at": "2025-03-14T08:25:57.636Z",
      "cooked": "<p><span class=\"mention\">@above</span> and <span class=\"mention\">@above2</span> ,Thank you!!! Have a good day.</p>",
      "raw": "@above and @above2 ,Thank you!!! Have a good day.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 19.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1228
    }
  ],
  "scraped_at": "2025-06-10T09:50:23.878493"
}
{
  "topic_metadata": {
    "id": 3254,
    "title": "How can I check for multiple values in `where` at once?",
    "slug": "how-can-i-check-for-multiple-values-in-where-at-once",
    "posts_count": 5,
    "created_at": "2025-03-14T09:23:24.486Z",
    "last_posted_at": "2025-03-14T12:39:11.660Z",
    "views": 85,
    "like_count": 3,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "sijo",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 431
  },
  "posts": [
    {
      "id": 9792,
      "post_number": 1,
      "username": "the_kief",
      "name": "the_kief",
      "created_at": "2025-03-14T09:23:24.679Z",
      "updated_at": "2025-03-14T10:31:15.355Z",
      "cooked": "<p>I have a special use case where I would like to check not only for a single value in a <code>where</code> query, but rather multiple.</p>\n<p>So instead of having:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show raw.where(lang: \"a\"): it =&gt; {\n#show raw.where(lang: \"b\"): it =&gt; {\n#show raw.where(lang: \"c\"): it =&gt; {\n</code></pre>\n<p>I’m looking for something similar to:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show raw.where((\"a\", \"b\").contains(lang)): it =&gt; {\n</code></pre>\n<p>Is there anything possible in this direction?</p>",
      "raw": "I have a special use case where I would like to check not only for a single value in a `where` query, but rather multiple.\n\nSo instead of having:\n\n```typst\n#show raw.where(lang: \"a\"): it => {\n#show raw.where(lang: \"b\"): it => {\n#show raw.where(lang: \"c\"): it => {\n```\n\nI'm looking for something similar to:\n\n```typst\n#show raw.where((\"a\", \"b\").contains(lang)): it => {\n```\n\nIs there anything possible in this direction?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 96.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1349
    },
    {
      "id": 9795,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-14T10:21:14.187Z",
      "updated_at": "2025-03-14T10:21:41.663Z",
      "cooked": "<p>You can combine multiple selectors with <code>.or()</code> and <code>.and()</code> as per the <a href=\"https://typst.app/docs/reference/foundations/selector%5D\">docs</a>. In your case this would look like this</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw.where(lang: \"a\").or(raw.where(lang: \"b\")).or(raw.where(lang: \"c\")): it =&gt; { ... }\n</code></pre>\n<p>I’m not sure if there is a way to generate the show rule programmatically, e.g. from a list of languages.</p>\n<p>You could also take another approach by using a general show rule and then checking the language inside the show rule. This will certainly scale better and you will have more flexibility regarding the matching.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw: it =&gt; {\n  if it.lang == \"some condition\" {\n    do something...\n  }\n  it\n}</code></pre>",
      "raw": "You can combine multiple selectors with `.or()` and `.and()` as per the [docs](https://typst.app/docs/reference/foundations/selector]). In your case this would look like this\n\n```typ\n#show raw.where(lang: \"a\").or(raw.where(lang: \"b\")).or(raw.where(lang: \"c\")): it => { ... }\n```\n\nI'm not sure if there is a way to generate the show rule programmatically, e.g. from a list of languages.\n\nYou could also take another approach by using a general show rule and then checking the language inside the show rule. This will certainly scale better and you will have more flexibility regarding the matching.\n\n```typ\n#show raw: it => {\n  if it.lang == \"some condition\" {\n    do something...\n  }\n  it\n}",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 31.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 9796,
      "post_number": 3,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-14T10:29:58.987Z",
      "updated_at": "2025-03-14T10:32:13.306Z",
      "cooked": "<p>To make it a bit more readable you can use the form <code>selector.or(selector1, selector2, ...)</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show selector.or(\n  raw.where(lang: \"a\"),\n  raw.where(lang: \"b\"),\n  raw.where(lang: \"c\"),\n): it =&gt; {\n  set text(red)\n  it\n}\n</code></pre>\n<p>and to generate the show rule from a list you can use an argument sink:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let selectors = (\"a\", \"b\", \"c\").map(x =&gt; raw.where(lang: x))\n\n#show selector.or(..selectors): it =&gt; {\n  set text(red)\n  it\n}\n</code></pre>\n<p>(Welcome to the forum <a class=\"mention\" href=\"/u/the_kief\">@the_kief</a> ! I’ve slightly edited your question’s title to follow our <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">guidelines</a>.)</p>",
      "raw": "To make it a bit more readable you can use the form `selector.or(selector1, selector2, ...)`:\n\n```typ\n#show selector.or(\n  raw.where(lang: \"a\"),\n  raw.where(lang: \"b\"),\n  raw.where(lang: \"c\"),\n): it => {\n  set text(red)\n  it\n}\n```\n\nand to generate the show rule from a list you can use an argument sink:\n\n```typ\n#let selectors = (\"a\", \"b\", \"c\").map(x => raw.where(lang: x))\n\n#show selector.or(..selectors): it => {\n  set text(red)\n  it\n}\n```\n\n(Welcome to the forum @the_kief ! I've slightly edited your question's title to follow our [guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11).)",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 31,
      "score": 71.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9799,
      "post_number": 4,
      "username": "the_kief",
      "name": "the_kief",
      "created_at": "2025-03-14T11:18:51.833Z",
      "updated_at": "2025-03-14T11:18:51.833Z",
      "cooked": "<p>Thank you for the answers.</p>\n<p>I’m very well aware that function execution and so on is something that will not be supported but I had the hopes that there still might be something that makes it a bit shorter.</p>\n<p><a class=\"mention\" href=\"/u/sijo\">@sijo</a> could you tell me why the title was an issue so that I can watch out for it in the future?</p>",
      "raw": "Thank you for the answers. \n\nI'm very well aware that function execution and so on is something that will not be supported but I had the hopes that there still might be something that makes it a bit shorter.\n\n@sijo could you tell me why the title was an issue so that I can watch out for it in the future?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1349
    },
    {
      "id": 9803,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-14T12:39:11.660Z",
      "updated_at": "2025-03-14T12:39:11.660Z",
      "cooked": "<p>It’s for consistency; we prefer titles to be a complete question as per the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a>:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>We hope by adhering to this, we make the information in this forum easy to find in the future.</p>\n<p>btw, thanks for using the right category and tag, unsing syntax highlighting, etc. and accepting the answer, it’s appreciated <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "It's for consistency; we prefer titles to be a complete question as per the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11):\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nWe hope by adhering to this, we make the information in this forum easy to find in the future.\n\nbtw, thanks for using the right category and tag, unsing syntax highlighting, etc. and accepting the answer, it's appreciated :slight_smile:",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 9.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:50:23.158399"
}
{
  "topic_metadata": {
    "id": 3255,
    "title": "Is there a way to suppress errors in case of a missing reference?",
    "slug": "is-there-a-way-to-suppress-errors-in-case-of-a-missing-reference",
    "posts_count": 5,
    "created_at": "2025-03-14T09:29:39.280Z",
    "last_posted_at": "2025-03-22T08:03:32.183Z",
    "views": 119,
    "like_count": 3,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "citation"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 428
  },
  "posts": [
    {
      "id": 9793,
      "post_number": 1,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-03-14T09:29:39.388Z",
      "updated_at": "2025-03-14T09:30:41.618Z",
      "cooked": "<p>When citing a reference whose label is missing, Typst throws an error:</p>\n<pre><code class=\"lang-auto\">As noted previously @foo-2025, ...\n</code></pre>\n<p>yields:</p>\n<pre><code class=\"lang-auto\">error: label &lt;foo-2025&gt; does not exist in the document\n</code></pre>\n<p>which forces us to stop writing and go hunt down the relevant bibliographic details.</p>\n<p>In LaTeX, missing references are simply displayed in loud, visible markup such as:</p>\n<blockquote>\n<p>\"As noted previously [<strong>foo-2025</strong>], … \".</p>\n</blockquote>\n<p>Is there a way to have Typst emit simple warnings for missing references without throwing us out of the flow of writing?</p>",
      "raw": "When citing a reference whose label is missing, Typst throws an error:\n\n```\nAs noted previously @foo-2025, ...\n```\nyields:\n```\nerror: label <foo-2025> does not exist in the document\n```\nwhich forces us to stop writing and go hunt down the relevant bibliographic details.\n\nIn LaTeX, missing references are simply displayed in loud, visible markup such as:\n\n> \"As noted previously [**foo-2025**], ... \".\n\nIs there a way to have Typst emit simple warnings for missing references without throwing us out of the flow of writing?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 256.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 9794,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-14T10:08:54.826Z",
      "updated_at": "2025-03-14T11:09:16.469Z",
      "cooked": "<p>There is an <a href=\"https://github.com/typst/typst/issues/4035\" rel=\"noopener nofollow ugc\">issue</a> on GitHub about downgrading missing references to warnings. I think this is the place where you can find the most information regarding your question. Since the issue is still open and the discussion is ongoing, I’m afraid <s>there is no way to currently suppress the errors</s> there is no official solution yet. See the answer by <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> below for a workaround.</p>",
      "raw": "There is an [issue](https://github.com/typst/typst/issues/4035) on GitHub about downgrading missing references to warnings. I think this is the place where you can find the most information regarding your question. Since the issue is still open and the discussion is ongoing, I'm afraid ~~there is no way to currently suppress the errors~~ there is no official solution yet. See the answer by @quachpas below for a workaround.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 15.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 9797,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-14T10:44:13.162Z",
      "updated_at": "2025-03-14T10:44:13.162Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"janekfleper\" data-post=\"2\" data-topic=\"3255\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/j/8F38B1/48.png\" class=\"avatar\"> janekfleper:</div>\n<blockquote>\n<p>I’m afraid there is no way to currently suppress the errors.</p>\n</blockquote>\n</aside>\n<p>It’s a little verbose, but you can just replace labels that don’t exist.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show ref: it =&gt; {\n  if query(it.target).len() == 0 {\n    \"[\" + str(it.target) + \"]\"\n  } else {\n    it\n  }\n}\n\n#figure[] &lt;label&gt;\n\n@label\n\n@ref\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/d/d3f787dad59d00a46a53169b0288a512feb7b523.png\" alt=\"image\" data-base62-sha1=\"uf94R0KsScGY5raemHjBU41Qlur\" width=\"79\" height=\"76\"></p>",
      "raw": "[quote=\"janekfleper, post:2, topic:3255\"]\nI’m afraid there is no way to currently suppress the errors.\n[/quote]\n\nIt's a little verbose, but you can just replace labels that don't exist.\n\n```typ\n#show ref: it => {\n  if query(it.target).len() == 0 {\n    \"[\" + str(it.target) + \"]\"\n  } else {\n    it\n  }\n}\n\n#figure[] <label>\n\n@label\n\n@ref\n```\n![image|79x76](upload://uf94R0KsScGY5raemHjBU41Qlur.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 28,
      "score": 35.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 10066,
      "post_number": 4,
      "username": "PetitPois",
      "name": "",
      "created_at": "2025-03-21T08:23:35.456Z",
      "updated_at": "2025-03-21T08:23:35.456Z",
      "cooked": "<p>Unfortunately, the solution of <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> <strong>breaks citations to the bibliography</strong> (because the query inevitably fails to find the citation label in the typst document). If one could test whether a link can be found in the <code>.bib</code> file or not, then the solution of <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> could be improved.</p>\n<p>Does someone know a way to do this?</p>",
      "raw": "Unfortunately, the solution of @quachpas **breaks citations to the bibliography** (because the query inevitably fails to find the citation label in the typst document). If one could test whether a link can be found in the `.bib` file or not, then the solution of @quachpas could be improved. \n\nDoes someone know a way to do this?",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 13.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1375
    },
    {
      "id": 10107,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-22T08:03:32.183Z",
      "updated_at": "2025-03-22T08:03:51.927Z",
      "cooked": "<p>Due to the way cite references work, there is no way to distinguish between a bibliographic reference or a nonexisting ref. See below, <code>lorem</code> being a reference to a bibliographic item.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">ref(\ntarget: &lt;lorem&gt;,\nsupplement: auto,\nform: \"normal\",\ncitation: cite(key: &lt;lorem&gt;, supplement: none),\nelement: none,\n)\nref(\ntarget: &lt;ref&gt;,\nsupplement: auto,\nform: \"normal\",\ncitation: cite(key: &lt;ref&gt;, supplement: none),\nelement: none,\n)\n</code></pre>\n<p>Instead, you can adapt your show rule to read the bibliography file and compare the keys to the label target. That’s doable with simple parsing (as long as your file is formatted with the <code>@</code> and the <code>key</code> on the same line).</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#bibliography(\"test.bib\")\n#show ref: it =&gt; {\n  let bibfile = read(\"test.bib\")\n  let entries = bibfile.split(\"@\")\n  entries.remove(0) // \"\"\n  let keys = for entry in entries {\n    (entry.slice(entry.position(\"{\")+1, entry.position(\",\")),)\n  }\n  if str(it.target) not in keys and query(it.target).len() == 0 {\n    \"[\" + str(it.target) + \"]\"\n  } else {\n    it\n  }\n}\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/3/30d9e2083507cdc5042c894f91aaca1198cd1280.png\" alt=\"image\" data-base62-sha1=\"6Y9JivQWlz43lFtN9VIqo6rTi48\" width=\"195\" height=\"244\"></p>",
      "raw": "Due to the way cite references work, there is no way to distinguish between a bibliographic reference or a nonexisting ref. See below, `lorem` being a reference to a bibliographic item.\n\n```typ\nref(\ntarget: <lorem>,\nsupplement: auto,\nform: \"normal\",\ncitation: cite(key: <lorem>, supplement: none),\nelement: none,\n)\nref(\ntarget: <ref>,\nsupplement: auto,\nform: \"normal\",\ncitation: cite(key: <ref>, supplement: none),\nelement: none,\n)\n```\nInstead, you can adapt your show rule to read the bibliography file and compare the keys to the label target. That's doable with simple parsing (as long as your file is formatted with the `@` and the `key` on the same line).\n\n```typ\n#bibliography(\"test.bib\")\n#show ref: it => {\n  let bibfile = read(\"test.bib\")\n  let entries = bibfile.split(\"@\")\n  entries.remove(0) // \"\"\n  let keys = for entry in entries {\n    (entry.slice(entry.position(\"{\")+1, entry.position(\",\")),)\n  }\n  if str(it.target) not in keys and query(it.target).len() == 0 {\n    \"[\" + str(it.target) + \"]\"\n  } else {\n    it\n  }\n}\n```\n![image|195x244](upload://6Y9JivQWlz43lFtN9VIqo6rTi48.png)",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 18,
      "score": 33.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:50:22.388579"
}
{
  "topic_metadata": {
    "id": 3270,
    "title": "How can I change the subscript to go right of <= instead of under it?",
    "slug": "how-can-i-change-the-subscript-to-go-right-of-instead-of-under-it",
    "posts_count": 3,
    "created_at": "2025-03-15T12:11:50.443Z",
    "last_posted_at": "2025-03-15T12:45:46.418Z",
    "views": 93,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "math",
      "styling"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 276
  },
  "posts": [
    {
      "id": 9828,
      "post_number": 1,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-15T12:11:50.837Z",
      "updated_at": "2025-03-18T18:08:58.392Z",
      "cooked": "<p>I would like to write something like this:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/8/83f9a61a2a7799959027aeb5d7c34f7e34e515de.png\" alt=\"grafik\" data-base62-sha1=\"iPvpXQww2YkYpO2WSgV7uJmuX8O\" width=\"65\" height=\"30\"><br>\nSo first I tried $L &lt;=_p A$, which results in the p going below the less or equal to. So the best solution I could come up with is &lt;=#sub[p], which works, although I don’t really like the distance to the less or equal to and the missing distance to the next letter:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/0/0fd1d7dcaa0aaaf2d647600ffede16579537a4bc.png\" alt=\"grafik\" data-base62-sha1=\"2fWKroykvWvm9Brjswnlt2FNmIQ\" width=\"79\" height=\"30\"></p>\n<p>So <strong>in short,</strong> I would like to have a show rule, which replaces the &lt;=_p in math mode with L &lt;=#sub[p]. If there is a better solution to display the desired symbol that would of course be great!<br>\nI tried</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show \"&lt;=_p\": it =&gt; [\n  '&lt;=#sub[p]'\n]\n</code></pre>\n<p>which does not work. I think, it would have to be something like</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show sym.lt.eq: it =&gt; [\n  #it#sub[p]\n]\n</code></pre>\n<p>but because the “_p” of “&lt;=_p” is not included in the it, it results in this:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/7/786fb23c856e3c719685a216986227e1e2534050.png\" alt=\"grafik\" data-base62-sha1=\"hbqBtPO46aOVX2dwunKblwdBkDC\" width=\"87\" height=\"27\"></p>\n<p>Any help is appreciated.<br>\nThank you in advance <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "I would like to write something like this: \n![grafik|87x40, 75%](upload://iPvpXQww2YkYpO2WSgV7uJmuX8O.png)\nSo first I tried $L <=_p A$, which results in the p going below the less or equal to. So the best solution I could come up with is <=#sub[p], which works, although I don't really like the distance to the less or equal to and the missing distance to the next letter: \n![grafik|79x30](upload://2fWKroykvWvm9Brjswnlt2FNmIQ.png)\n\nSo **in short,** I would like to have a show rule, which replaces the <=_p in math mode with L <=#sub[p]. If there is a better solution to display the desired symbol that would of course be great!\nI tried\n```typst\n#show \"<=_p\": it => [\n  '<=#sub[p]'\n]\n```\nwhich does not work. I think, it would have to be something like \n```typst\n#show sym.lt.eq: it => [\n  #it#sub[p]\n]\n```\nbut because the \"_p\" of \"<=_p\" is not included in the it, it results in this: \n![grafik|87x27](upload://hbqBtPO46aOVX2dwunKblwdBkDC.png)\n\nAny help is appreciated. \nThank you in advance :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 194.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 9830,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-15T12:24:51.954Z",
      "updated_at": "2025-03-15T12:24:51.954Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Adrian_Weitkemper\" data-post=\"1\" data-topic=\"3270\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/a/F7602B/48.png\" class=\"avatar\"> Adrian_Weitkemper:</div>\n<blockquote>\n<p>So first I tried $L &lt;=_p A$, which results in the p going below the less or equal to.</p>\n</blockquote>\n</aside>\n<p>You can change that <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show sym.lt.eq: math.scripts\n\n$L &lt;=_p A$\n</code></pre>\n<p>The <a href=\"https://typst.app/docs/reference/math/attach#functions-scripts\">scripts</a> and <a href=\"https://typst.app/docs/reference/math/attach#functions-limits\">limits</a> functions change how sub- and superscripts attach to match content. Operators have a default for it, and with these functions you can change it.</p>",
      "raw": "[quote=\"Adrian_Weitkemper, post:1, topic:3270\"]\nSo first I tried $L <=_p A$, which results in the p going below the less or equal to.\n[/quote]\n\nYou can change that :slight_smile: \n\n```typ\n#show sym.lt.eq: math.scripts\n\n$L <=_p A$\n```\n\nThe [scripts](https://typst.app/docs/reference/math/attach#functions-scripts) and [limits](https://typst.app/docs/reference/math/attach#functions-limits) functions change how sub- and superscripts attach to match content. Operators have a default for it, and with these functions you can change it.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 24,
      "score": 64.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 9831,
      "post_number": 3,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-15T12:45:46.418Z",
      "updated_at": "2025-03-15T12:45:46.418Z",
      "cooked": "<p>Thank you very much! This approach even fixes the spacing <img src=\"https://forum.typst.app/images/emoji/apple/+1.png?v=12\" title=\":+1:\" class=\"emoji\" alt=\":+1:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/e/ecf0c958c32a1466abed5b0852c345fe37e84458.png\" alt=\"grafik\" data-base62-sha1=\"xO4z4J4uYpGyurqJxUG4L7d8OFO\" width=\"79\" height=\"36\"></p>",
      "raw": "Thank you very much! This approach even fixes the spacing :+1: \n![grafik|79x36](upload://xO4z4J4uYpGyurqJxUG4L7d8OFO.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 4.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    }
  ],
  "scraped_at": "2025-06-10T09:50:21.667639"
}
