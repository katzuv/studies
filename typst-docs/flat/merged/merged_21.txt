{
  "topic_metadata": {
    "id": 2897,
    "title": "How to fix an equation numbering overlapping with the equation?",
    "slug": "how-to-fix-an-equation-numbering-overlapping-with-the-equation",
    "posts_count": 4,
    "created_at": "2025-02-20T11:10:33.642Z",
    "last_posted_at": "2025-02-20T14:09:44.044Z",
    "views": 80,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "aarnent",
    "tags": [
      "scripting",
      "layout",
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 320
  },
  "posts": [
    {
      "id": 8816,
      "post_number": 1,
      "username": "Shujun_Tan",
      "name": "Shujun Tan",
      "created_at": "2025-02-20T11:10:33.892Z",
      "updated_at": "2025-02-22T09:58:14.324Z",
      "cooked": "<p>Hi, everyone. I found that my long equation overlaps with the equation numbering.  How could I address this problem? Thank you.</p>\n<pre><code class=\"lang-auto\">#set heading(numbering: \"1.1\")\n#set par(justify: true)\n#set page(numbering: \"1 of 1\")\n\n#set math.equation(numbering: (..nums) =&gt; {\n  let section = counter(heading).get().first()\n  numbering(\"(1.1)\", section, ..nums)\n})\n\n#show heading.where(level: 1): it =&gt; {\n  counter(math.equation).update(0)\n  it\n}\n\n#show ref: it =&gt; {\n  let eq = math.equation\n  let el = it.element\n  if el != none and el.func() == eq {\n    // Override equation references.\n   \"expression \"\n    numbering(\n      el.numbering,\n      ..counter(eq).at(el.location())\n    )\n  } else {\n    // Other references as usual.\n    it\n  }\n}\n\n\n#import \"@preview/glossarium:0.5.1\": make-glossary, register-glossary, print-glossary, gls, glspl\n#show: make-glossary\n\n$\nPP[(s_a,r_a),(s_b,r_b)] &amp;= frac(PP_(\"incr\")(L_a,L_b)^N, PP_(\"incr\")(L_a,L_b)^N + PP_(\"incr\")(L_b,L_a)^N) \\\n&amp;= frac([1/4 B(u_S (s_a),u_S (s_b)) + 1/4 B(u_R (r_a),u_R (r_b))]^N,[1/4 B(u_S (s_a),u_S (s_b)) + 1/4 B(u_R (r_a),u_R (r_b))]^N + [1/4 B(u_S (s_b),u_S (s_a)) + 1/4 B(u_R (r_a),u_R (r_b))]^N) \\\n&amp;= cases(\n  1\",\" s_a &gt;= s_b \"and\" r_a &gt;= r_b \"and at least one of them strictly holds\" \\\n  0.5\",\" (s_a = s_b \"and\" r_a = r_b) \"or\" (s_a &gt; s_b \"and\" r_a &lt; r_b) \"or\" (s_a &lt; s_b \"and\" r_a &gt; r_b) \\\n  0\",\" \"otherwise (that is,\" s_a &lt;= s_b \"and\" r_a &lt;= r_b \"and at least one of them strictly holds)\"\n)\n$ &lt;ChoiceProb&gt;\n</code></pre>\n<p>You see, the numbering (0.1) overlaps with the long formula:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/9/9c3f7ba116eb9930e3f2cb46f9dcbc2807b1f55f.png\" data-download-href=\"https://forum.typst.app/uploads/default/9c3f7ba116eb9930e3f2cb46f9dcbc2807b1f55f\" title=\"QQ20250220-111350\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/9/9c3f7ba116eb9930e3f2cb46f9dcbc2807b1f55f_2_690x180.png\" alt=\"QQ20250220-111350\" data-base62-sha1=\"mieuOd8ViPBi4qFuKgiARgGuixF\" width=\"690\" height=\"180\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/9/9c3f7ba116eb9930e3f2cb46f9dcbc2807b1f55f_2_690x180.png, https://forum.typst.app/uploads/default/original/2X/9/9c3f7ba116eb9930e3f2cb46f9dcbc2807b1f55f.png 1.5x, https://forum.typst.app/uploads/default/original/2X/9/9c3f7ba116eb9930e3f2cb46f9dcbc2807b1f55f.png 2x\" data-dominant-color=\"F5F4F4\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">QQ20250220-111350</span><span class=\"informations\">893√ó234 56.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hi, everyone. I found that my long equation overlaps with the equation numbering.  How could I address this problem? Thank you.\n\n\n\n```\n#set heading(numbering: \"1.1\")\n#set par(justify: true)\n#set page(numbering: \"1 of 1\")\n\n#set math.equation(numbering: (..nums) => {\n  let section = counter(heading).get().first()\n  numbering(\"(1.1)\", section, ..nums)\n})\n\n#show heading.where(level: 1): it => {\n  counter(math.equation).update(0)\n  it\n}\n\n#show ref: it => {\n  let eq = math.equation\n  let el = it.element\n  if el != none and el.func() == eq {\n    // Override equation references.\n   \"expression \"\n    numbering(\n      el.numbering,\n      ..counter(eq).at(el.location())\n    )\n  } else {\n    // Other references as usual.\n    it\n  }\n}\n\n\n#import \"@preview/glossarium:0.5.1\": make-glossary, register-glossary, print-glossary, gls, glspl\n#show: make-glossary\n\n$\nPP[(s_a,r_a),(s_b,r_b)] &= frac(PP_(\"incr\")(L_a,L_b)^N, PP_(\"incr\")(L_a,L_b)^N + PP_(\"incr\")(L_b,L_a)^N) \\\n&= frac([1/4 B(u_S (s_a),u_S (s_b)) + 1/4 B(u_R (r_a),u_R (r_b))]^N,[1/4 B(u_S (s_a),u_S (s_b)) + 1/4 B(u_R (r_a),u_R (r_b))]^N + [1/4 B(u_S (s_b),u_S (s_a)) + 1/4 B(u_R (r_a),u_R (r_b))]^N) \\\n&= cases(\n  1\",\" s_a >= s_b \"and\" r_a >= r_b \"and at least one of them strictly holds\" \\\n  0.5\",\" (s_a = s_b \"and\" r_a = r_b) \"or\" (s_a > s_b \"and\" r_a < r_b) \"or\" (s_a < s_b \"and\" r_a > r_b) \\\n  0\",\" \"otherwise (that is,\" s_a <= s_b \"and\" r_a <= r_b \"and at least one of them strictly holds)\"\n)\n$ <ChoiceProb>\n```\n\nYou see, the numbering (0.1) overlaps with the long formula:\n\n![QQ20250220-111350|690x180](upload://mieuOd8ViPBi4qFuKgiARgGuixF.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 196.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 283
    },
    {
      "id": 8819,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-20T11:35:04.660Z",
      "updated_at": "2025-02-20T11:35:04.660Z",
      "cooked": "<p>There is the <a href=\"https://typst.app/docs/reference/math/equation/#parameters-number-align\">equation.number-align</a> property that you can set. Does that work for you, or do you seek a more customisable solution?</p>",
      "raw": "There is the [equation.number-align](https://typst.app/docs/reference/math/equation/#parameters-number-align) property that you can set. Does that work for you, or do you seek a more customisable solution?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 21.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 8823,
      "post_number": 3,
      "username": "Shujun_Tan",
      "name": "Shujun Tan",
      "created_at": "2025-02-20T13:33:42.184Z",
      "updated_at": "2025-02-20T13:33:42.184Z",
      "cooked": "<p>Yeah it does, thank you!</p>",
      "raw": "Yeah it does, thank you!",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 283
    },
    {
      "id": 8824,
      "post_number": 4,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-20T14:09:44.044Z",
      "updated_at": "2025-02-20T14:09:44.044Z",
      "cooked": "<p>No problem. If that solved it, please mark the comment as the solution using the checkmark icon. It makes it easier for future readers to filter &amp; find <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "No problem. If that solved it, please mark the comment as the solution using the checkmark icon. It makes it easier for future readers to filter & find :slight_smile:",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 19.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    }
  ],
  "scraped_at": "2025-06-10T09:51:26.881080"
}
{
  "topic_metadata": {
    "id": 2899,
    "title": "How to convert content to length",
    "slug": "how-to-convert-content-to-length",
    "posts_count": 2,
    "created_at": "2025-02-20T20:01:55.496Z",
    "last_posted_at": "2025-02-20T20:11:53.451Z",
    "views": 109,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "context"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 189
  },
  "posts": [
    {
      "id": 8826,
      "post_number": 1,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-20T20:01:55.575Z",
      "updated_at": "2025-02-22T09:59:12.968Z",
      "cooked": "<p>Hi,</p>\n<p>I‚Äôd like to set text font size twice bigger or smaller than current. Something like this:</p>\n<pre><code class=\"lang-auto\">#[\n  #let stampsize = (context text.size / 2)\n  #set text(size: stampsize)\n  //#(context text.size / 2)\n]\n</code></pre>\n<p>The commented out line shows something I want, like <code>9pt</code> after dividing <code>18pt</code> by two. Unfortunately, there‚Äôs an error <em>expected length, found content</em>. Not quite surprising, because the content is probably a string, and <code>18pt</code> is a literal of another type.</p>\n<p>Is there a way to get what I want?</p>",
      "raw": "Hi,\n\nI'd like to set text font size twice bigger or smaller than current. Something like this:\n```\n#[\n  #let stampsize = (context text.size / 2)\n  #set text(size: stampsize)\n  //#(context text.size / 2)\n]\n```\nThe commented out line shows something I want, like `9pt` after dividing `18pt` by two. Unfortunately, there's an error _expected length, found content_. Not quite surprising, because the content is probably a string, and `18pt` is a literal of another type.\n\nIs there a way to get what I want?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 297.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    },
    {
      "id": 8827,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-02-20T20:11:53.451Z",
      "updated_at": "2025-02-20T20:11:53.451Z",
      "cooked": "<p>You can use the sizes <code>2em</code> or <code>0.5em</code> to get a font size that is double or half the current font size. In the example below the first and last ‚Äúhello‚Äù will have the same font size, whereas the second ‚Äúhello‚Äù will have twice the current font size.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">hello\n#set text(size: 2em)\nhello\n#set text(size: 0.5em)\nhello\n</code></pre>\n<p>The error in your case is caused by the fact that a context always returns content. If you want to understand this, I can recommend reading this <a href=\"https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164\">post</a>.</p>",
      "raw": "You can use the sizes `2em` or `0.5em` to get a font size that is double or half the current font size. In the example below the first and last \"hello\" will have the same font size, whereas the second \"hello\" will have twice the current font size.\n\n```typ\nhello\n#set text(size: 2em)\nhello\n#set text(size: 0.5em)\nhello\n```\n\nThe error in your case is caused by the fact that a context always returns content. If you want to understand this, I can recommend reading this [post](https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 22.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    }
  ],
  "scraped_at": "2025-06-10T09:51:26.168528"
}
{
  "topic_metadata": {
    "id": 2900,
    "title": "How to emphasize an important equation, in LaTeX's \\boxed fashion?",
    "slug": "how-to-emphasize-an-important-equation-in-latexs-boxed-fashion",
    "posts_count": 4,
    "created_at": "2025-02-20T20:47:48.661Z",
    "last_posted_at": "2025-02-22T11:16:44.592Z",
    "views": 222,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "math",
      "latex-migration"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 496
  },
  "posts": [
    {
      "id": 8828,
      "post_number": 1,
      "username": "jonas.bloch",
      "name": "Jonas Bloch",
      "created_at": "2025-02-20T20:47:48.843Z",
      "updated_at": "2025-02-20T20:47:48.843Z",
      "cooked": "<p>Hello!</p>\n<p>I was wondering if there was a simple way to emphasize the content of an important equation, something like LaTeX‚Äôs <code>\\boxed</code> function. I tried using <code>#rect</code> here and there:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set math.equation(numbering: \"(1.1)\")\n#rect[\n  $ integral_(-oo)^(+oo) e^(-x^2) upright(d)x  = sqrt(pi) $\n]\n</code></pre>\n<p>But I do not really like the box being this big, as it must contain the whole equation line, including the number. Besides, if I want to select a specific part of the equation, the following</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ integral_(0)^(+oo) e^(-x^2) upright(d)x  = #rect[$sqrt(pi)/2$] $\n</code></pre>\n<p>Is not very satisfying, as I must leave display mode in the <code>rect</code> and the rect borders touch the equation content. Well, I could use <code>display</code> and try to add some padding, but this seems like more inconvenient than necessary. Did I miss a super simple solution?</p>\n<p>Thanks in advance for helping out!</p>",
      "raw": "Hello!\n\nI was wondering if there was a simple way to emphasize the content of an important equation, something like LaTeX's `\\boxed` function. I tried using `#rect` here and there:\n```typ\n#set math.equation(numbering: \"(1.1)\")\n#rect[\n  $ integral_(-oo)^(+oo) e^(-x^2) upright(d)x  = sqrt(pi) $\n]\n```\nBut I do not really like the box being this big, as it must contain the whole equation line, including the number. Besides, if I want to select a specific part of the equation, the following\n```typ\n$ integral_(0)^(+oo) e^(-x^2) upright(d)x  = #rect[$sqrt(pi)/2$] $\n```\nIs not very satisfying, as I must leave display mode in the `rect` and the rect borders touch the equation content. Well, I could use `display` and try to add some padding, but this seems like more inconvenient than necessary. Did I miss a super simple solution?\n\nThanks in advance for helping out!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 689.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1192
    },
    {
      "id": 8829,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-02-20T21:09:42.844Z",
      "updated_at": "2025-02-20T21:09:42.844Z",
      "cooked": "<p>This is indeed a surprisingly non-trivial problem, as the interaction between math content and regular content isn‚Äôt optimal right now. However, there is a very useful package called <a href=\"https://typst.app/universe/package/mannot/\">mannot</a>, which allows the kind of boxing you‚Äôre looking for (and much more):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/mannot:0.2.2\": markrect\n\n$ integral_0^(+oo) e^(-x^2) dif x  = markrect(sqrt(pi)/2) $\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/5/58611f5da23b6c36491dde22cd594bf88caf270d.png\" alt=\"image\" data-base62-sha1=\"cBQ6hX0EhTFtRdb8V7QdCcFOl53\" width=\"220\" height=\"80\"></p>",
      "raw": "This is indeed a surprisingly non-trivial problem, as the interaction between math content and regular content isn't optimal right now. However, there is a very useful package called [mannot](https://typst.app/universe/package/mannot/), which allows the kind of boxing you're looking for (and much more):\n\n```typ\n#import \"@preview/mannot:0.2.2\": markrect\n\n$ integral_0^(+oo) e^(-x^2) dif x  = markrect(sqrt(pi)/2) $\n```\n\n![image|275x100, 80%](upload://cBQ6hX0EhTFtRdb8V7QdCcFOl53.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 47,
      "score": 94.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 8866,
      "post_number": 3,
      "username": "Adil_Hassan",
      "name": "Adil Hassan",
      "created_at": "2025-02-22T10:56:44.899Z",
      "updated_at": "2025-02-22T16:34:21.618Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"jonas.bloch\" data-post=\"1\" data-topic=\"2900\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/j/145B49/48.png\" class=\"avatar\"> jonas.bloch:</div>\n<blockquote>\n<p>Hello!</p>\n<p>I was wondering if there was a simple way to emphasize the content of an important equation, something like LaTeX‚Äôs <code>\\boxed</code> function. I tried using <code>#rect</code> here and there:</p>\n<pre><code class=\"lang-auto\">#set math.equation(numbering: \"(1.1)\")\n#rect[\n  $ integral_(-oo)^(+oo) e^(-x^2) upright(d)x  = sqrt(pi) $\n]\n</code></pre>\n<p>But I do not really like the box being this big, as it must contain the whole equation line, including the number. Besides, if I want to select a specific part of the equation, the following</p>\n<pre><code class=\"lang-auto\">$ integral_(0)^(+oo) e^(-x^2) upright(d)x  = #rect[$sqrt(pi)/2$] $\n</code></pre>\n<p>Is not very satisfying, as I must leave display mode in the <code>rect</code> and the rect borders touch the equation content. Well, I could use <code>display</code> and try to add some padding, but this seems like more inconvenient than necessary. Did I miss a super simple solution?</p>\n<p>Thanks in advance for helping out!</p>\n</blockquote>\n</aside>\n<p>If you want a LaTeX-style <code>\\boxed</code> function but with more control over size and padding, consider using <code>\\fbox</code> or <code>\\colorbox</code> from the xcolor package. For highlighting only part of the equation, <code>\\highlight</code> from soul or <code>\\tikzmark</code> can work.</p>\n<p>Example using <code>\\colorbox</code> for better spacing:</p>\n<pre data-code-wrap=\"tex\"><code class=\"lang-tex\">\\documentclass{article}\n\\usepackage{xcolor}\n\\begin{document}\n\\[\n\\colorbox{yellow}{$\\frac{\\sqrt{\\pi}}{2}$}\n\\]\n\\end{document}\n</code></pre>\n<p>This avoids the box touching the equation too closely. Let me know if you need finer adjustments! <img src=\"https://forum.typst.app/images/emoji/apple/blush.png?v=12\" title=\":blush:\" class=\"emoji\" alt=\":blush:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "[quote=\"jonas.bloch, post:1, topic:2900, full:true\"]\nHello!\n\nI was wondering if there was a simple way to emphasize the content of an important equation, something like LaTeX‚Äôs `\\boxed` function. I tried using `#rect` here and there:\n\n```\n#set math.equation(numbering: \"(1.1)\")\n#rect[\n  $ integral_(-oo)^(+oo) e^(-x^2) upright(d)x  = sqrt(pi) $\n]\n```\n\nBut I do not really like the box being this big, as it must contain the whole equation line, including the number. Besides, if I want to select a specific part of the equation, the following\n\n```\n$ integral_(0)^(+oo) e^(-x^2) upright(d)x  = #rect[$sqrt(pi)/2$] $\n```\n\nIs not very satisfying, as I must leave display mode in the `rect` and the rect borders touch the equation content. Well, I could use `display` and try to add some padding, but this seems like more inconvenient than necessary. Did I miss a super simple solution?\n\nThanks in advance for helping out!\n[/quote]\n\nIf you want a LaTeX-style `\\boxed` function but with more control over size and padding, consider using `\\fbox` or `\\colorbox` from the xcolor package. For highlighting only part of the equation, `\\highlight` from soul or `\\tikzmark` can work.\n\n\n\nExample using `\\colorbox` for better spacing:\n\n```tex\n\\documentclass{article}\n\\usepackage{xcolor}\n\\begin{document}\n\\[\n\\colorbox{yellow}{$\\frac{\\sqrt{\\pi}}{2}$}\n\\]\n\\end{document}\n```\n\nThis avoids the box touching the equation too closely. Let me know if you need finer adjustments! üòä",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 26,
      "score": 15.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1178
    },
    {
      "id": 8868,
      "post_number": 4,
      "username": "jonas.bloch",
      "name": "Jonas Bloch",
      "created_at": "2025-02-22T11:16:44.592Z",
      "updated_at": "2025-02-22T11:16:44.592Z",
      "cooked": "<p>Well, my question was more about making this in Typst, as I am mostly satisfied with LaTeX‚Äôs function. I did not know about these though, thanks for the input!</p>",
      "raw": "Well, my question was more about making this in Typst, as I am mostly satisfied with LaTeX's function. I did not know about these though, thanks for the input!",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1192
    }
  ],
  "scraped_at": "2025-06-10T09:51:25.458494"
}
{
  "topic_metadata": {
    "id": 2905,
    "title": "How can I apply Codly settings specifically to one block?",
    "slug": "how-can-i-apply-codly-settings-specifically-to-one-block",
    "posts_count": 6,
    "created_at": "2025-02-21T16:31:14.315Z",
    "last_posted_at": "2025-02-25T08:30:44.229Z",
    "views": 86,
    "like_count": 0,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "flokl",
    "tags": [
      "codly"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 281
  },
  "posts": [
    {
      "id": 8838,
      "post_number": 1,
      "username": "JohnDough",
      "name": "John Dough",
      "created_at": "2025-02-21T16:31:14.444Z",
      "updated_at": "2025-03-07T21:09:21.545Z",
      "cooked": "<p>Hey there,</p>\n<p>I wasted a lot of time today trying to customize just one specific codly code block and not all of the other ones.</p>\n<p>The situation I got is, that I want to make a codly block, which doesn‚Äôt have any line numbers, as this is not necessary and takes away some space on the left.</p>\n<p>Since <code>#codly</code> does not take any body argument, I do not know how I can achieve this.</p>\n<p>I don‚Äôt want to enable the numbering manually for every single code block, as this would be nerve-wracking every single time (which is quite often for my thesis).</p>\n<p>Has anyone else had similar issues before and found a solution?</p>\n<p>I would be very grateful for a solution to this <img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Thanks in advance<br>\nJohn</p>",
      "raw": "Hey there, \n\nI wasted a lot of time today trying to customize just one specific codly code block and not all of the other ones. \n\nThe situation I got is, that I want to make a codly block, which doesn't have any line numbers, as this is not necessary and takes away some space on the left. \n\nSince `#codly` does not take any body argument, I do not know how I can achieve this. \n\nI don't want to enable the numbering manually for every single code block, as this would be nerve-wracking every single time (which is quite often for my thesis).\n\nHas anyone else had similar issues before and found a solution?\n\nI would be very grateful for a solution to this :smile: \n\nThanks in advance\nJohn",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 164.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1021
    },
    {
      "id": 8840,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-21T17:13:44.399Z",
      "updated_at": "2025-02-21T17:13:44.399Z",
      "cooked": "<p>Codly provides <code>#local</code> which takes the same arguments as <code>#codly</code> but applies them only to the local code block.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#local(number-format: none)[\n  ```rust\n  pub fn main() {\n      println!(\"Hello, world!\");\n  }\n  ```\n]\n</code></pre>\n<p>An alternative would be to disable the line numbering before your code block and re-enabling it after.</p>",
      "raw": "Codly provides `#local` which takes the same arguments as `#codly` but applies them only to the local code block.\n````typst\n#local(number-format: none)[\n  ```rust\n  pub fn main() {\n      println!(\"Hello, world!\");\n  }\n  ```\n]\n````\nAn alternative would be to disable the line numbering before your code block and re-enabling it after.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 14.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 8963,
      "post_number": 3,
      "username": "JohnDough",
      "name": "John Dough",
      "created_at": "2025-02-24T11:54:07.830Z",
      "updated_at": "2025-02-24T11:54:07.830Z",
      "cooked": "<p>Thank you very much! This is exactly what I have been looking for <img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Thank you very much! This is exactly what I have been looking for :smile:",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1021
    },
    {
      "id": 8965,
      "post_number": 4,
      "username": "JohnDough",
      "name": "John Dough",
      "created_at": "2025-02-24T12:14:47.334Z",
      "updated_at": "2025-02-24T12:14:47.334Z",
      "cooked": "<p>So setting it locally works for disabling numbers, but I can‚Äôt pass the highlights parameter to the local function. Is there also a solution?</p>",
      "raw": "So setting it locally works for disabling numbers, but I can't pass the highlights parameter to the local function. Is there also a solution?",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 13.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1021
    },
    {
      "id": 9012,
      "post_number": 5,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-24T17:32:56.592Z",
      "updated_at": "2025-02-24T17:36:15.016Z",
      "cooked": "<p>Interesting, no idea why. It does work by calling <code>codly</code> inside <code>local</code>, like this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#local(number-format: none)[\n  #codly(highlights: (\n     (line: 2, start: 5, end: 12, fill: red),\n  ))\n  ```rust\n  pub fn main() {\n      println!(\"Hello, world!\");\n  }\n  ```\n]\n</code></pre>",
      "raw": "Interesting, no idea why. It does work by calling `codly` inside `local`, like this:\n\n`````typst\n#local(number-format: none)[\n  #codly(highlights: (\n     (line: 2, start: 5, end: 12, fill: red),\n  ))\n  ```rust\n  pub fn main() {\n      println!(\"Hello, world!\");\n  }\n  ```\n]\n`````",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 8.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9027,
      "post_number": 6,
      "username": "JohnDough",
      "name": "John Dough",
      "created_at": "2025-02-25T08:30:44.229Z",
      "updated_at": "2025-02-25T08:30:44.229Z",
      "cooked": "<p>Thanks that‚Äôs it, then I will use this workaround and in the meantime I will open an Issue in the repo. Thanks a lot <img src=\"https://forum.typst.app/images/emoji/apple/100.png?v=12\" title=\":100:\" class=\"emoji\" alt=\":100:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Thanks that's it, then I will use this workaround and in the meantime I will open an Issue in the repo. Thanks a lot :100:",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 14,
      "score": 2.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1021
    }
  ],
  "scraped_at": "2025-06-10T09:51:24.746894"
}
{
  "topic_metadata": {
    "id": 2916,
    "title": "How to get rid of \"Layout did not converge\" warning when pagebreaking on odd pages?",
    "slug": "how-to-get-rid-of-layout-did-not-converge-warning-when-pagebreaking-on-odd-pages",
    "posts_count": 2,
    "created_at": "2025-02-22T13:33:13.315Z",
    "last_posted_at": "2025-02-22T13:45:04.497Z",
    "views": 67,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "page",
      "context"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 176
  },
  "posts": [
    {
      "id": 8874,
      "post_number": 1,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-22T13:33:13.483Z",
      "updated_at": "2025-02-22T13:43:50.006Z",
      "cooked": "<p>I always want an even number of pages for my document. To do that, I add a pagebreak when the last page number is odd. The problem is that, since I change the page parity in a context block where I check the page parity, I get a warning.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#lorem(100)\n\n#context if calc.odd(here().page()) { pagebreak() }\n</code></pre>\n<blockquote>\n<p>Layout did not converge within 5 attempts <small>(warning)</small></p>\n</blockquote>\n<p>How to get rid of that?</p>\n<p>I think that <code>pagebreak(to: \"even\")</code> cannot help in this case, since I don‚Äôt want any pagebreak when the page ends on an even page.</p>",
      "raw": "I always want an even number of pages for my document. To do that, I add a pagebreak when the last page number is odd. The problem is that, since I change the page parity in a context block where I check the page parity, I get a warning.\n\n```typst\n#lorem(100)\n\n#context if calc.odd(here().page()) { pagebreak() }\n```\n\n> Layout did not converge within 5 attempts <small>(warning)</small>\n\nHow to get rid of that?\n\nI think that `pagebreak(to: \"even\")` cannot help in this case, since I don't want any pagebreak when the page ends on an even page.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 215.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8875,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-02-22T13:45:04.497Z",
      "updated_at": "2025-02-22T13:45:04.497Z",
      "cooked": "<p>I think the issue is that the function call of <code>calc.odd(here().page())</code> is evaluated again after the new page is added. And since the result will always stay the same the compiler should just continue to add pages, which will obviously not converge.</p>\n<p>Thankfully the function <code>pagebreak()</code> directly supports your use case of making sure that the number of pages in the document is even.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#lorem(100)\n\n#pagebreak(to: \"odd\", weak: true)\n</code></pre>",
      "raw": "I think the issue is that the function call of `calc.odd(here().page())` is evaluated again after the new page is added. And since the result will always stay the same the compiler should just continue to add pages, which will obviously not converge.\n\nThankfully the function `pagebreak()` directly supports your use case of making sure that the number of pages in the document is even.\n\n```typ\n#lorem(100)\n\n#pagebreak(to: \"odd\", weak: true)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 20.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    }
  ],
  "scraped_at": "2025-06-10T09:51:24.018995"
}
{
  "topic_metadata": {
    "id": 2923,
    "title": "How to write math in footer?",
    "slug": "how-to-write-math-in-footer",
    "posts_count": 5,
    "created_at": "2025-02-22T16:30:21.702Z",
    "last_posted_at": "2025-03-14T07:57:35.845Z",
    "views": 121,
    "like_count": 1,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "layout",
      "math"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 247
  },
  "posts": [
    {
      "id": 8886,
      "post_number": 1,
      "username": "DMDM",
      "name": "DMDM",
      "created_at": "2025-02-22T16:30:21.825Z",
      "updated_at": "2025-02-22T18:09:18.379Z",
      "cooked": "<p>Hello, I am writing a math-related handout in the Typst web app. But when I try to write some math in the footer, it shows the dollar signs and not the math symbols. Here is an example.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#showybox(\n  frame: (\n    border-color: lime,\n    title-color: maroon,\n    body-color: teal,\n    footer-color: gray,\n    thickness: 1.25pt,\n    radius: 0pt,\n    dash: \"solid\"\n  ),\n  \n  title-style: (\n   color: white,\n    align: center,\n    boxed-style: (\n      anchor: (\n        x: center,\n        y: horizon\n      ),\n      radius: (top-left: 10pt, bottom-right: 10pt)\n    )\n  ),\n  body-style: (\n    color: black,\n    align: left,\n  ),\n  footer-style: (\n    color: black,\n    align:  right\n  ),\n  breakable: true,\n  sep: (\n    dash: \"densely-dashed\"\n  ),\n  title: \"Incentre-Excentre Lemma(Fact 5)\",\n  footer: \"Note that $F_A$ is the circumcentre of $x^2$ \\u{0024}8 \\u{0024} $IBC$\",\n  [- In \\u{25B3}$A B C$, $A$, $I$, $E_A$ are collinear.\n- $F_A B = F_A C = F_A E_A$],\n  [Proof: Trivial ?]\n)\n</code></pre>",
      "raw": "Hello, I am writing a math-related handout in the Typst web app. But when I try to write some math in the footer, it shows the dollar signs and not the math symbols. Here is an example.\n\n```typ\n#showybox(\n  frame: (\n    border-color: lime,\n    title-color: maroon,\n    body-color: teal,\n    footer-color: gray,\n    thickness: 1.25pt,\n    radius: 0pt,\n    dash: \"solid\"\n  ),\n  \n  title-style: (\n   color: white,\n    align: center,\n    boxed-style: (\n      anchor: (\n        x: center,\n        y: horizon\n      ),\n      radius: (top-left: 10pt, bottom-right: 10pt)\n    )\n  ),\n  body-style: (\n    color: black,\n    align: left,\n  ),\n  footer-style: (\n    color: black,\n    align:  right\n  ),\n  breakable: true,\n  sep: (\n    dash: \"densely-dashed\"\n  ),\n  title: \"Incentre-Excentre Lemma(Fact 5)\",\n  footer: \"Note that $F_A$ is the circumcentre of $x^2$ \\u{0024}8 \\u{0024} $IBC$\",\n  [- In \\u{25B3}$A B C$, $A$, $I$, $E_A$ are collinear.\n- $F_A B = F_A C = F_A E_A$],\n  [Proof: Trivial ?]\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 138.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1228
    },
    {
      "id": 8890,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-22T16:43:09.729Z",
      "updated_at": "2025-02-22T16:43:09.729Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/dmdm\">@DMDM</a>,</p>\n<p>you use quotes for your footer value. Typst interprets this text as a plain string, you have to use content mode (square brackets), <code>footer: [ ... ]</code></p>\n<p>P.S. Please format your code with a code block:</p>\n<pre><code class=\"lang-auto\">```typst\nyour code\n```\n</code></pre>",
      "raw": "Hi @DMDM,\n\nyou use quotes for your footer value. Typst interprets this text as a plain string, you have to use content mode (square brackets), `footer: [ ... ]`\n\nP.S. Please format your code with a code block:\n````\n```typst\nyour code\n```\n````",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 22.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 8891,
      "post_number": 3,
      "username": "DMDM",
      "name": "DMDM",
      "created_at": "2025-02-22T16:49:52.094Z",
      "updated_at": "2025-02-22T16:49:52.094Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/flokl\">@flokl</a> Thanks a lot.</p>",
      "raw": "@flokl Thanks a lot.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 11.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1228
    },
    {
      "id": 8893,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-22T18:16:05.437Z",
      "updated_at": "2025-03-07T20:25:19.735Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/dmdm\">@DMDM</a>, thanks for your question! If you feel the response you got has sufficiently answered your question, be sure to give it a checkmark <img src=\"https://forum.typst.app/images/emoji/apple/ballot_box_with_check.png?v=12\" title=\":ballot_box_with_check:\" class=\"emoji\" alt=\":ballot_box_with_check:\" loading=\"lazy\" width=\"20\" height=\"20\">. This will help others find the solution in the future. Thanks!</p>\n<p>Edit: I have marked a response as the solution.</p>",
      "raw": "Hi @DMDM, thanks for your question! If you feel the response you got has sufficiently answered your question, be sure to give it a checkmark :ballot_box_with_check:. This will help others find the solution in the future. Thanks!\n\nEdit: I have marked a response as the solution.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 16.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 9786,
      "post_number": 5,
      "username": "DMDM",
      "name": "DMDM",
      "created_at": "2025-03-14T07:57:35.845Z",
      "updated_at": "2025-03-14T07:57:35.845Z",
      "cooked": "<p>Sorry, I didn‚Äôt check the replies. I would make sure to give a checkmark from next time onwards.</p>",
      "raw": "Sorry, I didn't check the replies. I would make sure to give a checkmark from next time onwards.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 49.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1228
    }
  ],
  "scraped_at": "2025-06-10T09:51:23.298611"
}
{
  "topic_metadata": {
    "id": 2927,
    "title": "How do I calculate the width of content without having context everywhere?",
    "slug": "how-do-i-calculate-the-width-of-content-without-having-context-everywhere",
    "posts_count": 6,
    "created_at": "2025-02-22T19:03:26.809Z",
    "last_posted_at": "2025-02-24T07:57:26.669Z",
    "views": 127,
    "like_count": 4,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "context",
      "measure"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 866
  },
  "posts": [
    {
      "id": 8894,
      "post_number": 1,
      "username": "Bolt",
      "name": "",
      "created_at": "2025-02-22T19:03:26.950Z",
      "updated_at": "2025-02-22T19:39:34.500Z",
      "cooked": "<p>I‚Äôm working on a package with displays a syntax tree using cetz, but I‚Äôm having trouble calculating the width of the leaf nodes. Currently it only works for strings with an approximation of <code>label.len() / 7 + 0.5</code> which has worked surprisingly well, but I want to do better.</p>\n<p>This is what I‚Äôve been trying:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">let width(node) = context {\n  let (_label, children) = node\n  if type(children) == content {\n    measure(children).width.cm\n  } else if type(children) == array {\n    children.map(width).sum()\n  }\n}\n</code></pre>\n<p>But I‚Äôm getting <code>Assertion failed: Incorrect type for body: content</code> from cetz.</p>\n<p>For reference the broader function and where it‚Äôs called from is</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">let tree-recursive(node, id: (0,), x: 0, y: 0) = context {\n  let wid = width(node)\n  ...\n  // show label with cetz.draw.content\n  ...\n  // call recursively on children with modified coords\n}\ncetz.canvas(tree-recursive(node))\n</code></pre>\n<p>Any ideas on how to solve this? My instinct is that I shouldn‚Äôt need this much context, but I don‚Äôt know how to get any better an approximation without using it.</p>",
      "raw": "I'm working on a package with displays a syntax tree using cetz, but I'm having trouble calculating the width of the leaf nodes. Currently it only works for strings with an approximation of `label.len() / 7 + 0.5` which has worked surprisingly well, but I want to do better. \n\nThis is what I've been trying:\n```typc\nlet width(node) = context {\n  let (_label, children) = node\n  if type(children) == content {\n    measure(children).width.cm\n  } else if type(children) == array {\n    children.map(width).sum()\n  }\n}\n```\nBut I'm getting `Assertion failed: Incorrect type for body: content` from cetz.\n\nFor reference the broader function and where it's called from is \n```typc\nlet tree-recursive(node, id: (0,), x: 0, y: 0) = context {\n  let wid = width(node)\n  ...\n  // show label with cetz.draw.content\n  ...\n  // call recursively on children with modified coords\n}\ncetz.canvas(tree-recursive(node))\n```\nAny ideas on how to solve this? My instinct is that I shouldn't need this much context, but I don't know how to get any better an approximation without using it.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 242.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 737
    },
    {
      "id": 8895,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-22T19:35:28.627Z",
      "updated_at": "2025-02-22T19:35:28.627Z",
      "cooked": "<p>You need context, but not that much. I suspect that this will basically work if you put the whole CeTZ canvas into the context, and don‚Äôt use <code>context</code> anywhere else.</p>\n<aside class=\"quote no-group\" data-username=\"Bolt\" data-post=\"1\" data-topic=\"2927\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/b/11566C/48.png\" class=\"avatar\"> Bolt:</div>\n<blockquote>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">let width(node) = context {\n</code></pre>\n</blockquote>\n</aside>\n<p>this function would not return a length but <code>content</code> (and <code>children.map(width)</code> would result in an array of contents instead of an array of lengths as well). To learn more about the reasons, take a look at <a href=\"https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164/2\" class=\"inline-onebox\">Why is the value I receive from context always content? - #2 by laurmaedje</a></p>\n<p>Since each <code>context</code> expression results in opaque content, everything that depends on the non-opaque values within the block needs to be nested inside the context. Since the CeTZ canvas itself needs structured data (i.e. the CeTZ drawing functions) you can‚Äôt put context between the canvas and the drawing functions; from that it follows that you put the context <em>around</em> the canvas.</p>",
      "raw": "You need context, but not that much. I suspect that this will basically work if you put the whole CeTZ canvas into the context, and don't use `context` anywhere else.\n\n[quote=\"Bolt, post:1, topic:2927\"]\n```typ\nlet width(node) = context {\n```\n[/quote]\nthis function would not return a length but `content` (and `children.map(width)` would result in an array of contents instead of an array of lengths as well). To learn more about the reasons, take a look at https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164/2?u=sillyfreak\n\nSince each `context` expression results in opaque content, everything that depends on the non-opaque values within the block needs to be nested inside the context. Since the CeTZ canvas itself needs structured data (i.e. the CeTZ drawing functions) you can't put context between the canvas and the drawing functions; from that it follows that you put the context _around_ the canvas.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 34,
      "score": 31.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 8907,
      "post_number": 3,
      "username": "Bolt",
      "name": "",
      "created_at": "2025-02-23T03:02:04.489Z",
      "updated_at": "2025-02-23T03:02:04.489Z",
      "cooked": "<p>Is this what you meant? It seems to work, but it thought that context blocks should be minimized? Here basically all the code is in one.</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">let tree(node, ...) = context {\n  // helper functions\n  let width(node) = { ... }\n  let offset(node) = { ... }\n  ...\n  // the big function\n  let tree-recursive(node, ...) = { ... }\n  cetz.canvas(tree-recursive(node))\n}\n</code></pre>",
      "raw": "Is this what you meant? It seems to work, but it thought that context blocks should be minimized? Here basically all the code is in one. \n\n```typc\nlet tree(node, ...) = context {\n  // helper functions\n  let width(node) = { ... }\n  let offset(node) = { ... }\n  ...\n  // the big function\n  let tree-recursive(node, ...) = { ... }\n  cetz.canvas(tree-recursive(node))\n}\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 11.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 737
    },
    {
      "id": 8921,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-23T15:30:18.957Z",
      "updated_at": "2025-02-23T15:30:18.957Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Bolt\" data-post=\"3\" data-topic=\"2927\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/b/11566C/48.png\" class=\"avatar\"> Bolt:</div>\n<blockquote>\n<p>but it thought that context blocks should be minimized?</p>\n</blockquote>\n</aside>\n<p>As far as I understand, that is largely not an issue anymore since 0.12. Back with 0.11, there were cases where making context smaller was important, although I‚Äôm not sure what the implications were.</p>\n<p>In any case, even then you‚Äôd have had to make the context <em>big enough</em> and what you‚Äôre doing here is already the smallest context scope possible (at least as long that we assume that there‚Äôs no way around measuring inside the diagram). And even though it‚Äôs quite a bit of <em>code</em>, I‚Äôd say one diagram is actually not that big of a scope anyway.</p>\n<p>That said, what are the implications of using a large scope? One important one is that the context is ‚Äúfrozen‚Äù in the whole scope. Consider this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context {\n  [#text.size]\n  set text(size: 2em)\n  [#text.size]\n}\n</code></pre>\n<p>both of these will print the same value, but in different font sizes! You access <code>text.size</code> contextually, and the value you access is the one active at the beginning of the context block. One way around this is to break this into two smaller context blocks, but even if that is not possible, you can work around this by nesting context blocks:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context {\n  [#text.size]\n  set text(size: 2em)\n  context [#text.size]\n}\n</code></pre>\n<p>Another implication is that context blocks will sometimes fail in early iterations. Typst will retry when the context changes, but if the source and consumer of that change are in the same block, this won‚Äôt work. The workaround is the same:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let x = state(\"x\")\n#context {\n  x.update(1)\n\n  // bad: the context fails and the update isn't applied,\n  // leading to the context to continue failing\n  // assert.eq(x.get(), 1)\n\n  // good: only this context fails, so the update is applied\n  // on the next attempt, this succeeds\n  context assert.eq(x.get(), 1)\n}\n</code></pre>\n<p>You can read more about this behavior here: <a href=\"https://forum.typst.app/t/is-an-assert-supposed-to-be-able-to-change-behavior-when-it-doesnt-fail/1433/2\" class=\"inline-onebox\">Is an assert supposed to be able to change behavior when it \"doesn't\" fail? - #2 by laurmaedje</a> and in the issue linked there.</p>",
      "raw": "[quote=\"Bolt, post:3, topic:2927\"]\nbut it thought that context blocks should be minimized?\n[/quote]\n\nAs far as I understand, that is largely not an issue anymore since 0.12. Back with 0.11, there were cases where making context smaller was important, although I'm not sure what the implications were.\n\nIn any case, even then you'd have had to make the context _big enough_ and what you're doing here is already the smallest context scope possible (at least as long that we assume that there's no way around measuring inside the diagram). And even though it's quite a bit of _code_, I'd say one diagram is actually not that big of a scope anyway.\n\nThat said, what are the implications of using a large scope? One important one is that the context is \"frozen\" in the whole scope. Consider this:\n```typ\n#context {\n  [#text.size]\n  set text(size: 2em)\n  [#text.size]\n}\n```\nboth of these will print the same value, but in different font sizes! You access `text.size` contextually, and the value you access is the one active at the beginning of the context block. One way around this is to break this into two smaller context blocks, but even if that is not possible, you can work around this by nesting context blocks:\n```typ\n#context {\n  [#text.size]\n  set text(size: 2em)\n  context [#text.size]\n}\n```\nAnother implication is that context blocks will sometimes fail in early iterations. Typst will retry when the context changes, but if the source and consumer of that change are in the same block, this won't work. The workaround is the same:\n```typ\n#let x = state(\"x\")\n#context {\n  x.update(1)\n\n  // bad: the context fails and the update isn't applied,\n  // leading to the context to continue failing\n  // assert.eq(x.get(), 1)\n\n  // good: only this context fails, so the update is applied\n  // on the next attempt, this succeeds\n  context assert.eq(x.get(), 1)\n}\n```\nYou can read more about this behavior here: https://forum.typst.app/t/is-an-assert-supposed-to-be-able-to-change-behavior-when-it-doesnt-fail/1433/2?u=sillyfreak and in the issue linked there.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 2,
      "reads": 31,
      "score": 41.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 8943,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-24T07:54:35.803Z",
      "updated_at": "2025-02-24T07:55:09.109Z",
      "cooked": "<p>I‚Äôm not sure the last example is really illustrating the retry issue: Isn‚Äôt it rather another case of freezing the wrong scope? If you do <code>#context{ x.update(1); x.get() }</code> the <code>get</code> call will use the state frozen before the update.</p>\n<p>Maybe this is a better example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context {\n  // This heading is never inserted because the context block fails\n  // due the assert\n  heading[A]\n  // Adding context in front of the assert fixes the error as then it's\n  // only this context that fails\n  assert(query(heading).len() &gt; 0)\n}\n</code></pre>",
      "raw": "I'm not sure the last example is really illustrating the retry issue: Isn't it rather another case of freezing the wrong scope? If you do `#context{ x.update(1); x.get() }` the `get` call will use the state frozen before the update.\n\nMaybe this is a better example:\n\n```typ\n#context {\n  // This heading is never inserted because the context block fails\n  // due the assert\n  heading[A]\n  // Adding context in front of the assert fixes the error as then it's\n  // only this context that fails\n  assert(query(heading).len() > 0)\n}\n```",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 54.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8944,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-24T07:57:26.669Z",
      "updated_at": "2025-02-24T07:57:26.669Z",
      "cooked": "<p>You‚Äôre right, I didn‚Äôt think about that when thinking up an example. Thanks for adding a better one!</p>",
      "raw": "You're right, I didn't think about that when thinking up an example. Thanks for adding a better one!",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:51:22.581437"
}
{
  "topic_metadata": {
    "id": 2929,
    "title": "How do I reset a counter if an element is in the next chapter?",
    "slug": "how-do-i-reset-a-counter-if-an-element-is-in-the-next-chapter",
    "posts_count": 3,
    "created_at": "2025-02-22T22:16:33.561Z",
    "last_posted_at": "2025-02-23T00:03:05.525Z",
    "views": 100,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 304
  },
  "posts": [
    {
      "id": 8897,
      "post_number": 1,
      "username": "engifar",
      "name": "",
      "created_at": "2025-02-22T22:16:33.716Z",
      "updated_at": "2025-02-22T22:16:33.716Z",
      "cooked": "<p>Hello, I am trying to write a custom box for theorems, definitions etc. with a custom counter. Each theorem should be labeled as chapter.subchapter.counter and if either the chapter or the subchapter have gone up, the counter should be reset to 0.<br>\nSo far I have come up with this code, which does not handle the reset after each (sub-)chapter break but instead counts up indefinitely.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let thmbox = (body, type: none, title: none) =&gt; [\n    // Counter\n    #let c_thm = counter(\"definition\")\n    #let c_herl = counter(\"herleitung\")\n    #let c_satz = counter(\"satz\")\n\n    // Get current position in document\n    #let chapter = {context counter(heading).get().at(0)}\n    #let subchapter = {context counter(heading).get().at(1)}\n\n    // Function that handles styling and counters of thmbox_title\n    #let set_thmbox_title = (supplement: none, counter_: none) =&gt; [\n        #counter_.step()\n        #strong[#supplement\n            #chapter.#subchapter.#context counter_.display()\n        ] (#title)\n    ]\n\n    #showybox(\n        title: {\n            if type == \"def\" { set_thmbox_title(supplement: \"Definition\", counter_: c_def) }\n            else if type == \"herl\" { set_thmbox_title(supplement: \"Herleitung\", counter_: c_herl) }\n            else if type == \"satz\" { set_thmbox_title(supplement: \"Satz\", counter_: c_satz) }\n            else [Nicht definiert]\n        },\n        frame: (\n            title-color: black.lighten(70%),\n            border-color: black.lighten(50%),\n            body-color: black.lighten(90%),\n            radius: 4pt,\n        ),\n        title-style: (\n            color: black,\n        ),\n        breakable: true,\n    )[#body]\n]\n</code></pre>\n<p>I tried to extend this as such, but the code doesn‚Äôt work:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">    #let set_thmbox_title = (supplement: none, counter_: none) =&gt; {\n        if chapter &gt; last_used_chapter {for c in counters {\n            c.update(0)\n        }}\n        else if subchapter &gt; last_used_subchapter {for c in counter {\n            c.update(0)\n        }}\n    }[\n        #counter_.step()\n        #strong[#supplement\n            #chapter.#subchapter.#context counter_.display()\n        ] (#title)\n    ]\n</code></pre>",
      "raw": "Hello, I am trying to write a custom box for theorems, definitions etc. with a custom counter. Each theorem should be labeled as chapter.subchapter.counter and if either the chapter or the subchapter have gone up, the counter should be reset to 0.\nSo far I have come up with this code, which does not handle the reset after each (sub-)chapter break but instead counts up indefinitely.\n\n```typ\n#let thmbox = (body, type: none, title: none) => [\n    // Counter\n    #let c_thm = counter(\"definition\")\n    #let c_herl = counter(\"herleitung\")\n    #let c_satz = counter(\"satz\")\n\n    // Get current position in document\n    #let chapter = {context counter(heading).get().at(0)}\n    #let subchapter = {context counter(heading).get().at(1)}\n\n    // Function that handles styling and counters of thmbox_title\n    #let set_thmbox_title = (supplement: none, counter_: none) => [\n        #counter_.step()\n        #strong[#supplement\n            #chapter.#subchapter.#context counter_.display()\n        ] (#title)\n    ]\n\n    #showybox(\n        title: {\n            if type == \"def\" { set_thmbox_title(supplement: \"Definition\", counter_: c_def) }\n            else if type == \"herl\" { set_thmbox_title(supplement: \"Herleitung\", counter_: c_herl) }\n            else if type == \"satz\" { set_thmbox_title(supplement: \"Satz\", counter_: c_satz) }\n            else [Nicht definiert]\n        },\n        frame: (\n            title-color: black.lighten(70%),\n            border-color: black.lighten(50%),\n            body-color: black.lighten(90%),\n            radius: 4pt,\n        ),\n        title-style: (\n            color: black,\n        ),\n        breakable: true,\n    )[#body]\n]\n```\n\nI tried to extend this as such, but the code doesn't work:\n```typ\n    #let set_thmbox_title = (supplement: none, counter_: none) => {\n        if chapter > last_used_chapter {for c in counters {\n            c.update(0)\n        }}\n        else if subchapter > last_used_subchapter {for c in counter {\n            c.update(0)\n        }}\n    }[\n        #counter_.step()\n        #strong[#supplement\n            #chapter.#subchapter.#context counter_.display()\n        ] (#title)\n    ]\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 414.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1229
    },
    {
      "id": 8898,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-22T22:49:41.816Z",
      "updated_at": "2025-02-22T22:52:36.079Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/engifar\">@engifar</a>, if I understood your requirements correctly, resetting your custom counters at each level 1 or 2 heading, with a show rule, should do what you want.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show heading.where(level: 1): it =&gt; {\n  counter(\"definition\").update(0)\n  counter(\"herleitung\").update(0)\n  counter(\"satz\").update(0)\n  it\n}\n#show heading.where(level: 2): it =&gt; {\n  ...\n}\n</code></pre>",
      "raw": "Hi @engifar, if I understood your requirements correctly, resetting your custom counters at each level 1 or 2 heading, with a show rule, should do what you want.\n```typst\n#show heading.where(level: 1): it => {\n  counter(\"definition\").update(0)\n  counter(\"herleitung\").update(0)\n  counter(\"satz\").update(0)\n  it\n}\n#show heading.where(level: 2): it => {\n  ...\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 23.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 8901,
      "post_number": 3,
      "username": "engifar",
      "name": "",
      "created_at": "2025-02-23T00:03:05.525Z",
      "updated_at": "2025-02-23T00:03:05.525Z",
      "cooked": "<p>Yes, that was it. Thank you very much :))</p>",
      "raw": "Yes, that was it. Thank you very much :))",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 13.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1229
    }
  ],
  "scraped_at": "2025-06-10T09:51:21.871843"
}
{
  "topic_metadata": {
    "id": 2930,
    "title": "Why can I not edit a map value assigned to another variable?",
    "slug": "why-can-i-not-edit-a-map-value-assigned-to-another-variable",
    "posts_count": 4,
    "created_at": "2025-02-22T23:15:05.579Z",
    "last_posted_at": "2025-02-23T09:33:44.511Z",
    "views": 41,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "LordBaryhobal",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 124
  },
  "posts": [
    {
      "id": 8899,
      "post_number": 1,
      "username": "TippingPoints",
      "name": "Climate Defiance",
      "created_at": "2025-02-22T23:15:05.851Z",
      "updated_at": "2025-03-03T15:40:36.611Z",
      "cooked": "<p>The following code modifies the array in a.</p>\n<pre><code class=\"lang-auto\">      let a = (\"fda\": (1,2,3))\n      a.at(\"fda\").push(4)\n</code></pre>\n<p>The following code does not, why?</p>\n<pre><code class=\"lang-auto\">      let a = (\"fda\": (1,2,3))\n      let b = a.at(\"fda\")\n      b.push(4)\n</code></pre>\n<p>V 0.13.0</p>",
      "raw": "The following code modifies the array in a.\n```\n      let a = (\"fda\": (1,2,3))\n      a.at(\"fda\").push(4)\n```\n\nThe following code does not, why?\n```\n      let a = (\"fda\": (1,2,3))\n      let b = a.at(\"fda\")\n      b.push(4)\n```\n\nV 0.13.0",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 24.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 499
    },
    {
      "id": 8902,
      "post_number": 2,
      "username": "LordBaryhobal",
      "name": "Baryhobal",
      "created_at": "2025-02-23T00:17:07.000Z",
      "updated_at": "2025-02-23T00:17:07.000Z",
      "cooked": "<p>When assigning to a variable, you will actually get a copy of the array (in reality, it‚Äôs a bit more complicated iirc but it doesn‚Äôt matter in practice)<br>\nIn the first case however, you directly access the value in the dictionary, thus modifying it</p>",
      "raw": "When assigning to a variable, you will actually get a copy of the array (in reality, it's a bit more complicated iirc but it doesn't matter in practice)\nIn the first case however, you directly access the value in the dictionary, thus modifying it",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 24.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 585
    },
    {
      "id": 8905,
      "post_number": 3,
      "username": "TippingPoints",
      "name": "Climate Defiance",
      "created_at": "2025-02-23T01:29:40.116Z",
      "updated_at": "2025-02-23T01:29:40.116Z",
      "cooked": "<p>can I avoid creating a copy when assigning to a variable?</p>",
      "raw": "can I avoid creating a copy when assigning to a variable?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 14.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 499
    },
    {
      "id": 8911,
      "post_number": 4,
      "username": "LordBaryhobal",
      "name": "Baryhobal",
      "created_at": "2025-02-23T09:33:44.511Z",
      "updated_at": "2025-02-23T09:33:44.511Z",
      "cooked": "<p>No you cannot (afaik), as that would probably break function purity, although I‚Äôm not sure that is the reason for this design choice</p>",
      "raw": "No you cannot (afaik), as that would probably break function purity, although I'm not sure that is the reason for this design choice",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 19.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 585
    }
  ],
  "scraped_at": "2025-06-10T09:51:21.139163"
}
{
  "topic_metadata": {
    "id": 2933,
    "title": "Why can I not loop over arguments in a function receiving multiple arguments?",
    "slug": "why-can-i-not-loop-over-arguments-in-a-function-receiving-multiple-arguments",
    "posts_count": 3,
    "created_at": "2025-02-23T03:04:36.898Z",
    "last_posted_at": "2025-02-23T10:12:40.739Z",
    "views": 197,
    "like_count": 4,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 131
  },
  "posts": [
    {
      "id": 8908,
      "post_number": 1,
      "username": "Amit_Singh",
      "name": "Amit Singh",
      "created_at": "2025-02-23T03:04:37.002Z",
      "updated_at": "2025-03-03T15:41:29.614Z",
      "cooked": "<p>Here is my function:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let add-numbers(...nums) = {\n  let sum = 0\n  let num-list = (nums) // Convert arguments to a list\n  for num in num-list {\n    if num.type() == \"int\" or num.type() == \"float\" {\n      sum = sum + num\n    }\n  }\n  sum\n}\n \n// Test the function  \n#add-numbers(1, 2, \"hello\", 3, 4, \"world\", 5) // Expected output: 15\n</code></pre>\n<p>Typst throws an error: <code>\"cannot loop over argument\"</code> at the <code>for num in num-list</code> line.</p>",
      "raw": "Here is my function:\n```typ\n#let add-numbers(...nums) = {\n  let sum = 0\n  let num-list = (nums) // Convert arguments to a list\n  for num in num-list {\n    if num.type() == \"int\" or num.type() == \"float\" {\n      sum = sum + num\n    }\n  }\n  sum\n}\n \n// Test the function  \n#add-numbers(1, 2, \"hello\", 3, 4, \"world\", 5) // Expected output: 15\n```\n\nTypst throws an error: `\"cannot loop over argument\"` at the `for num in num-list` line.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 882.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1230
    },
    {
      "id": 8910,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-02-23T09:21:32.964Z",
      "updated_at": "2025-02-23T09:21:32.964Z",
      "cooked": "<p>You need to use <code>nums.pos()</code> to turn the positional arguments into an array, see the <a href=\"https://typst.app/docs/reference/foundations/arguments/#definitions-pos\">docs</a> on the <code>arguments</code> type.</p>",
      "raw": "You need to use `nums.pos()` to turn the positional arguments into an array, see the [docs](https://typst.app/docs/reference/foundations/arguments/#definitions-pos) on the `arguments` type.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 66.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 8914,
      "post_number": 3,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2025-02-23T10:12:40.739Z",
      "updated_at": "2025-02-23T10:12:40.739Z",
      "cooked": "<p>Im addition to what <a class=\"mention\" href=\"/u/janekfleper\">@janekfleper</a> said, you should compare your types not with strings. That is deprecated and will be removed very soon (almost was removed already), use <code>type == float</code> directly instead.</p>",
      "raw": "Im addition to what @janekfleper said, you should compare your types not with strings. That is deprecated and will be removed very soon (almost was removed already), use `type == float` directly instead.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 32,
      "score": 41.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    }
  ],
  "scraped_at": "2025-06-10T09:51:20.428174"
}
{
  "topic_metadata": {
    "id": 2941,
    "title": "How can I create a specific heading styles for appendix in template?",
    "slug": "how-can-i-create-a-specific-heading-styles-for-appendix-in-template",
    "posts_count": 7,
    "created_at": "2025-02-23T16:42:26.898Z",
    "last_posted_at": "2025-02-24T08:46:05.354Z",
    "views": 253,
    "like_count": 0,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 647
  },
  "posts": [
    {
      "id": 8923,
      "post_number": 1,
      "username": "Antoine_CHUPIN",
      "name": "Antoine CHUPIN",
      "created_at": "2025-02-23T16:42:27.044Z",
      "updated_at": "2025-03-07T20:47:38.083Z",
      "cooked": "<p>Hello,</p>\n<p>I try to format my document as consistently as possible. So I use a template file defining most of my layout.<br>\nI would like to use on single template for the main file even if all functions are not used.<br>\nFor example I would like to create in my template an ‚Äúappendix‚Äù style used to style the appendix titles differently than the main titles if some appendix titles are used.</p>\n<p>i tried to create a specific styling in my template without success. The only thing I have been able to do is to create a different numbering using:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let appendix(body) = {\n  set heading(numbering: \"A.1 :\", supplement: [Annexe])\n  counter(heading).update(0)\n  body\n}\n\n #show: appendix\n</code></pre>\n<p>But directly in my main file whcih is not what I want to do.</p>\n<p>I also tried t do something like that in my template</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">// Appendix Pages\nlet appendix(title) = {\n  align(center)[    *#title*  ]\n  line(length: 100%, stroke: 1pt)\n  v(1em)\n} \n</code></pre>\n<p>With no success either.</p>\n<p>I refered to the doc but I guess I am misunderstooding something.</p>\n<p>Thanks</p>",
      "raw": "Hello,\n\nI try to format my document as consistently as possible. So I use a template file defining most of my layout.\nI would like to use on single template for the main file even if all functions are not used.\nFor example I would like to create in my template an \"appendix\" style used to style the appendix titles differently than the main titles if some appendix titles are used. \n\ni tried to create a specific styling in my template without success. The only thing I have been able to do is to create a different numbering using: \n\n```typ \n#let appendix(body) = {\n  set heading(numbering: \"A.1 :\", supplement: [Annexe])\n  counter(heading).update(0)\n  body\n}\n\n #show: appendix\n ```\n\nBut directly in my main file whcih is not what I want to do.\n\nI also tried t do something like that in my template \n\n```typc\n// Appendix Pages\nlet appendix(title) = {\n  align(center)[    *#title*  ]\n  line(length: 100%, stroke: 1pt)\n  v(1em)\n} \n```\n\nWith no success either. \n\nI refered to the doc but I guess I am misunderstooding something.\n\nThanks",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 1153.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1231
    },
    {
      "id": 8926,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-02-23T17:43:01.816Z",
      "updated_at": "2025-02-23T17:43:01.816Z",
      "cooked": "<p>You can use a show rule inside your appendix template to change the heading style. The code snippet below will center the heading title and add a line + the vertical space below the title.</p>\n<p>You can move the two functions to your template file, only the actual show rule to ‚Äúactivate‚Äù the appendix needs to be in your main file.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let appendix-heading(it) = {\n  set align(center)\n  it\n  line(length: 100%, stroke: 1pt)\n  v(1em)\n}\n\n#let appendix(body) = {\n  set heading(numbering: \"A.1 :\", supplement: [Annexe])\n  show heading: appendix-heading\n  counter(heading).update(0)\n  body\n}\n</code></pre>",
      "raw": "You can use a show rule inside your appendix template to change the heading style. The code snippet below will center the heading title and add a line + the vertical space below the title.\n\nYou can move the two functions to your template file, only the actual show rule to \"activate\" the appendix needs to be in your main file.\n\n```typ\n#let appendix-heading(it) = {\n  set align(center)\n  it\n  line(length: 100%, stroke: 1pt)\n  v(1em)\n}\n\n#let appendix(body) = {\n  set heading(numbering: \"A.1 :\", supplement: [Annexe])\n  show heading: appendix-heading\n  counter(heading).update(0)\n  body\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 32.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 8932,
      "post_number": 3,
      "username": "Antoine_CHUPIN",
      "name": "Antoine CHUPIN",
      "created_at": "2025-02-23T20:47:41.123Z",
      "updated_at": "2025-03-07T20:49:01.142Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"janekfleper\" data-post=\"2\" data-topic=\"2941\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/j/8F38B1/48.png\" class=\"avatar\"> janekfleper:</div>\n<blockquote>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let appendix-heading(it) = {\n  set align(center)\n  it\n  line(length: 100%, stroke: 1pt)\n  v(1em)\n}\n</code></pre>\n</blockquote>\n</aside>\n<p>Thanks for your answer : I tried to add in my template.py</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">\n// Appendix Pages\nlet appendix-heading(it) = {\n  set align(center)\n  it\n  line(length: 100%, stroke: 1pt)\n  v(1em)\n}\n\n</code></pre>\n<p>And in my main report file :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">\n#show appendix-heading(\"test-appendix\")\n\n</code></pre>\n<p>But I have an error ‚Äúexpected column‚Äù just after the show</p>\n<p>When I type <span class=\"hashtag-raw\">#show</span> eit suggests √©ppendix-heading\" so I guess the template file is parsed corrctly but my calls must be wrong</p>",
      "raw": "[quote=\"janekfleper, post:2, topic:2941\"]\n```typ\n#let appendix-heading(it) = {\n  set align(center)\n  it\n  line(length: 100%, stroke: 1pt)\n  v(1em)\n}\n```\n[/quote]\n\nThanks for your answer : I tried to add in my template.py\n\n```typ\n\n// Appendix Pages\nlet appendix-heading(it) = {\n  set align(center)\n  it\n  line(length: 100%, stroke: 1pt)\n  v(1em)\n}\n\n```\n\n\nAnd in my main report file :\n\n```typ\n\n#show appendix-heading(\"test-appendix\")\n\n```\n\nBut I have an error \"expected column\" just after the show\n\nWhen I type #show eit suggests √©ppendix-heading\" so I guess the template file is parsed corrctly but my calls must be wrong",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 33,
      "score": 31.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1231
    },
    {
      "id": 8933,
      "post_number": 4,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-02-23T21:10:14.995Z",
      "updated_at": "2025-02-23T21:10:14.995Z",
      "cooked": "<p>The function <code>appendix-heading()</code> is the custom function to put inside your show rule for headings. You are not supposed to pass a string to the function to create a new heading. Just create your heading with the regular Typst syntax and the compiler will apply the show rule for you.</p>\n<p>Instead of</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show appendix-heading(\"test-appendix\")\n</code></pre>\n<p>try to write</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading: appendix-heading\n= Test appendix\n</code></pre>\n<p>and the show rule will be applied to the heading <code>\"Test appendix\"</code>.</p>",
      "raw": "The function `appendix-heading()` is the custom function to put inside your show rule for headings. You are not supposed to pass a string to the function to create a new heading. Just create your heading with the regular Typst syntax and the compiler will apply the show rule for you.\n\nInstead of\n\n```typ\n#show appendix-heading(\"test-appendix\")\n```\n\ntry to write\n\n```typ\n#show heading: appendix-heading\n= Test appendix\n```\n\nand the show rule will be applied to the heading `\"Test appendix\"`.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 26.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 8934,
      "post_number": 5,
      "username": "Antoine_CHUPIN",
      "name": "Antoine CHUPIN",
      "created_at": "2025-02-23T21:46:50.031Z",
      "updated_at": "2025-02-23T21:46:50.031Z",
      "cooked": "<p>Thanks this syntax works if the <span class=\"hashtag-raw\">#let</span> function and the <span class=\"hashtag-raw\">#show</span> are in the same document.</p>\n<p>If I keep the <span class=\"hashtag-raw\">#let</span> in my template<br>\nAnd put only the <span class=\"hashtag-raw\">#show</span> in the main document I have an error :</p>\n<p>error: unknown variable: appendix-heading</p>",
      "raw": "Thanks this syntax works if the #let function and the #show are in the same document.\n\nIf I keep the #let in my template\nAnd put only the #show in the main document I have an error :\n\nerror: unknown variable: appendix-heading",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 65.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1231
    },
    {
      "id": 8935,
      "post_number": 6,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-02-23T22:31:28.854Z",
      "updated_at": "2025-02-23T22:31:28.854Z",
      "cooked": "<p>That sounds like you are just not importing the function <code>appendix-heading()</code> from your <code>template.typ</code> file?</p>\n<p>I created a minimal working example <a href=\"https://typst.app/project/rrwKqfWQ4vTsFOM1VsGBXh\">here</a>. The file <code>template.typ</code> also has the <code>appendix()</code> function. You can use that in place of the lines 13 to 15 in <code>main.typ</code> after importing it from <code>template.typ</code>. In that case you do not need to import <code>appendix-heading()</code> anymore since this is already ‚Äúincluded‚Äù in the function <code>appendix()</code>.</p>",
      "raw": "That sounds like you are just not importing the function `appendix-heading()` from your `template.typ` file?\n\nI created a minimal working example [here](https://typst.app/project/rrwKqfWQ4vTsFOM1VsGBXh). The file `template.typ` also has the `appendix()` function. You can use that in place of the lines 13 to 15 in `main.typ` after importing it from `template.typ`. In that case you do not need to import `appendix-heading()` anymore since this is already \"included\" in the function `appendix()`.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 69.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 8950,
      "post_number": 7,
      "username": "Antoine_CHUPIN",
      "name": "Antoine CHUPIN",
      "created_at": "2025-02-24T08:46:05.354Z",
      "updated_at": "2025-03-07T20:49:58.036Z",
      "cooked": "<p>Thanks, It works great.</p>\n<p>I was inserting your template functions inside my project function.<br>\nSo without the # before the let.</p>\n<p>It did not work that way, if I put it outsie the project with the # it worked.</p>\n<p>I guess there is still something not clear to me as I do not understand how the function</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let appendix(body) = {\n</code></pre>\n<p>Is imported. I still do some more tests but you cleraly helped to solve the issue.</p>",
      "raw": "Thanks, It works great.\n\nI was inserting your template functions inside my project function.\nSo without the # before the let.\n\nIt did not work that way, if I put it outsie the project with the # it worked.\n\nI guess there is still something not clear to me as I do not understand how the function\n\n```typ\n#let appendix(body) = {\n````\nIs imported. I still do some more tests but you cleraly helped to solve the issue.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1231
    }
  ],
  "scraped_at": "2025-06-10T09:51:19.719233"
}
{
  "topic_metadata": {
    "id": 2942,
    "title": "How to style all outlines that are not the table of contents?",
    "slug": "how-to-style-all-outlines-that-are-not-the-table-of-contents",
    "posts_count": 2,
    "created_at": "2025-02-23T16:48:16.320Z",
    "last_posted_at": "2025-02-23T18:05:04.199Z",
    "views": 92,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "outline"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 192
  },
  "posts": [
    {
      "id": 8924,
      "post_number": 1,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-23T16:48:16.485Z",
      "updated_at": "2025-02-23T16:48:16.485Z",
      "cooked": "<p>I want to add a colon to the entries of all outlines that are not the table of contents in my document (index of figures, index of tables, index of algorithms‚Ä¶). Is there a solution that does not involve exhaustively iterating on all these types of outlines like what follows?</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show outline.where(target: figure.where(supplement: [Figure])).or(\n  outline.where(target: figure.where(supplement: [Table]))).or(\n  outline.where(target: figure.where(supplement: [Algorithm]))\n  // and so on...\n): out =&gt; {\n  show outline.entry: ent =&gt; ent.indented(\n    [#ent.prefix():], ent.inner()\n  )\n  out\n}\n</code></pre>",
      "raw": "I want to add a colon to the entries of all outlines that are not the table of contents in my document (index of figures, index of tables, index of algorithms...). Is there a solution that does not involve exhaustively iterating on all these types of outlines like what follows?\n\n```typst\n#show outline.where(target: figure.where(supplement: [Figure])).or(\n  outline.where(target: figure.where(supplement: [Table]))).or(\n  outline.where(target: figure.where(supplement: [Algorithm]))\n  // and so on...\n): out => {\n  show outline.entry: ent => ent.indented(\n    [#ent.prefix():], ent.inner()\n  )\n  out\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 310.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8928,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-02-23T18:05:04.199Z",
      "updated_at": "2025-02-23T18:05:04.199Z",
      "cooked": "<p>You can set up a conditional show rule for the outline entries to add the colon depending on the outline target. This allows you to just exclude the outline entries of headings.</p>\n<p>On another note, your show rule for the outline entry with a colon was missing the link to the element, see the <a href=\"https://typst.app/docs/reference/model/outline/#building-an-entry\">docs</a> on ‚ÄúBuilding an entry‚Äù.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let colon-entry(it) = {\n  link(\n    it.element.location(),\n    it.indented([#it.prefix():], it.inner())\n  )\n}\n\n#show outline: out =&gt; {\n  show outline.entry: it =&gt; if out.target == selector(heading) { it } else { colon-entry(it) }\n  out \n}\n</code></pre>",
      "raw": "You can set up a conditional show rule for the outline entries to add the colon depending on the outline target. This allows you to just exclude the outline entries of headings.\n\nOn another note, your show rule for the outline entry with a colon was missing the link to the element, see the [docs](https://typst.app/docs/reference/model/outline/#building-an-entry) on \"Building an entry\".\n\n```typ\n#let colon-entry(it) = {\n  link(\n    it.element.location(),\n    it.indented([#it.prefix():], it.inner())\n  )\n}\n\n#show outline: out => {\n  show outline.entry: it => if out.target == selector(heading) { it } else { colon-entry(it) }\n  out \n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 29.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    }
  ],
  "scraped_at": "2025-06-10T09:51:18.999696"
}
{
  "topic_metadata": {
    "id": 2945,
    "title": "How to fix counter display and locate functions in Typst v0.13?",
    "slug": "how-to-fix-counter-display-and-locate-functions-in-typst-v0-13",
    "posts_count": 3,
    "created_at": "2025-02-23T19:16:41.485Z",
    "last_posted_at": "2025-02-24T18:51:30.840Z",
    "views": 95,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 281
  },
  "posts": [
    {
      "id": 8930,
      "post_number": 1,
      "username": "JESUS",
      "name": "Jes√∫s Manuel",
      "created_at": "2025-02-23T19:16:41.621Z",
      "updated_at": "2025-03-03T15:39:40.640Z",
      "cooked": "<p>Hello everyone,</p>\n<p>I‚Äôm encountering some issues with my code after updating to Typst version 0.13. Previously, everything worked fine, although about a month ago I started receiving a warning related to the <code>ap.display(\"a)\")</code> and <code>loc</code> function. Now, in v0.13, that part of the code doesn‚Äôt work at all.</p>\n<p>Here is a part of the entire code</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let c = counter(\"exercise\")\n\n#let ap = counter(\"section\")\n\n#let tag-filter = state(\"tag-filter\", _tag =&gt; true)\n\n\n#let exercise(\n  tag: none,\n  body,\n) = locate(loc =&gt; {\n  if not tag-filter.at(loc)(tag) {\n    return\n  }\n  c.step()\n  block(width: 100%, below: 1.6em,\n    box(width: 12.6pt,\n      c.display(\"1.\"))+body\n  )\n})\n\n\n#let secq(\n  scoring: 1,\n  tdah: false,\n  body,\n) = {\n  block(width: 100%,\n    if scoring == 1 {\n      ap.step()\n      box(width: 100%,inset: (left:16pt), ap.display(\"a)\")+[ (#scoring punto) ]+body)\n    } else {\n      ap.step()\n      box(width: 100%,inset: (left:16pt), ap.display(\"a)\")+[ (#scoring puntos) ]+body)\n    }\n  )\n  if tdah {v(15pt)}\n}\n\n</code></pre>\n<p>Could someone clarify what changes have been made regarding <code>ap.display</code> and the behavior of the <code>loc</code> function in the latest version? I‚Äôm looking for guidance on how to properly update my code.</p>\n<p>Thank you for your help!</p>",
      "raw": "Hello everyone,\n\nI'm encountering some issues with my code after updating to Typst version 0.13. Previously, everything worked fine, although about a month ago I started receiving a warning related to the `ap.display(\"a)\")` and `loc` function. Now, in v0.13, that part of the code doesn't work at all.\n\nHere is a part of the entire code\n\n```typst\n#let c = counter(\"exercise\")\n\n#let ap = counter(\"section\")\n\n#let tag-filter = state(\"tag-filter\", _tag => true)\n\n\n#let exercise(\n  tag: none,\n  body,\n) = locate(loc => {\n  if not tag-filter.at(loc)(tag) {\n    return\n  }\n  c.step()\n  block(width: 100%, below: 1.6em,\n    box(width: 12.6pt,\n      c.display(\"1.\"))+body\n  )\n})\n\n\n#let secq(\n  scoring: 1,\n  tdah: false,\n  body,\n) = {\n  block(width: 100%,\n    if scoring == 1 {\n      ap.step()\n      box(width: 100%,inset: (left:16pt), ap.display(\"a)\")+[ (#scoring punto) ]+body)\n    } else {\n      ap.step()\n      box(width: 100%,inset: (left:16pt), ap.display(\"a)\")+[ (#scoring puntos) ]+body)\n    }\n  )\n  if tdah {v(15pt)}\n}\n\n```\n\nCould someone clarify what changes have been made regarding `ap.display` and the behavior of the `loc` function in the latest version? I'm looking for guidance on how to properly update my code.\n\nThank you for your help!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 204.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 176
    },
    {
      "id": 8931,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-23T20:11:42.091Z",
      "updated_at": "2025-02-23T20:11:42.091Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> wrote a very detailed answer about <code>locate</code>: <a href=\"https://forum.typst.app/t/how-to-use-context-instead-of-a-callback-function-in-locate-function-calls/965/2\" class=\"inline-onebox\">How to use context instead of a callback function in locate function calls? - #2 by quachpas</a></p>\n<p><code>.display(...)</code> is <a href=\"https://typst.app/docs/reference/context/\">contextual</a> and needs to be called with the <code>context</code> keyword: <code>context ap.display(\"a)\")</code></p>",
      "raw": "@quachpas wrote a very detailed answer about `locate`: https://forum.typst.app/t/how-to-use-context-instead-of-a-callback-function-in-locate-function-calls/965/2?u=flokl \n\n`.display(...)` is [contextual](https://typst.app/docs/reference/context/) and needs to be called with the `context` keyword: `context ap.display(\"a)\")`",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 21,
      "score": 54.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9013,
      "post_number": 3,
      "username": "JESUS",
      "name": "Jes√∫s Manuel",
      "created_at": "2025-02-24T18:51:30.840Z",
      "updated_at": "2025-02-24T18:51:30.840Z",
      "cooked": "<p>Thank you so much for your help! The example in the thread was exactly what I needed to understand the changes and update my code accordingly. I really appreciate your clear explanation and support.</p>",
      "raw": "Thank you so much for your help! The example in the thread was exactly what I needed to understand the changes and update my code accordingly. I really appreciate your clear explanation and support.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 13,
      "score": 2.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 176
    }
  ],
  "scraped_at": "2025-06-10T09:51:18.289374"
}
{
  "topic_metadata": {
    "id": 2951,
    "title": "How to put the header below the top margin?",
    "slug": "how-to-put-the-header-below-the-top-margin",
    "posts_count": 7,
    "created_at": "2025-02-24T08:15:11.885Z",
    "last_posted_at": "2025-02-24T11:27:10.493Z",
    "views": 142,
    "like_count": 0,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "sijo",
    "tags": [
      "header-footer"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 621
  },
  "posts": [
    {
      "id": 8946,
      "post_number": 1,
      "username": "ThisIs_Me",
      "name": "ThisIs Me",
      "created_at": "2025-02-24T08:15:12.048Z",
      "updated_at": "2025-02-24T09:21:18.847Z",
      "cooked": "<p>Hi,<br>\nI made a document with 1 cm margin. I want the header to be inside the 1cm margins.<br>\nBut the header is automaticaly put outside the 1cm margin except if I use header-ascent: 0px. But in this case header is displaying on the main text.</p>\n<p>Here is a minimal (not) workinge example :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\n  margin: 1cm,\n  header-ascent: 0cm,\n  header:[my header]\n)\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n</code></pre>\n<p>If you remover header-ascent, you will see that header is displayed outside 1cm margin.</p>\n<p>How can I solve my problem ?</p>\n<p>Thanks</p>",
      "raw": "Hi,\nI made a document with 1 cm margin. I want the header to be inside the 1cm margins.\nBut the header is automaticaly put outside the 1cm margin except if I use header-ascent: 0px. But in this case header is displaying on the main text.\n\nHere is a minimal (not) workinge example :\n\n\n```typ\n#set page(\n  margin: 1cm,\n  header-ascent: 0cm,\n  header:[my header]\n)\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n```\n\nIf you remover header-ascent, you will see that header is displayed outside 1cm margin.\n\nHow can I solve my problem ?\n\nThanks",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 569.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1237
    },
    {
      "id": 8948,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-24T08:29:58.224Z",
      "updated_at": "2025-02-24T08:29:58.224Z",
      "cooked": "<p>Hi, welcome to the Typst forum!</p>\n<p>Could you put a screenshot of the result you‚Äôre trying to achieve? I don‚Äôt really understand what you‚Äôre asking since for me, ‚Äúinside the margin‚Äù means inside the 1cm space reserved for the margin. And in your example, in both cases (with or without <code>header-ascent: 0cm</code>) the header is always inside the margin‚Ä¶</p>",
      "raw": "Hi, welcome to the Typst forum!\n\nCould you put a screenshot of the result you're trying to achieve? I don't really understand what you're asking since for me, \"inside the margin\" means inside the 1cm space reserved for the margin. And in your example, in both cases (with or without `header-ascent: 0cm`) the header is always inside the margin...",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 3.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8949,
      "post_number": 3,
      "username": "ThisIs_Me",
      "name": "ThisIs Me",
      "created_at": "2025-02-24T08:38:52.037Z",
      "updated_at": "2025-02-24T08:38:52.037Z",
      "cooked": "<p>Sorry, I realise I misspoke.<br>\nWhen I said within the margin, I meant within the page (without going beyond the margins).<br>\nHere‚Äôs an image with what I‚Äôd like (what I do on LO Writer). The print margins are defined (at 1cm) and all the content: page or header does not exceed the margins.<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/0/0ca06956a4244a94d9b884f633ce119a431821e5.png\" data-download-href=\"https://forum.typst.app/uploads/default/0ca06956a4244a94d9b884f633ce119a431821e5\" title=\"a\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/0/0ca06956a4244a94d9b884f633ce119a431821e5_2_353x500.png\" alt=\"a\" data-base62-sha1=\"1NHpoHGiauTIxVbTfOWm2B43afj\" width=\"353\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/0/0ca06956a4244a94d9b884f633ce119a431821e5_2_353x500.png, https://forum.typst.app/uploads/default/optimized/2X/0/0ca06956a4244a94d9b884f633ce119a431821e5_2_529x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/0/0ca06956a4244a94d9b884f633ce119a431821e5_2_706x1000.png 2x\" data-dominant-color=\"FDFDFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">a</span><span class=\"informations\">1659√ó2346 49.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Sorry, I realise I misspoke.\nWhen I said within the margin, I meant within the page (without going beyond the margins).\nHere's an image with what I'd like (what I do on LO Writer). The print margins are defined (at 1cm) and all the content: page or header does not exceed the margins.\n![a|353x500](upload://1NHpoHGiauTIxVbTfOWm2B43afj.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1237
    },
    {
      "id": 8954,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-24T09:12:05.729Z",
      "updated_at": "2025-02-24T09:21:54.736Z",
      "cooked": "<p>Ah I see. And I suppose you want this header repeated automatically on every page?</p>\n<p>Then you could put your document body in a grid, and use a grid header (by default, if the grid takes more than one page the grid header is repeated on every page):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(margin: 1cm, paper: \"a6\", numbering: \"1\")\n#let header = rect(width: 100%)[My Header]\n#show: doc =&gt; grid(\n  grid.header(header),\n  doc\n)\n#lorem(200)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/8/8b4246d7b550667150560dbd636e7587b9f57bc1.png\" data-download-href=\"https://forum.typst.app/uploads/default/8b4246d7b550667150560dbd636e7587b9f57bc1\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/8/8b4246d7b550667150560dbd636e7587b9f57bc1_2_345x242.png\" alt=\"image\" data-base62-sha1=\"jRWmFtHqvk8DHu3qtCP95N773MZ\" width=\"345\" height=\"242\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/8/8b4246d7b550667150560dbd636e7587b9f57bc1_2_345x242.png, https://forum.typst.app/uploads/default/optimized/2X/8/8b4246d7b550667150560dbd636e7587b9f57bc1_2_517x363.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/8/8b4246d7b550667150560dbd636e7587b9f57bc1_2_690x484.png 2x\" data-dominant-color=\"F2F2F2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1050√ó738 148 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>But it‚Äôs not a general solution: there are things you cannot put in a grid (e.g. page breaks or page settings) so this would not work will all documents.</p>\n<p>Maybe best is to measure the header, and adapt the top margin to make sure you have the desired space above the header:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let margin = 1cm\n#let header = rect(height: 1.5em, width: 100%)[My Header]\n#set page(margin: margin, header: header, paper: \"a6\", numbering: \"1\")\n\n#show: doc =&gt; context {\n  let h-height = measure(header).height\n  set page(margin: (top: margin + h-height), header-ascent: 0pt)\n  doc\n}\n\n#lorem(200)\n</code></pre>\n<p>(I adapted a bit your question title, feel free to change it again if you find a better one.)</p>",
      "raw": "Ah I see. And I suppose you want this header repeated automatically on every page?\n\nThen you could put your document body in a grid, and use a grid header (by default, if the grid takes more than one page the grid header is repeated on every page):\n\n```typ\n#set page(margin: 1cm, paper: \"a6\", numbering: \"1\")\n#let header = rect(width: 100%)[My Header]\n#show: doc => grid(\n  grid.header(header),\n  doc\n)\n#lorem(200)\n```\n\n![image|690x484, 50%](upload://jRWmFtHqvk8DHu3qtCP95N773MZ.png)\n\nBut it's not a general solution: there are things you cannot put in a grid (e.g. page breaks or page settings) so this would not work will all documents.\n\nMaybe best is to measure the header, and adapt the top margin to make sure you have the desired space above the header:\n\n```typ\n#let margin = 1cm\n#let header = rect(height: 1.5em, width: 100%)[My Header]\n#set page(margin: margin, header: header, paper: \"a6\", numbering: \"1\")\n\n#show: doc => context {\n  let h-height = measure(header).height\n  set page(margin: (top: margin + h-height), header-ascent: 0pt)\n  doc\n}\n\n#lorem(200)\n```\n\n(I adapted a bit your question title, feel free to change it again if you find a better one.)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 58.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8956,
      "post_number": 5,
      "username": "ThisIs_Me",
      "name": "ThisIs Me",
      "created_at": "2025-02-24T09:59:46.422Z",
      "updated_at": "2025-02-24T09:59:46.422Z",
      "cooked": "<p>Thank you for such a detailed answer.<br>\nI thought there was a simpler solution.<br>\nThe default behaviour of Typst seems to me to be problematic when the height of the header is greater than the height of the top margin. But there must be subtleties that I don‚Äôt understand.<br>\nIn any case, as my header is always the same height, I‚Äôm going to manually increase the top margin by the height of my header.<br>\nThanks,</p>",
      "raw": "Thank you for such a detailed answer.\nI thought there was a simpler solution.\nThe default behaviour of Typst seems to me to be problematic when the height of the header is greater than the height of the top margin. But there must be subtleties that I don't understand.\nIn any case, as my header is always the same height, I'm going to manually increase the top margin by the height of my header.\nThanks,",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 13.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1237
    },
    {
      "id": 8958,
      "post_number": 6,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-24T10:10:23.774Z",
      "updated_at": "2025-02-24T10:10:23.774Z",
      "cooked": "<blockquote>\n<p>The default behaviour of Typst seems to me to be problematic when the height of the header is greater than the height of the top margin.</p>\n</blockquote>\n<p>I think in this case we would just increase the size of the top margin. I‚Äôm not a typography expert but from what I know the header is supposed to be in the margin.</p>",
      "raw": "> The default behaviour of Typst seems to me to be problematic when the height of the header is greater than the height of the top margin. \n\nI think in this case we would just increase the size of the top margin. I'm not a typography expert but from what I know the header is supposed to be in the margin.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 8.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8962,
      "post_number": 7,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-24T11:27:10.493Z",
      "updated_at": "2025-02-24T11:27:10.493Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"ThisIs_Me\" data-post=\"5\" data-topic=\"2951\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/t/2C001E/48.png\" class=\"avatar\"> ThisIs_Me:</div>\n<blockquote>\n<p>I thought there was a simpler solution.</p>\n</blockquote>\n</aside>\n<p>I just realized my solution might be needlessly complicated. If you know the size of the header, it‚Äôs much simpler:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\n  margin: (top: 3cm, rest: 1cm),\n  header: rect(height: 2cm, width: 100%)[My Header],\n  header-ascent: 0pt,\n)\n\n#lorem(200)\n</code></pre>",
      "raw": "[quote=\"ThisIs_Me, post:5, topic:2951\"]\nI thought there was a simpler solution.\n[/quote]\n\nI just realized my solution might be needlessly complicated. If you know the size of the header, it's much simpler:\n\n```typ\n#set page(\n  margin: (top: 3cm, rest: 1cm),\n  header: rect(height: 2cm, width: 100%)[My Header],\n  header-ascent: 0pt,\n)\n\n#lorem(200)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 16,
      "score": 8.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:51:17.568580"
}
{
  "topic_metadata": {
    "id": 2954,
    "title": "What exactly are the colors of the default color scheme for syntax highlighting?",
    "slug": "what-exactly-are-the-colors-of-the-default-color-scheme-for-syntax-highlighting",
    "posts_count": 6,
    "created_at": "2025-02-24T11:54:18.891Z",
    "last_posted_at": "2025-03-09T13:56:13.200Z",
    "views": 160,
    "like_count": 4,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "matj1",
    "tags": [],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 448
  },
  "posts": [
    {
      "id": 8964,
      "post_number": 1,
      "username": "matj1",
      "name": "",
      "created_at": "2025-02-24T11:54:19.019Z",
      "updated_at": "2025-02-24T11:54:19.019Z",
      "cooked": "<p>I use syntax highlighting for Rust in raw blocks. I would like to use the colors of the highlighting elsewhere, like in math pseudocode or refering to a specific point in the code. I use the default color scheme. Where can I find the exact colors of the color scheme?</p>\n<h2><a name=\"p-8964-example-1\" class=\"anchor\" href=\"#p-8964-example-1\"></a>Example</h2>\n<p>I would like to replicate syntax highlighting in math notation. The function call of <code>sqrt</code> is supposed to have the same color as the blue text in the code, and specifying just ‚Äúblue‚Äù as the color of the operator results in a slightly different color, which is undesirable.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">```rust\nfn sqrt(val: f32) -&gt; f32 {\n    val.sqrt() }\n```\n\nComputing the magnitude of the vector $v$ which is $[2, 3, 6]$:\n$\n  op(#{set text(color.blue); `sqrt`})(sum_(x in v) x^2) = 7\n$\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/c/c2b06272e96da64f448d8511f469ba5ccfffded9.png\" data-download-href=\"https://forum.typst.app/uploads/default/c2b06272e96da64f448d8511f469ba5ccfffded9\" title=\"rendering of the code above\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/c/c2b06272e96da64f448d8511f469ba5ccfffded9_2_662x500.png\" alt=\"rendering of the code above\" data-base62-sha1=\"rMiwWV17ozZFK63vuJHBJHJ2Ws9\" width=\"662\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/c/c2b06272e96da64f448d8511f469ba5ccfffded9_2_662x500.png, https://forum.typst.app/uploads/default/original/2X/c/c2b06272e96da64f448d8511f469ba5ccfffded9.png 1.5x, https://forum.typst.app/uploads/default/original/2X/c/c2b06272e96da64f448d8511f469ba5ccfffded9.png 2x\" data-dominant-color=\"F5F4F5\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">rendering of the code above</span><span class=\"informations\">692√ó522 86.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "I use syntax highlighting for Rust in raw blocks. I would like to use the colors of the highlighting elsewhere, like in math pseudocode or refering to a specific point in the code. I use the default color scheme. Where can I find the exact colors of the color scheme?\n\n## Example\n\nI would like to replicate syntax highlighting in math notation. The function call of `sqrt` is supposed to have the same color as the blue text in the code, and specifying just ‚Äúblue‚Äù as the color of the operator results in a slightly different color, which is undesirable.\n\n````typst\n```rust\nfn sqrt(val: f32) -> f32 {\n    val.sqrt() }\n```\n\nComputing the magnitude of the vector $v$ which is $[2, 3, 6]$:\n$\n  op(#{set text(color.blue); `sqrt`})(sum_(x in v) x^2) = 7\n$\n````\n\n![rendering of the code above|662x500](upload://rMiwWV17ozZFK63vuJHBJHJ2Ws9.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 431.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 524
    },
    {
      "id": 8966,
      "post_number": 2,
      "username": "Electron_Wizard",
      "name": "Electron Wizard",
      "created_at": "2025-02-24T12:26:48.923Z",
      "updated_at": "2025-02-24T12:26:48.923Z",
      "cooked": "<p>The simplest and most unflexible way is to color-pick the raw block (from a screenshot) and then replace <code>color.blue</code> with <code>rgb(\"#XXXXXX\")</code> or create a variable with the color assigned.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let blueish = rgb(\"#4C6AC6\")\n\n```rust\nfn sqrt(val: f32) -&gt; f32 {\n    val.sqrt() }\n```\n\nComputing the magnitude of the vector $v$ which is $[2, 3, 6]$:\n$\n  op(#{set text(blueish); `sqrt`})(sum_(x in v) x^2) = 7\n$\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/d/dca5aae45ee4eb4decf136fd62502378f8e462ef.png\" data-download-href=\"https://forum.typst.app/uploads/default/dca5aae45ee4eb4decf136fd62502378f8e462ef\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/d/dca5aae45ee4eb4decf136fd62502378f8e462ef_2_690x224.png\" alt=\"image\" data-base62-sha1=\"vtVZ2JmHUh0C6pmrsgM6jpl6UhN\" width=\"690\" height=\"224\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/d/dca5aae45ee4eb4decf136fd62502378f8e462ef_2_690x224.png, https://forum.typst.app/uploads/default/original/2X/d/dca5aae45ee4eb4decf136fd62502378f8e462ef.png 1.5x, https://forum.typst.app/uploads/default/original/2X/d/dca5aae45ee4eb4decf136fd62502378f8e462ef.png 2x\" data-dominant-color=\"F7F7F7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1010√ó328 31.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>The issue with this solution is the lack of automatic updating when the raw block theme is changed. If you work with variables, this will make it easier, but might still require too much effort.</p>\n<p>I think, this is definitely not <strong>THE</strong> solution‚Ä¶</p>",
      "raw": "The simplest and most unflexible way is to color-pick the raw block (from a screenshot) and then replace `color.blue` with `rgb(\"#XXXXXX\")` or create a variable with the color assigned.\n\n````typst\n#let blueish = rgb(\"#4C6AC6\")\n\n```rust\nfn sqrt(val: f32) -> f32 {\n    val.sqrt() }\n```\n\nComputing the magnitude of the vector $v$ which is $[2, 3, 6]$:\n$\n  op(#{set text(blueish); `sqrt`})(sum_(x in v) x^2) = 7\n$\n```` \n\n![image|690x224](upload://vtVZ2JmHUh0C6pmrsgM6jpl6UhN.png)\n\n\nThe issue with this solution is the lack of automatic updating when the raw block theme is changed. If you work with variables, this will make it easier, but might still require too much effort. \n\nI think, this is definitely not **THE** solution...",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 6.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 997
    },
    {
      "id": 8967,
      "post_number": 3,
      "username": "matj1",
      "name": "",
      "created_at": "2025-02-24T12:35:13.810Z",
      "updated_at": "2025-02-24T12:35:13.810Z",
      "cooked": "<p>Thanks. That is a solution, and I imagined something like that, but I expected that someone would point me to a place in the source code where the color scheme is defined. Your solution would be probably indistinguishable, but having the same definitions would be better if the colors are not defined as RGB.</p>",
      "raw": "Thanks. That is a solution, and I imagined something like that, but I expected that someone would point me to a place in the source code where the color scheme is defined. Your solution would be probably indistinguishable, but having the same definitions would be better if the colors are not defined as RGB.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 6.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 524
    },
    {
      "id": 8969,
      "post_number": 4,
      "username": "matj1",
      "name": "",
      "created_at": "2025-02-24T12:45:24.365Z",
      "updated_at": "2025-02-24T12:45:24.365Z",
      "cooked": "<p>According to my discussion on Discord, the color scheme definition is here:</p><aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/typst/typst/blob/ebe25432641a729780578a2440eaf9fb07c80e38/crates/typst-library/src/text/raw.rs#L880\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/blob/ebe25432641a729780578a2440eaf9fb07c80e38/crates/typst-library/src/text/raw.rs#L880\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/typst/typst/blob/ebe25432641a729780578a2440eaf9fb07c80e38/crates/typst-library/src/text/raw.rs#L880\" target=\"_blank\" rel=\"noopener nofollow ugc\">typst/typst/blob/ebe25432641a729780578a2440eaf9fb07c80e38/crates/typst-library/src/text/raw.rs#L880</a></h4>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-rs\">\n      <ol class=\"start lines\" start=\"870\" style=\"counter-reset: li-counter 869 ;\">\n          <li>}</li>\n          <li></li>\n          <li>/// The syntect syntax definitions.</li>\n          <li>///</li>\n          <li>/// Syntax set is generated from the syntaxes from the `bat` project</li>\n          <li>/// &lt;https://github.com/sharkdp/bat/tree/master/assets/syntaxes&gt;</li>\n          <li>pub static RAW_SYNTAXES: LazyLock&lt;syntect::parsing::SyntaxSet&gt; =</li>\n          <li>    LazyLock::new(two_face::syntax::extra_no_newlines);</li>\n          <li></li>\n          <li>/// The default theme used for syntax highlighting.</li>\n          <li class=\"selected\">pub static RAW_THEME: LazyLock&lt;synt::Theme&gt; = LazyLock::new(|| synt::Theme {</li>\n          <li>    name: Some(\"Typst Light\".into()),</li>\n          <li>    author: Some(\"The Typst Project Developers\".into()),</li>\n          <li>    settings: synt::ThemeSettings::default(),</li>\n          <li>    scopes: vec![</li>\n          <li>        item(\"comment\", Some(\"#8a8a8a\"), None),</li>\n          <li>        item(\"constant.character.escape\", Some(\"#1d6c76\"), None),</li>\n          <li>        item(\"markup.bold\", None, Some(synt::FontStyle::BOLD)),</li>\n          <li>        item(\"markup.italic\", None, Some(synt::FontStyle::ITALIC)),</li>\n          <li>        item(\"markup.underline\", None, Some(synt::FontStyle::UNDERLINE)),</li>\n          <li>        item(\"markup.raw\", Some(\"#818181\"), None),</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>So, in the example above, the color is supposed to be <span class=\"hashtag-raw\">#4b69c6</span></p>",
      "raw": "According to my discussion on Discord, the color scheme definition is here:\nhttps://github.com/typst/typst/blob/ebe25432641a729780578a2440eaf9fb07c80e38/crates/typst-library/src/text/raw.rs#L880\n\nSo, in the example above, the color is supposed to be #4b69c6",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 32,
      "score": 76.4,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 524
    },
    {
      "id": 9378,
      "post_number": 5,
      "username": "Electron_Wizard",
      "name": "Electron Wizard",
      "created_at": "2025-03-04T14:56:09.370Z",
      "updated_at": "2025-03-04T14:56:09.370Z",
      "cooked": "<p>Ooh neat! Thank you for taking the time!</p>",
      "raw": "Ooh neat! Thank you for taking the time!",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 5.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 997
    },
    {
      "id": 9518,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-09T13:56:13.200Z",
      "updated_at": "2025-03-09T13:56:13.200Z",
      "cooked": "<p>Another approach would be to use the built-in Syntax highlighting. First of all, inline code blocks also support syntax highlighting: <code>```rust x.sqrt()```</code></p>\n<p>Sadly, writing <code>```rust sqrt```</code> won‚Äôt work because it‚Äôs not detected as a function. We can fix that by adding <code>(</code> and then hiding it again:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">show \"(\": none\n```rust sqrt(```\n</code></pre>\n<p>As a complete example, we could define a function <code>rawop</code> like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let rawop(name) = {\n  show \"(\": none\n  math.op(raw(lang: \"rust\", name + \"(\"))\n}\n\n$\n  rawop(\"sqrt\")(sum_(x in v) x^2) = 7\n$\n</code></pre>",
      "raw": "Another approach would be to use the built-in Syntax highlighting. First of all, inline code blocks also support syntax highlighting: ` ```rust x.sqrt()``` `\n\nSadly, writing ` ```rust sqrt``` ` won't work because it's not detected as a function. We can fix that by adding `(` and then hiding it again:\n```typc\nshow \"(\": none\n```rust sqrt(```\n```\nAs a complete example, we could define a function `rawop` like this:\n```typ\n#let rawop(name) = {\n  show \"(\": none\n  math.op(raw(lang: \"rust\", name + \"(\"))\n}\n\n$\n  rawop(\"sqrt\")(sum_(x in v) x^2) = 7\n$\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 15,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:51:16.818303"
}
{
  "topic_metadata": {
    "id": 2955,
    "title": "How to justify outline entries?",
    "slug": "how-to-justify-outline-entries",
    "posts_count": 2,
    "created_at": "2025-02-24T12:53:28.037Z",
    "last_posted_at": "2025-02-24T13:12:21.513Z",
    "views": 43,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "outline"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 147
  },
  "posts": [
    {
      "id": 8970,
      "post_number": 1,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-24T12:53:28.173Z",
      "updated_at": "2025-02-24T12:53:48.986Z",
      "cooked": "<p>Here is my code:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#figure(caption: lorem(13))[Test]\n\n#outline(target: selector(figure))\n</code></pre>\n<p>Result:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/0/0455a44c827c1ff99ea0c7db76549b721e37f4a6.png\" data-download-href=\"https://forum.typst.app/uploads/default/0455a44c827c1ff99ea0c7db76549b721e37f4a6\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/0/0455a44c827c1ff99ea0c7db76549b721e37f4a6_2_690x161.png\" alt=\"image\" data-base62-sha1=\"CloAr8rcXHpjFjWm7bQcdkkemq\" width=\"690\" height=\"161\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/0/0455a44c827c1ff99ea0c7db76549b721e37f4a6_2_690x161.png, https://forum.typst.app/uploads/default/original/2X/0/0455a44c827c1ff99ea0c7db76549b721e37f4a6.png 1.5x, https://forum.typst.app/uploads/default/original/2X/0/0455a44c827c1ff99ea0c7db76549b721e37f4a6.png 2x\" data-dominant-color=\"F6F6F6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">999√ó234 32.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I would like to:</p>\n<ol>\n<li>justify the body of the outline entry (the empty space at the end of the first line is not very clean)</li>\n<li>have the second line of the outline entry start at the same level as ‚ÄúFigure 1‚Äù</li>\n</ol>\n<p>Adding the following show rule does not fix problem 1., as the entry name and caption are not aligned anymore.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show outline.entry: ent =&gt; link(\n  ent.element.location(),\n  ent.indented([#ent.prefix():], {\n    set par(justify: true)\n    ent.inner()\n  })\n)\n</code></pre>\n<p>Result:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/8/87a6cb5fba0fbd32d0535b135434ce2ca6a1d7a9.png\" data-download-href=\"https://forum.typst.app/uploads/default/87a6cb5fba0fbd32d0535b135434ce2ca6a1d7a9\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/8/87a6cb5fba0fbd32d0535b135434ce2ca6a1d7a9_2_690x87.png\" alt=\"image\" data-base62-sha1=\"jm1OsJJ6uj6MHr9QnV2vgAW29Jf\" width=\"690\" height=\"87\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/8/87a6cb5fba0fbd32d0535b135434ce2ca6a1d7a9_2_690x87.png, https://forum.typst.app/uploads/default/original/2X/8/87a6cb5fba0fbd32d0535b135434ce2ca6a1d7a9.png 1.5x, https://forum.typst.app/uploads/default/original/2X/8/87a6cb5fba0fbd32d0535b135434ce2ca6a1d7a9.png 2x\" data-dominant-color=\"F7F7F7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">951√ó121 16 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>How do I solve my problems?</p>",
      "raw": "\nHere is my code:\n\n```typst\n#figure(caption: lorem(13))[Test]\n\n#outline(target: selector(figure))\n```\n\nResult:\n\n![image|690x161](upload://CloAr8rcXHpjFjWm7bQcdkkemq.png)\n\nI would like to:\n1. justify the body of the outline entry (the empty space at the end of the first line is not very clean)\n2. have the second line of the outline entry start at the same level as \"Figure 1\"\n\nAdding the following show rule does not fix problem 1., as the entry name and caption are not aligned anymore.\n\n```typst\n#show outline.entry: ent => link(\n  ent.element.location(),\n  ent.indented([#ent.prefix():], {\n    set par(justify: true)\n    ent.inner()\n  })\n)\n```\n\nResult:\n\n![image|690x87](upload://jm1OsJJ6uj6MHr9QnV2vgAW29Jf.png)\n\nHow do I solve my problems?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 75.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8971,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-24T13:12:21.513Z",
      "updated_at": "2025-02-24T13:13:09.785Z",
      "cooked": "<p>Do you mean the following?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: set par(justify: true)\n\n#show outline.entry: it =&gt; link(\n  it.element.location(),\n  it.prefix() + h(1em) + it.inner(),\n)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/e02e905df9b26d77ebd72242db1b2f26499dbeed.png\" data-download-href=\"https://forum.typst.app/uploads/default/e02e905df9b26d77ebd72242db1b2f26499dbeed\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/e02e905df9b26d77ebd72242db1b2f26499dbeed_2_517x84.png\" alt=\"image\" data-base62-sha1=\"vZcIoSlTkFPnQHJtqw2OwfiNg3X\" width=\"517\" height=\"84\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/e02e905df9b26d77ebd72242db1b2f26499dbeed_2_517x84.png, https://forum.typst.app/uploads/default/optimized/2X/e/e02e905df9b26d77ebd72242db1b2f26499dbeed_2_775x126.png 1.5x, https://forum.typst.app/uploads/default/original/2X/e/e02e905df9b26d77ebd72242db1b2f26499dbeed.png 2x\" data-dominant-color=\"F0F0F0\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">842√ó138 22.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Do you mean the following?\n\n```typ\n#show outline.entry: set par(justify: true)\n\n#show outline.entry: it => link(\n  it.element.location(),\n  it.prefix() + h(1em) + it.inner(),\n)\n```\n\n![image|690x113, 75%](upload://vZcIoSlTkFPnQHJtqw2OwfiNg3X.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:51:16.011189"
}
{
  "topic_metadata": {
    "id": 2958,
    "title": "How can I extract source code examples from a typ file?",
    "slug": "how-can-i-extract-source-code-examples-from-a-typ-file",
    "posts_count": 4,
    "created_at": "2025-02-24T14:42:33.807Z",
    "last_posted_at": "2025-02-24T17:19:54.997Z",
    "views": 116,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "eike",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 437
  },
  "posts": [
    {
      "id": 8976,
      "post_number": 1,
      "username": "rm7",
      "name": "Ricardo",
      "created_at": "2025-02-24T14:42:33.945Z",
      "updated_at": "2025-03-07T21:07:29.436Z",
      "cooked": "<p>Hi all,</p>\n<p>I‚Äôm curious about the best method to extract source code examples from a Typst intermediate file, where the variables have already been processed.<br>\nPreviously, I achieved this by using Asciidoctor to generate an HTML file, then running a script to extract each tagged source block into a separate file.</p>\n<p>Any advice would be appreciated.<br>\nThanks in advance!</p>",
      "raw": "Hi all,\n\nI‚Äôm curious about the best method to extract source code examples from a Typst intermediate file, where the variables have already been processed.\nPreviously, I achieved this by using Asciidoctor to generate an HTML file, then running a script to extract each tagged source block into a separate file.\n\nAny advice would be appreciated.\nThanks in advance!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 464.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1239
    },
    {
      "id": 8979,
      "post_number": 2,
      "username": "eike",
      "name": "Eike Schulte",
      "created_at": "2025-02-24T14:58:01.876Z",
      "updated_at": "2025-02-24T14:58:01.876Z",
      "cooked": "<p>I don‚Äôt have time for a longer answer right now but you might look into using Typst‚Äôs support for command line queries, <a href=\"https://typst.app/docs/reference/introspection/query/#command-line-queries\">see here</a> in the documentation.</p>",
      "raw": "I don't have time for a longer answer right now but you might look into using Typst's support for command line queries, [see here](https://typst.app/docs/reference/introspection/query/#command-line-queries) in the documentation.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 357
    },
    {
      "id": 9008,
      "post_number": 3,
      "username": "eike",
      "name": "Eike Schulte",
      "created_at": "2025-02-24T16:48:14.883Z",
      "updated_at": "2025-02-24T16:48:14.883Z",
      "cooked": "<p>Okay, with a bit more time: You can label each piece of source code that you want to export with a common label, like <code>&lt;export-code&gt;</code>:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">```python\ndef test():\n    print(\"Hello World!\")\n``` &lt;export-code&gt;\n</code></pre>\n<p>Then, you can use the command <code>typst query main.typ \"&lt;export-code&gt;\"</code> (with Typst installed locally on your computer, the web app cannot do this) to get a JSON with all those source elements, like this:</p>\n<pre><code class=\"lang-auto\">[{\"func\":\"raw\",\"text\":\"def test():\\n    print(\\\"#output\\\")\",\"block\":true,\"lang\":\"python\",\"align\":\"start\",\"syntaxes\":[],\"theme\":\"auto\",\"tab-size\":2,\"lines\":[{\"func\":\"line\",\"number\":1,\"count\":2,\"text\":\"def test():\",\"body\":{\"func\":\"sequence\",\"children\":[{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"def\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\" \"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"test\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"(\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\")\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\":\"},\"styles\":\"..\"}]}},{\"func\":\"line\",\"number\":2,\"count\":2,\"text\":\"    print(\\\"#output\\\")\",\"body\":{\"func\":\"sequence\",\"children\":[{\"func\":\"text\",\"text\":\"    \"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"print\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"(\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"\\\"\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"#output\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"\\\"\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\")\"},\"styles\":\"..\"}]}}],\"label\":\"&lt;export-code&gt;\"}]\n</code></pre>\n<p>or you can say <code>typst query main.typ \"&lt;export-code&gt;\" --field text</code> to just get the source snippets, i.e.</p>\n<pre><code class=\"lang-auto\">[\"def test():\\n    print(\\\"Hello World!\\\")\"]\n</code></pre>\n<p>If you construct your code examples using Typst variables, <code>query</code> will reflect the final result. (But writing parametric code like this is not super nice as the raw blocks disable variable interpolation. You can do it by constructing <code>raw</code> elements by hand, though.)</p>\n<p>There is currently no way of getting all <code>raw</code> elements without labeling them, as they are not ‚Äúlocatable‚Äù. The documention promises that this restriction will be lifted in the future.</p>",
      "raw": "Okay, with a bit more time: You can label each piece of source code that you want to export with a common label, like `<export-code>`:\n\n```typst\n```python\ndef test():\n    print(\"Hello World!\")\n``` <export-code>\n```\nThen, you can use the command `typst query main.typ \"<export-code>\"` (with Typst installed locally on your computer, the web app cannot do this) to get a JSON with all those source elements, like this:\n\n```\n[{\"func\":\"raw\",\"text\":\"def test():\\n    print(\\\"#output\\\")\",\"block\":true,\"lang\":\"python\",\"align\":\"start\",\"syntaxes\":[],\"theme\":\"auto\",\"tab-size\":2,\"lines\":[{\"func\":\"line\",\"number\":1,\"count\":2,\"text\":\"def test():\",\"body\":{\"func\":\"sequence\",\"children\":[{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"def\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\" \"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"test\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"(\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\")\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\":\"},\"styles\":\"..\"}]}},{\"func\":\"line\",\"number\":2,\"count\":2,\"text\":\"    print(\\\"#output\\\")\",\"body\":{\"func\":\"sequence\",\"children\":[{\"func\":\"text\",\"text\":\"    \"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"print\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"(\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"\\\"\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"#output\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\"\\\"\"},\"styles\":\"..\"},{\"func\":\"styled\",\"child\":{\"func\":\"text\",\"text\":\")\"},\"styles\":\"..\"}]}}],\"label\":\"<export-code>\"}]\n```\nor you can say `typst query main.typ \"<export-code>\" --field text` to just get the source snippets, i.e.\n```\n[\"def test():\\n    print(\\\"Hello World!\\\")\"]\n```\n\nIf you construct your code examples using Typst variables, `query` will reflect the final result. (But writing parametric code like this is not super nice as the raw blocks disable variable interpolation. You can do it by constructing `raw` elements by hand, though.)\n\nThere is currently no way of getting all `raw` elements without labeling them, as they are not \"locatable\". The documention promises that this restriction will be lifted in the future.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 15,
      "score": 58.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 357
    },
    {
      "id": 9011,
      "post_number": 4,
      "username": "rm7",
      "name": "Ricardo",
      "created_at": "2025-02-24T17:19:54.997Z",
      "updated_at": "2025-02-24T17:20:52.837Z",
      "cooked": "<p>Thank you <a class=\"mention\" href=\"/u/eike\">@eike</a> !<br>\nI don‚Äôt know why I thought that Typst produced some kind of intermediate file that could be read.<br>\nYour comments helped me further.</p>",
      "raw": "Thank you @eike !\nI don't know why I thought that Typst produced some kind of intermediate file that could be read.\nYour comments helped me further.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 14,
      "score": 2.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1239
    }
  ],
  "scraped_at": "2025-06-10T09:51:15.289773"
}
{
  "topic_metadata": {
    "id": 2963,
    "title": "How can I insert unbreakable space automatically after some characters?",
    "slug": "how-can-i-insert-unbreakable-space-automatically-after-some-characters",
    "posts_count": 5,
    "created_at": "2025-02-24T16:01:50.422Z",
    "last_posted_at": "2025-02-25T15:02:05.581Z",
    "views": 101,
    "like_count": 5,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Astra3",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 454
  },
  "posts": [
    {
      "id": 8983,
      "post_number": 1,
      "username": "Astra3",
      "name": "",
      "created_at": "2025-02-24T16:01:50.521Z",
      "updated_at": "2025-03-07T21:24:07.162Z",
      "cooked": "<p>In Czech, when writing some more <em>advanced</em> documents, there is a rule, where conjunctions cannot line wrap, in another words, it cannot be the last character on a line. If the rendered output looked like this:</p>\n<blockquote>\n<p>Dnes jsme p≈ôijeli dom≈Ø a<br>\nrozbalili n√°kup.</p>\n</blockquote>\n<p>it‚Äôd be incorrect as the first line ends with <code>a</code>. A correct example would have <code>a</code> on the start of the second line. This also applies if the characters are the first word in a sentence. This example:</p>\n<blockquote>\n<p>M√°niƒçka dnes dojela dom≈Ø. K<br>\ntomu v≈°emu nestihla ani rozbalit n√°kup.</p>\n</blockquote>\n<p>is also incorrect.</p>\n<p>The conjunctions (not only conjunctions, but it‚Äôs the closest word) are these: <code>[\"a\",\"A\",\"k\",\"K\",\"i\", \"I\", \"u\", \"U\", \"s\", \"S\", \"o\", \"O\", \"v\", \"V\"]</code>.</p>\n<p>The most manual solution is to insert unbreakable space after each conjunction, like so:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">M√°ma dnes dojela dom≈Ø a~rozbalila n√°kup.\n</code></pre>\n<p>It gets very tedious and I was wondering, is there a way to do it automatically for every paragraph?</p>\n<p>I tried using regex to match and replace, however typst‚Äôs regex cannot use lookahead and cannot replace only specific capture groups. Another solution is to use individual show rules, like so:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show \" a \": [ a~]\n#show \" i \": [ i~]\n</code></pre>\n<p>However, as you can see, it can get very tedious.</p>",
      "raw": "In Czech, when writing some more *advanced* documents, there is a rule, where conjunctions cannot line wrap, in another words, it cannot be the last character on a line. If the rendered output looked like this:\n> Dnes jsme p≈ôijeli dom≈Ø a\n> rozbalili n√°kup.\n\nit'd be incorrect as the first line ends with `a`. A correct example would have `a` on the start of the second line. This also applies if the characters are the first word in a sentence. This example:\n> M√°niƒçka dnes dojela dom≈Ø. K\n> tomu v≈°emu nestihla ani rozbalit n√°kup.\n\nis also incorrect.\n\nThe conjunctions (not only conjunctions, but it's the closest word) are these: `[\"a\",\"A\",\"k\",\"K\",\"i\", \"I\", \"u\", \"U\", \"s\", \"S\", \"o\", \"O\", \"v\", \"V\"]`.\n\nThe most manual solution is to insert unbreakable space after each conjunction, like so:\n```typst\nM√°ma dnes dojela dom≈Ø a~rozbalila n√°kup.\n```\nIt gets very tedious and I was wondering, is there a way to do it automatically for every paragraph?\n\nI tried using regex to match and replace, however typst's regex cannot use lookahead and cannot replace only specific capture groups. Another solution is to use individual show rules, like so:\n```typst\n#show \" a \": [ a~]\n#show \" i \": [ i~]\n```\nHowever, as you can see, it can get very tedious.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 230.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1240
    },
    {
      "id": 9014,
      "post_number": 2,
      "username": "Tiggax",
      "name": "",
      "created_at": "2025-02-24T19:29:53.178Z",
      "updated_at": "2025-02-24T19:31:43.919Z",
      "cooked": "<p>If i understood correctly you need the conjucations (ish) to auto break with the next word?</p>\n<p>Would something like this be helpfull?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let const = (\"a\",\"A\",\"k\",\"K\",\"i\", \"I\", \"u\", \"U\", \"s\", \"S\", \"o\", \"O\", \"v\", \"V\")\n#show regex(\" [\" + const.join(\",\") + \"] \" ): it =&gt; [ #it.text.trim()~]\n</code></pre>\n<p>Since there are spaces, you can just trim them, and don‚Äôt need to capture them. unless you have more complex stuff like having dots before it with no space and so on.</p>",
      "raw": "If i understood correctly you need the conjucations (ish) to auto break with the next word?\n\nWould something like this be helpfull?\n```typ\n#let const = (\"a\",\"A\",\"k\",\"K\",\"i\", \"I\", \"u\", \"U\", \"s\", \"S\", \"o\", \"O\", \"v\", \"V\")\n#show regex(\" [\" + const.join(\",\") + \"] \" ): it => [ #it.text.trim()~]\n```\nSince there are spaces, you can just trim them, and don't need to capture them. unless you have more complex stuff like having dots before it with no space and so on.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 26,
      "score": 40.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 71
    },
    {
      "id": 9030,
      "post_number": 3,
      "username": "Astra3",
      "name": "",
      "created_at": "2025-02-25T11:58:07.013Z",
      "updated_at": "2025-02-25T11:58:07.013Z",
      "cooked": "<p>Your solution works great, however I don‚Äôt think the regex should contain commas, so I updated it to the following:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let const = (\"a\",\"A\",\"k\",\"K\",\"i\", \"I\", \"u\", \"U\", \"s\", \"S\", \"o\", \"O\", \"v\", \"V\")\n#show regex(\" [\" + const.join() + \"] \" ): it =&gt; [ #it.text.trim()~]\n</code></pre>\n<p>‚Ä¶and that does the job very well. There are no edge cases that I know of that need to be handled, so I will go with that. Thank you very much</p>",
      "raw": "Your solution works great, however I don't think the regex should contain commas, so I updated it to the following:\n```typst\n#let const = (\"a\",\"A\",\"k\",\"K\",\"i\", \"I\", \"u\", \"U\", \"s\", \"S\", \"o\", \"O\", \"v\", \"V\")\n#show regex(\" [\" + const.join() + \"] \" ): it => [ #it.text.trim()~]\n```\n...and that does the job very well. There are no edge cases that I know of that need to be handled, so I will go with that. Thank you very much",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 24.0,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1240
    },
    {
      "id": 9032,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-25T13:02:59.082Z",
      "updated_at": "2025-02-25T13:02:59.082Z",
      "cooked": "<p>I think you can simplify your code to the following:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show regex(\" [aAkKiIuUsSoOvV] \"): it =&gt; [ #it~]\n</code></pre>",
      "raw": "I think you can simplify your code to the following:\n\n```typ\n#show regex(\" [aAkKiIuUsSoOvV] \"): it => [ #it~]\n```",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9051,
      "post_number": 5,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-02-25T15:02:05.581Z",
      "updated_at": "2025-02-25T15:02:05.581Z",
      "cooked": "<p>Trimming the spaces off of <code>it</code> is necessary here because otherwise they start adding up.  But putting all the ‚Äúconjunction‚Äù characters together is more readable than joining a list.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">Dnes jsme p≈ôijeli dom≈Ø a rozbalili n√°kup.\\\n#show regex(\" [aAkKiIuUsSoOvV] \"): it =&gt; [ #it~]\nDnes jsme p≈ôijeli dom≈Ø a rozbalili n√°kup.\n#show regex(\" [aAkKiIuUsSoOvV] \" ): it =&gt; [ #it.text.trim()~]\nDnes jsme p≈ôijeli dom≈Ø a rozbalili n√°kup.\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/e/efd8bdc695f01fc6c6a1d215e7ef1a11c1b548eb.png\" alt=\"image\" data-base62-sha1=\"ydMtR68JndDp3tQMP4rjiJxFhTJ\" width=\"427\" height=\"99\"></p>",
      "raw": "Trimming the spaces off of `it` is necessary here because otherwise they start adding up.  But putting all the \"conjunction\" characters together is more readable than joining a list.\n```typ\nDnes jsme p≈ôijeli dom≈Ø a rozbalili n√°kup.\\\n#show regex(\" [aAkKiIuUsSoOvV] \"): it => [ #it~]\nDnes jsme p≈ôijeli dom≈Ø a rozbalili n√°kup.\n#show regex(\" [aAkKiIuUsSoOvV] \" ): it => [ #it.text.trim()~]\nDnes jsme p≈ôijeli dom≈Ø a rozbalili n√°kup.\n```\n![image|427x99](upload://ydMtR68JndDp3tQMP4rjiJxFhTJ.png)",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 18,
      "score": 38.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    }
  ],
  "scraped_at": "2025-06-10T09:51:14.558566"
}
{
  "topic_metadata": {
    "id": 2967,
    "title": "How can I load configuration and defined in another .typ file?",
    "slug": "how-can-i-load-configuration-and-defined-in-another-typ-file",
    "posts_count": 6,
    "created_at": "2025-02-24T23:34:18.965Z",
    "last_posted_at": "2025-02-25T09:39:04.859Z",
    "views": 218,
    "like_count": 3,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "gezepi",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 339
  },
  "posts": [
    {
      "id": 9018,
      "post_number": 1,
      "username": "hyoo",
      "name": "Hyunbin Yoo",
      "created_at": "2025-02-24T23:34:19.052Z",
      "updated_at": "2025-03-07T21:11:14.146Z",
      "cooked": "<p>So far I have only used one .typ file per project. Now I would like to save repetitive configurations and load them with one # so that I don‚Äôt have to type the same thing multiple times when I have more than one .typ file in a project.</p>\n<p>All of my .typ files start with the following:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\n  paper: \"us-letter\",\n  margin: 0.5in,\n)\n#set text(\n  font: \"New Computer Modern\",\n  size: 12pt\n)\n\n#let title = [\n  (Insert Title Here)\n]\n\n#let print_title = {\n  align(center, text(12pt)[\n  *#title*\n])\n}\n</code></pre>\n<p>Is it possible to have a config.typ file that contains the above, which are all loaded with a single # at the start of another .typ file in the same project? Also, can title be manually overridden in the new .typ file as needed?</p>",
      "raw": "So far I have only used one .typ file per project. Now I would like to save repetitive configurations and load them with one # so that I don't have to type the same thing multiple times when I have more than one .typ file in a project.\n\nAll of my .typ files start with the following:\n\n```typ\n#set page(\n  paper: \"us-letter\",\n  margin: 0.5in,\n)\n#set text(\n  font: \"New Computer Modern\",\n  size: 12pt\n)\n\n#let title = [\n  (Insert Title Here)\n]\n\n#let print_title = {\n  align(center, text(12pt)[\n  *#title*\n])\n}\n```\n\nIs it possible to have a config.typ file that contains the above, which are all loaded with a single # at the start of another .typ file in the same project? Also, can title be manually overridden in the new .typ file as needed?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 792.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 806
    },
    {
      "id": 9021,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-02-25T06:35:02.471Z",
      "updated_at": "2025-02-25T06:35:02.471Z",
      "cooked": "<p>What you‚Äôre looking for is called a template.  Here is the official Typst guide on templates:</p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/tutorial/making-a-template/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/tutorial/making-a-template/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/tutorial/making-a-template/\" target=\"_blank\" rel=\"noopener\">Making a Template ‚Äì Typst Documentation</a></h3>\n\n  <p>Typst's tutorial.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Your example would become:<br>\nMain Typst file:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"template.typ\": *\n#show: template\n\n#print_title([Template Test])\n\n= Foo\n\n#lorem(10)\n</code></pre>\n<p><code>template.typ</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let print_title(title) = {\n  align(center, text(12pt)[\n  *#title*\n  ])\n}\n\n#let template(doc) = {\n  set page(\n    paper: \"us-letter\",\n    margin: 0.5in,\n  )\n  set text(\n    font: \"New Computer Modern\",\n    size: 12pt\n  )\n  \n  doc\n}\n</code></pre>",
      "raw": "What you're looking for is called a template.  Here is the official Typst guide on templates:\nhttps://typst.app/docs/tutorial/making-a-template/\n\nYour example would become:\nMain Typst file:\n```typ\n#import \"template.typ\": *\n#show: template\n\n#print_title([Template Test])\n\n= Foo\n\n#lorem(10)\n```\n`template.typ`:\n```typ\n#let print_title(title) = {\n  align(center, text(12pt)[\n  *#title*\n  ])\n}\n\n#let template(doc) = {\n  set page(\n    paper: \"us-letter\",\n    margin: 0.5in,\n  )\n  set text(\n    font: \"New Computer Modern\",\n    size: 12pt\n  )\n  \n  doc\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 34,
      "score": 101.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 9022,
      "post_number": 3,
      "username": "hyoo",
      "name": "Hyunbin Yoo",
      "created_at": "2025-02-25T06:42:52.288Z",
      "updated_at": "2025-02-25T06:42:52.288Z",
      "cooked": "<p>Thank you so much! Can I import a template from another project? That is, can I create a ‚Äúglobal‚Äù template that can be imported by any project?</p>",
      "raw": "Thank you so much! Can I import a template from another project? That is, can I create a \"global\" template that can be imported by any project?",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 6.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 806
    },
    {
      "id": 9025,
      "post_number": 4,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-02-25T07:16:38.916Z",
      "updated_at": "2025-02-25T07:16:38.916Z",
      "cooked": "<p>I believe the way to do this is make a local package.  Forum user Eric posted an answer about this here:</p><aside class=\"quote quote-modified\" data-post=\"3\" data-topic=\"925\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/eric/48/87_2.png\" class=\"avatar\">\n    <a href=\"https://forum.typst.app/t/can-i-define-a-dedicated-default-template-folder/925/3\">Can I define a dedicated/default Template folder?</a> <a class=\"badge-category__wrapper \" href=\"/c/questions/5\"><span data-category-id=\"5\" style=\"--category-badge-color: #F7C000; --category-badge-text-color: #fdfdfd;\" data-drop-close=\"true\" class=\"badge-category \" title=\"Your questions about using Typst and the web app go in this category.\"><span class=\"badge-category__name\">Questions</span></span></a>\n  </div>\n  <blockquote>\n    You can store your templates in a <a href=\"https://github.com/typst/packages?tab=readme-ov-file#local-packages\" rel=\"noopener nofollow ugc\">local package namespace</a>. For this, you need to put your template package in a specific directory, depending on your operating system: \n\nWindows: %APPDATA%\\typst\\packages\\&lt;namespace&gt;\\&lt;name&gt;\\&lt;version&gt;\nmacOS: ~/Library/Application Support/typst/packages/&lt;namespace&gt;/&lt;name&gt;/&lt;version&gt;\nLinux: ~/.local/share/typst/packages/&lt;namespace&gt;/&lt;name&gt;/&lt;version&gt; (or via the environment variable $XDG_DATA_HOME, see the above link)\n\nFor &lt;namespace&gt;, you can use whatever you want, bu‚Ä¶\n  </blockquote>\n</aside>\n",
      "raw": "I believe the way to do this is make a local package.  Forum user Eric posted an answer about this here:\nhttps://forum.typst.app/t/can-i-define-a-dedicated-default-template-folder/925/3?u=gezepi",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 35.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 9026,
      "post_number": 5,
      "username": "hyoo",
      "name": "Hyunbin Yoo",
      "created_at": "2025-02-25T08:27:21.370Z",
      "updated_at": "2025-02-25T08:27:21.370Z",
      "cooked": "<p>Understood! So if I wanted to do this in the web app, would the only option be to publicly publish my template as part of a package?</p>",
      "raw": "Understood! So if I wanted to do this in the web app, would the only option be to publicly publish my template as part of a package?",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 4.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 806
    },
    {
      "id": 9028,
      "post_number": 6,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-02-25T09:39:04.859Z",
      "updated_at": "2025-02-25T09:39:04.859Z",
      "cooked": "<p>That‚Äôs a good question that I don‚Äôt know the answer to.<br>\nPublishing a package would certainly work, but it seems overkill to me.  Plus it could be an information security problem, depending on what info is included in your template.</p>",
      "raw": "That's a good question that I don't know the answer to.\nPublishing a package would certainly work, but it seems overkill to me.  Plus it could be an information security problem, depending on what info is included in your template.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    }
  ],
  "scraped_at": "2025-06-10T09:51:13.558683"
}
{
  "topic_metadata": {
    "id": 2970,
    "title": "How to override the behavior of '=' (heading)?",
    "slug": "how-to-override-the-behavior-of-heading",
    "posts_count": 2,
    "created_at": "2025-02-25T06:53:06.421Z",
    "last_posted_at": "2025-02-25T07:09:09.040Z",
    "views": 72,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "gezepi",
    "tags": [
      "styling"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 155
  },
  "posts": [
    {
      "id": 9023,
      "post_number": 1,
      "username": "hyoo",
      "name": "Hyunbin Yoo",
      "created_at": "2025-02-25T06:53:06.560Z",
      "updated_at": "2025-02-25T08:47:14.624Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set text(\n  font: \"New Computer Modern\",\n  size: 12pt\n)\n</code></pre>\n<p>How can I override the font size of =, ==, ===, ‚Ä¶ so that they all obey the size set in <code>#set text?</code> Also, is the line spacing between a = and a non-= same as the global setting? Are there any other special treatments that = gets?</p>",
      "raw": "```typ\n#set text(\n  font: \"New Computer Modern\",\n  size: 12pt\n)\n```\n\nHow can I override the font size of =, ==, ===, ... so that they all obey the size set in ```#set text?``` Also, is the line spacing between a = and a non-= same as the global setting? Are there any other special treatments that = gets?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 134.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 806
    },
    {
      "id": 9024,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-02-25T07:09:09.040Z",
      "updated_at": "2025-02-25T07:09:42.750Z",
      "cooked": "<p>What a <code>=</code> or <code>==</code> in the source file does is create a <a href=\"https://typst.app/docs/reference/model/heading/\">heading</a>.</p>\n<p>The styling of a heading can be controlled with <code>show</code> rules:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= Normal Level 1\n== Normal Level 2\n\n#show heading: set text(1.5em)\n\n= Larger Level 1\n== Larger Level 2\n\n#show heading: set block(above: 0mm)\n#show heading: set text(spacing: 0mm)\n\n= Larger and Spacing Changed Level 1\n== Larger and Spacing Changed Level 2\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/2/28a65efd670cc54c0b67a75812b8610df7979f4d.png\" alt=\"image\" data-base62-sha1=\"5NBxVgWOIQGT9MPhyO4fsc8YEoZ\" width=\"505\" height=\"257\"></p>\n<p>There are a lot of spacing options available in <a href=\"https://typst.app/docs/reference/text/text/\"><code>text</code></a> and <a href=\"https://typst.app/docs/reference/layout/block/\"><code>block</code></a>.</p>",
      "raw": "What a `=` or `==` in the source file does is create a [heading](https://typst.app/docs/reference/model/heading/).\n\nThe styling of a heading can be controlled with `show` rules:\n```typ\n= Normal Level 1\n== Normal Level 2\n\n#show heading: set text(1.5em)\n\n= Larger Level 1\n== Larger Level 2\n\n#show heading: set block(above: 0mm)\n#show heading: set text(spacing: 0mm)\n\n= Larger and Spacing Changed Level 1\n== Larger and Spacing Changed Level 2\n```\n![image|505x257](upload://5NBxVgWOIQGT9MPhyO4fsc8YEoZ.png)\n\n\nThere are a lot of spacing options available in [`text`](https://typst.app/docs/reference/text/text/) and [`block`](https://typst.app/docs/reference/layout/block/).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 23,
      "score": 34.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 326
    }
  ],
  "scraped_at": "2025-06-10T09:51:10.458288"
}
{
  "topic_metadata": {
    "id": 2974,
    "title": "How to use LaTeX's \\langle and \\rangle functions in Typst?",
    "slug": "how-to-use-latexs-langle-and-rangle-functions-in-typst",
    "posts_count": 3,
    "created_at": "2025-02-25T13:42:24.407Z",
    "last_posted_at": "2025-02-25T14:54:24.509Z",
    "views": 342,
    "like_count": 4,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "math",
      "latex-migration"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 226
  },
  "posts": [
    {
      "id": 9034,
      "post_number": 1,
      "username": "jonas.bloch",
      "name": "Jonas Bloch",
      "created_at": "2025-02-25T13:42:24.546Z",
      "updated_at": "2025-02-25T13:42:24.546Z",
      "cooked": "<p>Hello! I would like to know how to display an average value using the &lt;&gt; brackets. In LaTeX, one would write <code>\\left\\langle X \\right\\rangle</code> for the average value of X. I looked a bit on the internet, in the doc and in the forum, and I could not find any mention of something that approaches what I‚Äôm looking for‚Ä¶</p>\n<p>Thank you in advance for helping out!</p>",
      "raw": "Hello! I would like to know how to display an average value using the <> brackets. In LaTeX, one would write `\\left\\langle X \\right\\rangle` for the average value of X. I looked a bit on the internet, in the doc and in the forum, and I could not find any mention of something that approaches what I'm looking for...\n\nThank you in advance for helping out!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 1443.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1192
    },
    {
      "id": 9043,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-25T14:12:11.083Z",
      "updated_at": "2025-02-25T14:13:32.312Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/jonas.bloch\">@jonas.bloch</a>, most symbols in the typst documentation have their LaTeX equivalent also available for queries.</p>\n<p>If you type ‚Äúlangle‚Äù in the search box, it should pop up ‚Äúsym‚Äù, see <a href=\"https://typst.app/docs/reference/symbols/sym/?query=langle\" class=\"inline-onebox\">General Symbols ‚Äì Typst Documentation</a></p>\n<p>After, you can click on the symbol to get<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/f/fb3918a3c9ac5c6cc36a5e2e38557d5a54c9362a.png\" alt=\"image\" data-base62-sha1=\"zQqaJU91bQfHjCYpetcf6IBHNou\" width=\"399\" height=\"337\"></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$angle.l x angle.r$\n</code></pre>\n<p>should give you<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/9/9cd2c3bad598dedf86677fe31ce8ed43afd1cb62.png\" alt=\"image\" data-base62-sha1=\"mnk2SlUDd2GZ1rFs92qzNiIGAka\" width=\"38\" height=\"50\"></p>\n<p>P.S.: you can also take a look at <a href=\"https://detypify.quarticcat.com/\">https://detypify.quarticcat.com/</a>, see this response by <a href=\"https://forum.typst.app/t/how-can-i-more-easily-input-unicode-characters/1485/2\" class=\"inline-onebox\">How can I more easily input unicode characters? - #2 by PgBiel</a></p>",
      "raw": "Hello @jonas.bloch, most symbols in the typst documentation have their LaTeX equivalent also available for queries.\n\nIf you type \"langle\" in the search box, it should pop up \"sym\", see https://typst.app/docs/reference/symbols/sym/?query=langle\n\nAfter, you can click on the symbol to get \n![image|399x337](upload://zQqaJU91bQfHjCYpetcf6IBHNou.png)\n\n\n```typ\n$angle.l x angle.r$\n```\nshould give you \n![image|38x50](upload://mnk2SlUDd2GZ1rFs92qzNiIGAka.png)\n\nP.S.: you can also take a look at https://detypify.quarticcat.com/, see this response by https://forum.typst.app/t/how-can-i-more-easily-input-unicode-characters/1485/2?u=quachpas",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 128.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9049,
      "post_number": 3,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-02-25T14:54:24.509Z",
      "updated_at": "2025-02-25T14:54:24.509Z",
      "cooked": "<p>One thing to add is that you can scale the brackets with the content they enclose by using the <a href=\"https://typst.app/docs/reference/math/lr\"><code>lr()</code> function</a>.</p>\n<p>For example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ angle.l sum_(x=1)^n angle.r $\n$ lr(angle.l sum_(x=1)^n angle.r, size: #75%) x $\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/3/3cf45561536e75fe3a5d1f7c818ce5cb93532d12.png\" alt=\"image\" data-base62-sha1=\"8He8599yRzSbIxRrc7TBYnyMPx8\" width=\"190\" height=\"217\"></p>",
      "raw": "One thing to add is that you can scale the brackets with the content they enclose by using the [`lr()` function](https://typst.app/docs/reference/math/lr).\n\nFor example:\n```typ\n$ angle.l sum_(x=1)^n angle.r $\n$ lr(angle.l sum_(x=1)^n angle.r, size: #75%) x $\n```\n![image|190x217](upload://8He8599yRzSbIxRrc7TBYnyMPx8.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 30,
      "score": 61.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    }
  ],
  "scraped_at": "2025-06-10T09:51:09.748118"
}
{
  "topic_metadata": {
    "id": 2982,
    "title": "How to add a negative space between symbols in math mode?",
    "slug": "how-to-add-a-negative-space-between-symbols-in-math-mode",
    "posts_count": 6,
    "created_at": "2025-02-25T14:24:21.248Z",
    "last_posted_at": "2025-03-09T11:38:05.539Z",
    "views": 201,
    "like_count": 8,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "sijo",
    "tags": [
      "math",
      "spacing"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 506
  },
  "posts": [
    {
      "id": 9044,
      "post_number": 1,
      "username": "DreamerPhi",
      "name": "",
      "created_at": "2025-02-25T14:24:21.323Z",
      "updated_at": "2025-03-09T11:11:49.364Z",
      "cooked": "<p>Hi,<br>\nI would like to find an equivalent to <code>\\!</code> used in LaTeX for negative spaces in math mode, as describe in the answer to this <a href=\"https://tex.stackexchange.com/questions/318142/typeseeting-a-multiset-with-double-curly-braces\" rel=\"noopener nofollow ugc\">post</a>.<br>\nThanks.</p>",
      "raw": "Hi,\nI would like to find an equivalent to `\\!` used in LaTeX for negative spaces in math mode, as describe in the answer to this [post](https://tex.stackexchange.com/questions/318142/typeseeting-a-multiset-with-double-curly-braces).\nThanks.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 703.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1251
    },
    {
      "id": 9045,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-25T14:33:44.967Z",
      "updated_at": "2025-02-25T14:33:44.967Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/dreamerphi\">@DreamerPhi</a>, the <a href=\"https://typst.app/docs/reference/layout/h/\">horizontal spacing</a> works in equations too!</p>\n<p>Hence</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation: it =&gt; {\n  show \"!\": h(-2pt)\n  it\n}\n${{ A, B, C }}$\n\n${!{ A, B, C }!}$\n\n${!!{ A, B, C }!!}$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/e/eb4d5d865562ad06ea05ce09936051f5ba2c6ff0.png\" alt=\"image\" data-base62-sha1=\"xzzXwhVp5Po4hKQ9dBewAhBoHV6\" width=\"208\" height=\"213\"></p>\n<p>Above is the Typst output, you can compare it to the LaTeX output below<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/5/52bc8ecabb79ab47436c3e772874ab3201986fed.png\" alt=\"image\" data-base62-sha1=\"bNV8pRfS1BY7LYLwKmaU4yNMMsl\" width=\"150\" height=\"105\"></p>",
      "raw": "Hello @DreamerPhi, the [horizontal spacing](https://typst.app/docs/reference/layout/h/) works in equations too!\n\nHence\n\n```typ\n#show math.equation: it => {\n  show \"!\": h(-2pt)\n  it\n}\n${{ A, B, C }}$\n\n${!{ A, B, C }!}$\n\n${!!{ A, B, C }!!}$\n```\n![image|208x213](upload://xzzXwhVp5Po4hKQ9dBewAhBoHV6.png)\n\nAbove is the Typst output, you can compare it to the LaTeX output below\n![image|150x105](upload://bNV8pRfS1BY7LYLwKmaU4yNMMsl.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 41,
      "score": 33.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 9053,
      "post_number": 3,
      "username": "DreamerPhi",
      "name": "",
      "created_at": "2025-02-25T15:06:29.329Z",
      "updated_at": "2025-02-25T15:06:29.329Z",
      "cooked": "<p>Thank you !<br>\nBut is there a way to have <code>!</code> still printing an exclamation mark, and maybe <code>\\!</code> used for the horizontal spacing (or the opposite)?</p>",
      "raw": "Thank you !\nBut is there a way to have `!` still printing an exclamation mark, and maybe `\\!` used for the horizontal spacing (or the opposite)?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 12.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1251
    },
    {
      "id": 9056,
      "post_number": 4,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-02-25T15:28:23.891Z",
      "updated_at": "2025-02-25T15:29:21.362Z",
      "cooked": "<p>In theory you could create a function like this: <code>#let ! = h(-2pt)</code> and anywhere you want a negative space you would write <code>#!()</code>.  However, this <em>doesn‚Äôt</em> work.<br>\nSee <a href=\"https://forum.typst.app/t/what-are-the-rules-for-identifiers-in-typst/665/2\">this forum post by xkevio</a> for the variable naming rules in Typst.</p>\n<p>You can use <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a>‚Äô solution and replace the ! in the <code>show</code> rule with any single character that you know won‚Äôt be found in any of your equations:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation: it =&gt; {\n  show \"√º\": h(-2pt)\n  it\n}\n${{ A!, B, C }}$\\\n${√º{ A!, B, C }√º}$\\\n${√º √º{ A!, B, C }√º √º}$\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/5/5d524d1b2e26e79927c42fca643a80cbb8a3d7a4.png\" alt=\"image\" data-base62-sha1=\"djyJwsyEpJMVnzt6p4ZKEYudjTe\" width=\"163\" height=\"106\"></p>\n</details>\n<p>Or you could use a function.</p>\n<details>\n<summary>\nUsing a Function</summary>\n<p>It‚Äôs not as clean but you can define a function with a short name (here <code>ns</code> for negative space):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let ns = h.with(-2pt)\n${#ns()#ns(){ A!, B!, C! }#ns()#ns()}$\n</code></pre>\n<p>The <code>.with()</code> basically asks the compiler \"please create a function that calls <code>h()</code> with these given arguments.  This new function is stored with the name <code>ns</code>.</p>\n</details>",
      "raw": "In theory you could create a function like this: `#let ! = h(-2pt)` and anywhere you want a negative space you would write `#!()`.  However, this _doesn't_ work.\nSee [this forum post by xkevio](https://forum.typst.app/t/what-are-the-rules-for-identifiers-in-typst/665/2?u=gezepi) for the variable naming rules in Typst.\n\nYou can use @quachpas' solution and replace the ! in the `show` rule with any single character that you know won't be found in any of your equations:\n```typ\n#show math.equation: it => {\n  show \"√º\": h(-2pt)\n  it\n}\n${{ A!, B, C }}$\\\n${√º{ A!, B, C }√º}$\\\n${√º √º{ A!, B, C }√º √º}$\n```\n[details=\"Output\"]\n![image|163x106](upload://djyJwsyEpJMVnzt6p4ZKEYudjTe.png)\n[/details]\n\n\n\nOr you could use a function.\n[details=\"Using a Function\"]\nIt's not as clean but you can define a function with a short name (here `ns` for negative space):\n```typ\n#let ns = h.with(-2pt)\n${#ns()#ns(){ A!, B!, C! }#ns()#ns()}$\n```\nThe `.with()` basically asks the compiler \"please create a function that calls `h()` with these given arguments.  This new function is stored with the name `ns`.\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 35,
      "score": 47.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 9058,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-25T16:22:32.036Z",
      "updated_at": "2025-03-03T08:36:07.125Z",
      "cooked": "<p>Instead of a function you can just use a variable:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let ns = h(-2pt)\n${#ns#ns{ A!, B!, C! }#ns#ns}$\n</code></pre>\n<p>Edit: you can also leave out the <code>#</code> symbols:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let ns = h(-2pt)\n${ns ns { A!, B!, C! } ns ns}$\n</code></pre>",
      "raw": "Instead of a function you can just use a variable:\n\n```typ\n#let ns = h(-2pt)\n${#ns#ns{ A!, B!, C! }#ns#ns}$\n```\n\nEdit: you can also leave out the `#` symbols:\n\n```typ\n#let ns = h(-2pt)\n${ns ns { A!, B!, C! } ns ns}$\n```",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 31,
      "score": 56.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9515,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-09T11:38:05.539Z",
      "updated_at": "2025-03-09T11:38:05.539Z",
      "cooked": "<p>I‚Äôm not saying I‚Äôd recommend this, but the following seems to work, using <code>\\\\!</code> as the negative space:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation: it =&gt; {\n  let target = [\\\\!]\n  show target.func().where(children: target.children): h(-2pt)\n  it\n}\n${{ A!, B, C }}$\n\n${\\\\!{ A!, B, C }\\\\!}$\n\n${\\\\!\\\\!{ A!, B, C }\\\\!\\\\!}$\n</code></pre>\n<p><code>\\!</code> on its own won‚Äôt work because the backslash is special in Typst in a completely different way from LaTeX, but <code>\\\\</code> results in a regular character which with some work you can make a show rule for.</p>\n<p>Luckily, Typst seems to parse anything suffixed by <code>!</code> as a separate sequence (in math), so we can replace that whole sequence with what we want.</p>\n<p>There may be edge cases where the sequence would not be detected, but I was not able to construct one. This manually constructed sequence <em>would</em> break it:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let target = [\\\\!]\n#let strange = target.func()((..target.children, [a]))\n\n${\\\\!{ A!, B, C }strange}$\n</code></pre>\n<p>The output contains an unreplaced <code>[\\\\!]</code>.</p>",
      "raw": "I'm not saying I'd recommend this, but the following seems to work, using `\\\\!` as the negative space:\n\n```typ\n#show math.equation: it => {\n  let target = [\\\\!]\n  show target.func().where(children: target.children): h(-2pt)\n  it\n}\n${{ A!, B, C }}$\n\n${\\\\!{ A!, B, C }\\\\!}$\n\n${\\\\!\\\\!{ A!, B, C }\\\\!\\\\!}$\n```\n\n`\\!` on its own won't work because the backslash is special in Typst in a completely different way from LaTeX, but `\\\\` results in a regular character which with some work you can make a show rule for.\n\nLuckily, Typst seems to parse anything suffixed by `!` as a separate sequence (in math), so we can replace that whole sequence with what we want.\n\nThere may be edge cases where the sequence would not be detected, but I was not able to construct one. This manually constructed sequence _would_ break it:\n\n```typ\n#let target = [\\\\!]\n#let strange = target.func()((..target.children, [a]))\n\n${\\\\!{ A!, B, C }strange}$\n```\nThe output contains an unreplaced `[\\\\!]`.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 15,
      "score": 38.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:51:08.994773"
}
