{
  "topic_metadata": {
    "id": 2788,
    "title": "How can I generate plots from a csv file?",
    "slug": "how-can-i-generate-plots-from-a-csv-file",
    "posts_count": 6,
    "created_at": "2025-02-12T10:23:24.578Z",
    "last_posted_at": "2025-02-12T15:05:38.395Z",
    "views": 310,
    "like_count": 4,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "sijo",
    "tags": [
      "graphics",
      "data-loading"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 488
  },
  "posts": [
    {
      "id": 8503,
      "post_number": 1,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-12T10:23:24.816Z",
      "updated_at": "2025-02-22T09:15:32.329Z",
      "cooked": "<p>Hello,<br>\nI want to work with typst to generate plots of series found in a csv file.<br>\nDO you have any ideas how to start that ?<br>\nI have read on cetz how to do it with canvas, but that’s just for defined functions before hand, my goal is to generate a series plot for every column in the csv file.<br>\nThank you kindly.</p>",
      "raw": "Hello,\nI want to work with typst to generate plots of series found in a csv file.\nDO you have any ideas how to start that ?\nI have read on cetz how to do it with canvas, but that's just for defined functions before hand, my goal is to generate a series plot for every column in the csv file.\nThank you kindly.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 1167.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8504,
      "post_number": 2,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-12T10:55:16.376Z",
      "updated_at": "2025-02-12T10:55:16.376Z",
      "cooked": "<p>i started with this example, but to no avail,</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n#let results = csv(\"data.csv\")\n#let rows= results.first()\n\n#canvas({\n  import draw: *\n\n  // Set-up a thin axis style\n  set-style(axes: (stroke: .5pt, tick: (stroke: .5pt)),\n            legend: (stroke: none, orientation: ttb, item: (spacing: .3), scale: 80%))\n\n  plot.plot(size: (12, 8),\n    {\n      let domain = (auto, +auto) //or domain(-calc.inf, calc.inf)\n\n      for i in range(1,results.len()) {\n        plot.add(rows,results.at(i), domain: domain, label: // column header,\n        style: (stroke: black))\n      }\n      \n    })\n})\n\n</code></pre>\n<p>This is not a working example, just to start suggestion on how to make it work automatically,  because  I have 124k csv files , each one 24 dimensions with 16 rows.</p>\n<p>Thanks team!</p>",
      "raw": "i started with this example, but to no avail,\n\n```typ\n#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n#let results = csv(\"data.csv\")\n#let rows= results.first()\n\n#canvas({\n  import draw: *\n\n  // Set-up a thin axis style\n  set-style(axes: (stroke: .5pt, tick: (stroke: .5pt)),\n            legend: (stroke: none, orientation: ttb, item: (spacing: .3), scale: 80%))\n\n  plot.plot(size: (12, 8),\n    {\n      let domain = (auto, +auto) //or domain(-calc.inf, calc.inf)\n\n      for i in range(1,results.len()) {\n        plot.add(rows,results.at(i), domain: domain, label: // column header,\n        style: (stroke: black))\n      }\n      \n    })\n})\n\n```\n\n\nThis is not a working example, just to start suggestion on how to make it work automatically,  because  I have 124k csv files , each one 24 dimensions with 16 rows.\n\nThanks team!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 22.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8505,
      "post_number": 3,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-12T11:06:06.769Z",
      "updated_at": "2025-02-12T11:07:05.492Z",
      "cooked": "<p>Can you post a small example of a data file? It’s not clear what are the x and y coordinates of points for the plot.</p>",
      "raw": "Can you post a small example of a data file? It's not clear what are the x and y coordinates of points for the plot.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 31.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8511,
      "post_number": 4,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-12T13:38:38.583Z",
      "updated_at": "2025-02-12T13:38:38.583Z",
      "cooked": "<p>Sure it looks like this:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/d/dabdb2b27a41c1d3fffd295c74fa196006e59a19.png\" data-download-href=\"https://forum.typst.app/uploads/default/dabdb2b27a41c1d3fffd295c74fa196006e59a19\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/original/2X/d/dabdb2b27a41c1d3fffd295c74fa196006e59a19.png\" alt=\"image\" data-base62-sha1=\"vd4vUBrNQLitAwWv2MmONBw4aTv\" width=\"690\" height=\"383\" data-dominant-color=\"474747\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">778×432 42.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I want to plot every column against date column.</p>",
      "raw": "Sure it looks like this:\n\n![image|690x383](upload://vd4vUBrNQLitAwWv2MmONBw4aTv.png)\n\n\nI want to plot every column against date column.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 45.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8518,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-12T14:50:53.051Z",
      "updated_at": "2025-02-12T14:51:54.238Z",
      "cooked": "<p>Here’s something to get you started:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n// Load CSV and separate first row from others\n#let (names, ..data) = csv.decode(```\nDate,A,B,C\n2023-01-01,1,2,3\n2023-01-02,2,3,4\n2023-01-03,1,2,6\n2023-01-04,2,1,8\n```.text)\n\n// Hack: use TOML parser to parse date strings\n#let dates = data.map(x =&gt; toml.decode(\"date = \" + x.first()).date)\n\n// Each x value is the number of days since the first row date\n#let xs = dates.map(x =&gt; (x - dates.first()).days())\n\n// Make an array of (x, y) coordinates for the given column index\n#let series(j) = range(data.len()).map(i =&gt; (xs.at(i), float(data.at(i).at(j))))\n\n#canvas({\n  import draw: *\n\n  // Set-up a thin axis style\n  set-style(\n    axes: (stroke: .5pt, tick: (stroke: .5pt)),\n    legend: (stroke: none, orientation: ttb, item: (spacing: .3), scale: 80%),\n  )\n\n  plot.plot(size: (12, 8), {\n    for j in range(1, names.len()) {\n      plot.add(series(j), label: names.at(j))\n    }\n  })\n})\n</code></pre>\n<p>To load CSV data from a file, use <code>#let (names, ..data) = csv(\"file.csv\")</code> instead.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/e9dbfcca3262500fd2e5996c7d2ed48ca85ac6b1.png\" data-download-href=\"https://forum.typst.app/uploads/default/e9dbfcca3262500fd2e5996c7d2ed48ca85ac6b1\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/e9dbfcca3262500fd2e5996c7d2ed48ca85ac6b1_2_517x335.png\" alt=\"image\" data-base62-sha1=\"xmOzr8dQQBnnqvCvb9qVCK3Uoj7\" width=\"517\" height=\"335\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/e9dbfcca3262500fd2e5996c7d2ed48ca85ac6b1_2_517x335.png, https://forum.typst.app/uploads/default/optimized/2X/e/e9dbfcca3262500fd2e5996c7d2ed48ca85ac6b1_2_775x502.png 1.5x, https://forum.typst.app/uploads/default/original/2X/e/e9dbfcca3262500fd2e5996c7d2ed48ca85ac6b1.png 2x\" data-dominant-color=\"FAFBFA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1002×650 28.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Here's something to get you started:\n\n```typ\n#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n// Load CSV and separate first row from others\n#let (names, ..data) = csv.decode(```\nDate,A,B,C\n2023-01-01,1,2,3\n2023-01-02,2,3,4\n2023-01-03,1,2,6\n2023-01-04,2,1,8\n```.text)\n\n// Hack: use TOML parser to parse date strings\n#let dates = data.map(x => toml.decode(\"date = \" + x.first()).date)\n\n// Each x value is the number of days since the first row date\n#let xs = dates.map(x => (x - dates.first()).days())\n\n// Make an array of (x, y) coordinates for the given column index\n#let series(j) = range(data.len()).map(i => (xs.at(i), float(data.at(i).at(j))))\n\n#canvas({\n  import draw: *\n\n  // Set-up a thin axis style\n  set-style(\n    axes: (stroke: .5pt, tick: (stroke: .5pt)),\n    legend: (stroke: none, orientation: ttb, item: (spacing: .3), scale: 80%),\n  )\n\n  plot.plot(size: (12, 8), {\n    for j in range(1, names.len()) {\n      plot.add(series(j), label: names.at(j))\n    }\n  })\n})\n```\n\nTo load CSV data from a file, use `#let (names, ..data) = csv(\"file.csv\")` instead.\n\n![image|690x447, 75%](upload://xmOzr8dQQBnnqvCvb9qVCK3Uoj7.png)",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 29,
      "score": 65.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8521,
      "post_number": 6,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-12T15:05:38.395Z",
      "updated_at": "2025-02-12T15:20:06.564Z",
      "cooked": "<p>You are a life saver!</p>\n<p>What do I need to do to get each series in a graph, meaning a graph for A, B and C independently ?</p>\n<p>edit:<br>\nI figured it out, You just bring out the for loop before calling canvas.<br>\nThank you <a class=\"mention\" href=\"/u/sijo\">@sijo</a> !</p>",
      "raw": "You are a life saver!\n\nWhat do I need to do to get each series in a graph, meaning a graph for A, B and C independently ?\n\n\nedit:\nI figured it out, You just bring out the for loop before calling canvas.\nThank you @sijo !",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 30.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    }
  ],
  "scraped_at": "2025-06-10T09:51:44.579245"
}
{
  "topic_metadata": {
    "id": 2790,
    "title": "How to make a single list numbered with letters, without using the `#set` command?",
    "slug": "how-to-make-a-single-list-numbered-with-letters-without-using-the-set-command",
    "posts_count": 2,
    "created_at": "2025-02-12T14:11:35.888Z",
    "last_posted_at": "2025-02-12T14:22:54.892Z",
    "views": 102,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "layout",
      "lists"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 149
  },
  "posts": [
    {
      "id": 8513,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2025-02-12T14:11:36.253Z",
      "updated_at": "2025-02-12T14:24:04.728Z",
      "cooked": "<p>Hello! How to make a single list to be numbered with letters without using the <code>#set</code> command?</p>\n<p>I tried this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#enum(numbering: \"a)\")[\n  + foo\n  + bar\n]\n\n+ foo\n+ bar\n</code></pre>\n<p>but the output doesn’t look correct. Currently, the output is</p>\n<pre data-code-wrap=\"none\"><code class=\"lang-none\">a) 1. foo\n   2. bar\n</code></pre>\n<p>whereas I expected</p>\n<pre data-code-wrap=\"none\"><code class=\"lang-none\">a) foo\nb) bar \n</code></pre>\n<p>I also tried</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#enum(numbering: \"a)\",\n  enum.item[foo],\n  enum.item[bar]\n)\n\n+ foo\n+ bar\n</code></pre>\n<p>and it works fine, but maybe there is a simpler syntax for this?</p>",
      "raw": "Hello! How to make a single list to be numbered with letters without using the `#set` command?\n\nI tried this:\n\n```typst\n#enum(numbering: \"a)\")[\n  + foo\n  + bar\n]\n\n+ foo\n+ bar\n```\n\nbut the output doesn't look correct. Currently, the output is \n\n```none\na) 1. foo\n   2. bar\n```\n\nwhereas I expected\n\n```none\na) foo\nb) bar \n```\n\nI also tried\n\n```typst\n#enum(numbering: \"a)\",\n  enum.item[foo],\n  enum.item[bar]\n)\n\n+ foo\n+ bar\n```\n\nand it works fine, but maybe there is a simpler syntax for this?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 428.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 8514,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-12T14:22:54.892Z",
      "updated_at": "2025-02-12T14:23:41.218Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/jsx97\">@jsx97</a>,</p>\n<p>this is a bit tricky, but <code>enum</code> is defined as <code>enum(..children)</code>, where the <code>..</code> is very important. It is a variadic argument, meaning it can be accepted multiple times. The simpler syntax is</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#enum(numbering: \"a)\")[foo][bar]\n</code></pre>\n<p>which is equivalent to</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#enum(numbering: \"a)\", \"foo\", \"bar\")\n</code></pre>\n<p>By writing your first example, you actually write the following</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#enum(numbering: \"a)\", enum[foo][bar])\n</code></pre>",
      "raw": "Hello @jsx97,\n\nthis is a bit tricky, but `enum` is defined as `enum(..children)`, where the `..` is very important. It is a variadic argument, meaning it can be accepted multiple times. The simpler syntax is\n\n```typ\n#enum(numbering: \"a)\")[foo][bar]\n```\nwhich is equivalent to\n```typ\n#enum(numbering: \"a)\", \"foo\", \"bar\")\n```\n\nBy writing your first example, you actually write the following\n```typ\n#enum(numbering: \"a)\", enum[foo][bar])\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 17,
      "score": 33.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:51:43.868454"
}
{
  "topic_metadata": {
    "id": 2791,
    "title": "Is it possible to use a custom character for a specific list item?",
    "slug": "is-it-possible-to-use-a-custom-character-for-a-specific-list-item",
    "posts_count": 4,
    "created_at": "2025-02-12T14:36:08.277Z",
    "last_posted_at": "2025-02-12T14:58:50.348Z",
    "views": 81,
    "like_count": 7,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "layout",
      "lists"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 226
  },
  "posts": [
    {
      "id": 8515,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2025-02-12T14:36:08.526Z",
      "updated_at": "2025-02-12T14:44:47.835Z",
      "cooked": "<p>Hello everyone! Is it possible to specify a custom character for a specific list item?</p>\n<p>My document uses a Cyrillic alphabet, and because of this, I try to make my lists to look like</p>\n<pre data-code-wrap=\"none\"><code class=\"lang-none\">а) foo\nб) bar\nв) baz\n</code></pre>\n<p>instead of</p>\n<pre data-code-wrap=\"none\"><code class=\"lang-none\">a) foo\nb) bar\nc) baz\n</code></pre>\n<p>Currently, Cyrillic is not supported for numbering patterns out of the box (see <a href=\"https://github.com/typst/typst/issues/1595\" rel=\"noopener nofollow ugc\">#1595</a> and <a href=\"https://github.com/typst/typst/pull/5597\" rel=\"noopener nofollow ugc\">#5597</a>), and this is why I tried to adopt one of the examples from <a href=\"https://typst.app/docs/reference/model/enum/\">https://typst.app/docs/reference/model/enum/</a> instead. Here is my version:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#enum(\n  enum.item(\"а)\")[foo],\n  enum.item(\"б)\")[bar],\n  enum.item(\"в)\")[baz]\n)\n</code></pre>\n<p>but this doesn’t seem to work.</p>\n<p>What I’m doing wrong?</p>",
      "raw": "Hello everyone! Is it possible to specify a custom character for a specific list item?\n\nMy document uses a Cyrillic alphabet, and because of this, I try to make my lists to look like\n\n```none\nа) foo\nб) bar\nв) baz\n```\n\ninstead of\n\n```none\na) foo\nb) bar\nc) baz\n```\n\nCurrently, Cyrillic is not supported for numbering patterns out of the box (see [#1595](https://github.com/typst/typst/issues/1595) and [#5597](https://github.com/typst/typst/pull/5597)), and this is why I tried to adopt one of the examples from <https://typst.app/docs/reference/model/enum/> instead. Here is my version:\n\n```typst\n#enum(\n  enum.item(\"а)\")[foo],\n  enum.item(\"б)\")[bar],\n  enum.item(\"в)\")[baz]\n)\n```\n\nbut this doesn't seem to work.\n\nWhat I'm doing wrong?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 279.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 8516,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-12T14:41:22.693Z",
      "updated_at": "2025-02-12T14:41:22.693Z",
      "cooked": "<p><code>enum.item</code> accepts <code>none</code> or <code>int</code>. You’re better off writing a numbering function instead.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let cyrillic-numbering(n) = {\n  (\"а)\", \"б)\", \"в)\").at(n - 1)\n}\n#enum(numbering: cyrillic-numbering)[foo][bar][baz]\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/c/c17d02caadf3259dd186b61f29aaf8e888b1e72b.png\" alt=\"image\" data-base62-sha1=\"rBFZ9ORxEcDYCG03VTl7tywMaoP\" width=\"89\" height=\"103\"></p>",
      "raw": "`enum.item` accepts `none` or `int`. You're better off writing a numbering function instead.\n```typ\n#let cyrillic-numbering(n) = {\n  (\"а)\", \"б)\", \"в)\").at(n - 1)\n}\n#enum(numbering: cyrillic-numbering)[foo][bar][baz]\n```\n![image|89x103](upload://rBFZ9ORxEcDYCG03VTl7tywMaoP.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 21,
      "score": 69.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 8519,
      "post_number": 3,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2025-02-12T14:51:48.574Z",
      "updated_at": "2025-02-12T14:51:48.574Z",
      "cooked": "<p>A more general solution would be a custom numbering function like this, which starts at the first lowercase cyrillic letter:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set enum(numbering: n =&gt; {\n  let cyr = (0x430 + n) - 1\n  str.from-unicode(cyr) + \")\"\n})\n</code></pre>\n<p>A more robust alternative is to use something like <a href=\"https://typst.app/universe/package/numberingx\"><code>numberingx</code></a>.</p>",
      "raw": "A more general solution would be a custom numbering function like this, which starts at the first lowercase cyrillic letter:\n```typ\n#set enum(numbering: n => {\n  let cyr = (0x430 + n) - 1\n  str.from-unicode(cyr) + \")\"\n})\n```\n\nA more robust alternative is to use something like [`numberingx`](https://typst.app/universe/package/numberingx).",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 4,
      "reads": 21,
      "score": 109.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 8520,
      "post_number": 4,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2025-02-12T14:58:50.348Z",
      "updated_at": "2025-02-12T14:59:05.617Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/xkevio\">@xkevio</a> I love this. Thanks a lot!</p>",
      "raw": "@xkevio I love this. Thanks a lot!",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    }
  ],
  "scraped_at": "2025-06-10T09:51:43.158931"
}
{
  "topic_metadata": {
    "id": 2793,
    "title": "How can I customize Cetz plots with different axes, pallete, etc.?",
    "slug": "how-can-i-customize-cetz-plots-with-different-axes-pallete-etc",
    "posts_count": 5,
    "created_at": "2025-02-12T16:39:01.914Z",
    "last_posted_at": "2025-02-14T09:55:16.359Z",
    "views": 335,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Mathemensch",
    "tags": [
      "layout",
      "graphics",
      "cetz"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 482
  },
  "posts": [
    {
      "id": 8523,
      "post_number": 1,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-12T16:39:02.089Z",
      "updated_at": "2025-03-07T15:28:40.356Z",
      "cooked": "<p>Hello,<br>\nMy code is :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n// Load CSV and separate first row from others\n//mock data:\n#let (names, ..data) = csv.decode(```\nDate,A,B,C\n2023-01-01,1,2,3\n2023-01-02,2,3,4\n2023-01-03,1,2,6\n2023-01-04,2,1,8\n```.text)\n\n// Hack: use TOML parser to parse date strings\n#let dates = data.map(x =&gt; toml.decode(\"date = \" + x.first()).date)\n\n// Each x value is the number of days since the first row date\n#let xs = dates.map(x =&gt; (x - dates.first()).days())\n\n// Make an array of (x, y) coordinates for the given column index\n#let series(j) = range(data.len()).map(i =&gt; (dates.at(i), float(data.at(i).at(j))))\n\n#canvas({\n  import draw: *\n\n  // Set-up a thin axis style\n  set-style(\n    axes: (   stroke:  (thickness: .5pt, dash: none, paint: auto), \n              tick: (stroke: .5pt)),\n    legend: (stroke: none, orientation:ttb, item: (spacing: .3), scale: 80%),\n  )\n\n  plot.plot(size: (16, 9),  legend: \"south\",{\n    for j in range(1, names.len()) {\n      plot.add(series(j), label: names.at(j))\n    }\n  })\n})\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/e/e8ea9444951830acfa2b25b1798303b6ac16af28.png\" alt=\"image\" data-base62-sha1=\"xetm79SI0rq7PHfOeYhWNHhrP5e\" width=\"517\" height=\"335\"></p>\n<p>My question is,<br>\nIs it possible to have a predefined palette for A B C that would not change if plotted another time( another source)?<br>\nHow to plot dates in the x axis instead of integers?</p>",
      "raw": "Hello,\nMy code is :\n```typ \n#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n// Load CSV and separate first row from others\n//mock data:\n#let (names, ..data) = csv.decode(```\nDate,A,B,C\n2023-01-01,1,2,3\n2023-01-02,2,3,4\n2023-01-03,1,2,6\n2023-01-04,2,1,8\n```.text)\n\n// Hack: use TOML parser to parse date strings\n#let dates = data.map(x => toml.decode(\"date = \" + x.first()).date)\n\n// Each x value is the number of days since the first row date\n#let xs = dates.map(x => (x - dates.first()).days())\n\n// Make an array of (x, y) coordinates for the given column index\n#let series(j) = range(data.len()).map(i => (dates.at(i), float(data.at(i).at(j))))\n\n#canvas({\n  import draw: *\n\n  // Set-up a thin axis style\n  set-style(\n    axes: (   stroke:  (thickness: .5pt, dash: none, paint: auto), \n              tick: (stroke: .5pt)),\n    legend: (stroke: none, orientation:ttb, item: (spacing: .3), scale: 80%),\n  )\n\n  plot.plot(size: (16, 9),  legend: \"south\",{\n    for j in range(1, names.len()) {\n      plot.add(series(j), label: names.at(j))\n    }\n  })\n})\n```\n![image|517x335](upload://xetm79SI0rq7PHfOeYhWNHhrP5e.png)\n\nMy question is, \nIs it possible to have a predefined palette for A B C that would not change if plotted another time( another source)?\nHow to plot dates in the x axis instead of integers?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 1079.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8536,
      "post_number": 2,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2025-02-12T23:34:50.791Z",
      "updated_at": "2025-02-21T22:34:20.460Z",
      "cooked": "<p>Hi, your minimal working example is not working.</p>\n<p>The coordinates for the x-axis are generated incorrectly:<br>\nPanicked with: “Failed to resolve coordinate: (datetime(year: 2023, month: 1, day: 1), 1.0)”</p>\n<p>I get the following data in the series(1) array:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">(datetime (year: 2023, month: 1, day: 1), 1.0),\n(datetime (year: 2023, month: 1, day: 2), 2.0),\n(datetime (year: 2023, month: 1, day: 3), 1.0),\n(datetime (year: 2023, month: 1, day: 4), 2.0),\n</code></pre>\n<p>Please fix your example code.</p>",
      "raw": "Hi, your minimal working example is not working.\n\nThe coordinates for the x-axis are generated incorrectly:\nPanicked with: \"Failed to resolve coordinate: (datetime(year: 2023, month: 1, day: 1), 1.0)\"\n\nI get the following data in the series(1) array:\n```typc\n(datetime (year: 2023, month: 1, day: 1), 1.0),\n(datetime (year: 2023, month: 1, day: 2), 2.0),\n(datetime (year: 2023, month: 1, day: 3), 1.0),\n(datetime (year: 2023, month: 1, day: 4), 2.0),\n```\n\nPlease fix your example code.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 23.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 8564,
      "post_number": 3,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-13T09:52:17.791Z",
      "updated_at": "2025-02-21T22:34:35.149Z",
      "cooked": "<p>Hi, Yes you are right:<br>\nreplace dates by xs  in :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let series(j) = range(data.len()).map(i =&gt; (dates.at(i), float(data.at(i).at(j))))\n</code></pre>",
      "raw": "Hi, Yes you are right:\nreplace dates by xs  in :\n```typ\n#let series(j) = range(data.len()).map(i => (dates.at(i), float(data.at(i).at(j))))\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 12.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8609,
      "post_number": 4,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2025-02-13T17:37:14.681Z",
      "updated_at": "2025-02-21T22:34:54.098Z",
      "cooked": "<p>Sadly that does not help at all.</p>\n<p>It’s the same code as in your first post and still the same error.<br>\nI had to add <code>.day()</code>to the x-coordinates of the data points.</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">plot.add(series(j).map(x =&gt; {(x.at(0).day(), x.at(1))}), label: names.at(j))\n</code></pre>\n<p>If you want to show dates on the x-axis you can set custom x-ticks with a value and a label:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">x-tick-step: none,\nx-ticks: series(1).map(x =&gt; (x.at(0).day(), [#x.at(0).display(\"[month]-[day]\")]))\n</code></pre>\n<p>You can see the result here:<br>\n<a href=\"https://typst.app/project/rhSlsi9fLCvO02kqk9Vj5b\" class=\"onebox\" target=\"_blank\" rel=\"noopener\">https://typst.app/project/rhSlsi9fLCvO02kqk9Vj5b</a></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/0/0ac5b76aa4f075e6e853b5fb17977864b9799904.png\" alt=\"image\" data-base62-sha1=\"1xinzPKDawOmGGNF4AiDqFbChP6\" width=\"625\" height=\"439\"></p>",
      "raw": "Sadly that does not help at all.\n\nIt's the same code as in your first post and still the same error.\nI had to add `.day()`to the x-coordinates of the data points.\n```typc\nplot.add(series(j).map(x => {(x.at(0).day(), x.at(1))}), label: names.at(j))\n```\n\nIf you want to show dates on the x-axis you can set custom x-ticks with a value and a label:\n```typc\nx-tick-step: none,\nx-ticks: series(1).map(x => (x.at(0).day(), [#x.at(0).display(\"[month]-[day]\")]))\n```\n\nYou can see the result here:\nhttps://typst.app/project/rhSlsi9fLCvO02kqk9Vj5b\n\n![image|625x439](upload://1xinzPKDawOmGGNF4AiDqFbChP6.png)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 36,
      "score": 147.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 8645,
      "post_number": 5,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-14T09:55:16.359Z",
      "updated_at": "2025-02-14T09:55:16.359Z",
      "cooked": "<p>Hi, that worked, thank you very much.<br>\nDo you know how to rotate the dates by 90 deg?</p>\n<p>And if possible to change the legend text font size?</p>",
      "raw": "Hi, that worked, thank you very much.\nDo you know how to rotate the dates by 90 deg?\n\nAnd if possible to change the legend text font size?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 16.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    }
  ],
  "scraped_at": "2025-06-10T09:51:42.438914"
}
{
  "topic_metadata": {
    "id": 2794,
    "title": "How to generate pdf with typst syntax using python?",
    "slug": "how-to-generate-pdf-with-typst-syntax-using-python",
    "posts_count": 6,
    "created_at": "2025-02-12T17:56:43.240Z",
    "last_posted_at": "2025-02-13T11:12:52.283Z",
    "views": 293,
    "like_count": 5,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "aarnent",
    "tags": [
      "data-loading"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 563
  },
  "posts": [
    {
      "id": 8525,
      "post_number": 1,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-12T17:56:43.380Z",
      "updated_at": "2025-02-12T19:37:58.639Z",
      "cooked": "<p>Hello,<br>\nI have a typst file on the webapp, it uses a csv file as an argument:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"ABC_lib.typ\": *\n#show: ABC_format\n\n#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n\n\n\n// Load CSV and separate first row from others\n#let (names, ..data) = csv(\"ABC_data.csv\",\nrow-type: array)\n\n//here the rest of the typst code\n</code></pre>\n<p>I want to generate the same PDF file for different Csv files, my idea is to use python to :</p>\n<ol>\n<li>loop over the csv files in python</li>\n<li>feed the template Csv_i</li>\n<li>output a temporary typst file_i</li>\n<li>use subprocess and convert it to PDF_i using typst compile.</li>\n<li>delete the temporary file_i</li>\n<li>repeat</li>\n</ol>\n<p>I know how to do this in latex, but not in typst since it uses scripting, so it this optimal ? can it be done another way ?</p>\n<p>requirements:<br>\nI need to do it locally since I have thousands of CSV files.<br>\nif you noticed i am importing a ABC_lib.typ which contains all the formatting and rules i usually use to generate pdfs, how do I include that file in the python process?</p>",
      "raw": "Hello,\nI have a typst file on the webapp, it uses a csv file as an argument:\n```typ\n#import \"ABC_lib.typ\": *\n#show: ABC_format\n\n#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n\n\n\n// Load CSV and separate first row from others\n#let (names, ..data) = csv(\"ABC_data.csv\",\nrow-type: array)\n\n//here the rest of the typst code\n```\n\nI want to generate the same PDF file for different Csv files, my idea is to use python to : \n1. loop over the csv files in python\n2. feed the template Csv_i\n3. output a temporary typst file_i\n4. use subprocess and convert it to PDF_i using typst compile.\n5. delete the temporary file_i\n6. repeat\n\nI know how to do this in latex, but not in typst since it uses scripting, so it this optimal ? can it be done another way ? \n\nrequirements:\nI need to do it locally since I have thousands of CSV files.\nif you noticed i am importing a ABC_lib.typ which contains all the formatting and rules i usually use to generate pdfs, how do I include that file in the python process?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 1008.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8528,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-12T18:40:29.344Z",
      "updated_at": "2025-02-12T19:12:23.403Z",
      "cooked": "<p>With Typst you can skip step 3 and 5 with the temporary file and use in step 4 with the Typst compile command <a href=\"https://typst.app/docs/reference/foundations/sys\"><code>--input key=value</code></a> to provide the csv file name (and read the data with <code>csv(...)</code>) or provide the csv data directly to your Typst file. Inside the Typst file you can access the argument with <code>sys.inputs.yourkey</code>.</p>\n<p>Edit: The full command you would use in step 4 with the Python subprocess is:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">typst c main.typ --input yourkey=somefilename.csv\n</code></pre>\n<p>With the Typst compile command, <code>#import ABC_lib.typ ...</code> would be automatically used, no additional actions needed.</p>",
      "raw": "With Typst you can skip step 3 and 5 with the temporary file and use in step 4 with the Typst compile command [`--input key=value`](https://typst.app/docs/reference/foundations/sys) to provide the csv file name (and read the data with `csv(...)`) or provide the csv data directly to your Typst file. Inside the Typst file you can access the argument with `sys.inputs.yourkey`.\n\nEdit: The full command you would use in step 4 with the Python subprocess is:\n```typst\ntypst c main.typ --input yourkey=somefilename.csv\n```\nWith the Typst compile command, `#import ABC_lib.typ ...` would be automatically used, no additional actions needed.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 28.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 8529,
      "post_number": 3,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-12T19:29:14.529Z",
      "updated_at": "2025-02-12T19:29:14.529Z",
      "cooked": "<p>Hi, thank you for your response,<br>\nIn the typst file how do I reference the csv file to take the “yourkey=somefilename.csv” as an argument fed to him by the subprocess ?</p>",
      "raw": "Hi, thank you for your response, \nIn the typst file how do I reference the csv file to take the \"yourkey=somefilename.csv\" as an argument fed to him by the subprocess ?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 7.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8530,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-12T19:37:39.792Z",
      "updated_at": "2025-02-12T19:37:39.792Z",
      "cooked": "<p>I think you’ll be interested in the other questions tagged <a class=\"hashtag-cooked\" href=\"/tag/data-loading\" data-type=\"tag\" data-slug=\"data-loading\" data-id=\"86\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>data-loading</span></a> (in fact, I will add that tag to your question after I finish writing this <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\">). Particularly this one, which sounds very close to what you’re trying to do:</p>\n<aside class=\"quote quote-modified\" data-post=\"2\" data-topic=\"417\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/d/9335FF/48.png\" class=\"avatar\">\n    <a href=\"https://forum.typst.app/t/is-there-a-way-to-programmaticaly-generate-documents/417/2\">Is there a way to programmaticaly generate documents?</a> <a class=\"badge-category__wrapper \" href=\"/c/questions/5\"><span data-category-id=\"5\" style=\"--category-badge-color: #F7C000; --category-badge-text-color: #fdfdfd;\" data-drop-close=\"true\" class=\"badge-category \" title=\"Your questions about using Typst and the web app go in this category.\"><span class=\"badge-category__name\">Questions</span></span></a>\n  </div>\n  <blockquote>\n    You can use a similar process to what you already have with jinja templating. In fact, you could even use jinja to create a typst document rather than whatever document format you are using right now (I assume you’re doing HTML then converting to PDF). \nSo, if for example: \n&lt;h1&gt;{{ some_heading }}&lt;/h1&gt;\n&lt;p&gt; Some {{ some_value }} &lt;/p&gt;\n\nYou’d convert that to \n= {{ some_heading }}\nSome {{ some_value }}\n\nand so on. \nYou would then \n\npopulate the template with values,\noutput a temporary typst file\nuse …\n  </blockquote>\n</aside>\n",
      "raw": "I think you'll be interested in the other questions tagged #data-loading (in fact, I will add that tag to your question after I finish writing this :wink:). Particularly this one, which sounds very close to what you're trying to do:\n\nhttps://forum.typst.app/t/is-there-a-way-to-programmaticaly-generate-documents/417/2",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 37,
      "score": 147.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 8566,
      "post_number": 5,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-13T10:08:43.122Z",
      "updated_at": "2025-02-13T10:08:43.122Z",
      "cooked": "<p>Yes, that helped me indeed, but I have hit a road block:<br>\nAs I understand it, i must either feed typst a dictionary of all csv files or one csv file at a time.<br>\nThe optimal way as I see it, is to loop over the files in python, feed them to typst, generate the pdf, but now I have multiple pdf files, I need to merge them into one report :/<br>\nIs there a way around this?</p>",
      "raw": "Yes, that helped me indeed, but I have hit a road block:\nAs I understand it, i must either feed typst a dictionary of all csv files or one csv file at a time.\nThe optimal way as I see it, is to loop over the files in python, feed them to typst, generate the pdf, but now I have multiple pdf files, I need to merge them into one report :/ \nIs there a way around this?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 15.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8571,
      "post_number": 6,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-13T11:12:52.283Z",
      "updated_at": "2025-02-13T11:18:48.218Z",
      "cooked": "<p>You can pass all files as a JSON-object, for example. If you have have a folder <code>csvs/</code>, you can load all of them in python as a json string:</p>\n<pre data-code-wrap=\"python\"><code class=\"lang-python\">import subprocess\nimport glob\nimport os\nimport json\n\nfolder_path = \"csvs\"\n\nfiles = glob.glob(\n    os.path.join(folder_path, \"*.csv\")\n)\n\njson_files = json.dumps(files)\n\nsubprocess.run([\n    \"typst\",\n    \"c\",\n    \"main.typ\",\n    \"--input\",\n    f\"files={json_files}\"\n], capture_output=True, text=True)\n</code></pre>\n<p>and then read it in typst:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let files = json.decode(sys.inputs.files)\n\n#files\n\n\n#for f in files {\n  let data = csv(f)\n  // do what you want with the files\n}\n</code></pre>",
      "raw": "You can pass all files as a JSON-object, for example. If you have have a folder `csvs/`, you can load all of them in python as a json string:\n```python\nimport subprocess\nimport glob\nimport os\nimport json\n\nfolder_path = \"csvs\"\n\nfiles = glob.glob(\n    os.path.join(folder_path, \"*.csv\")\n)\n\njson_files = json.dumps(files)\n\nsubprocess.run([\n    \"typst\",\n    \"c\",\n    \"main.typ\",\n    \"--input\",\n    f\"files={json_files}\"\n], capture_output=True, text=True)\n```\n\nand then read it in typst:\n\n```typst\n#let files = json.decode(sys.inputs.files)\n\n#files\n\n\n#for f in files {\n  let data = csv(f)\n  // do what you want with the files\n}\n```",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 25,
      "score": 205.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 501
    }
  ],
  "scraped_at": "2025-06-10T09:51:41.667040"
}
{
  "topic_metadata": {
    "id": 2803,
    "title": "How can I get inline math output to SVG with 0 margin to be cropped propertly",
    "slug": "how-can-i-get-inline-math-output-to-svg-with-0-margin-to-be-cropped-propertly",
    "posts_count": 4,
    "created_at": "2025-02-13T03:48:24.774Z",
    "last_posted_at": "2025-02-21T22:33:25.032Z",
    "views": 114,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout",
      "math"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 285
  },
  "posts": [
    {
      "id": 8540,
      "post_number": 1,
      "username": "Xiaoduan_Chang",
      "name": "Xiaoduan Chang",
      "created_at": "2025-02-13T03:48:24.928Z",
      "updated_at": "2025-02-21T22:21:43.264Z",
      "cooked": "<p>My sample Typst file is as follows:</p>\n<pre><code class=\"lang-auto\">#set page(width: auto, height: auto, margin: 0pt)\n$union.big_(a in A) X_a$\n</code></pre>\n<p>When compiled using the following command:</p>\n<pre><code class=\"lang-auto\">typst c -f svg test.typ \n</code></pre>\n<p>The resulting svg is cropped too much:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/6/63b817e9e4ac36278dbefef3a84bca4de4ac985d.png\" alt=\"image\" data-base62-sha1=\"ee9GEfWvYGwpJkh4Ns2GOQFHTlP\" width=\"201\" height=\"51\"></p>\n<p>If I change the Typst code so that the math part is displayed on a separate line:</p>\n<pre><code class=\"lang-auto\">#set page(width: auto, height: auto, margin: 0pt)\n$ union.big_(a in A) X_a $\n</code></pre>\n<p>and compile it with the same command, then the output is:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/b/b518b7d835edeec1041b9f65a42fd15799351008.png\" alt=\"image\" data-base62-sha1=\"pQ3nAKvn2fK0CgQzlxIQL82vtDW\" width=\"135\" height=\"72\"></p>\n<p>Is there anyway to make inline math also cropped properly? Though I can manualy change the margin value so that the desired content is not cropped, but this is not practical because the margin value depends on the font size, and I do not want to change the margin value every time I change the font size.</p>",
      "raw": "My sample Typst file is as follows:\n\n```\n#set page(width: auto, height: auto, margin: 0pt)\n$union.big_(a in A) X_a$\n```\n\nWhen compiled using the following command:\n\n```\ntypst c -f svg test.typ \n```\n\nThe resulting svg is cropped too much:\n\n![image|201x51](upload://ee9GEfWvYGwpJkh4Ns2GOQFHTlP.png)\n\nIf I change the Typst code so that the math part is displayed on a separate line:\n\n```\n#set page(width: auto, height: auto, margin: 0pt)\n$ union.big_(a in A) X_a $\n```\n\nand compile it with the same command, then the output is:\n\n![image|135x72](upload://pQ3nAKvn2fK0CgQzlxIQL82vtDW.png)\n\nIs there anyway to make inline math also cropped properly? Though I can manualy change the margin value so that the desired content is not cropped, but this is not practical because the margin value depends on the font size, and I do not want to change the margin value every time I change the font size.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 160.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1187
    },
    {
      "id": 8570,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-02-13T11:06:49.665Z",
      "updated_at": "2025-02-13T11:06:49.665Z",
      "cooked": "<p>Inline math content by default uses “fake” boundaries so that the line spacing in paragraph remains consistent. For cases like yours, where you don’t need that consistency, you can explicitly tell Typst to use the “real” boundaries via the show-set rule</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation: set text(top-edge: \"bounds\", bottom-edge: \"bounds\")\n</code></pre>",
      "raw": "Inline math content by default uses \"fake\" boundaries so that the line spacing in paragraph remains consistent. For cases like yours, where you don't need that consistency, you can explicitly tell Typst to use the \"real\" boundaries via the show-set rule\n\n```typ\n#show math.equation: set text(top-edge: \"bounds\", bottom-edge: \"bounds\")\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 25,
      "score": 40.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 8640,
      "post_number": 3,
      "username": "Xiaoduan_Chang",
      "name": "Xiaoduan Chang",
      "created_at": "2025-02-14T01:50:38.403Z",
      "updated_at": "2025-02-14T01:50:38.403Z",
      "cooked": "<p>Thanks. This perfectly solves my problem!</p>",
      "raw": "Thanks. This perfectly solves my problem!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1187
    },
    {
      "id": 8849,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-21T22:33:25.032Z",
      "updated_at": "2025-02-21T22:33:25.032Z",
      "cooked": "<p>Another solution (that as far as I can tell produces the same result for your example) would be this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ inline(union.big_(a in A) X_a) $\n// or as a show rule:\n#show math.equation.where(block: false): it =&gt; $ inline(#it) $\n</code></pre>\n<p>While Eric’s solution overrides Typst’s default inline height treatment (which allows for regular line spacing), this uses a display equation, but styles the math inside it the same way as inline math.</p>",
      "raw": "Another solution (that as far as I can tell produces the same result for your example) would be this:\n\n```typ\n$ inline(union.big_(a in A) X_a) $\n// or as a show rule:\n#show math.equation.where(block: false): it => $ inline(#it) $\n```\n\nWhile Eric's solution overrides Typst's default inline height treatment (which allows for regular line spacing), this uses a display equation, but styles the math inside it the same way as inline math.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:51:40.745022"
}
{
  "topic_metadata": {
    "id": 2816,
    "title": "How to always have a multiple of four as the number of pages",
    "slug": "how-to-always-have-a-multiple-of-four-as-the-number-of-pages",
    "posts_count": 5,
    "created_at": "2025-02-13T23:05:22.248Z",
    "last_posted_at": "2025-02-15T14:14:41.557Z",
    "views": 109,
    "like_count": 4,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Eric",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 704
  },
  "posts": [
    {
      "id": 8639,
      "post_number": 1,
      "username": "naeya",
      "name": "naeya",
      "created_at": "2025-02-13T23:05:22.420Z",
      "updated_at": "2025-02-13T23:05:22.420Z",
      "cooked": "<p>Hi,<br>\nI’m trying to add blank pages at the end of my document so that the final number of pages always is a multiple of four (I’m making a template to print booklets), and I have a weird issue.<br>\nI tried doing the following:</p>\n<pre><code class=\"lang-auto\">#let template(\n  doc,\n) = {\n  set page(numbering: \"1\")\n\n  doc\n\n  context {\n    let num = counter(page).get().first()\n    while calc.rem(num, 4) != 0 {\n      page()[]\n      num += 1\n    }\n  }\n}\n\n#show: template\n\n#lorem(1000)\n</code></pre>\n<p>It is not working and give weird results. But by trying different things in order to understand  the issue, I realized that adding some content in the context before the loop makes it behave as expected (but with unwanted content added). For example:</p>\n<pre><code class=\"lang-auto\"> #let template(\n  doc,\n) = {\n  set page(numbering: \"1\")\n\n  doc\n\n  context {\n    [some content]\n    let num = counter(page).get().first()\n    while calc.rem(num, 4) != 0 {\n      page()[]\n      num += 1\n    }\n  }\n}\n\n#show: template\n\n#lorem(1000)\n</code></pre>\n<p>I don’t understand the issue here, could someone try to explain it to me ? Am I doing this the wrong way ?<br>\nThanks !</p>",
      "raw": "Hi,\nI'm trying to add blank pages at the end of my document so that the final number of pages always is a multiple of four (I'm making a template to print booklets), and I have a weird issue.\nI tried doing the following:\n```\n#let template(\n  doc,\n) = {\n  set page(numbering: \"1\")\n\n  doc\n\n  context {\n    let num = counter(page).get().first()\n    while calc.rem(num, 4) != 0 {\n      page()[]\n      num += 1\n    }\n  }\n}\n\n#show: template\n\n#lorem(1000)\n```\nIt is not working and give weird results. But by trying different things in order to understand  the issue, I realized that adding some content in the context before the loop makes it behave as expected (but with unwanted content added). For example:\n```\n #let template(\n  doc,\n) = {\n  set page(numbering: \"1\")\n\n  doc\n\n  context {\n    [some content]\n    let num = counter(page).get().first()\n    while calc.rem(num, 4) != 0 {\n      page()[]\n      num += 1\n    }\n  }\n}\n\n#show: template\n\n#lorem(1000)\n```\nI don't understand the issue here, could someone try to explain it to me ? Am I doing this the wrong way ?\nThanks !",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 65.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1193
    },
    {
      "id": 8644,
      "post_number": 2,
      "username": "Electron_Wizard",
      "name": "Electron Wizard",
      "created_at": "2025-02-14T09:00:33.327Z",
      "updated_at": "2025-02-14T09:00:33.327Z",
      "cooked": "<p>Hello,</p>\n<p>Good question and I’m not sure why it wouldn’t work without the content. The web app sometimes paniced, sometimes it didn’t. What you can do is use states:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">\n#let multiple-of = 4\n#let rest-pages = state(\"rest-pages\", 0)\n\n#context {\n  let num = here().position().page\n  let rem = calc.rem(num, multiple-of)\n  if rem != 0 {\n    rest-pages.update(multiple-of - rem)\n  }\n}\n\n#context[\n  #for i in range(rest-pages.final()) [ // or .get() also works\n    #pagebreak()\n  ]\n]\n</code></pre>\n<p>The issue is, that your provided code seems to panic with a <em>could not converge after 5 attempts</em>, meaning the document couldn’t be completed or “reach a stable state”, since probably new pages were added continuously with no sign of stopping.</p>\n<p>I was able to solve it by separating the rest page calculations and the empty page insertion into their own <code>#context</code>. This way the amount of pages is calculated first, and then the pages are inserted.</p>\n<p>It doesn’t look very nice and there are probably cleaner ways, but this works. Hope this helps.</p>",
      "raw": "Hello,\n\nGood question and I'm not sure why it wouldn't work without the content. The web app sometimes paniced, sometimes it didn't. What you can do is use states:\n\n```typst\n\n#let multiple-of = 4\n#let rest-pages = state(\"rest-pages\", 0)\n\n#context {\n  let num = here().position().page\n  let rem = calc.rem(num, multiple-of)\n  if rem != 0 {\n    rest-pages.update(multiple-of - rem)\n  }\n}\n\n#context[\n  #for i in range(rest-pages.final()) [ // or .get() also works\n    #pagebreak()\n  ]\n]\n```\n\nThe issue is, that your provided code seems to panic with a _could not converge after 5 attempts_, meaning the document couldn't be completed or \"reach a stable state\", since probably new pages were added continuously with no sign of stopping.\n\nI was able to solve it by separating the rest page calculations and the empty page insertion into their own `#context`. This way the amount of pages is calculated first, and then the pages are inserted.\n\nIt doesn't look very nice and there are probably cleaner ways, but this works. Hope this helps.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 5.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 997
    },
    {
      "id": 8657,
      "post_number": 3,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-14T12:24:39.816Z",
      "updated_at": "2025-02-14T12:24:39.816Z",
      "cooked": "<p>I think the reason why this happens is because, for some reason, the <code>context</code> block gets placed at the top of the new page, if one gets created. The solution by <a class=\"mention\" href=\"/u/electron_wizard\">@Electron_Wizard</a> provides a good answer, but if you want a solution that avoids using states you can place some <code>metadata</code> in the document (which is not visible), and run your page number calculations relative to the location of said <code>metadata</code>, like so:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let template(\n  doc,\n) = {\n  set page(numbering: \"1\")\n\n  doc\n  \n  [#metadata(\"document end\")&lt;end&gt;]\n  \n  context {\n    let num = counter(page).at(label(\"end\")).first()\n    for _ in range(4 - num) {\n      page[]\n    }\n  }\n}\n</code></pre>",
      "raw": "I think the reason why this happens is because, for some reason, the `context` block gets placed at the top of the new page, if one gets created. The solution by @Electron_Wizard provides a good answer, but if you want a solution that avoids using states you can place some `metadata` in the document (which is not visible), and run your page number calculations relative to the location of said `metadata`, like so:\n```typst\n#let template(\n  doc,\n) = {\n  set page(numbering: \"1\")\n\n  doc\n  \n  [#metadata(\"document end\")<end>]\n  \n  context {\n    let num = counter(page).at(label(\"end\")).first()\n    for _ in range(4 - num) {\n      page[]\n    }\n  }\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 20.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 8681,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-02-14T17:30:38.707Z",
      "updated_at": "2025-02-14T17:31:11.491Z",
      "cooked": "<p>The location in a context block is associated with the first element inside it. This usually makes sense, because when doing something like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">Hello #context rect[#here().position()]\n</code></pre>\n<p>you don’t want the position to be the one right after “Hello”, but instead the position of the rectangle (which is a block and therefore not on the same line).</p>\n<p>In the case here, the first element of the context block is a new page, and the position of the new page is naturally on that page, thus the counter in the original post is off by one. You could probably solve this simply by subtracting one from <code>num</code> initially so that the off-by-one error is compensated, but the other solutions given should also do the trick.</p>\n<hr>\n<p>Two notes on the solution given by <a class=\"mention\" href=\"/u/aarnent\">@aarnent</a>:</p>\n<ul>\n<li>\n<p>The metadata isn’t actually necessary, as it’s enough to just label an empty content block like <code>[#[] &lt;end&gt;]</code></p>\n</li>\n<li>\n<p>The for loop only works like that for documents with up to 4 pages. To fix that, either use a while loop as in the original post, or do some modulus calculation as in</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">for _ in range(calc.rem-euclid(4 - num, 4)) { .. }\n</code></pre>\n</li>\n</ul>",
      "raw": "The location in a context block is associated with the first element inside it. This usually makes sense, because when doing something like\n```typ\nHello #context rect[#here().position()]\n```\nyou don't want the position to be the one right after \"Hello\", but instead the position of the rectangle (which is a block and therefore not on the same line).\n\nIn the case here, the first element of the context block is a new page, and the position of the new page is naturally on that page, thus the counter in the original post is off by one. You could probably solve this simply by subtracting one from `num` initially so that the off-by-one error is compensated, but the other solutions given should also do the trick.\n\n---\n\nTwo notes on the solution given by @aarnent:\n- The metadata isn't actually necessary, as it's enough to just label an empty content block like `[#[] <end>]`\n\n- The for loop only works like that for documents with up to 4 pages. To fix that, either use a while loop as in the original post, or do some modulus calculation as in\n  ```typc\n  for _ in range(calc.rem-euclid(4 - num, 4)) { .. }\n  ```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 23,
      "score": 49.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 8710,
      "post_number": 5,
      "username": "naeya",
      "name": "naeya",
      "created_at": "2025-02-15T14:14:41.557Z",
      "updated_at": "2025-02-15T14:14:41.557Z",
      "cooked": "<p>Thanks for all those replies ! I ended up with :</p>\n<pre><code class=\"lang-auto\">  [#[] &lt;end&gt;]\n  context {\n    let num = counter(page).at(label(\"end\")).first()\n    for _ in range(calc.rem-euclid(4 - num, 4)) {\n      page[]\n    }\n  }\n</code></pre>\n<p>Which seems to work. <img src=\"https://forum.typst.app/images/emoji/apple/blush.png?v=12\" title=\":blush:\" class=\"emoji\" alt=\":blush:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nI don’t know which answer to mark as solution, so I’ll mark the last one.<br>\nThanks again to everyone !</p>",
      "raw": "Thanks for all those replies ! I ended up with :\n```\n  [#[] <end>]\n  context {\n    let num = counter(page).at(label(\"end\")).first()\n    for _ in range(calc.rem-euclid(4 - num, 4)) {\n      page[]\n    }\n  }\n```\nWhich seems to work. :blush:\nI don't know which answer to mark as solution, so I'll mark the last one.\nThanks again to everyone !",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 44.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1193
    }
  ],
  "scraped_at": "2025-06-10T09:51:40.008533"
}
{
  "topic_metadata": {
    "id": 2820,
    "title": "How to rotate x-axis labels, make legend font smaller and change its position with CETZ",
    "slug": "how-to-rotate-x-axis-labels-make-legend-font-smaller-and-change-its-position-with-cetz",
    "posts_count": 4,
    "created_at": "2025-02-14T10:41:34.491Z",
    "last_posted_at": "2025-03-18T12:51:56.749Z",
    "views": 238,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "ash",
    "tags": [
      "graphics",
      "cetz"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 374
  },
  "posts": [
    {
      "id": 8648,
      "post_number": 1,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-14T10:41:34.693Z",
      "updated_at": "2025-02-14T10:50:28.163Z",
      "cooked": "<p>Hi everyone,<br>\nI would like to ask you how to rotate labels on an axis, and make the legend smaller and control its position:</p>\n<p>My working example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n#let (names, ..data) = csv.decode(```\nDate,A,B,C\n2023-01-01,1,2,3\n2023-01-02,2,3,4\n2023-01-03,1,2,6\n2023-01-04,2,1,8\n```.text)\n\n// Hack: use TOML parser to parse date strings\n#let dates = data.map(x =&gt; toml.decode(\"date = \" + x.first()).date)\n\n// Each x value is the number of days since the first row date\n#let xs = dates.map(x =&gt; (x - dates.first()).days())\n\n// Make an array of (x, y) coordinates for the given column index\n#let series(j) = range(data.len()).map(i =&gt; (dates.at(i), float(data.at(i).at(j))))\n\n#canvas({\n  import draw: *\n\n  // Set-up a thin axis style\n  set-style(\n    axes: (stroke:  (thickness: .5pt, dash: none, paint: auto), \n              tick: (stroke: .5pt)),\n    label:(angle:90), //this did not work!\n    legend: (stroke: none, orientation:ttb, item: (spacing: .3), scale: 80%),\n  )\n\n  plot.plot(size: (16, 9), x-tick-step: none, x-ticks: series(1).map(x =&gt; (x.at(0).day(), [#x.at(0).display(\"[month]-[day]\")])),\n  legend: \"south\",{\n    for j in range(1, names.len()) {\n      plot.add(series(j).map(x =&gt; {(x.at(0).day(), x.at(1))}), label: names.at(j))\n    }\n  })\n})\n\n</code></pre>\n<p>Results:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/7/7877c7075f3d43ea33703b65120871cf2590d557.png\" data-download-href=\"https://forum.typst.app/uploads/default/7877c7075f3d43ea33703b65120871cf2590d557\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/7/7877c7075f3d43ea33703b65120871cf2590d557_2_345x231.png\" alt=\"image\" data-base62-sha1=\"hbHUWBctFG1pLJ76jENFi9P1hxd\" width=\"345\" height=\"231\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/7/7877c7075f3d43ea33703b65120871cf2590d557_2_345x231.png, https://forum.typst.app/uploads/default/optimized/2X/7/7877c7075f3d43ea33703b65120871cf2590d557_2_517x346.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/7/7877c7075f3d43ea33703b65120871cf2590d557_2_690x462.png 2x\" data-dominant-color=\"FCFDFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">834×559 24.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>desired results:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/0/0492068ae6e8f91149c7e315f397eef18b59a583.png\" data-download-href=\"https://forum.typst.app/uploads/default/0492068ae6e8f91149c7e315f397eef18b59a583\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/0/0492068ae6e8f91149c7e315f397eef18b59a583_2_690x376.png\" alt=\"image\" data-base62-sha1=\"EqLCWjs8rFmY1VfyPL9Fy198xt\" width=\"690\" height=\"376\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/0/0492068ae6e8f91149c7e315f397eef18b59a583_2_690x376.png, https://forum.typst.app/uploads/default/original/2X/0/0492068ae6e8f91149c7e315f397eef18b59a583.png 1.5x, https://forum.typst.app/uploads/default/original/2X/0/0492068ae6e8f91149c7e315f397eef18b59a583.png 2x\" data-dominant-color=\"FCFCFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1024×559 34.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hi everyone,\nI would like to ask you how to rotate labels on an axis, and make the legend smaller and control its position:\n\nMy working example:\n\n```typ\n#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n#let (names, ..data) = csv.decode(```\nDate,A,B,C\n2023-01-01,1,2,3\n2023-01-02,2,3,4\n2023-01-03,1,2,6\n2023-01-04,2,1,8\n```.text)\n\n// Hack: use TOML parser to parse date strings\n#let dates = data.map(x => toml.decode(\"date = \" + x.first()).date)\n\n// Each x value is the number of days since the first row date\n#let xs = dates.map(x => (x - dates.first()).days())\n\n// Make an array of (x, y) coordinates for the given column index\n#let series(j) = range(data.len()).map(i => (dates.at(i), float(data.at(i).at(j))))\n\n#canvas({\n  import draw: *\n\n  // Set-up a thin axis style\n  set-style(\n    axes: (stroke:  (thickness: .5pt, dash: none, paint: auto), \n              tick: (stroke: .5pt)),\n    label:(angle:90), //this did not work!\n    legend: (stroke: none, orientation:ttb, item: (spacing: .3), scale: 80%),\n  )\n\n  plot.plot(size: (16, 9), x-tick-step: none, x-ticks: series(1).map(x => (x.at(0).day(), [#x.at(0).display(\"[month]-[day]\")])),\n  legend: \"south\",{\n    for j in range(1, names.len()) {\n      plot.add(series(j).map(x => {(x.at(0).day(), x.at(1))}), label: names.at(j))\n    }\n  })\n})\n\n```\n\nResults:\n![image|690x462, 50%](upload://hbHUWBctFG1pLJ76jENFi9P1hxd.png)\n\ndesired results:\n![image|690x376](upload://EqLCWjs8rFmY1VfyPL9Fy198xt.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 952.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8649,
      "post_number": 2,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-14T10:50:14.868Z",
      "updated_at": "2025-02-14T10:50:14.868Z",
      "cooked": "<p>Also how to limit the number of ticks shown on the x axis;<br>\nThis is what my x axis looks like:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/2005bc4e7baf15f7d3e03681d47eebb24fbe4120.png\" data-download-href=\"https://forum.typst.app/uploads/default/2005bc4e7baf15f7d3e03681d47eebb24fbe4120\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/2005bc4e7baf15f7d3e03681d47eebb24fbe4120_2_690x185.png\" alt=\"image\" data-base62-sha1=\"4zhzbk3IpOcks57ylt55Ozih57y\" width=\"690\" height=\"185\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/2005bc4e7baf15f7d3e03681d47eebb24fbe4120_2_690x185.png, https://forum.typst.app/uploads/default/original/2X/2/2005bc4e7baf15f7d3e03681d47eebb24fbe4120.png 1.5x, https://forum.typst.app/uploads/default/original/2X/2/2005bc4e7baf15f7d3e03681d47eebb24fbe4120.png 2x\" data-dominant-color=\"EFECEE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">798×214 26.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>So rotating it by 45 to 90 deg and limiting how many get printed will solve the problem.</p>\n<p>please and thank you</p>",
      "raw": "Also how to limit the number of ticks shown on the x axis;\nThis is what my x axis looks like:\n\n![image|690x185](upload://4zhzbk3IpOcks57ylt55Ozih57y.png)\n\nSo rotating it by 45 to 90 deg and limiting how many get printed will solve the problem.\n\nplease and thank you",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 27.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8697,
      "post_number": 3,
      "username": "ash",
      "name": "",
      "created_at": "2025-02-15T05:56:12.836Z",
      "updated_at": "2025-02-15T05:56:12.836Z",
      "cooked": "<p>Try this to rotate the x-axis tick labels:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">set-style(axes: (bottom: (\n    tick: ( label: (angle: 90deg, anchor: \"east\") )\n)))\n</code></pre>\n<p>And you can use a coordinate to put the legend: <code>legend: (18, -1)</code>.</p>",
      "raw": "Try this to rotate the x-axis tick labels:\n```typ\nset-style(axes: (bottom: (\n    tick: ( label: (angle: 90deg, anchor: \"east\") )\n)))\n```\n\nAnd you can use a coordinate to put the legend: `legend: (18, -1)`.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 32,
      "score": 71.4,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1199
    },
    {
      "id": 9952,
      "post_number": 4,
      "username": "rikh",
      "name": "Rik Huijzer",
      "created_at": "2025-03-18T12:51:56.749Z",
      "updated_at": "2025-03-18T12:52:40.217Z",
      "cooked": "<p>With <code>cetz-plot:0.1.1</code>, that doesn’t work anymore. But removing the <code>bottom</code> part does:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">set-style(axes: (\n    tick: (label: (angle: 90deg, anchor: \"east\"))\n))\n</code></pre>\n<p>Based on <a href=\"https://github.com/cetz-package/cetz-plot/blob/master/gallery/line.typ\" rel=\"noopener nofollow ugc\">https://github.com/cetz-package/cetz-plot/blob/master/gallery/line.typ</a>.</p>",
      "raw": "With `cetz-plot:0.1.1`, that doesn't work anymore. But removing the `bottom` part does:\n\n```typ\nset-style(axes: (\n    tick: (label: (angle: 90deg, anchor: \"east\"))\n))\n```\n\nBased on <https://github.com/cetz-package/cetz-plot/blob/master/gallery/line.typ>.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 14.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1350
    }
  ],
  "scraped_at": "2025-06-10T09:51:39.243436"
}
{
  "topic_metadata": {
    "id": 2821,
    "title": "How to get the current heading numbering format?",
    "slug": "how-to-get-the-current-heading-numbering-format",
    "posts_count": 10,
    "created_at": "2025-02-14T11:21:10.690Z",
    "last_posted_at": "2025-02-14T13:27:51.625Z",
    "views": 256,
    "like_count": 3,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "aarnent",
    "tags": [
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 474
  },
  "posts": [
    {
      "id": 8652,
      "post_number": 1,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-14T11:21:11.037Z",
      "updated_at": "2025-02-14T11:21:11.037Z",
      "cooked": "<p>I know that you can get the current page numbering format using <code>#context here().page-numbering()</code>.</p>\n<p>However, I would like the same thing, but for headings, i.e., the last format that was passed to <code>#set heading(numbering: ...)</code>.</p>\n<p>Is there a simple solution that does not involve storing this format in a <code>state()</code>?</p>",
      "raw": "I know that you can get the current page numbering format using `#context here().page-numbering()`.\n\nHowever, I would like the same thing, but for headings, i.e., the last format that was passed to `#set heading(numbering: ...)`.\n\nIs there a simple solution that does not involve storing this format in a `state()`?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 1193.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8654,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-14T11:43:26.544Z",
      "updated_at": "2025-02-14T11:43:26.544Z",
      "cooked": "<p>Does <code>#context heading.numbering</code> work?</p>",
      "raw": "Does `#context heading.numbering` work?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 41,
      "score": 33.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 8655,
      "post_number": 3,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-14T11:54:02.399Z",
      "updated_at": "2025-02-14T11:54:02.399Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"aarnent\" data-post=\"2\" data-topic=\"2821\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/a/0A3649/48.png\" class=\"avatar\"> aarnent:</div>\n<blockquote>\n<p><a class=\"hashtag-cooked\" href=\"/tag/context\" data-type=\"tag\" data-slug=\"context\" data-id=\"61\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>context</span></a> heading.numbering</p>\n</blockquote>\n</aside>\n<p>Yes it works, and apparently <code>#context page.numbering</code> also works! Thank you!</p>\n<p>But then what is the point of the <code>#context here().page-numbering()</code> function?</p>",
      "raw": "[quote=\"aarnent, post:2, topic:2821\"]\n#context heading.numbering\n[/quote]\n\nYes it works, and apparently `#context page.numbering` also works! Thank you!\n\nBut then what is the point of the `#context here().page-numbering()` function?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 41,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8656,
      "post_number": 4,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-14T12:01:02.642Z",
      "updated_at": "2025-02-14T12:01:02.642Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"talb\" data-post=\"3\" data-topic=\"2821\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/talb/48/463_2.png\" class=\"avatar\"> talb:</div>\n<blockquote>\n<p>But then what is the point of the <code>#context here().page-numbering()</code> function?</p>\n</blockquote>\n</aside>\n<p>I’ll be honest, I have no idea. Maybe it’s something that has been kept as a feature for sake of backwards compatibility, but that’s just a guess. Maybe someone else more knowledgable can chime in.</p>",
      "raw": "[quote=\"talb, post:3, topic:2821\"]\nBut then what is the point of the `#context here().page-numbering()` function?\n[/quote]\n\nI'll be honest, I have no idea. Maybe it's something that has been kept as a feature for sake of backwards compatibility, but that's just a guess. Maybe someone else more knowledgable can chime in.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 40,
      "score": 12.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 8660,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-14T12:44:20.027Z",
      "updated_at": "2025-02-14T12:44:20.027Z",
      "cooked": "<p><code>page-numbering()</code> is a method on the location type, maybe it’s redundant for the <code>here()</code> location but as the doc says:</p>\n<blockquote>\n<p>This is useful if you are building custom indices or outlines.</p>\n</blockquote>\n<p>If you’re making an index or outline, you need to use the page numbering of the location of the target, while <code>context page.numbering</code> would give the numbering of the pages where the index is shown.</p>",
      "raw": "`page-numbering()` is a method on the location type, maybe it's redundant for the `here()` location but as the doc says:\n\n> This is useful if you are building custom indices or outlines.\n\nIf you're making an index or outline, you need to use the page numbering of the location of the target, while `context page.numbering` would give the numbering of the pages where the index is shown.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 27.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8661,
      "post_number": 6,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-14T12:46:12.725Z",
      "updated_at": "2025-02-14T12:46:12.725Z",
      "cooked": "<p>It makes sense, thank you!</p>",
      "raw": "It makes sense, thank you!",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 21.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8663,
      "post_number": 7,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-14T12:50:03.850Z",
      "updated_at": "2025-02-14T12:50:03.850Z",
      "cooked": "<p>But wouldn’t it also be interesting to access the heading numbering from a location? If you want to recreate an outline() for instance, you want to access the numbering of the heading in the outline, not the current numbering.</p>\n<p>What I want to ask is, are there some use cases where we need a <code>location.heading-numbering()</code> function?</p>",
      "raw": "But wouldn't it also be interesting to access the heading numbering from a location? If you want to recreate an outline() for instance, you want to access the numbering of the heading in the outline, not the current numbering.\n\nWhat I want to ask is, are there some use cases where we need a `location.heading-numbering()` function?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 16.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8664,
      "post_number": 8,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-14T12:54:24.461Z",
      "updated_at": "2025-02-14T12:58:29.159Z",
      "cooked": "<p>When you get the headings to build e.g. a special outline, for example with <code>context query(heading)</code>, you get a list of <code>heading</code> elements and you can simply find their numbering with <code>elem.numbering</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= A\n\n#set heading(numbering: \"1.\")\n\n= B\n\n#context query(heading).map(elem =&gt; elem.numbering)\n</code></pre>\n<p>Here the last line will return <code>(none, \"1.\")</code>.</p>\n<p>Now you may ask: what if the index must show the heading number of the section where each word is found? You can get the heading counter with <code>counter(heading).at(location)</code> but indeed I’m not sure how you would get the correct numbering. Maybe with <code>query(heading).before(location).last()</code>…</p>",
      "raw": "When you get the headings to build e.g. a special outline, for example with `context query(heading)`, you get a list of `heading` elements and you can simply find their numbering with `elem.numbering`:\n\n```typ\n= A\n\n#set heading(numbering: \"1.\")\n\n= B\n\n#context query(heading).map(elem => elem.numbering)\n```\n\nHere the last line will return `(none, \"1.\")`.\n\nNow you may ask: what if the index must show the heading number of the section where each word is found? You can get the heading counter with `counter(heading).at(location)` but indeed I'm not sure how you would get the correct numbering. Maybe with `query(heading).before(location).last()`...",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 11.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8665,
      "post_number": 9,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-14T13:21:31.188Z",
      "updated_at": "2025-02-14T13:21:31.188Z",
      "cooked": "<p>And you can’t do the same thing with pages because <code>page</code> is not locatable, right?</p>",
      "raw": "And you can't do the same thing with pages because `page` is not locatable, right?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 10.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8666,
      "post_number": 10,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-14T13:27:51.625Z",
      "updated_at": "2025-02-14T13:27:51.625Z",
      "cooked": "<p>Yes, and also because you’re not working with pages anyway, but with things that have a location on a page.</p>\n<p>I guess Typst could have done this a bit differently, allowing you to get a page element for each word and then get the numbering from that page, but that’s not how it works (pages are not elements that you can inspect).</p>",
      "raw": "Yes, and also because you're not working with pages anyway, but with things that have a location on a page.\n\nI guess Typst could have done this a bit differently, allowing you to get a page element for each word and then get the numbering from that page, but that's not how it works (pages are not elements that you can inspect).",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 5.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:51:38.469229"
}
{
  "topic_metadata": {
    "id": 2827,
    "title": "How can we filter an array or dictionary based on an if condition",
    "slug": "how-can-we-filter-an-array-or-dictionary-based-on-an-if-condition",
    "posts_count": 2,
    "created_at": "2025-02-14T18:02:49.831Z",
    "last_posted_at": "2025-02-14T18:30:38.228Z",
    "views": 149,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 301
  },
  "posts": [
    {
      "id": 8682,
      "post_number": 1,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-14T18:02:49.974Z",
      "updated_at": "2025-02-14T18:02:49.974Z",
      "cooked": "<p>Hello every one:<br>\nLet’s Suppose we have a dictionary:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let indexed_dates= (\n  (0.0, \"2023-01-01\"),\n  (1.0, \"2023-01-02\"),\n  (2.0, \"2023-01-03\"),\n  (3.0, \"2023-01-04\"),\n  (4.0, \"2023-01-05\"),\n  (5.0, \"2023-01-06\"),\n  (7.0, \"2023-01-08\"),\n  (8.0, \"2023-01-09\"),\n  (9.0, \"2023-01-10\"),\n  (10.0, \"2023-01-11\"))\n</code></pre>\n<p>I want to select just the dates where the index is a multiple of 5,<br>\nCan we filter like this ? (I know we can’t because it doesn’t run haha :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\"> indexed_dates = indexed_dates.map(x=&gt; x if x.at(0)/5==0)\n</code></pre>\n<p>Thank you !</p>",
      "raw": "Hello every one:\nLet's Suppose we have a dictionary:\n\n```typ\n#let indexed_dates= (\n  (0.0, \"2023-01-01\"),\n  (1.0, \"2023-01-02\"),\n  (2.0, \"2023-01-03\"),\n  (3.0, \"2023-01-04\"),\n  (4.0, \"2023-01-05\"),\n  (5.0, \"2023-01-06\"),\n  (7.0, \"2023-01-08\"),\n  (8.0, \"2023-01-09\"),\n  (9.0, \"2023-01-10\"),\n  (10.0, \"2023-01-11\"))\n```\nI want to select just the dates where the index is a multiple of 5, \nCan we filter like this ? (I know we can't because it doesn't run haha : \n```typ\n indexed_dates = indexed_dates.map(x=> x if x.at(0)/5==0)\n```\n\nThank you !",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 576.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8684,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-14T18:30:38.228Z",
      "updated_at": "2025-02-14T18:30:38.228Z",
      "cooked": "<p>In your example it’s actually an array. You can filter it with <code>filter</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let indexed_dates= (\n  (0.0, \"2023-01-01\"),\n  (1.0, \"2023-01-02\"),\n  (2.0, \"2023-01-03\"),\n  (3.0, \"2023-01-04\"),\n  (4.0, \"2023-01-05\"),\n  (5.0, \"2023-01-06\"),\n  (5.0, \"2023-01-07\"),\n  (7.0, \"2023-01-08\"),\n  (8.0, \"2023-01-09\"),\n  (9.0, \"2023-01-10\"),\n  (10.0, \"2023-01-11\"))\n\n#indexed_dates.filter(x =&gt; calc.rem(x.first(), 5) == 0)\n</code></pre>\n<p>If you had just the dates in the array you could use <code>enumerate</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let dates = (\"2023-01-01\", \"2023-01-02\", \"2023-01-03\", \"2023-01-04\", \"2023-01-05\", \"2023-01-06\", \"2023-01-07\", \"2023-01-08\", \"2023-01-09\", \"2023-01-10\", \"2023-01-11\")\n\n#dates.enumerate().filter(x =&gt; calc.rem(x.first(), 5) == 0)\n</code></pre>\n<p>You can also be clever and destructure the index and value in the anonymous function parameter (though I find it less readable in this case):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#dates.enumerate().filter(((i, x)) =&gt; calc.rem(i, 5) == 0)\n</code></pre>\n<p>For dictionaries, you can call <code>keys()</code> or <code>values()</code> or <code>pairs()</code> and then call <code>filter()</code> on the result.</p>",
      "raw": "In your example it's actually an array. You can filter it with `filter`:\n\n```typ\n#let indexed_dates= (\n  (0.0, \"2023-01-01\"),\n  (1.0, \"2023-01-02\"),\n  (2.0, \"2023-01-03\"),\n  (3.0, \"2023-01-04\"),\n  (4.0, \"2023-01-05\"),\n  (5.0, \"2023-01-06\"),\n  (5.0, \"2023-01-07\"),\n  (7.0, \"2023-01-08\"),\n  (8.0, \"2023-01-09\"),\n  (9.0, \"2023-01-10\"),\n  (10.0, \"2023-01-11\"))\n\n#indexed_dates.filter(x => calc.rem(x.first(), 5) == 0)\n```\n\nIf you had just the dates in the array you could use `enumerate`:\n\n```typ\n#let dates = (\"2023-01-01\", \"2023-01-02\", \"2023-01-03\", \"2023-01-04\", \"2023-01-05\", \"2023-01-06\", \"2023-01-07\", \"2023-01-08\", \"2023-01-09\", \"2023-01-10\", \"2023-01-11\")\n\n#dates.enumerate().filter(x => calc.rem(x.first(), 5) == 0)\n```\n\nYou can also be clever and destructure the index and value in the anonymous function parameter (though I find it less readable in this case):\n\n```typ\n#dates.enumerate().filter(((i, x)) => calc.rem(i, 5) == 0)\n```\n\nFor dictionaries, you can call `keys()` or `values()` or `pairs()` and then call `filter()` on the result.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 31,
      "score": 46.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:51:37.508650"
}
{
  "topic_metadata": {
    "id": 2829,
    "title": "How can I create a tag list for a CV?",
    "slug": "how-can-i-create-a-tag-list-for-a-cv",
    "posts_count": 5,
    "created_at": "2025-02-14T20:04:23.447Z",
    "last_posted_at": "2025-02-17T03:05:01.014Z",
    "views": 163,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "ParaN3xus",
    "tags": [
      "scripting",
      "layout",
      "tables"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 281
  },
  "posts": [
    {
      "id": 8691,
      "post_number": 1,
      "username": "rafael",
      "name": "rafael",
      "created_at": "2025-02-14T20:04:23.582Z",
      "updated_at": "2025-02-16T13:21:45.686Z",
      "cooked": "<p>I’m trying to make a nice-looking tag list, such as this one:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let tag(body) = {\n  set text(black)\n  highlight(fill: none, radius: 25%, extent: 3pt, stroke: 0.4pt + black, [#body])\n}\n\n#let grid_list(..items) = {\n  grid(\n    columns: 20,\n    fill: none,\n    inset: 5pt,\n    ..items\n  )\n}\n\n#(\ngrid_list(\n  [#tag(\"a\")], [#tag(\"b\")], [#tag(\"c\")], [#tag(\"d\")],\n  [#tag(\"e\")], [#tag(\"f\")], [#tag(\"g\")], [#tag(\"h\")]\n  )\n)\n</code></pre>\n<p>It’s nice, looks great, but if the tag text gets too long, it breaks and looks strange. Is there a nicer way to do this?<br>\nIt’s the first time i dabble with typst let alone typst functions, so please don’t mind if this is pretty nooby.</p>",
      "raw": "I'm trying to make a nice-looking tag list, such as this one:\n\n```typst\n#let tag(body) = {\n  set text(black)\n  highlight(fill: none, radius: 25%, extent: 3pt, stroke: 0.4pt + black, [#body])\n}\n\n#let grid_list(..items) = {\n  grid(\n    columns: 20,\n    fill: none,\n    inset: 5pt,\n    ..items\n  )\n}\n\n#(\ngrid_list(\n  [#tag(\"a\")], [#tag(\"b\")], [#tag(\"c\")], [#tag(\"d\")],\n  [#tag(\"e\")], [#tag(\"f\")], [#tag(\"g\")], [#tag(\"h\")]\n  )\n)\n```\n\nIt's nice, looks great, but if the tag text gets too long, it breaks and looks strange. Is there a nicer way to do this?\nIt's the first time i dabble with typst let alone typst functions, so please don't mind if this is pretty nooby.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 108.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1197
    },
    {
      "id": 8695,
      "post_number": 2,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2025-02-15T02:37:54.816Z",
      "updated_at": "2025-02-15T02:37:54.816Z",
      "cooked": "<p>You can use a simple <code>block</code> wrapping tags as boxes to allow it breaks to the next line as a whole.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let tag(body) = {\n  box(block(highlight(fill: none, radius: 25%, extent: 3pt, stroke: 0.4pt + black, [#body]), breakable: false))\n}\n\n#let grid_list(..items) = {\n  block(items.pos().join(h(0.8em)))\n}\n\n#(\n  grid_list(\n    [#tag(\"a\")],\n    [#tag(\"b\")],\n    [#tag(\"c\")],\n    [#tag(\"d\")],\n    [#tag(\"e\")],\n    [#tag(\"f dfsdf\")],\n    [#tag(\"ghhhhhhhhhhhhhh ddddddddd dddddddddd dhh dddddddddddd\")],\n    [#tag(\"hsss ssss sss ssssssssssssssssssssssssssssss\")],\n  )\n)\n</code></pre>",
      "raw": "You can use a simple `block` wrapping tags as boxes to allow it breaks to the next line as a whole.\n```typ\n#let tag(body) = {\n  box(block(highlight(fill: none, radius: 25%, extent: 3pt, stroke: 0.4pt + black, [#body]), breakable: false))\n}\n\n#let grid_list(..items) = {\n  block(items.pos().join(h(0.8em)))\n}\n\n#(\n  grid_list(\n    [#tag(\"a\")],\n    [#tag(\"b\")],\n    [#tag(\"c\")],\n    [#tag(\"d\")],\n    [#tag(\"e\")],\n    [#tag(\"f dfsdf\")],\n    [#tag(\"ghhhhhhhhhhhhhh ddddddddd dddddddddd dhh dddddddddddd\")],\n    [#tag(\"hsss ssss sss ssssssssssssssssssssssssssssss\")],\n  )\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 35,
      "score": 57.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 8698,
      "post_number": 3,
      "username": "rafael",
      "name": "rafael",
      "created_at": "2025-02-15T08:02:47.653Z",
      "updated_at": "2025-02-15T08:02:47.653Z",
      "cooked": "<p>That works nicely! Thanks :)</p>",
      "raw": "That works nicely! Thanks :)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 6.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1197
    },
    {
      "id": 8732,
      "post_number": 4,
      "username": "rafael",
      "name": "rafael",
      "created_at": "2025-02-16T11:15:54.626Z",
      "updated_at": "2025-02-16T11:15:54.626Z",
      "cooked": "<p>Though now I notice, the outline of the first tag item is horizontally before the start of the line, because the text is aligned with the line of course. With the grid, that was not the case. What’s the best way to line them up? I tried putting it in a grid or joining a h(), but failed</p>",
      "raw": "Though now I notice, the outline of the first tag item is horizontally before the start of the line, because the text is aligned with the line of course. With the grid, that was not the case. What's the best way to line them up? I tried putting it in a grid or joining a h(), but failed",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 11.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1197
    },
    {
      "id": 8738,
      "post_number": 5,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2025-02-17T03:05:01.014Z",
      "updated_at": "2025-02-17T03:05:01.014Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let tag(body) = {\n  box(\n    block(\n      box(\n        radius: 25%,\n        stroke: 0.4pt + black,\n        inset: 3pt,\n        body,\n      ),\n      breakable: false,\n    ),\n  )\n}\n\n#let grid_list(..items) = {\n  block(items.pos().join(h(0.2em)))\n}\n</code></pre>\n<p>Use <code>inset</code> of <code>box</code></p>",
      "raw": "```typ\n#let tag(body) = {\n  box(\n    block(\n      box(\n        radius: 25%,\n        stroke: 0.4pt + black,\n        inset: 3pt,\n        body,\n      ),\n      breakable: false,\n    ),\n  )\n}\n\n#let grid_list(..items) = {\n  block(items.pos().join(h(0.2em)))\n}\n```\nUse `inset` of `box`",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 4.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 14
    }
  ],
  "scraped_at": "2025-06-10T09:51:36.629446"
}
{
  "topic_metadata": {
    "id": 2836,
    "title": "Best method to create shorthand for isotopes?",
    "slug": "best-method-to-create-shorthand-for-isotopes",
    "posts_count": 4,
    "created_at": "2025-02-15T09:45:23.052Z",
    "last_posted_at": "2025-02-17T08:30:56.350Z",
    "views": 138,
    "like_count": 5,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Mathemensch",
    "tags": [
      "packages",
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 314
  },
  "posts": [
    {
      "id": 8701,
      "post_number": 1,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-02-15T09:45:23.199Z",
      "updated_at": "2025-03-07T15:39:13.690Z",
      "cooked": "<p>I’m a stable isotope geochemist with years of LaTeX experience and I’m just tipping my toes in Typst. The documents I write are often filled with <em>many</em> occurrences of isotopic notations, combining greek letters, subscripts and superscripts in weird positions.</p>\n<p>I am aware that the <code>physica</code> package lets me type something like <code>isotope(\"Bi\",a:211,z:83)</code>, but I am looking for an way to create shorthands for the isotopic expressions that I will be using over and over again in the same document. I’m thinking of something like <code>#C13</code> which would render globally as <code>#super[13]C</code> or <code>#d18O</code> for <code>δ#super[18]O</code>.</p>\n<p>Is something like this possible? Am I missing an obvious, better solution? Thanks for any tips.</p>",
      "raw": "I'm a stable isotope geochemist with years of LaTeX experience and I'm just tipping my toes in Typst. The documents I write are often filled with *many* occurrences of isotopic notations, combining greek letters, subscripts and superscripts in weird positions.\n\nI am aware that the `physica` package lets me type something like `isotope(\"Bi\",a:211,z:83)`, but I am looking for an way to create shorthands for the isotopic expressions that I will be using over and over again in the same document. I'm thinking of something like `#C13` which would render globally as `#super[13]C` or `#d18O` for `δ#super[18]O`.\n\nIs something like this possible? Am I missing an obvious, better solution? Thanks for any tips.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 187.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 8705,
      "post_number": 2,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2025-02-15T12:14:59.373Z",
      "updated_at": "2025-02-15T16:42:58.753Z",
      "cooked": "<p>Hi,</p>\n<p>you can definitely define custom commands for often used isotopes.</p>\n<p>It’s quite simple:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/physica:0.9.4\": isotope\n\n#let C13 = isotope(\"C\", a:\"13\")\n\n#C13\n</code></pre>\n<p>You could even use a show rule to replace normal text with the isotope notation:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show \"C13\": isotope(\"C\", a:\"13\")\n\nThis is an C13 isotope.\n</code></pre>\n<p>which results in:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/4/4b2b11df79c26975eef45a72e343eec4bae9ab00.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/4b2b11df79c26975eef45a72e343eec4bae9ab00\" title=\"IMG_4586\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/4/4b2b11df79c26975eef45a72e343eec4bae9ab00_2_690x184.jpeg\" alt=\"IMG_4586\" data-base62-sha1=\"aIY5oc52kzCrTgSToE2eJvUpW00\" width=\"690\" height=\"184\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/4/4b2b11df79c26975eef45a72e343eec4bae9ab00_2_690x184.jpeg, https://forum.typst.app/uploads/default/original/2X/4/4b2b11df79c26975eef45a72e343eec4bae9ab00.jpeg 1.5x, https://forum.typst.app/uploads/default/original/2X/4/4b2b11df79c26975eef45a72e343eec4bae9ab00.jpeg 2x\" data-dominant-color=\"F2F2F2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">IMG_4586</span><span class=\"informations\">968×259 29.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I guess that’s the easiest way to accomplish isotope notation while writing your notes.</p>",
      "raw": "Hi,\n\nyou can definitely define custom commands for often used isotopes.\n\nIt's quite simple:\n```typ \n#import \"@preview/physica:0.9.4\": isotope\n\n#let C13 = isotope(\"C\", a:\"13\")\n\n#C13\n```\n\nYou could even use a show rule to replace normal text with the isotope notation:\n```typ\n#show \"C13\": isotope(\"C\", a:\"13\")\n\nThis is an C13 isotope.\n```\n\nwhich results in:\n![IMG_4586|690x184](upload://aIY5oc52kzCrTgSToE2eJvUpW00.jpeg)\n\nI guess that’s the easiest way to accomplish isotope notation while writing your notes.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 40,
      "score": 52.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 8715,
      "post_number": 3,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-15T17:57:02.761Z",
      "updated_at": "2025-02-15T17:57:02.761Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Mathemensch\" data-post=\"2\" data-topic=\"2836\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/mathemensch/48/286_2.png\" class=\"avatar\"> Mathemensch:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">#show \"C13\": isotope(\"C\", a:\"13\")\n\nThis is an C13 isotope.\n</code></pre>\n</blockquote>\n</aside>\n<p>To make sure you match only whole words you can use a regular expression (otherwise the show rule will also match text in words like “AC13A”):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show regex(\"\\bC13\\b\"): isotope(\"C\", a:\"13\")\n</code></pre>",
      "raw": "[quote=\"Mathemensch, post:2, topic:2836\"]\n```\n#show \"C13\": isotope(\"C\", a:\"13\")\n\nThis is an C13 isotope.\n```\n[/quote]\n\nTo make sure you match only whole words you can use a regular expression (otherwise the show rule will also match text in words like \"AC13A\"):\n\n```typ\n#show regex(\"\\bC13\\b\"): isotope(\"C\", a:\"13\")\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 2,
      "reads": 38,
      "score": 77.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8743,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-17T08:30:56.350Z",
      "updated_at": "2025-02-17T08:30:56.350Z",
      "cooked": "<p>There is also <a href=\"https://typst.app/universe/package/chem-par/\">chem-par</a> which works “out-of-the-box”.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/chem-par:0.0.1\": *\n\n#set page(width: 30em, height: auto, margin: 1em)\n#show: chem-style\n\nThe oxidation of n-butanol with K2Cr2O7 requires acidification with H2SO4 to yield butanoic acid. N,N-dimethyltryptamine.\n</code></pre>\n<p><a class=\"mention\" href=\"/u/james\">@James</a></p>",
      "raw": "There is also [chem-par](https://typst.app/universe/package/chem-par/) which works \"out-of-the-box\".\n\n```typ\n#import \"@preview/chem-par:0.0.1\": *\n\n#set page(width: 30em, height: auto, margin: 1em)\n#show: chem-style\n\nThe oxidation of n-butanol with K2Cr2O7 requires acidification with H2SO4 to yield butanoic acid. N,N-dimethyltryptamine.\n```\n\n@James",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 30.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:51:35.679775"
}
{
  "topic_metadata": {
    "id": 2837,
    "title": "Why is Typst Preview working, while typst compile fails?",
    "slug": "why-is-typst-preview-working-while-typst-compile-fails",
    "posts_count": 9,
    "created_at": "2025-02-15T10:04:56.713Z",
    "last_posted_at": "2025-02-23T15:22:29.946Z",
    "views": 490,
    "like_count": 0,
    "reply_count": 8,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "tooling",
      "tinymist",
      "typst-preview"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 735
  },
  "posts": [
    {
      "id": 8702,
      "post_number": 1,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-15T10:04:56.898Z",
      "updated_at": "2025-02-21T22:44:19.184Z",
      "cooked": "<p>Hi,</p>\n<p>I’m using neovim (AstroNvim) for Typst, <a href=\"https://github.com/AstroNvim/astrocommunity/tree/main/lua/astrocommunity/pack/typst\" rel=\"noopener nofollow ugc\">Typst Language Pack</a>. It works, my preview looks like I expect. When I try to generate a PDF from the same typ file, I get an error:</p>\n<pre><code class=\"lang-auto\">master ~/spaces/text/wei&gt; typst compile the-hundred-squares-ru.typ hunnerd.pdf\nerror: entry does not have field \"page\"\n   ┌─ robinson-toc.typ:67:48\n   │\n67 │         #subcnt #box(width: 1fr, repeat[.]) #it.page\n   │                                                 ^^^^\n\nexit 1\nmaster ~/spaces/text/wei&gt;\n</code></pre>\n<p>I understand that my info is insufficient; what data should I supply? Nevertheless, it looks like the CLI <code>typst</code> lacks some environment that the Preview has. What could that be?</p>",
      "raw": "Hi,\n\nI'm using neovim (AstroNvim) for Typst, [Typst Language Pack](https://github.com/AstroNvim/astrocommunity/tree/main/lua/astrocommunity/pack/typst). It works, my preview looks like I expect. When I try to generate a PDF from the same typ file, I get an error:\n```\nmaster ~/spaces/text/wei> typst compile the-hundred-squares-ru.typ hunnerd.pdf\nerror: entry does not have field \"page\"\n   ┌─ robinson-toc.typ:67:48\n   │\n67 │         #subcnt #box(width: 1fr, repeat[.]) #it.page\n   │                                                 ^^^^\n\nexit 1\nmaster ~/spaces/text/wei>\n```\nI understand that my info is insufficient; what data should I supply? Nevertheless, it looks like the CLI `typst` lacks some environment that the Preview has. What could that be?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 55,
      "score": 2081.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    },
    {
      "id": 8707,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-02-15T13:02:04.992Z",
      "updated_at": "2025-02-15T13:02:04.992Z",
      "cooked": "<p>I assume the offending code is part of a show rule for an outline entry.</p>\n<p>As the field <code>it.page</code> has been replaced with a function <code>it.page()</code> starting with Typst v0.13, it seems to me that you have the 0.13 release candidate installed. This version of Typst is then used when you run <code>typst compile</code>, whereas typst-preview likely ships its own compiler, which still uses version 0.12.</p>",
      "raw": "I assume the offending code is part of a show rule for an outline entry.\n\nAs the field `it.page` has been replaced with a function `it.page()` starting with Typst v0.13, it seems to me that you have the 0.13 release candidate installed. This version of Typst is then used when you run `typst compile`, whereas typst-preview likely ships its own compiler, which still uses version 0.12.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 15.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 8709,
      "post_number": 3,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-15T13:57:48.285Z",
      "updated_at": "2025-02-15T13:59:02.689Z",
      "cooked": "<p>Exactly! I downgraded <code>typst</code> with</p>\n<pre><code class=\"lang-auto\">cargo binstall typst-cli --force\n</code></pre>\n<p>and the error’s gone. Now it’s</p>\n<pre><code class=\"lang-auto\">~&gt; typst --version\ntypst 0.12.0 (737895d7)\n~&gt;\n</code></pre>\n<p>Release on GitHub <a href=\"https://github.com/typst/typst/releases/tag/v0.12.0\" rel=\"noopener nofollow ugc\"> <code>737895d</code></a>. So I shouldn’t use any release candidate in a normal workflow.</p>\n<p>Besides, can I be sure that the <code>tinymist</code> language server uses the same version of the language?</p>",
      "raw": "Exactly! I downgraded `typst` with\n```\ncargo binstall typst-cli --force\n```\nand the error's gone. Now it's\n```\n~> typst --version\ntypst 0.12.0 (737895d7)\n~>\n```\nRelease on GitHub [ `737895d`](https://github.com/typst/typst/releases/tag/v0.12.0). So I shouldn't use any release candidate in a normal workflow.\n\nBesides, can I be sure that the `tinymist` language server uses the same version of the language?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 25.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    },
    {
      "id": 8850,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-21T22:46:49.237Z",
      "updated_at": "2025-02-21T22:46:49.237Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Llama\" data-post=\"3\" data-topic=\"2837\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/llama/48/1951_2.png\" class=\"avatar\"> Llama:</div>\n<blockquote>\n<p>can I be sure that the <code>tinymist</code> language server uses the same version of the language?</p>\n</blockquote>\n</aside>\n<p>Tinymist uses even patch releases (e.g. 0.12.18) for regular releases – this would be equivalent to Typst 0.12 – and odd releases (e.g. 0.12.21) for pre-releases – this specific one uses 0.13 (or a Typst commit very close to it) but isn’t considered stable enough for Tinymist 0.13.0 yet.</p>\n<p>So while Tinymist (necessarily) uses a fork of the Typst compiler to support its features, using a stable (even) release ensures you’re using the released version of Typst.</p>\n<hr>\n<p>btw, I updated the title to bring it in line with the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a>:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>I also added tags, as it makes your question easier to find.</p>\n<p>Finally, if Eric’s response answered your initial question, marking it with a checkmark <img src=\"https://forum.typst.app/images/emoji/apple/ballot_box_with_check.png?v=12\" title=\":ballot_box_with_check:\" class=\"emoji\" alt=\":ballot_box_with_check:\" loading=\"lazy\" width=\"20\" height=\"20\"> would help others find the answer more easily. Cheers! <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "[quote=\"Llama, post:3, topic:2837\"]\ncan I be sure that the `tinymist` language server uses the same version of the language?\n[/quote]\n\nTinymist uses even patch releases (e.g. 0.12.18) for regular releases -- this would be equivalent to Typst 0.12 -- and odd releases (e.g. 0.12.21) for pre-releases -- this specific one uses 0.13 (or a Typst commit very close to it) but isn't considered stable enough for Tinymist 0.13.0 yet.\n\nSo while Tinymist (necessarily) uses a fork of the Typst compiler to support its features, using a stable (even) release ensures you're using the released version of Typst.\n\n---\n\nbtw, I updated the title to bring it in line with the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11):\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nI also added tags, as it makes your question easier to find.\n\nFinally, if Eric's response answered your initial question, marking it with a checkmark :ballot_box_with_check: would help others find the answer more easily. Cheers! :slight_smile:",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 43,
      "score": 13.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 8851,
      "post_number": 5,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-21T22:56:15.989Z",
      "updated_at": "2025-02-21T22:58:01.894Z",
      "cooked": "<p>Right now Typst 0.13.0 is released, Tinymist and Typs Preview updated (?), to what versions I’m not sure, and not working any more. That is, I have gray space instead of preview while <code>typst compile</code> works (with breaking changes corrected).</p>\n<p>The other way around <img src=\"https://forum.typst.app/images/emoji/apple/blush.png?v=12\" title=\":blush:\" class=\"emoji\" alt=\":blush:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Right now Typst 0.13.0 is released, Tinymist and Typs Preview updated (?), to what versions I'm not sure, and not working any more. That is, I have gray space instead of preview while `typst compile` works (with breaking changes corrected).\n\nThe other way around :blush:",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 13.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    },
    {
      "id": 8853,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-21T23:01:58.606Z",
      "updated_at": "2025-02-21T23:01:58.606Z",
      "cooked": "<p>I’m on Tinymist 0.12.21 (latest VS Code extension) and compiling and preview works fine, so we’d need more details to figure this out.</p>",
      "raw": "I'm on Tinymist 0.12.21 (latest VS Code extension) and compiling and preview works fine, so we'd need more details to figure this out.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 12.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 8854,
      "post_number": 7,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-21T23:13:41.293Z",
      "updated_at": "2025-02-21T23:42:48.653Z",
      "cooked": "<p>My <code>typst-cli</code>:</p>\n<pre><code class=\"lang-auto\">~&gt; typst --version\ntypst 0.13.0 (8dce676d)\n</code></pre>\n<p>Tinymist 0.12.20, which may be critical, if I understand you correctly. So far it refuses to update, and for good reason, apparently. The latest release is still 0.12.20: <a href=\"https://github.com/Myriad-Dreamin/tinymist\" rel=\"noopener nofollow ugc\">Tinymist</a></p>\n<p>I use AstroNvim <a href=\"https://github.com/AstroNvim/astrocommunity/tree/main/lua/astrocommunity/pack/typst\" rel=\"noopener nofollow ugc\">pack</a></p>\n<p>UPD</p>\n<p>Just tried VScodium, Tinymist plugin. Exactly the same situation: gray preview, <em>and</em> Tinymist version 0.12.20.</p>\n<p>UPD2</p>\n<p>Oh, <em>pre-release</em> 0.12.21, sixteen hours ago <img src=\"https://forum.typst.app/images/emoji/apple/blush.png?v=12\" title=\":blush:\" class=\"emoji\" alt=\":blush:\" loading=\"lazy\" width=\"20\" height=\"20\"> . Probably, I just have to wait a bit… Or do I have to wait for 0.12.22?</p>",
      "raw": "My `typst-cli`:\n```\n~> typst --version\ntypst 0.13.0 (8dce676d)\n```\nTinymist 0.12.20, which may be critical, if I understand you correctly. So far it refuses to update, and for good reason, apparently. The latest release is still 0.12.20: [Tinymist](https://github.com/Myriad-Dreamin/tinymist)\n\nI use AstroNvim [pack](https://github.com/AstroNvim/astrocommunity/tree/main/lua/astrocommunity/pack/typst)\n\nUPD\n\nJust tried VScodium, Tinymist plugin. Exactly the same situation: gray preview, _and_ Tinymist version 0.12.20.\n\nUPD2\n\nOh, _pre-release_ 0.12.21, sixteen hours ago :blush: . Probably, I just have to wait a bit... Or do I have to wait for 0.12.22?",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 27.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    },
    {
      "id": 8857,
      "post_number": 8,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-22T07:27:58.334Z",
      "updated_at": "2025-02-22T07:27:58.334Z",
      "cooked": "<p>On even patches, tinymist 0.x is equivalent to Typst 0.x. So if your goal is working with 0.13 and tinymist is still on 0.12,you <em>definitely</em> want an odd patch version.</p>\n<p>There was also 0.12.19, you can try to “downgrade” to that if 0.12.21 is not ready yet for your editor.</p>",
      "raw": "On even patches, tinymist 0.x is equivalent to Typst 0.x. So if your goal is working with 0.13 and tinymist is still on 0.12,you _definitely_ want an odd patch version.\n\nThere was also 0.12.19, you can try to \"downgrade\" to that if 0.12.21 is not ready yet for your editor.",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 52.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 8920,
      "post_number": 9,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-23T15:22:29.946Z",
      "updated_at": "2025-02-23T15:35:37.851Z",
      "cooked": "<p>My latest news <img src=\"https://forum.typst.app/images/emoji/apple/grin.png?v=12\" title=\":grin:\" class=\"emoji\" alt=\":grin:\" loading=\"lazy\" width=\"20\" height=\"20\"> :</p>\n<ol>\n<li>The long term Tinymist release is <a href=\"https://github.com/Myriad-Dreamin/tinymist/releases\" rel=\"noopener nofollow ugc\">there</a> and installable.</li>\n<li>With it I can see the preview, but no forward/inverse search for me. Is there anything to check?</li>\n</ol>\n<p>UPD</p>\n<p>With VSCodium forward/inverse search is working. Neovim problem :(</p>",
      "raw": "My latest news :grin: :\n\n1. The long term Tinymist release is [there](https://github.com/Myriad-Dreamin/tinymist/releases) and installable.\n2. With it I can see the preview, but no forward/inverse search for me. Is there anything to check?\n\nUPD\n\nWith VSCodium forward/inverse search is working. Neovim problem :(",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 10.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    }
  ],
  "scraped_at": "2025-06-10T09:51:34.938734"
}
{
  "topic_metadata": {
    "id": 2839,
    "title": "Is it possible to have the equations shown aligned left with an indentation?",
    "slug": "is-it-possible-to-have-the-equations-shown-aligned-left-with-an-indentation",
    "posts_count": 3,
    "created_at": "2025-02-15T11:40:06.312Z",
    "last_posted_at": "2025-02-15T14:50:02.475Z",
    "views": 129,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout",
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 148
  },
  "posts": [
    {
      "id": 8704,
      "post_number": 1,
      "username": "Staffan_Chr",
      "name": "Staffan Christoffersson",
      "created_at": "2025-02-15T11:40:06.513Z",
      "updated_at": "2025-02-16T13:22:05.495Z",
      "cooked": "<p>With the following one will get the equation to left.<br>\n<span class=\"hashtag-raw\">#show</span> math.equation: set align(left)</p>\n<p>text<br>\n$ a = b +c $<br>\ntext</p>\n<p>But how give the equation an indentation?</p>",
      "raw": "With the following one will get the equation to left.\n#show math.equation: set align(left)\n\ntext\n$ a = b +c $\ntext\n\nBut how give the equation an indentation?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 340.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1202
    },
    {
      "id": 8706,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-02-15T12:53:42.284Z",
      "updated_at": "2025-02-15T12:53:57.317Z",
      "cooked": "<p>You can simply wrap equations in a <a href=\"https://typst.app/docs/reference/layout/pad/\"><code>pad</code></a> element using a show rule. I would also recommend only applying the show-set rule to block equations as otherwise, inline equations might be put in a new paragraph when the surrounding paragraph isn’t already left-aligned.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation.where(block: true): pad.with(left: 1cm)\n#show math.equation.where(block: true): set align(left)\n</code></pre>\n<hr>\n<p><em>On an unrelated note, please try to keep questions in the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category and check out the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">“How to post questions?”</a> post for a guide on proper formatting.</em></p>",
      "raw": "You can simply wrap equations in a [`pad`](https://typst.app/docs/reference/layout/pad/) element using a show rule. I would also recommend only applying the show-set rule to block equations as otherwise, inline equations might be put in a new paragraph when the surrounding paragraph isn't already left-aligned.\n\n```typ\n#show math.equation.where(block: true): pad.with(left: 1cm)\n#show math.equation.where(block: true): set align(left)\n```\n\n---\n\n_On an unrelated note, please try to keep questions in the #questions category and check out the [\"How to post questions?\"](https://forum.typst.app/t/how-to-post-in-the-questions-category/11?u=eric) post for a guide on proper formatting._",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 25.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 8711,
      "post_number": 3,
      "username": "Staffan_Chr",
      "name": "Staffan Christoffersson",
      "created_at": "2025-02-15T14:50:02.475Z",
      "updated_at": "2025-02-15T14:50:02.475Z",
      "cooked": "<p>Thanks, much appreciated.</p>",
      "raw": "Thanks, much appreciated.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 5.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1202
    }
  ],
  "scraped_at": "2025-06-10T09:51:33.427251"
}
{
  "topic_metadata": {
    "id": 2841,
    "title": "Use something like math.attach() in text mode?",
    "slug": "use-something-like-math-attach-in-text-mode",
    "posts_count": 4,
    "created_at": "2025-02-15T15:10:39.864Z",
    "last_posted_at": "2025-02-15T19:01:40.912Z",
    "views": 62,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 442
  },
  "posts": [
    {
      "id": 8712,
      "post_number": 1,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-02-15T15:10:39.967Z",
      "updated_at": "2025-02-21T22:48:02.257Z",
      "cooked": "<p>LaTeX lets you do crazy things like placing superscripts and subscripts on both sides of something, applying arbitrary text styles to the different parts of the expression, e.g.:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/e/ef0edcad1051ce4c955bae1978f34cd95c0cdad8.png\" alt=\"Screenshot 2025-02-15 at 16.01.26\" data-base62-sha1=\"y6NXljPXxoOztaUuIUTAqagYhpC\" width=\"301\" height=\"136\"></p>\n<p>When I try to do something similar using <code>#attach()</code> in Typst, I can’t apply any text styles, apparently because of how Typst implements math styles.</p>\n<p>Is there a way to attach <strong>text</strong> blocks all around another block while remaining in text mode? In geochemistry one would like to typeset things like this:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/0/0c34e9e021410104083736f4da7923f55d8b8f84.png\" data-download-href=\"https://forum.typst.app/uploads/default/0c34e9e021410104083736f4da7923f55d8b8f84\" title=\"Screenshot 2025-02-15 at 16.07.56\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/0/0c34e9e021410104083736f4da7923f55d8b8f84_2_345x133.png\" alt=\"Screenshot 2025-02-15 at 16.07.56\" data-base62-sha1=\"1JZ5YN0OWeUx8ycyPsceIbOyRRG\" width=\"345\" height=\"133\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/0/0c34e9e021410104083736f4da7923f55d8b8f84_2_345x133.png, https://forum.typst.app/uploads/default/optimized/2X/0/0c34e9e021410104083736f4da7923f55d8b8f84_2_517x199.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/0/0c34e9e021410104083736f4da7923f55d8b8f84_2_690x266.png 2x\" data-dominant-color=\"E3E3E3\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-02-15 at 16.07.56</span><span class=\"informations\">702×272 31.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>In other words, is there a way to duplicate <code>#attach()</code> in text mode?</p>",
      "raw": "LaTeX lets you do crazy things like placing superscripts and subscripts on both sides of something, applying arbitrary text styles to the different parts of the expression, e.g.:\n\n![Screenshot 2025-02-15 at 16.01.26|602x272, 50%](upload://y6NXljPXxoOztaUuIUTAqagYhpC.png)\n\nWhen I try to do something similar using `#attach()` in Typst, I can't apply any text styles, apparently because of how Typst implements math styles.\n\nIs there a way to attach **text** blocks all around another block while remaining in text mode? In geochemistry one would like to typeset things like this:\n\n![Screenshot 2025-02-15 at 16.07.56|690x267, 50%](upload://1JZ5YN0OWeUx8ycyPsceIbOyRRG.png)\n\nIn other words, is there a way to duplicate `#attach()` in text mode?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 120.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 8714,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-15T16:26:49.982Z",
      "updated_at": "2025-02-15T16:27:21.404Z",
      "cooked": "<p>The current situation is not ideal and will probably change in the future. One of the difficulties is that it’s often not clear what should be typeset with a math font (which can include seperate glyphs for upright, italic, sans serif…) and what should be typeset with the text font (which can look different from the upright math font).</p>\n<p>Anyway currently, to use the characters from the math font you can do this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$\n  attach(\n    upright(O),\n    tl: sans(\"xyz\"),\n    bl: upright(\"abc\"),\n    tr: italic(\"sample\"),\n    br: upright(\"VSMOW\"),\n  )\n$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/b/b542c2c16c1cf4f40941c1c57850e59d2160c082.png\" alt=\"image\" data-base62-sha1=\"pRvsivD8a31iSNcbZnAy7MpwOPg\" width=\"108\" height=\"38\"></p>\n<p>And to use the text font (and the monospace font for sans serif), as described in <a href=\"https://github.com/typst/typst/issues/366\" rel=\"noopener nofollow ugc\">this issue on GitHub</a> you can define a helper function to include normal text elements in math mode:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let mtext = text.with(font: \"Libertinus Serif\")\n\n$\n  attach(\n    upright(O),\n    tl: #`xyz`,\n    bl: #mtext[abc],\n    tr: #mtext[_sample_],\n    br: #mtext[VSMOW],\n  )\n$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/75f4631b64977a0f2cf0f7576213f4b0490ac09b.png\" alt=\"image\" data-base62-sha1=\"gPtsAlsr7DzqVw0KVgWB4HtpKrN\" width=\"107\" height=\"34\"></p>\n<p>Note a related change in Typts 0.13 (the next release): single letter words written in double quotes (for example <code>\"a\"</code>) will be typeset with the upright math instead of italic math font, i.e. single letter words will be treated the same as multi-letter words.</p>",
      "raw": "The current situation is not ideal and will probably change in the future. One of the difficulties is that it's often not clear what should be typeset with a math font (which can include seperate glyphs for upright, italic, sans serif...) and what should be typeset with the text font (which can look different from the upright math font).\n\nAnyway currently, to use the characters from the math font you can do this:\n\n```typ\n$\n  attach(\n    upright(O),\n    tl: sans(\"xyz\"),\n    bl: upright(\"abc\"),\n    tr: italic(\"sample\"),\n    br: upright(\"VSMOW\"),\n  )\n$\n```\n\n![image|216x76, 50%](upload://pRvsivD8a31iSNcbZnAy7MpwOPg.png)\n\nAnd to use the text font (and the monospace font for sans serif), as described in [this issue on GitHub](https://github.com/typst/typst/issues/366) you can define a helper function to include normal text elements in math mode:\n\n```typ\n#let mtext = text.with(font: \"Libertinus Serif\")\n\n$\n  attach(\n    upright(O),\n    tl: #`xyz`,\n    bl: #mtext[abc],\n    tr: #mtext[_sample_],\n    br: #mtext[VSMOW],\n  )\n$\n```\n![image|214x68, 50%](upload://gPtsAlsr7DzqVw0KVgWB4HtpKrN.png)\n\nNote a related change in Typts 0.13 (the next release): single letter words written in double quotes (for example `\"a\"`) will be typeset with the upright math instead of italic math font, i.e. single letter words will be treated the same as multi-letter words.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 55.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8716,
      "post_number": 3,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-02-15T18:34:13.826Z",
      "updated_at": "2025-02-15T18:34:13.826Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"sijo\" data-post=\"2\" data-topic=\"2841\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/0A3649/48.png\" class=\"avatar\"> sijo:</div>\n<blockquote>\n<p>And to use the text font (and the monospace font for sans serif), as described in <a href=\"https://github.com/typst/typst/issues/366\" rel=\"noopener nofollow ugc\">this issue on GitHub</a> you can define a helper function to include normal text elements in math mode:</p>\n</blockquote>\n</aside>\n<p>Thanks, that sounds great. Is there a way to define the text font (here: <code>Libertinus Serif</code>) dynamically (by introspection), defining it as whatever is used in the current document/context?</p>",
      "raw": "[quote=\"sijo, post:2, topic:2841\"]\nAnd to use the text font (and the monospace font for sans serif), as described in [this issue on GitHub](https://github.com/typst/typst/issues/366) you can define a helper function to include normal text elements in math mode:\n[/quote]\n\nThanks, that sounds great. Is there a way to define the text font (here: `Libertinus Serif`) dynamically (by introspection), defining it as whatever is used in the current document/context?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 8719,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-15T19:01:40.912Z",
      "updated_at": "2025-02-15T19:01:40.912Z",
      "cooked": "<p>Maybe like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// Do the following wherever you want to capture the current font\n#context state(\"font\").update(text.font)\n\n#let mtext(it) = context text(font: state(\"font\").get(), it)\n</code></pre>",
      "raw": "Maybe like this:\n\n```typ\n// Do the following wherever you want to capture the current font\n#context state(\"font\").update(text.font)\n\n#let mtext(it) = context text(font: state(\"font\").get(), it)\n```",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:51:32.729455"
}
{
  "topic_metadata": {
    "id": 2843,
    "title": "What is hash before brackets (#[ ])?",
    "slug": "what-is-hash-before-brackets",
    "posts_count": 3,
    "created_at": "2025-02-15T18:52:57.806Z",
    "last_posted_at": "2025-02-15T19:18:01.441Z",
    "views": 78,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 137
  },
  "posts": [
    {
      "id": 8717,
      "post_number": 1,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-15T18:52:58.010Z",
      "updated_at": "2025-02-15T18:52:58.010Z",
      "cooked": "<p>Hi,</p>\n<p>From the docs:</p>\n<pre><code class=\"lang-auto\">This list is affected: #[\n  #set list(marker: [--])\n  - Dash\n]\n\nThis one is not:\n- Bullet\n</code></pre>\n<p>Hash means <em>Code</em>, brackets mean <em>Markup</em>. The combination isn’t intuitive. What does it mean?</p>",
      "raw": "Hi,\n\nFrom the docs:\n```\nThis list is affected: #[\n  #set list(marker: [--])\n  - Dash\n]\n\nThis one is not:\n- Bullet\n```\nHash means _Code_, brackets mean _Markup_. The combination isn't intuitive. What does it mean?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 53.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    },
    {
      "id": 8720,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-15T19:05:50.804Z",
      "updated_at": "2025-02-15T19:06:26.446Z",
      "cooked": "<p>When you are in markup, hash means code, and when you are in code, brackets mean markup.</p>\n<p>So when you are in markup, <code>#[ ... ]</code> switches to code and then immediately switches back to markup. Why would you do this? Because <code>[ ... ]</code> also creates a scope for the markup (just like <code>{ ... }</code> creates a scope for the code). So <code>#[ ... ]</code> is used in markup to write markup with a limited scope. In this example, the <code>#set list(...)</code> will only affect the next markup line, the rest is out of scope.</p>",
      "raw": "When you are in markup, hash means code, and when you are in code, brackets mean markup.\n\nSo when you are in markup, `#[ ... ]` switches to code and then immediately switches back to markup. Why would you do this? Because `[ ... ]` also creates a scope for the markup (just like `{ ... }` creates a scope for the code). So `#[ ... ]` is used in markup to write markup with a limited scope. In this example, the `#set list(...)` will only affect the next markup line, the rest is out of scope.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 36,
      "score": 27.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8721,
      "post_number": 3,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-15T19:18:01.441Z",
      "updated_at": "2025-02-15T19:29:23.946Z",
      "cooked": "<p>Thanks! The trick is necessary because without hash I’ll get just literal brackets, and not an invisible scope <img src=\"https://forum.typst.app/images/emoji/apple/blush.png?v=12\" title=\":blush:\" class=\"emoji\" alt=\":blush:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Thanks! The trick is necessary because without hash I'll get just literal brackets, and not an invisible scope :blush:",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 36,
      "score": 22.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    }
  ],
  "scraped_at": "2025-06-10T09:51:32.018452"
}
{
  "topic_metadata": {
    "id": 2844,
    "title": "How to import variables from a Python file?",
    "slug": "how-to-import-variables-from-a-python-file",
    "posts_count": 3,
    "created_at": "2025-02-15T18:58:26.312Z",
    "last_posted_at": "2025-02-21T22:56:32.429Z",
    "views": 143,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 252
  },
  "posts": [
    {
      "id": 8718,
      "post_number": 1,
      "username": "Mathieu",
      "name": "Mathieu",
      "created_at": "2025-02-15T18:58:26.417Z",
      "updated_at": "2025-03-03T15:42:09.346Z",
      "cooked": "<p>Say I have a file <code>foo.py</code> with the following contents:</p>\n<pre><code class=\"lang-auto\">a = 1\nb = 2\nc = 'xyz'\n</code></pre>\n<p>Is there a way to “import” these variables in my document dynamically? I’d like to avoid going through json or another intermediate format if possible.</p>",
      "raw": "Say I have a file `foo.py` with the following contents:\n\n```\na = 1\nb = 2\nc = 'xyz'\n```\n\nIs there a way to \"import\" these variables in my document dynamically? I'd like to avoid going through json or another intermediate format if possible.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 321.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1200
    },
    {
      "id": 8729,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-16T09:24:30.177Z",
      "updated_at": "2025-02-16T09:24:52.703Z",
      "cooked": "<p>If the source file is so simple you could parse it as TOML data:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#toml(\"a.py\")\n</code></pre>\n<p>or write your own parser:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let load-vars(file) = {\n  let source = read(file)\n  let vars = (:)\n  for line in source.split(\"\\n\") {\n    let assignment = line.match(regex(\"^\\s*(.*?)\\s*=\\s*(.*?)\\s*$\"))\n    if assignment != none {\n      vars.insert(..assignment.captures)\n    }\n  }\n  return vars\n}\n\n#load-vars(\"a.py\")\n</code></pre>\n<p>For more complex cases the pyrunner package might do the job:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/pyrunner:0.2.0\" as py\n\n// Equivalent to #let source = read(\"a.py\")\n#let source = ```\na = 1\nb = 2\nc = 'xyz'\n```.text\n\n#py.block(source + \"\\na\")\n\n#py.block(source + \"\\nb\")\n\n#py.block(source + \"\\nc\")\n</code></pre>\n<p>but see the package documentation for limitations (in particular you can’t run Python code that uses third-party packages).</p>",
      "raw": "If the source file is so simple you could parse it as TOML data:\n\n```typ\n#toml(\"a.py\")\n```\n\nor write your own parser:\n\n```typ\n#let load-vars(file) = {\n  let source = read(file)\n  let vars = (:)\n  for line in source.split(\"\\n\") {\n    let assignment = line.match(regex(\"^\\s*(.*?)\\s*=\\s*(.*?)\\s*$\"))\n    if assignment != none {\n      vars.insert(..assignment.captures)\n    }\n  }\n  return vars\n}\n\n#load-vars(\"a.py\")\n```\n\nFor more complex cases the pyrunner package might do the job:\n\n```typ\n#import \"@preview/pyrunner:0.2.0\" as py\n\n// Equivalent to #let source = read(\"a.py\")\n#let source = ```\na = 1\nb = 2\nc = 'xyz'\n```.text\n\n#py.block(source + \"\\na\")\n\n#py.block(source + \"\\nb\")\n\n#py.block(source + \"\\nc\")\n```\n\nbut see the package documentation for limitations (in particular you can't run Python code that uses third-party packages).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 29,
      "score": 45.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8852,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-21T22:56:32.429Z",
      "updated_at": "2025-02-21T22:56:32.429Z",
      "cooked": "<p>This is more Python than Typst, but the following can give you all the variables from the current module, which may be useful:</p>\n<pre data-code-wrap=\"py\"><code class=\"lang-py\">{k: v for k, v in globals().items() if not k.startswith('__')}\n</code></pre>\n<p>applied to your example, you’ll get</p>\n<pre data-code-wrap=\"py\"><code class=\"lang-py\">{'a': 1, 'b': 2, 'c': 'xyz'}\n</code></pre>\n<p>I think the easiest way from there would still be converting that to JSON (or another Typst readable format), but there are probably other paths open as well.</p>",
      "raw": "This is more Python than Typst, but the following can give you all the variables from the current module, which may be useful:\n```py\n{k: v for k, v in globals().items() if not k.startswith('__')}\n```\napplied to your example, you'll get\n```py\n{'a': 1, 'b': 2, 'c': 'xyz'}\n```\nI think the easiest way from there would still be converting that to JSON (or another Typst readable format), but there are probably other paths open as well.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:51:31.308425"
}
{
  "topic_metadata": {
    "id": 2845,
    "title": "What is the significance of paragraphs no longer being blocks?",
    "slug": "what-is-the-significance-of-paragraphs-no-longer-being-blocks",
    "posts_count": 2,
    "created_at": "2025-02-15T20:13:53.195Z",
    "last_posted_at": "2025-02-16T09:53:24.793Z",
    "views": 172,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "layout",
      "v0-13"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 246
  },
  "posts": [
    {
      "id": 8722,
      "post_number": 1,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-15T20:13:53.347Z",
      "updated_at": "2025-02-22T08:42:42.968Z",
      "cooked": "<p>Hi,</p>\n<p>Paragraphs are no longer blocks, they say. So <code>tinymist</code> made me change</p>\n<pre><code class=\"lang-auto\">#show par: set block(spacing: 0.65em)\n</code></pre>\n<p>to</p>\n<pre><code class=\"lang-auto\">#set par(spacing: 0.65em)\n</code></pre>\n<p>Fine by me.</p>\n<p>What’s the place of the paragraph in the scheme of things now? An element?</p>\n<p>Otherwise, the paragraph behaves very much as before. Why? An explanation of the new basic text layout is welcome <img src=\"https://forum.typst.app/images/emoji/apple/slightly_smiling_face.png?v=12\" title=\":slightly_smiling_face:\" class=\"emoji\" alt=\":slightly_smiling_face:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hi,\n\nParagraphs are no longer blocks, they say. So `tinymist` made me change\n```\n#show par: set block(spacing: 0.65em)\n```\nto\n```\n#set par(spacing: 0.65em)\n```\nFine by me.\n\nWhat's the place of the paragraph in the scheme of things now? An element?\n\nOtherwise, the paragraph behaves very much as before. Why? An explanation of the new basic text layout is welcome :slightly_smiling_face:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 434.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    },
    {
      "id": 8730,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-16T09:53:24.793Z",
      "updated_at": "2025-02-16T09:53:49.974Z",
      "cooked": "<p>There have been several changes. As I understand, initially paragraphs were not elements, but were treated as blocks in some respects. But setting par spacing with <code>#show par: set block(spacing: ...)</code> had several problems, so the <code>par(spacing: ...)</code> property was introduced in Typst 0.12. The problems this solves are described in the <a href=\"https://github.com/typst/typst/pull/4390\" rel=\"noopener nofollow ugc\">PR that made this change</a>.</p>\n<p>The next release (Typst 0.13) introduces semantic paragraphs. Now a par is actually a real element. I think the main motivation was to have a distinction between paragraphs and other pieces of text. But it also brings the benefit that we can process paragraphs in show rules like other elements. See <a href=\"https://github.com/typst/typst/pull/5746\" rel=\"noopener nofollow ugc\">this PR</a> for details.</p>\n<p>With the new <code>par</code> elements, many things that were difficult or impossible are now easy:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show par: it =&gt; {\n  counter(\"par\").step()\n  place(left, dx: -3em, context counter(\"par\").display())\n  if \"Lorem\" in it.body.text {\n    set text(red)\n    it\n  } else {\n    it\n  }\n}\n\nSome paragraph.\n\n#lorem(30)\n\nOther paragraph.\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/f7d69f7b36eb8f0dd45575e859ed3815463c35e9.png\" data-download-href=\"https://forum.typst.app/uploads/default/f7d69f7b36eb8f0dd45575e859ed3815463c35e9\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/f7d69f7b36eb8f0dd45575e859ed3815463c35e9_2_517x102.png\" alt=\"image\" data-base62-sha1=\"zmtLid0bcgC8gPwRXgZoKoc0emt\" width=\"517\" height=\"102\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/f7d69f7b36eb8f0dd45575e859ed3815463c35e9_2_517x102.png, https://forum.typst.app/uploads/default/optimized/2X/f/f7d69f7b36eb8f0dd45575e859ed3815463c35e9_2_775x153.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/f7d69f7b36eb8f0dd45575e859ed3815463c35e9.png 2x\" data-dominant-color=\"FEF7F6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">980×194 27.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "There have been several changes. As I understand, initially paragraphs were not elements, but were treated as blocks in some respects. But setting par spacing with `#show par: set block(spacing: ...)` had several problems, so the `par(spacing: ...)` property was introduced in Typst 0.12. The problems this solves are described in the [PR that made this change](https://github.com/typst/typst/pull/4390).\n\nThe next release (Typst 0.13) introduces semantic paragraphs. Now a par is actually a real element. I think the main motivation was to have a distinction between paragraphs and other pieces of text. But it also brings the benefit that we can process paragraphs in show rules like other elements. See [this PR](https://github.com/typst/typst/pull/5746) for details.\n\nWith the new `par` elements, many things that were difficult or impossible are now easy:\n\n```typ\n#show par: it => {\n  counter(\"par\").step()\n  place(left, dx: -3em, context counter(\"par\").display())\n  if \"Lorem\" in it.body.text {\n    set text(red)\n    it\n  } else {\n    it\n  }\n}\n\nSome paragraph.\n\n#lorem(30)\n\nOther paragraph.\n```\n![image|690x136, 75%](upload://zmtLid0bcgC8gPwRXgZoKoc0emt.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 43,
      "score": 43.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:51:30.518448"
}
{
  "topic_metadata": {
    "id": 2846,
    "title": "How to get the title with its name?",
    "slug": "how-to-get-the-title-with-its-name",
    "posts_count": 2,
    "created_at": "2025-02-16T02:37:46.736Z",
    "last_posted_at": "2025-02-16T07:52:46.344Z",
    "views": 147,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "referencing"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 163
  },
  "posts": [
    {
      "id": 8723,
      "post_number": 1,
      "username": "Akshay_Raj_Gollahall",
      "name": "Akshay Raj Gollahalli",
      "created_at": "2025-02-16T02:37:46.974Z",
      "updated_at": "2025-02-16T02:38:04.806Z",
      "cooked": "<p>This question is part of the <a href=\"https://forum.typst.app/t/how-to-get-the-entire-title-when-referencing-headings/2078/1\" class=\"inline-onebox\">How to get the entire title when referencing headings?</a>, which was already answered.</p>\n<p>Consider this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.\")\n\n#let refName(\n  label\n) = {\n  ref(label, supplement: it =&gt; {\n      if it != none and it.func() == heading {\n        link(it.location(), it.body)\n      }\n    }\n  )\n}\n\n= Introduction\n\n== Introduction Title &lt;intro&gt;\n\nThis is the introduction.\n\n= Background\n\n== Background\n\nThis is the background. And intro is #refName(&lt;intro&gt;).\n</code></pre>\n<p>This gives me an output as</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/8/80ca2d6f64a4e9786b7a0ffcc042cacfda78476e.png\" alt=\"image\" data-base62-sha1=\"inkhkib5RU9oxgpDfbAeFLjPAZw\" width=\"532\" height=\"264\"></p>\n<p>But the referenced title also shows the number, is it possible to just get the title and not it’s number?</p>",
      "raw": "This question is part of the https://forum.typst.app/t/how-to-get-the-entire-title-when-referencing-headings/2078/1, which was already answered.\n\nConsider this:\n\n```typ\n#set heading(numbering: \"1.\")\n\n#let refName(\n  label\n) = {\n  ref(label, supplement: it => {\n      if it != none and it.func() == heading {\n        link(it.location(), it.body)\n      }\n    }\n  )\n}\n\n= Introduction\n\n== Introduction Title <intro>\n\nThis is the introduction.\n\n= Background\n\n== Background\n\nThis is the background. And intro is #refName(<intro>).\n```\n\nThis gives me an output as \n\n![image|532x264](upload://inkhkib5RU9oxgpDfbAeFLjPAZw.png)\n\nBut the referenced title also shows the number, is it possible to just get the title and not it's number?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 566.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 106
    },
    {
      "id": 8727,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-16T07:52:46.344Z",
      "updated_at": "2025-02-16T07:52:46.344Z",
      "cooked": "<p>You can either adapt the solution from the thread you linked:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let refName(\n  label\n) = {\n  show ref: it =&gt; {\n    let el = it.element\n    if el != none and el.func() == heading {\n      link(el.location(), el.body)\n    }\n  }\n  ref(label)\n}\n</code></pre>\n<p>or use <code>query</code>, to get and display the title.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let refName(label) = context {\n  let el = query(label).first()\n  link(el.location(), el.body)\n}\n</code></pre>",
      "raw": "You can either adapt the solution from the thread you linked:\n```typst\n#let refName(\n  label\n) = {\n  show ref: it => {\n    let el = it.element\n    if el != none and el.func() == heading {\n      link(el.location(), el.body)\n    }\n  }\n  ref(label)\n}\n```\nor use `query`, to get and display the title.\n```typst\n#let refName(label) = context {\n  let el = query(label).first()\n  link(el.location(), el.body)\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 15.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    }
  ],
  "scraped_at": "2025-06-10T09:51:29.778582"
}
{
  "topic_metadata": {
    "id": 2848,
    "title": "How can I set title based on the filename?",
    "slug": "how-can-i-set-title-based-on-the-filename",
    "posts_count": 2,
    "created_at": "2025-02-16T05:14:29.947Z",
    "last_posted_at": "2025-02-16T08:02:55.101Z",
    "views": 88,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 117
  },
  "posts": [
    {
      "id": 8725,
      "post_number": 1,
      "username": "ivaquero",
      "name": "ivaquero",
      "created_at": "2025-02-16T05:14:30.128Z",
      "updated_at": "2025-02-16T05:16:41.566Z",
      "cooked": "<p>How everyone!</p>\n<p>I’d like to make a book template, and I want to get the filename as a variable and set document title based on it, how can I make it?</p>\n<p>For example, the file is named <code>01-mathematical-foundation.typ</code>, I want to get the filename to use it in the document title, how to do it?</p>\n<pre><code class=\"lang-auto\">01-mathematical-foundation.typ =&gt; Chapter 1 Math Foundation\n</code></pre>",
      "raw": "How everyone!\n\nI'd like to make a book template, and I want to get the filename as a variable and set document title based on it, how can I make it?\n\nFor example, the file is named `01-mathematical-foundation.typ`, I want to get the filename to use it in the document title, how to do it?\n\n```\n01-mathematical-foundation.typ => Chapter 1 Math Foundation\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 275.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1204
    },
    {
      "id": 8728,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-16T08:02:55.101Z",
      "updated_at": "2025-02-16T08:02:55.101Z",
      "cooked": "<p>It is not possible to read the filename from within Typst. The only option would be to compile your document locally, use a script to read the filename and provide it to the document with <a href=\"https://typst.app/docs/reference/foundations/sys\"><code>sys.inputs</code></a>:</p>\n<pre><code class=\"lang-auto\">typst compile --input \"filename=$FILE\" \"$FILE\"\n</code></pre>",
      "raw": "It is not possible to read the filename from within Typst. The only option would be to compile your document locally, use a script to read the filename and provide it to the document with [`sys.inputs`](https://typst.app/docs/reference/foundations/sys):\n```\ntypst compile --input \"filename=$FILE\" \"$FILE\"\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 5.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    }
  ],
  "scraped_at": "2025-06-10T09:51:29.048693"
}
{
  "topic_metadata": {
    "id": 2855,
    "title": "How do I add a header/footer of dynamic height?",
    "slug": "how-do-i-add-a-header-footer-of-dynamic-height",
    "posts_count": 3,
    "created_at": "2025-02-17T02:32:39.490Z",
    "last_posted_at": "2025-02-17T13:26:59.949Z",
    "views": 218,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "layout",
      "header-footer"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 442
  },
  "posts": [
    {
      "id": 8737,
      "post_number": 1,
      "username": "juan",
      "name": "Juan Martín Seery",
      "created_at": "2025-02-17T02:32:39.842Z",
      "updated_at": "2025-02-17T16:01:40.941Z",
      "cooked": "<p><strong>Context</strong>: I’m trying to make an invoice template. It consists of three sections: (a) information about me and the client, (b) a table with the products and a summary section, (c) some metadata about the invoice.</p>\n<p>I want sections (a) and (c) to repeat on each page if the table “overflows”. Note that section (a) has a dynamic height since I’m generating these invoices programmatically.</p>\n<p>I’ve tried using <code>#set page(header: ...)</code> but I didn’t find a way to give it an “auto” height. Is there a way to make this template in Typst?</p>",
      "raw": "**Context**: I'm trying to make an invoice template. It consists of three sections: (a) information about me and the client, (b) a table with the products and a summary section, (c) some metadata about the invoice.\n\nI want sections (a) and (c) to repeat on each page if the table \"overflows\". Note that section (a) has a dynamic height since I'm generating these invoices programmatically.\n\nI've tried using `#set page(header: ...)` but I didn't find a way to give it an \"auto\" height. Is there a way to make this template in Typst?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 764.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 540
    },
    {
      "id": 8745,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-17T09:36:53.666Z",
      "updated_at": "2025-02-17T09:37:26.023Z",
      "cooked": "<p>Hi, welcome to the Typst forum!</p>\n<p>I think the header size is computed as the top margin minus the header ascent. So in your case, you actually need to set the top margin dynamically based on the header content:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let header = pad(y: 1cm, rect(height: 4cm, width: 100%, stroke: red))\n#let margin = 2cm // for other sides\n\n#context[\n  #let h = measure(width: page.width - 2 * margin, header).height\n  #set page(\n    margin: (top: h, rest: margin),\n    header: header,\n    header-ascent: 0pt,\n  )\n\n  Text.\n]\n</code></pre>\n<p>This uses the <code>measure</code> function to find the height of the header content. We must specify the available width where the header will be laid out. Normally we would get the available width by wrapping our code in a <code>layout</code> call, but that puts the content in container and you cannot configure the page (e.g. change the margins) inside of a container. So instead we compute the width as the total page width minus the left and right margins.</p>\n<p>For simplicity here I set the header-ascent to 0 and control the spacing between header and main text using padding around the header.</p>\n<p>But maybe a better approach for your problem is to simply use the <code>table.header</code> and <code>table.footer</code> features of Typst tables: when a table is broken in multiple pages, by default Typst will repeat the table header and footer on every page. If you want the table footer to look like a page footer, you can add an extra row to fill the extra space between the main content and the footer:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(paper: \"a6\", margin: (y: 0pt))\n\n#let header = rect(width: 100%, height: 3cm, stroke: red)\n#let main-content = block(width: 100%, height: 10cm, fill: green)\n#let footer = rect(width: 100%, height: 3cm, stroke: blue)\n\n#table(\n  inset: 0pt,\n  stroke: none,\n  table.header(header),\n  table.cell(inset: (y: 1cm), main-content),\n  block(width: 100%, height: 1fr, fill: gray)[Filler space],\n  table.footer(footer),\n)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/23815729917727e040aeab435835d0ebcdeaf797.png\" data-download-href=\"https://forum.typst.app/uploads/default/23815729917727e040aeab435835d0ebcdeaf797\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/23815729917727e040aeab435835d0ebcdeaf797_2_517x365.png\" alt=\"image\" data-base62-sha1=\"545OYoc8HgnK28Q2kJe3um7WEJN\" width=\"517\" height=\"365\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/23815729917727e040aeab435835d0ebcdeaf797_2_517x365.png, https://forum.typst.app/uploads/default/original/2X/2/23815729917727e040aeab435835d0ebcdeaf797.png 1.5x, https://forum.typst.app/uploads/default/original/2X/2/23815729917727e040aeab435835d0ebcdeaf797.png 2x\" data-dominant-color=\"B0DBB5\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">770×544 4.21 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hi, welcome to the Typst forum!\n\nI think the header size is computed as the top margin minus the header ascent. So in your case, you actually need to set the top margin dynamically based on the header content:\n\n```typ\n#let header = pad(y: 1cm, rect(height: 4cm, width: 100%, stroke: red))\n#let margin = 2cm // for other sides\n\n#context[\n  #let h = measure(width: page.width - 2 * margin, header).height\n  #set page(\n    margin: (top: h, rest: margin),\n    header: header,\n    header-ascent: 0pt,\n  )\n\n  Text.\n]\n```\n\nThis uses the `measure` function to find the height of the header content. We must specify the available width where the header will be laid out. Normally we would get the available width by wrapping our code in a `layout` call, but that puts the content in container and you cannot configure the page (e.g. change the margins) inside of a container. So instead we compute the width as the total page width minus the left and right margins.\n\nFor simplicity here I set the header-ascent to 0 and control the spacing between header and main text using padding around the header.\n\nBut maybe a better approach for your problem is to simply use the `table.header` and `table.footer` features of Typst tables: when a table is broken in multiple pages, by default Typst will repeat the table header and footer on every page. If you want the table footer to look like a page footer, you can add an extra row to fill the extra space between the main content and the footer:\n\n```typ\n#set page(paper: \"a6\", margin: (y: 0pt))\n\n#let header = rect(width: 100%, height: 3cm, stroke: red)\n#let main-content = block(width: 100%, height: 10cm, fill: green)\n#let footer = rect(width: 100%, height: 3cm, stroke: blue)\n\n#table(\n  inset: 0pt,\n  stroke: none,\n  table.header(header),\n  table.cell(inset: (y: 1cm), main-content),\n  block(width: 100%, height: 1fr, fill: gray)[Filler space],\n  table.footer(footer),\n)\n```\n\n![image|690x487, 75%](upload://545OYoc8HgnK28Q2kJe3um7WEJN.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 38.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8751,
      "post_number": 3,
      "username": "juan",
      "name": "Juan Martín Seery",
      "created_at": "2025-02-17T13:26:59.949Z",
      "updated_at": "2025-02-17T13:26:59.949Z",
      "cooked": "<p>Awesome! Thank you very much. I ended up using the table with <code>table.header</code> and <code>table.footer</code></p>",
      "raw": "Awesome! Thank you very much. I ended up using the table with `table.header` and `table.footer`",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 34,
      "score": 21.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 540
    }
  ],
  "scraped_at": "2025-06-10T09:51:28.329216"
}
{
  "topic_metadata": {
    "id": 2865,
    "title": "How can I use a show rule to change the text of bullet point lists?",
    "slug": "how-can-i-use-a-show-rule-to-change-the-text-of-bullet-point-lists",
    "posts_count": 9,
    "created_at": "2025-02-17T21:34:43.778Z",
    "last_posted_at": "2025-02-18T20:22:20.370Z",
    "views": 209,
    "like_count": 1,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 9,
    "accepted_answer_username": "Olaf",
    "tags": [
      "layout",
      "lists"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 806
  },
  "posts": [
    {
      "id": 8759,
      "post_number": 1,
      "username": "Olaf",
      "name": "Olaf",
      "created_at": "2025-02-17T21:34:43.887Z",
      "updated_at": "2025-02-22T09:54:00.991Z",
      "cooked": "<p>I would like to use a show rule to wrap the elements of a bullet point list with a function call. By this I mean the text after the bullet point, not the bullet point itself.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let taglist(content) = {\n  let tags = content.text\n    .split(\";\")\n    .map(str.trim)\n    .filter(s =&gt; s != \"\")\n\n  tags.map(t =&gt; strong(t)).join(\", \")\n}\n\n#show list.item: it =&gt; {\n    taglist(it.body)\n}\n\n- One; Two; Three\n- AAA; BBB; CCC \n</code></pre>\n<p>This is to be equivalent with:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">- #taglist([One; Two; Three])\n- #taglist([AAA; BBB; CCC])\n\n</code></pre>\n<p>And eventually:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">- #strong([One]), #strong([Two]), #strong([Three])\n- #strong([AAA]), #strong([BBB]), #strong([CCC])\n</code></pre>\n<p>Unfortunately, this only works halfway. The bullet point list has now been cancelled.</p>",
      "raw": "I would like to use a show rule to wrap the elements of a bullet point list with a function call. By this I mean the text after the bullet point, not the bullet point itself.\n\n```typ\n#let taglist(content) = {\n  let tags = content.text\n    .split(\";\")\n    .map(str.trim)\n    .filter(s => s != \"\")\n\n  tags.map(t => strong(t)).join(\", \")\n}\n\n#show list.item: it => {\n    taglist(it.body)\n}\n\n- One; Two; Three\n- AAA; BBB; CCC \n```\n\nThis is to be equivalent with:\n\n```typ\n- #taglist([One; Two; Three])\n- #taglist([AAA; BBB; CCC])\n\n```\n\nAnd eventually:\n\n```typ\n- #strong([One]), #strong([Two]), #strong([Three])\n- #strong([AAA]), #strong([BBB]), #strong([CCC])\n```\n\nUnfortunately, this only works halfway. The bullet point list has now been cancelled.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 549.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 418
    },
    {
      "id": 8761,
      "post_number": 2,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-02-18T06:35:30.516Z",
      "updated_at": "2025-02-18T06:35:30.516Z",
      "cooked": "<p>The <code>show</code> rule is currently returning the modified <code>it.body</code> which is no longer an <code>enum.item</code>.</p>\n<p>Returning the correct thing:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let taglist(content) = {\n  let tags = content.text\n    .split(\";\")\n    .map(str.trim)\n    .filter(s =&gt; s != \"\")\n\n  tags.map(t =&gt; strong(t)).join(\", \")\n}\n\n#show list.item: it =&gt; {\n    enum.item(taglist(it.body))//small change here\n}\n\n- One; Two; Three\n- AAA; BBB; CCC\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/7cd10556e5db85521df6b60c6abba73020112700.png\" alt=\"image\" data-base62-sha1=\"hOb1WV3IVkWUdE5QLELfP9ha9oI\" width=\"155\" height=\"54\"></p>",
      "raw": "The `show` rule is currently returning the modified `it.body` which is no longer an `enum.item`.\n\nReturning the correct thing:\n```typ\n#let taglist(content) = {\n  let tags = content.text\n    .split(\";\")\n    .map(str.trim)\n    .filter(s => s != \"\")\n\n  tags.map(t => strong(t)).join(\", \")\n}\n\n#show list.item: it => {\n    enum.item(taglist(it.body))//small change here\n}\n\n- One; Two; Three\n- AAA; BBB; CCC\n```\n![image|155x54](upload://hOb1WV3IVkWUdE5QLELfP9ha9oI.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 13.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 8763,
      "post_number": 3,
      "username": "Olaf",
      "name": "Olaf",
      "created_at": "2025-02-18T08:14:24.155Z",
      "updated_at": "2025-02-18T08:14:24.155Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"gezepi\" data-post=\"2\" data-topic=\"2865\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/g/C34CE0/48.png\" class=\"avatar\"> gezepi:</div>\n<blockquote>\n<p><code>enum.item</code></p>\n</blockquote>\n</aside>\n<p>Thank you for your reply. Unfortunately, your answer refers to a numbered list. I would like to have a list with bullet points.</p>",
      "raw": "[quote=\"gezepi, post:2, topic:2865\"]\n`enum.item`\n[/quote]\n\nThank you for your reply. Unfortunately, your answer refers to a numbered list. I would like to have a list with bullet points.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 36,
      "score": 37.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 418
    },
    {
      "id": 8766,
      "post_number": 4,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-02-18T09:21:15.944Z",
      "updated_at": "2025-02-18T09:21:15.944Z",
      "cooked": "<p>Sorry about that!<br>\nIn theory it would be as simple as changing it from <code>enum.item</code> to <code>list.item</code> but then the <code>show</code> rule applies to the already modified item.  So this will first check if there is a semicolon before modifying it.  If there is no semicolon it will simply return what it found (<code>it</code>).</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show list.item: it =&gt; {\n  if it.body.func() == text and it.body.fields().text.contains(\";\"){\n    list.item(taglist(it.body)) \n  } else {\n    it\n  }\n}\n</code></pre>\n<p>If you are using semicolons in your lists for other things you may need to make further changes to the code (maybe attaching a label to all modified items and checking for labels before applying the <code>show</code> rule).</p>\n<details>\n<summary>\nFull Code</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let taglist(content) = {\n  let fields = content.fields().text\n  let tags = fields\n    .split(\";\")\n    .map(str.trim)\n    .filter(s =&gt; s != \"\")\n\n  tags.map(t =&gt; strong(t)).join(\", \")\n}\n\n#show list.item: it =&gt; {\n  if it.body.func() == text and it.body.fields().text.contains(\";\"){\n    list.item(taglist(it.body)) \n  } else {\n    it\n  }\n}\n\n- One; Two; Three\n- AAA; BBB; CCC\n- This doesn't have a semicolon\n- This does; So it gets treated differently\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/b/b524e832e324763ea0f5bd27880407ce5d403ead.png\" alt=\"image\" data-base62-sha1=\"pQtuH80q0lZ1t3WECZzu4rbMvGR\" width=\"283\" height=\"89\"></p>\n</details>",
      "raw": "Sorry about that!\nIn theory it would be as simple as changing it from `enum.item` to `list.item` but then the `show` rule applies to the already modified item.  So this will first check if there is a semicolon before modifying it.  If there is no semicolon it will simply return what it found (`it`).\n\n```typ\n#show list.item: it => {\n  if it.body.func() == text and it.body.fields().text.contains(\";\"){\n    list.item(taglist(it.body)) \n  } else {\n    it\n  }\n}\n```\n\nIf you are using semicolons in your lists for other things you may need to make further changes to the code (maybe attaching a label to all modified items and checking for labels before applying the `show` rule).\n\n[details=\"Full Code\"]\n```typ\n#let taglist(content) = {\n  let fields = content.fields().text\n  let tags = fields\n    .split(\";\")\n    .map(str.trim)\n    .filter(s => s != \"\")\n\n  tags.map(t => strong(t)).join(\", \")\n}\n\n#show list.item: it => {\n  if it.body.func() == text and it.body.fields().text.contains(\";\"){\n    list.item(taglist(it.body)) \n  } else {\n    it\n  }\n}\n\n- One; Two; Three\n- AAA; BBB; CCC\n- This doesn't have a semicolon\n- This does; So it gets treated differently\n```\n![image|283x89](upload://pQtuH80q0lZ1t3WECZzu4rbMvGR.png)\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 22.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 8767,
      "post_number": 5,
      "username": "Olaf",
      "name": "Olaf",
      "created_at": "2025-02-18T09:41:29.979Z",
      "updated_at": "2025-02-18T09:42:14.898Z",
      "cooked": "<p>Where did you get this information? Is there a detailed documentation somewhere regarding list.item and list.item.body? It’s a bit thin: <a href=\"https://typst.app/docs/reference/model/list/#definitions-item\" class=\"inline-onebox\">Bullet List Function – Typst Documentation</a></p>",
      "raw": "Where did you get this information? Is there a detailed documentation somewhere regarding list.item and list.item.body? It's a bit thin: https://typst.app/docs/reference/model/list/#definitions-item",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 11.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 418
    },
    {
      "id": 8768,
      "post_number": 6,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-02-18T10:04:03.708Z",
      "updated_at": "2025-02-18T10:04:03.708Z",
      "cooked": "<p>Mostly I just fumbled around inside the <code>show</code> function.  By hovering the mouse over a variable, you can see all the values it has in the document.  This let me find out what properties and methods were available (and their values) for a list item.</p>\n<p>Also, it turns out that solution is actually very fragile:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">- 1; 2\n- 1;2\n- _1_; 2\n- 1 ; 2\n- 1; _2_\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/b/baaa057c2f71f5c1af4311e143cd6319e45891ff.png\" alt=\"image\" data-base62-sha1=\"qDj4SDlAjzo6J0bSHJpa8157fwb\" width=\"99\" height=\"160\"></p>\n<p>Changing to nested <code>show</code> rules like this is much more robust.  The only downside I know of right now is that, unlike your example from the original post, this one also applies <code>strong</code> to the commas (,).</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show list.item: it =&gt; {\n  show regex(\".*;.*\"): it =&gt; {\n    show regex(\"\\s*;\\s*\"): \", \"\n    strong(it)\n  }\n  it\n}\n\n- 1; 2\n- 1;2\n- _1_; 2\n- 1 ; 2\n- 1; _2_\n- One; Two; Three\n- AAA; BBB; CCC\n- This doesn't have a semicolon\n- This does; So it gets treated differently\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/3/31ce6c6d5190f7b22345dbe45588e5b803215183.png\" alt=\"image\" data-base62-sha1=\"76BEHpdefmbErUdjQQSUWiYvwcj\" width=\"470\" height=\"299\"></p>\n</details>",
      "raw": "Mostly I just fumbled around inside the `show` function.  By hovering the mouse over a variable, you can see all the values it has in the document.  This let me find out what properties and methods were available (and their values) for a list item.\n\nAlso, it turns out that solution is actually very fragile:\n```typ\n- 1; 2\n- 1;2\n- _1_; 2\n- 1 ; 2\n- 1; _2_\n```\n![image|99x160](upload://qDj4SDlAjzo6J0bSHJpa8157fwb.png)\n\nChanging to nested `show` rules like this is much more robust.  The only downside I know of right now is that, unlike your example from the original post, this one also applies `strong` to the commas (,).\n\n```typ\n#show list.item: it => {\n  show regex(\".*;.*\"): it => {\n    show regex(\"\\s*;\\s*\"): \", \"\n    strong(it)\n  }\n  it\n}\n\n- 1; 2\n- 1;2\n- _1_; 2\n- 1 ; 2\n- 1; _2_\n- One; Two; Three\n- AAA; BBB; CCC\n- This doesn't have a semicolon\n- This does; So it gets treated differently\n```\n\n[details=\"Output\"]\n![image|470x299](upload://76BEHpdefmbErUdjQQSUWiYvwcj.png)\n[/details]",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 36.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 8770,
      "post_number": 7,
      "username": "Olaf",
      "name": "Olaf",
      "created_at": "2025-02-18T10:48:15.739Z",
      "updated_at": "2025-02-18T10:48:15.739Z",
      "cooked": "<p>Are you working with the web editor or with another editor (e.g. Visual Studio Code)?</p>",
      "raw": "Are you working with the web editor or with another editor (e.g. Visual Studio Code)?",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 10.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 418
    },
    {
      "id": 8771,
      "post_number": 8,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-02-18T11:02:44.548Z",
      "updated_at": "2025-02-18T11:02:44.548Z",
      "cooked": "<p>For this, the web editor.  I also use VSCodium (basically VSCode) with tinymist, and the “hover over to see the values” works in both.</p>",
      "raw": "For this, the web editor.  I also use VSCodium (basically VSCode) with tinymist, and the \"hover over to see the values\" works in both.",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 16.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 8779,
      "post_number": 9,
      "username": "Olaf",
      "name": "Olaf",
      "created_at": "2025-02-18T20:22:20.370Z",
      "updated_at": "2025-02-18T20:22:20.370Z",
      "cooked": "<p>I have created something that works for me. I used a trick that I copied from <a href=\"https://github.com/OrangeX4/typst-cheq/blob/13a0b7316025613cc13913bf4e4b7784a17abe40/lib.typ#L154\" rel=\"noopener nofollow ugc\">typst-chep</a>. To ensure that the show rule is only applied once, I use a content element as a marker. After the show rule has been applied, the marker is removed and the show rule is not applied again.</p>\n<p>Next, I filter out all elements that I cannot convert into text (e.g. spaces). I then join the remaining elements together.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let taglist(text) = {\n  let tags = text\n    .split(\";\")\n    .map(str.trim)\n    .filter(s =&gt; s != \"\")\n\n  tags.map(t =&gt; strong(t)).join(\", \")\n}\n\n#show list.item: it =&gt; {\n  if not (type(it.body) == content and it.body.func() == [].func()) {\n    return it\n  }\n  let children = it.body.children\n\n  if children.at(0) != [#\"[\"] or children.at(1) != [#\"TL\"] or children.at(2) != [#\"]\"] {\n    return it\n  }\n  \n  let c = children.slice(4)\n    .filter(i =&gt; i.func() == text)\n    .map(i =&gt; i.text)\n    .join()\n\n  list(taglist(c))\n}\n\n- [TL] Hello\n- [TL] One; Two\n- [TL] AAA; BBB ; CCC;\n</code></pre>",
      "raw": "I have created something that works for me. I used a trick that I copied from [typst-chep](https://github.com/OrangeX4/typst-cheq/blob/13a0b7316025613cc13913bf4e4b7784a17abe40/lib.typ#L154). To ensure that the show rule is only applied once, I use a content element as a marker. After the show rule has been applied, the marker is removed and the show rule is not applied again. \n\nNext, I filter out all elements that I cannot convert into text (e.g. spaces). I then join the remaining elements together. \n\n```typ\n#let taglist(text) = {\n  let tags = text\n    .split(\";\")\n    .map(str.trim)\n    .filter(s => s != \"\")\n\n  tags.map(t => strong(t)).join(\", \")\n}\n\n#show list.item: it => {\n  if not (type(it.body) == content and it.body.func() == [].func()) {\n    return it\n  }\n  let children = it.body.children\n\n  if children.at(0) != [#\"[\"] or children.at(1) != [#\"TL\"] or children.at(2) != [#\"]\"] {\n    return it\n  }\n  \n  let c = children.slice(4)\n    .filter(i => i.func() == text)\n    .map(i => i.text)\n    .join()\n\n  list(taglist(c))\n}\n\n- [TL] Hello\n- [TL] One; Two\n- [TL] AAA; BBB ; CCC;\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 20.6,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 418
    }
  ],
  "scraped_at": "2025-06-10T09:51:27.639066"
}
