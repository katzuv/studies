{
  "topic_metadata": {
    "id": 911,
    "title": "How to hang the first line indentedÔºü",
    "slug": "how-to-hang-the-first-line-indented",
    "posts_count": 5,
    "created_at": "2024-10-03T19:30:49.616Z",
    "last_posted_at": "2024-10-03T20:51:21.505Z",
    "views": 517,
    "like_count": 1,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "xkevio",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 300
  },
  "posts": [
    {
      "id": 3355,
      "post_number": 1,
      "username": "HenYu",
      "name": "HenYu",
      "created_at": "2024-10-03T19:30:49.777Z",
      "updated_at": "2024-10-03T19:30:49.777Z",
      "cooked": "<p>If there is a piece of text, how can I turn it into an indented style like the first line hanging in word.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/a8689a5313004f39e3e4111f70b798877871b304.png\" data-download-href=\"https://forum.typst.app/uploads/default/a8689a5313004f39e3e4111f70b798877871b304\" title=\"Snipaste_2024-10-04_03-30-17\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/a8689a5313004f39e3e4111f70b798877871b304_2_690x386.png\" alt=\"Snipaste_2024-10-04_03-30-17\" data-base62-sha1=\"o1OkbtlhL9ZVBLfkcNp1SmUeR3C\" width=\"690\" height=\"386\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/a8689a5313004f39e3e4111f70b798877871b304_2_690x386.png, https://forum.typst.app/uploads/default/optimized/1X/a8689a5313004f39e3e4111f70b798877871b304_2_1035x579.png 1.5x, https://forum.typst.app/uploads/default/original/1X/a8689a5313004f39e3e4111f70b798877871b304.png 2x\" data-dominant-color=\"F3F3F3\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Snipaste_2024-10-04_03-30-17</span><span class=\"informations\">1109√ó621 32.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "If there is a piece of text, how can I turn it into an indented style like the first line hanging in word.\n\n![Snipaste_2024-10-04_03-30-17|690x386](upload://o1OkbtlhL9ZVBLfkcNp1SmUeR3C.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 59,
      "score": 2501.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 530
    },
    {
      "id": 3360,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-03T19:57:33.281Z",
      "updated_at": "2024-10-03T20:00:42.291Z",
      "cooked": "<p>You have a few options here:</p>\n<ul>\n<li>If you want to replicate your example image precisely, you should use an enumerated list which automatically features a hanging indent.</li>\n<li>In normal paragraphs, you can set the <code>hanging-indent</code> parameter which will indent all <strong>but</strong> the first line.</li>\n<li>Maybe you want to also, or exclusively, indent the first line in which case there‚Äôs a <code>first-line-indent</code> parameter¬π.</li>\n</ul>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 9cm, height: auto)\n\n// No indentation at all:\nPeople are not born knowing the truth, who can be without doubt.\n\n// Hanging indentation as part of the enumerated list:\n+ People are not born knowing the truth, who can be without doubt.\n\n#set par(hanging-indent: 1em)\n\n// Paragraph hanging indentation:\nPeople are not born knowing the truth, who can be without doubt.\n\n#set par(first-line-indent: 1em, hanging-indent: 0em)\n\n// Paragraph first-line indentation:\nPeople are not born knowing the truth, who can be without doubt.\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/4ca522d0a3f63b1a10b5cade0ebeb04f4cc3fd27.png\" alt=\"image\" data-base62-sha1=\"aW25zW6poUcmvaIRD7Sr0RBgX6n\" width=\"506\" height=\"369\"></p>\n<p>¬π<a href=\"https://github.com/typst/typst/issues/311\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Behavior of first line indentation in paragraphs seems limiting ¬∑ Issue #311 ¬∑ typst/typst ¬∑ GitHub</a></p>",
      "raw": "You have a few options here:\n\n- If you want to replicate your example image precisely, you should use an enumerated list which automatically features a hanging indent.\n- In normal paragraphs, you can set the `hanging-indent` parameter which will indent all **but** the first line.\n- Maybe you want to also, or exclusively, indent the first line in which case there's a `first-line-indent` parameter¬π.\n\n```typ\n#set page(width: 9cm, height: auto)\n\n// No indentation at all:\nPeople are not born knowing the truth, who can be without doubt.\n\n// Hanging indentation as part of the enumerated list:\n+ People are not born knowing the truth, who can be without doubt.\n\n#set par(hanging-indent: 1em)\n\n// Paragraph hanging indentation:\nPeople are not born knowing the truth, who can be without doubt.\n\n#set par(first-line-indent: 1em, hanging-indent: 0em)\n\n// Paragraph first-line indentation:\nPeople are not born knowing the truth, who can be without doubt.\n```\n\n![image|506x369](upload://aW25zW6poUcmvaIRD7Sr0RBgX6n.png)\n\n¬πhttps://github.com/typst/typst/issues/311",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 54,
      "score": 80.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3366,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-03T20:32:52.920Z",
      "updated_at": "2024-10-03T20:32:52.920Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"xkevio\" data-post=\"2\" data-topic=\"911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/xkevio/48/37_2.png\" class=\"avatar\"> xkevio:</div>\n<blockquote>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set par(first-line-indent: 1em, hanging-indent: 0em)\n</code></pre>\n</blockquote>\n</aside>\n<p>I want to point out that <a href=\"https://typst.app/docs/reference/model/par/#parameters-hanging-indent\"><code>hanging-indent</code></a> in this case doesn‚Äôt have to be explicitly set, since it‚Äôs set to <code>0pt</code> by default. It‚Äôs also more <em>common</em> to zero-out something by using <code>0pt</code>.</p>",
      "raw": "[quote=\"xkevio, post:2, topic:911\"]\n```typ\n#set par(first-line-indent: 1em, hanging-indent: 0em)\n```\n[/quote]\n\nI want to point out that [`hanging-indent`](https://typst.app/docs/reference/model/par/#parameters-hanging-indent) in this case doesn't have to be explicitly set, since it's set to `0pt` by default. It's also more *common* to zero-out something by using `0pt`.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 47,
      "score": 14.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3368,
      "post_number": 4,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-03T20:45:00.582Z",
      "updated_at": "2024-10-03T20:48:31.564Z",
      "cooked": "<p>In <em>this</em> case, it does have to be set since this represents code from the same document. If it was a stand-alone declaration, you would be correct.</p>",
      "raw": "In *this* case, it does have to be set since this represents code from the same document. If it was a stand-alone declaration, you would be correct.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 13.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3370,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-03T20:51:21.505Z",
      "updated_at": "2024-10-03T20:51:21.505Z",
      "cooked": "<p>Oh, yeah, sure. I got standalone version in mind.</p>",
      "raw": "Oh, yeah, sure. I got standalone version in mind.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 13.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:27.454128"
}
{
  "topic_metadata": {
    "id": 914,
    "title": "Is there a prism language definition for Typst?",
    "slug": "is-there-a-prism-language-definition-for-typst",
    "posts_count": 9,
    "created_at": "2024-10-03T20:02:46.527Z",
    "last_posted_at": "2024-10-07T15:02:03.888Z",
    "views": 278,
    "like_count": 7,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 9,
    "accepted_answer_username": "Mc-Zen",
    "tags": [
      "tooling"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 450
  },
  "posts": [
    {
      "id": 3363,
      "post_number": 1,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2024-10-03T20:02:46.624Z",
      "updated_at": "2024-10-03T20:04:32.214Z",
      "cooked": "<p>Does anyone know whether someone has already created a (sophisticated) Typst language definition for <a href=\"https://prismjs.com/\" rel=\"noopener nofollow ugc\">Prism (prismjs.com)</a>?</p>\n<p>I would like to add some syntax highlighting to a package documentation page.</p>",
      "raw": "Does anyone know whether someone has already created a (sophisticated) Typst language definition for [Prism (prismjs.com)](https://prismjs.com/)?\n\nI would like to add some syntax highlighting to a package documentation page.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 64,
      "score": 257.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 3367,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-03T20:44:30.186Z",
      "updated_at": "2024-10-03T20:44:30.186Z",
      "cooked": "<p>I‚Äôm not aware of that, but what do you want to achieve? Do you want to highlight Typst code with Prism in some HTML page? Or do you want to highlight some language code inside a Typst document?</p>\n<p>In case you want to highlight code by using Typst, you can already do that with <a href=\"https://typst.app/docs/reference/text/raw/#parameters-lang\"><code>raw.lang</code></a>. Or if <a href=\"https://github.com/typst/typst/issues/1511\" rel=\"noopener nofollow ugc\">some language isn‚Äôt supported yet</a>, you can add your own definition by using <a href=\"https://typst.app/docs/reference/text/raw/#parameters-syntaxes\"><code>raw.syntaxes</code></a>, which uses <a href=\"https://www.sublimetext.com/docs/syntax.html\" rel=\"noopener nofollow ugc\"><code>sublime-syntax</code> file format</a>.</p>",
      "raw": "I'm not aware of that, but what do you want to achieve? Do you want to highlight Typst code with Prism in some HTML page? Or do you want to highlight some language code inside a Typst document?\n\nIn case you want to highlight code by using Typst, you can already do that with [`raw.lang`](https://typst.app/docs/reference/text/raw/#parameters-lang). Or if [some language isn't supported yet](https://github.com/typst/typst/issues/1511), you can add your own definition by using [`raw.syntaxes`](https://typst.app/docs/reference/text/raw/#parameters-syntaxes), which uses [`sublime-syntax` file format](https://www.sublimetext.com/docs/syntax.html).",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 63,
      "score": 332.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3396,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-04T05:59:44.610Z",
      "updated_at": "2024-10-04T05:59:44.610Z",
      "cooked": "<p>I don‚Äôt think so!</p>\n<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"2\" data-topic=\"914\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>I‚Äôm not aware of that, but what do you want to achieve?</p>\n</blockquote>\n</aside>\n<p>In any case, I believe Prism is used by GitLab to highlight code. ATM, Typst code is not highlighted correctly in my institutional instance‚Ä¶ Grr!</p>\n<p><a class=\"mention\" href=\"/u/mc-zen\">@Mc-Zen</a> if you contribute a Prism definition for Typst, I‚Äôll be glad to hear of it, don‚Äôt hesitate to mention me!</p>",
      "raw": "I don't think so!\n\n[quote=\"Andrew, post:2, topic:914\"]\nI‚Äôm not aware of that, but what do you want to achieve?\n[/quote]\nIn any case, I believe Prism is used by GitLab to highlight code. ATM, Typst code is not highlighted correctly in my institutional instance... Grr!\n\n@Mc-Zen if you contribute a Prism definition for Typst, I'll be glad to hear of it, don't hesitate to mention me!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 53,
      "score": 15.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3403,
      "post_number": 4,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2024-10-04T12:57:08.561Z",
      "updated_at": "2024-10-04T12:57:08.561Z",
      "cooked": "<p>Okay, I will haha. But I‚Äôve never created a language definition for prism so far :D</p>",
      "raw": "Okay, I will haha. But I've never created a language definition for prism so far :D",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 3404,
      "post_number": 5,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2024-10-04T12:57:43.031Z",
      "updated_at": "2024-10-04T12:57:43.031Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"2\" data-topic=\"914\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>I‚Äôm not aware of that, but what do you want to achieve? Do you want to highlight Typst code with Prism in some HTML page?</p>\n</blockquote>\n</aside>\n<p>Yes, that‚Äôs the goal.</p>",
      "raw": "[quote=\"Andrew, post:2, topic:914\"]\nI‚Äôm not aware of that, but what do you want to achieve? Do you want to highlight Typst code with Prism in some HTML page?\n[/quote]\n\nYes, that's the goal.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 45,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 3517,
      "post_number": 6,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2024-10-07T09:59:16.504Z",
      "updated_at": "2024-10-07T09:59:16.504Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> ,</p>\n<p>good news! I implemented a language definition for Prism. It‚Äôs not perfect of course and has certain limitations. Typst is a language that is notoriously bad for regex parsing (due to the three languages ‚Äì markup, code, math ‚Äì baked into one where you may switch from each to the others at anytime) and regex is all that is supported by Prism.</p>\n<p>But it works pretty well now for sane cases ‚Äì and one might argue that the purpose of displaying code in the web is mostly to demonstrate examples that are not too convoluted (hopefully <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">).</p>\n<p>The thing is: I don‚Äôt really have the capacity for maintaining it, at least not on my own and it would be necessary to write some test cases for it.</p>",
      "raw": "Hi @quachpas ,\n\ngood news! I implemented a language definition for Prism. It's not perfect of course and has certain limitations. Typst is a language that is notoriously bad for regex parsing (due to the three languages -- markup, code, math -- baked into one where you may switch from each to the others at anytime) and regex is all that is supported by Prism. \n\nBut it works pretty well now for sane cases -- and one might argue that the purpose of displaying code in the web is mostly to demonstrate examples that are not too convoluted (hopefully :sweat_smile:). \n\nThe thing is: I don't really have the capacity for maintaining it, at least not on my own and it would be necessary to write some test cases for it.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 33,
      "score": 101.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 3522,
      "post_number": 7,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-07T11:41:13.005Z",
      "updated_at": "2024-10-07T11:41:13.005Z",
      "cooked": "<p>Amazing <a class=\"mention\" href=\"/u/mc-zen\">@Mc-Zen</a>, if you publish your work maybe someone might continue your contribution. Do you have a repository?</p>",
      "raw": "Amazing @Mc-Zen, if you publish your work maybe someone might continue your contribution. Do you have a repository?",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 36.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3523,
      "post_number": 8,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2024-10-07T11:47:30.612Z",
      "updated_at": "2024-10-07T11:47:30.612Z",
      "cooked": "<p>I‚Äôm already working on it :)</p>",
      "raw": "I'm already working on it :)",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 21.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 3527,
      "post_number": 9,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2024-10-07T15:02:03.888Z",
      "updated_at": "2024-10-07T15:02:03.888Z",
      "cooked": "<p>Here it is <img src=\"https://forum.typst.app/images/emoji/apple/tada.png?v=12\" title=\":tada:\" class=\"emoji\" alt=\":tada:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p><a href=\"https://github.com/Mc-Zen/prism-typst\" rel=\"noopener nofollow ugc\">Mc-Zen/prism-typst: Syntax-highlighting Typst code with Prism (github.com)</a></p>",
      "raw": "Here it is üéâ\n\n[Mc-Zen/prism-typst: Syntax-highlighting Typst code with Prism (github.com)](https://github.com/Mc-Zen/prism-typst)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 29,
      "score": 85.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 9
    }
  ],
  "scraped_at": "2025-06-10T09:57:26.714401"
}
{
  "topic_metadata": {
    "id": 925,
    "title": "Can I define a dedicated/default Template folder?",
    "slug": "can-i-define-a-dedicated-default-template-folder",
    "posts_count": 4,
    "created_at": "2024-10-04T14:27:58.182Z",
    "last_posted_at": "2025-05-24T15:40:32.797Z",
    "views": 700,
    "like_count": 5,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Eric",
    "tags": [
      "templates"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 223
  },
  "posts": [
    {
      "id": 3410,
      "post_number": 1,
      "username": "Walter_H_Schreiber",
      "name": "Walter H. Schreiber",
      "created_at": "2024-10-04T14:27:58.282Z",
      "updated_at": "2024-10-04T17:47:24.650Z",
      "cooked": "<p>Can I create a default (dedicated) template folder, where I put my template(s) and then only <span class=\"hashtag-raw\">#import</span> using the filename without the complete path?</p>",
      "raw": "Can I create a default (dedicated) template folder, where I put my template(s) and then only #import using the filename without the complete path?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 66,
      "score": 3233.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 429
    },
    {
      "id": 3414,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-04T16:49:48.862Z",
      "updated_at": "2024-10-04T17:59:22.620Z",
      "cooked": "<p>You can store your templates in a <a href=\"https://github.com/typst/packages?tab=readme-ov-file#local-packages\" rel=\"noopener nofollow ugc\">local package namespace</a>. For this, you need to put your template package in a specific directory, depending on your operating system:</p>\n<ul>\n<li>Windows: <code>%APPDATA%\\typst\\packages\\&lt;namespace&gt;\\&lt;name&gt;\\&lt;version&gt;</code></li>\n<li>macOS: <code>~/Library/Application Support/typst/packages/&lt;namespace&gt;/&lt;name&gt;/&lt;version&gt;</code></li>\n<li>Linux: <code>~/.local/share/typst/packages/&lt;namespace&gt;/&lt;name&gt;/&lt;version&gt;</code> (or via the environment variable <code>$XDG_DATA_HOME</code>, see the above link)</li>\n</ul>\n<p>For <code>&lt;namespace&gt;</code>, you can use whatever you want, but something like <code>local</code> or <code>templates</code> would probably be a sensible choice. Additionally, all your templates need a name and a version. You can then import a template from your Typst document via</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@&lt;namespace&gt;/&lt;name&gt;:&lt;version&gt;\": *\n</code></pre>",
      "raw": "You can store your templates in a [local package namespace](https://github.com/typst/packages?tab=readme-ov-file#local-packages). For this, you need to put your template package in a specific directory, depending on your operating system:\n- Windows: `%APPDATA%\\typst\\packages\\<namespace>\\<name>\\<version>`\n- macOS: `~/Library/Application Support/typst/packages/<namespace>/<name>/<version>` \n- Linux: `~/.local/share/typst/packages/<namespace>/<name>/<version>` (or via the environment variable `$XDG_DATA_HOME`, see the above link)\n\nFor `<namespace>`, you can use whatever you want, but something like `local` or `templates` would probably be a sensible choice. Additionally, all your templates need a name and a version. You can then import a template from your Typst document via\n```typ\n#import \"@<namespace>/<name>:<version>\": *\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 4,
      "reads": 64,
      "score": 177.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 3415,
      "post_number": 4,
      "username": "Walter_H_Schreiber",
      "name": "Walter H. Schreiber",
      "created_at": "2024-10-04T18:02:39.441Z",
      "updated_at": "2024-10-04T18:02:39.441Z",
      "cooked": "<p>Taht is exactly what I was looking for. Thank You</p>",
      "raw": "Taht is exactly what I was looking for. Thank You",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 15.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 429
    },
    {
      "id": 13086,
      "post_number": 5,
      "username": "Sinthoras",
      "name": "",
      "created_at": "2025-05-24T15:40:32.797Z",
      "updated_at": "2025-05-24T15:40:32.797Z",
      "cooked": "<p>Just because I first ran into this issue, here is something to be aware for everyone:</p>\n<p><code>&lt;version&gt;</code> is the folder, where the full package has to be. It has to contain not only the <code>template.typ</code> but also a <code>typst.toml</code> with the metadate. For more details, read the Header <a href=\"https://github.com/typst/packages?tab=readme-ov-file#package-format\" rel=\"noopener nofollow ugc\">Package format</a> in the link <a class=\"mention\" href=\"/u/eric\">@Eric</a>‚Äôs answer.</p>",
      "raw": "Just because I first ran into this issue, here is something to be aware for everyone:\n\n`<version>` is the folder, where the full package has to be. It has to contain not only the `template.typ` but also a `typst.toml` with the metadate. For more details, read the Header [Package format](https://github.com/typst/packages?tab=readme-ov-file#package-format) in the link @Eric's answer.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 13.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 511
    }
  ],
  "scraped_at": "2025-06-10T09:57:25.994183"
}
{
  "topic_metadata": {
    "id": 928,
    "title": "Is there a way to programmaticaly declare a vector?",
    "slug": "is-there-a-way-to-programmaticaly-declare-a-vector",
    "posts_count": 3,
    "created_at": "2024-10-04T20:55:29.115Z",
    "last_posted_at": "2024-10-05T15:24:29.086Z",
    "views": 148,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "afiaith",
    "tags": [
      "scripting",
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 175
  },
  "posts": [
    {
      "id": 3419,
      "post_number": 1,
      "username": "Enjoyer_101",
      "name": "brrrrr",
      "created_at": "2024-10-04T20:55:29.211Z",
      "updated_at": "2024-10-04T23:02:06.220Z",
      "cooked": "<p>Let‚Äôs say i have a vector of <em>n</em> functions, can i instead of declaring the vector and typing the notation of each function inside the vector just write something like :<br>\n<code>vec(f_i for i in range(n))</code></p>",
      "raw": "Let's say i have a vector of _n_ functions, can i instead of declaring the vector and typing the notation of each function inside the vector just write something like :\n`vec(f_i for i in range(n))`",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 437.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 538
    },
    {
      "id": 3423,
      "post_number": 2,
      "username": "afiaith",
      "name": "Maja Abramski-Kronenberg",
      "created_at": "2024-10-04T22:01:16.579Z",
      "updated_at": "2024-10-04T23:52:05.467Z",
      "cooked": "<p>Hi and welcome to the forum <img src=\"https://forum.typst.app/images/emoji/apple/wave.png?v=12\" title=\":wave:\" class=\"emoji\" alt=\":wave:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Do you mean something like this?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let n = 8\n$#math.vec(..range(n).map(i =&gt; $f_#i$))$\n</code></pre>\n<p>You can read more about <a href=\"https://typst.app/docs/reference/foundations/arguments/#spreading\">spreading</a> and <a href=\"https://typst.app/docs/reference/foundations/array/#definitions-map\">mapping</a> in the documentation. In general, <a href=\"https://en.wikipedia.org/wiki/Functional_programming\" rel=\"noopener nofollow ugc\">functional programming</a> is more suitable for situations like this. Since it looks like you come from an imperative perspective (<code>for i in range(n)</code>), have a look at <a href=\"https://en.wikipedia.org/wiki/Functional_programming#Imperative_vs._functional_programming\" rel=\"noopener nofollow ugc\">this comparison</a>.</p>\n<hr>\n<p>On the meta side of things, for the benefit of other users who might have similar questions, please consider the following:</p>\n<ul>\n<li>Edit the category of your topic to <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a>.</li>\n<li>Add <a class=\"hashtag-cooked\" href=\"/tag/scripting\" data-type=\"tag\" data-slug=\"scripting\" data-id=\"84\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>scripting</span></a> to the tags.</li>\n</ul>",
      "raw": "Hi and welcome to the forum üëã\n\nDo you mean something like this?\n\n```typ\n#let n = 8\n$#math.vec(..range(n).map(i => $f_#i$))$\n```\n\nYou can read more about [spreading](https://typst.app/docs/reference/foundations/arguments/#spreading) and [mapping](https://typst.app/docs/reference/foundations/array/#definitions-map) in the documentation. In general, [functional programming](https://en.wikipedia.org/wiki/Functional_programming) is more suitable for situations like this. Since it looks like you come from an imperative perspective (`for i in range(n)`), have a look at [this comparison](https://en.wikipedia.org/wiki/Functional_programming#Imperative_vs._functional_programming).\n\n---\n\nOn the meta side of things, for the benefit of other users who might have similar questions, please consider the following:\n- Edit the category of your topic to #questions.\n- Add #scripting to the tags.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 34,
      "score": 56.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 91
    },
    {
      "id": 3454,
      "post_number": 3,
      "username": "afiaith",
      "name": "Maja Abramski-Kronenberg",
      "created_at": "2024-10-05T15:24:29.086Z",
      "updated_at": "2024-10-05T15:24:29.086Z",
      "cooked": "<p>No problem, you‚Äôre welcome.</p>",
      "raw": "No problem, you‚Äôre welcome.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 4.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 91
    }
  ],
  "scraped_at": "2025-06-10T09:57:25.284323"
}
{
  "topic_metadata": {
    "id": 930,
    "title": "Alternative to LaTeX \\discretionary?",
    "slug": "alternative-to-latex-discretionary",
    "posts_count": 5,
    "created_at": "2024-10-04T21:29:29.253Z",
    "last_posted_at": "2024-10-04T23:57:22.573Z",
    "views": 173,
    "like_count": 6,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout",
      "latex-migration"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 270
  },
  "posts": [
    {
      "id": 3421,
      "post_number": 1,
      "username": "Chilli2077",
      "name": "Chilli",
      "created_at": "2024-10-04T21:29:29.391Z",
      "updated_at": "2024-10-10T14:44:21.507Z",
      "cooked": "<p>In Polish, it‚Äôs a common practice to include a hyphen at the start of the line when breaking a word with a hyphen in it.</p>\n<p>In that case, the word <em>bia≈Ço-czarny</em> could be hyphenated to:<br>\n<em>bia≈Ço-</em><br>\n<em>-czarny</em></p>\n<p>In LaTeX, this could be achieved using <code>\\discretionary{-}{-}{-}</code>. Is there anything similar to this in Typst? I don‚Äôt want to manually break it using <code>-\\ -</code></p>",
      "raw": "In Polish, it's a common practice to include a hyphen at the start of the line when breaking a word with a hyphen in it.\n\nIn that case, the word *bia≈Ço-czarny* could be hyphenated to:\n*bia≈Ço-*\n*-czarny*\n\nIn LaTeX, this could be achieved using `\\discretionary{-}{-}{-}`. Is there anything similar to this in Typst? I don't want to manually break it using ```-\\ -```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 51,
      "score": 190.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 539
    },
    {
      "id": 3424,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-04T22:43:42.571Z",
      "updated_at": "2024-10-04T22:43:42.571Z",
      "cooked": "<p>Starting with Typst v0.12, which is currently available for testing, this will happen automatically when setting the language to Polish using <code>#set text(lang: \"pl\")</code>.</p>\n<p>The same is true for the languages Lower Sorbian, Czech, Croatian, Portuguese, Slovak, and (in some cases) Spanish.</p>",
      "raw": "Starting with Typst v0.12, which is currently available for testing, this will happen automatically when setting the language to Polish using `#set text(lang: \"pl\")`.\n\nThe same is true for the languages Lower Sorbian, Czech, Croatian, Portuguese, Slovak, and (in some cases) Spanish.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 4,
      "reads": 50,
      "score": 90.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 3425,
      "post_number": 3,
      "username": "Chilli2077",
      "name": "Chilli",
      "created_at": "2024-10-04T23:30:53.376Z",
      "updated_at": "2024-10-04T23:30:53.376Z",
      "cooked": "<p>Huh, that‚Äôs great news! Is there (or is there planned to be) a way to set that manually? Or anything like <code>\\discretionary</code> for other, similar purposes?</p>",
      "raw": "Huh, that's great news! Is there (or is there planned to be) a way to set that manually? Or anything like `\\discretionary` for other, similar purposes?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 14.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 539
    },
    {
      "id": 3426,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-04T23:54:36.834Z",
      "updated_at": "2024-10-04T23:56:12.312Z",
      "cooked": "<p>I‚Äôm neither aware of any way to currently do something like that, nor of any concrete plans to add one, but who knows what the future will bring.</p>\n<hr>\n<p>To add a bit of context for any readers unfamiliar with the <code>\\discretionary</code> macro: It can be used for words whose hyphenated form is different from. For example, the old German spelling rules dictated the word ‚Äúlecker‚Äù to be hyphenated as ‚Äúlek-/ker‚Äù, which can be set via <code>\\discretionary{lek-}{ker}{lecker}</code>.</p>",
      "raw": "I'm neither aware of any way to currently do something like that, nor of any concrete plans to add one, but who knows what the future will bring.\n\n---\n\nTo add a bit of context for any readers unfamiliar with the `\\discretionary` macro: It can be used for words whose hyphenated form is different from. For example, the old German spelling rules dictated the word \"lecker\" to be hyphenated as \"lek-/ker\", which can be set via `\\discretionary{lek-}{ker}{lecker}`.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 29.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 3427,
      "post_number": 5,
      "username": "afiaith",
      "name": "Maja Abramski-Kronenberg",
      "created_at": "2024-10-04T23:57:22.573Z",
      "updated_at": "2024-10-04T23:57:22.573Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Eric\" data-post=\"2\" data-topic=\"930\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/eric/48/87_2.png\" class=\"avatar\"> Eric:</div>\n<blockquote>\n<p>Starting with Typst v0.12, which is currently available for testing</p>\n</blockquote>\n</aside>\n<p>For context and for anyone who wants to try out version <code>0.12.0-rc1</code>:</p>\n<aside class=\"quote quote-modified\" data-post=\"1\" data-topic=\"916\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\">\n    <a href=\"https://forum.typst.app/t/typst-0-12-is-in-its-final-testing-period-your-help-is-wanted/916\"><img width=\"20\" height=\"20\" src=\"https://forum.typst.app/images/emoji/apple/woman_scientist.png?v=12\" title=\"woman_scientist\" alt=\"woman_scientist\" class=\"emoji\"> Typst 0.12 is in its final testing period ‚Äì Your help is wanted</a> <a class=\"badge-category__wrapper \" href=\"/c/general/4\"><span data-category-id=\"4\" style=\"--category-badge-color: #007aff; --category-badge-text-color: #fdfdfd;\" data-drop-close=\"true\" class=\"badge-category \" title=\"The Forum is still new and as new members join and discussions start, we want to learn what you want to post. Hence, this category is a catch-all for posts that do not fit elsewhere.\"><span class=\"badge-category__name\">General</span></span></a>\n  </div>\n  <blockquote>\n    Hey folks! \nWe are excited to publish the Release Candidate of Typst 0.12 today. \nTypst 0.12 comes with multiple exciting new features. Here are just a few: \n\nFloating figures and placement across multiple columns\nAutomatic line numbering\nTypst now uses all cores of your CPU. Together with other optimizations, documents now compile between 2-6x faster\nHighly reduced PDF sizes, PDF/A export, and Emoji in PDF\nText show rules can now match across all text\nAll equations can now break across pages\nHe‚Ä¶\n  </blockquote>\n</aside>\n",
      "raw": "[quote=\"Eric, post:2, topic:930\"]\nStarting with Typst v0.12, which is currently available for testing\n[/quote]\n\nFor context and for anyone who wants to try out version `0.12.0-rc1`:\n\nhttps://forum.typst.app/t/typst-0-12-is-in-its-final-testing-period-your-help-is-wanted/916?u=afiaith",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 48,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 91
    }
  ],
  "scraped_at": "2025-06-10T09:57:24.544788"
}
{
  "topic_metadata": {
    "id": 935,
    "title": "How do I make the math area take up the whole width of the page?",
    "slug": "how-do-i-make-the-math-area-take-up-the-whole-width-of-the-page",
    "posts_count": 2,
    "created_at": "2024-10-05T06:08:51.667Z",
    "last_posted_at": "2024-10-05T17:30:07.970Z",
    "views": 174,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "xkevio",
    "tags": [
      "layout",
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 233
  },
  "posts": [
    {
      "id": 3432,
      "post_number": 1,
      "username": "Sky",
      "name": "Sky",
      "created_at": "2024-10-05T06:08:51.823Z",
      "updated_at": "2024-10-10T15:11:25.447Z",
      "cooked": "<p>Hello! I‚Äôm trying to add notes to my math. This is the code:</p>\n<pre><code class=\"lang-auto\">$\n&amp;a a(a union (b a))^* b &amp; \\\n=&amp; a a a* (b a a*)* b&amp; \"(Property g)\" \\\n=&amp; a (a a* b)* a a* b&amp; \"(Property h; \" R = a a*, S = b \")\" \\\n$\n</code></pre>\n<p>However, the math becomes super scrunched up, and centered on the page:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/3a0acc3bba3111334068bb931ecbbcfa4b7e3a10.png\" data-download-href=\"https://forum.typst.app/uploads/default/3a0acc3bba3111334068bb931ecbbcfa4b7e3a10\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/3a0acc3bba3111334068bb931ecbbcfa4b7e3a10_2_690x111.png\" alt=\"image\" data-base62-sha1=\"8hsPiFjPMpSr9nPtOyRA5qHc4I8\" width=\"690\" height=\"111\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/3a0acc3bba3111334068bb931ecbbcfa4b7e3a10_2_690x111.png, https://forum.typst.app/uploads/default/original/1X/3a0acc3bba3111334068bb931ecbbcfa4b7e3a10.png 1.5x, https://forum.typst.app/uploads/default/original/1X/3a0acc3bba3111334068bb931ecbbcfa4b7e3a10.png 2x\" data-dominant-color=\"FAFAFA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">772√ó125 15.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I really wanted it to look more like this:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/eb4638b90c6095f444ef0814ce0ddd8d2fa0cd29.png\" data-download-href=\"https://forum.typst.app/uploads/default/eb4638b90c6095f444ef0814ce0ddd8d2fa0cd29\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/eb4638b90c6095f444ef0814ce0ddd8d2fa0cd29_2_690x111.png\" alt=\"image\" data-base62-sha1=\"xzkEAduhTWIJK8jRKQKkpRYC4Rj\" width=\"690\" height=\"111\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/eb4638b90c6095f444ef0814ce0ddd8d2fa0cd29_2_690x111.png, https://forum.typst.app/uploads/default/original/1X/eb4638b90c6095f444ef0814ce0ddd8d2fa0cd29.png 1.5x, https://forum.typst.app/uploads/default/original/1X/eb4638b90c6095f444ef0814ce0ddd8d2fa0cd29.png 2x\" data-dominant-color=\"FAFAFA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">772√ó125 15.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>However, I couldn‚Äôt figure out how to style the math area in the docs. The docs are ALMOST helpful.</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/math#alignment\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/math#alignment\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/math#alignment\" target=\"_blank\" rel=\"noopener\">Math ‚Äì Typst Documentation</a></h3>\n\n  <p>Documentation for functions related to Math in Typst.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>How can I fix this? Thank you.</p>",
      "raw": "Hello! I'm trying to add notes to my math. This is the code:\n\n```\n$\n&a a(a union (b a))^* b & \\\n=& a a a* (b a a*)* b& \"(Property g)\" \\\n=& a (a a* b)* a a* b& \"(Property h; \" R = a a*, S = b \")\" \\\n$\n```\n\nHowever, the math becomes super scrunched up, and centered on the page:\n![image|690x111](upload://8hsPiFjPMpSr9nPtOyRA5qHc4I8.png)\n\nI really wanted it to look more like this:\n![image|690x111](upload://xzkEAduhTWIJK8jRKQKkpRYC4Rj.png)\n\nHowever, I couldn't figure out how to style the math area in the docs. The docs are ALMOST helpful.\n\nhttps://typst.app/docs/reference/math#alignment\n\nHow can I fix this? Thank you.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 533.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 541
    },
    {
      "id": 3463,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-05T17:30:07.970Z",
      "updated_at": "2024-10-05T17:30:07.970Z",
      "cooked": "<p>Typst will scale math blocks only as big as they need to be. You could in theory increase the block width manually with something like:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation.where(block: true): set block(width: 100%)\n</code></pre>\n<p>but that might lead to other layouting issues. Rather, I recommend manually inserting horizontal spaces where you need them to be as Typst‚Äôs align environment does not do that on its own. Either use the pre-defined spaces like <code>quad</code> or <code>wide</code> or just <code>#h(5cm)</code> directly.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$\n&amp;a a(a union (b a))^* b &amp; \\\n=&amp; a a a* (b a a*)* b&amp; #h(3cm) \"(Property g)\" \\\n=&amp; a (a a* b)* a a* b&amp; #h(3cm) \"(Property h; \" R = a a*, S = b \")\" \\\n$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/98d5c379ee8e0b0a1f7331d3fc1618fce2afd758.png\" alt=\"image\" data-base62-sha1=\"lO2yPO4YASIGwKzHS4w94exGURy\" width=\"531\" height=\"94\"></p>",
      "raw": "Typst will scale math blocks only as big as they need to be. You could in theory increase the block width manually with something like:\n\n```typ\n#show math.equation.where(block: true): set block(width: 100%)\n```\n\nbut that might lead to other layouting issues. Rather, I recommend manually inserting horizontal spaces where you need them to be as Typst's align environment does not do that on its own. Either use the pre-defined spaces like `quad` or `wide` or just `#h(5cm)` directly.\n\n```typ\n$\n&a a(a union (b a))^* b & \\\n=& a a a* (b a a*)* b& #h(3cm) \"(Property g)\" \\\n=& a (a a* b)* a a* b& #h(3cm) \"(Property h; \" R = a a*, S = b \")\" \\\n$\n```\n\n![image|531x94](upload://lO2yPO4YASIGwKzHS4w94exGURy.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 41,
      "score": 33.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    }
  ],
  "scraped_at": "2025-06-10T09:57:23.794115"
}
{
  "topic_metadata": {
    "id": 937,
    "title": "How to sum column values in a table?",
    "slug": "how-to-sum-column-values-in-a-table",
    "posts_count": 11,
    "created_at": "2024-10-05T07:49:58.429Z",
    "last_posted_at": "2024-10-23T22:07:20.370Z",
    "views": 549,
    "like_count": 3,
    "reply_count": 7,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "scripting",
      "tables"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1040
  },
  "posts": [
    {
      "id": 3434,
      "post_number": 1,
      "username": "voyager",
      "name": "voyager",
      "created_at": "2024-10-05T07:49:58.585Z",
      "updated_at": "2024-10-10T14:57:49.223Z",
      "cooked": "<p>is there a way to sum column values in a standard table?</p>",
      "raw": "is there a way to sum column values in a standard table?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 64,
      "score": 2472.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 415
    },
    {
      "id": 3445,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-05T12:41:43.385Z",
      "updated_at": "2024-10-23T21:31:36.116Z",
      "cooked": "<p>Yes, there are just two things to make sure:</p>\n<ol>\n<li>you need to store the data somewhere <em>before</em> creating the table</li>\n<li>you need to make sure that you operate on numbers and not <code>content</code></li>\n</ol>\n<p>For demonstration, let‚Äôs look at a table you may be starting with:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#table(\n  columns: 2,\n  align: right,\n  stroke: none,\n  table.header([Col A], [Col B]),\n  table.hline(),\n  [1], [2],\n  [3], [4],\n  [5], [6],\n  table.hline(),\n  [9],\n  [12],\n)\n</code></pre>\n<p>This table has three rows of actual data, a header, and manually calculated column sums.</p>\n<p>Advice 1 means you should create a variable to store the data before putting it into the table:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let data = (\n  ([1], [2]),\n  ([3], [4]),\n  ([5], [6]),\n)\n\n#table(\n  // ...\n  table.hline(),\n  ..data.flatten(),\n  table.hline(),\n  // ...\n)\n</code></pre>\n<p><code>data</code> contains an array of arrays ‚Äì each element is a row, and each row consists of the two columns. This is easier for us to work with, but we need <code>flatten()</code> because <code>table()</code> doesn‚Äôt accept this kind of nested array.</p>\n<p>Advice 2 means that instead of writing <code>[1]</code>, we should just use <code>1</code>, so that we can actually calculate something:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let data = (\n  (1, 2),\n  (3, 4),\n  (5, 6),\n)\n\n#table(\n  // ...\n  table.hline(),\n  ..data.flatten().map(num =&gt; [#num]),\n  table.hline(),\n  // ...\n)\n</code></pre>\n<p>Again, <code>table()</code> can‚Äôt simply show numbers, thus I also used <code>map(num =&gt; [#num])</code> to convert each number back into content before displaying.</p>\n<p>But by doing this, we‚Äôre now ready to actually do calculations with the numbers:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// ...\n\n#let col-a-sum = data.map(row =&gt; row.at(0)).sum()\n#let col-b-sum = data.map(row =&gt; row.at(1)).sum()\n\n#table(\n  // ...\n  table.hline(),\n  ..data.flatten().map(num =&gt; [#num]),\n  table.hline(),\n  [#col-a-sum], [#col-b-sum],\n)\n</code></pre>\n<p>This extracts from each row the first or second column, respectively, and sums them up. Then, the numbers are added to the table as content.</p>\n<p>In this example, all columns were summed up. To avoid duplication, you could do all columns in a loop like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let col-sums = ()\n#for i in array.range(data.first().len()) {\n  let col-sum = data.map(row =&gt; row.at(i)).sum()\n  col-sums.push(col-sum)\n}\n\n#table(\n  // ...\n  ..col-sums.map(num =&gt; [#num]),\n)\n</code></pre>\n<p>This can be shortened in a few ways; I wanted to show a loop as the main solution because it‚Äôs not as terse as these other options, but they do exist:</p>\n<details>\n<summary>\nShorter sums for all columns</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// like the loop before, but using `map()`\n// instead of pushing element by element\n#let col-sums = array.range(data.first().len()).map(i =&gt; {\n  data.map(row =&gt; row.at(i)).sum()\n})\n\n// using a sort of transpose operation to get\n// an array of columns from the array of rows\n#let col-sums = array.zip(..data).map(array.sum)\n</code></pre>\n</details>\n<p>As a final example, here‚Äôs how to sum up all columns read from a csv file with header:</p>\n<details>\n<summary>\nTable with column sums from CSV</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let csv-data = csv.decode(```\nCol A,Col B\n1,2\n3,4\n5,6\n```.text)\n// When the data come from a file, you'd write this instead:\n// #let csv-data = csv(\"filename.csv\")\n\n#let (header, ..data) = csv-data\n#let col-sums = array.zip(..data).map(column =&gt; column.map(int).sum())\n\n#table(\n  columns: 2,\n  align: right,\n  stroke: none,\n  table.header(..header),\n  table.hline(),\n  ..data.flatten(),\n  table.hline(),\n  ..col-sums.map(num =&gt; [#num]),\n)\n</code></pre>\n<p>What‚Äôs a bit different here is that instead of having to convert the data to <code>content</code>, it comes out of the csv file as strings. So we don‚Äôt need to convert to content (strings work in tables), but <em>do</em> need to convert each number to <code>int</code> before calculating.</p>\n</details>",
      "raw": "Yes, there are just two things to make sure:\n1. you need to store the data somewhere _before_ creating the table\n2. you need to make sure that you operate on numbers and not `content`\n\nFor demonstration, let's look at a table you may be starting with:\n```typ\n#table(\n  columns: 2,\n  align: right,\n  stroke: none,\n  table.header([Col A], [Col B]),\n  table.hline(),\n  [1], [2],\n  [3], [4],\n  [5], [6],\n  table.hline(),\n  [9],\n  [12],\n)\n```\nThis table has three rows of actual data, a header, and manually calculated column sums.\n\nAdvice 1 means you should create a variable to store the data before putting it into the table:\n```typ\n#let data = (\n  ([1], [2]),\n  ([3], [4]),\n  ([5], [6]),\n)\n\n#table(\n  // ...\n  table.hline(),\n  ..data.flatten(),\n  table.hline(),\n  // ...\n)\n```\n`data` contains an array of arrays -- each element is a row, and each row consists of the two columns. This is easier for us to work with, but we need `flatten()` because `table()` doesn't accept this kind of nested array.\n\nAdvice 2 means that instead of writing `[1]`, we should just use `1`, so that we can actually calculate something:\n```typ\n#let data = (\n  (1, 2),\n  (3, 4),\n  (5, 6),\n)\n\n#table(\n  // ...\n  table.hline(),\n  ..data.flatten().map(num => [#num]),\n  table.hline(),\n  // ...\n)\n```\nAgain, `table()` can't simply show numbers, thus I also used `map(num => [#num])` to convert each number back into content before displaying.\n\nBut by doing this, we're now ready to actually do calculations with the numbers:\n```typ\n// ...\n\n#let col-a-sum = data.map(row => row.at(0)).sum()\n#let col-b-sum = data.map(row => row.at(1)).sum()\n\n#table(\n  // ...\n  table.hline(),\n  ..data.flatten().map(num => [#num]),\n  table.hline(),\n  [#col-a-sum], [#col-b-sum],\n)\n```\nThis extracts from each row the first or second column, respectively, and sums them up. Then, the numbers are added to the table as content.\n\nIn this example, all columns were summed up. To avoid duplication, you could do all columns in a loop like this:\n```typ\n#let col-sums = ()\n#for i in array.range(data.first().len()) {\n  let col-sum = data.map(row => row.at(i)).sum()\n  col-sums.push(col-sum)\n}\n\n#table(\n  // ...\n  ..col-sums.map(num => [#num]),\n)\n```\nThis can be shortened in a few ways; I wanted to show a loop as the main solution because it's not as terse as these other options, but they do exist:\n\n[details=\"Shorter sums for all columns\"]\n```typ\n// like the loop before, but using `map()`\n// instead of pushing element by element\n#let col-sums = array.range(data.first().len()).map(i => {\n  data.map(row => row.at(i)).sum()\n})\n\n// using a sort of transpose operation to get\n// an array of columns from the array of rows\n#let col-sums = array.zip(..data).map(array.sum)\n```\n[/details]\n\nAs a final example, here's how to sum up all columns read from a csv file with header:\n\n[details=\"Table with column sums from CSV\"]\n```typ\n#let csv-data = csv.decode(```\nCol A,Col B\n1,2\n3,4\n5,6\n```.text)\n// When the data come from a file, you'd write this instead:\n// #let csv-data = csv(\"filename.csv\")\n\n#let (header, ..data) = csv-data\n#let col-sums = array.zip(..data).map(column => column.map(int).sum())\n\n#table(\n  columns: 2,\n  align: right,\n  stroke: none,\n  table.header(..header),\n  table.hline(),\n  ..data.flatten(),\n  table.hline(),\n  ..col-sums.map(num => [#num]),\n)\n```\n\nWhat's a bit different here is that instead of having to convert the data to `content`, it comes out of the csv file as strings. So we don't need to convert to content (strings work in tables), but _do_ need to convert each number to `int` before calculating.\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 3,
      "quote_count": 0,
      "like_count": 1,
      "reads": 63,
      "score": 257.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3446,
      "post_number": 3,
      "username": "raimann",
      "name": "Felipe Raimann",
      "created_at": "2024-10-05T13:06:55.317Z",
      "updated_at": "2024-10-05T13:08:15.877Z",
      "cooked": "<p>Please see <a href=\"https://github.com/Amelia-Mowers/typst-tabut\" rel=\"noopener nofollow ugc\">tabut</a> package. From \" Aggregation using Map and Sum\" of their docs:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"usd.typ\": usd\n#import \"example-data/titanic.typ\": titanic, classes\n\n#table(\n  columns: (auto, auto),\n  [*Fare, Total:*], [#usd(titanic.map(r =&gt; r.Fare).sum())],\n  [*Fare, Avg:*], [#usd(titanic.map(r =&gt; r.Fare).sum() / titanic.len())], \n  stroke: none\n)\n</code></pre>",
      "raw": "Please see [tabut](https://github.com/Amelia-Mowers/typst-tabut) package. From \" Aggregation using Map and Sum\" of their docs:\n\n```typst\n#import \"usd.typ\": usd\n#import \"example-data/titanic.typ\": titanic, classes\n\n#table(\n  columns: (auto, auto),\n  [*Fare, Total:*], [#usd(titanic.map(r => r.Fare).sum())],\n  [*Fare, Avg:*], [#usd(titanic.map(r => r.Fare).sum() / titanic.len())], \n  stroke: none\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 51,
      "score": 70.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 10
    },
    {
      "id": 3456,
      "post_number": 4,
      "username": "voyager",
      "name": "voyager",
      "created_at": "2024-10-05T15:29:41.071Z",
      "updated_at": "2024-10-05T15:29:41.071Z",
      "cooked": "<p>Thanks a lot.<br>\nI will try to adapt to my tables</p>",
      "raw": "Thanks a lot.\nI will try to adapt to my tables",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 415
    },
    {
      "id": 3457,
      "post_number": 5,
      "username": "voyager",
      "name": "voyager",
      "created_at": "2024-10-05T15:30:31.580Z",
      "updated_at": "2024-10-05T15:30:31.580Z",
      "cooked": "<p>OK I will look. Thank a lots</p>",
      "raw": "OK I will look. Thank a lots",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 44,
      "score": 23.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 415
    },
    {
      "id": 4580,
      "post_number": 6,
      "username": "Walter_H_Schreiber",
      "name": "Walter H. Schreiber",
      "created_at": "2024-10-23T19:25:35.698Z",
      "updated_at": "2024-10-23T19:32:54.012Z",
      "cooked": "<p>Given the following code reading data from a csv-File:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let csv-data = csv.decode(```\nText, Value\n\"A\",2\n\"B\",4.5\n\"C\",6\n```.text)\n\n#let (header, ..data) = csv-data\nThis I have copied from another example.\n</code></pre>\n<p>How can I get the the sum of the variable ‚ÄúValue‚Äù. I tried all kind of variations, breaking down much more complex operations, but to no avail.</p>",
      "raw": "Given the following code reading data from a csv-File:\n\n````typ\n#let csv-data = csv.decode(```\nText, Value\n\"A\",2\n\"B\",4.5\n\"C\",6\n```.text)\n\n#let (header, ..data) = csv-data\nThis I have copied from another example.\n````\n\nHow can I get the the sum of the variable \"Value\". I tried all kind of variations, breaking down much more complex operations, but to no avail.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 12.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 429
    },
    {
      "id": 4583,
      "post_number": 7,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-23T19:34:19.509Z",
      "updated_at": "2024-10-23T19:34:19.509Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"SillyFreak\" data-post=\"2\" data-topic=\"937\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/sillyfreak/48/1483_2.png\" class=\"avatar\"> SillyFreak:</div>\n<blockquote>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let col-b-sum = data.map(row =&gt; row.at(1)).sum()\n</code></pre>\n</blockquote>\n</aside>\n<p>and re csv:</p>\n<aside class=\"quote no-group\" data-username=\"SillyFreak\" data-post=\"2\" data-topic=\"937\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/sillyfreak/48/1483_2.png\" class=\"avatar\"> SillyFreak:</div>\n<blockquote>\n<p>What‚Äôs a bit different here is that instead of having to convert the data to <code>content</code>, it comes out of the csv file as strings. So we don‚Äôt need to convert to content (strings work in tables), but <em>do</em> need to convert each number to <code>int</code> before calculating.</p>\n</blockquote>\n</aside>\n<p>Is there a problem with doing it this way?</p>",
      "raw": "[quote=\"SillyFreak, post:2, topic:937\"]\n```typ\n#let col-b-sum = data.map(row => row.at(1)).sum()\n```\n[/quote]\n\nand re csv:\n\n[quote=\"SillyFreak, post:2, topic:937\"]\nWhat‚Äôs a bit different here is that instead of having to convert the data to `content`, it comes out of the csv file as strings. So we don‚Äôt need to convert to content (strings work in tables), but *do* need to convert each number to `int` before calculating.\n[/quote]\n\nIs there a problem with doing it this way?",
      "reply_to_post_number": 6,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 0,
      "reads": 34,
      "score": 41.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 4584,
      "post_number": 8,
      "username": "Walter_H_Schreiber",
      "name": "Walter H. Schreiber",
      "created_at": "2024-10-23T20:03:39.055Z",
      "updated_at": "2024-10-23T20:03:39.055Z",
      "cooked": "<p>Thank you for the fast answer.</p>\n<p>Regrettably <span class=\"hashtag-raw\">#col-b-sum</span> returns 24.56 which is a string concatenation of the values.</p>\n<p>I had this result before in one of my myriad attempts.</p>",
      "raw": "Thank you for the fast answer.\n\nRegrettably #col-b-sum returns 24.56 which is a string concatenation of the values.\n\nI had this result before in one of my myriad attempts.",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 21.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 429
    },
    {
      "id": 4587,
      "post_number": 9,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-23T21:30:43.065Z",
      "updated_at": "2024-10-23T21:30:43.065Z",
      "cooked": "<p>That‚Äôs what the</p>\n<aside class=\"quote no-group\" data-username=\"SillyFreak\" data-post=\"2\" data-topic=\"937\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/sillyfreak/48/1483_2.png\" class=\"avatar\"> SillyFreak:</div>\n<blockquote>\n<p>So we don‚Äôt need to convert to content (strings work in tables), but <em>do</em> need to convert each number to <code>int</code> before calculating.</p>\n</blockquote>\n</aside>\n<p>part is about. If you look at the CSV snippet, it has a <code>column.map(int)</code> in there, to convert the strings into integers. Admittedly, it‚Äôs easy to miss when you don‚Äôt look what you‚Äôre looking for. The complete adapted code (but converting to float, not int) would be this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let col-b-sum = data.map(row =&gt; float(row.at(1))).sum()\n</code></pre>",
      "raw": "That's what the\n\n[quote=\"SillyFreak, post:2, topic:937\"]\nSo we don‚Äôt need to convert to content (strings work in tables), but *do* need to convert each number to `int` before calculating.\n[/quote]\n\npart is about. If you look at the CSV snippet, it has a `column.map(int)` in there, to convert the strings into integers. Admittedly, it's easy to miss when you don't look what you're looking for. The complete adapted code (but converting to float, not int) would be this:\n```typ\n#let col-b-sum = data.map(row => float(row.at(1))).sum()\n```",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 32,
      "score": 21.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 4590,
      "post_number": 10,
      "username": "Walter_H_Schreiber",
      "name": "Walter H. Schreiber",
      "created_at": "2024-10-23T21:57:19.653Z",
      "updated_at": "2024-10-30T13:13:52.643Z",
      "cooked": "<p>I solved it myself</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let csv-data = csv.decode(```\nText, Value\n\"A\",2\n\"B\",4.5\n\"C\",6\n```.text)\n\n#let (header, ..data) = csv-data\n\n#let numeric_data = data.map(row =&gt; float(row.at(1))) // convert to float\n#let Value_Sum = numeric_data.sum()\n\n#Value_Sum\n</code></pre>",
      "raw": "I solved it myself\n```typ\n#let csv-data = csv.decode(```\nText, Value\n\"A\",2\n\"B\",4.5\n\"C\",6\n```.text)\n\n#let (header, ..data) = csv-data\n\n#let numeric_data = data.map(row => float(row.at(1))) // convert to float\n#let Value_Sum = numeric_data.sum()\n\n#Value_Sum\n```",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 429
    },
    {
      "id": 4591,
      "post_number": 11,
      "username": "Walter_H_Schreiber",
      "name": "Walter H. Schreiber",
      "created_at": "2024-10-23T22:07:20.370Z",
      "updated_at": "2024-10-23T22:07:20.370Z",
      "cooked": "<p>Sorry, had not seen your answer early enough, more elegant than ‚Äòmy‚Äô solution.</p>\n<p>Thanks a lot for your assistance.</p>",
      "raw": "Sorry, had not seen your answer early enough, more elegant than 'my' solution.\n\nThanks a lot for your assistance.",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 16.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 429
    }
  ],
  "scraped_at": "2025-06-10T09:57:23.084211"
}
{
  "topic_metadata": {
    "id": 938,
    "title": "How to set the delim of a single matrix to none?",
    "slug": "how-to-set-the-delim-of-a-single-matrix-to-none",
    "posts_count": 3,
    "created_at": "2024-10-05T07:57:40.265Z",
    "last_posted_at": "2024-10-05T08:38:06.748Z",
    "views": 146,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "mkorje",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 180
  },
  "posts": [
    {
      "id": 3435,
      "post_number": 1,
      "username": "Asta",
      "name": "Èõ™ÂçÉÂπª",
      "created_at": "2024-10-05T07:57:40.358Z",
      "updated_at": "2024-10-05T07:57:40.358Z",
      "cooked": "<p>I want to change the delim of a matrix to none.<br>\nOf course, this works:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set math.mat(delim: none)\n$mat(1, 2)$\n</code></pre>\n<p>I only want to change this matrix, instead of all matrices below, so I want to use code like this</p>\n<pre><code class=\"lang-auto\">$mat(1, 2, delim: none)$\n</code></pre>\n<p>But this leads to an error.</p>\n<p>In addition, code like</p>\n<pre><code class=\"lang-auto\">$mat(1, 2, delim: \"[\")$\n</code></pre>\n<p>does not lead to any error.</p>\n<p>I am not familiar with programming, did I do something wrong?</p>",
      "raw": "I want to change the delim of a matrix to none. \nOf course, this works:\n```typ ... \n#set math.mat(delim: none)\n$mat(1, 2)$\n```\n\nI only want to change this matrix, instead of all matrices below, so I want to use code like this\n```typ...\n$mat(1, 2, delim: none)$\n```\nBut this leads to an error.\n\nIn addition, code like\n```typ...\n$mat(1, 2, delim: \"[\")$\n```\ndoes not lead to any error.\n\nI am not familiar with programming, did I do something wrong?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 669.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 441
    },
    {
      "id": 3436,
      "post_number": 2,
      "username": "mkorje",
      "name": "Max",
      "created_at": "2024-10-05T08:36:59.131Z",
      "updated_at": "2024-10-05T08:37:16.491Z",
      "cooked": "<p>You need to prefix <code>none</code> with a hashtag (switch to code mode), since you are in math mode. For example,</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$mat(1, 2, delim: #none)$\n</code></pre>",
      "raw": "You need to prefix `none` with a hashtag (switch to code mode), since you are in math mode. For example,\n```typ\n$mat(1, 2, delim: #none)$\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 76
    },
    {
      "id": 3437,
      "post_number": 3,
      "username": "flokl",
      "name": "",
      "created_at": "2024-10-05T08:38:06.748Z",
      "updated_at": "2024-10-05T08:38:06.748Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/asta\">@Asta</a>,<br>\ninside math mode (marked by <code>$..$</code>), function calls work a bit different see <a href=\"https://typst.app/docs/reference/math/#function-calls\">Math - Function Calls</a>.  Your third example works because strings are a special case. In your non working second example <code>$mat(1, 2, delim: none)$</code> the <code>none</code> gets interpreted as an variable thus the error. You have to explicitly enter code mode with <code>#none</code> so that Typst can correctly interpreted it.</p>",
      "raw": "Hi @Asta,\ninside math mode (marked by `$..$`), function calls work a bit different see [Math - Function Calls](https://typst.app/docs/reference/math/#function-calls).  Your third example works because strings are a special case. In your non working second example `$mat(1, 2, delim: none)$` the `none` gets interpreted as an variable thus the error. You have to explicitly enter code mode with `#none` so that Typst can correctly interpreted it.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    }
  ],
  "scraped_at": "2025-06-10T09:57:22.314122"
}
{
  "topic_metadata": {
    "id": 941,
    "title": "How can I use function 'measure' inside 'grid' to align two images?",
    "slug": "how-can-i-use-function-measure-inside-grid-to-align-two-images",
    "posts_count": 2,
    "created_at": "2024-10-05T09:56:32.357Z",
    "last_posted_at": "2024-10-05T12:04:48.611Z",
    "views": 226,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "layout",
      "measure"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 153
  },
  "posts": [
    {
      "id": 3442,
      "post_number": 1,
      "username": "David_Hajage",
      "name": "David Hajage",
      "created_at": "2024-10-05T09:56:32.459Z",
      "updated_at": "2024-10-10T16:06:26.541Z",
      "cooked": "<p>Hello,<br>\nI would like to place two images side by side using the grid function, ensuring that the height of the right image is the same as the height of the left image. To do this, I‚Äôve tried using the measure function (new in Typst 0.12) within the grid function, but without success. Could you tell me if this is possible, and how?<br>\nThanks! (the code I‚Äôve tried just below)</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#grid(\n  columns: (1fr, 1fr),\n  rows: (auto),\n  gutter: 0.2in,\n  \n  image(\"image1.jpg\"),\n  image(\"image2.jpg\", height: context measure(image(\"image1.jpg\")).height)\n)\n</code></pre>\n<p>&nbsp;</p>\n<pre><code class=\"lang-auto\">error: expected auto, relative length, or fraction, found content\n</code></pre>",
      "raw": "Hello, \nI would like to place two images side by side using the grid function, ensuring that the height of the right image is the same as the height of the left image. To do this, I've tried using the measure function (new in Typst 0.12) within the grid function, but without success. Could you tell me if this is possible, and how?\nThanks! (the code I've tried just below)\n\n```typ\n#grid(\n  columns: (1fr, 1fr),\n  rows: (auto),\n  gutter: 0.2in,\n  \n  image(\"image1.jpg\"),\n  image(\"image2.jpg\", height: context measure(image(\"image1.jpg\")).height)\n)\n```\n&nbsp;\n```\nerror: expected auto, relative length, or fraction, found content\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 1186.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 66
    },
    {
      "id": 3444,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-05T12:04:48.611Z",
      "updated_at": "2024-10-05T12:04:48.611Z",
      "cooked": "<p>It looks like this is your problem:</p>\n<aside class=\"quote quote-modified\" data-post=\"2\" data-topic=\"164\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/laurmaedje/48/14_2.png\" class=\"avatar\">\n    <a href=\"https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164/2\">Why is the value I receive from context always content?</a> <a class=\"badge-category__wrapper \" href=\"/c/questions/5\"><span data-category-id=\"5\" style=\"--category-badge-color: #F7C000; --category-badge-text-color: #fdfdfd;\" data-drop-close=\"true\" class=\"badge-category \" title=\"Your questions about using Typst and the web app go in this category.\"><span class=\"badge-category__name\">Questions</span></span></a>\n  </div>\n  <blockquote>\n    When working with context, you need to put everything that depends on the contextual information into the context block/expression itself. The explicit context expression is a trade-off: You get to know where in the document you are (accessible via <a href=\"https://typst.app/docs/reference/introspection/here/\">here()</a>) and which set rules are active there (accessible via things like text.lang). In return, the context value itself becomes opaque. You cannot peek into it, so everything that depends on the contextual information must happen within it. \nLet‚Äôs lo‚Ä¶\n  </blockquote>\n</aside>\n\n<p>In short, you need to pull <code>context</code> out of the <code>image</code> function:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">  context image(\"image2.jpg\", height: measure(image(\"image1.jpg\")).height)\n</code></pre>",
      "raw": "It looks like this is your problem:\n\nhttps://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164/2\n\nIn short, you need to pull `context` out of the `image` function:\n```typc\n  context image(\"image2.jpg\", height: measure(image(\"image1.jpg\")).height)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 28,
      "score": 40.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:57:21.616666"
}
{
  "topic_metadata": {
    "id": 945,
    "title": "Why does the use of #strike cause a linebreak?",
    "slug": "why-does-the-use-of-strike-cause-a-linebreak",
    "posts_count": 3,
    "created_at": "2024-10-05T14:20:13.032Z",
    "last_posted_at": "2024-10-05T15:27:06.469Z",
    "views": 69,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 268
  },
  "posts": [
    {
      "id": 3449,
      "post_number": 1,
      "username": "Walter_H_Schreiber",
      "name": "Walter H. Schreiber",
      "created_at": "2024-10-05T14:20:13.176Z",
      "updated_at": "2024-10-05T14:48:51.583Z",
      "cooked": "<p>The following line causes a linebreak?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">  - #strike([09. Juni 2025]) Pfingstmontag \n</code></pre>\n<p>‚ÄúPfingstmontag‚Äù ist indented below the date, which is a list item.</p>",
      "raw": "The following line causes a linebreak?\n```typ\n  - #strike([09. Juni 2025]) Pfingstmontag \n```\n\"Pfingstmontag\" ist indented below the date, which is a list item.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 90.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 429
    },
    {
      "id": 3451,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-05T14:48:26.494Z",
      "updated_at": "2024-10-10T14:50:20.289Z",
      "cooked": "<p>An even more minimal reproduction is the following:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">- #[09. Juni 2025] Pfingstmontag\n</code></pre>\n<p>A hint that something‚Äôs wrong here is that the text says ‚Äú9. Juni‚Äù, not ‚Äú09. Juni‚Äù. Apparently, the content block <code>#[...]</code> or alternatively <code>strike()</code> causes the <code>09.</code> to be interpreted as the start of an enumerated list! Maybe someone from the team can comment on whether that is considered a bug or not.</p>\n<p>There are a few ways you can prevent this from happening:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">- #strike[\\09. Juni 2025] Pfingstmontag\n- #strike(\"09. Juni 2025\") Pfingstmontag\n</code></pre>\n<p>Personally, I would use the <code>datetime</code> type combined with the <code>datify</code> package to localize month names:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/datify:0.1.2\": custom-date-format\n#set text(lang: \"de\")\n\n#let format-date(date) = context custom-date-format(date, \"DD. Month YYYY\", text.lang)\n\n- #strike(format-date(datetime(year: 2025, month: 12, day: 9))) Pfingstmontag\n\n// or, if you type the dates manually and don't want to use the long datetime constructor:\n#let format-date(date) = {\n  let date = toml.decode(\"date = \" + date).date\n  context custom-date-format(date, \"DD. Month YYYY\", text.lang)\n}\n\n- #strike(format-date(\"2025-12-09\")) Pfingstmontag\n</code></pre>",
      "raw": "An even more minimal reproduction is the following:\n```typ\n- #[09. Juni 2025] Pfingstmontag\n```\nA hint that something's wrong here is that the text says \"9. Juni\", not \"09. Juni\". Apparently, the content block `#[...]` or alternatively `strike()` causes the `09.` to be interpreted as the start of an enumerated list! Maybe someone from the team can comment on whether that is considered a bug or not.\n\nThere are a few ways you can prevent this from happening:\n```typ\n- #strike[\\09. Juni 2025] Pfingstmontag\n- #strike(\"09. Juni 2025\") Pfingstmontag\n```\nPersonally, I would use the `datetime` type combined with the `datify` package to localize month names:\n```typ\n#import \"@preview/datify:0.1.2\": custom-date-format\n#set text(lang: \"de\")\n\n#let format-date(date) = context custom-date-format(date, \"DD. Month YYYY\", text.lang)\n\n- #strike(format-date(datetime(year: 2025, month: 12, day: 9))) Pfingstmontag\n\n// or, if you type the dates manually and don't want to use the long datetime constructor:\n#let format-date(date) = {\n  let date = toml.decode(\"date = \" + date).date\n  context custom-date-format(date, \"DD. Month YYYY\", text.lang)\n}\n\n- #strike(format-date(\"2025-12-09\")) Pfingstmontag\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 28,
      "score": 20.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3455,
      "post_number": 3,
      "username": "Walter_H_Schreiber",
      "name": "Walter H. Schreiber",
      "created_at": "2024-10-05T15:27:06.469Z",
      "updated_at": "2024-10-05T15:27:06.469Z",
      "cooked": "<p>Great answer. You got the eyes of an eagle! It did not occur to me that it could have been the start of an enumeration. In ‚Äòregular‚Äô markup I might have caught it but as typst uses ‚Äò+‚Äô I did not think of it. Although I had read at some time that enumerations could be skipped/restarted etc.</p>",
      "raw": "Great answer. You got the eyes of an eagle! It did not occur to me that it could have been the start of an enumeration. In 'regular' markup I might have caught it but as typst uses '+' I did not think of it. Although I had read at some time that enumerations could be skipped/restarted etc.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 49.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 429
    }
  ],
  "scraped_at": "2025-06-10T09:57:20.533449"
}
{
  "topic_metadata": {
    "id": 948,
    "title": "How can I right align the QED symbol after a proof?",
    "slug": "how-can-i-right-align-the-qed-symbol-after-a-proof",
    "posts_count": 6,
    "created_at": "2024-10-05T15:30:50.960Z",
    "last_posted_at": "2024-10-06T08:39:46.663Z",
    "views": 724,
    "like_count": 7,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "laurmaedje",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 699
  },
  "posts": [
    {
      "id": 3458,
      "post_number": 1,
      "username": "lukejanicke",
      "name": "Luke Janicke",
      "created_at": "2024-10-05T15:30:51.375Z",
      "updated_at": "2024-10-05T15:53:48.955Z",
      "cooked": "<p>The <code>#align</code> function puts it on a new line. I am trying to have it on the last line.</p>\n<p>The code below is so close. But there is a small amount of space added after the last line. The background colour is added to illustrate this. If I remove the QED <code>#place</code> code, the box finishes right under the last line. <strong>Where is this extra vertical space coming from?</strong> I also don‚Äôt know exactly how much negative <code>dy</code> offset is needed to line up perfectly with the last line.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let proof(body) = {\n  block(\n    width: 100%,\n    fill: rgb(\"#EEEEEE\"),\n  )[\n    #emph[Proof.]\n    #body\n    #place(\n      bottom + right,\n      float: true,\n      clearance: 0em,\n      dx: 0em,\n      dy: -0.6em,\n      $qed$\n    )\n  ]\n}\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/d4d429f63a4f3bbce4b0acf6f390af33164df4dc.png\" data-download-href=\"https://forum.typst.app/uploads/default/d4d429f63a4f3bbce4b0acf6f390af33164df4dc\" title=\"Screenshot 2024-10-05 at 23.31.33\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/d4d429f63a4f3bbce4b0acf6f390af33164df4dc_2_690x43.png\" alt=\"Screenshot 2024-10-05 at 23.31.33\" data-base62-sha1=\"umLMxaH2ZibnDkaq7xuLLvtwQIQ\" width=\"690\" height=\"43\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/d4d429f63a4f3bbce4b0acf6f390af33164df4dc_2_690x43.png, https://forum.typst.app/uploads/default/original/1X/d4d429f63a4f3bbce4b0acf6f390af33164df4dc.png 1.5x, https://forum.typst.app/uploads/default/original/1X/d4d429f63a4f3bbce4b0acf6f390af33164df4dc.png 2x\" data-dominant-color=\"EBEBEB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2024-10-05 at 23.31.33</span><span class=\"informations\">884√ó56 14.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "The `#align` function puts it on a new line. I am trying to have it on the last line.\n\nThe code below is so close. But there is a small amount of space added after the last line. The background colour is added to illustrate this. If I remove the QED `#place` code, the box finishes right under the last line. **Where is this extra vertical space coming from?** I also don't know exactly how much negative `dy` offset is needed to line up perfectly with the last line.\n\n```typ\n#let proof(body) = {\n  block(\n    width: 100%,\n    fill: rgb(\"#EEEEEE\"),\n  )[\n    #emph[Proof.]\n    #body\n    #place(\n      bottom + right,\n      float: true,\n      clearance: 0em,\n      dx: 0em,\n      dy: -0.6em,\n      $qed$\n    )\n  ]\n}\n```\n\n![Screenshot 2024-10-05 at 23.31.33|690x43](upload://umLMxaH2ZibnDkaq7xuLLvtwQIQ.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 3201.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 544
    },
    {
      "id": 3460,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-05T15:58:15.513Z",
      "updated_at": "2024-10-05T15:58:15.513Z",
      "cooked": "<p>Since you have the <code>float</code> parameter enabled, the <code>place</code> element will reserve some space at the bottom of the block to fit the QED symbol. The negative <code>dy</code> offset is only applied afterwards, so the space remains.</p>\n<p>It seems to me, that you don‚Äôt actually need this to be floating. When you just do</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#place(bottom + right, $qed$)\n</code></pre>\n<p>the QED symbol will still be positioned at the bottom right of the block.</p>",
      "raw": "Since you have the `float` parameter enabled, the `place` element will reserve some space at the bottom of the block to fit the QED symbol. The negative `dy` offset is only applied afterwards, so the space remains.\n\nIt seems to me, that you don't actually need this to be floating. When you just do\n```typ\n#place(bottom + right, $qed$)\n```\nthe QED symbol will still be positioned at the bottom right of the block.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 59,
      "score": 61.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 3461,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-05T16:06:32.301Z",
      "updated_at": "2024-10-05T16:06:32.301Z",
      "cooked": "<p>Although <code>float</code> is the problem with your <code>place()</code>, I would recomment an even simpler solution, using <code>h()</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let proof(body) = {\n  block(\n    width: 100%,\n    fill: rgb(\"#EEEEEE\"),\n  )[\n    _Proof._\n    #body\n    #h(1fr)\n    $qed$\n  ]\n}\n</code></pre>\n<p>This puts the QED symbol into the actual last line of the proof, and should therefore have the correct y position. The difference to the place variant is minuscule, though.</p>",
      "raw": "Although `float` is the problem with your `place()`, I would recomment an even simpler solution, using `h()`:\n```typ\n#let proof(body) = {\n  block(\n    width: 100%,\n    fill: rgb(\"#EEEEEE\"),\n  )[\n    _Proof._\n    #body\n    #h(1fr)\n    $qed$\n  ]\n}\n```\nThis puts the QED symbol into the actual last line of the proof, and should therefore have the correct y position. The difference to the place variant is minuscule, though.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 31.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3464,
      "post_number": 4,
      "username": "laurmaedje",
      "name": "Laurenz M√§dje",
      "created_at": "2024-10-05T17:50:54.026Z",
      "updated_at": "2024-10-29T13:04:06.420Z",
      "cooked": "<p>One unfortunate edge case with this solution is if the QED symbol doesn‚Äôt fit into the last line. Then, the <code>h(1fr)</code> remains in the second-to-last line and the QED symbol is on the left side of the last line.</p>\n<p>A possible fix is adding a Unicode Word Joiner (<code>sym.wj</code>) after the spacing.</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">#let proof(body) = block(width: 100%, fill: rgb(\"#EEEEEE\"), {\n  [_Proof._ ]\n  body\n  h(1fr)\n  sym.wj\n  sym.space.nobreak\n  $qed$\n})\n</code></pre>\n<p>However, this also forces the last preceding word to the next line. <em>If</em> this is not desirable, one could add a zero-width box before the spacing (which will then be forced to the next line instead of the last word, to no visible effect).</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">#let proof(body) = block(width: 100%, fill: rgb(\"#EEEEEE\"), {\n  [_Proof._ ]\n  body\n  box(width: 0pt)\n  h(1fr)\n  sym.wj\n  sym.space.nobreak\n  $qed$\n})\n</code></pre>\n<p>This is obviously somewhat obscure and requires intricate knowledge of Unicode and Typst‚Äôs paragraph layout. I also only came up with this solution now even though I‚Äôve thought about this problem a few times before. I‚Äôm not 100% sure whether there are cases where it doesn‚Äôt work correctly, but it any case it felt worth sharing.</p>\n<p>Edit: Added nobreak spaces to ensure that there is a minimum amount of space before the proof square.</p>",
      "raw": "One unfortunate edge case with this solution is if the QED symbol doesn't fit into the last line. Then, the `h(1fr)` remains in the second-to-last line and the QED symbol is on the left side of the last line.\n\nA possible fix is adding a Unicode Word Joiner (`sym.wj`) after the spacing.\n```typc\n#let proof(body) = block(width: 100%, fill: rgb(\"#EEEEEE\"), {\n  [_Proof._ ]\n  body\n  h(1fr)\n  sym.wj\n  sym.space.nobreak\n  $qed$\n})\n```\n\nHowever, this also forces the last preceding word to the next line. _If_ this is not desirable, one could add a zero-width box before the spacing (which will then be forced to the next line instead of the last word, to no visible effect).\n```typc\n#let proof(body) = block(width: 100%, fill: rgb(\"#EEEEEE\"), {\n  [_Proof._ ]\n  body\n  box(width: 0pt)\n  h(1fr)\n  sym.wj\n  sym.space.nobreak\n  $qed$\n})\n```\n\nThis is obviously somewhat obscure and requires intricate knowledge of Unicode and Typst's paragraph layout. I also only came up with this solution now even though I've thought about this problem a few times before. I'm not 100% sure whether there are cases where it doesn't work correctly, but it any case it felt worth sharing.\n\nEdit: Added nobreak spaces to ensure that there is a minimum amount of space before the proof square.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 6,
      "reads": 58,
      "score": 741.4,
      "accepted_answer": true,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 3476,
      "post_number": 5,
      "username": "lukejanicke",
      "name": "Luke Janicke",
      "created_at": "2024-10-06T03:16:17.127Z",
      "updated_at": "2024-10-06T04:03:57.762Z",
      "cooked": "<p>Thanks for these suggestions!</p>\n<p>Eric, that works! The only issue is the last characters of the proof write under the floating QED symbol. I solved that by adding an invisible QED symbol at the end of the line. A bit hacky. But it works. I also confirmed that the vertical alignment is pixel perfect the same as the inline invisible QED symbol. Which is nice to know.</p>\n<p>SillyFreak, that works except as laurmaedje noted. It at least makes more typographic sense than <code>#place</code> and float right. Maybe? Although, the float method as I implemented is pixel perfect identical vertical positioning.</p>\n<p>laurmaedje, that all seems to work perfectly for me, except <s>Typst is throwing errors and</s> it only works when I make the proof equal a block <code>proof(body) = block( ... , { content } )</code> and not when I put the block in the proof <code>#let proof(body) = { block( ... ) [ content ] }</code>.  I think that is code mode vs. markup mode.</p>\n<p>Sharing my testing code here: <a href=\"https://typst.app/project/rZPqTDi0wu3N0yIB8XQtQW\">Proof</a></p>",
      "raw": "Thanks for these suggestions!\n\nEric, that works! The only issue is the last characters of the proof write under the floating QED symbol. I solved that by adding an invisible QED symbol at the end of the line. A bit hacky. But it works. I also confirmed that the vertical alignment is pixel perfect the same as the inline invisible QED symbol. Which is nice to know.\n\nSillyFreak, that works except as laurmaedje noted. It at least makes more typographic sense than `#place` and float right. Maybe? Although, the float method as I implemented is pixel perfect identical vertical positioning.\n\nlaurmaedje, that all seems to work perfectly for me, except ~~Typst is throwing errors and~~ it only works when I make the proof equal a block `proof(body) = block( ... , { content } )` and not when I put the block in the proof `#let proof(body) = { block( ... ) [ content ] }`.  I think that is code mode vs. markup mode.\n\nSharing my testing code here: [Proof](https://typst.app/project/rZPqTDi0wu3N0yIB8XQtQW)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 55,
      "score": 65.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 544
    },
    {
      "id": 3479,
      "post_number": 6,
      "username": "laurmaedje",
      "name": "Laurenz M√§dje",
      "created_at": "2024-10-06T08:39:46.663Z",
      "updated_at": "2024-10-06T08:39:46.663Z",
      "cooked": "<p>Yes indeed, I used code mode because otherwise there will be extra spaces around the word joiner. Markup mode should also be possible, but you would need to write the things tightly after each other and use a semicolon to terminate the word joiner.</p>",
      "raw": "Yes indeed, I used code mode because otherwise there will be extra spaces around the word joiner. Markup mode should also be possible, but you would need to write the things tightly after each other and use a semicolon to terminate the word joiner.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 29.2,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    }
  ],
  "scraped_at": "2025-06-10T09:57:19.806246"
}
{
  "topic_metadata": {
    "id": 951,
    "title": "How to label equation with a symbol?",
    "slug": "how-to-label-equation-with-a-symbol",
    "posts_count": 2,
    "created_at": "2024-10-05T19:24:33.834Z",
    "last_posted_at": "2024-10-05T20:40:41.359Z",
    "views": 290,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "frozolotl",
    "tags": [
      "math",
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 143
  },
  "posts": [
    {
      "id": 3467,
      "post_number": 1,
      "username": "Chi_Zhang",
      "name": "Chi Zhang",
      "created_at": "2024-10-05T19:24:34.007Z",
      "updated_at": "2024-10-10T15:38:40.198Z",
      "cooked": "<p>In some contexts, such as proofs or beamer presentations, equations are sometimes labeled with symbols rather than numbers. One of my attempts is the following:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">  #set math.equation(numbering: \"(*)\",number-align: left)\n  $\n  f= u product g_i  space.thin  .\n  $\n</code></pre>\n<p>The result turns out to be a star in superscript.<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/dab654cdbe725e673cf811662a6aae5ccea6a5b8.png\" data-download-href=\"https://forum.typst.app/uploads/default/dab654cdbe725e673cf811662a6aae5ccea6a5b8\" title=\"Screenshot 2024-10-05 at 21.24.07\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/dab654cdbe725e673cf811662a6aae5ccea6a5b8_2_690x68.png\" alt=\"Screenshot 2024-10-05 at 21.24.07\" data-base62-sha1=\"vcOJlQBJPyo6xhkT4VDwLmt0pqU\" width=\"690\" height=\"68\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/dab654cdbe725e673cf811662a6aae5ccea6a5b8_2_690x68.png, https://forum.typst.app/uploads/default/optimized/1X/dab654cdbe725e673cf811662a6aae5ccea6a5b8_2_1035x102.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/dab654cdbe725e673cf811662a6aae5ccea6a5b8_2_1380x136.png 2x\" data-dominant-color=\"FCFCFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2024-10-05 at 21.24.07</span><span class=\"informations\">1532√ó152 17.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nIs there a way to make it normal size?</p>",
      "raw": "In some contexts, such as proofs or beamer presentations, equations are sometimes labeled with symbols rather than numbers. One of my attempts is the following:\n```typ\n  #set math.equation(numbering: \"(*)\",number-align: left)\n  $\n  f= u product g_i  space.thin  .\n  $\n```\nThe result turns out to be a star in superscript.\n![Screenshot 2024-10-05 at 21.24.07|690x68, 100%](upload://vcOJlQBJPyo6xhkT4VDwLmt0pqU.png)\nIs there a way to make it normal size?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 1403.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 310
    },
    {
      "id": 3471,
      "post_number": 2,
      "username": "frozolotl",
      "name": "",
      "created_at": "2024-10-05T20:40:41.359Z",
      "updated_at": "2024-10-05T20:40:41.359Z",
      "cooked": "<p>This is actually a normal asterisk, but we can replace it with a centered one.<br>\nI used <a href=\"https://graphemica.com/%E2%88%97\" rel=\"noopener nofollow ugc\">asterisk operator</a> in particular.<br>\nIf you prefer a different one, you can select one at <a href=\"https://graphemica.com/search?q=asterisk\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">asterisk | Graphemica Search</a>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set math.equation(\n  numbering: n =&gt; {\n    let symbols = (\"‚àó\", \"‚Ä†\", \"‚Ä°\", \"¬ß\", \"¬∂\", \"‚Äñ\")\n    let symbol = symbols.at(calc.rem(n - 1, symbols.len()))\n    [(#symbol)]\n  },\n  number-align: left,\n)\n\n$ f = u product g_i space.thin . $\n</code></pre>",
      "raw": "This is actually a normal asterisk, but we can replace it with a centered one.\nI used [asterisk operator](https://graphemica.com/%E2%88%97) in particular.\nIf you prefer a different one, you can select one at https://graphemica.com/search?q=asterisk.\n\n```typ\n#set math.equation(\n  numbering: n => {\n    let symbols = (\"‚àó\", \"‚Ä†\", \"‚Ä°\", \"¬ß\", \"¬∂\", \"‚Äñ\")\n    let symbol = symbols.at(calc.rem(n - 1, symbols.len()))\n    [(#symbol)]\n  },\n  number-align: left,\n)\n\n$ f = u product g_i space.thin . $\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 43,
      "score": 83.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 65
    }
  ],
  "scraped_at": "2025-06-10T09:57:19.054143"
}
{
  "topic_metadata": {
    "id": 952,
    "title": "How can I create show rules in a loop?",
    "slug": "how-can-i-create-show-rules-in-a-loop",
    "posts_count": 2,
    "created_at": "2024-10-05T19:29:20.130Z",
    "last_posted_at": "2024-10-05T19:29:34.453Z",
    "views": 589,
    "like_count": 5,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 1,
    "word_count": 883
  },
  "posts": [
    {
      "id": 3468,
      "post_number": 1,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-05T19:29:20.297Z",
      "updated_at": "2024-10-05T19:29:20.297Z",
      "cooked": "<p>Let‚Äôs say I have many words for which I want a show rule to treat them all with some transformation; say, I want them to all show up <code>strong</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show \"foo\": strong\n#show \"baz\": strong\n\nfoo bar baz\n</code></pre>\n<p>In the real case, there are obviously potentially many more targets for the show rules; how can I create these show rules without repeating myself? Ideally I want my targets to be stored in arrays and somehow process the elements of the array ‚Äì something like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let words = (\"foo\", \"baz\")\n#for word in words {\n  show word: strong\n}\n\nfoo bar baz\n</code></pre>\n<p>However, this approach does not work‚Ä¶</p>\n<hr>\n<p>Similarly, I may have many math symbols of which I want to change the default behavior:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show sym.lt: math.scripts\n#show sym.lt.eq: math.scripts\n\n$ a &lt;=_X b &lt;_X c $\n</code></pre>\n<p>Or something else; e.g. I want to make the content of several elements uppercase:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show emph: upper\n#show strong: upper\n\nUppercase _all_ the *things*!\n</code></pre>\n<p>Here‚Äôs an image of the show rules‚Äô effects:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/156f9964f6a6b454c01ef10aee832ea25f3cce8b.png\" data-download-href=\"https://forum.typst.app/uploads/default/156f9964f6a6b454c01ef10aee832ea25f3cce8b\" title=\"show-loop\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/156f9964f6a6b454c01ef10aee832ea25f3cce8b_2_317x374.png\" alt=\"show-loop\" data-base62-sha1=\"33D7SoYYUjqcjov67vB4znUie27\" width=\"317\" height=\"374\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/156f9964f6a6b454c01ef10aee832ea25f3cce8b_2_317x374.png, https://forum.typst.app/uploads/default/optimized/1X/156f9964f6a6b454c01ef10aee832ea25f3cce8b_2_475x561.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/156f9964f6a6b454c01ef10aee832ea25f3cce8b_2_634x748.png 2x\" data-dominant-color=\"F5F5F5\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">show-loop</span><span class=\"informations\">709√ó838 120 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>How can I solve the problem in these cases?</p>",
      "raw": "Let's say I have many words for which I want a show rule to treat them all with some transformation; say, I want them to all show up `strong`:\n```typ\n#show \"foo\": strong\n#show \"baz\": strong\n\nfoo bar baz\n```\nIn the real case, there are obviously potentially many more targets for the show rules; how can I create these show rules without repeating myself? Ideally I want my targets to be stored in arrays and somehow process the elements of the array -- something like this:\n```typ\n#let words = (\"foo\", \"baz\")\n#for word in words {\n  show word: strong\n}\n\nfoo bar baz\n```\n\nHowever, this approach does not work...\n\n---\n\nSimilarly, I may have many math symbols of which I want to change the default behavior:\n```typ\n#show sym.lt: math.scripts\n#show sym.lt.eq: math.scripts\n\n$ a <=_X b <_X c $\n```\nOr something else; e.g. I want to make the content of several elements uppercase:\n```typ\n#show emph: upper\n#show strong: upper\n\nUppercase _all_ the *things*!\n```\nHere's an image of the show rules' effects:\n\n![show-loop|423x499, 75%](upload://33D7SoYYUjqcjov67vB4znUie27.png)\n\nHow can I solve the problem in these cases?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 79,
      "score": 2245.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3469,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-05T19:29:34.453Z",
      "updated_at": "2025-01-30T19:56:15.531Z",
      "cooked": "<p>(Credit for this answer goes to <a class=\"mention\" href=\"/u/laurmaedje\">@laurmaedje</a> who wrote it <a href=\"https://discord.com/channels/1054443721975922748/1088371919725793360/1292183272394199171\">here</a>, <a href=\"https://discord.com/channels/1054443721975922748/1088371919725793360/1292216579496607849\">here</a>, and a few times earlier on Discord, and to <a class=\"mention\" href=\"/u/eric\">@Eric</a> for recommending <code>fold()</code>.)</p>\n<hr>\n<p>There is a general and a two more specific way to do this:</p>\n<ul>\n<li>using a loop or equivalent to generate and apply multiple show rules</li>\n<li>using regular expressions with alternatives (<code>|</code>)</li>\n<li>using <a href=\"https://typst.app/docs/reference/foundations/selector/#definitions-or\"><code>selector.or()</code></a></li>\n</ul>\n<p>since the specific ways cover the most common use cases and are also better performance-wise, let‚Äôs start with these:</p>\n<h2><a name=\"p-3469-regular-expressions-1\" class=\"anchor\" href=\"#p-3469-regular-expressions-1\"></a>Regular expressions</h2>\n<p>The first two cases actually only concern strings. With <code>\"foo\"</code> and <code>\"baz\"</code> it‚Äôs obvious, but the symbols can also be easily converted to strings and are generally treated by Typst this way. That means we can construct a regular expression that handles all the values in a single show rule:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let words = (\"foo\", \"baz\")\n#show regex(words.join(\"|\")): strong\n\nfoo bar baz\n\n#let symbols = (sym.lt, sym.lt.eq)\n#show regex(symbols.join(\"|\")): math.scripts\n\n$ a &lt;=_X b &lt;_X c $\n</code></pre>\n<details>\n<summary>\nDetour: matching whole words</summary>\n<p>If you want to match <em>words</em>, you‚Äôll usually only want to match <em>whole words</em>. The regular expression ‚Äúword boundary‚Äù matcher <code>\\b</code> can be used for this purpose:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let words = (\"his\", \"hers\")\n#show regex(words.map(word =&gt; \"\\b\" + word + \"\\b\").join(\"|\")): strong\n\nhis and hers but not this\n</code></pre>\n<p>The complete regex in this example ends up to be <code>\\bhis\\b|\\bhers\\b</code>, which means ‚Äúeither the complete word <em>his</em> or the complete word <em>hers</em>‚Äù</p>\n</details>\n<h2><a name=\"p-3469-selectoror-2\" class=\"anchor\" href=\"#p-3469-selectoror-2\"></a><code>selector.or()</code></h2>\n<p>The matches of a show rule are determined by a <a href=\"https://typst.app/docs/reference/foundations/selector/\"><code>selector</code></a>, and although Typst‚Äôs selectors can‚Äôt do everything, most cases where you want the same kind of <code>show</code> rules for multiple targets can be handled with <code>or()</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let elements = (emph, strong)\n#show selector.or(..elements): upper\n\nUppercase _all_ the *things*!\n</code></pre>\n<p>Regexes and strings can not be combined using <code>selector.or()</code>, so if you want to apply a rule to, say <code>(\"foo\", emph)</code>, you‚Äôll need to write two show rules; one with all the strings and regexes, the other with all the other targets.</p>\n<h2><a name=\"p-3469-actually-generating-show-rules-in-a-loop-3\" class=\"anchor\" href=\"#p-3469-actually-generating-show-rules-in-a-loop-3\"></a>Actually generating show rules in a loop</h2>\n<p>In case even that is not enough, there is still a way to <em>actually</em> generate show rules in a loop. First of all, what‚Äôs the problem with the original approach?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let words = (\"foo\", \"baz\")\n#for word in words {\n  show word: strong\n}\n\nfoo bar baz\n</code></pre>\n<p>Each show rule only applies until the end of the scope it appears in, and that is the current iteration of the loop. There is no content in the loop, so each show rule applies to nothing.</p>\n<p>The solution is to apply the same principles shown in the <a href=\"https://typst.app/docs/tutorial/making-a-template/#set-and-show-rules\">Making a Template</a> tutorial, just a bit more creatively. First, we move the (still manually duplicated) rules into a ‚Äúshow everything‚Äù rule:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show: body =&gt; {\n  show \"foo\": strong\n  show \"baz\": strong\n\n  body\n}\n\nfoo bar baz\n</code></pre>\n<p>We now have the rest of the document in a variable <code>body</code> which we can work with. Now, one solution is using a loop and replace <code>body</code> with something that has one extra show rule applied in each iteration:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let words = (\"foo\", \"baz\")\n#show: body =&gt; {\n  for word in words {\n    body = {\n      show word: strong\n      body\n    }\n  }\n  body\n}\n\nfoo bar baz\n</code></pre>\n<p>This works, but it can be slightly shorten by using the <a href=\"https://typst.app/docs/reference/foundations/array/#definitions-fold\"><code>array.fold()</code></a> method which is perfectly suited for this situation:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let words = (\"foo\", \"baz\")\n#show: body =&gt; words.fold(body, (body, word) =&gt; {\n  show word: strong\n  body\n})\n\nfoo bar baz\n</code></pre>\n<p>As mentioned above, this is not great for performance. Regardless of how you do it, having a large numbers of show rules active at the same time is not great. It‚Äôs usually okay if every show rule is written out, but creating them in a loop can hide how expensive a piece of code is. Whenever possible, the approaches above are preferable.</p>",
      "raw": "(Credit for this answer goes to @laurmaedje who wrote it [here](https://discord.com/channels/1054443721975922748/1088371919725793360/1292183272394199171), [here](https://discord.com/channels/1054443721975922748/1088371919725793360/1292216579496607849), and a few times earlier on Discord, and to @Eric for recommending `fold()`.)\n\n---\n\nThere is a general and a two more specific way to do this:\n- using a loop or equivalent to generate and apply multiple show rules\n- using regular expressions with alternatives (`|`)\n- using [`selector.or()`](https://typst.app/docs/reference/foundations/selector/#definitions-or)\n\nsince the specific ways cover the most common use cases and are also better performance-wise, let's start with these:\n\n## Regular expressions\n\nThe first two cases actually only concern strings. With `\"foo\"` and `\"baz\"` it's obvious, but the symbols can also be easily converted to strings and are generally treated by Typst this way. That means we can construct a regular expression that handles all the values in a single show rule:\n```typ\n#let words = (\"foo\", \"baz\")\n#show regex(words.join(\"|\")): strong\n\nfoo bar baz\n\n#let symbols = (sym.lt, sym.lt.eq)\n#show regex(symbols.join(\"|\")): math.scripts\n\n$ a <=_X b <_X c $\n```\n\n[details=\"Detour: matching whole words\"]\nIf you want to match _words_, you'll usually only want to match _whole words_. The regular expression \"word boundary\" matcher `\\b` can be used for this purpose:\n```typ\n#let words = (\"his\", \"hers\")\n#show regex(words.map(word => \"\\b\" + word + \"\\b\").join(\"|\")): strong\n\nhis and hers but not this\n```\nThe complete regex in this example ends up to be `\\bhis\\b|\\bhers\\b`, which means \"either the complete word _his_ or the complete word _hers_\"\n[/details]\n\n## `selector.or()`\n\nThe matches of a show rule are determined by a [`selector`](https://typst.app/docs/reference/foundations/selector/), and although Typst's selectors can't do everything, most cases where you want the same kind of `show` rules for multiple targets can be handled with `or()`:\n```typ\n#let elements = (emph, strong)\n#show selector.or(..elements): upper\n\nUppercase _all_ the *things*!\n```\n\nRegexes and strings can not be combined using `selector.or()`, so if you want to apply a rule to, say `(\"foo\", emph)`, you'll need to write two show rules; one with all the strings and regexes, the other with all the other targets.\n\n## Actually generating show rules in a loop\n\nIn case even that is not enough, there is still a way to _actually_ generate show rules in a loop. First of all, what's the problem with the original approach?\n```typ\n#let words = (\"foo\", \"baz\")\n#for word in words {\n  show word: strong\n}\n\nfoo bar baz\n```\nEach show rule only applies until the end of the scope it appears in, and that is the current iteration of the loop. There is no content in the loop, so each show rule applies to nothing.\n\nThe solution is to apply the same principles shown in the [Making a Template](https://typst.app/docs/tutorial/making-a-template/#set-and-show-rules) tutorial, just a bit more creatively. First, we move the (still manually duplicated) rules into a \"show everything\" rule:\n```typ\n#show: body => {\n  show \"foo\": strong\n  show \"baz\": strong\n\n  body\n}\n\nfoo bar baz\n```\nWe now have the rest of the document in a variable `body` which we can work with. Now, one solution is using a loop and replace `body` with something that has one extra show rule applied in each iteration:\n```typ\n#let words = (\"foo\", \"baz\")\n#show: body => {\n  for word in words {\n    body = {\n      show word: strong\n      body\n    }\n  }\n  body\n}\n\nfoo bar baz\n```\nThis works, but it can be slightly shorten by using the [`array.fold()`](https://typst.app/docs/reference/foundations/array/#definitions-fold) method which is perfectly suited for this situation:\n```typ\n#let words = (\"foo\", \"baz\")\n#show: body => words.fold(body, (body, word) => {\n  show word: strong\n  body\n})\n\nfoo bar baz\n```\n\nAs mentioned above, this is not great for performance. Regardless of how you do it, having a large numbers of show rules active at the same time is not great. It's usually okay if every show rule is written out, but creating them in a loop can hide how expensive a piece of code is. Whenever possible, the approaches above are preferable.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 5,
      "reads": 73,
      "score": 394.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:57:18.334113"
}
{
  "topic_metadata": {
    "id": 955,
    "title": "How to make each grid cell take up all available space?",
    "slug": "how-to-make-each-grid-cell-take-up-all-available-space",
    "posts_count": 9,
    "created_at": "2024-10-06T02:31:11.176Z",
    "last_posted_at": "2024-10-08T17:35:27.048Z",
    "views": 1004,
    "like_count": 6,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "layout",
      "grids"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1147
  },
  "posts": [
    {
      "id": 3474,
      "post_number": 1,
      "username": "AllanChain",
      "name": "AllanChain",
      "created_at": "2024-10-06T02:31:11.405Z",
      "updated_at": "2024-10-06T02:31:11.405Z",
      "cooked": "<p>Sorry, I can‚Äôt find a proper and concise way to describe the problem in the title. Let me explain in detail here.</p>\n<p>I‚Äôm making a poster with many color boxes. I want all boxes aligned and fill up all available vertical space and thus there is no extra blank areas. Here is a simplified version of it:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 300pt, height: 200pt)\n\n#set rect(\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  radius: 5pt,\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  gutter: 3pt,\n  grid.cell(rowspan: 2, rect[\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  rect[How to make this expand?],\n  rect[I want each cell to take up all available space.],\n  rect[I don't want to hard code heights of each row.],\n  rect[How to make this expand?],\n)\n</code></pre>\n<p>The result:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/6bb3bf636e7b4d78c912330d05b3ab8291919d77.png\" alt=\"Current result\" data-base62-sha1=\"fmMcczla0B6cBkLoM5QD55jdNbx\" width=\"600\" height=\"400\"><br>\nThe desired layout should look like the following:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/4b7774febcdaa32ee0155f104d6cec7c1a1b2b45.png\" alt=\"Desired layout\" data-base62-sha1=\"aLBKeFsN2BlRfUnPTZy9gGGg3Vb\" width=\"600\" height=\"400\"><br>\nIt is achieved by using <code>fill</code> provided by <code>grid</code>, but I don‚Äôt want to use it because it is much less flexible than <code>rect</code> or other things. For example, it cannot have <code>radius</code> set. Is it possible to make all <code>rect</code> automatically take up all vertical spaces?</p>",
      "raw": "Sorry, I can't find a proper and concise way to describe the problem in the title. Let me explain in detail here.\n\nI'm making a poster with many color boxes. I want all boxes aligned and fill up all available vertical space and thus there is no extra blank areas. Here is a simplified version of it:\n\n```typ\n#set page(width: 300pt, height: 200pt)\n\n#set rect(\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  radius: 5pt,\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  gutter: 3pt,\n  grid.cell(rowspan: 2, rect[\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  rect[How to make this expand?],\n  rect[I want each cell to take up all available space.],\n  rect[I don't want to hard code heights of each row.],\n  rect[How to make this expand?],\n)\n```\n\nThe result:\n![Current result|600x400](upload://fmMcczla0B6cBkLoM5QD55jdNbx.png)\nThe desired layout should look like the following:\n![Desired layout|600x400](upload://aLBKeFsN2BlRfUnPTZy9gGGg3Vb.png)\nIt is achieved by using `fill` provided by `grid`, but I don't want to use it because it is much less flexible than `rect` or other things. For example, it cannot have `radius` set. Is it possible to make all `rect` automatically take up all vertical spaces?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 75,
      "score": 4804.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 547
    },
    {
      "id": 3478,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2024-10-06T07:02:58.857Z",
      "updated_at": "2024-10-06T07:02:58.857Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/allanchain\">@AllanChain</a>,</p>\n<p>the <a href=\"https://typst.app/docs/reference/layout/fraction/\">Fraction</a> type can be used to fill the remaining space in a layout. You can set the height of the rect boxes with <code>#set rect(height: 1fr)</code> to take all the remaining space. Now you also have to limit the height of the grid with <code>rows: 1fr</code> otherwise the rect boxes span the entire page.</p>\n<details>\n<summary>\nCode</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(width: 300pt, height: 200pt)\n\n#set rect(\n  height: 1fr,\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  radius: 5pt,\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  rows: 1fr,\n  gutter: 3pt,\n  grid.cell(rowspan: 2, rect[\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  rect[How to make this expand?],\n  rect[I want each cell to take up all available space.],\n  rect[I don't want to hard code heights of each row.],\n  rect[How to make this expand?],\n)\n</code></pre>\n</details>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/2811209cb4c053e1355040c4e8fac0a070b7577d.png\" alt=\"test\" data-base62-sha1=\"5IrNesvJsq7wG7DjmDGkzVz77w9\" width=\"300\" height=\"200\"></p>",
      "raw": "Hello @AllanChain,\n\nthe [Fraction](https://typst.app/docs/reference/layout/fraction/) type can be used to fill the remaining space in a layout. You can set the height of the rect boxes with `#set rect(height: 1fr)` to take all the remaining space. Now you also have to limit the height of the grid with `rows: 1fr` otherwise the rect boxes span the entire page.\n\n[details=\"Code\"]\n```typst\n#set page(width: 300pt, height: 200pt)\n\n#set rect(\n  height: 1fr,\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  radius: 5pt,\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  rows: 1fr,\n  gutter: 3pt,\n  grid.cell(rowspan: 2, rect[\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  rect[How to make this expand?],\n  rect[I want each cell to take up all available space.],\n  rect[I don't want to hard code heights of each row.],\n  rect[How to make this expand?],\n)\n```\n[/details]\n\n![test|300x200](upload://5IrNesvJsq7wG7DjmDGkzVz77w9.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 62,
      "score": 77.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 3505,
      "post_number": 4,
      "username": "Blaz",
      "name": "Blaz",
      "created_at": "2024-10-06T21:33:14.631Z",
      "updated_at": "2024-10-06T21:33:14.631Z",
      "cooked": "<p>Note that this only works from 0.12.0 onwards, which is still in its testing phase, as <code>rect</code> doesn‚Äôt accept <code>fraction</code> type in its height in previous versions.</p>\n<p>In 0.11.1 you can add <code>#v(1fr)</code> at the end of each <code>rect</code> to achieve the same effect:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 300pt, height: 200pt)\n\n#set rect(\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  radius: 5pt,\n)\n\n#show grid.cell: it =&gt; {\n  rect(it+v(1fr))\n}\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  rows: 1fr,\n  gutter: 3pt,\n  grid.cell(rowspan: 2, [\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  [How to make this expand?],\n  [I want each cell to take up all available space.],\n  [I don't want to hard code heights of each row.],\n  [How to make this expand?],\n)\n</code></pre>",
      "raw": "Note that this only works from 0.12.0 onwards, which is still in its testing phase, as `rect` doesn't accept `fraction` type in its height in previous versions.\n\nIn 0.11.1 you can add `#v(1fr)` at the end of each `rect` to achieve the same effect:\n\n```typ\n#set page(width: 300pt, height: 200pt)\n\n#set rect(\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  radius: 5pt,\n)\n\n#show grid.cell: it => {\n  rect(it+v(1fr))\n}\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  rows: 1fr,\n  gutter: 3pt,\n  grid.cell(rowspan: 2, [\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  [How to make this expand?],\n  [I want each cell to take up all available space.],\n  [I don't want to hard code heights of each row.],\n  [How to make this expand?],\n)\n```",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 60,
      "score": 56.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 98
    },
    {
      "id": 3508,
      "post_number": 5,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-06T22:37:43.232Z",
      "updated_at": "2024-10-06T22:37:43.232Z",
      "cooked": "<p>First things first, it‚Äôs worth mentioning that the ‚Äúhappy path‚Äù for grid fill is to use the built-in fill parameter for grid and grid cells, since that fill is handled by the grid itself and always covers the whole cell.</p>\n<p>With that not being possible here due to the desired radius, the ideal solution would be to remain with <code>auto</code>-sized rows (the default), but set <code>rect(height: 100%)</code> on each rectangle so that each rectangle occupies the final measured height for the cell. However, by default, <code>100%</code> in an auto row always means 100% of the page‚Äôs (or parent container‚Äôs, if there is one) height, instead of the row height, to avoid a cyclic dependency problem (the <code>auto</code> row height depends on the cells‚Äô heights, but the cells‚Äô heights would depend on the <code>auto</code> row height); you cannot currently change that, but there is a proposal to be able to do so (which would alleviate the need for extra <code>measure()</code> calls): <a href=\"https://github.com/typst/typst/issues/4000\" class=\"inline-onebox\">Add `table.cell(fit: Axes&lt;bool&gt;)` parameter ¬∑ Issue #4000 ¬∑ typst/typst ¬∑ GitHub</a></p>\n<p>For the time being, setting the row height to <code>1fr</code> as suggested above does work to some extent, in that <strong>all remaining space</strong> will be equally divided between each row of rectangles, but more importantly, sets <code>100%</code> to mean the row height, allowing you to <code>#set rect(height: 100%)</code>, leading to the desired effect. (<code>100%</code> is equal to the row height for all row sizes except for <code>auto</code>.) However, this has the problem that <code>1fr</code> will be relative to your whole page, so I‚Äôd recommend using fixed height rows for this purpose. Regardless of the approach taken, setting the rectangle heights to <code>100%</code> (or to some fixed size if you prefer) is the preferred solution (and does not require using Typst 0.12.0):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 300pt, height: 400pt)\n\n#set rect(\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  height: 100%,  // &lt;--- /!\\\n  radius: 5pt,\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  gutter: 3pt,\n  rows: 1fr,\n  // rows: (8em, 6em), // &lt;--- would be ideal\n  grid.cell(rowspan: 2, rect[\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  rect[How to make this expand?],\n  rect[I want each cell to take up all available space.],\n  rect[I don't want to hard code heights of each row.],\n  rect[How to make this expand?],\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/9c12cca7dde61f3d8385df384177db67edc05cd1.png\" alt=\"output\" data-base62-sha1=\"mgGLiXwc1YciB5HQa6UcqSPkZPP\" width=\"359\" height=\"475\"></p>",
      "raw": "First things first, it's worth mentioning that the \"happy path\" for grid fill is to use the built-in fill parameter for grid and grid cells, since that fill is handled by the grid itself and always covers the whole cell.\n\nWith that not being possible here due to the desired radius, the ideal solution would be to remain with `auto`-sized rows (the default), but set `rect(height: 100%)` on each rectangle so that each rectangle occupies the final measured height for the cell. However, by default, `100%` in an auto row always means 100% of the page's (or parent container's, if there is one) height, instead of the row height, to avoid a cyclic dependency problem (the `auto` row height depends on the cells' heights, but the cells' heights would depend on the `auto` row height); you cannot currently change that, but there is a proposal to be able to do so (which would alleviate the need for extra `measure()` calls): https://github.com/typst/typst/issues/4000\n\nFor the time being, setting the row height to `1fr` as suggested above does work to some extent, in that **all remaining space** will be equally divided between each row of rectangles, but more importantly, sets `100%` to mean the row height, allowing you to `#set rect(height: 100%)`, leading to the desired effect. (`100%` is equal to the row height for all row sizes except for `auto`.) However, this has the problem that `1fr` will be relative to your whole page, so I'd recommend using fixed height rows for this purpose. Regardless of the approach taken, setting the rectangle heights to `100%` (or to some fixed size if you prefer) is the preferred solution (and does not require using Typst 0.12.0):\n\n```typ\n#set page(width: 300pt, height: 400pt)\n\n#set rect(\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  height: 100%,  // <--- /!\\\n  radius: 5pt,\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  gutter: 3pt,\n  rows: 1fr,\n  // rows: (8em, 6em), // <--- would be ideal\n  grid.cell(rowspan: 2, rect[\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  rect[How to make this expand?],\n  rect[I want each cell to take up all available space.],\n  rect[I don't want to hard code heights of each row.],\n  rect[How to make this expand?],\n)\n```\n![output|359x475](upload://mgGLiXwc1YciB5HQa6UcqSPkZPP.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 50,
      "score": 134.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 3509,
      "post_number": 6,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-06T22:40:24.356Z",
      "updated_at": "2024-10-06T22:40:24.356Z",
      "cooked": "<p>I‚Äôll add that another awesome idea is to open an issue in our GitHub proposing a <code>radius</code> parameter for grid cells‚Äô fill: <a href=\"https://github.com/typst/typst/issues\" class=\"inline-onebox\">Issues ¬∑ typst/typst ¬∑ GitHub</a></p>",
      "raw": "I'll add that another awesome idea is to open an issue in our GitHub proposing a `radius` parameter for grid cells' fill: https://github.com/typst/typst/issues",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 7.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 3511,
      "post_number": 7,
      "username": "AllanChain",
      "name": "AllanChain",
      "created_at": "2024-10-07T01:30:20.833Z",
      "updated_at": "2024-10-07T01:30:20.833Z",
      "cooked": "<p>Thanks for elaborating. Now, I understand that it is currently very difficult to have <code>auto</code>-sized rows while having a growable <code>rect</code> content in Typst.</p>\n<p>The <code>rows: 1fr</code> suggested here and above does work in my example, but does not work nicely in my real world poster because all rows are evenly spaced relative to the page. What I really want is <code>auto</code>-sized rows, and I‚Äôm sorry that I didn‚Äôt make it clear in the question.</p>\n<p>Therefore, I‚Äôm setting a fixed height and use <code>height: 100%</code> for now. I will follow up the issue you mentioned.</p>",
      "raw": "Thanks for elaborating. Now, I understand that it is currently very difficult to have `auto`-sized rows while having a growable `rect` content in Typst.\n\nThe `rows: 1fr` suggested here and above does work in my example, but does not work nicely in my real world poster because all rows are evenly spaced relative to the page. What I really want is `auto`-sized rows, and I'm sorry that I didn't make it clear in the question.\n\nTherefore, I'm setting a fixed height and use `height: 100%` for now. I will follow up the issue you mentioned.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 7.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 547
    },
    {
      "id": 3525,
      "post_number": 8,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-07T12:42:18.220Z",
      "updated_at": "2024-10-07T12:44:25.423Z",
      "cooked": "<p>Glad you managed to solve it! Let‚Äôs mark my answer as a solution for now then, and we can maybe change that in the future when that issue is closed. <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Glad you managed to solve it! Let's mark my answer as a solution for now then, and we can maybe change that in the future when that issue is closed. :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 32.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 3534,
      "post_number": 9,
      "username": "AllanChain",
      "name": "AllanChain",
      "created_at": "2024-10-08T04:58:44.807Z",
      "updated_at": "2024-10-08T05:05:57.549Z",
      "cooked": "<p>I can‚Äôt find the ‚Äúmark as solution‚Äù button now, but I‚Äôm sure it existed days before. Is the forum site updated? Also, I‚Äôm unable to login on other devices (<a href=\"https://forum.typst.app/t/unable-to-log-in-to-the-forum/973\" class=\"inline-onebox\">Unable to log in to the forum</a>), which is strange.</p>",
      "raw": "I can't find the \"mark as solution\" button now, but I'm sure it existed days before. Is the forum site updated? Also, I'm unable to login on other devices (https://forum.typst.app/t/unable-to-log-in-to-the-forum/973), which is strange.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 11.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 547
    },
    {
      "id": 3574,
      "post_number": 10,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-08T17:35:27.048Z",
      "updated_at": "2024-10-08T17:35:27.048Z",
      "cooked": "<p>Yeah, it appears there is an ongoing issue with the forum, sorry for that. Hopefully it should be solved soon.</p>",
      "raw": "Yeah, it appears there is an ongoing issue with the forum, sorry for that. Hopefully it should be solved soon.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 11.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:57:17.613890"
}
{
  "topic_metadata": {
    "id": 959,
    "title": "How to show figure numbering prefix when referencing the figure?",
    "slug": "how-to-show-figure-numbering-prefix-when-referencing-the-figure",
    "posts_count": 4,
    "created_at": "2024-10-06T09:39:40.960Z",
    "last_posted_at": "2024-10-06T22:44:56.486Z",
    "views": 288,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "mkorje",
    "tags": [
      "numbering",
      "figures"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 201
  },
  "posts": [
    {
      "id": 3481,
      "post_number": 1,
      "username": "Peter",
      "name": "Peter",
      "created_at": "2024-10-06T09:39:41.263Z",
      "updated_at": "2024-10-10T15:43:58.038Z",
      "cooked": "<p>Hi!</p>\n<p>I want to have a prefix for the numbering of my figures and tables in the Supplementary Material (i.e. appendix) at the end of my manuscript. This seemed simple enough given the <code>numbering</code> parameter in figure supporting prefixes. However, the prefix only shows up in the figure label and not in the reference.</p>\n<p>Have I missed something or is this a bug?</p>\n<p>Minimal example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set figure(numbering: \"S1\")\n\n@figure\n\n#figure(\n  box[Figure],\n  caption: [This is a figure.],\n) &lt;figure&gt;\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/edf31b20d9c70a61b66000152ad88587f2e975c6.png\" data-download-href=\"https://forum.typst.app/uploads/default/edf31b20d9c70a61b66000152ad88587f2e975c6\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/edf31b20d9c70a61b66000152ad88587f2e975c6_2_690x184.png\" alt=\"image\" data-base62-sha1=\"xX00Mzhtdky7kWdg8ZvMMCukjZQ\" width=\"690\" height=\"184\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/edf31b20d9c70a61b66000152ad88587f2e975c6_2_690x184.png, https://forum.typst.app/uploads/default/optimized/1X/edf31b20d9c70a61b66000152ad88587f2e975c6_2_1035x276.png 1.5x, https://forum.typst.app/uploads/default/original/1X/edf31b20d9c70a61b66000152ad88587f2e975c6.png 2x\" data-dominant-color=\"FCFCFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1269√ó340 18.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Expected output for the reference ‚ÄúFigure S1‚Äù.</p>",
      "raw": "Hi!\n\nI want to have a prefix for the numbering of my figures and tables in the Supplementary Material (i.e. appendix) at the end of my manuscript. This seemed simple enough given the `numbering` parameter in figure supporting prefixes. However, the prefix only shows up in the figure label and not in the reference.\n\nHave I missed something or is this a bug?\n\nMinimal example:\n\n```typ\n#set figure(numbering: \"S1\")\n\n@figure\n\n#figure(\n  box[Figure],\n  caption: [This is a figure.],\n) <figure>\n```\n\n![image|690x184](upload://xX00Mzhtdky7kWdg8ZvMMCukjZQ.png)\n\nExpected output for the reference \"Figure S1\".",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 1079.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 549
    },
    {
      "id": 3494,
      "post_number": 2,
      "username": "mkorje",
      "name": "Max",
      "created_at": "2024-10-06T09:51:20.241Z",
      "updated_at": "2024-10-06T09:52:20.571Z",
      "cooked": "<p>This is indeed a bug. You‚Äôve ran into <a href=\"https://github.com/typst/typst/issues/3089\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Reference does not render custom Figure numbering ¬∑ Issue #3089 ¬∑ typst/typst ¬∑ GitHub</a>. Typst currently trims some of the numbering when you reference something.</p>",
      "raw": "This is indeed a bug. You've ran into https://github.com/typst/typst/issues/3089. Typst currently trims some of the numbering when you reference something.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 33.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 76
    },
    {
      "id": 3498,
      "post_number": 3,
      "username": "Peter",
      "name": "Peter",
      "created_at": "2024-10-06T11:16:03.923Z",
      "updated_at": "2024-10-06T11:16:03.923Z",
      "cooked": "<p>Ah, I missed that somehow when looking through the issues. Thank you! For anyone else wondering, the fix is to replace:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set figure(numbering: \"S1\")\n</code></pre>\n<p>with:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set figure(numbering: n =&gt; [S#n])\n</code></pre>",
      "raw": "Ah, I missed that somehow when looking through the issues. Thank you! For anyone else wondering, the fix is to replace:\n\n```typ\n#set figure(numbering: \"S1\")\n```\nwith:\n\n```typ\n#set figure(numbering: n => [S#n])\n```",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 8.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 549
    },
    {
      "id": 3510,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-06T22:44:56.486Z",
      "updated_at": "2024-10-06T22:44:56.486Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/peter\">@Peter</a>, welcome to the forum! I‚Äôve updated your post‚Äôs title to better suit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure the title is a question you‚Äôd ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Peter, welcome to the forum! I've updated your post's title to better suit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure the title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 56.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:57:16.824098"
}
{
  "topic_metadata": {
    "id": 965,
    "title": "How to use context instead of a callback function in locate function calls?",
    "slug": "how-to-use-context-instead-of-a-callback-function-in-locate-function-calls",
    "posts_count": 2,
    "created_at": "2024-10-07T01:37:33.066Z",
    "last_posted_at": "2024-10-07T07:22:59.131Z",
    "views": 938,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "context",
      "introspection",
      "locate"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 635
  },
  "posts": [
    {
      "id": 3513,
      "post_number": 1,
      "username": "Akshay_Raj_Gollahall",
      "name": "Akshay Raj Gollahalli",
      "created_at": "2024-10-07T01:37:33.209Z",
      "updated_at": "2024-10-10T15:55:36.037Z",
      "cooked": "<p>I am trying to test the new <code>0.12.0-rc1</code> and I keep getting this:</p>\n<pre><code class=\"lang-auto\">warning: `locate` with callback function is deprecated\n    ‚îå‚îÄ template/template.typ:305:12\n    ‚îÇ  \n305 ‚îÇ       header: locate(\n    ‚îÇ ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ^\n306 ‚îÇ ‚îÇ       loc =&gt; {\n307 ‚îÇ ‚îÇ         // Retrieve the current page number\n308 ‚îÇ ‚îÇ         let pageNumber = counter(page).at(loc).first()\n    ¬∑ ‚îÇ\n329 ‚îÇ ‚îÇ       },\n330 ‚îÇ ‚îÇ     ),\n    ‚îÇ ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ^\n    ‚îÇ  \n    = hint: use a `context` expression instead\n</code></pre>\n<p>And the code I have essentially adds footer and header page numbers:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">set page(\n    header: locate(\n      loc =&gt; {\n        // Retrieve the current page number\n        let pageNumber = counter(page).at(loc).first()\n\n        // Check if the current page starts with a non-chapter heading\n        let headings = query(heading.where(level: 1))\n        let isSectionPage = headings.any(it =&gt; it.location().page() == pageNumber)\n        if (not isSectionPage) {\n          let before = query(selector(heading.where(level: 1)).before(loc))\n\n          // Create the heading numbering.\n          let number = if before.last().numbering != none {\n            counter(heading.where(level: 1)).display(before.last().numbering)\n            // h(7pt, weak: true)\n          }\n\n          return [\n            #set text(8pt)\n            #smallcaps[Chapter #number. #before.last().body]\n            #h(1fr) #pageNumber\n            #line(length: 100%)\n          ]\n        }\n      },\n    ),\n    footer: locate(\n      loc =&gt; {\n        // Retrieve the current page number\n        let pageNumber = counter(page).at(loc).first()\n\n        // Check if the current page starts with a non-chapter heading\n        let headings = query(heading.where(level: 1))\n        let isSectionPage = headings.any(it =&gt; it.location().page() == pageNumber)\n        if (isSectionPage) {\n          return align(center, text(0.95em, str(pageNumber)));\n        }\n\n        // If the page is not a section page, don't display anything\n        return;\n      },\n    ),\n  )\n</code></pre>\n<p>I couldn‚Äôt find an example on how to replace <code>loc =&gt; {}</code> with context. How should I do that?</p>",
      "raw": "I am trying to test the new `0.12.0-rc1` and I keep getting this:\n\n```\nwarning: `locate` with callback function is deprecated\n    ‚îå‚îÄ template/template.typ:305:12\n    ‚îÇ  \n305 ‚îÇ       header: locate(\n    ‚îÇ ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ^\n306 ‚îÇ ‚îÇ       loc => {\n307 ‚îÇ ‚îÇ         // Retrieve the current page number\n308 ‚îÇ ‚îÇ         let pageNumber = counter(page).at(loc).first()\n    ¬∑ ‚îÇ\n329 ‚îÇ ‚îÇ       },\n330 ‚îÇ ‚îÇ     ),\n    ‚îÇ ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ^\n    ‚îÇ  \n    = hint: use a `context` expression instead\n```\n\nAnd the code I have essentially adds footer and header page numbers:\n\n```typc\nset page(\n    header: locate(\n      loc => {\n        // Retrieve the current page number\n        let pageNumber = counter(page).at(loc).first()\n\n        // Check if the current page starts with a non-chapter heading\n        let headings = query(heading.where(level: 1))\n        let isSectionPage = headings.any(it => it.location().page() == pageNumber)\n        if (not isSectionPage) {\n          let before = query(selector(heading.where(level: 1)).before(loc))\n\n          // Create the heading numbering.\n          let number = if before.last().numbering != none {\n            counter(heading.where(level: 1)).display(before.last().numbering)\n            // h(7pt, weak: true)\n          }\n\n          return [\n            #set text(8pt)\n            #smallcaps[Chapter #number. #before.last().body]\n            #h(1fr) #pageNumber\n            #line(length: 100%)\n          ]\n        }\n      },\n    ),\n    footer: locate(\n      loc => {\n        // Retrieve the current page number\n        let pageNumber = counter(page).at(loc).first()\n\n        // Check if the current page starts with a non-chapter heading\n        let headings = query(heading.where(level: 1))\n        let isSectionPage = headings.any(it => it.location().page() == pageNumber)\n        if (isSectionPage) {\n          return align(center, text(0.95em, str(pageNumber)));\n        }\n\n        // If the page is not a section page, don't display anything\n        return;\n      },\n    ),\n  )\n```\n\nI couldn't find an example on how to replace `loc => {}` with context. How should I do that?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 76,
      "score": 4260.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 106
    },
    {
      "id": 3515,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-07T07:22:59.131Z",
      "updated_at": "2024-10-07T07:29:06.078Z",
      "cooked": "<p>Hello!<br>\nDon‚Äôt hesitate to provide a minimal working example in your post in the future, it helps to reproduce your exact issue and solve the underlying problem.<br>\nIn this case, the migration from <code>locate(loc =&gt; {...})</code> to a <code>context</code> expression is relatively straightforward:</p>\n<ul>\n<li>Replace <code>locate(...)</code> with <code>context { ... }</code></li>\n<li>Replace <code>loc</code> with <code>here()</code>, although, technically speaking you may even use <code>counter(page).get().first()</code>. See <a href=\"https://typst.app/docs/reference/introspection/counter/#definitions-get\">get</a>.</li>\n</ul>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\n    header: context {\n        // Retrieve the current page number\n        let pageNumber = counter(page).at(here()).first()\n\n        // Check if the current page starts with a non-chapter heading\n        let headings = query(heading.where(level: 1))\n        let isSectionPage = headings.any(it =&gt; it.location().page() == pageNumber)\n        if (not isSectionPage) {\n          let before = query(selector(heading.where(level: 1)).before(loc))\n\n          // Create the heading numbering.\n          let number = if before.last().numbering != none {\n            counter(heading.where(level: 1)).display(before.last().numbering)\n            // h(7pt, weak: true)\n          }\n\n          return [\n            #set text(8pt)\n            #smallcaps[Chapter #number. #before.last().body]\n            #h(1fr) #pageNumber\n            #line(length: 100%)\n          ]\n        }\n    },\n    footer: context {\n        // Retrieve the current page number\n        let pageNumber = counter(page).at(here()).first()\n\n        // Check if the current page starts with a non-chapter heading\n        let headings = query(heading.where(level: 1))\n        let isSectionPage = headings.any(it =&gt; it.location().page() == pageNumber)\n        if (isSectionPage) {\n          return align(center, text(0.95em, str(pageNumber)));\n        }\n\n        // If the page is not a section page, don't display anything\n        return;\n   },\n)\n</code></pre>\n<aside class=\"quote no-group\" data-username=\"Akshay_Raj_Gollahall\" data-post=\"1\" data-topic=\"965\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/akshay_raj_gollahall/48/118_2.png\" class=\"avatar\"> Akshay_Raj_Gollahall:</div>\n<blockquote>\n<p>I couldn‚Äôt find an example on how to replace <code>loc =&gt; {}</code> with context.</p>\n</blockquote>\n</aside>\n<p>I don‚Äôt think I‚Äôve seen an explicit guide in the official documentation, but in small text you can <a href=\"https://typst.app/docs/reference/introspection/locate/\">read</a></p>\n<blockquote>\n<p>In Typst 0.10 and lower, the <code>locate</code> function took a closure that made the current location in the document available (like <a href=\"https://typst.app/docs/reference/introspection/here/\"><code>here</code></a> does now).</p>\n</blockquote>\n<p>For a more detailed explanation and comparison, you can take a look at <a class=\"mention\" href=\"/u/laurmaedje\">@laurmaedje</a>‚Äôs <a href=\"https://laurmaedje.github.io/posts/types-and-context/#:~:text=Consider%20this%20piece%20of%20code%3A\" rel=\"noopener nofollow ugc\">blog post</a> on the topic.</p>\n<p>For page numbers, you can take a look at this post, which gives a good example of a context expression <a href=\"https://forum.typst.app/t/how-can-i-use-different-page-number-locations-on-alternating-pages/870/2\" class=\"inline-onebox\">How can I use different page number locations on alternating pages? - #2 by Andrew</a>.</p>",
      "raw": "Hello!\nDon't hesitate to provide a minimal working example in your post in the future, it helps to reproduce your exact issue and solve the underlying problem.\nIn this case, the migration from `locate(loc => {...})` to a `context` expression is relatively straightforward:\n- Replace `locate(...)` with `context { ... }`\n- Replace `loc` with `here()`, although, technically speaking you may even use `counter(page).get().first()`. See [get](https://typst.app/docs/reference/introspection/counter/#definitions-get).\n\n```typ\n#set page(\n    header: context {\n        // Retrieve the current page number\n        let pageNumber = counter(page).at(here()).first()\n\n        // Check if the current page starts with a non-chapter heading\n        let headings = query(heading.where(level: 1))\n        let isSectionPage = headings.any(it => it.location().page() == pageNumber)\n        if (not isSectionPage) {\n          let before = query(selector(heading.where(level: 1)).before(loc))\n\n          // Create the heading numbering.\n          let number = if before.last().numbering != none {\n            counter(heading.where(level: 1)).display(before.last().numbering)\n            // h(7pt, weak: true)\n          }\n\n          return [\n            #set text(8pt)\n            #smallcaps[Chapter #number. #before.last().body]\n            #h(1fr) #pageNumber\n            #line(length: 100%)\n          ]\n        }\n    },\n    footer: context {\n        // Retrieve the current page number\n        let pageNumber = counter(page).at(here()).first()\n\n        // Check if the current page starts with a non-chapter heading\n        let headings = query(heading.where(level: 1))\n        let isSectionPage = headings.any(it => it.location().page() == pageNumber)\n        if (isSectionPage) {\n          return align(center, text(0.95em, str(pageNumber)));\n        }\n\n        // If the page is not a section page, don't display anything\n        return;\n   },\n)\n```\n\n[quote=\"Akshay_Raj_Gollahall, post:1, topic:965\"]\nI couldn‚Äôt find an example on how to replace `loc => {}` with context.\n[/quote]\n\nI don't think I've seen an explicit guide in the official documentation, but in small text you can [read](https://typst.app/docs/reference/introspection/locate/)\n> In Typst 0.10 and lower, the `locate` function took a closure that made the current location in the document available (like [`here`](https://typst.app/docs/reference/introspection/here/) does now).\n\nFor a more detailed explanation and comparison, you can take a look at @laurmaedje's [blog post](https://laurmaedje.github.io/posts/types-and-context/#:~:text=Consider%20this%20piece%20of%20code%3A) on the topic.\n\nFor page numbers, you can take a look at this post, which gives a good example of a context expression https://forum.typst.app/t/how-can-i-use-different-page-number-locations-on-alternating-pages/870/2.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 2,
      "reads": 69,
      "score": 493.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:57:16.103671"
}
{
  "topic_metadata": {
    "id": 968,
    "title": "How to put different page numbering in outline?",
    "slug": "how-to-put-different-page-numbering-in-outline",
    "posts_count": 5,
    "created_at": "2024-10-07T10:29:34.483Z",
    "last_posted_at": "2024-12-27T22:38:24.536Z",
    "views": 588,
    "like_count": 3,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "xkevio",
    "tags": [
      "outline",
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 525
  },
  "posts": [
    {
      "id": 3519,
      "post_number": 1,
      "username": "alex180500",
      "name": "Alessandro",
      "created_at": "2024-10-07T10:29:34.623Z",
      "updated_at": "2024-10-10T16:08:52.365Z",
      "cooked": "<p>While creating the outline like this</p>\n<pre><code class=\"lang-auto\">set page(numbering: \"‚Äî 1 / 2 ‚Äî\")\nshow outline.entry.where(level: 1): it =&gt; {\n    set text(13pt, font: title-font)\n    v(12pt, weak: true)\n    strong(it)\n}\n</code></pre>\n<p>I get the outline with the following page numbering</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/7a6946dbd10a4eddb69cd426bb9be341e6d58665.png\" alt=\"image\" data-base62-sha1=\"hsTNXNUKrpklxzZDur18r4bw4mh\" width=\"486\" height=\"86\"></p>\n<p>Is there a way to get the page numbering in the outline just with the page number (2 in this case)? instead of having the full page numbering?</p>",
      "raw": "While creating the outline like this\n\n```\nset page(numbering: \"‚Äî 1 / 2 ‚Äî\")\nshow outline.entry.where(level: 1): it => {\n    set text(13pt, font: title-font)\n    v(12pt, weak: true)\n    strong(it)\n}\n```\n\nI get the outline with the following page numbering\n\n![image|648x115, 75%](upload://hsTNXNUKrpklxzZDur18r4bw4mh.png)\n\nIs there a way to get the page numbering in the outline just with the page number (2 in this case)? instead of having the full page numbering?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 82,
      "score": 2531.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 550
    },
    {
      "id": 3521,
      "post_number": 3,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-07T11:34:41.123Z",
      "updated_at": "2024-10-07T11:36:03.470Z",
      "cooked": "<p>You can use the ‚Äústate-outline‚Äù trick (<a href=\"https://sitandr.github.io/typst-examples-book/book/snippets/chapters/outlines.html?highlight=outline#long-and-short-captions-for-the-outline\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Outlines - Typst Examples Book</a>) which detects if your element is in the outline or not via a <code>state</code>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let in-outline = state(\"in-outline\", false)\n\n#set heading(numbering: \"1.1\")\n#set text(font: \"DM Sans\")\n\n#set page(numbering: (..n) =&gt; context {\n  if in-outline.get() {\n    numbering(\"1\", ..n)\n  } else {\n    numbering(\"1 / 1\", ..n)\n  }\n})\n\n#show outline: it =&gt; {\n  in-outline.update(true)\n  it\n  in-outline.update(false)\n}\n\n\n#show outline.entry.where(level: 1): it =&gt; {\n  set text(13pt, font: \"DM Sans\")\n  v(12pt, weak: true)\n  strong(it)\n}\n\n#outline()\n\n= Introduction\n\n== Don't Know\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/ee488795887ec438427a541b24e63a41707fba3b.png\" alt=\"image\" data-base62-sha1=\"xZX1YTZG5jWAlExm4sUv1k5hyb1\" width=\"444\" height=\"274\"></p>\n<p>The alternative would be to completely recreate the outline entry via the show-rule which is possible but tedious.</p>",
      "raw": "You can use the \"state-outline\" trick (https://sitandr.github.io/typst-examples-book/book/snippets/chapters/outlines.html?highlight=outline#long-and-short-captions-for-the-outline) which detects if your element is in the outline or not via a `state`.\n\n```typ\n#let in-outline = state(\"in-outline\", false)\n\n#set heading(numbering: \"1.1\")\n#set text(font: \"DM Sans\")\n\n#set page(numbering: (..n) => context {\n  if in-outline.get() {\n    numbering(\"1\", ..n)\n  } else {\n    numbering(\"1 / 1\", ..n)\n  }\n})\n\n#show outline: it => {\n  in-outline.update(true)\n  it\n  in-outline.update(false)\n}\n\n\n#show outline.entry.where(level: 1): it => {\n  set text(13pt, font: \"DM Sans\")\n  v(12pt, weak: true)\n  strong(it)\n}\n\n#outline()\n\n= Introduction\n\n== Don't Know\n```\n\n![image|444x274](upload://xZX1YTZG5jWAlExm4sUv1k5hyb1.png)\n\nThe alternative would be to completely recreate the outline entry via the show-rule which is possible but tedious.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 2,
      "reads": 81,
      "score": 131.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3528,
      "post_number": 4,
      "username": "alex180500",
      "name": "Alessandro",
      "created_at": "2024-10-07T15:04:13.658Z",
      "updated_at": "2024-10-07T15:04:13.658Z",
      "cooked": "<p>Thank you a lot! This is a perfect solution for the outline, but I was trying to implement something similar for references (as I also have a custom entry for the header) but this works for the first time I reference something but not for the second time.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let in-ref = state(\"in-ref\", false)\n\n#show ref: it =&gt; {\n    in-ref.update(true)\n    set text(font-color)\n    it\n    in-ref.update(false)\n  }\n\n#set heading(numbering: (..n) =&gt; context {\n    if in-ref.get() {numbering(\"1.1\", ..n)} else {[\n      #numbering(\"1.1\", ..n)\n      #h(0.3em)\n      #box(width: 1.2pt, height: 1.1em, fill: gray.darken(20%), baseline: 20%)\n      #h(0.2em)\n    ]}\n  })\n</code></pre>\n<p>But this result in a behaviour like this</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/68ac1a95a63f2f19de2c2adc69fe4271258a50b0.png\" alt=\"image\" data-base62-sha1=\"eVYo2nBG70ARfL7L3JVenh6Z0vm\" width=\"387\" height=\"99\"></p>\n<p>What is going on?</p>",
      "raw": "Thank you a lot! This is a perfect solution for the outline, but I was trying to implement something similar for references (as I also have a custom entry for the header) but this works for the first time I reference something but not for the second time.\n\n```typst\n#let in-ref = state(\"in-ref\", false)\n\n#show ref: it => {\n    in-ref.update(true)\n    set text(font-color)\n    it\n    in-ref.update(false)\n  }\n\n#set heading(numbering: (..n) => context {\n    if in-ref.get() {numbering(\"1.1\", ..n)} else {[\n      #numbering(\"1.1\", ..n)\n      #h(0.3em)\n      #box(width: 1.2pt, height: 1.1em, fill: gray.darken(20%), baseline: 20%)\n      #h(0.2em)\n    ]}\n  })\n```\n\nBut this result in a behaviour like this\n\n![image|516x132, 75%](upload://eVYo2nBG70ARfL7L3JVenh6Z0vm.png)\n\nWhat is going on?",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 66,
      "score": 43.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 550
    },
    {
      "id": 3530,
      "post_number": 5,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-07T17:05:01.396Z",
      "updated_at": "2024-10-07T18:07:52.198Z",
      "cooked": "<p>I am not sure what is going on there specifically but here I would just recommend a normal show-rule instead:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show ref: r =&gt; if r.element.func() == heading [\n  #let vert-line = box(width: 1.2pt, height: 1.1em, fill: gray.darken(20%), baseline: 20%)\n  #r#h(0.3em)#vert-line#h(0.2em)\n] else { r }\n</code></pre>\n<p><strong>EDIT:</strong> Misread and realized you want it the other way around, whoops. See</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show ref: r =&gt; if r.element.func() == heading [\n  #link(r.element.location())[\n    #r.element.supplement #counter(heading).display(\"1.1\")\n  ]\n] else { r }\n</code></pre>",
      "raw": "I am not sure what is going on there specifically but here I would just recommend a normal show-rule instead:\n\n```typ\n#show ref: r => if r.element.func() == heading [\n  #let vert-line = box(width: 1.2pt, height: 1.1em, fill: gray.darken(20%), baseline: 20%)\n  #r#h(0.3em)#vert-line#h(0.2em)\n] else { r }\n```\n\n**EDIT:** Misread and realized you want it the other way around, whoops. See \n```typ\n#show ref: r => if r.element.func() == heading [\n  #link(r.element.location())[\n    #r.element.supplement #counter(heading).display(\"1.1\")\n  ]\n] else { r }\n```",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 65,
      "score": 28.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 6948,
      "post_number": 6,
      "username": "Roland_Schatzle",
      "name": "Roland Sch√§tzle",
      "created_at": "2024-12-27T22:38:24.536Z",
      "updated_at": "2024-12-27T22:40:46.371Z",
      "cooked": "<p>I‚Äôve tried the ‚Äústate-outline‚Äù trick shown by <a class=\"mention\" href=\"/u/xkevio\">@xkevio</a> . But in my case it works only, if I set the initial value of <code>in-outline</code> to <code>true</code>. This seems a bit strange to me. Shouldn‚Äôt it work, no matter, what the initial value is?</p>\n<p>BTW: I‚Äôm using it in the <code>header</code>-definition of the page as follows:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">header:  \n      grid(\n        ...\n        text(font: heading-font, size: 9pt, \n          number-type: \"lining\",\n          context {if in-outline.get() {\n              counter(page).display(\"i\")\n            } else {\n              counter(page).display(\"1\")\n            }\n          }\n        ),\n        ...\n      ),\n</code></pre>\n<p>Could that be the cause of the strange behavior?</p>",
      "raw": "I've tried the \"state-outline\" trick shown by @xkevio . But in my case it works only, if I set the initial value of `in-outline` to `true`. This seems a bit strange to me. Shouldn't it work, no matter, what the initial value is?\n\nBTW: I'm using it in the `header`-definition of the page as follows:\n```typ \nheader:  \n      grid(\n        ...\n        text(font: heading-font, size: 9pt, \n          number-type: \"lining\",\n          context {if in-outline.get() {\n              counter(page).display(\"i\")\n            } else {\n              counter(page).display(\"1\")\n            }\n          }\n        ),\n        ...\n      ),\n```\n\nCould that be the cause of the strange behavior?",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 68.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 966
    }
  ],
  "scraped_at": "2025-06-10T09:57:15.383954"
}
{
  "topic_metadata": {
    "id": 972,
    "title": "Is it possible to make an outline record different from the heading itslef?",
    "slug": "is-it-possible-to-make-an-outline-record-different-from-the-heading-itslef",
    "posts_count": 2,
    "created_at": "2024-10-07T23:43:51.520Z",
    "last_posted_at": "2024-10-08T06:29:54.706Z",
    "views": 80,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "outline"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 170
  },
  "posts": [
    {
      "id": 3533,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-07T23:43:51.632Z",
      "updated_at": "2024-10-10T16:09:43.025Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// this is an outline\n#outline()\n\n= This is a simple example of a level-1 heading\n\nAnd this is a body text.\n\n= This is another one level-1 heading\n\nAnd this is a body text.\n</code></pre>\n<p>Is it possible to make outline records different from the headings themselves? For example:</p>\n<pre data-code-wrap=\"none\"><code class=\"lang-none\">Simple heading .........\nAnother one ............\n</code></pre>",
      "raw": "```typ\n// this is an outline\n#outline()\n\n= This is a simple example of a level-1 heading\n\nAnd this is a body text.\n\n= This is another one level-1 heading\n\nAnd this is a body text.\n```\n\nIs it possible to make outline records different from the headings themselves? For example:\n\n``` none\nSimple heading .........\nAnother one ............\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 66.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 3536,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-08T06:29:54.706Z",
      "updated_at": "2024-10-08T06:31:24.571Z",
      "cooked": "<p>Hello,</p>\n<p>This is not possible <em>out of the box</em> at the moment. This is in discussion, and <a class=\"mention\" href=\"/u/eric\">@Eric</a> is working on an implementation IRCC. In the meantime <a class=\"mention\" href=\"/u/andrew\">@Andrew</a> suggests something ilke this.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#outline()\n\n#heading(outlined: false)[Introduction]\n#{\n  show heading: none\n  heading[Secret heading]\n}\n\n= Background\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/835b5326773d75fa53e1b3af8f8f82371f40dc22.png\" alt=\"image\" data-base62-sha1=\"iK2d5yqYinFpGrOW9Oaet6wAHxo\" width=\"204\" height=\"209\"></p>\n<p>A related topic for figure captions has also been arised. If you want a more automatic solution, you can take a look at <a class=\"mention\" href=\"/u/laurmaedje\">@laurmaedje</a>‚Äôs solution <a href=\"https://github.com/typst/typst/issues/1295#issuecomment-1853762154\" rel=\"noopener nofollow ugc\">here</a>, which you can adapt for headings.</p>\n<p>[1] <a href=\"https://github.com/typst/typst/issues/1889\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Different heading text for outline/bookmark and displaying ¬∑ Issue #1889 ¬∑ typst/typst ¬∑ GitHub</a><br>\n[2] <a href=\"https://github.com/typst/typst/issues/1295\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Short figure caption for outline ¬∑ Issue #1295 ¬∑ typst/typst ¬∑ GitHub</a><br>\n[3] <a href=\"https://github.com/typst/typst/pull/4643\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Allow different headings and captions in outline and bookmark by EpicEricEE ¬∑ Pull Request #4643 ¬∑ typst/typst ¬∑ GitHub</a></p>",
      "raw": "Hello,\n\nThis is not possible *out of the box* at the moment. This is in discussion, and @Eric is working on an implementation IRCC. In the meantime @Andrew suggests something ilke this.\n```typ\n#outline()\n\n#heading(outlined: false)[Introduction]\n#{\n  show heading: none\n  heading[Secret heading]\n}\n\n= Background\n```\n![image|204x209](upload://iK2d5yqYinFpGrOW9Oaet6wAHxo.png)\n\n\nA related topic for figure captions has also been arised. If you want a more automatic solution, you can take a look at @laurmaedje's solution [here](https://github.com/typst/typst/issues/1295#issuecomment-1853762154), which you can adapt for headings.\n\n[1] https://github.com/typst/typst/issues/1889\n[2] https://github.com/typst/typst/issues/1295\n[3] https://github.com/typst/typst/pull/4643",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 28,
      "score": 30.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:57:14.633866"
}
{
  "topic_metadata": {
    "id": 975,
    "title": "How to perform Long multiplication/division using typst?",
    "slug": "how-to-perform-long-multiplication-division-using-typst",
    "posts_count": 5,
    "created_at": "2024-10-08T07:46:20.665Z",
    "last_posted_at": "2024-10-09T05:16:54.701Z",
    "views": 320,
    "like_count": 3,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "fenjalien",
    "tags": [],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 359
  },
  "posts": [
    {
      "id": 3541,
      "post_number": 1,
      "username": "Ethan_Pixar",
      "name": "Ethan Pixar",
      "created_at": "2024-10-08T07:46:20.939Z",
      "updated_at": "2024-10-08T07:46:20.939Z",
      "cooked": "<p>In certain cases, I need such functions to do homework, e.g. when using array method for discrete convolution computations, like in the following pic,<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/538177fbc9d37d2db717f24aa09d6b8cc9c4b581.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/538177fbc9d37d2db717f24aa09d6b8cc9c4b581\" title=\"IMG_C87981774D25-1\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/538177fbc9d37d2db717f24aa09d6b8cc9c4b581_2_690x324.jpeg\" alt=\"IMG_C87981774D25-1\" data-base62-sha1=\"bUJ0XiJ5t5TkIhPLoBRB2f3YQdr\" width=\"690\" height=\"324\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/538177fbc9d37d2db717f24aa09d6b8cc9c4b581_2_690x324.jpeg, https://forum.typst.app/uploads/default/optimized/1X/538177fbc9d37d2db717f24aa09d6b8cc9c4b581_2_1035x486.jpeg 1.5x, https://forum.typst.app/uploads/default/optimized/1X/538177fbc9d37d2db717f24aa09d6b8cc9c4b581_2_1380x648.jpeg 2x\" data-dominant-color=\"F8F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">IMG_C87981774D25-1</span><span class=\"informations\">2060√ó969 108 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nis it possible, or do I need to insert a photo in this case?</p>",
      "raw": "In certain cases, I need such functions to do homework, e.g. when using array method for discrete convolution computations, like in the following pic,\n![IMG_C87981774D25-1|690x324](upload://bUJ0XiJ5t5TkIhPLoBRB2f3YQdr.jpeg)\n is it possible, or do I need to insert a photo in this case?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 1199.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 484
    },
    {
      "id": 3548,
      "post_number": 2,
      "username": "fenjalien",
      "name": "fenjalien",
      "created_at": "2024-10-08T09:10:13.935Z",
      "updated_at": "2024-10-08T09:10:13.935Z",
      "cooked": "<p>You could definitely write it out using a table, and probably automate the layout into a function. I‚Äôm not familiar enough with the mathematical methods to be able to suggest a way to actually carry out the calculations.</p>\n<p>I‚Äôll try and get an example of the layout in a bit though.</p>",
      "raw": "You could definitely write it out using a table, and probably automate the layout into a function. I'm not familiar enough with the mathematical methods to be able to suggest a way to actually carry out the calculations.\n\nI'll try and get an example of the layout in a bit though.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 14.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 198
    },
    {
      "id": 3550,
      "post_number": 3,
      "username": "fenjalien",
      "name": "fenjalien",
      "created_at": "2024-10-08T09:21:22.624Z",
      "updated_at": "2024-10-08T09:21:22.624Z",
      "cooked": "<p>Here you go:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">#table(\n  columns: 8,\n  align: (x, y) =&gt; if x == 7 {left} else {center},\n  stroke: none,\n  $6$,$5$,$4$,$3$,$2$,$1$,$0$,\n  table.vline(),\n  $n$,\n  table.hline(),\n  [],[],[],$-4$,$3$,$-2$,$1$,$v(n)$,\n  [],[],[],$-1$, [], $1$, $4$, $x(n)$,\n  table.hline(),\n  [],[],[],$-16$,$12$,$-8$,$4$, [],\n  [],[], $-4$, $3$, $-2$, $1$, [], [],\n  $4$, $-3$, $2$, $-1$, [],[],[], [],\n  table.hline(),\n  $4$, $-3$, $-2$, $-14$, $10$, $-7$, $4$, $w(n) = v(n) * x(n)$ \n)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/a5d7f28256349cb67684412f5a675599c914e267.png\" data-download-href=\"https://forum.typst.app/uploads/default/a5d7f28256349cb67684412f5a675599c914e267\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/a5d7f28256349cb67684412f5a675599c914e267_2_690x359.png\" alt=\"image\" data-base62-sha1=\"nF7rKvDebzmCN1Z1SsBQKnkAi1x\" width=\"690\" height=\"359\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/a5d7f28256349cb67684412f5a675599c914e267_2_690x359.png, https://forum.typst.app/uploads/default/original/1X/a5d7f28256349cb67684412f5a675599c914e267.png 1.5x, https://forum.typst.app/uploads/default/original/1X/a5d7f28256349cb67684412f5a675599c914e267.png 2x\" data-dominant-color=\"F5F5F5\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">790√ó412 32.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Here you go:\n```typc\n#table(\n  columns: 8,\n  align: (x, y) => if x == 7 {left} else {center},\n  stroke: none,\n  $6$,$5$,$4$,$3$,$2$,$1$,$0$,\n  table.vline(),\n  $n$,\n  table.hline(),\n  [],[],[],$-4$,$3$,$-2$,$1$,$v(n)$,\n  [],[],[],$-1$, [], $1$, $4$, $x(n)$,\n  table.hline(),\n  [],[],[],$-16$,$12$,$-8$,$4$, [],\n  [],[], $-4$, $3$, $-2$, $1$, [], [],\n  $4$, $-3$, $2$, $-1$, [],[],[], [],\n  table.hline(),\n  $4$, $-3$, $-2$, $-14$, $10$, $-7$, $4$, $w(n) = v(n) * x(n)$ \n)\n```\n![image|690x359](upload://nF7rKvDebzmCN1Z1SsBQKnkAi1x.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 44,
      "score": 348.8,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 198
    },
    {
      "id": 3583,
      "post_number": 4,
      "username": "Ethan_Pixar",
      "name": "Ethan Pixar",
      "created_at": "2024-10-09T02:07:03.704Z",
      "updated_at": "2024-10-09T02:07:03.704Z",
      "cooked": "<p>this looks so refined and cool!! I was trying to achieve something similar using grid. You have shown me that table can achieve a lot, thanks a lot!!</p>",
      "raw": "this looks so refined and cool!! I was trying to achieve something similar using grid. You have shown me that table can achieve a lot, thanks a lot!!",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 17.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 484
    },
    {
      "id": 3586,
      "post_number": 5,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-09T05:16:54.701Z",
      "updated_at": "2024-10-09T05:16:54.701Z",
      "cooked": "<p>Note that a grid has the same capabilities; you could replace <code>table</code> with <code>grid</code> in their example and add <code>inset: 5pt</code> (the default inset for tables) and it‚Äôd look exactly the same!</p>\n<p>The difference is mostly semantic: grids are used only for layout purposes, while tables tend to be proper figures in your document following the usual table model (with a table header and so on). Here, a grid would likely make more sense since we‚Äôre using its capabilities for layout purposes.</p>\n<p>The other difference is that a table has a default of <code>stroke: black + 1pt</code> and <code>inset: 5pt</code>, whereas a grid has a default of <code>stroke: none</code> and <code>inset: 0pt</code>. But you can just change one to the other at will.</p>\n<p>For more information, take a look at the following pages from the docs:</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/guides/table-guide/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/guides/table-guide/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/guides/table-guide/\" target=\"_blank\" rel=\"noopener\">Table guide ‚Äì Typst Documentation</a></h3>\n\n  <p>Not sure how to change table strokes? Need to rotate a table? This guide\nexplains all you need to know about tables in Typst.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/layout/grid/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/layout/grid/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/layout/grid/\" target=\"_blank\" rel=\"noopener\">Grid Function ‚Äì Typst Documentation</a></h3>\n\n  <p>Documentation for the `grid` function.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/model/table/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/model/table/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/model/table/\" target=\"_blank\" rel=\"noopener\">Table Function ‚Äì Typst Documentation</a></h3>\n\n  <p>Documentation for the `table` function.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Note that a grid has the same capabilities; you could replace `table` with `grid` in their example and add `inset: 5pt` (the default inset for tables) and it'd look exactly the same!\n\nThe difference is mostly semantic: grids are used only for layout purposes, while tables tend to be proper figures in your document following the usual table model (with a table header and so on). Here, a grid would likely make more sense since we're using its capabilities for layout purposes.\n\nThe other difference is that a table has a default of `stroke: black + 1pt` and `inset: 5pt`, whereas a grid has a default of `stroke: none` and `inset: 0pt`. But you can just change one to the other at will.\n\nFor more information, take a look at the following pages from the docs:\n\nhttps://typst.app/docs/guides/table-guide/\n\nhttps://typst.app/docs/reference/layout/grid/\n\nhttps://typst.app/docs/reference/model/table/",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 12.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:57:13.905928"
}
{
  "topic_metadata": {
    "id": 976,
    "title": "How to customize the styling of caption supplements?",
    "slug": "how-to-customize-the-styling-of-caption-supplements",
    "posts_count": 11,
    "created_at": "2024-10-08T08:03:19.241Z",
    "last_posted_at": "2025-01-15T11:34:37.209Z",
    "views": 530,
    "like_count": 5,
    "reply_count": 9,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "figures"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 483
  },
  "posts": [
    {
      "id": 3543,
      "post_number": 1,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-10-08T08:03:19.432Z",
      "updated_at": "2024-10-08T08:03:19.432Z",
      "cooked": "<p>I want to have figures with a bold supplement+number+separator, but I don‚Äôt want my references to the figure to be in bold.</p>\n<p>I have multiple figure types (Figure, Algorithm, Table) so I want the solution to be DRY if possible (I don‚Äôt want to repeat the same boilerplate for every figure/type).</p>\n<p>However, the following code does not work, as it does not increment the figure number in the caption (but it does in the figure references):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure.caption: it =&gt; box(\n  inset: (left: 1em, right: 1em),\n  align(left)[\n    *#it.supplement~#it.numbering#it.separator*#it.body\n  ]\n)\n\n#figure(\n  box(stroke: 1pt, inset: 5pt)[This is a figure],\n  caption: [This is a caption]\n) &lt;fig1&gt;\n\n#figure(\n  box(stroke: 1pt, inset: 5pt)[This is a figure],\n  caption: [This is a caption]\n) &lt;fig2&gt;\n\n@fig1 @fig2\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/84b0c144688cd757f9eaf3c0350b8ddbb1070268.png\" data-download-href=\"https://forum.typst.app/uploads/default/84b0c144688cd757f9eaf3c0350b8ddbb1070268\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/84b0c144688cd757f9eaf3c0350b8ddbb1070268_2_690x217.png\" alt=\"image\" data-base62-sha1=\"iVPIKJ5hPu0gme2FCC5V1eblmVW\" width=\"690\" height=\"217\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/84b0c144688cd757f9eaf3c0350b8ddbb1070268_2_690x217.png, https://forum.typst.app/uploads/default/original/1X/84b0c144688cd757f9eaf3c0350b8ddbb1070268.png 1.5x, https://forum.typst.app/uploads/default/original/1X/84b0c144688cd757f9eaf3c0350b8ddbb1070268.png 2x\" data-dominant-color=\"FBFBFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">701√ó221 12.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>How to fix this?</p>",
      "raw": "I want to have figures with a bold supplement+number+separator, but I don't want my references to the figure to be in bold.\n\nI have multiple figure types (Figure, Algorithm, Table) so I want the solution to be DRY if possible (I don't want to repeat the same boilerplate for every figure/type).\n\nHowever, the following code does not work, as it does not increment the figure number in the caption (but it does in the figure references):\n\n```typ\n#show figure.caption: it => box(\n  inset: (left: 1em, right: 1em),\n  align(left)[\n    *#it.supplement~#it.numbering#it.separator*#it.body\n  ]\n)\n\n#figure(\n  box(stroke: 1pt, inset: 5pt)[This is a figure],\n  caption: [This is a caption]\n) <fig1>\n\n#figure(\n  box(stroke: 1pt, inset: 5pt)[This is a figure],\n  caption: [This is a caption]\n) <fig2>\n\n@fig1 @fig2\n```\n\n![image|690x217](upload://iVPIKJ5hPu0gme2FCC5V1eblmVW.png)\n\n\nHow to fix this?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 56,
      "score": 2471.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 3545,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-08T08:31:35.844Z",
      "updated_at": "2024-10-08T08:31:35.844Z",
      "cooked": "<p>Hello, the <code>it.numbering</code> is actually the numbering scheme. You have to use <code>it.counter.display()</code>.<br>\nHere is how I would write it</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure.caption: it =&gt; context [\n  *#it.supplement~#it.counter.display()#it.separator*#it.body\n]\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/22c209496da21637a192cda99da205021709fe05.png\" alt=\"image\" data-base62-sha1=\"4XtXcfKSTaw8Szq134f1wmcmVOR\" width=\"270\" height=\"166\"></p>",
      "raw": "Hello, the `it.numbering` is actually the numbering scheme. You have to use `it.counter.display()`.\nHere is how I would write it\n```typ\n#show figure.caption: it => context [\n  *#it.supplement~#it.counter.display()#it.separator*#it.body\n]\n```\n![image|270x166](upload://4XtXcfKSTaw8Szq134f1wmcmVOR.png)",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 2,
      "reads": 54,
      "score": 90.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3559,
      "post_number": 3,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-08T12:10:16.585Z",
      "updated_at": "2024-10-08T12:10:16.585Z",
      "cooked": "<p>Regarding <code>#it.counter().display()</code>, be careful if you use it with floating figures, see <a href=\"https://forum.typst.app/t/how-to-customize-the-style-of-equation-numbering/641/8\" class=\"inline-onebox\">How to customize the style of equation numbering? - #8 by xkevio</a>.</p>",
      "raw": "Regarding `#it.counter().display()`, be careful if you use it with floating figures, see https://forum.typst.app/t/how-to-customize-the-style-of-equation-numbering/641/8?u=xkevio.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 50,
      "score": 90.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 7533,
      "post_number": 4,
      "username": "chxp",
      "name": "chxp",
      "created_at": "2025-01-15T09:25:50.776Z",
      "updated_at": "2025-01-15T09:26:31.690Z",
      "cooked": "<p>Hey, the <code>#it.counter.display(it.numbering)</code> is outdated in <code>typst 0.12</code>. Thus, how to use <code>context</code> to rewrite the script? Thanks.</p>",
      "raw": "Hey, the `#it.counter.display(it.numbering)` is outdated in `typst 0.12`. Thus, how to use `context` to rewrite the script? Thanks.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 22.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1055
    },
    {
      "id": 7537,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-01-15T09:47:06.684Z",
      "updated_at": "2025-01-15T09:47:17.664Z",
      "cooked": "<p>Use <code>#context it.counter().display(it.numbering)</code> instead</p>",
      "raw": "Use `#context it.counter().display(it.numbering)` instead",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 12.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 7538,
      "post_number": 6,
      "username": "chxp",
      "name": "chxp",
      "created_at": "2025-01-15T10:44:07.731Z",
      "updated_at": "2025-01-15T10:44:07.731Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"quachpas\" data-post=\"5\" data-topic=\"976\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/q/662200/48.png\" class=\"avatar\"> quachpas:</div>\n<blockquote>\n<p><a class=\"hashtag-cooked\" href=\"/tag/context\" data-type=\"tag\" data-slug=\"context\" data-id=\"61\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>context</span></a> it.counter().display(it.numbering)</p>\n</blockquote>\n</aside>\n<p>Could you provide a complete script? I found it hard to recognize the <code>context</code>.</p>\n<p>The following is wrong‚Ä¶</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show figure.caption: it =&gt; [\n    #text(weight: \"bold\")[\n        #it.supplement S #context it.counter().display(it.numbering).~\n    ]#it.body\n]\n</code></pre>",
      "raw": "[quote=\"quachpas, post:5, topic:976\"]\n#context it.counter().display(it.numbering)\n[/quote]\n\nCould you provide a complete script? I found it hard to recognize the `context`.\n\nThe following is wrong...\n```typst\n#show figure.caption: it => [\n    #text(weight: \"bold\")[\n        #it.supplement S #context it.counter().display(it.numbering).~\n    ]#it.body\n]\n```",
      "reply_to_post_number": 5,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 0,
      "reads": 34,
      "score": 16.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1055
    },
    {
      "id": 7539,
      "post_number": 7,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-01-15T10:55:49.321Z",
      "updated_at": "2025-01-15T10:55:49.321Z",
      "cooked": "<p>Can you tell me what the error is, or what is wrong?</p>",
      "raw": "Can you tell me what the error is, or what is wrong?",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 6.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 7541,
      "post_number": 8,
      "username": "chxp",
      "name": "chxp",
      "created_at": "2025-01-15T11:10:26.651Z",
      "updated_at": "2025-01-15T11:10:26.651Z",
      "cooked": "<p>code here:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(\"a4\", margin: auto)\n\n#show figure.caption: it =&gt; [\n    [*#it.supplement S#context it.counter().display(it.numbering).*~]#it.body\n]\n\n// figure\n#figure(\n    rect(height:6cm, width: 11cm, fill: red),\n    caption: [A curious figure.],\n) &lt;fig1&gt;\n\n\n#figure(\n    rect(height:10cm, width: 5cm, fill: blue),\n    caption: [A curious figure.],\n) &lt;fig2&gt;\n</code></pre>\n<p>with error:</p>\n<pre><code class=\"lang-auto\">error: type content has no method `counter`\n  ‚îå‚îÄ ask2.typ:4:34\n  ‚îÇ\n4 ‚îÇ     [*#it.supplement S#context it.counter().display(it.numbering).*~]#it.body\n  ‚îÇ                                   ^^^^^^^\n  ‚îÇ\n  = hint: did you mean to access the field `counter`?\n</code></pre>",
      "raw": "code here: \n```typst\n#set page(\"a4\", margin: auto)\n\n#show figure.caption: it => [\n    [*#it.supplement S#context it.counter().display(it.numbering).*~]#it.body\n]\n\n// figure\n#figure(\n    rect(height:6cm, width: 11cm, fill: red),\n    caption: [A curious figure.],\n) <fig1>\n\n\n#figure(\n    rect(height:10cm, width: 5cm, fill: blue),\n    caption: [A curious figure.],\n) <fig2>\n```\n\nwith error:\n```\nerror: type content has no method `counter`\n  ‚îå‚îÄ ask2.typ:4:34\n  ‚îÇ\n4 ‚îÇ     [*#it.supplement S#context it.counter().display(it.numbering).*~]#it.body\n  ‚îÇ                                   ^^^^^^^\n  ‚îÇ\n  = hint: did you mean to access the field `counter`?\n```",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 21.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1055
    },
    {
      "id": 7544,
      "post_number": 9,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-01-15T11:24:53.634Z",
      "updated_at": "2025-01-15T11:24:53.634Z",
      "cooked": "<p>My bad, I did write <code>counter()</code> instead of <code>counter</code>, but I don‚Äôt understand what your original issue was?</p>",
      "raw": "My bad, I did write `counter()` instead of `counter`, but I don't understand what your original issue was?",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 11.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 7545,
      "post_number": 10,
      "username": "chxp",
      "name": "chxp",
      "created_at": "2025-01-15T11:32:33.895Z",
      "updated_at": "2025-01-15T11:32:33.895Z",
      "cooked": "<p>I just want you to update your answer to this question by using <code>context</code>, avoiding the warning message ‚Äúwarning: <code>counter.display</code> without context is deprecated‚Äù in <code>typst 0.12</code>.</p>\n<p>I found just removing the brackets of <code>counter</code> is okay. Such as <code>#context it.counter.display(it.numbering)</code> or <code>#context(it.counter.display(it.numbering))</code> both works fine.</p>\n<p>Thanks for your answer.</p>",
      "raw": "I just want you to update your answer to this question by using `context`, avoiding the warning message \"warning: `counter.display` without context is deprecated\" in `typst 0.12`.\n\nI found just removing the brackets of `counter` is okay. Such as `#context it.counter.display(it.numbering)` or `#context(it.counter.display(it.numbering))` both works fine.\n\nThanks for your answer.",
      "reply_to_post_number": 9,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 26.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1055
    },
    {
      "id": 7546,
      "post_number": 11,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-01-15T11:34:37.209Z",
      "updated_at": "2025-01-15T11:34:37.209Z",
      "cooked": "<p>The answer already is a context expression</p>",
      "raw": "The answer already is a context expression",
      "reply_to_post_number": 10,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 21.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:57:13.184046"
}
{
  "topic_metadata": {
    "id": 977,
    "title": "How to conditionally enable equation numbering for labeled equations?",
    "slug": "how-to-conditionally-enable-equation-numbering-for-labeled-equations",
    "posts_count": 17,
    "created_at": "2024-10-08T08:56:54.402Z",
    "last_posted_at": "2025-02-18T08:55:54.980Z",
    "views": 1236,
    "like_count": 13,
    "reply_count": 8,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Aegon",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 8,
    "word_count": 1080
  },
  "posts": [
    {
      "id": 3546,
      "post_number": 1,
      "username": "Christopher_Marcotte",
      "name": "Christopher Marcotte",
      "created_at": "2024-10-08T08:56:54.519Z",
      "updated_at": "2024-10-09T04:52:50.873Z",
      "cooked": "<p>In articles it is sometimes helpful to have unnumbered equations appear interlaced with numbered ones, the latter being referenced in the document.</p>\n<p>How might I write the <code>#set math.equation(numbering: (params) =&gt; output)</code> rule so that <em>only</em> equations with reference tags are numbered? Is this something that would need language support to implement?</p>",
      "raw": "In articles it is sometimes helpful to have unnumbered equations appear interlaced with numbered ones, the latter being referenced in the document.\n\nHow might I write the `#set math.equation(numbering: (params) => output)` rule so that _only_ equations with reference tags are numbered? Is this something that would need language support to implement?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 122,
      "score": 4729.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 270
    },
    {
      "id": 3551,
      "post_number": 2,
      "username": "Aegon",
      "name": "Aegon Huke",
      "created_at": "2024-10-08T10:30:41.042Z",
      "updated_at": "2024-10-08T10:33:03.510Z",
      "cooked": "<p>I figured out a solution. Create the following function</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let equ(eq, id: none) = {\n  let body = if type(id) == none {eq} else if type(id) == label [#eq #id] else [#eq &lt;#id&gt;]\n  let numbering = if type(id) != none { \"(1)\" } else { none }\n  set math.equation(numbering: numbering)\n  body\n}\n</code></pre>\n<p>Then you can control the showing of labels by setting the argument <code>id</code>. For example,</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#lorem(50) As shown in @eq:eq1,\n#equ($\ny = a x + b\n$, id: &lt;eq:eq1&gt;)\n#lorem(100)\n#equ($\nE = m c^2\n$)\n#lorem(50)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/cb9530cbcf757ea2bafdc43d55e7bad78de1fc9f.png\" alt=\"image\" data-base62-sha1=\"t2Yz5lTc7TyTgVyOj381QyOxRTx\" width=\"542\" height=\"240\"></p>\n<p>Later I will try to figure out how to achieve this without using a custom function. But such a function is helpful. You can avoid the math equation breaking paragraphs with this</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let equ(eq, id: none) = {\n  let body = if id == none {eq} else if type(id) == label [#eq #id] else [#eq #label(id)]\n  let numbering = if id != none { \"(1)\" } else { none }\n  set math.equation(numbering: numbering)\n  linebreak()\n  box(body, width: 1fr)\n  linebreak()\n}\n</code></pre>\n<p>In this case, display equations are really ‚Äúin‚Äù the paragraph, not ‚Äúbetween‚Äù two paragraphs.</p>",
      "raw": "I figured out a solution. Create the following function\n\n```typ\n#let equ(eq, id: none) = {\n  let body = if type(id) == none {eq} else if type(id) == label [#eq #id] else [#eq <#id>]\n  let numbering = if type(id) != none { \"(1)\" } else { none }\n  set math.equation(numbering: numbering)\n  body\n}\n```\n\nThen you can control the showing of labels by setting the argument `id`. For example,\n\n```typ\n#lorem(50) As shown in @eq:eq1,\n#equ($\ny = a x + b\n$, id: <eq:eq1>)\n#lorem(100)\n#equ($\nE = m c^2\n$)\n#lorem(50)\n```\n\n![image|542x240, 100%](upload://t2Yz5lTc7TyTgVyOj381QyOxRTx.png)\n\nLater I will try to figure out how to achieve this without using a custom function. But such a function is helpful. You can avoid the math equation breaking paragraphs with this\n\n```typ\n#let equ(eq, id: none) = {\n  let body = if id == none {eq} else if type(id) == label [#eq #id] else [#eq #label(id)]\n  let numbering = if id != none { \"(1)\" } else { none }\n  set math.equation(numbering: numbering)\n  linebreak()\n  box(body, width: 1fr)\n  linebreak()\n}\n```\n\nIn this case, display equations are really \"in\" the paragraph, not \"between\" two paragraphs.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 120,
      "score": 219.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 269
    },
    {
      "id": 3552,
      "post_number": 3,
      "username": "Aegon",
      "name": "Aegon Huke",
      "created_at": "2024-10-08T10:58:25.620Z",
      "updated_at": "2024-10-08T10:58:25.620Z",
      "cooked": "<p>And here is another solution without the help of a <code>equ</code> function. Put the following code before your document‚Äôs main body.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show: body =&gt; {\n  for elem in body.children {\n    if elem.func() == math.equation and elem.block {\n      let numbering = if \"label\" in elem.fields().keys() { \"(1)\" } else { none }\n      set math.equation(numbering: numbering)\n      elem\n    } else {\n      elem\n    }\n  }\n}\n</code></pre>\n<p>And you can also append some other settings like <a href=\"https://github.com/typst/typst/issues/311#issuecomment-2104447655\" rel=\"noopener nofollow ugc\">this comment</a>.</p>\n<p>In this case, the following script</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#lorem(30)\n$ y = a x + b $ &lt;eq:eq2&gt;\n#lorem(19)\n@eq:eq2 #lorem(20)\n$ E = m c^2 $\n#lorem(10)\n</code></pre>\n<p>will result in</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/1d82b786ed57f942098b6d2f0979c5f4f6b6908b.png\" alt=\"image\" data-base62-sha1=\"4d3UbShqI9pBPmQGttnRAjcFOWv\" width=\"542\" height=\"203\"></p>",
      "raw": "And here is another solution without the help of a `equ` function. Put the following code before your document's main body.\n\n```typ\n#show: body => {\n  for elem in body.children {\n    if elem.func() == math.equation and elem.block {\n      let numbering = if \"label\" in elem.fields().keys() { \"(1)\" } else { none }\n      set math.equation(numbering: numbering)\n      elem\n    } else {\n      elem\n    }\n  }\n}\n```\n\nAnd you can also append some other settings like [this comment](https://github.com/typst/typst/issues/311#issuecomment-2104447655).\n\nIn this case, the following script\n\n```typ\n#lorem(30)\n$ y = a x + b $ <eq:eq2>\n#lorem(19)\n@eq:eq2 #lorem(20)\n$ E = m c^2 $\n#lorem(10)\n```\n\nwill result in\n\n![image|542x203](upload://4d3UbShqI9pBPmQGttnRAjcFOWv.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 103,
      "score": 230.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 269
    },
    {
      "id": 3553,
      "post_number": 4,
      "username": "Christopher_Marcotte",
      "name": "Christopher Marcotte",
      "created_at": "2024-10-08T11:14:33.020Z",
      "updated_at": "2024-10-08T11:14:33.020Z",
      "cooked": "<p>Thank you very much for the extensive options. I particularly like avoiding the custom function.</p>",
      "raw": "Thank you very much for the extensive options. I particularly like avoiding the custom function.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 91,
      "score": 23.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 270
    },
    {
      "id": 3584,
      "post_number": 5,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-09T04:53:46.579Z",
      "updated_at": "2024-10-09T04:53:46.579Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/christopher_marcotte\">@Christopher_Marcotte</a> ! I‚Äôve updated your post title to be in accordance with our question title guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Remember that your title should be a question you‚Äôd ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Christopher_Marcotte ! I've updated your post title to be in accordance with our question title guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nRemember that your title should be a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 90,
      "score": 48.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 3585,
      "post_number": 6,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-09T04:55:09.821Z",
      "updated_at": "2024-10-09T04:55:09.821Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Aegon\" data-post=\"2\" data-topic=\"977\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/aegon/48/232_2.png\" class=\"avatar\"> Aegon:</div>\n<blockquote>\n<p>I figured out a solution. Create the following function</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let equ(eq, id: none) = {\n  let body = if type(id) == none {eq} else if type(id) == label [#eq #id] else [#eq &lt;#id&gt;]\n  let numbering = if type(id) != none { \"(1)\" } else { none }\n  set math.equation(numbering: numbering)\n  body\n}\n</code></pre>\n</blockquote>\n</aside>\n<p>Hey <a class=\"mention\" href=\"/u/aegon\">@Aegon</a>, quick tip! The syntax <code>&lt;#id&gt;</code> produces a label literally containing <code>#id</code> (that is, a hash, the letter ‚Äúi‚Äù, and the letter ‚Äúd‚Äù), <em>not</em> a label with the contents of the variable named <code>id</code>. Rather, you should write <code>label(id)</code> (use the label constructor) if you‚Äôd like to construct a label from a dynamic string. Hope this helps in the future!</p>",
      "raw": "[quote=\"Aegon, post:2, topic:977\"]\nI figured out a solution. Create the following function\n\n```typ\n#let equ(eq, id: none) = {\n  let body = if type(id) == none {eq} else if type(id) == label [#eq #id] else [#eq <#id>]\n  let numbering = if type(id) != none { \"(1)\" } else { none }\n  set math.equation(numbering: numbering)\n  body\n}\n```\n[/quote]\n\nHey @Aegon, quick tip! The syntax `<#id>` produces a label literally containing `#id` (that is, a hash, the letter \"i\", and the letter \"d\"), _not_ a label with the contents of the variable named `id`. Rather, you should write `label(id)` (use the label constructor) if you'd like to construct a label from a dynamic string. Hope this helps in the future!",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 94,
      "score": 33.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 3604,
      "post_number": 7,
      "username": "Aegon",
      "name": "Aegon Huke",
      "created_at": "2024-10-09T10:22:18.365Z",
      "updated_at": "2024-10-09T10:22:18.365Z",
      "cooked": "<p>Thanks! So the corrected version should be</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let equ(eq, id: none) = {\n  let body = if id == none {eq} else if type(id) == label [#eq #id] else [#eq #label(id)]\n  let numbering = if id != none { \"(1)\" } else { none }\n  set math.equation(numbering: numbering)\n  linebreak()\n  box(body, width: 1fr)\n  linebreak()\n}\n</code></pre>\n<p>Right?</p>",
      "raw": "Thanks! So the corrected version should be \n\n```typ\n#let equ(eq, id: none) = {\n  let body = if id == none {eq} else if type(id) == label [#eq #id] else [#eq #label(id)]\n  let numbering = if id != none { \"(1)\" } else { none }\n  set math.equation(numbering: numbering)\n  linebreak()\n  box(body, width: 1fr)\n  linebreak()\n}\n```\n\nRight?",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 89,
      "score": 32.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 269
    },
    {
      "id": 3611,
      "post_number": 8,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-09T12:23:57.798Z",
      "updated_at": "2024-10-09T12:23:57.798Z",
      "cooked": "<p>Yes (assuming <code>id</code> would always be a string in the last case).</p>",
      "raw": "Yes (assuming `id` would always be a string in the last case).",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 87,
      "score": 17.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 3623,
      "post_number": 9,
      "username": "Aegon",
      "name": "Aegon Huke",
      "created_at": "2024-10-09T16:43:02.567Z",
      "updated_at": "2024-10-09T16:44:32.249Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/christopher_marcotte\">@Christopher_Marcotte</a> Unfortunately, this solution cannot work on equations in lists, enums, etc. To solve this, it is still necessary to define a function which applies the for-loop to its body argument.</p>",
      "raw": "@Christopher_Marcotte Unfortunately, this solution cannot work on equations in lists, enums, etc. To solve this, it is still necessary to define a function which applies the for-loop to its body argument.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 83,
      "score": 21.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 269
    },
    {
      "id": 3624,
      "post_number": 10,
      "username": "Aegon",
      "name": "Aegon Huke",
      "created_at": "2024-10-09T16:46:42.062Z",
      "updated_at": "2024-10-09T16:46:42.062Z",
      "cooked": "<p>Perhaps we can achieve this by using show once the non-recursive show-set is ready.</p>",
      "raw": "Perhaps we can achieve this by using show once the non-recursive show-set is ready.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 82,
      "score": 96.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 269
    },
    {
      "id": 3626,
      "post_number": 11,
      "username": "Enivex",
      "name": "Enivex",
      "created_at": "2024-10-09T21:37:19.914Z",
      "updated_at": "2024-10-09T21:37:19.914Z",
      "cooked": "<p>You may be interested in this package</p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/universe/package/equate/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/universe/package/equate/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/universe/package/equate/\" target=\"_blank\" rel=\"noopener\">equate ‚Äì Typst Universe</a></h3>\n\n  <p>Breakable equations with improved numbering.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "You may be interested in this package \n\nhttps://typst.app/universe/package/equate/",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 80,
      "score": 61.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 5
    },
    {
      "id": 3651,
      "post_number": 12,
      "username": "Christopher_Marcotte",
      "name": "Christopher Marcotte",
      "created_at": "2024-10-10T10:37:01.748Z",
      "updated_at": "2024-10-10T10:37:01.748Z",
      "cooked": "<p>This appears to precisely solve the issue, very elegantly. Amazing, thank you!</p>",
      "raw": "This appears to precisely solve the issue, very elegantly. Amazing, thank you!",
      "reply_to_post_number": 11,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 79,
      "score": 50.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 270
    },
    {
      "id": 3845,
      "post_number": 13,
      "username": "OrangeX4",
      "name": "OrangeX4",
      "created_at": "2024-10-14T03:11:26.194Z",
      "updated_at": "2024-10-14T03:11:26.194Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set math.equation(numbering: \"(1)\")\n#show math.equation: it =&gt; {\n  if not it.has(\"label\") {\n    let fields = it.fields()\n    fields.remove(\"body\")\n    fields.numbering = none\n    return [#counter(math.equation).update(v =&gt; v - 1)#math.equation(..fields, it.body)&lt;math-equation-without-label&gt;]\n  }\n  return it\n}\n\n$ x + y $\n\n$ x + y + z $ &lt;with-label&gt;\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/cb9937781172c905e3407cbd6e37bf7bc82e4954.png\" alt=\"82ae3879ab4cb384318bc01a3e883fc6\" data-base62-sha1=\"t37bSX6oaebPjGRHCoEsdEP7pE8\" width=\"381\" height=\"198\"></p>",
      "raw": "```typ\n#set math.equation(numbering: \"(1)\")\n#show math.equation: it => {\n  if not it.has(\"label\") {\n    let fields = it.fields()\n    fields.remove(\"body\")\n    fields.numbering = none\n    return [#counter(math.equation).update(v => v - 1)#math.equation(..fields, it.body)<math-equation-without-label>]\n  }\n  return it\n}\n\n$ x + y $\n\n$ x + y + z $ <with-label>\n```\n\n![82ae3879ab4cb384318bc01a3e883fc6|381x198](upload://t37bSX6oaebPjGRHCoEsdEP7pE8.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 80,
      "score": 116.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 18
    },
    {
      "id": 6289,
      "post_number": 14,
      "username": "Philipp",
      "name": "Philipp",
      "created_at": "2024-12-03T18:54:15.381Z",
      "updated_at": "2024-12-03T19:14:43.694Z",
      "cooked": "<p>Slightly shorter variant which also ensures correct numbering in presence of inline equations:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set math.equation(numbering: \"(1)\")\n#show math.equation: it =&gt; {\n  if it.block and not it.has(\"label\") [\n    #counter(math.equation).update(v =&gt; v - 1)\n    #math.equation(it.body, block: true, numbering: none)#label(\"\")\n  ] else {\n    it\n  }  \n}\n</code></pre>\n<h1><a name=\"p-6289-explanation-1\" class=\"anchor\" href=\"#p-6289-explanation-1\"></a>Explanation</h1>\n<p>The set rule enables numbering for all equations.<br>\nThe show rule handles block equations without label specially by displaying a copy of the equation without numbering. To ensure that these equations are not counted, the counter is decremented. To avoid recursion, an empty label is added.</p>\n<h1><a name=\"p-6289-example-2\" class=\"anchor\" href=\"#p-6289-example-2\"></a>Example</h1>\n<details><summary>Full code</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(width: 100pt, height: auto)\n\n\n#set math.equation(numbering: \"(1)\")\n#show math.equation: it =&gt; {\n  if it.block and not it.has(\"label\") [\n    #counter(math.equation).update(v =&gt; v - 1)\n    #math.equation(it.body, block: true, numbering: none)#label(\"\")\n  ] else {\n    it\n  }  \n}\n\n\n$a$ to the one:\n$ a^1 $\n$b$ to the two:\n$ b^2 $ &lt;b&gt;\n$c$ to the three:\n$ c^3 $\n$d$&lt;x&gt; to the four:\n$ d^4 $ &lt;d&gt;\n\n</code></pre>\n</details>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/c/c46f774a7c25ed69f9e3e0bee699fccf8fe99952.png\" data-download-href=\"https://forum.typst.app/uploads/default/c46f774a7c25ed69f9e3e0bee699fccf8fe99952\" title=\"example\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/c/c46f774a7c25ed69f9e3e0bee699fccf8fe99952_2_272x500.png\" alt=\"example\" data-base62-sha1=\"s1KoJDzZv4ksAiu5i99bFa5IEds\" width=\"272\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/c/c46f774a7c25ed69f9e3e0bee699fccf8fe99952_2_272x500.png, https://forum.typst.app/uploads/default/original/2X/c/c46f774a7c25ed69f9e3e0bee699fccf8fe99952.png 1.5x, https://forum.typst.app/uploads/default/original/2X/c/c46f774a7c25ed69f9e3e0bee699fccf8fe99952.png 2x\" data-dominant-color=\"F8F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">example</span><span class=\"informations\">361√ó662 31.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Slightly shorter variant which also ensures correct numbering in presence of inline equations:\n\n```typst\n#set math.equation(numbering: \"(1)\")\n#show math.equation: it => {\n  if it.block and not it.has(\"label\") [\n    #counter(math.equation).update(v => v - 1)\n    #math.equation(it.body, block: true, numbering: none)#label(\"\")\n  ] else {\n    it\n  }  \n}\n```\n\n\n# Explanation\nThe set rule enables numbering for all equations.\nThe show rule handles block equations without label specially by displaying a copy of the equation without numbering. To ensure that these equations are not counted, the counter is decremented. To avoid recursion, an empty label is added.\n\n# Example\n\n<details><summary>Full code</summary>\n\n```typst\n#set page(width: 100pt, height: auto)\n\n\n#set math.equation(numbering: \"(1)\")\n#show math.equation: it => {\n  if it.block and not it.has(\"label\") [\n    #counter(math.equation).update(v => v - 1)\n    #math.equation(it.body, block: true, numbering: none)#label(\"\")\n  ] else {\n    it\n  }  \n}\n\n\n$a$ to the one:\n$ a^1 $\n$b$ to the two:\n$ b^2 $ <b>\n$c$ to the three:\n$ c^3 $\n$d$<x> to the four:\n$ d^4 $ <d>\n\n```\n</details>\n\n![example|272x500](upload://s1KoJDzZv4ksAiu5i99bFa5IEds.png)",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 57,
      "score": 241.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 798
    },
    {
      "id": 6338,
      "post_number": 15,
      "username": "Jollywatt",
      "name": "Joseph Wilson",
      "created_at": "2024-12-04T17:28:52.024Z",
      "updated_at": "2024-12-04T17:33:56.788Z",
      "cooked": "<p>Edit: the solution in this post doesn‚Äôt work ‚Äî equation numbers are shown automatically, but equation references don‚Äôt work.</p>\n<details>\n<summary>Original post</summary>\n<aside class=\"quote no-group\" data-username=\"Philipp\" data-post=\"14\" data-topic=\"977\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/441A5E/48.png\" class=\"avatar\"> Philipp:</div>\n<blockquote>\n<p>Slightly shorter variant which also ensures correct numbering in presence of inline equations:</p>\n</blockquote>\n</aside>\n<p>Even shorter still, you can do it with a single show rule:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation: it =&gt; {\n\tif it.numbering == none and it.has(\"label\") {\n\t\tmath.equation(it.body, numbering: \"(1)\", block: true)\n\t} else { it }\n}\n</code></pre>\n<p>Fortunately, the show rule preserves the label by default.</p>\n</details>",
      "raw": "Edit: the solution in this post doesn't work ‚Äî equation numbers are shown automatically, but equation references don't work.\n\n<details>\n<summary>Original post</summary>\n\n[quote=\"Philipp, post:14, topic:977\"]\nSlightly shorter variant which also ensures correct numbering in presence of inline equations:\n[/quote]\n\nEven shorter still, you can do it with a single show rule:\n\n```typ\n#show math.equation: it => {\n\tif it.numbering == none and it.has(\"label\") {\n\t\tmath.equation(it.body, numbering: \"(1)\", block: true)\n\t} else { it }\n}\n```\n\nFortunately, the show rule preserves the label by default.\n</details>",
      "reply_to_post_number": 14,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 51,
      "score": 30.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 713
    },
    {
      "id": 8762,
      "post_number": 16,
      "username": "Evon_Vootlo",
      "name": "Evon Vootlo",
      "created_at": "2025-02-18T08:06:59.310Z",
      "updated_at": "2025-02-18T08:07:23.566Z",
      "cooked": "<p>Shouldn‚Äôt the counter update line be this?</p>\n<pre><code>#counter(math.equation).update(v =&gt; calc.max(v - 1, 0))\n</code></pre>\n<p>Otherwise if the document starts with an unlabeled equation, then the counter goes negative and Typst throws an error.</p>",
      "raw": "Shouldn't the counter update line be this?\n\n    #counter(math.equation).update(v => calc.max(v - 1, 0))\n\nOtherwise if the document starts with an unlabeled equation, then the counter goes negative and Typst throws an error.",
      "reply_to_post_number": 14,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 17.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1151
    },
    {
      "id": 8765,
      "post_number": 17,
      "username": "Philipp",
      "name": "Philipp",
      "created_at": "2025-02-18T08:55:54.980Z",
      "updated_at": "2025-02-18T08:56:06.565Z",
      "cooked": "<blockquote>\n<p>Otherwise if the document starts with an unlabeled equation, then the counter goes negative and Typst throws an error.</p>\n</blockquote>\n<p>The solution works in either case. At the line in question, the counter is already incremented, i.e. always ‚â•1. If the document starts with an unlabeled equation, it is 1, and the counter update code sets it back to zero.</p>",
      "raw": "> Otherwise if the document starts with an unlabeled equation, then the counter goes negative and Typst throws an error.\n\nThe solution works in either case. At the line in question, the counter is already incremented, i.e. always ‚â•1. If the document starts with an unlabeled equation, it is 1, and the counter update code sets it back to zero.",
      "reply_to_post_number": 16,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 7.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 798
    }
  ],
  "scraped_at": "2025-06-10T09:57:12.454550"
}
{
  "topic_metadata": {
    "id": 980,
    "title": "How to install Typst 0.12-rc1 locally?",
    "slug": "how-to-install-typst-0-12-rc1-locally",
    "posts_count": 8,
    "created_at": "2024-10-08T11:46:26.300Z",
    "last_posted_at": "2024-10-12T19:45:02.806Z",
    "views": 1110,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "xkevio",
    "tags": [
      "cli"
    ],
    "category_id": 5,
    "participant_count": 7,
    "word_count": 366
  },
  "posts": [
    {
      "id": 3554,
      "post_number": 1,
      "username": "fdekerm",
      "name": "Fran√ßois de Kermenguy",
      "created_at": "2024-10-08T11:46:26.422Z",
      "updated_at": "2024-10-12T21:30:04.393Z",
      "cooked": "<p>Hello,<br>\nI would like to compile a big document (about 200 pages). The web app crashed when I tried. How can I install the Typst 0.12-rc1 version locally to compile my document in vs-code ?</p>\n<p>I tried <code>cargo install --version 0.12.0-rc1 --git https://github.com/typst/typst --locked typst-cli</code>, but error was returned: <code>error: could not find typst-cli in https://github.com/typst/typst with version =0.12.0-rc1</code></p>\n<p>Merci! <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nfdekerm</p>",
      "raw": "Hello,\nI would like to compile a big document (about 200 pages). The web app crashed when I tried. How can I install the Typst 0.12-rc1 version locally to compile my document in vs-code ?\n\nI tried `cargo install --version 0.12.0-rc1 --git https://github.com/typst/typst --locked typst-cli`, but error was returned: `error: could not find typst-cli in https://github.com/typst/typst with version =0.12.0-rc1`\n\nMerci! :slight_smile: \nfdekerm",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 76,
      "score": 5710.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 3557,
      "post_number": 2,
      "username": "AllanChain",
      "name": "AllanChain",
      "created_at": "2024-10-08T11:58:21.783Z",
      "updated_at": "2024-10-08T11:58:21.783Z",
      "cooked": "<p>Why not download the binary from the <a href=\"https://github.com/typst/typst/releases/tag/v0.12.0-rc1\" rel=\"noopener nofollow ugc\">release page</a> and put it in your <code>PATH</code>?</p>",
      "raw": "Why not download the binary from the [release page](https://github.com/typst/typst/releases/tag/v0.12.0-rc1) and put it in your `PATH`?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 75,
      "score": 55.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 547
    },
    {
      "id": 3558,
      "post_number": 3,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-08T12:08:21.240Z",
      "updated_at": "2024-10-08T12:08:21.240Z",
      "cooked": "<p>Either download the binary from the GitHub Releases as <a class=\"mention\" href=\"/u/allanchain\">@AllanChain</a> said, or just follow the README instructions which say</p>\n<blockquote>\n<ul>\n<li>If you have a <a href=\"https://rustup.rs/\" rel=\"noopener nofollow ugc\">Rust</a> toolchain installed, you can install\n<ul>\n<li>the latest released Typst version with <code>cargo install --locked typst-cli</code></li>\n<li>a development version with <code>cargo install --git https://github.com/typst/typst --locked typst-cli</code></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p>So, you can use <code>cargo install --git https://github.com/typst/typst --locked typst-cli</code>.</p>",
      "raw": "Either download the binary from the GitHub Releases as @AllanChain said, or just follow the README instructions which say\n\n> * If you have a [Rust](https://rustup.rs/) toolchain installed, you can install\n>   * the latest released Typst version with `cargo install --locked typst-cli`\n>   * a development version with `cargo install --git https://github.com/typst/typst --locked typst-cli`\n\nSo, you can use `cargo install --git https://github.com/typst/typst --locked typst-cli`.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 72,
      "score": 229.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3569,
      "post_number": 4,
      "username": "fdekerm",
      "name": "Fran√ßois de Kermenguy",
      "created_at": "2024-10-08T15:51:30.937Z",
      "updated_at": "2024-10-08T15:51:30.937Z",
      "cooked": "<p>Perfect, thank you very much!</p>",
      "raw": "Perfect, thank you very much!",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 64,
      "score": 22.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 3656,
      "post_number": 5,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-10-10T11:48:20.151Z",
      "updated_at": "2024-10-10T11:48:20.151Z",
      "cooked": "<p>As a final note on why your command didn‚Äôt work, Typst release candidates and patch versions are often on extra branches, not on <code>main</code>. <code>cargo install --git ...</code> assumes you‚Äôre installing from <code>main</code> unless specified otherwise.</p>\n<p>You can install the release candidate by passing the correct commit to install from by using either <code>--rev ...</code>, <code>--branch ...</code> or <code>--tag ...</code>:</p>\n<pre data-code-wrap=\"sh\"><code class=\"lang-sh\">cargo install --tag v0.12.0-rc1 --git https://github.com/typst/typst --locked typst-cli\n</code></pre>\n<p>As you can see, this also doesn‚Äôt require the <code>--version ...</code> option, since the newest version on this tag is the one you‚Äôre looking for.</p>",
      "raw": "As a final note on why your command didn't work, Typst release candidates and patch versions are often on extra branches, not on `main`. `cargo install --git ...` assumes you're installing from `main` unless specified otherwise.\n\nYou can install the release candidate by passing the correct commit to install from by using either `--rev ...`, `--branch ...` or `--tag ...`:\n\n```sh\ncargo install --tag v0.12.0-rc1 --git https://github.com/typst/typst --locked typst-cli\n```\n\nAs you can see, this also doesn't require the `--version ...` option, since the newest version on this tag is the one you're looking for.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 34.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 3669,
      "post_number": 6,
      "username": "laurmaedje",
      "name": "Laurenz M√§dje",
      "created_at": "2024-10-10T15:30:21.141Z",
      "updated_at": "2024-10-10T15:30:21.141Z",
      "cooked": "<p>You can also install from <a href=\"http://crates.io\">crates.io</a> by the way:</p>\n<pre data-code-wrap=\"sh\"><code class=\"lang-sh\">cargo install --locked typst-cli@0.12.0-rc1\n</code></pre>",
      "raw": "You can also install from crates.io by the way:\n```sh\ncargo install --locked typst-cli@0.12.0-rc1\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 48.8,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 3674,
      "post_number": 7,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-10T16:17:33.788Z",
      "updated_at": "2024-10-10T16:17:33.788Z",
      "cooked": "<p>In related news, there is now also a <a class=\"hashtag-cooked\" href=\"/tag/tinymist\" data-type=\"tag\" data-slug=\"tinymist\" data-id=\"27\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>tinymist</span></a> pre-release based on 0.12.0-rc1: <a href=\"https://github.com/Myriad-Dreamin/tinymist/releases/tag/v0.11.33-3\" class=\"inline-onebox\">Release v0.11.33 ¬∑ Myriad-Dreamin/tinymist ¬∑ GitHub</a></p>",
      "raw": "In related news, there is now also a #tinymist pre-release based on 0.12.0-rc1: https://github.com/Myriad-Dreamin/tinymist/releases/tag/v0.11.33-3",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 8.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3757,
      "post_number": 8,
      "username": "Hector_Condori",
      "name": "Hector Condori",
      "created_at": "2024-10-12T19:45:02.806Z",
      "updated_at": "2024-10-12T19:45:02.806Z",
      "cooked": "<p>I don‚Äôt know if I understood correctly, this works for me.<br>\nJust type in the terminal <code>typst update  \"0.12.0-rc1\"</code> and optional use <code>--force</code> parameter if it‚Äôsnt work</p>",
      "raw": "I don't know if I understood correctly, this works for me.\nJust type in the terminal `typst update  \"0.12.0-rc1\"` and optional use `--force` parameter if it'snt work",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 6.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 102
    }
  ],
  "scraped_at": "2025-06-10T09:57:11.693746"
}
