{
  "topic_metadata": {
    "id": 1425,
    "title": "How to make abbreviations containing period inseparable?",
    "slug": "how-to-make-abbreviations-containing-period-inseparable",
    "posts_count": 6,
    "created_at": "2024-10-30T00:41:12.893Z",
    "last_posted_at": "2024-10-31T20:08:21.440Z",
    "views": 138,
    "like_count": 3,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "my4ng",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 255
  },
  "posts": [
    {
      "id": 4821,
      "post_number": 1,
      "username": "my4ng",
      "name": "Michael Yang",
      "created_at": "2024-10-30T00:41:13.026Z",
      "updated_at": "2024-10-31T04:39:59.077Z",
      "cooked": "<p>Currently when writing abbreviations such as “e.g.” and “i.e.”, typst treats them as separate sentences, and adds spaces and breaks them across lines as necessary, for example:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/b/b580c575e1eb436b67b8858d70712c0b3735f9ab.png\" data-download-href=\"https://forum.typst.app/uploads/default/b580c575e1eb436b67b8858d70712c0b3735f9ab\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/b/b580c575e1eb436b67b8858d70712c0b3735f9ab_2_690x64.png\" alt=\"image\" data-base62-sha1=\"pTEjqUIFx24MVsPBNiFM0nWmygP\" width=\"690\" height=\"64\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/b/b580c575e1eb436b67b8858d70712c0b3735f9ab_2_690x64.png, https://forum.typst.app/uploads/default/original/2X/b/b580c575e1eb436b67b8858d70712c0b3735f9ab.png 1.5x, https://forum.typst.app/uploads/default/original/2X/b/b580c575e1eb436b67b8858d70712c0b3735f9ab.png 2x\" data-dominant-color=\"F1F1F1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">785×73 27.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>There is a feature request for this <a href=\"https://github.com/typst/typst/issues/1281\" rel=\"noopener nofollow ugc\">issue</a>, to add something similar to <code>\\@</code> in Latex. Is there any workaround for this issue in 0.12? Thanks!</p>",
      "raw": "Currently when writing abbreviations such as \"e.g.\" and \"i.e.\", typst treats them as separate sentences, and adds spaces and breaks them across lines as necessary, for example:\n\n![image|690x64, 100%](upload://pTEjqUIFx24MVsPBNiFM0nWmygP.png)\n\nThere is a feature request for this [issue](https://github.com/typst/typst/issues/1281), to add something similar to `\\@` in Latex. Is there any workaround for this issue in 0.12? Thanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 37,
      "score": 307.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 592
    },
    {
      "id": 4827,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-30T07:56:42.644Z",
      "updated_at": "2024-10-30T07:56:42.644Z",
      "cooked": "<p>Just wrapping them in a <code>#box</code> should prevent the abbreviation from being broken across lines, I think. You can automate this with show rules like <code>show \"e.g.\": box</code></p>",
      "raw": "Just wrapping them in a `#box` should prevent the abbreviation from being broken across lines, I think. You can automate this with show rules like `show \"e.g.\": box`",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 36,
      "score": 37.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 4859,
      "post_number": 3,
      "username": "my4ng",
      "name": "Michael Yang",
      "created_at": "2024-10-30T16:26:25.976Z",
      "updated_at": "2024-10-30T16:26:25.976Z",
      "cooked": "<p>Indeed that makes sure it doesn’t break across lines; however, they are still treated as essentially two sentences so the large spaces in between and after. Ideally, “e.g.” should be seen as a single word.</p>",
      "raw": "Indeed that makes sure it doesn't break across lines; however, they are still treated as essentially two sentences so the large spaces in between and after. Ideally, \"e.g.\" should be seen as a single word.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 11.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 592
    },
    {
      "id": 4874,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-31T04:40:50.246Z",
      "updated_at": "2024-10-31T04:40:50.246Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/my4ng\">@my4ng</a>, welcome to the forum! I’ve updated your post title to better fit our guidelines for question posts: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your post title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @my4ng, welcome to the forum! I've updated your post title to better fit our guidelines for question posts: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your post title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 24.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 4907,
      "post_number": 5,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-31T13:32:30.825Z",
      "updated_at": "2024-10-31T13:32:30.825Z",
      "cooked": "<p>I cannot reproduce the wrong spacing and it would surprise me as Typst doesn’t really have a notion of sentence spacing as far as I know—even with justification enabled. <code>\"e. g.\"</code> looks weird yes but that would be incorrect anyway.</p>",
      "raw": "I cannot reproduce the wrong spacing and it would surprise me as Typst doesn't really have a notion of sentence spacing as far as I know—even with justification enabled. `\"e. g.\"` looks weird yes but that would be incorrect anyway.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 4932,
      "post_number": 6,
      "username": "my4ng",
      "name": "Michael Yang",
      "created_at": "2024-10-31T20:08:21.440Z",
      "updated_at": "2024-10-31T20:08:21.440Z",
      "cooked": "<p>Apologies. It appears the issue that I have used a show rule for period meant for maths mode. After I restricted it to maths, this doesn’t appear again.</p>",
      "raw": "Apologies. It appears the issue that I have used a show rule for period meant for maths mode. After I restricted it to maths, this doesn’t appear again.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 592
    }
  ],
  "scraped_at": "2025-06-10T09:55:47.172691"
}
{
  "topic_metadata": {
    "id": 1426,
    "title": "How to set an exact line height no matter which font is used in the line?",
    "slug": "how-to-set-an-exact-line-height-no-matter-which-font-is-used-in-the-line",
    "posts_count": 9,
    "created_at": "2024-10-30T04:00:05.600Z",
    "last_posted_at": "2025-03-11T08:38:47.541Z",
    "views": 976,
    "like_count": 3,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SolidTux",
    "tags": [
      "layout",
      "fonts"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 548
  },
  "posts": [
    {
      "id": 4823,
      "post_number": 1,
      "username": "Ethan_Pixar",
      "name": "Ethan Pixar",
      "created_at": "2024-10-30T04:00:05.723Z",
      "updated_at": "2024-10-30T04:12:58.565Z",
      "cooked": "<p>I am a multilingual user, English and Chinese at the same time. Currently I need four different fonts and I set them up like this:</p>\n<pre><code class=\"lang-auto\">//default fonts &amp; text settings\n#let ENsans = \"Helvetica Neue\"\n#let ENserif = \"Charter\"\n#let Hei = \"Heiti SC\"\n#let Song = \"Songti SC\"\n\n//font Groups\n#let sans = (ENsans, Hei)\n#let serif = (ENserif, Song)\n#set text(\n  font: serif,\n  size: 12pt,\n  weight: \"regular\",\n)\n</code></pre>\n<p>The problem is that in cases where I need two fonts in a line (Charter for English &amp; Songti for Chinese), the default line height is the determined by the highest font in the line, which make the paragraphy line distributed unevenly. An example of the problem can be seen in the picture below.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/9/911a09495f200ee23b778bfa5fd280253961ce82.png\" data-download-href=\"https://forum.typst.app/uploads/default/911a09495f200ee23b778bfa5fd280253961ce82\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/9/911a09495f200ee23b778bfa5fd280253961ce82_2_386x500.png\" alt=\"image\" data-base62-sha1=\"kHD0YgGOzW2Tyoj7WnCjw6xWhKq\" width=\"386\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/9/911a09495f200ee23b778bfa5fd280253961ce82_2_386x500.png, https://forum.typst.app/uploads/default/optimized/2X/9/911a09495f200ee23b778bfa5fd280253961ce82_2_579x750.png 1.5x, https://forum.typst.app/uploads/default/original/2X/9/911a09495f200ee23b778bfa5fd280253961ce82.png 2x\" data-dominant-color=\"E6E6E6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">726×940 125 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>The lines with English words like “LaTeX”, “Markdown” are noticably higher, even when they are in the same paragraph.</p>\n<p>I have tried <code>#set par(leading: 0.65em)</code>, but this only affects the spacing between lines instead of the exact height of the line. How can I force the height of lines to be the same? And if it is not possible, 使用中文的同志们有没有样式比较正常的同时支持中英文的字体推荐呢？</p>",
      "raw": "I am a multilingual user, English and Chinese at the same time. Currently I need four different fonts and I set them up like this: \n\n```\n//default fonts & text settings\n#let ENsans = \"Helvetica Neue\"\n#let ENserif = \"Charter\"\n#let Hei = \"Heiti SC\"\n#let Song = \"Songti SC\"\n\n//font Groups\n#let sans = (ENsans, Hei)\n#let serif = (ENserif, Song)\n#set text(\n  font: serif,\n  size: 12pt,\n  weight: \"regular\",\n)\n```\n\nThe problem is that in cases where I need two fonts in a line (Charter for English & Songti for Chinese), the default line height is the determined by the highest font in the line, which make the paragraphy line distributed unevenly. An example of the problem can be seen in the picture below.\n\n![image|386x500](upload://kHD0YgGOzW2Tyoj7WnCjw6xWhKq.png)\n\n\nThe lines with English words like \"LaTeX\", \"Markdown\" are noticably higher, even when they are in the same paragraph.\n\nI have tried `#set par(leading: 0.65em)`, but this only affects the spacing between lines instead of the exact height of the line. How can I force the height of lines to be the same? And if it is not possible, 使用中文的同志们有没有样式比较正常的同时支持中英文的字体推荐呢？",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 58,
      "score": 5056.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 484
    },
    {
      "id": 4829,
      "post_number": 2,
      "username": "SolidTux",
      "name": "Daniel Hauck",
      "created_at": "2024-10-30T08:40:04.543Z",
      "updated_at": "2024-10-30T08:40:04.543Z",
      "cooked": "<p>You need <code>set text(top-edge: 1em)</code> or something similar. The <a href=\"https://typst.app/docs/reference/text/text/#parameters-top-edge\">default</a> is <code>cap-height</code>, which is font-dependent.</p>",
      "raw": "You need `set text(top-edge: 1em)` or something similar. The [default](https://typst.app/docs/reference/text/text/#parameters-top-edge) is `cap-height`, which is font-dependent.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 56,
      "score": 101.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 572
    },
    {
      "id": 4831,
      "post_number": 3,
      "username": "Ethan_Pixar",
      "name": "Ethan Pixar",
      "created_at": "2024-10-30T09:16:49.407Z",
      "updated_at": "2024-10-30T09:17:22.905Z",
      "cooked": "<p>Great Thanks! This does solve the problem!! The lines are now distributing evenly!</p>\n<p>However another problem occurring is that, the baseline of English words are a little bit too high up, compare to that of Chinese characters, can I adjust another parameter to make the baseline higher?<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/a/ad2c6d599ba6bf5c9a0860a45d368c22d2250523.png\" data-download-href=\"https://forum.typst.app/uploads/default/ad2c6d599ba6bf5c9a0860a45d368c22d2250523\" title=\"c4cae2aa70e12d48a7c383c06d6ea500\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/a/ad2c6d599ba6bf5c9a0860a45d368c22d2250523_2_572x500.png\" alt=\"c4cae2aa70e12d48a7c383c06d6ea500\" data-base62-sha1=\"oHXMNFq9bzimnlo3PAGXPBDClF1\" width=\"572\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/a/ad2c6d599ba6bf5c9a0860a45d368c22d2250523_2_572x500.png, https://forum.typst.app/uploads/default/original/2X/a/ad2c6d599ba6bf5c9a0860a45d368c22d2250523.png 1.5x, https://forum.typst.app/uploads/default/original/2X/a/ad2c6d599ba6bf5c9a0860a45d368c22d2250523.png 2x\" data-dominant-color=\"E2E2E2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">c4cae2aa70e12d48a7c383c06d6ea500</span><span class=\"informations\">630×550 80.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I also did this experiment:</p>\n<pre><code class=\"lang-auto\">rect(fill: aqua)[\n  然后我又尝试用 LaTeX 来写实\n]\n</code></pre>\n<p>As you can see,<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/3/390d33a8b4b6c6e98622c9e9e1352f732ad5f901.png\" alt=\"image\" data-base62-sha1=\"88Hv21vU63tbTuAbDvUJ8iXHsFb\" width=\"510\" height=\"104\"><br>\nthe baseline is a bit low in the line.</p>",
      "raw": "Great Thanks! This does solve the problem!! The lines are now distributing evenly!\n\nHowever another problem occurring is that, the baseline of English words are a little bit too high up, compare to that of Chinese characters, can I adjust another parameter to make the baseline higher? \n![c4cae2aa70e12d48a7c383c06d6ea500|572x500](upload://oHXMNFq9bzimnlo3PAGXPBDClF1.png)\n\nI also did this experiment:\n```\nrect(fill: aqua)[\n  然后我又尝试用 LaTeX 来写实\n]\n```\nAs you can see, \n![image|510x104](upload://88Hv21vU63tbTuAbDvUJ8iXHsFb.png)\nthe baseline is a bit low in the line.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 53,
      "score": 165.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 484
    },
    {
      "id": 4832,
      "post_number": 4,
      "username": "SolidTux",
      "name": "Daniel Hauck",
      "created_at": "2024-10-30T09:44:29.233Z",
      "updated_at": "2024-10-30T09:44:29.233Z",
      "cooked": "<p>There is a <a href=\"https://typst.app/docs/reference/text/text/#parameters-baseline\">baseline parameter</a>, but I’ve never used it.</p>",
      "raw": "There is a [baseline parameter](https://typst.app/docs/reference/text/text/#parameters-baseline), but I've never used it.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 18.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 572
    },
    {
      "id": 9571,
      "post_number": 5,
      "username": "Radon",
      "name": "Radon",
      "created_at": "2025-03-10T13:33:54.785Z",
      "updated_at": "2025-03-10T13:33:54.785Z",
      "cooked": "<p>I’ve tried <code>show text.where(font: \"xxx\"): show text(baseline: xxem)</code> to set specific baseline for Chinese fonts. But this doesn’t work <img src=\"https://forum.typst.app/images/emoji/apple/smiling_face_with_tear.png?v=12\" title=\":smiling_face_with_tear:\" class=\"emoji\" alt=\":smiling_face_with_tear:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "I've tried `show text.where(font: \"xxx\"): show text(baseline: xxem)` to set specific baseline for Chinese fonts. But this doesn't work :smiling_face_with_tear:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 15.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1323
    },
    {
      "id": 9603,
      "post_number": 6,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-10T15:26:09.664Z",
      "updated_at": "2025-03-10T15:26:09.664Z",
      "cooked": "<p>Maybe you’re not using the right font name in the show rule… After you do <code>set text(font: ...)</code>, try something like <code>context panic(text.font)</code> to see what name is actually used by Typst.</p>",
      "raw": "Maybe you're not using the right font name in the show rule... After you do `set text(font: ...)`, try something like `context panic(text.font)` to see what name is actually used by Typst.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 9.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9621,
      "post_number": 7,
      "username": "Radon",
      "name": "Radon",
      "created_at": "2025-03-11T01:19:05.631Z",
      "updated_at": "2025-03-11T01:19:05.631Z",
      "cooked": "<p>Still no good. But thanks for the advice. I’ll try a different font instead.</p>",
      "raw": "Still no good. But thanks for the advice. I'll try a different font instead.",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 14.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1323
    },
    {
      "id": 9624,
      "post_number": 8,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-11T08:23:15.817Z",
      "updated_at": "2025-03-11T08:24:13.406Z",
      "cooked": "<p>It seems that the <code>show text.where(font: \"xxx\"): set text(...)</code> method works only when <code>text.font</code> is set to a single value… So this works:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show text.where(font: \"noto sans tc\"): set text(baseline: -0.3em)\n#lorem(5)\n#set text(font: \"Noto Sans TC\")\n天地玄黄 宇宙洪荒 日月盈昃 辰宿列张 寒来暑往 秋收冬藏\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/6/65eb36271b5ef90a770dc2efdfa20f3c841a4db4.png\" alt=\"image\" data-base62-sha1=\"exCa6cpL9lHMHLaLzwipgcQxsxe\" width=\"480\" height=\"30\"></p>\n<p>but this doesn’t work:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set text(font: (\n  (name: \"Noto Sans TC\", covers: regex(\"[\\p{Han}]\")),\n  \"Libertinus Serif\",\n))\n#show text.where(font: \"noto sans tc\"): set text(baseline: -0.3em)\n#lorem(5)\n天地玄黄 宇宙洪荒 日月盈昃 辰宿列张 寒来暑往 秋收冬藏\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/2/2d651d25d87680fde132c7483ebd739078eb8b33.png\" alt=\"image\" data-base62-sha1=\"6tA7xtSJPYCec1jhqOusPiW0iIz\" width=\"485\" height=\"27\"></p>\n<p>A more robust and cleaner way to do this could be with functions to set the font explicitly for each piece of text:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let latin = text.with(font: \"Libertinus Sans\")\n#let chinese = text.with(font: \"Noto Sans TC\", baseline: -0.3em)\n\n#latin[#lorem(5)]\n#chinese[天地玄黄 宇宙洪荒 日月盈昃 辰宿列张 寒来暑往 秋收冬藏]\n</code></pre>",
      "raw": "It seems that the `show text.where(font: \"xxx\"): set text(...)` method works only when `text.font` is set to a single value... So this works:\n\n```typ\n#show text.where(font: \"noto sans tc\"): set text(baseline: -0.3em)\n#lorem(5)\n#set text(font: \"Noto Sans TC\")\n天地玄黄 宇宙洪荒 日月盈昃 辰宿列张 寒来暑往 秋收冬藏\n```\n\n![image|640x40, 75%](upload://exCa6cpL9lHMHLaLzwipgcQxsxe.png)\n\nbut this doesn't work:\n\n```typ\n#set text(font: (\n  (name: \"Noto Sans TC\", covers: regex(\"[\\p{Han}]\")),\n  \"Libertinus Serif\",\n))\n#show text.where(font: \"noto sans tc\"): set text(baseline: -0.3em)\n#lorem(5)\n天地玄黄 宇宙洪荒 日月盈昃 辰宿列张 寒来暑往 秋收冬藏\n```\n![image|647x36, 75%](upload://6tA7xtSJPYCec1jhqOusPiW0iIz.png)\n\nA more robust and cleaner way to do this could be with functions to set the font explicitly for each piece of text:\n\n```typ\n#let latin = text.with(font: \"Libertinus Sans\")\n#let chinese = text.with(font: \"Noto Sans TC\", baseline: -0.3em)\n\n#latin[#lorem(5)]\n#chinese[天地玄黄 宇宙洪荒 日月盈昃 辰宿列张 寒来暑往 秋收冬藏]\n```",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 39.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9626,
      "post_number": 9,
      "username": "Radon",
      "name": "Radon",
      "created_at": "2025-03-11T08:38:47.541Z",
      "updated_at": "2025-03-11T08:38:47.541Z",
      "cooked": "<p>Exactly! Really appreciate your help.</p>",
      "raw": "Exactly! Really appreciate your help.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 23.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1323
    }
  ],
  "scraped_at": "2025-06-10T09:55:46.435214"
}
{
  "topic_metadata": {
    "id": 1433,
    "title": "Is an assert supposed to be able to change behavior when it \"doesn't\" fail?",
    "slug": "is-an-assert-supposed-to-be-able-to-change-behavior-when-it-doesnt-fail",
    "posts_count": 4,
    "created_at": "2024-10-30T12:02:04.522Z",
    "last_posted_at": "2025-02-23T15:56:26.600Z",
    "views": 116,
    "like_count": 3,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "laurmaedje",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 694
  },
  "posts": [
    {
      "id": 4852,
      "post_number": 1,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-30T12:02:04.687Z",
      "updated_at": "2024-10-31T08:41:32.553Z",
      "cooked": "<p>I was trying to minimize an issue in fletcher’s manual and reduced it down to the following (this still depends on CeTZ and fletcher so it’s not properly minimal, but hopefully small enough to discuss the issue):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.1\": draw, vector\n#import \"@preview/fletcher:0.5.2\" as fletcher: diagram, node\n\n// this is copy-pasted from fletcher\n#let pill(node, extrude) = {\n  let size = node.size.map(i =&gt; i + 2*extrude)\n  // assert(size.any(x =&gt; x &gt; 0pt))\n  draw.rect(\n    vector.scale(size, -0.5),\n    vector.scale(size, +0.5),\n    radius: calc.min(..size)/2,\n  )\n}\n\n#diagram(node((0,0), link(label(\"pill()\"), raw(\"pill\")), shape: pill,\n  fill: green.lighten(90%), stroke: green))\n\n= pill#label(\"pill()\")\n</code></pre>\n<p>This does not compile, with the following error:</p>\n<pre><code class=\"lang-auto\">error: array is empty\n   ┌─ @preview/cetz:0.3.1/src/drawable.typ:45:10\nhelp: error occurred in this call of function `path`\n     ┌─ @preview/cetz:0.3.1/src/draw/shapes.typ:1145:8\nhelp: error occurred in this function call\n   ┌─ @preview/cetz:0.3.1/src/process.typ:17:22\n...\n</code></pre>\n<p>After some bisecting (because <a href=\"https://github.com/typst/typst/issues/1747\">the stack trace is incomplete due to context being involved</a>) I figured out that a rectangle with zero size causes this error inside CeTZ, and that the function that drew the rectangle was the one reproduced above.</p>\n<p>I thought an <code>assert()</code> check could at least bring the mistake to light earlier, so I inserted <code>assert(size.any(x =&gt; x &gt; 0pt))</code> – and that made the document compile!</p>\n<p>I have a rough idea what’s happening here: the node’s label from which the node size is computed is <code>link(label(\"pill()\"), raw(\"pill\"))</code>. The link element probably gets its measurements late (probably because links in general also need to handle things such as inferring the text from the referenced label), thus an “early” <code>measure()</code> returns <code>(0pt, 0pt)</code>, making CeTZ fail. By the time the size would be known, the compilation has already failed.<br>\n<code>assert()</code> seems to be handled differently, just trying again and eventually resulting in the node size to be positive, and thus a successful compilation.</p>\n<p>My question now is: is this <em>supposed</em> to happen/expected or should Typst’s behavior not be influenced by a successful assert?</p>\n<p>I assume there’s something wrong in how fletcher measures and then stores the result for later use, but I’m also pretty sure that this assert is not the ideal fix for that. I’d also be interested in uncovering the specific anti-pattern that is at fault here – but that’s probably my responsibility, further minimizing the example I’ve come up with here.</p>",
      "raw": "I was trying to minimize an issue in fletcher's manual and reduced it down to the following (this still depends on CeTZ and fletcher so it's not properly minimal, but hopefully small enough to discuss the issue):\n```typ\n#import \"@preview/cetz:0.3.1\": draw, vector\n#import \"@preview/fletcher:0.5.2\" as fletcher: diagram, node\n\n// this is copy-pasted from fletcher\n#let pill(node, extrude) = {\n  let size = node.size.map(i => i + 2*extrude)\n  // assert(size.any(x => x > 0pt))\n  draw.rect(\n    vector.scale(size, -0.5),\n    vector.scale(size, +0.5),\n    radius: calc.min(..size)/2,\n  )\n}\n\n#diagram(node((0,0), link(label(\"pill()\"), raw(\"pill\")), shape: pill,\n  fill: green.lighten(90%), stroke: green))\n\n= pill#label(\"pill()\")\n```\n\nThis does not compile, with the following error:\n```\nerror: array is empty\n   ┌─ @preview/cetz:0.3.1/src/drawable.typ:45:10\nhelp: error occurred in this call of function `path`\n     ┌─ @preview/cetz:0.3.1/src/draw/shapes.typ:1145:8\nhelp: error occurred in this function call\n   ┌─ @preview/cetz:0.3.1/src/process.typ:17:22\n...\n```\nAfter some bisecting (because [the stack trace is incomplete due to context being involved](https://github.com/typst/typst/issues/1747)) I figured out that a rectangle with zero size causes this error inside CeTZ, and that the function that drew the rectangle was the one reproduced above.\n\nI thought an `assert()` check could at least bring the mistake to light earlier, so I inserted `assert(size.any(x => x > 0pt))` -- and that made the document compile!\n\nI have a rough idea what's happening here: the node's label from which the node size is computed is `link(label(\"pill()\"), raw(\"pill\"))`. The link element probably gets its measurements late (probably because links in general also need to handle things such as inferring the text from the referenced label), thus an \"early\" `measure()` returns `(0pt, 0pt)`, making CeTZ fail. By the time the size would be known, the compilation has already failed.\n`assert()` seems to be handled differently, just trying again and eventually resulting in the node size to be positive, and thus a successful compilation.\n\nMy question now is: is this _supposed_ to happen/expected or should Typst's behavior not be influenced by a successful assert?\n\nI assume there's something wrong in how fletcher measures and then stores the result for later use, but I'm also pretty sure that this assert is not the ideal fix for that. I'd also be interested in uncovering the specific anti-pattern that is at fault here -- but that's probably my responsibility, further minimizing the example I've come up with here.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 44,
      "score": 168.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 4861,
      "post_number": 2,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-30T16:44:00.292Z",
      "updated_at": "2024-10-30T16:44:00.292Z",
      "cooked": "<p>This has come up before here: <a href=\"https://github.com/typst/typst/issues/5015\" class=\"inline-onebox\">Execution error in context can have an effect on layout · Issue #5015 · typst/typst · GitHub</a></p>\n<p>In general, Typst will catch any error in a show rule (or context, which is resolved by a show rule) and only print it if it remains by the last iteration. This frees the users from caring about things like <code>query(heading).first()</code> throwing in the first iteration (because nothing is known yet). But, on the downside, it can cause such strangeness. It’s a tradeoff.</p>",
      "raw": "This has come up before here: https://github.com/typst/typst/issues/5015\n\nIn general, Typst will catch any error in a show rule (or context, which is resolved by a show rule) and only print it if it remains by the last iteration. This frees the users from caring about things like `query(heading).first()` throwing in the first iteration (because nothing is known yet). But, on the downside, it can cause such strangeness. It's a tradeoff.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 34,
      "score": 46.8,
      "accepted_answer": true,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 4886,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-31T08:30:45.818Z",
      "updated_at": "2024-10-31T08:30:45.818Z",
      "cooked": "<p>Thanks! One thing that is a bit different is that here, compilation <em>fails</em> with the <code>assert</code> not present. In other words, the intended behavior is to suppress compilation errors, but here one gets through.</p>\n<p>I now minified it completely:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= foo &lt;x&gt;\n\n#let body = link(label(\"x\"), \"foo\")\n\n// #context [\n//   #let size = measure(body)\n//   #assert(size.values().any(x =&gt; x &gt; 0pt))\n\n  #layout(_ =&gt; {\n    let size = measure(body)\n    assert(size.values().any(x =&gt; x &gt; 0pt))\n    body\n  })\n// ]\n</code></pre>\n<p>I was able to narrow it down to only happening inside <code>layout</code>, not with context or any of the deprecated functions (<code>style</code>, <code>locate</code>) which I assume just work like context under the hood now.</p>\n<p>Is this a (separate) bug then, or is there some reason that makes it harder for errors in <code>layout</code> to get the suppression treatment that context does?</p>",
      "raw": "Thanks! One thing that is a bit different is that here, compilation _fails_ with the `assert` not present. In other words, the intended behavior is to suppress compilation errors, but here one gets through.\n\nI now minified it completely:\n```typ\n= foo <x>\n\n#let body = link(label(\"x\"), \"foo\")\n\n// #context [\n//   #let size = measure(body)\n//   #assert(size.values().any(x => x > 0pt))\n\n  #layout(_ => {\n    let size = measure(body)\n    assert(size.values().any(x => x > 0pt))\n    body\n  })\n// ]\n```\n I was able to narrow it down to only happening inside `layout`, not with context or any of the deprecated functions (`style`, `locate`) which I assume just work like context under the hood now.\n\nIs this a (separate) bug then, or is there some reason that makes it harder for errors in `layout` to get the suppression treatment that context does?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 50.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 8922,
      "post_number": 4,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2025-02-23T15:56:26.600Z",
      "updated_at": "2025-02-23T15:56:26.600Z",
      "cooked": "<p>It’s not intentional that layout does not have the suppression treatment. Right now, the supression is not in context, but more generally in show rule application. And layout doesn’t go through that code path.</p>",
      "raw": "It's not intentional that layout does not have the suppression treatment. Right now, the supression is not in context, but more generally in show rule application. And layout doesn't go through that code path.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 14,
      "score": 47.8,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    }
  ],
  "scraped_at": "2025-06-10T09:55:45.504423"
}
{
  "topic_metadata": {
    "id": 1436,
    "title": "Touying: How to set background colour for presentation?",
    "slug": "touying-how-to-set-background-colour-for-presentation",
    "posts_count": 12,
    "created_at": "2024-10-30T15:46:26.800Z",
    "last_posted_at": "2025-05-22T14:47:12.132Z",
    "views": 599,
    "like_count": 6,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 12,
    "accepted_answer_username": "han190",
    "tags": [
      "touying"
    ],
    "category_id": 5,
    "participant_count": 7,
    "word_count": 712
  },
  "posts": [
    {
      "id": 4858,
      "post_number": 1,
      "username": "Tobias_Andersson_Gid",
      "name": "Tobias Andersson Gidlund",
      "created_at": "2024-10-30T15:46:27.223Z",
      "updated_at": "2024-11-01T03:58:06.349Z",
      "cooked": "<p>I am trying to add to the simple theme available for Touying so that it shows text on another background colour other than white. It appears to work for focus slides (that is, they can change colour), but I cannot for the life of me understand how to change the background colour to a default rgb(“<span class=\"hashtag-raw\">#FDECB2</span>”). It feels like something that should be easy to do, so I suspect that may Typst skills are not really what they should be for solving this.</p>\n<p>Any help would be nice, I really like Typst and would like to convert all my presentations to Typst rather than having them in LaTeX as I do right now.</p>",
      "raw": "I am trying to add to the simple theme available for Touying so that it shows text on another background colour other than white. It appears to work for focus slides (that is, they can change colour), but I cannot for the life of me understand how to change the background colour to a default rgb(\"#FDECB2\"). It feels like something that should be easy to do, so I suspect that may Typst skills are not really what they should be for solving this.\n\nAny help would be nice, I really like Typst and would like to convert all my presentations to Typst rather than having them in LaTeX as I do right now.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 65,
      "score": 2383.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 706
    },
    {
      "id": 4883,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-31T07:56:01.454Z",
      "updated_at": "2024-10-31T07:56:01.454Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/tobias_andersson_gid\">@Tobias_Andersson_Gid</a>, and welcome!</p>\n<p>Don’t hesitate to read <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>, and add a small example that shows your current progress, or images of the desired output, so we can help you better.</p>\n<p>Have you perhaps looked at <a href=\"https://touying-typ.github.io/docs/build-your-own-theme#color-theme\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Build Your Own Theme | Touying</a>? Touying uses a specific utility function to configure colors, to be set in the touying-slides function. Hope that helps,</p>",
      "raw": "Hello @Tobias_Andersson_Gid, and welcome!\n\nDon't hesitate to read https://forum.typst.app/t/how-to-post-in-the-questions-category/11, and add a small example that shows your current progress, or images of the desired output, so we can help you better.\n\nHave you perhaps looked at https://touying-typ.github.io/docs/build-your-own-theme#color-theme? Touying uses a specific utility function to configure colors, to be set in the touying-slides function. Hope that helps,",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 63,
      "score": 152.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 4945,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-01T03:59:39.187Z",
      "updated_at": "2024-11-01T03:59:56.627Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/tobias_andersson_gid\">@Tobias_Andersson_Gid</a>, welcome to the forum! Please post questions in the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category, which is made for this purpose (I’ve moved your post there!). According to the guidelines linked above by <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a>, please also make sure your question post’s title is a question you’d ask to a friend about Typst (I’ve updated the title for you!). Thanks, and have fun using the forum! <img src=\"https://forum.typst.app/uploads/default/original/1X/274f848b78859852628e9efdb7d0aefa6c38bb26.png?v=12\" title=\":typstguy:\" class=\"emoji emoji-custom\" alt=\":typstguy:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Tobias_Andersson_Gid, welcome to the forum! Please post questions in the #questions category, which is made for this purpose (I've moved your post there!). According to the guidelines linked above by @quachpas, please also make sure your question post's title is a question you'd ask to a friend about Typst (I've updated the title for you!). Thanks, and have fun using the forum! :typstguy:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 59,
      "score": 21.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 4949,
      "post_number": 4,
      "username": "Tobias_Andersson_Gid",
      "name": "Tobias Andersson Gidlund",
      "created_at": "2024-11-01T08:45:37.886Z",
      "updated_at": "2024-11-01T08:45:37.886Z",
      "cooked": "<p>Thanks for the nice words and help, I will comply with the rules from now on!</p>\n<p>I have checked the documentation for Touying but not been able to fully understand the colour part (seems to be different for different themes).</p>\n<p>Currently I am away but will try to include an example of what I am doing as soon as I can.</p>",
      "raw": "Thanks for the nice words and help, I will comply with the rules from now on!\n\nI have checked the documentation for Touying but not been able to fully understand the colour part (seems to be different for different themes). \n\nCurrently I am away but will try to include an example of what I am doing as soon as I can.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 52,
      "score": 120.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 706
    },
    {
      "id": 4959,
      "post_number": 5,
      "username": "maucejo",
      "name": "Mathieu Aucejo",
      "created_at": "2024-11-01T09:53:07.033Z",
      "updated_at": "2024-11-01T09:53:07.033Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/tobias_andersson_gid\">@Tobias_Andersson_Gid</a>. In Touying, the background color can be changed by modifying the <code>config-colors</code> dictionnary.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show: presentation-theme.with(\n  config-colors(background: rgb(“#FDECB2”))\n )\n</code></pre>\n<p>Cheers!</p>",
      "raw": "Hi @Tobias_Andersson_Gid. In Touying, the background color can be changed by modifying the `config-colors` dictionnary.\n\n```typ\n#show: presentation-theme.with(\n  config-colors(background: rgb(“#FDECB2”))\n )\n```\n\nCheers!",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 14.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 125
    },
    {
      "id": 5127,
      "post_number": 6,
      "username": "Tobias_Andersson_Gid",
      "name": "Tobias Andersson Gidlund",
      "created_at": "2024-11-04T15:35:34.074Z",
      "updated_at": "2024-11-04T15:35:34.074Z",
      "cooked": "<p>Thanks a lot, however, I cannot get that to work. Just copying and pasting will result in <code>presentation-theme</code> not being found. Could it be different for different themes?</p>\n<p>I have tried to follow the guides for designing a new theme, but using touying-slides function will only give me the background colour for one slide, not all.</p>\n<p>I will continue to work with your feedback and see what I can do, so thanks all of you!</p>",
      "raw": "Thanks a lot, however, I cannot get that to work. Just copying and pasting will result in `presentation-theme` not being found. Could it be different for different themes? \n\nI have tried to follow the guides for designing a new theme, but using touying-slides function will only give me the background colour for one slide, not all.\n\nI will continue to work with your feedback and see what I can do, so thanks all of you!",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 18.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 706
    },
    {
      "id": 5128,
      "post_number": 7,
      "username": "maucejo",
      "name": "Mathieu Aucejo",
      "created_at": "2024-11-04T16:34:17.483Z",
      "updated_at": "2024-11-04T16:34:17.483Z",
      "cooked": "<p>I am out of my office. I will send the solution tomorrow by sharing an example on the Typst app.</p>",
      "raw": "I am out of my office. I will send the solution tomorrow by sharing an example on the Typst app.",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 18.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 125
    },
    {
      "id": 5134,
      "post_number": 8,
      "username": "maucejo",
      "name": "Mathieu Aucejo",
      "created_at": "2024-11-04T17:56:44.596Z",
      "updated_at": "2024-11-04T17:57:00.591Z",
      "cooked": "<p>Just a comment, what I meant by <code>presentation-theme</code> was the name of the touying template.</p>\n<p>For instance</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// For simple theme\n#show: simple-theme.with(...)\n\n// For metropolis theme\n#show: metropolis-theme.with(...)\n</code></pre>\n<p>and so on.</p>",
      "raw": "Just a comment, what I meant by `presentation-theme` was the name of the touying template.\n\nFor instance\n```typ\n// For simple theme\n#show: simple-theme.with(...)\n\n// For metropolis theme\n#show: metropolis-theme.with(...)\n```\nand so on.",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 18.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 125
    },
    {
      "id": 5150,
      "post_number": 9,
      "username": "Tobias_Andersson_Gid",
      "name": "Tobias Andersson Gidlund",
      "created_at": "2024-11-05T07:10:35.615Z",
      "updated_at": "2024-11-05T07:10:35.615Z",
      "cooked": "<p>Right, my bad! Adding the colour for the background still does not change the background, but I found out that by using Metropolis as the basis, I could change “neutral-lightest” which actually changed the background:</p>\n<pre><code class=\"lang-auto\">#show: metropolis-theme.with(\n  aspect-ratio: \"16-9\",\n  footer: self =&gt; self.info.institution,\n  config-info(\n    title: [Title],\n    subtitle: [Subtitle],\n    author: [Authors],\n    date: datetime.today(),\n    institution: [Institution],\n    logo: box(height: 25pt, image(\"logo.svg\")),\n  ),\n  config-colors(\n    primary: rgb(\"#5D4FB1\"),\n    secondary: rgb(\"#5D4FB1\"),\n    neutral-lightest: rgb(\"#FDECB2\"),\n  ),\n)\n</code></pre>\n<p>So, it seems to work and I have learned a lot from your help a of you – so thanks a lot!</p>",
      "raw": "Right, my bad! Adding the colour for the background still does not change the background, but I found out that by using Metropolis as the basis, I could change \"neutral-lightest\" which actually changed the background:\n\n\n```\n#show: metropolis-theme.with(\n  aspect-ratio: \"16-9\",\n  footer: self => self.info.institution,\n  config-info(\n    title: [Title],\n    subtitle: [Subtitle],\n    author: [Authors],\n    date: datetime.today(),\n    institution: [Institution],\n    logo: box(height: 25pt, image(\"logo.svg\")),\n  ),\n  config-colors(\n    primary: rgb(\"#5D4FB1\"),\n    secondary: rgb(\"#5D4FB1\"),\n    neutral-lightest: rgb(\"#FDECB2\"),\n  ),\n)\n```\nSo, it seems to work and I have learned a lot from your help a of you -- so thanks a lot!",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 42,
      "score": 63.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 706
    },
    {
      "id": 6565,
      "post_number": 10,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-12-12T21:57:41.596Z",
      "updated_at": "2024-12-12T21:57:41.596Z",
      "cooked": "<p>How to only change color of front page?</p>",
      "raw": "How to only change color of front page?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 12.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    },
    {
      "id": 9270,
      "post_number": 11,
      "username": "TTWLLL",
      "name": "TTWLLL",
      "created_at": "2025-03-01T16:08:12.380Z",
      "updated_at": "2025-03-01T16:08:34.960Z",
      "cooked": "<p>According to <a href=\"https://github.com/touying-typ/touying/blob/main/themes/metropolis.typ\" rel=\"noopener nofollow ugc\">touying Metropolis</a>, the neutral-lightest should be the background color.</p>",
      "raw": "According to [touying Metropolis](\nhttps://github.com/touying-typ/touying/blob/main/themes/metropolis.typ), the neutral-lightest should be the background color.",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 4.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1262
    },
    {
      "id": 12951,
      "post_number": 12,
      "username": "han190",
      "name": "Han Tang",
      "created_at": "2025-05-22T14:47:12.132Z",
      "updated_at": "2025-05-22T14:47:12.132Z",
      "cooked": "<p>It’s been a while so the issue is likely already resolved. But just in case your ChatGPT couldn’t help, I figured I’d still throw this out there!</p>\n<p>Based on <a href=\"https://github.com/touying-typ/touying/blob/main/themes/simple.typ\" rel=\"noopener nofollow ugc\">simple.typ</a> and <a href=\"https://github.com/touying-typ/touying/blob/d1963776f4d401cadd2b58193ef3a377cf4ac546/src/configs.typ#L565\" rel=\"noopener nofollow ugc\">config.typ</a> you will need to change the value of <code>fill</code> in <code>config-page</code>,</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show: simple-theme.with(\n  aspect-ratio: \"4-3\",\n  config-colors(primary: accent-color),\n  config-page(\n    paper: \"presentation-4-3\",\n    fill: rgb(\"ffffff\"),\n  ),\n)\n</code></pre>",
      "raw": "It’s been a while so the issue is likely already resolved. But just in case your ChatGPT couldn’t help, I figured I’d still throw this out there!\n\nBased on [simple.typ](https://github.com/touying-typ/touying/blob/main/themes/simple.typ) and [config.typ](https://github.com/touying-typ/touying/blob/d1963776f4d401cadd2b58193ef3a377cf4ac546/src/configs.typ#L565) you will need to change the value of `fill` in `config-page`,\n```typst\n#show: simple-theme.with(\n  aspect-ratio: \"4-3\",\n  config-colors(primary: accent-color),\n  config-page(\n    paper: \"presentation-4-3\",\n    fill: rgb(\"ffffff\"),\n  ),\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 12,
      "score": 7.4,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 406
    }
  ],
  "scraped_at": "2025-06-10T09:55:44.773157"
}
{
  "topic_metadata": {
    "id": 1438,
    "title": "How to reference a Figure with modified Padding?",
    "slug": "how-to-reference-a-figure-with-modified-padding",
    "posts_count": 5,
    "created_at": "2024-10-30T17:12:24.340Z",
    "last_posted_at": "2024-10-31T10:33:34.423Z",
    "views": 228,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 564
  },
  "posts": [
    {
      "id": 4862,
      "post_number": 1,
      "username": "sereksim",
      "name": "sereksim",
      "created_at": "2024-10-30T17:12:24.470Z",
      "updated_at": "2024-10-31T04:45:43.143Z",
      "cooked": "<p>To improve the layout of my document I want to increase the space between the last line of text and the beginning of an image or table. I tried adding padding to the figures, but I encountered some problems regarding the combination of the padding and referencing the figures:</p>\n<p>Consider this example:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#outline(\n  title: [Images],\n  target: figure.where(kind: image),\n),\n\n#lorem(50) @myfigure #lorem(50)\n\n#figure(\n  image(\"images/image.svg\", alt: \"this is an image\", width: 75%),\n  caption: [this is an image],\n)&lt;myfigure&gt;\n\n#lorem(50)\n</code></pre>\n<p>As far as i know, there are different options to add padding to this figure:</p>\n<ol>\n<li>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#pad(\n  y: 7.5pt,\n  figure(\n    image(\"images/image.svg\", alt: \"this is an image\", width: 75%),\n    caption: [this is an image],\n  ),\n) \n</code></pre>\n<p>Using this option, there is no way to add the reference <code>&lt;myfigure&gt;</code>. It is not possible to add a reference to a padding (Error: <code>cannot reference pad</code>) and it is not possible to add a reference to a figure inside of a padding (Error: <code>expected comma</code>)</p>\n</li>\n<li>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#figure(\n  pad(\n    image(\"images/Bussysteme.svg\", alt: \"this is an image\", width: 75%), \n    y: 7.5pt,\n  ),\n  caption: [this is an image],\n)&lt;myfigure&gt;,\n</code></pre>\n<p>Now the reference works, but the padding is only around the image, not around the whole figure, including the caption. The caption still is to close to the text and further away from the image.</p>\n</li>\n<li>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\"> #figure(\n   pad(\n     image(\"images/image.svg\", alt: \"this is an image\", width: 75%), \n     top: 3pt,\n   ),\n   caption: pad([this is an image],bottom:3pt),\n )&lt;myfigure&gt;,\n</code></pre>\n<p>The padding works and the reference works as well, but the padding of the caption is now included in the outline and destroys the layout there.</p>\n</li>\n</ol>\n<p>Is there a different way to combine padding with references?</p>",
      "raw": "To improve the layout of my document I want to increase the space between the last line of text and the beginning of an image or table. I tried adding padding to the figures, but I encountered some problems regarding the combination of the padding and referencing the figures:\n\nConsider this example:\n\n  ```typst\n#outline(\n    title: [Images],\n    target: figure.where(kind: image),\n),\n\n#lorem(50) @myfigure #lorem(50)\n\n#figure(\n    image(\"images/image.svg\", alt: \"this is an image\", width: 75%),\n    caption: [this is an image],\n)<myfigure>\n\n#lorem(50)\n```\n\nAs far as i know, there are different options to add padding to this figure:\n\n1. \n    ```typst \n    #pad(\n      y: 7.5pt,\n      figure(\n        image(\"images/image.svg\", alt: \"this is an image\", width: 75%),\n        caption: [this is an image],\n      ),\n    ) \n    ```\n   Using this option, there is no way to add the reference `<myfigure>`. It is not possible to add a reference to a padding (Error: `cannot reference pad`) and it is not possible to add a reference to a figure inside of a padding (Error: `expected comma`)\n2. \n    ```typst \n    #figure(\n      pad(\n        image(\"images/Bussysteme.svg\", alt: \"this is an image\", width: 75%), \n        y: 7.5pt,\n      ),\n      caption: [this is an image],\n    )<myfigure>,\n    ```\n    Now the reference works, but the padding is only around the image, not around the whole figure, including the caption. The caption still is to close to the text and further away from the image.\n\n3. \n   ```typst\n    #figure(\n      pad(\n        image(\"images/image.svg\", alt: \"this is an image\", width: 75%), \n        top: 3pt,\n      ),\n      caption: pad([this is an image],bottom:3pt),\n    )<myfigure>,\n   ```\n    The padding works and the reference works as well, but the padding of the caption is now included in the outline and destroys the layout there.\n\nIs there a different way to combine padding with references?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 646.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 707
    },
    {
      "id": 4865,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-30T18:55:28.104Z",
      "updated_at": "2024-10-30T18:55:28.104Z",
      "cooked": "<p>There is indeed a very simple way to adjust the spacing around the figures. As figures are block elements, you can make use of the <a href=\"https://typst.app/docs/reference/layout/block/#parameters-spacing\"><code>spacing</code>, <code>above</code> and <code>below</code> fields</a> of the <a href=\"https://typst.app/docs/reference/layout/block/\"><code>block</code></a> element. To do that, define a <a href=\"https://typst.app/docs/reference/styling/#show-rules:~:text=With%20show%2Dset,a%20fantasy%20encyclopedia.\">show-set rule</a> on figures:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure: set block(spacing: 1.2em + 3pt)\n</code></pre>\n<p>The default value of the spacing is <code>1.2em</code>, so to increase it by <code>3pt</code>, you can just add them together. You can of course also set it to any other value, so just play around with it!</p>\n<p>Alternatively, you can also use the first approach you mentioned (though I would prefer the above). The label can then still be attached if you put the figure in <a href=\"https://typst.app/docs/reference/syntax/\">markup mode</a>, as the syntax with <code>&lt;...&gt;</code> only works there:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#pad(y: 7.5pt)[\n  #figure(\n    image(...)\n    caption: [this is an image]\n  ) &lt;myfigure&gt;\n]\n</code></pre>",
      "raw": "There is indeed a very simple way to adjust the spacing around the figures. As figures are block elements, you can make use of the [`spacing`, `above` and `below` fields](https://typst.app/docs/reference/layout/block/#parameters-spacing) of the [`block`](https://typst.app/docs/reference/layout/block/) element. To do that, define a [show-set rule](https://typst.app/docs/reference/styling/#show-rules:~:text=With%20show%2Dset,a%20fantasy%20encyclopedia.) on figures:\n```typ\n#show figure: set block(spacing: 1.2em + 3pt)\n```\nThe default value of the spacing is `1.2em`, so to increase it by `3pt`, you can just add them together. You can of course also set it to any other value, so just play around with it!\n\nAlternatively, you can also use the first approach you mentioned (though I would prefer the above). The label can then still be attached if you put the figure in [markup mode](https://typst.app/docs/reference/syntax/), as the syntax with `<...>` only works there:\n```typ\n#pad(y: 7.5pt)[\n  #figure(\n    image(...)\n    caption: [this is an image]\n  ) <myfigure>\n]\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 535.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 4878,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-31T04:45:52.899Z",
      "updated_at": "2024-10-31T04:45:52.899Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/sereksim\">@sereksim</a>, welcome to the forum! I’ve updated your post title to better fit our guidelines for question posts: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your post title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @sereksim, welcome to the forum! I've updated your post title to better fit our guidelines for question posts: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your post title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 44.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 4881,
      "post_number": 4,
      "username": "sereksim",
      "name": "sereksim",
      "created_at": "2024-10-31T07:45:21.188Z",
      "updated_at": "2024-10-31T07:45:21.188Z",
      "cooked": "<p>Thanks for your answer! The show-set-rule would apply to all figures, while the approach with padding is linked to one specific figure, right?</p>",
      "raw": "Thanks for your answer! The show-set-rule would apply to all figures, while the approach with padding is linked to one specific figure, right?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 707
    },
    {
      "id": 4895,
      "post_number": 5,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-31T10:33:34.423Z",
      "updated_at": "2024-10-31T10:33:34.423Z",
      "cooked": "<p>Correct! However, you can also scope show rules to single figures:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#[\n  #show figure: set block(spacing: ...)\n  #figure(...) &lt;myfigure&gt;\n]\n</code></pre>",
      "raw": "Correct! However, you can also scope show rules to single figures:\n```typ\n#[\n  #show figure: set block(spacing: ...)\n  #figure(...) <myfigure>\n]\n```",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:55:44.062645"
}
{
  "topic_metadata": {
    "id": 1440,
    "title": "How to properly plot elliptic curves using CeTZ?",
    "slug": "how-to-properly-plot-elliptic-curves-using-cetz",
    "posts_count": 4,
    "created_at": "2024-10-30T18:27:04.996Z",
    "last_posted_at": "2024-10-31T04:46:27.787Z",
    "views": 468,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "jbirnick",
    "tags": [
      "graphics"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 404
  },
  "posts": [
    {
      "id": 4864,
      "post_number": 1,
      "username": "aarnent",
      "name": "",
      "created_at": "2024-10-30T18:27:05.115Z",
      "updated_at": "2024-10-31T04:46:19.106Z",
      "cooked": "<p>Hi, I am trying to plot some elliptic curves with CeTZ, here is my code so far:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.1\"\n#import \"@preview/cetz-plot:0.1.0\": plot, chart\n\n#let EC_func(x) = {\n  let y = x*x*x - 4*x + 6\n  if y &lt; 0 {\n    return 0\n  }\n  return calc.sqrt(y)\n}\n\n\n#let EC_drawing = cetz.canvas({\n  plot.plot(\n  size: (10, 10), \n  x-tick-step: 5, \n  y-tick-step: 20, \n  x-min: -5, \n  max: 10, \n  x-grid: true,\n  y-grid: true,\n  \n  {\n    plot.add(domain: (-5, 10), EC_func)\n    plot.add(domain: (-5, 10), t =&gt; (t, -EC_func(t)))\n  })\n})\n\n\n#EC_drawing\n\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/d/d2c03e671714a5ea3b586146e4bbd6422dbc69e4.png\" alt=\"Screenshot 2024-10-30 200922\" data-base62-sha1=\"u4o9fl190M70yV1Xt6eJfacXQK8\" width=\"147\" height=\"136\"></p>\n<p>Obviously, it’s not perfect. There are 2 things I haven’t figured out how to do:</p>\n<ul>\n<li>when I plot the function, there are some x-values not in the domain (which now get set to 0, see the “beak” on the left). Is there a way to ignore these points? In the example above, these would be points &lt;= 2.5 so I could just set <code>domain: (-2.5, 10)</code>, but this way gets annoying quick if I want to plot multiple curves, doubly so if they are disconnected in the middle</li>\n<li>Less importantly, is there an easy way to plot both the positive and negative side? Of course I can do it like I did and manually set the color for both, but if there’s an easier way that’d be great</li>\n</ul>\n<p>Thanks!</p>",
      "raw": "Hi, I am trying to plot some elliptic curves with CeTZ, here is my code so far:\n\n```typ\n#import \"@preview/cetz:0.3.1\"\n#import \"@preview/cetz-plot:0.1.0\": plot, chart\n\n#let EC_func(x) = {\n  let y = x*x*x - 4*x + 6\n  if y < 0 {\n    return 0\n  }\n  return calc.sqrt(y)\n}\n\n\n#let EC_drawing = cetz.canvas({\n  plot.plot(\n  size: (10, 10), \n  x-tick-step: 5, \n  y-tick-step: 20, \n  x-min: -5, \n  max: 10, \n  x-grid: true,\n  y-grid: true,\n  \n  {\n    plot.add(domain: (-5, 10), EC_func)\n    plot.add(domain: (-5, 10), t => (t, -EC_func(t)))\n  })\n})\n\n\n#EC_drawing\n\n```\n![Screenshot 2024-10-30 200922|295x273, 50%](upload://u4o9fl190M70yV1Xt6eJfacXQK8.png)\n\nObviously, it's not perfect. There are 2 things I haven't figured out how to do:\n- when I plot the function, there are some x-values not in the domain (which now get set to 0, see the \"beak\" on the left). Is there a way to ignore these points? In the example above, these would be points <= 2.5 so I could just set `domain: (-2.5, 10)`, but this way gets annoying quick if I want to plot multiple curves, doubly so if they are disconnected in the middle\n- Less importantly, is there an easy way to plot both the positive and negative side? Of course I can do it like I did and manually set the color for both, but if there's an easier way that'd be great\n\n\nThanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 58,
      "score": 2026.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 4867,
      "post_number": 2,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-10-30T19:43:49.474Z",
      "updated_at": "2024-10-30T19:50:24.381Z",
      "cooked": "<p>This is maybe not you’re asking for or what you want to hear… but using <code>cetz</code> is simply not the “correct” way (for now) to plot elliptic curves. It inherently doesn’t support implicit plots (where you give it an equation and it draws all solutions), but only graphs of functions.</p>\n<p>I think you should use a library which is precisely built for all sorts of scientific plotting, like e.g. matplotlib together with other libraries, and then use the exported image in Typst.</p>\n<p>In your case, sympy supports implicit plotting: <a href=\"https://docs.sympy.org/latest/modules/plotting.html#sympy.plotting.plot_implicit.plot_implicit\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Plotting - SymPy 1.13.3 documentation</a></p>",
      "raw": "This is maybe not you're asking for or what you want to hear.. but using `cetz` is simply not the \"correct\" way (for now) to plot elliptic curves. It inherently doesn't support implicit plots (where you give it an equation and it draws all solutions), but only graphs of functions.\n\nI think you should use a library which is precisely built for all sorts of scientific plotting, like e.g. matplotlib together with other libraries, and then use the exported image in Typst.\n\nIn your case, sympy supports implicit plotting: https://docs.sympy.org/latest/modules/plotting.html#sympy.plotting.plot_implicit.plot_implicit",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 119.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 4868,
      "post_number": 3,
      "username": "aarnent",
      "name": "",
      "created_at": "2024-10-30T20:15:18.442Z",
      "updated_at": "2024-10-30T20:15:18.442Z",
      "cooked": "<p>okay, thanks. I’ll look into matplotlib <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "okay, thanks. I'll look into matplotlib :slight_smile:",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 4879,
      "post_number": 5,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-31T04:46:27.787Z",
      "updated_at": "2024-10-31T04:46:27.787Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/aarnent\">@aarnent</a>, welcome to the forum! I’ve updated your post title to better fit our guidelines for question posts: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your post title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @aarnent, welcome to the forum! I've updated your post title to better fit our guidelines for question posts: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your post title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:55:43.363191"
}
{
  "topic_metadata": {
    "id": 1448,
    "title": "How to get final state of a `state` type in typst v0.12?",
    "slug": "how-to-get-final-state-of-a-state-type-in-typst-v0-12",
    "posts_count": 6,
    "created_at": "2024-10-31T09:23:28.932Z",
    "last_posted_at": "2024-10-31T11:40:22.573Z",
    "views": 103,
    "like_count": 3,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Myriad-Dreamin",
    "tags": [
      "scripting",
      "state"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 201
  },
  "posts": [
    {
      "id": 4890,
      "post_number": 1,
      "username": "abcvav",
      "name": "abcvav",
      "created_at": "2024-10-31T09:23:29.138Z",
      "updated_at": "2024-10-31T09:54:51.426Z",
      "cooked": "<p>In typst official documentation of <code>state</code> <a href=\"https://typst.app/docs/reference/introspection/state/#definitions-final\">here</a> for the <code>.final()</code> method, it says: “This argument is deprecated. It only exists for compatibility with Typst 0.10 and lower and shouldn’t be used anymore.”</p>\n<p>So how can I visit the final state if I don’t use <code>state.final()</code> method?</p>",
      "raw": "In typst official documentation of `state` [here](https://typst.app/docs/reference/introspection/state/#definitions-final) for the `.final()` method, it says: \"This argument is deprecated. It only exists for compatibility with Typst 0.10 and lower and shouldn't be used anymore.\" \n\nSo how can I visit the final state if I don't use `state.final()` method?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 371.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 714
    },
    {
      "id": 4891,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-31T09:36:47.781Z",
      "updated_at": "2024-10-31T09:36:47.781Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/abcvav\">@abcvav</a>, the argument is deprecated. The function itself still exists.</p>",
      "raw": "Hello @abcvav, the argument is deprecated. The function itself still exists.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 26.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 4893,
      "post_number": 3,
      "username": "abcvav",
      "name": "abcvav",
      "created_at": "2024-10-31T09:50:32.716Z",
      "updated_at": "2024-10-31T09:50:32.716Z",
      "cooked": "<p>Get it now, I misunderstood the document <img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\">. Thank you very much for your reply!</p>",
      "raw": "Get it now, I misunderstood the document 😄. Thank you very much for your reply!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 11.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 714
    },
    {
      "id": 4894,
      "post_number": 4,
      "username": "Myriad-Dreamin",
      "name": "Myriad-Dreamin",
      "created_at": "2024-10-31T09:55:54.555Z",
      "updated_at": "2024-10-31T09:55:54.555Z",
      "cooked": "<p>In new typst, the correct way to perform contextual queries is using <code>context</code>, such as <code>context state.final()</code>. This is equivalent to <code>context state.final(here())</code>, replacing <code>locate(loc =&gt; state.final(loc))</code>.</p>\n<p>Each <code>context</code> expression has a unique <code>here()</code> location in the document and the location will be passed to contextual query functions implicitly, so you don’t have to pass them as arguments explicitly.</p>",
      "raw": "In new typst, the correct way to perform contextual queries is using `context`, such as `context state.final()`. This is equivalent to `context state.final(here())`, replacing `locate(loc => state.final(loc))`.\n\nEach `context` expression has a unique `here()` location in the document and the location will be passed to contextual query functions implicitly, so you don't have to pass them as arguments explicitly.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 31.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 20
    },
    {
      "id": 4897,
      "post_number": 6,
      "username": "abcvav",
      "name": "abcvav",
      "created_at": "2024-10-31T10:38:47.418Z",
      "updated_at": "2024-10-31T10:38:47.418Z",
      "cooked": "<p>Get it, thank you for your help! <img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Get it, thank you for your help! 😄",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 714
    },
    {
      "id": 4901,
      "post_number": 7,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-31T11:40:22.573Z",
      "updated_at": "2024-10-31T11:40:22.573Z",
      "cooked": "<p>To add to that: In the case of final(), it didn’t even make use of the location (in contrast to get) since it is not dependent on where it is called. It just needed to ensure that it’s only usable within a locate.</p>",
      "raw": "To add to that: In the case of final(), it didn't even make use of the location (in contrast to get) since it is not dependent on where it is called. It just needed to ensure that it's only usable within a locate.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 5.8,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    }
  ],
  "scraped_at": "2025-06-10T09:55:42.642915"
}
{
  "topic_metadata": {
    "id": 145,
    "title": "How can I draw geometric constructions, sets, etc.?",
    "slug": "how-can-i-draw-geometric-constructions-sets-etc",
    "posts_count": 7,
    "created_at": "2024-09-15T03:44:58.894Z",
    "last_posted_at": "2024-09-15T16:43:15.217Z",
    "views": 861,
    "like_count": 17,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Enivex",
    "tags": [
      "graphics"
    ],
    "category_id": 5,
    "participant_count": 6,
    "word_count": 517
  },
  "posts": [
    {
      "id": 627,
      "post_number": 1,
      "username": "samirchmandal",
      "name": "Samir Ch Mandal",
      "created_at": "2024-09-15T03:44:58.989Z",
      "updated_at": "2024-09-15T09:25:41.401Z",
      "cooked": "<p>The only thing that is not letting me leave Latex is its tikz feature. I want a complete repalcement of Tikz in Typst. So my question is how can I draw geometric constructions, sets, venn diagrams, curve, parametric curves, graphs, mind map etc in typst. My my friend who works in Physics, he was asking is it possible to draw pulley, spring, mass, electric circuits, resistance, capacitor etc.</p>",
      "raw": "The only thing that is not letting me leave Latex is its tikz feature. I want a complete repalcement of Tikz in Typst. So my question is how can I draw geometric constructions, sets, venn diagrams, curve, parametric curves, graphs, mind map etc in typst. My my friend who works in Physics, he was asking is it possible to draw pulley, spring, mass, electric circuits, resistance, capacitor etc.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 101,
      "score": 2955.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 116
    },
    {
      "id": 630,
      "post_number": 2,
      "username": "Enivex",
      "name": "Enivex",
      "created_at": "2024-09-15T04:28:02.672Z",
      "updated_at": "2024-09-15T04:28:50.901Z",
      "cooked": "<p><a href=\"https://typst.app/universe/package/cetz\">cetz</a> and libraries plus <a href=\"https://typst.app/universe/package/fletcher\">fletcher</a></p>\n<p>should cover many of these. Obviously they’re not as mature as tikz, due to how new typst is.</p>\n<p>As for circuits, I don’t think there is a non-manual way right now. There’s a WIP unpublished package called cirCeTZ, but I’m not sure if it’s in a usable state</p>",
      "raw": "[cetz](https://typst.app/universe/package/cetz) and libraries plus [fletcher](https://typst.app/universe/package/fletcher)\n\nshould cover many of these. Obviously they're not as mature as tikz, due to how new typst is.\n\nAs for circuits, I don't think there is a non-manual way right now. There's a WIP unpublished package called cirCeTZ, but I'm not sure if it's in a usable state",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 5,
      "reads": 101,
      "score": 250.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 5
    },
    {
      "id": 638,
      "post_number": 3,
      "username": "afiaith",
      "name": "Maja Abramski-Kronenberg",
      "created_at": "2024-09-15T07:07:18.208Z",
      "updated_at": "2024-09-15T07:17:15.701Z",
      "cooked": "<p>In addition to what <a class=\"mention\" href=\"/u/enivex\">@Enivex</a> said, these two packages might be of use for your friend: <a href=\"https://typst.app/universe/package/physica\">physica</a> and <a href=\"https://typst.app/universe/package/quill\">Quill</a>. Generally <a href=\"https://typst.app/universe/\">Typst Universe</a> is <em>the</em> place to look for packages.</p>\n<p><a href=\"https://typst.app/universe/package/mitex\">MiTeX</a> lets you process LaTeX in Typst, but it doesn’t support something as complex as TikZ. If this is crucial for you, maybe there is a way to automate compiling LaTeX fragments with LaTeX and then inserting the result as an SVG file with <code>#image()</code>. If this is possible it can be a workaround until CeTZ or other packages will be able to match TikZ. Anyway, this can be done manually; use the <code>standalone</code> document type in your LaTeX template so you don’t have a margin around the drawing.</p>",
      "raw": "In addition to what @Enivex said, these two packages might be of use for your friend: [physica](https://typst.app/universe/package/physica) and [Quill](https://typst.app/universe/package/quill). Generally [Typst Universe](https://typst.app/universe/) is *the* place to look for packages.\n\n[MiTeX](https://typst.app/universe/package/mitex) lets you process LaTeX in Typst, but it doesn’t support something as complex as TikZ. If this is crucial for you, maybe there is a way to automate compiling LaTeX fragments with LaTeX and then inserting the result as an SVG file with `#image()`. If this is possible it can be a workaround until CeTZ or other packages will be able to match TikZ. Anyway, this can be done manually; use the `standalone` document type in your LaTeX template so you don’t have a margin around the drawing.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 94,
      "score": 118.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 91
    },
    {
      "id": 652,
      "post_number": 4,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-09-15T09:18:30.922Z",
      "updated_at": "2024-09-15T09:18:30.922Z",
      "cooked": "<p>For drawing circuit diagrams, there are currently no available packages. There is a package called <a href=\"https://github.com/fenjalien/cirCeTZ\" rel=\"noopener nofollow ugc\">circetz</a> that claims to be a work in progress, but it hasn’t been updated for the past 5 months.</p>",
      "raw": "For drawing circuit diagrams, there are currently no available packages. There is a package called [circetz](https://github.com/fenjalien/cirCeTZ) that claims to be a work in progress, but it hasn't been updated for the past 5 months.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 83,
      "score": 41.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 656,
      "post_number": 5,
      "username": "reknih",
      "name": "Martin Haug",
      "created_at": "2024-09-15T09:57:46.862Z",
      "updated_at": "2024-09-15T09:57:46.862Z",
      "cooked": "<p>As a moderation note:</p>\n<p>I have changed the title from \" Drawing in Typst\" to \" How can I draw geometric constructions, sets, etc.?\".</p>\n<p>The <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a> recommend this:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>You already put this question in the body of your original post, it’s a good title that will make it easier for people to find this question in the future.</p>\n<p>Also remember to mark the answer that helped you resolve your problem as a Solution using the <img src=\"https://forum.typst.app/images/emoji/apple/ballot_box_with_check.png?v=12\" title=\":ballot_box_with_check:\" class=\"emoji\" alt=\":ballot_box_with_check:\" loading=\"lazy\" width=\"20\" height=\"20\"> icon. Don’t feel pressed to do though if there hasn’t been a good solution so far!</p>",
      "raw": "As a moderation note:\n\nI have changed the title from \" Drawing in Typst\" to \" How can I draw geometric constructions, sets, etc.?\".\n\nThe [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11) recommend this:\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nYou already put this question in the body of your original post, it's a good title that will make it easier for people to find this question in the future.\n\nAlso remember to mark the answer that helped you resolve your problem as a Solution using the ☑️ icon. Don't feel pressed to do though if there hasn't been a good solution so far!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 80,
      "score": 226.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1
    },
    {
      "id": 876,
      "post_number": 6,
      "username": "Yan",
      "name": "Yan",
      "created_at": "2024-09-15T13:50:12.976Z",
      "updated_at": "2024-09-15T13:50:12.976Z",
      "cooked": "<p>May I suggest <a href=\"https://asymptote.sourceforge.io/\" rel=\"noopener nofollow ugc\">Asymptote</a> instead? I personally always preferred it to TikZ. It would be cool to be able to type the Asymptote code directly in the Typst document.</p>",
      "raw": "May I suggest [Asymptote](https://asymptote.sourceforge.io/) instead? I personally always preferred it to TikZ. It would be cool to be able to type the Asymptote code directly in the Typst document.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 73,
      "score": 74.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 147
    },
    {
      "id": 985,
      "post_number": 7,
      "username": "Enivex",
      "name": "Enivex",
      "created_at": "2024-09-15T16:43:15.217Z",
      "updated_at": "2024-09-15T16:43:15.217Z",
      "cooked": "<p>The drawback of Asymptote is that unlike Tikz or Cetz, its styling does not match the document without manual labor. It’s also another language to learn.</p>\n<p>It should at least theoretically be possible to compile Asymptote to wasm and make a typst plugin, though.</p>",
      "raw": "The drawback of Asymptote is that unlike Tikz or Cetz, its styling does not match the document without manual labor. It's also another language to learn.\n\nIt should at least theoretically be possible to compile Asymptote to wasm and make a typst plugin, though.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 67,
      "score": 58.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 5
    }
  ],
  "scraped_at": "2025-06-10T09:59:00.205917"
}
{
  "topic_metadata": {
    "id": 1450,
    "title": "Are there any ways to get heading's numbering results in `show` setting function?",
    "slug": "are-there-any-ways-to-get-headings-numbering-results-in-show-setting-function",
    "posts_count": 5,
    "created_at": "2024-10-31T10:45:42.755Z",
    "last_posted_at": "2024-11-01T01:47:34.045Z",
    "views": 162,
    "like_count": 2,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 200
  },
  "posts": [
    {
      "id": 4898,
      "post_number": 1,
      "username": "abcvav",
      "name": "abcvav",
      "created_at": "2024-10-31T10:45:42.881Z",
      "updated_at": "2024-10-31T12:00:53.968Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let heading-setting(it) = context {\n  // Can I get numbering results here? Not the numbering function.\n  // For example, if the numbering value of current heading is \"1.1\" here, \n  // can I get the value somehow?\n  let numbering-results = ??\n  do-something-else(numbering-results)\n  it\n}\n\n#show heading: heading-setting\n</code></pre>",
      "raw": "\n```typ\n#let heading-setting(it) = context {\n  // Can I get numbering results here? Not the numbering function.\n  // For example, if the numbering value of current heading is \"1.1\" here, \n  // can I get the value somehow?\n  let numbering-results = ??\n  do-something-else(numbering-results)\n  it\n}\n\n#show heading: heading-setting\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 506.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 714
    },
    {
      "id": 4904,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-31T13:00:11.764Z",
      "updated_at": "2024-10-31T13:00:11.764Z",
      "cooked": "<p>hello,<br>\nyou can take a look at <a href=\"https://typst.app/docs/reference/introspection/counter/\" class=\"inline-onebox\">Counter Type – Typst Documentation</a>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context counter(heading).display()\n</code></pre>",
      "raw": "hello,\nyou can take a look at https://typst.app/docs/reference/introspection/counter/. \n```typ\n#context counter(heading).display()\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 41.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 4906,
      "post_number": 3,
      "username": "abcvav",
      "name": "abcvav",
      "created_at": "2024-10-31T13:19:09.129Z",
      "updated_at": "2024-10-31T13:19:09.129Z",
      "cooked": "<p>I fogot this method before, thank you so much!!<img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "I fogot this method before, thank you so much!!😄",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 10.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 714
    },
    {
      "id": 4915,
      "post_number": 4,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-10-31T19:31:43.775Z",
      "updated_at": "2024-10-31T19:31:43.775Z",
      "cooked": "<p>But please get rid of all the <code>context</code>s:</p>\n<ol>\n<li>\n<p>When you define a function (like <code>heading-setting</code>), never put a context in front. Instead, the user of the function should provide the context to the function, i.e. should call it like <code>#context heading-setting(...)</code><br>\nAlso note that for <code>show</code> rules you don’t need even need to provide context, because they bring it automatically. So <code>show heading: heading-setting</code> is still fine even if you remove the <code>context</code> in the definition of <code>heading-setting</code>.</p>\n</li>\n<li>\n<p>Since you already have context within <code>heading-setting</code>, you also don’t need the <code>context</code> when you call <code>counter(heading).display()</code>.</p>\n</li>\n</ol>",
      "raw": "But please get rid of all the `context`s:\n\n1. When you define a function (like `heading-setting`), never put a context in front. Instead, the user of the function should provide the context to the function, i.e. should call it like `#context heading-setting(...)`\n  Also note that for `show` rules you don't need even need to provide context, because they bring it automatically. So `show heading: heading-setting` is still fine even if you remove the `context` in the definition of `heading-setting`.\n\n2. Since you already have context within `heading-setting`, you also don't need the `context` when you call `counter(heading).display()`.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 28,
      "score": 30.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 4941,
      "post_number": 5,
      "username": "abcvav",
      "name": "abcvav",
      "created_at": "2024-11-01T01:47:34.045Z",
      "updated_at": "2024-11-01T01:47:34.045Z",
      "cooked": "<p>I didn’t know this before, but I learned it now. Thank you for your reminder <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "I didn't know this before, but I learned it now. Thank you for your reminder 😃",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 4.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 714
    }
  ],
  "scraped_at": "2025-06-10T09:55:41.932424"
}
{
  "topic_metadata": {
    "id": 1452,
    "title": "How to cite githhub repo?",
    "slug": "how-to-cite-githhub-repo",
    "posts_count": 3,
    "created_at": "2024-10-31T11:07:20.504Z",
    "last_posted_at": "2024-11-01T03:50:53.043Z",
    "views": 171,
    "like_count": 4,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "citation"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 186
  },
  "posts": [
    {
      "id": 4900,
      "post_number": 1,
      "username": "lets_see",
      "name": "lets see",
      "created_at": "2024-10-31T11:07:20.641Z",
      "updated_at": "2025-02-05T15:07:09.612Z",
      "cooked": "<p>Hi, I am trying to cite a github repo with something like this:</p>\n<pre><code class=\"lang-auto\">@misc{github_magma,\n  author = {Hanrahan, Pat},\n  title = {Github - phanrahan/magma: magma circuits},\n  year = {2024},\n  publisher = {GitHub},\n  journal = {GitHub repository},\n  howpublished = {\\url{https://github.com/phanrahan/magma}},\n  commit = {0bad4ee},\n  note = {[Accessed 31-10-2024]},\n}\n</code></pre>\n<p>I am using a default IEEE style.<br>\nIt produces the following reference without the github link and note.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/c/cbf00bcc3c16951e7de2ada133efcb4618f13d4c.png\" data-download-href=\"https://forum.typst.app/uploads/default/cbf00bcc3c16951e7de2ada133efcb4618f13d4c\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/c/cbf00bcc3c16951e7de2ada133efcb4618f13d4c_2_690x48.png\" alt=\"image\" data-base62-sha1=\"t67dOHmaHwjIKhpG3Mmot3wrVGQ\" width=\"690\" height=\"48\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/c/cbf00bcc3c16951e7de2ada133efcb4618f13d4c_2_690x48.png, https://forum.typst.app/uploads/default/original/2X/c/cbf00bcc3c16951e7de2ada133efcb4618f13d4c.png 1.5x, https://forum.typst.app/uploads/default/original/2X/c/cbf00bcc3c16951e7de2ada133efcb4618f13d4c.png 2x\" data-dominant-color=\"ECECEC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">920×64 15.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Does anyone know how I could cite the repo with github URL and accessed date note?</p>\n<p>Thanks in advance <img src=\"https://forum.typst.app/images/emoji/apple/pray.png?v=12\" title=\":pray:\" class=\"emoji\" alt=\":pray:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hi, I am trying to cite a github repo with something like this:\n\n```\n@misc{github_magma,\n  author = {Hanrahan, Pat},\n  title = {Github - phanrahan/magma: magma circuits},\n  year = {2024},\n  publisher = {GitHub},\n  journal = {GitHub repository},\n  howpublished = {\\url{https://github.com/phanrahan/magma}},\n  commit = {0bad4ee},\n  note = {[Accessed 31-10-2024]},\n}\n```\n\nI am using a default IEEE style. \nIt produces the following reference without the github link and note.\n\n\n![image|690x48](upload://t67dOHmaHwjIKhpG3Mmot3wrVGQ.png)\n\nDoes anyone know how I could cite the repo with github URL and accessed date note?\n\nThanks in advance :pray:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 621.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 716
    },
    {
      "id": 4903,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2024-10-31T12:41:26.170Z",
      "updated_at": "2024-10-31T12:41:26.170Z",
      "cooked": "<p>Hi,</p>\n<p><a class=\"mention\" href=\"/u/eric\">@Eric</a> already provided all information in an answer to another question here:</p><aside class=\"quote quote-modified\" data-post=\"3\" data-topic=\"769\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/eric/48/87_2.png\" class=\"avatar\">\n    <a href=\"https://forum.typst.app/t/how-to-include-notes-in-the-bibliography/769/3\">How to include notes in the bibliography?</a> <a class=\"badge-category__wrapper \" href=\"/c/questions/5\"><span data-category-id=\"5\" style=\"--category-badge-color: #F7C000; --category-badge-text-color: #fdfdfd;\" data-drop-close=\"true\" class=\"badge-category \" title=\"Your questions about using Typst and the web app go in this category.\"><span class=\"badge-category__name\">Questions</span></span></a>\n  </div>\n  <blockquote>\n    I want to mention that in some of your example cases, you don’t necessarily need the note field at all, as other more specific fields exist: \n\n\nVolume and DOI keys: \nnote = \"Bd. 42, DOI: 10.1007/s11623-018-0971-8\"\n-&gt; volume = \"42\", doi = \"10.1007/s11623-018-0971-8\"\n\n\n\nISBN key (unfortunately not used in the default IEEE citation style) \nnote = \"ISBN: 978-1-60807-930-8\"\n-&gt; isbn = \"978-1-60807-930-8\"\n\n\n\nURL and access date keys: \nnote = {[Online]. Verfügbar: \\url{...}. Zugriff: 15.08.2024}\n-&gt; url …\n  </blockquote>\n</aside>\n\n<p>You have to use the keys <code>url</code> and <code>urldate</code>. In addition Typst uses CSL files in the background and the IEEE style doesn’t support the key <code>note</code>.</p>\n<pre><code class=\"lang-auto\">url = \"https://github.com/phanrahan/magma\", \nurldate = \"2024-10-31\"\n</code></pre>",
      "raw": "Hi,\n\n@Eric already provided all information in an answer to another question here:\nhttps://forum.typst.app/t/how-to-include-notes-in-the-bibliography/769/3?u=flokl\n\nYou have to use the keys `url` and `urldate`. In addition Typst uses CSL files in the background and the IEEE style doesn't support the key `note`.\n\n```\nurl = \"https://github.com/phanrahan/magma\", \nurldate = \"2024-10-31\"\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 33,
      "score": 61.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 4943,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-01T03:50:53.043Z",
      "updated_at": "2024-11-01T03:50:53.043Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/lets_see\">@lets_see</a> , welcome to the forum! I’ve moved your question to the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category. Make sure to mark <a class=\"mention\" href=\"/u/flokl\">@flokl</a>’s answer as the solution if it helped solve your problem!</p>",
      "raw": "Hey @lets_see , welcome to the forum! I've moved your question to the #questions category. Make sure to mark @flokl's answer as the solution if it helped solve your problem!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 19.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:55:41.212701"
}
{
  "topic_metadata": {
    "id": 1459,
    "title": "How to get the position of an item placed by a show rule in Typst 0.12?",
    "slug": "how-to-get-the-position-of-an-item-placed-by-a-show-rule-in-typst-0-12",
    "posts_count": 6,
    "created_at": "2024-10-31T16:03:52.652Z",
    "last_posted_at": "2024-11-01T19:00:53.894Z",
    "views": 259,
    "like_count": 2,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "placement",
      "v0-12"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 539
  },
  "posts": [
    {
      "id": 4913,
      "post_number": 1,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-31T16:03:52.774Z",
      "updated_at": "2024-11-01T15:38:05.372Z",
      "cooked": "<p>Let’s say I <code>place</code> a title using a show rule. In Typst 0.11 I could get its position with a query, but in 0.12 I get the position of the <code>place</code> call:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(margin: 20pt, paper: \"a6\", flipped: true)\n#set block(spacing: 0pt)\n\n#show heading: it =&gt; place(\n  top,\n  float: true,\n  clearance: 0pt,\n  block(width: 100%, height: 40pt, fill: luma(90%), it),\n)\n  \n#block(width: 100%, height: 100pt, fill: eastern)\n\n= Title\n\n#context locate(heading).position()\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/c/c376cb9ce29a52e6de69cd69bacb24213e2df730.png\" alt=\"image\" data-base62-sha1=\"rT9CJ4nJpO1gY6RT4r7nTfgLRD2\" width=\"336\" height=\"235\"></p>\n<p>In Typst 0.11 this would show <code>y: 20pt</code> which is indeed the vertical position of the title. How can I get it in Typst 0.12?</p>",
      "raw": "Let's say I `place` a title using a show rule. In Typst 0.11 I could get its position with a query, but in 0.12 I get the position of the `place` call:\n\n```typ\n#set page(margin: 20pt, paper: \"a6\", flipped: true)\n#set block(spacing: 0pt)\n\n#show heading: it => place(\n  top,\n  float: true,\n  clearance: 0pt,\n  block(width: 100%, height: 40pt, fill: luma(90%), it),\n)\n  \n#block(width: 100%, height: 100pt, fill: eastern)\n\n= Title\n\n#context locate(heading).position()\n```\n\n![image|448x314, 75%](upload://rT9CJ4nJpO1gY6RT4r7nTfgLRD2.png)\n\nIn Typst 0.11 this would show `y: 20pt` which is indeed the vertical position of the title. How can I get it in Typst 0.12?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 998.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 4914,
      "post_number": 2,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-10-31T19:22:14.015Z",
      "updated_at": "2024-10-31T19:25:33.154Z",
      "cooked": "<p>First, note that <code>locate</code> deprecated. Instead use:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context query(heading).first().location().position()\n</code></pre>\n<p>Now as you noticed, it shows you the position where the heading is placed before applying the show rule, and not the position of the <code>place</code>.</p>\n<p>I don’t know if that’s a bug or intended, maybe <a class=\"mention\" href=\"/u/pgbiel\">@PgBiel</a> can tell.</p>\n<p>But also, what are you trying to achieve? I’m pretty sure <code>show heading: it =&gt; place(...)</code> is not a good pattern. If you tell us what you want to do (title page?) maybe we can give you a better way to implement it.</p>",
      "raw": "First, note that `locate` deprecated. Instead use:\n```typ\n#context query(heading).first().location().position()\n```\n\nNow as you noticed, it shows you the position where the heading is placed before applying the show rule, and not the position of the `place`.\n\nI don't know if that's a bug or intended, maybe @PgBiel can tell.\n\nBut also, what are you trying to achieve? I'm pretty sure `show heading: it => place(...)` is not a good pattern. If you tell us what you want to do (title page?) maybe we can give you a better way to implement it.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 17.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 4942,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-01T02:48:39.661Z",
      "updated_at": "2024-11-01T02:48:39.661Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"jbirnick\" data-post=\"2\" data-topic=\"1459\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/jbirnick/48/193_2.png\" class=\"avatar\"> jbirnick:</div>\n<blockquote>\n<p>First, note that <code>locate</code> deprecated. Instead use:</p>\n</blockquote>\n</aside>\n<p>Actually, <code>locate(loc =&gt; ...)</code> (using locate as a means of obtaining the <em>current</em> location) is deprecated. Using <code>locate(selector)</code> to obtain the location of <em>something else</em> was added in Typst 0.11 together with <code>context</code> and is not deprecated, being encouraged if that is the purpose of the usage. <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<aside class=\"quote no-group\" data-username=\"jbirnick\" data-post=\"2\" data-topic=\"1459\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/jbirnick/48/193_2.png\" class=\"avatar\"> jbirnick:</div>\n<blockquote>\n<p>Now as you noticed, it shows you the position where the heading is placed before applying the show rule, and not the position of the <code>place</code>.</p>\n<p>I don’t know if that’s a bug or intended, maybe <a class=\"mention\" href=\"/u/pgbiel\">@PgBiel</a> can tell.</p>\n</blockquote>\n</aside>\n<p>I’m not sure, but either way it seems ambiguous. I’d recommend not using a show rule for this and using a query which unambiguously matches something inside <code>place</code>, e.g. by adding a label.</p>",
      "raw": "[quote=\"jbirnick, post:2, topic:1459\"]\nFirst, note that `locate` deprecated. Instead use:\n[/quote]\n\nActually, `locate(loc => ...)` (using locate as a means of obtaining the _current_ location) is deprecated. Using `locate(selector)` to obtain the location of _something else_ was added in Typst 0.11 together with `context` and is not deprecated, being encouraged if that is the purpose of the usage. :slight_smile:\n\n[quote=\"jbirnick, post:2, topic:1459\"]\nNow as you noticed, it shows you the position where the heading is placed before applying the show rule, and not the position of the `place`.\n\nI don’t know if that’s a bug or intended, maybe @PgBiel can tell.\n[/quote]\n\nI'm not sure, but either way it seems ambiguous. I'd recommend not using a show rule for this and using a query which unambiguously matches something inside `place`, e.g. by adding a label.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 33,
      "score": 41.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 4948,
      "post_number": 4,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-11-01T08:19:11.595Z",
      "updated_at": "2024-11-01T08:19:11.595Z",
      "cooked": "<p>This was the result of a few internal changes. It solves some problems and creates some new ones. <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"> For figures specifically, it ensures that the <a href=\"https://github.com/typst/typst/issues/4322\">figure numbering stays correct even within floats</a>, but at the same time it makes links to figures <a href=\"https://github.com/typst/typst/issues/4359\">not jump to their floating contents</a>. It’s a very tricky situation.</p>",
      "raw": "This was the result of a few internal changes. It solves some problems and creates some new ones. :slight_smile: For figures specifically, it ensures that the [figure numbering stays correct even within floats](https://github.com/typst/typst/issues/4322), but at the same time it makes links to figures [not jump to their floating contents](https://github.com/typst/typst/issues/4359). It's a very tricky situation.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 21.0,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 4990,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2024-11-01T10:58:30.672Z",
      "updated_at": "2024-11-01T10:58:30.672Z",
      "cooked": "<p>I see, thanks for the links. That looks tricky indeed.</p>\n<p><a class=\"mention\" href=\"/u/pgbiel\">@PgBiel</a> I had tried with a label without success:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading: it =&gt; place(top, float: true, [#it &lt;a&gt;])\n= Title\n#context query(&lt;a&gt;)\n</code></pre>\n<p>Here the query returns nothing for some reason (and I guess it might still give the wrong location if it did work). But it works when I replace <code>it</code> with <code>it.body</code>. I think that’ll do for my use case, I’ll just have to recreate the numbering manually.</p>",
      "raw": "I see, thanks for the links. That looks tricky indeed.\n\n@PgBiel I had tried with a label without success:\n\n```typ\n#show heading: it => place(top, float: true, [#it <a>])\n= Title\n#context query(<a>)\n```\n\nHere the query returns nothing for some reason (and I guess it might still give the wrong location if it did work). But it works when I replace `it` with `it.body`. I think that'll do for my use case, I'll just have to recreate the numbering manually.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 26.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 5017,
      "post_number": 6,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-11-01T19:00:53.894Z",
      "updated_at": "2024-11-01T19:00:53.894Z",
      "cooked": "<p>The <code>it</code> in this case was already visited by Typst (since you are in its show rule) and will not be considered further. That’s kind of a subtle edge case.</p>",
      "raw": "The `it` in this case was already visited by Typst (since you are in its show rule) and will not be considered further. That's kind of a subtle edge case.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 20.0,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    }
  ],
  "scraped_at": "2025-06-10T09:55:40.433701"
}
{
  "topic_metadata": {
    "id": 1478,
    "title": "How to continue `enum` throughout entire document?",
    "slug": "how-to-continue-enum-throughout-entire-document",
    "posts_count": 7,
    "created_at": "2024-11-01T13:54:06.109Z",
    "last_posted_at": "2024-11-04T08:49:50.650Z",
    "views": 520,
    "like_count": 4,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "Mc-Zen",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 688
  },
  "posts": [
    {
      "id": 4991,
      "post_number": 1,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-11-01T13:54:06.284Z",
      "updated_at": "2024-11-01T16:23:34.534Z",
      "cooked": "<p>How can I continue numbering throughout an entire document when using the <code>+</code> bullets? E.g.:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">+ item 1\n\nsome comments\n\n+ item 2\n\nsome comments\n\n+ item 3\n\nsome comments\n</code></pre>\n<p>As it is now, numbering restarts each time the <code>+</code> are broken up by other lines.</p>\n<p>Of course, I can explicitly number each item, but would love if I could use <code>+</code> throughout the document and it keep track of the numbers. I’m guessing there’s a way to do it with <code>counter</code>s, but don’t know how. I’ll take a swing at it and post a solution if I can find one, but am posting here first since I imagine this would be generally helpful and want to contribute to the forum.</p>\n<p><em>Edit</em>: I should have been more clear, I understand that indentation can avoid this issue, but I would love to be able to separate some <code>enum</code>s by headers, and be able to style <code>enum</code>s separately from the content that follows. For example:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show enum: (it) =&gt; text(gray, it)\n= Section 1\n\n+ This is question 1\n\nthis is my answer to question 1\n\n+ This is question 2\n\nthis is my answer to question 2\n\n+ This is question 3\n\nthis is my answer to question 3\n\n= Section 2\n\n+ This is question 4\n\nthis is my answer to question 4\n\n</code></pre>",
      "raw": "How can I continue numbering throughout an entire document when using the `+` bullets? E.g.:\n```typst\n+ item 1\n\nsome comments\n\n+ item 2\n\nsome comments\n\n+ item 3\n\nsome comments\n```\nAs it is now, numbering restarts each time the `+` are broken up by other lines.\n\nOf course, I can explicitly number each item, but would love if I could use `+` throughout the document and it keep track of the numbers. I'm guessing there's a way to do it with `counter`s, but don't know how. I'll take a swing at it and post a solution if I can find one, but am posting here first since I imagine this would be generally helpful and want to contribute to the forum.\n\n*Edit*: I should have been more clear, I understand that indentation can avoid this issue, but I would love to be able to separate some `enum`s by headers, and be able to style `enum`s separately from the content that follows. For example:\n\n```typst\n#show enum: (it) => text(gray, it)\n= Section 1\n\n+ This is question 1\n\nthis is my answer to question 1\n\n+ This is question 2\n\nthis is my answer to question 2\n\n+ This is question 3\n\nthis is my answer to question 3\n\n= Section 2\n\n+ This is question 4\n\nthis is my answer to question 4\n\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 2300.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 177
    },
    {
      "id": 5001,
      "post_number": 2,
      "username": "maucejo",
      "name": "Mathieu Aucejo",
      "created_at": "2024-11-01T16:12:59.475Z",
      "updated_at": "2024-11-01T16:12:59.475Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/miles-1\">@miles-1</a>. Actually to avoid <code>enum</code> breaking, you have to respect indentation. Normally, the following lines should work:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">+ item 1\n  \n  some comments\n\n+ item 2\n\n  some comments\n\n+ item 3\n\n  some comments\n</code></pre>\n<p>Another possibility consists in writing :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">+ item 1\n  \n  some comments\n\n+ item 2\n\nsome comments\n\n3. item 3\n\n  some comments\n\n+ item 4\n   \n  some comments \n</code></pre>",
      "raw": "Hi @miles-1. Actually to avoid `enum` breaking, you have to respect indentation. Normally, the following lines should work: \n```typ\n+ item 1\n  \n  some comments\n\n+ item 2\n\n  some comments\n\n+ item 3\n\n  some comments\n```\n\nAnother possibility consists in writing :\n```typ\n+ item 1\n  \n  some comments\n\n+ item 2\n\nsome comments\n\n3. item 3\n\n  some comments\n\n+ item 4\n   \n  some comments \n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 29.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 125
    },
    {
      "id": 5003,
      "post_number": 3,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-11-01T16:25:16.086Z",
      "updated_at": "2024-11-01T16:25:16.086Z",
      "cooked": "<p>Sorry, I should have been more clear why indentation is not the solution I’m looking for, I edited my question. Also, I am aware that numbering can be explicitly stated and it will continue from there, but that “hard coding” makes it difficult to rearrange questions without needing to manually count out <code>enum</code>s from scratch.</p>",
      "raw": "Sorry, I should have been more clear why indentation is not the solution I'm looking for, I edited my question. Also, I am aware that numbering can be explicitly stated and it will continue from there, but that \"hard coding\" makes it difficult to rearrange questions without needing to manually count out `enum`s from scratch.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 177
    },
    {
      "id": 5005,
      "post_number": 4,
      "username": "maucejo",
      "name": "Mathieu Aucejo",
      "created_at": "2024-11-01T16:46:49.086Z",
      "updated_at": "2024-11-02T09:12:54.764Z",
      "cooked": "<p>Ok <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">. For this kind of things, I’ve created a counter and a function. Here is the code :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let c = counter(\"question\")\n#let question(body) = [\n  #c.step()\n  #context[\n    *Question #c.get().first() #h(0.5em)*\n  ]\n  #body\n]\n</code></pre>\n<p>I prefer to avoid modifying the <code>enum</code> function, because I sometimes need enumeration inside a question.</p>",
      "raw": "Ok :slight_smile:. For this kind of things, I've created a counter and a function. Here is the code : \n```typ\n#let c = counter(\"question\")\n#let question(body) = [\n  #c.step()\n  #context[\n    *Question #c.get().first() #h(0.5em)*\n  ]\n  #body\n]\n```\n\nI prefer to avoid modifying the `enum` function, because I sometimes need enumeration inside a question.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 44,
      "score": 28.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 125
    },
    {
      "id": 5006,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-11-01T16:56:22.720Z",
      "updated_at": "2024-11-01T16:56:22.720Z",
      "cooked": "<p>Another approach to this <em>if your sections are not numbered</em> could be to use headings instead:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 2): set text(gray, 1em / 1.2, weight: \"regular\")\n// oops, this will make question 4 to be numbered question 1 again!\n// #show heading.where(level: 1): set heading(numbering: \"1.\")\n#show heading.where(level: 2): set heading(numbering: (_, ..nums) =&gt; numbering(\"1.\", ..nums))\n= Section 1\n\n== This is question 1\n\nthis is my answer to question 1\n\n== This is question 2\n\nthis is my answer to question 2\n\n== This is question 3\n\nthis is my answer to question 3\n\n= Section 2\n\n== This is question 4\n\nthis is my answer to question 4\n</code></pre>",
      "raw": "Another approach to this _if your sections are not numbered_ could be to use headings instead:\n```typ\n#show heading.where(level: 2): set text(gray, 1em / 1.2, weight: \"regular\")\n// oops, this will make question 4 to be numbered question 1 again!\n// #show heading.where(level: 1): set heading(numbering: \"1.\")\n#show heading.where(level: 2): set heading(numbering: (_, ..nums) => numbering(\"1.\", ..nums))\n= Section 1\n\n== This is question 1\n\nthis is my answer to question 1\n\n== This is question 2\n\nthis is my answer to question 2\n\n== This is question 3\n\nthis is my answer to question 3\n\n= Section 2\n\n== This is question 4\n\nthis is my answer to question 4\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 48,
      "score": 44.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 5063,
      "post_number": 6,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2024-11-03T12:21:55.934Z",
      "updated_at": "2024-11-03T12:21:55.934Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/miles-1\">@miles-1</a> ,</p>\n<p>while <a class=\"mention\" href=\"/u/maucejo\">@maucejo</a> solution is very good and suitable for most cases, I want to point out that this is actually possible to configure with a simple <code>show</code> rule if you want to keep using the enum syntax and don’t care for nested enumerations.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let item-counter = counter(\"item-counter\")\n#set enum(start: 0)\n\n#show enum: it =&gt; {\n  if it.start != 0 { return it }\n  let args = it.fields()\n  let items = args.remove(\"children\")\n  context enum(..args, start: item-counter.get().first() + 1, ..items)\n  item-counter.update(i =&gt; i + it.children.len())\n}\n</code></pre>\n<p>What this does is to create a counter that keeps track of the number of already processed items and set the <code>start</code> parameter of the enumeration according to that counter. The line <code>#set enum(start: 0)</code> is a trick to prevent the show rule being called recursively.</p>\n<p>Now this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">  + Item\n  + Item\n\n  Some text in between\n  \n  + Item\n  + Item\n  \n  Some more text in between\n  \n  + Item\n  + Item\n</code></pre>\n<p>will produce the following output:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/5/5c0a25c8bcb8a5a8dd7cc86a20baa9007837c930.png\" alt=\"image\" data-base62-sha1=\"d8dFrkQFvxXUv5qUqWJek4NGcYU\" width=\"234\" height=\"228\"></p>",
      "raw": "Hi @miles-1 ,\n\nwhile @maucejo solution is very good and suitable for most cases, I want to point out that this is actually possible to configure with a simple `show` rule if you want to keep using the enum syntax and don't care for nested enumerations. \n```typ\n#let item-counter = counter(\"item-counter\")\n#set enum(start: 0)\n\n#show enum: it => {\n  if it.start != 0 { return it }\n  let args = it.fields()\n  let items = args.remove(\"children\")\n  context enum(..args, start: item-counter.get().first() + 1, ..items)\n  item-counter.update(i => i + it.children.len())\n}\n```\nWhat this does is to create a counter that keeps track of the number of already processed items and set the `start` parameter of the enumeration according to that counter. The line `#set enum(start: 0)` is a trick to prevent the show rule being called recursively. \n\n\nNow this:\n```typ\n  + Item\n  + Item\n\n  Some text in between\n  \n  + Item\n  + Item\n  \n  Some more text in between\n  \n  + Item\n  + Item\n```\nwill produce the following output:\n![image|313x304, 75%](upload://d8dFrkQFvxXUv5qUqWJek4NGcYU.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 38,
      "score": 187.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 5095,
      "post_number": 7,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-04T08:49:50.650Z",
      "updated_at": "2024-11-04T08:49:50.650Z",
      "cooked": "<p>A nested version of this is also discussed in <a href=\"https://forum.typst.app/t/resuming-nested-numbered-lists/1519\" class=\"inline-onebox\">Resuming Nested Numbered Lists</a></p>",
      "raw": "A nested version of this is also discussed in https://forum.typst.app/t/resuming-nested-numbered-lists/1519",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 50.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:55:39.702188"
}
{
  "topic_metadata": {
    "id": 1483,
    "title": "Why is State Final not \"final\"?",
    "slug": "why-is-state-final-not-final",
    "posts_count": 6,
    "created_at": "2024-11-01T15:45:43.215Z",
    "last_posted_at": "2024-11-11T16:14:16.819Z",
    "views": 328,
    "like_count": 1,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "scripting",
      "state",
      "introspection"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 1332
  },
  "posts": [
    {
      "id": 5000,
      "post_number": 1,
      "username": "Rogier",
      "name": "Rogier",
      "created_at": "2024-11-01T15:45:43.366Z",
      "updated_at": "2024-11-04T18:38:25.453Z",
      "cooked": "<p>Hi all,</p>\n<p>I’ve been trying to keep track of an array of objects within my document in a “state” variable. I use the end result of the state at the end of the document to create a table at the beginning of my document. (it’s for document referencing)</p>\n<p>I’m running into the odd problem that the “final” keyword does not seem to return the final version of the array. In fact, as far as I can tell it returns an array that should have never existed anywhere in the code.</p>\n<p>Minimum Viable Product code:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context state(\"test_state\",0).update((\n    \"TEST_01\": (\"VAR_1\", \"VAR_02\", \"VAR_03\"),\n    \"TEST_02\": (\"VAR_4\", \"VAR_05\", \"VAR_06\"),\n    \"TEST_03\": (\"VAR_7\", \"VAR_08\", \"VAR_09\"),\n))\n\n#let change_state(ref, num) = {\n    context{\n        let ts = state(\"test_state\").get()\n        if(ts.at(ref).at(num) != \"CHANGED\"){\n            ts.at(ref).at(num) = \"CHANGED\"\n        }\n        state(\"test_state\").update(ts)\n        [#ts]\n    }\n}\n\nFINAL:\n#context state(\"test_state\").final()\n\nCHANGE 01 02\n#change_state(\"TEST_01\",2)\n\nCHANGE 02 01\n#change_state(\"TEST_02\",1)\n\nCHANGE 02 02 \n#change_state(\"TEST_02\",2)\n\nCHANGE 03 01\n#change_state(\"TEST_03\",0)\n</code></pre>\n<p>What I would expect is that the final print after “CHANGE 03 01” is the same as the “FINAL” print. Since the state of the test_state there is the final version of the state.</p>\n<p>However as you can see in the screenshot below, for some reason the .final() state is a permutation of the matrix that does not match. In fact, this permutation of the table has never existed anywhere in the document…</p>\n<p>Row 1 is modified in the first function call of change_state. So I don’t see how it’s possible that the “final” version has an unmodified row 1, whilst some of the other rows are modified… I’m not sure if this is a bug or me not understanding how state variables work.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/8/8ec46afe36c2da6d540fb9767677546d6fd5c719.png\" data-download-href=\"https://forum.typst.app/uploads/default/8ec46afe36c2da6d540fb9767677546d6fd5c719\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/8/8ec46afe36c2da6d540fb9767677546d6fd5c719_2_304x500.png\" alt=\"image\" data-base62-sha1=\"kmYCHON34gjcLzqpqnPqVs9RHAd\" width=\"304\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/8/8ec46afe36c2da6d540fb9767677546d6fd5c719_2_304x500.png, https://forum.typst.app/uploads/default/original/2X/8/8ec46afe36c2da6d540fb9767677546d6fd5c719.png 1.5x, https://forum.typst.app/uploads/default/original/2X/8/8ec46afe36c2da6d540fb9767677546d6fd5c719.png 2x\" data-dominant-color=\"F2F6F1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">448×735 126 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hi all,\n\nI've been trying to keep track of an array of objects within my document in a \"state\" variable. I use the end result of the state at the end of the document to create a table at the beginning of my document. (it's for document referencing)\n\nI'm running into the odd problem that the \"final\" keyword does not seem to return the final version of the array. In fact, as far as I can tell it returns an array that should have never existed anywhere in the code. \n\nMinimum Viable Product code:\n\n```typ\n#context state(\"test_state\",0).update((\n    \"TEST_01\": (\"VAR_1\", \"VAR_02\", \"VAR_03\"),\n    \"TEST_02\": (\"VAR_4\", \"VAR_05\", \"VAR_06\"),\n    \"TEST_03\": (\"VAR_7\", \"VAR_08\", \"VAR_09\"),\n))\n\n#let change_state(ref, num) = {\n    context{\n        let ts = state(\"test_state\").get()\n        if(ts.at(ref).at(num) != \"CHANGED\"){\n            ts.at(ref).at(num) = \"CHANGED\"\n        }\n        state(\"test_state\").update(ts)\n        [#ts]\n    }\n}\n\nFINAL:\n#context state(\"test_state\").final()\n\nCHANGE 01 02\n#change_state(\"TEST_01\",2)\n\nCHANGE 02 01\n#change_state(\"TEST_02\",1)\n\nCHANGE 02 02 \n#change_state(\"TEST_02\",2)\n\nCHANGE 03 01\n#change_state(\"TEST_03\",0)\n```\n\nWhat I would expect is that the final print after \"CHANGE 03 01\" is the same as the \"FINAL\" print. Since the state of the test_state there is the final version of the state. \n\nHowever as you can see in the screenshot below, for some reason the .final() state is a permutation of the matrix that does not match. In fact, this permutation of the table has never existed anywhere in the document... \n\nRow 1 is modified in the first function call of change_state. So I don't see how it's possible that the \"final\" version has an unmodified row 1, whilst some of the other rows are modified... I'm not sure if this is a bug or me not understanding how state variables work.\n\n![image|304x500](upload://kmYCHON34gjcLzqpqnPqVs9RHAd.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 67,
      "score": 388.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 263
    },
    {
      "id": 5002,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-11-01T16:21:46.442Z",
      "updated_at": "2024-11-01T16:26:52.711Z",
      "cooked": "<p>If you look closely, you’ll see that Typst is actually warning you about a problem with your document:</p>\n<blockquote>\n<p>Layout did not converge within 5 attempts</p>\n</blockquote>\n<p>This problem is hard to debug in general, but here the source of the problem is fairly easy to recognize and fix: your state updates are structured like</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">context {\n  x = foo.get()\n  ..\n  foo.update(x)\n}\n</code></pre>\n<p>instead of the proper form:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">foo.update(x =&gt; {\n  ..\n  x\n})\n</code></pre>\n<p>This uses the form of <code>update()</code> where you give it a function that computes the new value from the old one.</p>\n<p>The <a href=\"https://typst.app/docs/reference/introspection/state/#state-in-typst\">docs</a> have the following example that matches your use case:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let compute(expr) = [\n  #s.update(x =&gt;\n    eval(expr.replace(\"x\", str(x)))\n  )\n  New value is #context s.get().\n]\n</code></pre>\n<p>here there is first an <code>update</code> that uses a function, followed by a <code>context get()</code> that displays the new value.</p>\n<p>Applied to your use case, the code would look like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let change_state(ref, num) = {\n  state(\"test_state\").update(ts =&gt; {\n    if ts.at(ref).at(2) != \"CHANGED\" {\n        ts.at(ref).at(num) = \"CHANGED\"\n    }\n    ts\n  })\n  context [#state(\"test_state\").get()]\n}\n</code></pre>\n<hr>\n<p>Why is the form you chose not working? Each time you <code>get()</code>, Typst has to access the state value, which depends on the current <code>context</code>. If you then use that value to <code>update()</code>, you’re actually invalidating <code>get()</code> calls that come later in the document. This leads to a cascade:</p>\n<ul>\n<li>Non-contextual parts of your document are evaluated: the state still has its initial values since all updates are contextual.</li>\n<li>All <code>get()</code>s in your document run and fetch the state value. Since the <code>update()</code>s are not applied yet all <code>get()</code> calls see the <em>initial</em> value.</li>\n<li>All <code>update()</code>s are inserted into the document, setting a value that is based on the <code>get()</code> result (the initial value).</li>\n<li>Typst sees that all <code>get()</code>s but the first used the wrong value (there’s a new update there) so the second and all following <code>context</code> blocks are reevaluated, using the value after the first update</li>\n<li>Typst sees that all <code>get()</code>s but the first and second used the wrong value so the third and all following <code>context</code> blocks are reevaluated, using the value after the second update.</li>\n<li>…</li>\n<li>After five updates, Typst gives up: the document did not “converge” in few enough attempts. The result of the <code>final()</code> call that you see is only based on the updates that were embedded into the document before then.</li>\n</ul>\n<p><code>update(x =&gt; ..)</code> circumvents the cascade and makes update values available immediately, which is why it makes the document converge!</p>",
      "raw": "If you look closely, you'll see that Typst is actually warning you about a problem with your document:\n\n> Layout did not converge within 5 attempts\n\nThis problem is hard to debug in general, but here the source of the problem is fairly easy to recognize and fix: your state updates are structured like\n```typc\ncontext {\n  x = foo.get()\n  ..\n  foo.update(x)\n}\n```\ninstead of the proper form:\n```typc\nfoo.update(x => {\n  ..\n  x\n})\n```\nThis uses the form of `update()` where you give it a function that computes the new value from the old one.\n\nThe [docs](https://typst.app/docs/reference/introspection/state/#state-in-typst) have the following example that matches your use case:\n```typ\n#let compute(expr) = [\n  #s.update(x =>\n    eval(expr.replace(\"x\", str(x)))\n  )\n  New value is #context s.get().\n]\n```\nhere there is first an `update` that uses a function, followed by a `context get()` that displays the new value.\n\nApplied to your use case, the code would look like this:\n```typ\n#let change_state(ref, num) = {\n  state(\"test_state\").update(ts => {\n    if ts.at(ref).at(2) != \"CHANGED\" {\n        ts.at(ref).at(num) = \"CHANGED\"\n    }\n    ts\n  })\n  context [#state(\"test_state\").get()]\n}\n```\n\n---\n\nWhy is the form you chose not working? Each time you `get()`, Typst has to access the state value, which depends on the current `context`. If you then use that value to `update()`, you're actually invalidating `get()` calls that come later in the document. This leads to a cascade:\n- Non-contextual parts of your document are evaluated: the state still has its initial values since all updates are contextual.\n- All `get()`s in your document run and fetch the state value. Since the `update()`s are not applied yet all `get()` calls see the _initial_ value.\n- All `update()`s are inserted into the document, setting a value that is based on the `get()` result (the initial value).\n- Typst sees that all `get()`s but the first used the wrong value (there's a new update there) so the second and all following `context` blocks are reevaluated, using the value after the first update\n- Typst sees that all `get()`s but the first and second used the wrong value so the third and all following `context` blocks are reevaluated, using the value after the second update.\n- ...\n- After five updates, Typst gives up: the document did not \"converge\" in few enough attempts. The result of the `final()` call that you see is only based on the updates that were embedded into the document before then.\n\n`update(x => ..)` circumvents the cascade and makes update values available immediately, which is why it makes the document converge!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 60,
      "score": 642.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 5019,
      "post_number": 3,
      "username": "Rogier",
      "name": "Rogier",
      "created_at": "2024-11-01T19:26:56.030Z",
      "updated_at": "2024-11-02T01:50:48.468Z",
      "cooked": "<p>Thanks, I think I understand what you’re doing and that does fix it. However now I have another problem that is probably adjacent.</p>\n<p>As I mentioned before I’m trying to build a reference doc generator. What I want to happen is that:</p>\n<ol>\n<li>A doc ref function is called.</li>\n<li>It evaluates the current Array of documents and sees if the document referred to already has a label attached (“DOC-NUMBER”)</li>\n<li>If not, increment the “document counter”. (which is a separate state) Set the label of this document to DOC-COUNTER</li>\n<li>In-text produce the document label. If it already existed in step 2, just give that one.</li>\n</ol>\n<p>For this I need to update a state “within” the state update. (Because the condition whether I need to update the counter is dependent on whether the label has already been changed.) So let’s say like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let change_state(ref, num) = {\n  state(\"test_state\").update(ts =&gt; {\n    if ts.at(ref).at(2) != \"CHANGED\" {\n        state(\"counter\").update(cnt =&gt; {cnt+1})\n        ts.at(ref).at(num) = \"CHANGED\"\n    }\n    ts\n  })\n  context [#state(\"test_state\").get()]\n}\n</code></pre>\n<p>But for some reason when I add the counter update line typst produces the error:</p>\n<p>“cannot join content with dictionary” on the “ts” return line. I personally don’t see how they’re related.</p>",
      "raw": "Thanks, I think I understand what you're doing and that does fix it. However now I have another problem that is probably adjacent.\n\nAs I mentioned before I'm trying to build a reference doc generator. What I want to happen is that:\n\n1. A doc ref function is called.\n2. It evaluates the current Array of documents and sees if the document referred to already has a label attached (\"DOC-NUMBER\")\n3. If not, increment the \"document counter\". (which is a separate state) Set the label of this document to DOC-COUNTER\n4. In-text produce the document label. If it already existed in step 2, just give that one.\n\nFor this I need to update a state \"within\" the state update. (Because the condition whether I need to update the counter is dependent on whether the label has already been changed.) So let's say like this:\n\n```typ\n#let change_state(ref, num) = {\n  state(\"test_state\").update(ts => {\n    if ts.at(ref).at(2) != \"CHANGED\" {\n        state(\"counter\").update(cnt => {cnt+1})\n        ts.at(ref).at(num) = \"CHANGED\"\n    }\n    ts\n  })\n  context [#state(\"test_state\").get()]\n}\n```\n\nBut for some reason when I add the counter update line typst produces the error:\n\n\"cannot join content with dictionary\" on the \"ts\" return line. I personally don't see how they're related.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 25.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 263
    },
    {
      "id": 5135,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-11-04T18:48:13.595Z",
      "updated_at": "2024-11-04T18:48:13.595Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Rogier\" data-post=\"3\" data-topic=\"1483\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/r/220F66/48.png\" class=\"avatar\"> Rogier:</div>\n<blockquote>\n<p>“cannot join content with dictionary”</p>\n</blockquote>\n</aside>\n<p>There’s some related discussion here:</p>\n<aside class=\"quote quote-modified\" data-post=\"3\" data-topic=\"778\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/gabe/48/620_2.png\" class=\"avatar\">\n    <a href=\"https://forum.typst.app/t/can-i-attach-and-update-state-in-metadata/778/3\">Can I attach and update state in metadata?</a> <a class=\"badge-category__wrapper \" href=\"/c/questions/5\"><span data-category-id=\"5\" style=\"--category-badge-color: #F7C000; --category-badge-text-color: #fdfdfd;\" data-drop-close=\"true\" class=\"badge-category \" title=\"Your questions about using Typst and the web app go in this category.\"><span class=\"badge-category__name\">Questions</span></span></a>\n  </div>\n  <blockquote>\n    Thanks for taking the time to explain all the little details. \n#state(\"test\", 0).update(cs =&gt; cs += 1)\n// Wouldn't even make sense, because if we don't use a function we would do, for example:\n#state(\"test\", 0).update(1)\n\nIs the following description of states accurate? States themselves never change, but instead we put down markers (which live in the content) that are used to compute what the value of state at a given position should be. The markers that we put down only have the name of the st…\n  </blockquote>\n</aside>\n\n<p>The problem is that <code>update()</code> is a kind of content: it doesn’t modify the state directly, but inserts a command to do it into the document. I alluded to this by saying that “<code>update()</code>s are inserted into the document”.</p>\n<p>So since your outer update wants to return a <code>dict</code>, it struggles with combining that with the inner update (and even if it could, the inner update command would not be <em>part of the document</em> but somehow embedded in a state, which would mean it can’t act).</p>\n<p>A workaround – that probably brings you back to your old problem – would be to move the inner update out, where you’d have to use <code>context get()</code> to access the current state.</p>\n<p>The <em>proper</em> workaround would be to combine the two states. Instead of <code>test_state</code> having a dict and <code>counter</code> having a number, combine them into one state, e.g. <code>combined_state</code> with an initial value like <code>(test_state: (..), counter: 0)</code>. Then you can still access <code>context get().test_state</code> and don’t need an inner update to modify the counter.</p>",
      "raw": "[quote=\"Rogier, post:3, topic:1483\"]\n“cannot join content with dictionary”\n[/quote]\n\nThere's some related discussion here:\n\nhttps://forum.typst.app/t/can-i-attach-and-update-state-in-metadata/778/3?u=sillyfreak\n\nThe problem is that `update()` is a kind of content: it doesn't modify the state directly, but inserts a command to do it into the document. I alluded to this by saying that \"`update()`s are inserted into the document\".\n\nSo since your outer update wants to return a `dict`, it struggles with combining that with the inner update (and even if it could, the inner update command would not be _part of the document_ but somehow embedded in a state, which would mean it can't act).\n\nA workaround -- that probably brings you back to your old problem -- would be to move the inner update out, where you'd have to use `context get()` to access the current state.\n\nThe _proper_ workaround would be to combine the two states. Instead of `test_state` having a dict and `counter` having a number, combine them into one state, e.g. `combined_state` with an initial value like `(test_state: (..), counter: 0)`. Then you can still access `context get().test_state` and don't need an inner update to modify the counter.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 37,
      "score": 22.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 5488,
      "post_number": 5,
      "username": "Rogier",
      "name": "Rogier",
      "created_at": "2024-11-11T14:02:22.455Z",
      "updated_at": "2024-11-11T14:02:22.455Z",
      "cooked": "<p>Thanks, your suggestion is indeed what I ended up doing. I just added “counter” as a variable to my dict. I have run into this process a couple of times now, it is one of the parts of typst I like the least, but can’t quite put my finger on what would solve it. It’s just very unintuitive and I mostly end up trying a bunch of stuff until it looks like it’s working.</p>",
      "raw": "Thanks, your suggestion is indeed what I ended up doing. I just added \"counter\" as a variable to my dict. I have run into this process a couple of times now, it is one of the parts of typst I like the least, but can't quite put my finger on what would solve it. It's just very unintuitive and I mostly end up trying a bunch of stuff until it looks like it's working.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 11.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 263
    },
    {
      "id": 5495,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-11-11T16:14:16.819Z",
      "updated_at": "2024-11-11T16:14:16.819Z",
      "cooked": "<p>If it’s any consolation (probably not <img src=\"https://forum.typst.app/images/emoji/apple/stuck_out_tongue.png?v=12\" title=\":stuck_out_tongue:\" class=\"emoji\" alt=\":stuck_out_tongue:\" loading=\"lazy\" width=\"20\" height=\"20\">), let me tell you that this kind of state management is kinda similar to many web frontend frameworks, like React, and many programmers struggle with it or find it ultimately unsatisfying. I guess that means Typst has some prior art it can look at to improve (although overall I think it actually works relatively nicely in Typst), but the prior art is also not perfect… it’s a hard topic, and finding it unintuitive is definitely not on you <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "If it's any consolation (probably not :stuck_out_tongue:), let me tell you that this kind of state management is kinda similar to many web frontend frameworks, like React, and many programmers struggle with it or find it ultimately unsatisfying. I guess that means Typst has some prior art it can look at to improve (although overall I think it actually works relatively nicely in Typst), but the prior art is also not perfect... it's a hard topic, and finding it unintuitive is definitely not on you :slight_smile:",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 5.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:55:38.982402"
}
{
  "topic_metadata": {
    "id": 1485,
    "title": "How can I more easily input unicode characters?",
    "slug": "how-can-i-more-easily-input-unicode-characters",
    "posts_count": 9,
    "created_at": "2024-11-01T17:11:58.053Z",
    "last_posted_at": "2025-02-17T10:03:59.196Z",
    "views": 781,
    "like_count": 4,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "bensetterholm",
    "tags": [
      "tooling"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 693
  },
  "posts": [
    {
      "id": 5008,
      "post_number": 1,
      "username": "DNF",
      "name": "",
      "created_at": "2024-11-01T17:11:58.152Z",
      "updated_at": "2024-11-02T10:07:13.552Z",
      "cooked": "<p>Typst supports unicode symbols out-of-the box, but I found no obvious way to type them in my code. I am using VS Code with the Tinymist plugin.</p>\n<p>In other contexts I use the Unicode Latex plugin: <a href=\"https://marketplace.visualstudio.com/items?itemName=oijaz.unicode-latex\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Unicode Latex - Visual Studio Marketplace</a> which allows me to just type LaTeX syntax which tab-completes to unicode. So if I type <code>\\beta&lt;TAB&gt;</code> a nice <code>β</code> is inserted in my source. This works in all sorts of file types in VS code, but I am unable to make it work with typ-files.</p>\n<p>Does anyone have a smooth solution for entering unicode? I would prefer not to have to remember hex codes.</p>",
      "raw": "Typst supports unicode symbols out-of-the box, but I found no obvious way to type them in my code. I am using VS Code with the Tinymist plugin.\n\nIn other contexts I use the Unicode Latex plugin: https://marketplace.visualstudio.com/items?itemName=oijaz.unicode-latex which allows me to just type LaTeX syntax which tab-completes to unicode. So if I type `\\beta<TAB>` a nice `β` is inserted in my source. This works in all sorts of file types in VS code, but I am unable to make it work with typ-files. \n\nDoes anyone have a smooth solution for entering unicode? I would prefer not to have to remember hex codes.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 103,
      "score": 3150.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 711
    },
    {
      "id": 5022,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-02T02:21:32.612Z",
      "updated_at": "2024-11-02T02:23:37.938Z",
      "cooked": "<p>This is the purpose of Typst’s named symbols: <code>$ sum_(n in NN) alpha dot n $</code> produces the expected output, as seen below.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/7/79fa72134d819dddfcded86a99beb96f6cf2630a.png\" data-download-href=\"https://forum.typst.app/uploads/default/79fa72134d819dddfcded86a99beb96f6cf2630a\" title=\"output: corresponding symbols shown\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/7/79fa72134d819dddfcded86a99beb96f6cf2630a_2_690x98.png\" alt=\"output: corresponding symbols shown\" data-base62-sha1=\"hp4lLRUH52ua97qz1MDUO2VYqfg\" width=\"690\" height=\"98\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/7/79fa72134d819dddfcded86a99beb96f6cf2630a_2_690x98.png, https://forum.typst.app/uploads/default/optimized/2X/7/79fa72134d819dddfcded86a99beb96f6cf2630a_2_1035x147.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/7/79fa72134d819dddfcded86a99beb96f6cf2630a_2_1380x196.png 2x\" data-dominant-color=\"FDFDFD\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">output: corresponding symbols shown</span><span class=\"informations\">1500×214 11.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>You can see a full list of named symbols (a subset of Unicode) here: <a href=\"https://typst.app/docs/reference/symbols/sym/\" class=\"inline-onebox\">General Symbols – Typst Documentation</a>. You can even draw to find out the name of your desired symbol using this website: <a href=\"https://detypify.quarticcat.com/\">https://detypify.quarticcat.com/</a></p>\n<p>Note that accessing named symbols outside of math mode requires prefixing them with <code>#sym.</code> (e.g. <code>#sym.alpha</code>). For convenience, you can write as follows to import some symbols from that namespace, avoiding the <code>sym</code> prefix even outside of math mode:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// Without imports:\n#sym.alpha\n\n// With imports:\n#import sym: alpha\n\n// Output: alpha symbol\n#alpha\n</code></pre>\n<p>If a symbol is not in the default list of symbols, you can create your own if you know the codepoint number (or if you just paste the character), by binding either a string or a symbol type (<a href=\"https://typst.app/docs/reference/symbols/symbol/\" class=\"inline-onebox\">Symbol Type – Typst Documentation</a>) to a variable:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// Simple symbol (no variants)\n\n#let coolarrow = \"\\u{226B}\"\n// Just pasting \"≫\" above would also work\n\n$ coolarrow $\n\n// Complex symbol (multiple variants)\n\n#let letterA = symbol(\n  \"a\",\n  (\"uppercase\", \"A\"),\n  (\"turned\", \"Ɐ\")\n)\n\n#letterA\n#letterA.uppercase\n#letterA.turned\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/1/1e8cd0c349df9f7b058282655bc5aecf71593caf.png\" data-download-href=\"https://forum.typst.app/uploads/default/1e8cd0c349df9f7b058282655bc5aecf71593caf\" title=\"output: symbols shown\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/1/1e8cd0c349df9f7b058282655bc5aecf71593caf_2_690x108.png\" alt=\"output: symbols shown\" data-base62-sha1=\"4mg1erN3lfcEIKurbqnQWRgNcSj\" width=\"690\" height=\"108\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/1/1e8cd0c349df9f7b058282655bc5aecf71593caf_2_690x108.png, https://forum.typst.app/uploads/default/optimized/2X/1/1e8cd0c349df9f7b058282655bc5aecf71593caf_2_1035x162.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/1/1e8cd0c349df9f7b058282655bc5aecf71593caf_2_1380x216.png 2x\" data-dominant-color=\"FEFEFE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">output: symbols shown</span><span class=\"informations\">1500×235 9.89 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>If you don’t have the Unicode character you need but remember what it looks like, there is also a website where you can draw to get any Unicode character: <a href=\"https://shapecatcher.com/\">https://shapecatcher.com/</a></p>",
      "raw": "This is the purpose of Typst's named symbols: `$ sum_(n in NN) alpha dot n $` produces the expected output, as seen below.\n\n![output: corresponding symbols shown|690x98](upload://hp4lLRUH52ua97qz1MDUO2VYqfg.png)\n\nYou can see a full list of named symbols (a subset of Unicode) here: https://typst.app/docs/reference/symbols/sym/. You can even draw to find out the name of your desired symbol using this website: https://detypify.quarticcat.com/\n\nNote that accessing named symbols outside of math mode requires prefixing them with `#sym.` (e.g. `#sym.alpha`). For convenience, you can write as follows to import some symbols from that namespace, avoiding the `sym` prefix even outside of math mode:\n\n```typ\n// Without imports:\n#sym.alpha\n\n// With imports:\n#import sym: alpha\n\n// Output: alpha symbol\n#alpha\n```\n\nIf a symbol is not in the default list of symbols, you can create your own if you know the codepoint number (or if you just paste the character), by binding either a string or a symbol type (https://typst.app/docs/reference/symbols/symbol/) to a variable:\n\n```typ\n// Simple symbol (no variants)\n\n#let coolarrow = \"\\u{226B}\"\n// Just pasting \"≫\" above would also work\n\n$ coolarrow $\n\n// Complex symbol (multiple variants)\n\n#let letterA = symbol(\n  \"a\",\n  (\"uppercase\", \"A\"),\n  (\"turned\", \"Ɐ\")\n)\n\n#letterA\n#letterA.uppercase\n#letterA.turned\n```\n![output: symbols shown|690x108](upload://4mg1erN3lfcEIKurbqnQWRgNcSj.png)\n\nIf you don't have the Unicode character you need but remember what it looks like, there is also a website where you can draw to get any Unicode character: https://shapecatcher.com/",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 97,
      "score": 254.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5030,
      "post_number": 3,
      "username": "DNF",
      "name": "",
      "created_at": "2024-11-02T08:18:06.900Z",
      "updated_at": "2024-11-02T08:18:39.404Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"PgBiel\" data-post=\"2\" data-topic=\"1485\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/F64C96/48.png\" class=\"avatar\"> PgBiel:</div>\n<blockquote>\n<p>This is the purpose of Typst’s named symbols: <code>$ sum_(n in NN) alpha dot n $</code></p>\n</blockquote>\n</aside>\n<p>Thanks, but there is a slight misunderstanding here. I am looking for how to use <code>α</code> directly in my source code, instead of <code>alpha</code>. I want my source code to look like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">sum_(n in NN) α dot n\n</code></pre>\n<p>and, specifically, I am looking for an easier way to type unicode characters, such as the way the Unicode LaTeX plugin allows.</p>",
      "raw": "[quote=\"PgBiel, post:2, topic:1485\"]\nThis is the purpose of Typst’s named symbols: `$ sum_(n in NN) alpha dot n $`\n[/quote]\n\nThanks, but there is a slight misunderstanding here. I am looking for how to use `α` directly in my source code, instead of `alpha`. I want my source code to look like this:\n```typ\nsum_(n in NN) α dot n\n```\nand, specifically, I am looking for an easier way to type unicode characters, such as the way the Unicode LaTeX plugin allows.",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 1,
      "reads": 73,
      "score": 74.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 711
    },
    {
      "id": 5036,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-11-02T10:13:23.075Z",
      "updated_at": "2024-11-02T10:13:23.075Z",
      "cooked": "<p>I don’t think this exists yet, but I think that wouldn’t be too hard to add to <a href=\"https://github.com/Myriad-Dreamin/tinymist/\">Tinymist</a>. It already has a symbol lookup feature, and Typst symbols are already Unicode characters (I assume all of them? at least most). I would open an issue about it on their Github repo, and maybe also on <a href=\"https://github.com/typst/webapp-issues/\">webapp-issues</a> for the official app.</p>",
      "raw": "I don't think this exists yet, but I think that wouldn't be too hard to add to [Tinymist](https://github.com/Myriad-Dreamin/tinymist/). It already has a symbol lookup feature, and Typst symbols are already Unicode characters (I assume all of them? at least most). I would open an issue about it on their Github repo, and maybe also on [webapp-issues](https://github.com/typst/webapp-issues/) for the official app.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 68,
      "score": 38.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 5042,
      "post_number": 5,
      "username": "maucejo",
      "name": "Mathieu Aucejo",
      "created_at": "2024-11-02T13:34:00.474Z",
      "updated_at": "2024-11-02T13:34:00.474Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/dnf\">@DNF</a> ! Glad to see another Julia user on the Typst forum !<br>\nThis feature is not currently available in VSCode. However, you can try the <code>Typst Math</code> VSCode extension (see <a href=\"https://marketplace.visualstudio.com/items?itemName=surv.typst-math\" rel=\"noopener nofollow ugc\">here</a>) that allows to preview math symbols directly in the editor.</p>",
      "raw": "Hi @DNF ! Glad to see another Julia user on the Typst forum !\nThis feature is not currently available in VSCode. However, you can try the `Typst Math` VSCode extension (see [here](https://marketplace.visualstudio.com/items?itemName=surv.typst-math)) that allows to preview math symbols directly in the editor.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 67,
      "score": 38.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 125
    },
    {
      "id": 7712,
      "post_number": 6,
      "username": "bensetterholm",
      "name": "Benjamin Setterholm",
      "created_at": "2025-01-20T14:39:38.801Z",
      "updated_at": "2025-01-20T14:39:38.801Z",
      "cooked": "<p>VSCode Settings &gt; Extensions &gt; Unicode Latex &gt; Add Item &gt; <code>typ</code></p>",
      "raw": "VSCode Settings > Extensions > Unicode Latex > Add Item > `typ`",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 13.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1073
    },
    {
      "id": 8203,
      "post_number": 7,
      "username": "DNF",
      "name": "",
      "created_at": "2025-02-04T14:40:04.281Z",
      "updated_at": "2025-02-04T14:40:04.281Z",
      "cooked": "<p>Is this working for you? I have tried doing this, but with no effect.</p>",
      "raw": "Is this working for you? I have tried doing this, but with no effect.",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 12.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 711
    },
    {
      "id": 8205,
      "post_number": 8,
      "username": "bensetterholm",
      "name": "Benjamin Setterholm",
      "created_at": "2025-02-04T15:29:03.862Z",
      "updated_at": "2025-02-04T15:29:03.862Z",
      "cooked": "<p>I just noticed that I had both <code>typ</code> and <code>typst</code> in the Unicode Latex extension list. The <code>typ</code> entry seems to not do anything, but I confirm that the <code>typst</code> one does allow me to use the extension as expected.</p>\n<p>Note also that you have to restart the VSCode process for the extension changes to go into effect.</p>",
      "raw": "I just noticed that I had both `typ` and `typst` in the Unicode Latex extension list. The `typ` entry seems to not do anything, but I confirm that the `typst` one does allow me to use the extension as expected.\n\nNote also that you have to restart the VSCode process for the extension changes to go into effect.",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 17.4,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1073
    },
    {
      "id": 8748,
      "post_number": 9,
      "username": "DNF",
      "name": "",
      "created_at": "2025-02-17T10:03:59.196Z",
      "updated_at": "2025-02-17T10:03:59.196Z",
      "cooked": "<p>Sorry for the late feedback, but today, this actually worked for me:</p>\n<pre><code class=\"lang-auto\">VSCode Settings &gt; Extensions &gt; Unicode Latex &gt; Add Item &gt; typst\n</code></pre>\n<p>Took care to remove the old <code>typ</code> entry, then reload window.</p>\n<p>Now I can easily enter actual unicode <img src=\"https://forum.typst.app/images/emoji/apple/grinning.png?v=12\" title=\":grinning:\" class=\"emoji\" alt=\":grinning:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Sorry for the late feedback, but today, this actually worked for me:\n```\nVSCode Settings > Extensions > Unicode Latex > Add Item > typst\n```\nTook care to remove the old `typ` entry, then reload window.\n\nNow I can easily enter actual unicode :grinning:",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 11.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 711
    }
  ],
  "scraped_at": "2025-06-10T09:55:38.282379"
}
{
  "topic_metadata": {
    "id": 1501,
    "title": "How to cite with a page number in GB/T 7714—2015 style?",
    "slug": "how-to-cite-with-a-page-number-in-gb-t-7714-2015-style",
    "posts_count": 4,
    "created_at": "2024-11-02T15:24:55.208Z",
    "last_posted_at": "2024-11-02T18:41:24.280Z",
    "views": 415,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Y.D.X",
    "tags": [
      "citation",
      "bibtex",
      "hayagriva"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 828
  },
  "posts": [
    {
      "id": 5044,
      "post_number": 1,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2024-11-02T15:24:55.352Z",
      "updated_at": "2024-11-02T15:28:25.663Z",
      "cooked": "<p>I want to cite with the page number <code>326–329</code>, but it is not shown in <code>gb-7714-2015-numeric</code> style.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">// #set page(height: auto, width: auto, margin: 10pt)\n// #set text(font: \"Noto Serif CJK SC\", lang: \"zh\", region: \"CN\")\n\n极大的打击@example[326–329]。\n\n#bibliography(\"ref.bib\", style: \"gb-7714-2015-numeric\")\n</code></pre>\n<details>\n<summary>\nref.bib</summary>\n<pre data-code-wrap=\"bib\"><code class=\"lang-bib\">@article{example,\n  title = {Title},\n  author = {Author},\n  date = {2024-11-02},\n}\n</code></pre>\n</details>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/f/f496fba44b0c2a7e2378c88ef10df6a984217011.png\" alt=\"Output\" data-base62-sha1=\"yTJYU35zGvdbX3HbKhZrWqaZbih\" width=\"328\" height=\"158\"></p>\n<ul>\n<li>Output of typst v0.12: <code>[1]</code>.</li>\n<li>Desired:  <code>[1]326–329</code>.</li>\n</ul>\n<p>How to show the page number?<br>\nIf I should modify the CSL, then where can I download the original version? I find nothing in the repos of hayagriva or typst.</p>\n<p>Thanks in advance.</p>\n<details>\n<summary>\nExamples in GB/T 7714—2015 (Chinese)</summary>\n<p><a href=\"https://lib.tsinghua.edu.cn/wj/GBT7714-2015.pdf\" rel=\"noopener nofollow ugc\">GB/T 7714—2015 Information and documentation—Rules for bibliographic references and citations to information resources</a> (Chinese)</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/6b1061be7b95d4d89ac3e3e70ff2c14d9da0b80d.png\" data-download-href=\"https://forum.typst.app/uploads/default/6b1061be7b95d4d89ac3e3e70ff2c14d9da0b80d\" title=\"§10.1.3\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/6/6b1061be7b95d4d89ac3e3e70ff2c14d9da0b80d_2_690x386.png\" alt=\"§10.1.3\" data-base62-sha1=\"fh8bBDoWIwKCG7jYuW1iKE81pI9\" width=\"690\" height=\"386\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/6/6b1061be7b95d4d89ac3e3e70ff2c14d9da0b80d_2_690x386.png, https://forum.typst.app/uploads/default/optimized/2X/6/6b1061be7b95d4d89ac3e3e70ff2c14d9da0b80d_2_1035x579.png 1.5x, https://forum.typst.app/uploads/default/original/2X/6/6b1061be7b95d4d89ac3e3e70ff2c14d9da0b80d.png 2x\" data-dominant-color=\"EEEEEB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">§10.1.3</span><span class=\"informations\">1324×741 354 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>",
      "raw": "I want to cite with the page number `326–329`, but it is not shown in `gb-7714-2015-numeric` style.\n\n```typst\n// #set page(height: auto, width: auto, margin: 10pt)\n// #set text(font: \"Noto Serif CJK SC\", lang: \"zh\", region: \"CN\")\n\n极大的打击@example[326–329]。\n\n#bibliography(\"ref.bib\", style: \"gb-7714-2015-numeric\")\n```\n\n[details=\"ref.bib\"]\n```bib\n@article{example,\n  title = {Title},\n  author = {Author},\n  date = {2024-11-02},\n}\n```\n[/details]\n\n![Output|328x158](upload://yTJYU35zGvdbX3HbKhZrWqaZbih.png)\n\n- Output of typst v0.12: `[1]`.\n- Desired:  `[1]326–329`.\n\nHow to show the page number?\nIf I should modify the CSL, then where can I download the original version? I find nothing in the repos of hayagriva or typst.\n\nThanks in advance.\n\n[details=\"Examples in GB/T 7714—2015 (Chinese)\"]\n[GB/T 7714—2015 Information and documentation—Rules for bibliographic references and citations to information resources](https://lib.tsinghua.edu.cn/wj/GBT7714-2015.pdf) (Chinese)\n\n![§10.1.3|690x386](upload://fh8bBDoWIwKCG7jYuW1iKE81pI9.png)\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 2053.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 5050,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2024-11-02T17:08:02.366Z",
      "updated_at": "2024-11-02T17:08:41.877Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/y.d.x\">@Y.D.X</a> ,</p>\n<p>as you already suspected you have to modify the CSL file. Typst uses the files from the <a href=\"https://github.com/citation-style-language/styles\" rel=\"noopener nofollow ugc\">official CSL repository</a>, in your case that would then be <a href=\"https://github.com/citation-style-language/styles/blob/master/china-national-standard-gb-t-7714-2015-numeric.csl\" rel=\"noopener nofollow ugc\">china-national-standard-gb-t-7714-2015-numeric.csl</a>.</p>\n<p>At the bottom of the file you have to replace the following:</p>\n<details>\n<summary>\nReplace</summary>\n<p>Replace this:</p>\n<pre><code class=\"lang-auto\">&lt;citation collapse=\"citation-number\" after-collapse-delimiter=\",\"&gt;\n    &lt;sort&gt;\n      &lt;key variable=\"citation-number\"/&gt;\n    &lt;/sort&gt;\n    &lt;layout vertical-align=\"sup\" delimiter=\",\" prefix=\"[\" suffix=\"]\"&gt;\n      &lt;text variable=\"citation-number\"/&gt;\n    &lt;/layout&gt;\n  &lt;/citation&gt;\n</code></pre>\n<p>with:</p>\n<pre><code class=\"lang-auto\"> &lt;citation collapse=\"citation-number\" after-collapse-delimiter=\",\"&gt;\n    &lt;sort&gt;\n      &lt;key variable=\"citation-number\"/&gt;\n    &lt;/sort&gt;\n    &lt;layout vertical-align=\"sup\" delimiter=\",\"&gt;\n      &lt;text variable=\"citation-number\" prefix=\"[\" suffix=\"]\"/&gt;\n      &lt;text variable=\"locator\"/&gt;\n    &lt;/layout&gt;\n  &lt;/citation&gt;\n</code></pre>\n</details>\n<p>P.S. thanks for including this working minimal example, made it a lot easier</p>",
      "raw": "Hi @Y.D.X ,\n\nas you already suspected you have to modify the CSL file. Typst uses the files from the [official CSL repository](https://github.com/citation-style-language/styles), in your case that would then be [china-national-standard-gb-t-7714-2015-numeric.csl](https://github.com/citation-style-language/styles/blob/master/china-national-standard-gb-t-7714-2015-numeric.csl).\n\nAt the bottom of the file you have to replace the following:\n\n[details=\"Replace\"]\nReplace this:\n```\n<citation collapse=\"citation-number\" after-collapse-delimiter=\",\">\n    <sort>\n      <key variable=\"citation-number\"/>\n    </sort>\n    <layout vertical-align=\"sup\" delimiter=\",\" prefix=\"[\" suffix=\"]\">\n      <text variable=\"citation-number\"/>\n    </layout>\n  </citation>\n```\nwith:\n```\n <citation collapse=\"citation-number\" after-collapse-delimiter=\",\">\n    <sort>\n      <key variable=\"citation-number\"/>\n    </sort>\n    <layout vertical-align=\"sup\" delimiter=\",\">\n      <text variable=\"citation-number\" prefix=\"[\" suffix=\"]\"/>\n      <text variable=\"locator\"/>\n    </layout>\n  </citation>\n```\n[/details]\n\n\nP.S. thanks for including this working minimal example, made it a lot easier",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 33.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 5051,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-11-02T17:09:12.757Z",
      "updated_at": "2024-11-02T17:09:12.757Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/flokl\">@flokl</a> was a bit faster in typing, but I’m going to reply now nonetheless <img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<hr>\n<p>You would indeed need to modify the CSL file, the original version can be found on the <a href=\"https://github.com/citation-style-language/styles/blob/master/china-national-standard-gb-t-7714-2015-numeric.csl\" rel=\"noopener nofollow ugc\">CSL GitHub repository</a>. However, you need to decide how you want it to look for multiple consecutive citations, as currently they are grouped within a single pair of brackets. This may look weird when used together with page numbers and is probably the reason why they aren’t included by default.</p>\n<p>Anyway, if you still want to continue, open the downloaded CSL file and look for the <code>&lt;citation&gt;</code> part, which will currently look like this:</p>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;citation collapse=\"citation-number\" after-collapse-delimiter=\",\"&gt;\n  &lt;sort&gt;\n    &lt;key variable=\"citation-number\"/&gt;\n  &lt;/sort&gt;\n  &lt;layout vertical-align=\"sup\" delimiter=\",\" prefix=\"[\" suffix=\"]\"&gt;\n    &lt;text variable=\"citation-number\"/&gt;\n  &lt;/layout&gt;\n&lt;/citation&gt;\n</code></pre>\n<p>The layout only contains the citation number, but nothing about the pages. You can put the page numbers in by replacing the text in the layout with the group</p>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;group delimiter=\",\"&gt;\n  &lt;text variable=\"citation-number\"/&gt;\n  &lt;text variable=\"locator\"/&gt;\n&lt;/group&gt;\n</code></pre>\n<p>This may look weird now, as only the numbers are using the typographic superscripts, so you probably want to disable them entirely with</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set super(typographic: false)\n</code></pre>\n<p>To now disable the citation grouping, go back into the CSL file and move the prefix and suffix properties from the citation layout into the group, so that you end up with</p>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;layout vertical-align=\"sup\" delimiter=\",\"&gt;\n  &lt;group delimiter=\",\" prefix=\"[\" suffix=\"]\"&gt;\n    &lt;text variable=\"citation-number\"/&gt;\n    &lt;text variable=\"locator\"/&gt;\n  &lt;/group&gt;\n&lt;/layout&gt;\n</code></pre>\n<p>You can now play around with the delimiters (maybe add spaces, or use semicolons instead of commas) until it looks good to you.</p>",
      "raw": "@flokl was a bit faster in typing, but I'm going to reply now nonetheless :smile: \n\n---\n\nYou would indeed need to modify the CSL file, the original version can be found on the [CSL GitHub repository](https://github.com/citation-style-language/styles/blob/master/china-national-standard-gb-t-7714-2015-numeric.csl). However, you need to decide how you want it to look for multiple consecutive citations, as currently they are grouped within a single pair of brackets. This may look weird when used together with page numbers and is probably the reason why they aren't included by default.\n\nAnyway, if you still want to continue, open the downloaded CSL file and look for the `<citation>` part, which will currently look like this:\n```xml\n<citation collapse=\"citation-number\" after-collapse-delimiter=\",\">\n  <sort>\n    <key variable=\"citation-number\"/>\n  </sort>\n  <layout vertical-align=\"sup\" delimiter=\",\" prefix=\"[\" suffix=\"]\">\n    <text variable=\"citation-number\"/>\n  </layout>\n</citation>\n```\nThe layout only contains the citation number, but nothing about the pages. You can put the page numbers in by replacing the text in the layout with the group\n```xml\n<group delimiter=\",\">\n  <text variable=\"citation-number\"/>\n  <text variable=\"locator\"/>\n</group>\n```\nThis may look weird now, as only the numbers are using the typographic superscripts, so you probably want to disable them entirely with\n```typ\n#set super(typographic: false)\n```\n\nTo now disable the citation grouping, go back into the CSL file and move the prefix and suffix properties from the citation layout into the group, so that you end up with\n```xml\n<layout vertical-align=\"sup\" delimiter=\",\">\n  <group delimiter=\",\" prefix=\"[\" suffix=\"]\">\n    <text variable=\"citation-number\"/>\n    <text variable=\"locator\"/>\n  </group>\n</layout>\n```\nYou can now play around with the delimiters (maybe add spaces, or use semicolons instead of commas) until it looks good to you.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 38,
      "score": 47.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 5053,
      "post_number": 4,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2024-11-02T18:41:24.280Z",
      "updated_at": "2024-11-02T19:07:13.656Z",
      "cooked": "<p>Thanks, both of your replies are helpful! I <s>marked flokl’s as the solution</s>, because Eric’s code generates <code>[1,326–329</code>], which is not exactly desired. (IEEE ≠ GB)</p>\n<p>Additionally, Eric mentioned two important points.</p>\n<ol>\n<li>\n<p><code>#set super(typographic: false)</code> to match the font variants of the citation number and the locator (i.e. page number).</p>\n</li>\n<li>\n<p>Citing consecutively is problematic. I guess the standard prefers <code>A[1]326, BC[2-3]</code> for <code>A@a[326], BC@b@c</code>. I don’t think it’s possible in CSL…</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/4/4bfa4c1ae0dd67f41c32b2ea35dcfc14065f8a06.png\" alt=\"A[1]326, BC[2-3]\" data-base62-sha1=\"aQ84k5USaBzALkt1AWjZCWxx64K\" width=\"243\" height=\"58\"></p>\n</li>\n</ol>\n<p>Therefore, a single CSL might never solve all problems. I end up with the following.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show cite.where(style: auto): it =&gt; {\n  if it.supplement != none {\n    let (key, ..args) = it.fields()\n    cite(it.key, ..args, style: \"a-dedicated-minimal.csl\")\n  } else {\n    it\n  }\n}\n</code></pre>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;style xmlns=\"http://purl.org/net/xbiblio/csl\" version=\"1.0\" class=\"in-text\"&gt;\n  &lt;info&gt;\n    &lt;title&gt;A dedicated minimal style&lt;/title&gt;\n    &lt;id&gt;https://forum.typst.app/t/how-to-cite-with-a-page-number-in-gb-t-7714-2015-style/1501/4&lt;/id&gt;\n  &lt;/info&gt;\n  &lt;citation collapse=\"citation-number\" after-collapse-delimiter=\",\"&gt;\n    &lt;sort&gt;\n      &lt;key variable=\"citation-number\" /&gt;\n    &lt;/sort&gt;\n    &lt;layout vertical-align=\"sup\" delimiter=\",\"&gt;\n      &lt;text variable=\"citation-number\" prefix=\"[\" suffix=\"]\" /&gt;\n      &lt;text variable=\"locator\" /&gt;\n    &lt;/layout&gt;\n  &lt;/citation&gt;\n&lt;/style&gt;\n</code></pre>",
      "raw": "Thanks, both of your replies are helpful! I ~~marked flokl's as the solution~~, because Eric's code generates `[1,326–329`], which is not exactly desired. (IEEE ≠ GB)\n\nAdditionally, Eric mentioned two important points.\n\n1. `#set super(typographic: false)` to match the font variants of the citation number and the locator (i.e. page number).\n\n2. Citing consecutively is problematic. I guess the standard prefers `A[1]326, BC[2-3]` for `A@a[326], BC@b@c`. I don't think it's possible in CSL…\n\n   ![A[1]326, BC[2-3]|487x116, 50%](upload://aQ84k5USaBzALkt1AWjZCWxx64K.png)\n\n\nTherefore, a single CSL might never solve all problems. I end up with the following.\n\n```typst\n#show cite.where(style: auto): it => {\n  if it.supplement != none {\n    let (key, ..args) = it.fields()\n    cite(it.key, ..args, style: \"a-dedicated-minimal.csl\")\n  } else {\n    it\n  }\n}\n```\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<style xmlns=\"http://purl.org/net/xbiblio/csl\" version=\"1.0\" class=\"in-text\">\n  <info>\n    <title>A dedicated minimal style</title>\n    <id>https://forum.typst.app/t/how-to-cite-with-a-page-number-in-gb-t-7714-2015-style/1501/4</id>\n  </info>\n  <citation collapse=\"citation-number\" after-collapse-delimiter=\",\">\n    <sort>\n      <key variable=\"citation-number\" />\n    </sort>\n    <layout vertical-align=\"sup\" delimiter=\",\">\n      <text variable=\"citation-number\" prefix=\"[\" suffix=\"]\" />\n      <text variable=\"locator\" />\n    </layout>\n  </citation>\n</style>\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 31.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 292
    }
  ],
  "scraped_at": "2025-06-10T09:55:37.562321"
}
{
  "topic_metadata": {
    "id": 1502,
    "title": "How to make Cross Hatching sections of a sphere?",
    "slug": "how-to-make-cross-hatching-sections-of-a-sphere",
    "posts_count": 4,
    "created_at": "2024-11-02T15:55:42.429Z",
    "last_posted_at": "2024-11-06T09:58:02.380Z",
    "views": 257,
    "like_count": 9,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "DVDTSB",
    "tags": [
      "cetz"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 801
  },
  "posts": [
    {
      "id": 5045,
      "post_number": 1,
      "username": "DVDTSB",
      "name": "",
      "created_at": "2024-11-02T15:55:42.537Z",
      "updated_at": "2024-11-05T12:59:14.154Z",
      "cooked": "<p>I am trying to recreate:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/4/4af5a7627cc1125da1bc883ad67c862af8450b8a.png\" data-download-href=\"https://forum.typst.app/uploads/default/4af5a7627cc1125da1bc883ad67c862af8450b8a\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/4/4af5a7627cc1125da1bc883ad67c862af8450b8a_2_609x499.png\" alt=\"image\" data-base62-sha1=\"aH7DUA9SKxN8B8orhD5QHmPoeVk\" width=\"609\" height=\"499\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/4/4af5a7627cc1125da1bc883ad67c862af8450b8a_2_609x499.png, https://forum.typst.app/uploads/default/original/2X/4/4af5a7627cc1125da1bc883ad67c862af8450b8a.png 1.5x, https://forum.typst.app/uploads/default/original/2X/4/4af5a7627cc1125da1bc883ad67c862af8450b8a.png 2x\" data-dominant-color=\"F2F2F2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">700×574 101 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>using CETZ.</p>\n<p>Here is my code so far:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/cetz:0.3.1\"\n#cetz.canvas({\n  import cetz.draw: *\n  content=content.with(padding:0.5em)\n\n  set-style(\n    grid:(\n      stroke:gray,\n    ),\n  mark: (\n    fill: black,\n    scale:0.5,\n  )\n  )\n  scale(175%)\n\n  on-xy({\n      arc((2,0), start: 0deg, stop: 180deg, radius:2, stroke:0.5pt)\n    })\n  \n  ortho({\n    on-xz({\n      set-style(\n        line: (stroke:0.5pt )\n      )\n      line((-2,2),(2,2))\n      line((-2,-2),(2,-2))\n\n      for i in range(4){\n        line((-1+i,2.8),(-1+i,-2))\n        content((-1.5+i,2.3),$x$)\n\n        line((-1.7+i,2.3), (-2+i,2.3), mark:(end:\"&gt;\"))\n        line((-1+i,2.3), (-1.3+i,2.3), mark:(start:\"&gt;\"))\n\n        content((-1.5+i,3),numbering(\"I\", i+1))\n        \n      }\n      line((-2,2.8),(-2,-2))\n\n      line((-2.4,2.4),(2.4,-2.4))\n\n      line((-2.4+fsqrt(2),2.4),(1.8+fsqrt(2),-1.8))\n    \n      circle((0,0),radius:2,stroke:0.5pt)\n\n\n      \n    })\n    on-yz({\n    arc((fsqrt(3),0), start: 0deg, stop: 180deg, radius:fsqrt(3))\n    },x:-1)\n\n    on-yz({\n    arc((fsqrt(3),0), start: 0deg, stop: 180deg, radius:fsqrt(3))\n    },x:1)\n    \n    on-yz({\n    arc((2,0), start: 0deg, stop: 180deg, radius:2)\n    })\n\n    rotate(y:-45deg)\n    on-yz({\n    arc((2,0), start: 0deg, stop: 180deg, radius:2)\n    })\n    on-yz({\n    arc((fsqrt(3),0), start: 0deg, stop: 180deg, radius:fsqrt(3))\n    },x:1)\n\n  },  x:40deg, y:34deg)\n\n})]\n</code></pre>\n<p>And the result:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/e/edc46423665fe1c314764cd8458f28881fd20655.png\" alt=\"image\" data-base62-sha1=\"xVnVrXdg4Mz3z1whekfoMbFjIRT\" width=\"619\" height=\"387\"></p>\n<p>I’m totally stuck on how to make the cross-hatching. Any ideas?</p>",
      "raw": "I am trying to recreate:\n\n![image|609x499](upload://aH7DUA9SKxN8B8orhD5QHmPoeVk.png)\n\nusing CETZ.\n\nHere is my code so far:\n\n```typst\n#import \"@preview/cetz:0.3.1\"\n#cetz.canvas({\n  import cetz.draw: *\n  content=content.with(padding:0.5em)\n\n  set-style(\n    grid:(\n      stroke:gray,\n    ),\n  mark: (\n    fill: black,\n    scale:0.5,\n  )\n  )\n  scale(175%)\n\n  on-xy({\n      arc((2,0), start: 0deg, stop: 180deg, radius:2, stroke:0.5pt)\n    })\n  \n  ortho({\n    on-xz({\n      set-style(\n        line: (stroke:0.5pt )\n      )\n      line((-2,2),(2,2))\n      line((-2,-2),(2,-2))\n\n      for i in range(4){\n        line((-1+i,2.8),(-1+i,-2))\n        content((-1.5+i,2.3),$x$)\n\n        line((-1.7+i,2.3), (-2+i,2.3), mark:(end:\">\"))\n        line((-1+i,2.3), (-1.3+i,2.3), mark:(start:\">\"))\n\n        content((-1.5+i,3),numbering(\"I\", i+1))\n        \n      }\n      line((-2,2.8),(-2,-2))\n\n      line((-2.4,2.4),(2.4,-2.4))\n\n      line((-2.4+fsqrt(2),2.4),(1.8+fsqrt(2),-1.8))\n    \n      circle((0,0),radius:2,stroke:0.5pt)\n\n\n      \n    })\n    on-yz({\n    arc((fsqrt(3),0), start: 0deg, stop: 180deg, radius:fsqrt(3))\n    },x:-1)\n\n    on-yz({\n    arc((fsqrt(3),0), start: 0deg, stop: 180deg, radius:fsqrt(3))\n    },x:1)\n    \n    on-yz({\n    arc((2,0), start: 0deg, stop: 180deg, radius:2)\n    })\n\n    rotate(y:-45deg)\n    on-yz({\n    arc((2,0), start: 0deg, stop: 180deg, radius:2)\n    })\n    on-yz({\n    arc((fsqrt(3),0), start: 0deg, stop: 180deg, radius:fsqrt(3))\n    },x:1)\n\n  },  x:40deg, y:34deg)\n\n})]\n```\nAnd the result:\n![image|619x387](upload://xVnVrXdg4Mz3z1whekfoMbFjIRT.png)\n\nI'm totally stuck on how to make the cross-hatching. Any ideas?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 48,
      "score": 919.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 467
    },
    {
      "id": 5047,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-11-02T16:19:53.478Z",
      "updated_at": "2024-11-02T16:20:01.058Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/dvdtsb\">@DVDTSB</a>, could you maybe try to revise your post’s title to be a complete question as per the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a>:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>We hope by adhering to this, we make the information in this forum easy to find in the future.</p>\n<hr>\n<p>Also, while I have no help to offer for this problem, let me say: this is <em>awesome</em>! I assume <code>fsqrt</code> stands for “fast square root”? It’s not part of your example, but adding <code>#let fsqrt = calc.sqrt</code> still works well. (And there’s an extra <code>]</code> in the end, if you care enough to clean it up.)</p>\n<p>Also also, for anyone who wants to play with this like me: you can get rudimentary animation by using <code>\"\".len() * 5deg</code> as the <code>x</code> and <code>y</code> angles, and then just adding characters to the strings (Laurenz mentioned that trick at some point somewhere.)</p>",
      "raw": "Hi @DVDTSB, could you maybe try to revise your post’s title to be a complete question as per the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11):\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nWe hope by adhering to this, we make the information in this forum easy to find in the future.\n\n---\n\nAlso, while I have no help to offer for this problem, let me say: this is _awesome_! I assume `fsqrt` stands for \"fast square root\"? It's not part of your example, but adding `#let fsqrt = calc.sqrt` still works well. (And there's an extra `]` in the end, if you care enough to clean it up.)\n\nAlso also, for anyone who wants to play with this like me: you can get rudimentary animation by using `\"\".len() * 5deg` as the `x` and `y` angles, and then just adding characters to the strings (Laurenz mentioned that trick at some point somewhere.)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 94.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 5048,
      "post_number": 3,
      "username": "DVDTSB",
      "name": "",
      "created_at": "2024-11-02T16:50:14.875Z",
      "updated_at": "2024-11-02T16:50:14.875Z",
      "cooked": "<p>In the end i managed to solve it by myself:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/cetz:0.3.1\"\n#let fsqrt=calc.sqrt\n#cetz.canvas({\n  import cetz.draw: *\n  content=content.with(padding:0.5em)\n\n  set-style(\n    grid:(\n      stroke:gray,\n    ),\n  mark: (\n    fill: black,\n    scale:0.5,\n  )\n  )\n  scale(175%)\n\n  on-xy({\n      arc((2,0), start: 0deg, stop: 180deg, radius:2, stroke:0.5pt)\n    })\n\n  let det=80\n    \n  ortho({\n    on-xz({\n      set-style(\n        line: (stroke:0.5pt )\n      )\n      line((-2,2),(2,2))\n      line((-2,-2),(2,-2))\n\n      for i in range(4){\n        line((-1+i,2.8),(-1+i,-2))\n        content((-1.5+i,2.3),$x$)\n\n        line((-1.7+i,2.3), (-2+i,2.3), mark:(end:\"&gt;\"))\n        line((-1+i,2.3), (-1.3+i,2.3), mark:(start:\"&gt;\"))\n\n        content((-1.5+i,3),numbering(\"I\", i+1))\n        \n      }\n      line((-2,2.8),(-2,-2))\n\n      line((-2.4,2.4),(2.4,-2.4))\n\n      line((-2.4+fsqrt(2),2.4),(1.8+fsqrt(2),-1.8))\n    \n      circle((0,0),radius:2,stroke:0.5pt)\n\n\n        \n      for i in range(det){\n        let depth=2/det*i\n        let start=-calc.min(1,fsqrt(4-depth*depth))\n        let end=calc.min(0, -depth+fsqrt(2))\n        start=calc.max(start,-depth)\n        if start &lt; end{\n          line((start,depth),(end,depth))\n        }\n      }\n\n      \n    })\n    on-yz({\n    arc((fsqrt(3),0), start: 0deg, stop: 180deg, radius:fsqrt(3))\n    },x:-1)\n\n    on-yz({\n    arc((fsqrt(3),0), start: 0deg, stop: 180deg, radius:fsqrt(3))\n    },x:1)\n    \n    on-yz({\n    arc((2,0), start: 0deg, stop: 180deg, radius:2)\n    })\n\n\n    \n    rotate(y:-90deg)\n    \n    for i in range(det){\n      let depth=2/det*i\n\n      on-yz({\n\n        let r=fsqrt(4-depth*depth)\n\n        let start=-calc.min(1,r)\n        let end=calc.min(0, -depth+fsqrt(2))\n        start=calc.max(start,-depth)\n        \n        if start &lt; end{\n          arc((-start,fsqrt(r*r - start*start)), start: calc.acos(-start/r), stop: calc.acos(-end/r), radius:r, stroke:0.5pt)\n        }\n          \n        \n      },x:depth)\n    }\n\n    rotate(y:45deg)\n    on-yz({\n    arc((2,0), start: 0deg, stop: 180deg, radius:2)\n    })\n    on-yz({\n    arc((fsqrt(3),0), start: 0deg, stop: 180deg, radius:fsqrt(3))\n    },x:1)\n\n  },  x:40deg, y:34deg)\n\n})\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/4/47011fde852fbdb57ae22bf49ff6b17a00e80829.png\" data-download-href=\"https://forum.typst.app/uploads/default/47011fde852fbdb57ae22bf49ff6b17a00e80829\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/4/47011fde852fbdb57ae22bf49ff6b17a00e80829_2_690x434.png\" alt=\"image\" data-base62-sha1=\"a88jc8qY5C7prIYqZQhMg2tyo1b\" width=\"690\" height=\"434\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/4/47011fde852fbdb57ae22bf49ff6b17a00e80829_2_690x434.png, https://forum.typst.app/uploads/default/original/2X/4/47011fde852fbdb57ae22bf49ff6b17a00e80829.png 1.5x, https://forum.typst.app/uploads/default/original/2X/4/47011fde852fbdb57ae22bf49ff6b17a00e80829.png 2x\" data-dominant-color=\"ECECEC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">782×492 93.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p><a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a>, thanks, i’ll update it asap.</p>",
      "raw": "In the end i managed to solve it by myself:\n\n\n```typst\n#import \"@preview/cetz:0.3.1\"\n#let fsqrt=calc.sqrt\n#cetz.canvas({\n  import cetz.draw: *\n  content=content.with(padding:0.5em)\n\n  set-style(\n    grid:(\n      stroke:gray,\n    ),\n  mark: (\n    fill: black,\n    scale:0.5,\n  )\n  )\n  scale(175%)\n\n  on-xy({\n      arc((2,0), start: 0deg, stop: 180deg, radius:2, stroke:0.5pt)\n    })\n\n  let det=80\n    \n  ortho({\n    on-xz({\n      set-style(\n        line: (stroke:0.5pt )\n      )\n      line((-2,2),(2,2))\n      line((-2,-2),(2,-2))\n\n      for i in range(4){\n        line((-1+i,2.8),(-1+i,-2))\n        content((-1.5+i,2.3),$x$)\n\n        line((-1.7+i,2.3), (-2+i,2.3), mark:(end:\">\"))\n        line((-1+i,2.3), (-1.3+i,2.3), mark:(start:\">\"))\n\n        content((-1.5+i,3),numbering(\"I\", i+1))\n        \n      }\n      line((-2,2.8),(-2,-2))\n\n      line((-2.4,2.4),(2.4,-2.4))\n\n      line((-2.4+fsqrt(2),2.4),(1.8+fsqrt(2),-1.8))\n    \n      circle((0,0),radius:2,stroke:0.5pt)\n\n\n        \n      for i in range(det){\n        let depth=2/det*i\n        let start=-calc.min(1,fsqrt(4-depth*depth))\n        let end=calc.min(0, -depth+fsqrt(2))\n        start=calc.max(start,-depth)\n        if start < end{\n          line((start,depth),(end,depth))\n        }\n      }\n\n      \n    })\n    on-yz({\n    arc((fsqrt(3),0), start: 0deg, stop: 180deg, radius:fsqrt(3))\n    },x:-1)\n\n    on-yz({\n    arc((fsqrt(3),0), start: 0deg, stop: 180deg, radius:fsqrt(3))\n    },x:1)\n    \n    on-yz({\n    arc((2,0), start: 0deg, stop: 180deg, radius:2)\n    })\n\n\n    \n    rotate(y:-90deg)\n    \n    for i in range(det){\n      let depth=2/det*i\n\n      on-yz({\n\n        let r=fsqrt(4-depth*depth)\n\n        let start=-calc.min(1,r)\n        let end=calc.min(0, -depth+fsqrt(2))\n        start=calc.max(start,-depth)\n        \n        if start < end{\n          arc((-start,fsqrt(r*r - start*start)), start: calc.acos(-start/r), stop: calc.acos(-end/r), radius:r, stroke:0.5pt)\n        }\n          \n        \n      },x:depth)\n    }\n\n    rotate(y:45deg)\n    on-yz({\n    arc((2,0), start: 0deg, stop: 180deg, radius:2)\n    })\n    on-yz({\n    arc((fsqrt(3),0), start: 0deg, stop: 180deg, radius:fsqrt(3))\n    },x:1)\n\n  },  x:40deg, y:34deg)\n\n})\n```\n\n![image|690x434](upload://a88jc8qY5C7prIYqZQhMg2tyo1b.png)\n\n\n@SillyFreak, thanks, i'll update it asap.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 6,
      "reads": 46,
      "score": 164.2,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 467
    },
    {
      "id": 5205,
      "post_number": 4,
      "username": "M4R1S",
      "name": "Maris Baier",
      "created_at": "2024-11-06T09:58:02.380Z",
      "updated_at": "2024-11-06T09:58:02.380Z",
      "cooked": "<p>That. is. beautiful. Cetz ist the best!</p>",
      "raw": "That. is. beautiful. Cetz ist the best!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 20.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 643
    }
  ],
  "scraped_at": "2025-06-10T09:55:36.842872"
}
{
  "topic_metadata": {
    "id": 1506,
    "title": "How to remove numbering from outline?",
    "slug": "how-to-remove-numbering-from-outline",
    "posts_count": 3,
    "created_at": "2024-11-02T23:39:08.444Z",
    "last_posted_at": "2024-11-03T07:22:24.833Z",
    "views": 713,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sjfhsjfh",
    "tags": [
      "outline"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 645
  },
  "posts": [
    {
      "id": 5056,
      "post_number": 1,
      "username": "Akshay_Raj_Gollahall",
      "name": "Akshay Raj Gollahalli",
      "created_at": "2024-11-02T23:39:08.594Z",
      "updated_at": "2024-11-02T23:39:08.594Z",
      "cooked": "<p>I am trying to remove the Appendix numbering at the starting in the outline, and here is what I have</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry.where(level: 1): it =&gt; {\n  v(12pt, weak: true)\n  strong(it)\n}\n\n#outline(title: [Table of Contents #v(1.5em)], depth: 4, indent: auto)\n\n#show heading.where(level: 1): it =&gt; {\n\n  if it.at(\"label\", default: none) != &lt;bibliography&gt; {\n    counter(heading).display(it =&gt; text(1em, weight: 700, block([Chapter #it])))\n  }\n\n  text(1em, weight: 700, block([#it.body]))\n}\n\n#set heading(numbering: \"1.1\")\n\n= Introduction\n\n== Introduction\n\nThis is the introduction.\n\n= Background\n\n== Background\n\nThis is the background.\n\n#show heading.where(level: 1): it =&gt; {\n    // Create the heading numbering.\n    let number = if it.numbering != none {\n      counter(heading).display(it.numbering)\n      h(7pt, weak: true)\n    }\n    text(block([Appendix #number]))\n  }\n\n#set heading(numbering: \"A.1\")\n\n= Apendix A: Code Snippets\n\n== Code Snippet 1: some Code\n\n/```py\nprint(\"Hello World\")\n/```\n\n= Appendix B: Additional Information\n\n== Additional Information 1: some Information\n\nThis is some additional information.\n</code></pre>\n<p>Which renders as</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/3/32ca980b778480b3a868f2616011eb845516be6c.png\" data-download-href=\"https://forum.typst.app/uploads/default/32ca980b778480b3a868f2616011eb845516be6c\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/3/32ca980b778480b3a868f2616011eb845516be6c_2_451x499.png\" alt=\"image\" data-base62-sha1=\"7fjVB5RWSmP9nxtAiDA9KhvkAnq\" width=\"451\" height=\"499\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/3/32ca980b778480b3a868f2616011eb845516be6c_2_451x499.png, https://forum.typst.app/uploads/default/optimized/2X/3/32ca980b778480b3a868f2616011eb845516be6c_2_676x748.png 1.5x, https://forum.typst.app/uploads/default/original/2X/3/32ca980b778480b3a868f2616011eb845516be6c.png 2x\" data-dominant-color=\"F8F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">749×829 86.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>How should I change the <code>C Appendix A: Code Snippets</code> to <code>Appendix A: Code Snippets</code>? I want to remove the appendix numbering in the outline.</p>",
      "raw": "I am trying to remove the Appendix numbering at the starting in the outline, and here is what I have\n\n```typ\n#show outline.entry.where(level: 1): it => {\n  v(12pt, weak: true)\n  strong(it)\n}\n\n#outline(title: [Table of Contents #v(1.5em)], depth: 4, indent: auto)\n\n#show heading.where(level: 1): it => {\n\n  if it.at(\"label\", default: none) != <bibliography> {\n    counter(heading).display(it => text(1em, weight: 700, block([Chapter #it])))\n  }\n\n  text(1em, weight: 700, block([#it.body]))\n}\n\n#set heading(numbering: \"1.1\")\n\n= Introduction\n\n== Introduction\n\nThis is the introduction.\n\n= Background\n\n== Background\n\nThis is the background.\n\n#show heading.where(level: 1): it => {\n    // Create the heading numbering.\n    let number = if it.numbering != none {\n      counter(heading).display(it.numbering)\n      h(7pt, weak: true)\n    }\n    text(block([Appendix #number]))\n  }\n\n#set heading(numbering: \"A.1\")\n\n= Apendix A: Code Snippets\n\n== Code Snippet 1: some Code\n\n/```py\nprint(\"Hello World\")\n/```\n\n= Appendix B: Additional Information\n\n== Additional Information 1: some Information\n\nThis is some additional information.\n```\n\nWhich renders as\n\n![image|451x499](upload://7fjVB5RWSmP9nxtAiDA9KhvkAnq.png)\n\nHow should I change the `C Appendix A: Code Snippets` to `Appendix A: Code Snippets`? I want to remove the appendix numbering in the outline.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 58,
      "score": 4006.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 106
    },
    {
      "id": 5059,
      "post_number": 2,
      "username": "sjfhsjfh",
      "name": "sjfhsjfh",
      "created_at": "2024-11-03T05:07:13.395Z",
      "updated_at": "2024-11-03T07:20:52.183Z",
      "cooked": "<h2><a name=\"p-5059-problems-1\" class=\"anchor\" href=\"#p-5059-problems-1\"></a>Problems</h2>\n<p>There are several problems in the code you provided:</p>\n<ol>\n<li>The numbering function is ambigous: The <code>level: 1</code> numbering is set to <code>\"A.1.\"</code> but it seems that <code>\"Chapter 1.\"</code> or <code>\"Appendix\"</code> is expected here.</li>\n<li>The numbering part <code>Appendix A</code> should not appear in the title content</li>\n</ol>\n<h2><a name=\"p-5059-solutions-2\" class=\"anchor\" href=\"#p-5059-solutions-2\"></a>Solutions</h2>\n<h3><a name=\"p-5059-step-1-setup-heading-numbering-properly-3\" class=\"anchor\" href=\"#p-5059-step-1-setup-heading-numbering-properly-3\"></a>Step 1. Setup heading numbering properly</h3>\n<p>First of all, I recommend using the <a href=\"https://typst.app/universe/package/numbly\"><code>numbly</code></a> package to construct numbering functions in a convenient way. Here we can still construct it manually:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: (..ns) =&gt; {\n  let ns = ns.pos()\n  if ns.len() == 1 {\n    return \"Chapter \" + numbering(\"1.\", ..ns)\n  }\n  return numbering(\"1.\", ..ns)\n})\n</code></pre>\n<p>Put this code at the begining, and replace <code>\"Chapter \" + numbering(\"1.\", ..ns)</code> with <code>\"Appendix \" + numbering(\"A.\", ..ns)</code> and <code>return numbering(\"1.\", ..ns) </code> with <code>return numbering(\"A.1.\", ..ns) </code> and place it before the appendix. Then remove all the former <code>#set heading(numbering: \"x.x\")</code>. Now you can remove the <code>Appendix A</code> from your appendix heading.</p>\n<h3><a name=\"p-5059-step-2-fix-the-counter-4\" class=\"anchor\" href=\"#p-5059-step-2-fix-the-counter-4\"></a>Step 2. Fix the counter</h3>\n<p>You will notice that the Appendix now starts from <code>C</code> in the example document. You can reset the heading counter by adding the following row before the appendix:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#counter(heading).update(0)\n</code></pre>\n<h3><a name=\"p-5059-step-3-misc-5\" class=\"anchor\" href=\"#p-5059-step-3-misc-5\"></a>Step 3. Misc.</h3>\n<p>The custom heading <code>counter(heading).display(it =&gt; text(1em, weight: 700, block([Chapter #it]))) </code> can be replaved with a simple <code>counter(heading).display()</code>. If the font weight or size setting is not working properly, I recommend using <code>set text</code> instead of <code>text(...)</code></p>\n<p>Setting <code>outline.indent</code> to <code>auto</code> would make the next level heading align to the end of the numbering, which might be a bit annoying, so you may set it to <code>1em</code> or some other value you like.</p>\n<h3><a name=\"p-5059-modified-example-6\" class=\"anchor\" href=\"#p-5059-modified-example-6\"></a>Modified Example</h3>\n<p>In case that you wish to use it just by doing copy-paste <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry.where(level: 1): it =&gt; {\n  v(12pt, weak: true)\n  strong(it)\n}\n\n#outline(title: [Table of Contents #v(1.5em)], depth: 4, indent: 1em)\n\n\n#show heading.where(level: 1): it =&gt; {\n\n  if it.at(\"label\", default: none) != &lt;bibliography&gt; {\n    context counter(heading).display()\n    h(7pt, weak: true)\n  }\n\n  text(1em, weight: 700, block([#it.body]))\n}\n\n#set heading(numbering: (..ns) =&gt; {\n  let ns = ns.pos()\n  if ns.len() == 1 {\n    return \"Chapter \" + numbering(\"A.\", ..ns)\n  }\n  return numbering(\"1.\", ..ns)\n})\n\n= Introduction\n\n== Introduction\n\nThis is the introduction.\n\n= Background\n\n== Background\n\nThis is the background.\n\n#counter(heading).update(0)\n#set heading(numbering: (..ns) =&gt; {\n  let ns = ns.pos()\n  if ns.len() == 1 {\n    return \"Appendix \" + numbering(\"A.\", ..ns)\n  }\n  return numbering(\"A.1.\", ..ns)\n})\n\n= Code Snippets\n\n== Code Snippet 1: some Code\n\n```py\nprint(\"Hello World\")\n```\n\n= Additional Information\n\n== Additional Information 1: some Information\n\nThis is some additional information.\n</code></pre>",
      "raw": "## Problems\n\nThere are several problems in the code you provided:\n\n1. The numbering function is ambigous: The `level: 1` numbering is set to `\"A.1.\"` but it seems that `\"Chapter 1.\"` or `\"Appendix\"` is expected here.\n2. The numbering part `Appendix A` should not appear in the title content\n\n## Solutions\n\n### Step 1. Setup heading numbering properly\n\nFirst of all, I recommend using the [`numbly`](https://typst.app/universe/package/numbly) package to construct numbering functions in a convenient way. Here we can still construct it manually:\n\n```typ\n#set heading(numbering: (..ns) => {\n  let ns = ns.pos()\n  if ns.len() == 1 {\n    return \"Chapter \" + numbering(\"1.\", ..ns)\n  }\n  return numbering(\"1.\", ..ns)\n})\n```\n\nPut this code at the begining, and replace `\"Chapter \" + numbering(\"1.\", ..ns)` with `\"Appendix \" + numbering(\"A.\", ..ns)` and `return numbering(\"1.\", ..ns)\n` with `return numbering(\"A.1.\", ..ns)\n` and place it before the appendix. Then remove all the former `#set heading(numbering: \"x.x\")`. Now you can remove the `Appendix A` from your appendix heading.\n\n### Step 2. Fix the counter\n\nYou will notice that the Appendix now starts from `C` in the example document. You can reset the heading counter by adding the following row before the appendix:\n\n```typ\n#counter(heading).update(0)\n```\n\n### Step 3. Misc.\n\nThe custom heading `counter(heading).display(it => text(1em, weight: 700, block([Chapter #it])))\n` can be replaved with a simple `counter(heading).display()`. If the font weight or size setting is not working properly, I recommend using `set text` instead of `text(...)`\n\nSetting `outline.indent` to `auto` would make the next level heading align to the end of the numbering, which might be a bit annoying, so you may set it to `1em` or some other value you like.\n\n### Modified Example\n\nIn case that you wish to use it just by doing copy-paste :slight_smile: \n\n````typ\n#show outline.entry.where(level: 1): it => {\n  v(12pt, weak: true)\n  strong(it)\n}\n\n#outline(title: [Table of Contents #v(1.5em)], depth: 4, indent: 1em)\n\n\n#show heading.where(level: 1): it => {\n\n  if it.at(\"label\", default: none) != <bibliography> {\n    context counter(heading).display()\n    h(7pt, weak: true)\n  }\n\n  text(1em, weight: 700, block([#it.body]))\n}\n\n#set heading(numbering: (..ns) => {\n  let ns = ns.pos()\n  if ns.len() == 1 {\n    return \"Chapter \" + numbering(\"A.\", ..ns)\n  }\n  return numbering(\"1.\", ..ns)\n})\n\n= Introduction\n\n== Introduction\n\nThis is the introduction.\n\n= Background\n\n== Background\n\nThis is the background.\n\n#counter(heading).update(0)\n#set heading(numbering: (..ns) => {\n  let ns = ns.pos()\n  if ns.len() == 1 {\n    return \"Appendix \" + numbering(\"A.\", ..ns)\n  }\n  return numbering(\"A.1.\", ..ns)\n})\n\n= Code Snippets\n\n== Code Snippet 1: some Code\n\n```py\nprint(\"Hello World\")\n```\n\n= Additional Information\n\n== Additional Information 1: some Information\n\nThis is some additional information.\n````",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 99.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 120
    },
    {
      "id": 5060,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-11-03T07:22:24.833Z",
      "updated_at": "2024-11-03T07:22:24.833Z",
      "cooked": "<p>I’ve gone ahead and fixed the formatting you mentioned in your edit, you can see how I’m the edit history :)</p>",
      "raw": "I've gone ahead and fixed the formatting you mentioned in your edit, you can see how I'm the edit history :)",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 8.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:55:36.113084"
}
{
  "topic_metadata": {
    "id": 1510,
    "title": "Which fonts are included in the compiler?",
    "slug": "which-fonts-are-included-in-the-compiler",
    "posts_count": 6,
    "created_at": "2024-11-03T14:40:34.104Z",
    "last_posted_at": "2024-11-03T18:47:58.021Z",
    "views": 4486,
    "like_count": 4,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "SebastianJL",
    "tags": [
      "fonts"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 359
  },
  "posts": [
    {
      "id": 5065,
      "post_number": 1,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2024-11-03T14:40:34.243Z",
      "updated_at": "2024-11-03T14:40:34.243Z",
      "cooked": "<p>Does a list exist with all fonts included in the Typst compiler? I would like to know which fonts are always available, both in the Web App and locally (through the CLI).</p>",
      "raw": "Does a list exist with all fonts included in the Typst compiler? I would like to know which fonts are always available, both in the Web App and locally (through the CLI).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 154,
      "score": 24170.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 5066,
      "post_number": 2,
      "username": "SebastianJL",
      "name": "Johannes Lade",
      "created_at": "2024-11-03T14:49:19.318Z",
      "updated_at": "2024-11-03T14:52:25.539Z",
      "cooked": "<p>In the online editor there seems to be autocompletion for that</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/c/c106d926b3a1cd0d2d7c6bcf4d99394686fa70ea.png\" data-download-href=\"https://forum.typst.app/uploads/default/c106d926b3a1cd0d2d7c6bcf4d99394686fa70ea\" title=\"Screenshot_20241103-154754\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/c/c106d926b3a1cd0d2d7c6bcf4d99394686fa70ea_2_250x500.png\" alt=\"Screenshot_20241103-154754\" data-base62-sha1=\"rxAP5Pzepqk22rT9lWi37VciSAa\" width=\"250\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/c/c106d926b3a1cd0d2d7c6bcf4d99394686fa70ea_2_250x500.png, https://forum.typst.app/uploads/default/optimized/2X/c/c106d926b3a1cd0d2d7c6bcf4d99394686fa70ea_2_375x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/c/c106d926b3a1cd0d2d7c6bcf4d99394686fa70ea_2_500x1000.png 2x\" data-dominant-color=\"8D8F91\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot_20241103-154754</span><span class=\"informations\">1080×2160 169 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>And probably with tinymist (the language server for vs code and other editors) as well.</p>",
      "raw": "In the online editor there seems to be autocompletion for that\n\n![Screenshot_20241103-154754|250x500](upload://rxAP5Pzepqk22rT9lWi37VciSAa.png)\n\nAnd probably with tinymist (the language server for vs code and other editors) as well.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 154,
      "score": 560.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 591
    },
    {
      "id": 5067,
      "post_number": 3,
      "username": "SebastianJL",
      "name": "Johannes Lade",
      "created_at": "2024-11-03T14:51:07.490Z",
      "updated_at": "2024-11-03T14:55:44.419Z",
      "cooked": "<p>Also this section in the docs for the <a href=\"https://typst.app/docs/reference/text/text/#parameters-font\">font parameter of the text function</a></p>\n<blockquote>\n<h3><code>font</code></h3>\n<p><a href=\"https://typst.app/docs/reference/foundations/str/\">str</a> <small>or</small> <a href=\"https://typst.app/docs/reference/foundations/array/\">array</a></p>\n<p><small>Settable</small></p>\n<p>A font family name or priority list of font family names.</p>\n<p>When processing text, Typst tries all specified font families in order until it finds a font that has the necessary glyphs. In the example below, the font <code>Inria Serif</code> is preferred, but since it does not contain Arabic glyphs, the arabic text uses <code>Noto Sans Arabic</code> instead.</p>\n<p>The collection of available fonts differs by platform:</p>\n<ul>\n<li>In the web app, you can see the list of available fonts by clicking on the “Ag” button. You can provide additional fonts by uploading <code>.ttf</code> or <code>.otf</code> files into your project. They will be discovered automatically. The priority is: project fonts &gt; server fonts.</li>\n<li>Locally, Typst uses your installed system fonts or embedded fonts in the CLI, which are <code>Libertinus Serif</code>, <code>New Computer Modern</code>, <code>New Computer Modern Math</code>, and <code>DejaVu Sans Mono</code>. In addition, you can use the <code>--font-path</code> argument or <code>TYPST_FONT_PATHS</code> environment variable to add directories that should be scanned for fonts. The priority is: <code>--font-paths</code> &gt; system fonts &gt; embedded fonts. Run <code>typst fonts</code> to see the fonts that Typst has discovered on your system. Note that you can pass the <code>--ignore-system-fonts</code> parameter to the CLI to ensure Typst won’t search for system fonts.</li>\n</ul>\n<p>Default: <code>\"libertinus serif\"</code></p>\n</blockquote>",
      "raw": "Also this section in the docs for the [font parameter of the text function](https://typst.app/docs/reference/text/text/#parameters-font)\n\n> ### `font`\n> \n> [str](https://typst.app/docs/reference/foundations/str/) <small>or</small> [array](https://typst.app/docs/reference/foundations/array/)\n> \n> <small>Settable</small>\n> \n> A font family name or priority list of font family names.\n> \n> When processing text, Typst tries all specified font families in order until it finds a font that has the necessary glyphs. In the example below, the font `Inria Serif` is preferred, but since it does not contain Arabic glyphs, the arabic text uses `Noto Sans Arabic` instead.\n> \n> The collection of available fonts differs by platform:\n> \n> * In the web app, you can see the list of available fonts by clicking on the \"Ag\" button. You can provide additional fonts by uploading `.ttf` or `.otf` files into your project. They will be discovered automatically. The priority is: project fonts > server fonts.\n> * Locally, Typst uses your installed system fonts or embedded fonts in the CLI, which are `Libertinus Serif`, `New Computer Modern`, `New Computer Modern Math`, and `DejaVu Sans Mono`. In addition, you can use the `--font-path` argument or `TYPST_FONT_PATHS` environment variable to add directories that should be scanned for fonts. The priority is: `--font-paths` > system fonts > embedded fonts. Run `typst fonts` to see the fonts that Typst has discovered on your system. Note that you can pass the `--ignore-system-fonts` parameter to the CLI to ensure Typst won't search for system fonts.\n> \n> Default: `\"libertinus serif\"`",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 144,
      "score": 403.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 591
    },
    {
      "id": 5068,
      "post_number": 4,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2024-11-03T15:17:10.447Z",
      "updated_at": "2024-11-03T15:17:10.447Z",
      "cooked": "<p>Thank you!</p>\n<p>In both the web app editor and with tinymist, many more fonts are shown which are available on the system. But your second post answered my question!</p>",
      "raw": "Thank you!\n\nIn both the web app editor and with tinymist, many more fonts are shown which are available on the system. But your second post answered my question!",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 132,
      "score": 61.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    },
    {
      "id": 5073,
      "post_number": 5,
      "username": "SebastianJL",
      "name": "Johannes Lade",
      "created_at": "2024-11-03T17:33:56.221Z",
      "updated_at": "2024-11-03T17:33:56.221Z",
      "cooked": "<p>Can you maybe mark it as the answer?</p>",
      "raw": "Can you maybe mark it as the answer?",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 120,
      "score": 49.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 591
    },
    {
      "id": 5076,
      "post_number": 6,
      "username": "Mc-Zen",
      "name": "Mc-Zen",
      "created_at": "2024-11-03T18:47:58.021Z",
      "updated_at": "2024-11-03T18:47:58.021Z",
      "cooked": "<p>I already did actually <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "I already did actually 😅",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 112,
      "score": 77.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 9
    }
  ],
  "scraped_at": "2025-06-10T09:55:35.402577"
}
{
  "topic_metadata": {
    "id": 1528,
    "title": "How do I create an inline heading without first-line-indent?",
    "slug": "how-do-i-create-an-inline-heading-without-first-line-indent",
    "posts_count": 7,
    "created_at": "2024-11-04T10:24:45.976Z",
    "last_posted_at": "2025-04-16T17:46:50.770Z",
    "views": 238,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "ssotoen",
    "tags": [],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 380
  },
  "posts": [
    {
      "id": 5101,
      "post_number": 1,
      "username": "cgahr",
      "name": "Constantin Gahr",
      "created_at": "2024-11-04T10:24:46.082Z",
      "updated_at": "2025-04-18T19:23:11.229Z",
      "cooked": "<p>I want to create an inline heading, similar to the <code>\\paragraph*{}</code> command in latex.</p>\n<p>The proposed solution I found <a href=\"https://forum.typst.app/t/inline-heading-does-not-work-with-additional-linebreak/1067\">here</a></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 4): it =&gt; block(strong(it.body) + [ ])\n</code></pre>\n<p>works somewhat well. However, I use</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set par(first-line-indent: 1.8em)\n</code></pre>\n<p>to indent the first line of a paragraph. Using the above solution, the inline heading is also indented, which I do not want. Instead, I want by formatting to be this:</p>\n<pre data-code-wrap=\"txt\"><code class=\"lang-txt\">INLINE HEADING some text  for this a heading. And\nsome more text.\n\n   A new paragraph under this heading. Observe that it \nis indented, in contrast the the heading!\n</code></pre>\n<p>How do I do this?</p>",
      "raw": "I want to create an inline heading, similar to the `\\paragraph*{}` command in latex.\n\nThe proposed solution I found [here](https://forum.typst.app/t/inline-heading-does-not-work-with-additional-linebreak/1067)\n```typ\n#show heading.where(level: 4): it => block(strong(it.body) + [ ])\n```\nworks somewhat well. However, I use \n```typ\n#set par(first-line-indent: 1.8em)\n```\nto indent the first line of a paragraph. Using the above solution, the inline heading is also indented, which I do not want. Instead, I want by formatting to be this:\n```txt\nINLINE HEADING some text  for this a heading. And\nsome more text.\n\n   A new paragraph under this heading. Observe that it \nis indented, in contrast the the heading!\n```\nHow do I do this?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 42,
      "score": 823.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 740
    },
    {
      "id": 5110,
      "post_number": 2,
      "username": "ssotoen",
      "name": "",
      "created_at": "2024-11-04T12:03:16.370Z",
      "updated_at": "2024-11-04T12:03:37.452Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 4): it =&gt; {\n  h(-1.8em)\n  box(strong(it.body))\n}\n</code></pre>",
      "raw": "```typ\n#show heading.where(level: 4): it => {\n  h(-1.8em)\n  box(strong(it.body))\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 97.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 331
    },
    {
      "id": 5114,
      "post_number": 3,
      "username": "cgahr",
      "name": "Constantin Gahr",
      "created_at": "2024-11-04T12:57:37.595Z",
      "updated_at": "2025-04-18T19:23:30.950Z",
      "cooked": "<p>I like it, thank you!</p>\n<p>However, this can fail after a list or an equation:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">This is a list:\n- arst\n- arst\n\n==== This is indented beyond the boundary of the page\n\n$\n 1 = 0\n$\n\n==== This is also indented too much\n</code></pre>\n<p>How do I fix this?</p>",
      "raw": "I like it, thank you!\n\nHowever, this can fail after a list or an equation:\n```typ\nThis is a list:\n- arst\n- arst\n\n==== This is indented beyond the boundary of the page\n\n$\n 1 = 0\n$\n\n==== This is also indented too much\n```\nHow do I fix this?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 21.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 740
    },
    {
      "id": 5116,
      "post_number": 4,
      "username": "ssotoen",
      "name": "",
      "created_at": "2024-11-04T13:18:04.893Z",
      "updated_at": "2024-11-04T13:18:04.893Z",
      "cooked": "<p>Unfortunately Typst’s paragraph handling isn’t very consistent so you can’t do this automatically. The easiest way I see would be to define a command that adds the appropriate spacing and call it before every incorrectly indented heading:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let indent = h(1.8em)\n\nThis is a list:\n- arst\n- arst\n\n#indent\n==== This is indented correctly\n\n$\n 1 = 0\n$\n\n#indent\n==== This is fixed as well\n</code></pre>",
      "raw": "Unfortunately Typst’s paragraph handling isn’t very consistent so you can’t do this automatically. The easiest way I see would be to define a command that adds the appropriate spacing and call it before every incorrectly indented heading:\n\n```typ\n#let indent = h(1.8em)\n\nThis is a list:\n- arst\n- arst\n\n#indent\n==== This is indented correctly\n\n$\n 1 = 0\n$\n\n#indent\n==== This is fixed as well\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 16.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 331
    },
    {
      "id": 5117,
      "post_number": 5,
      "username": "cgahr",
      "name": "Constantin Gahr",
      "created_at": "2024-11-04T13:25:01.290Z",
      "updated_at": "2024-11-04T13:25:01.290Z",
      "cooked": "<p>I see, that’s a pity. Let’s hope I won’t regret writing my thesis with it. Thanks a lot!</p>",
      "raw": "I see, that's a pity. Let's hope I won't regret writing my thesis with it. Thanks a lot!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 10.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 740
    },
    {
      "id": 5122,
      "post_number": 6,
      "username": "flokl",
      "name": "",
      "created_at": "2024-11-04T15:06:50.431Z",
      "updated_at": "2024-11-04T15:06:50.431Z",
      "cooked": "<p>Hi, I needed the same and used the following snippet. It worked perfectly for me, maybe it helps.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show heading.where(level: 4): it =&gt; block(spacing: 0.65em) + box(strong(it.body) + [ ])\n</code></pre>\n<details>\n<summary>\nResult</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/f/f9f23843c912f497cac344b23844383a60ac13e5.png\" alt=\"test\" data-base62-sha1=\"zF7QiWa1r3enZ5e1yirPi6t6Vtr\" width=\"595\" height=\"374\"></p>\n</details>",
      "raw": "Hi, I needed the same and used the following snippet. It worked perfectly for me, maybe it helps.\n\n```typst\n#show heading.where(level: 4): it => block(spacing: 0.65em) + box(strong(it.body) + [ ])\n```\n\n\n[details=\"Result\"]\n![test|595x374](upload://zF7QiWa1r3enZ5e1yirPi6t6Vtr.png)\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 21.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 11177,
      "post_number": 7,
      "username": "th1j5",
      "name": "tpaelman",
      "created_at": "2025-04-16T17:46:50.770Z",
      "updated_at": "2025-04-16T17:46:50.770Z",
      "cooked": "<p>I adjusted the snippet from <a class=\"mention\" href=\"/u/flokl\">@flokl</a>:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show heading.where(level: 4): it =&gt; block(below: 0pt) + box(strong(it.body))\n// Not exactly sure what the `+ [ ]` was doing there anyway...\n</code></pre>\n<p>Since blocks inherit <code>spacing</code> from paragraphs, you normally will get the same spacing as between paragraphs. The <code>below: 0pt</code> is needed to only use it from one side<br>\n(if not, you’ll see a large gap - try to use a plain <code>block()</code>)</p>",
      "raw": "I adjusted the snippet from @flokl:\n\n```typst\n#show heading.where(level: 4): it => block(below: 0pt) + box(strong(it.body))\n// Not exactly sure what the `+ [ ]` was doing there anyway...\n```\nSince blocks inherit `spacing` from paragraphs, you normally will get the same spacing as between paragraphs. The `below: 0pt` is needed to only use it from one side\n(if not, you'll see a large gap - try to use a plain `block()`)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 8.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1469
    }
  ],
  "scraped_at": "2025-06-10T09:55:33.929768"
}
{
  "topic_metadata": {
    "id": 1533,
    "title": "How can I set the font size for the first column excluding the header row inside a table?",
    "slug": "how-can-i-set-the-font-size-for-the-first-column-excluding-the-header-row-inside-a-table",
    "posts_count": 2,
    "created_at": "2024-11-04T13:11:32.214Z",
    "last_posted_at": "2024-11-04T13:54:26.647Z",
    "views": 619,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "tables"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 279
  },
  "posts": [
    {
      "id": 5115,
      "post_number": 1,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2024-11-04T13:11:32.355Z",
      "updated_at": "2024-11-04T13:11:32.355Z",
      "cooked": "<p>Hi!</p>\n<p>I’m migrating from the <code>tablex</code> package to typst’s native <code>table</code> function as per the developer’s recommendation as well as improved compile times and performance (especially with tinymist).</p>\n<p>Is it possible to format the content of each cell of the first column except the header (the first row) so that it has a bigger font size using <code>table</code>? If so, how can I do that?</p>\n<p>Here is a basic example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let ktable(..cells) = table(\n  stroke: (x: none, y: color.rgb(\"#DEDEDE\")),\n\n  columns: (50pt, 50pt, auto, auto),\n  inset: 8pt,\n\n  table.hline(stroke: black),\n\n  table.cell(align: center)[*Character*],\n  table.cell(align: center)[*Keyword*],\n  table.cell(align: center)[*Index*],\n  table.cell(align: center)[*Story*],\n  table.hline(stroke: black),\n\n  ..cells,\n\n  table.hline(stroke: black),\n)\n\n#ktable(\n  [吾], [I], [11], [#lorem(10)],\n\n  [明], [bright], [12], [#lorem(10)],\n\n  [唱], [chant], [13], [#lorem(10)],\n)\n</code></pre>\n<p>Here, I would like to have all the cells with Japanese characters in them to be <code>22pt</code> big.</p>",
      "raw": "Hi!\n\nI'm migrating from the `tablex` package to typst's native `table` function as per the developer's recommendation as well as improved compile times and performance (especially with tinymist).\n\nIs it possible to format the content of each cell of the first column except the header (the first row) so that it has a bigger font size using `table`? If so, how can I do that?\n\nHere is a basic example:\n\n```typ\n#let ktable(..cells) = table(\n  stroke: (x: none, y: color.rgb(\"#DEDEDE\")),\n\n  columns: (50pt, 50pt, auto, auto),\n  inset: 8pt,\n\n  table.hline(stroke: black),\n\n  table.cell(align: center)[*Character*],\n  table.cell(align: center)[*Keyword*],\n  table.cell(align: center)[*Index*],\n  table.cell(align: center)[*Story*],\n  table.hline(stroke: black),\n\n  ..cells,\n\n  table.hline(stroke: black),\n)\n\n#ktable(\n  [吾], [I], [11], [#lorem(10)],\n\n  [明], [bright], [12], [#lorem(10)],\n\n  [唱], [chant], [13], [#lorem(10)],\n)\n```\n\nHere, I would like to have all the cells with Japanese characters in them to be `22pt` big.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 3503.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 738
    },
    {
      "id": 5118,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-04T13:54:26.647Z",
      "updated_at": "2024-11-04T13:54:26.647Z",
      "cooked": "<p>Hello, it’s fairly simple if you add a show rule to <a href=\"https://typst.app/docs/reference/model/table/#definitions-cell\"><code>table.cell</code></a>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let ktable(..cells) = {\n  show table.cell: c =&gt; {\n    if c.y == 0 {\n      return strong(c)\n    }\n    if c.y &gt; 0 and c.x == 0 {\n      return text(22pt, c)\n    }\n    c\n  }\n  table(\n    stroke: (\n      x: none, \n      y: color.rgb(\"#DEDEDE\")\n    ),\n    columns: (50pt, 50pt, auto, auto),\n    inset: 8pt,\n  \n    table.hline(stroke: black),\n  \n    table.cell(align: center)[Character],\n    table.cell(align: center)[Keyword],\n    table.cell(align: center)[Index],\n    table.cell(align: center)[Story],\n    table.hline(stroke: black),\n  \n    ..cells,\n  \n    table.hline(stroke: black),\n  )\n}\n\n#ktable(\n  [吾], [I], [11], [#lorem(10)],\n\n  [明], [bright], [12], [#lorem(10)],\n\n  [唱], [chant], [13], [#lorem(10)],\n)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/4/4430f9ce567e05fe8689f894442abe4696a80b58.png\" data-download-href=\"https://forum.typst.app/uploads/default/4430f9ce567e05fe8689f894442abe4696a80b58\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/4/4430f9ce567e05fe8689f894442abe4696a80b58_2_690x199.png\" alt=\"image\" data-base62-sha1=\"9JfoGyDcIUsfhlGVCP1kNk9NI7K\" width=\"690\" height=\"199\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/4/4430f9ce567e05fe8689f894442abe4696a80b58_2_690x199.png, https://forum.typst.app/uploads/default/original/2X/4/4430f9ce567e05fe8689f894442abe4696a80b58.png 1.5x, https://forum.typst.app/uploads/default/original/2X/4/4430f9ce567e05fe8689f894442abe4696a80b58.png 2x\" data-dominant-color=\"EFEFEF\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">728×210 27.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hello, it's fairly simple if you add a show rule to [`table.cell`](https://typst.app/docs/reference/model/table/#definitions-cell).\n\n\n```typ\n#let ktable(..cells) = {\n  show table.cell: c => {\n    if c.y == 0 {\n      return strong(c)\n    }\n    if c.y > 0 and c.x == 0 {\n      return text(22pt, c)\n    }\n    c\n  }\n  table(\n    stroke: (\n      x: none, \n      y: color.rgb(\"#DEDEDE\")\n    ),\n    columns: (50pt, 50pt, auto, auto),\n    inset: 8pt,\n  \n    table.hline(stroke: black),\n  \n    table.cell(align: center)[Character],\n    table.cell(align: center)[Keyword],\n    table.cell(align: center)[Index],\n    table.cell(align: center)[Story],\n    table.hline(stroke: black),\n  \n    ..cells,\n  \n    table.hline(stroke: black),\n  )\n}\n\n#ktable(\n  [吾], [I], [11], [#lorem(10)],\n\n  [明], [bright], [12], [#lorem(10)],\n\n  [唱], [chant], [13], [#lorem(10)],\n)\n```\n![image|690x199](upload://9JfoGyDcIUsfhlGVCP1kNk9NI7K.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 39,
      "score": 112.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:55:33.152367"
}
{
  "topic_metadata": {
    "id": 1534,
    "title": "How can I set the alignment of table cells for certain rows and columns through a function?",
    "slug": "how-can-i-set-the-alignment-of-table-cells-for-certain-rows-and-columns-through-a-function",
    "posts_count": 5,
    "created_at": "2024-11-04T14:50:49.649Z",
    "last_posted_at": "2024-11-04T15:15:20.850Z",
    "views": 515,
    "like_count": 2,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "tables"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 338
  },
  "posts": [
    {
      "id": 5119,
      "post_number": 1,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2024-11-04T14:50:49.798Z",
      "updated_at": "2024-11-04T14:50:49.798Z",
      "cooked": "<p>I’m trying to centre all cells in a table except the ones in the header (first row) and the last column.</p>\n<p>When I try the following code, the <code>typst</code> CLI compiler prints out for the second line, <code>error: expected alignment or auto, found none</code>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let ktable(..cells) = {\n  set table(align: (x, y) =&gt; {\n    if x in (0, 1, 2) and y &gt; 0 {\n      // Align vertically and horizontally\n      center + horizon\n    }\n  })\n  show table.cell: c =&gt; {\n    if c.y &gt; 0 and c.x == 0 {\n      return text(22pt, c)\n    }\n    c\n  }\n  table(\n    stroke: (x: none, y: color.rgb(\"#DEDEDE\")),\n\n    columns: (50pt, 50pt, auto, auto),\n    inset: 8pt,\n\n    table.hline(stroke: black),\n\n    table.cell(align: center)[*Char.*],\n    table.cell(align: center)[*Keyword*],\n    table.cell(align: center)[*Index*],\n    table.cell(align: center)[*Story*],\n    table.hline(stroke: black),\n\n    ..cells,\n\n    table.hline(stroke: black),\n  )\n}\n\n#ktable(\n  [吾], [I], [11],\n  [#lorem(10)],\n\n  [明], [bright], [20],\n  [#lorem(10)],\n\n  [唱], [chant], [21],\n  [#lorem(10)],\n)\n</code></pre>",
      "raw": "I'm trying to centre all cells in a table except the ones in the header (first row) and the last column.\n\nWhen I try the following code, the `typst` CLI compiler prints out for the second line, `error: expected alignment or auto, found none`.\n\n```typ\n#let ktable(..cells) = {\n  set table(align: (x, y) => {\n    if x in (0, 1, 2) and y > 0 {\n      // Align vertically and horizontally\n      center + horizon\n    }\n  })\n  show table.cell: c => {\n    if c.y > 0 and c.x == 0 {\n      return text(22pt, c)\n    }\n    c\n  }\n  table(\n    stroke: (x: none, y: color.rgb(\"#DEDEDE\")),\n\n    columns: (50pt, 50pt, auto, auto),\n    inset: 8pt,\n\n    table.hline(stroke: black),\n\n    table.cell(align: center)[*Char.*],\n    table.cell(align: center)[*Keyword*],\n    table.cell(align: center)[*Index*],\n    table.cell(align: center)[*Story*],\n    table.hline(stroke: black),\n\n    ..cells,\n\n    table.hline(stroke: black),\n  )\n}\n\n#ktable(\n  [吾], [I], [11],\n  [#lorem(10)],\n\n  [明], [bright], [20],\n  [#lorem(10)],\n\n  [唱], [chant], [21],\n  [#lorem(10)],\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 2687.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 738
    },
    {
      "id": 5120,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-04T15:04:14.681Z",
      "updated_at": "2024-11-04T15:04:14.681Z",
      "cooked": "<p>In <code>align</code>, you are only returning a value when your conditions are met. You need to return a default value.</p>",
      "raw": "In `align`, you are only returning a value when your conditions are met. You need to return a default value.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 20.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5123,
      "post_number": 3,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2024-11-04T15:09:06.033Z",
      "updated_at": "2024-11-04T15:09:06.033Z",
      "cooked": "<p>Do you mean I need to add something to declare the value as default?</p>",
      "raw": "Do you mean I need to add something to declare the value as default?",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 35.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 738
    },
    {
      "id": 5124,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-04T15:12:33.105Z",
      "updated_at": "2024-11-04T15:12:47.508Z",
      "cooked": "<p>To complement this answer, whenever you write an <code>if</code> without an <code>else</code>, there’s an implicit <code>else { none }</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#repr(if 5 != 5 { \"something\" })  // none\n\n// this is because the above is equivalent to\n#repr(if 5 != 5 { \"something\" } else { none })  // none\n</code></pre>\n<p>So, the problem arises in this part of your code:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set table(align: (x, y) =&gt; {\n    if x in (0, 1, 2) and y &gt; 0 {\n      // Align vertically and horizontally\n      center + horizon\n    } // else { none } is implicit\n  })\n</code></pre>\n<p>When the condition doesn’t match, you’re setting an alignment of <code>none</code>, which isn’t valid!</p>\n<p>Instead, add an explicit <code>else { auto }</code> (<code>auto</code> is the default and means that alignment should be inherited from outside the table):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set table(align: (x, y) =&gt; {\n    if x in (0, 1, 2) and y &gt; 0 {\n      // Align vertically and horizontally\n      center + horizon\n    } else {\n      // Use alignment from outside\n      // (Alternatively: can use 'start + top' as default)\n      auto\n    }\n  })\n</code></pre>",
      "raw": "To complement this answer, whenever you write an `if` without an `else`, there's an implicit `else { none }`:\n\n```typ\n#repr(if 5 != 5 { \"something\" })  // none\n\n// this is because the above is equivalent to\n#repr(if 5 != 5 { \"something\" } else { none })  // none\n```\n\nSo, the problem arises in this part of your code:\n\n```typ\n#set table(align: (x, y) => {\n    if x in (0, 1, 2) and y > 0 {\n      // Align vertically and horizontally\n      center + horizon\n    } // else { none } is implicit\n  })\n```\n\nWhen the condition doesn't match, you're setting an alignment of `none`, which isn't valid!\n\nInstead, add an explicit `else { auto }` (`auto` is the default and means that alignment should be inherited from outside the table):\n\n```typ\n#set table(align: (x, y) => {\n    if x in (0, 1, 2) and y > 0 {\n      // Align vertically and horizontally\n      center + horizon\n    } else {\n      // Use alignment from outside\n      // (Alternatively: can use 'start + top' as default)\n      auto\n    }\n  })\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 31,
      "score": 106.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5125,
      "post_number": 5,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2024-11-04T15:15:20.850Z",
      "updated_at": "2024-11-04T15:15:20.850Z",
      "cooked": "<p>Thank you for the detailed explanation!</p>",
      "raw": "Thank you for the detailed explanation!",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 738
    }
  ],
  "scraped_at": "2025-06-10T09:55:32.432454"
}
{
  "topic_metadata": {
    "id": 1535,
    "title": "How to use different numbering formats for each enumerated list level?",
    "slug": "how-to-use-different-numbering-formats-for-each-enumerated-list-level",
    "posts_count": 4,
    "created_at": "2024-11-03T16:46:08.951Z",
    "last_posted_at": "2024-11-04T09:09:15.419Z",
    "views": 293,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "quachpas",
    "tags": [
      "layout",
      "numbering",
      "lists"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 167
  },
  "posts": [
    {
      "id": 5071,
      "post_number": 1,
      "username": "PiotrPyclik",
      "name": "Piotr Pyclik",
      "created_at": "2024-11-03T16:46:08.951Z",
      "updated_at": "2024-11-04T15:06:10.611Z",
      "cooked": "<p>I’m a lawyer in Poland and I recently started using Typst for writing documents, which allowed me to use Emacs in my work to a larger extent. I created couple of templates for letterheads and use <a href=\"https://github.com/minad/tempel\" rel=\"noopener nofollow ugc\">Tempel</a> templates for types of documents, that I need most often.</p>\n<p>My only gripe with Typst is, that I couldn’t find any obvious way to have different characters after numbers or letters in different levels of numbered lists (e.g. “1.” for 1st level, “1)” for 2nd level), which is style typically used in Poland.</p>",
      "raw": "I'm a lawyer in Poland and I recently started using Typst for writing documents, which allowed me to use Emacs in my work to a larger extent. I created couple of templates for letterheads and use [Tempel](https://github.com/minad/tempel) templates for types of documents, that I need most often.\n\nMy only gripe with Typst is, that I couldn't find any obvious way to have different characters after numbers or letters in different levels of numbered lists (e.g. \"1.\" for 1st level, \"1)\" for 2nd level), which is style typically used in Poland.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 58,
      "score": 1156.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 354
    },
    {
      "id": 5077,
      "post_number": 2,
      "username": "ilia",
      "name": "Ilia",
      "created_at": "2024-11-03T19:43:34.764Z",
      "updated_at": "2024-11-04T15:06:10.619Z",
      "cooked": "<p>I think it would be something like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): set heading(numbering: \"1.\")\n</code></pre>",
      "raw": "I think it would be something like\n```typ\n#show heading.where(level: 1): set heading(numbering: \"1.\")\n```",
      "reply_to_post_number": 1,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 56,
      "score": 46.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 139
    },
    {
      "id": 5094,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-04T08:47:52.655Z",
      "updated_at": "2024-11-04T15:06:10.624Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/piotrpyclik\">@PiotrPyclik</a>, you might be interested in numbly, if you want an easy way to specify different numbering cases.</p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/universe/package/numbly\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/universe/package/numbly\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/universe/package/numbly\" target=\"_blank\" rel=\"noopener\">numbly – Typst Universe</a></h3>\n\n  <p>A package that helps you to specify different numbering formats for different levels of headings.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "Hello @PiotrPyclik, you might be interested in numbly, if you want an easy way to specify different numbering cases.\nhttps://typst.app/universe/package/numbly",
      "reply_to_post_number": 1,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 39.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5096,
      "post_number": 4,
      "username": "PiotrPyclik",
      "name": "Piotr Pyclik",
      "created_at": "2024-11-04T09:09:15.419Z",
      "updated_at": "2024-11-04T15:06:10.629Z",
      "cooked": "<p>Thanks, I actually found a solution using numbly:</p>\n<pre><code class=\"lang-auto\">#import \"@preview/numbly:0.1.0\": numbly\n\n#set enum(\n  full:true, \n  numbering: numbly(\"{1:1}.\", \"{2:1})\", \"{3:a})\" )\n)\n</code></pre>",
      "raw": "Thanks, I actually found a solution using numbly:\n\n```\n#import \"@preview/numbly:0.1.0\": numbly\n\n#set enum(\n  full:true, \n  numbering: numbly(\"{1:1}.\", \"{2:1})\", \"{3:a})\" )\n)\n```",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 48,
      "score": 44.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 354
    }
  ],
  "scraped_at": "2025-06-10T09:55:34.642346"
}
