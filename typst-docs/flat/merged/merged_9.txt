{
  "topic_metadata": {
    "id": 1698,
    "title": "How to define a new highest header while keeping the others the same?",
    "slug": "how-to-define-a-new-highest-header-while-keeping-the-others-the-same",
    "posts_count": 4,
    "created_at": "2024-11-12T21:05:40.903Z",
    "last_posted_at": "2024-11-12T21:31:13.380Z",
    "views": 209,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "model"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 507
  },
  "posts": [
    {
      "id": 5561,
      "post_number": 1,
      "username": "Alberto",
      "name": "Alberto",
      "created_at": "2024-11-12T21:05:41.027Z",
      "updated_at": "2024-11-12T21:42:05.670Z",
      "cooked": "<p>I asked the same question 17 days ago, unfortunately I got sick and totally forgot about it by the time a user noticed me that my explanation wasn’t that clear. I decided to open a new post before rewriting entirely the question.</p>\n<p>So, what I’m trying to do is to create a new header for chapters, which I want to place the highest on the header’s hierarchy but without getting rid of any of the default ones.</p>\n<p>Right now my workaround is a function that draws the title of the chapter and somehow manages to place it on the index.</p>\n<div class=\"spoiler\">\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">let chapter(title: \"No title\", body) = {\n  counter(heading).update(0)\n  show figure: set place(center+horizon)\n  show figure.caption: strong\n  show figure.caption: set text(40pt)\n  set figure.caption(position: top)\n  pagebreak(weak: true)\n  place(center+horizon)[#figure(\n    kind: \"chapter\",\n    numbering: \"I\",\n    supplement: \"Chapter\",\n    outlined: true,\n    placement: bottom,\n    gap: 150pt,\n    caption: [\\ #title],\n    [#body]\n  )]\n  pagebreak(weak: true)\n}\n</code></pre>\n</div>\n<p>My problem with it is that the webapp UI doesn’t detect it as a proper header, hence it doesn’t show it on the outline (left panel).</p>\n<p>I had the idea that if I could somehow move every header one spot down in the hierarchy, I could redefine the first one (<code>=</code>) as my personalized chapter header.</p>\n<p>Does anyone know a better way to do it than manually reformatting every header?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// What I've got\n= Header 1\n== Header 2\n=== Header 3\n==== Header 4\n...\n\n// What I'd like\n= Chapter Header\n== Header 1\n=== Header 2\n==== Header 3\n===== Header 4\n...\n</code></pre>\n<p>PS: Is it me or preformatted text isn’t Typst?</p>",
      "raw": "I asked the same question 17 days ago, unfortunately I got sick and totally forgot about it by the time a user noticed me that my explanation wasn't that clear. I decided to open a new post before rewriting entirely the question.\n\nSo, what I'm trying to do is to create a new header for chapters, which I want to place the highest on the header's hierarchy but without getting rid of any of the default ones.\n\nRight now my workaround is a function that draws the title of the chapter and somehow manages to place it on the index. \n\n[spoiler]\n```typc\nlet chapter(title: \"No title\", body) = {\n  counter(heading).update(0)\n  show figure: set place(center+horizon)\n  show figure.caption: strong\n  show figure.caption: set text(40pt)\n  set figure.caption(position: top)\n  pagebreak(weak: true)\n  place(center+horizon)[#figure(\n    kind: \"chapter\",\n    numbering: \"I\",\n    supplement: \"Chapter\",\n    outlined: true,\n    placement: bottom,\n    gap: 150pt,\n    caption: [\\ #title],\n    [#body]\n  )]\n  pagebreak(weak: true)\n}\n```\n[/spoiler]\n\nMy problem with it is that the webapp UI doesn't detect it as a proper header, hence it doesn't show it on the outline (left panel).\n\nI had the idea that if I could somehow move every header one spot down in the hierarchy, I could redefine the first one (`=`) as my personalized chapter header.\n\nDoes anyone know a better way to do it than manually reformatting every header?\n\n```typ\n// What I've got\n= Header 1\n== Header 2\n=== Header 3\n==== Header 4\n...\n\n// What I'd like\n= Chapter Header\n== Header 1\n=== Header 2\n==== Header 3\n===== Header 4\n...\n```\n\nPS: Is it me or preformatted text isn't Typst?",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 487.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 673
    },
    {
      "id": 5564,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-12T21:14:34.493Z",
      "updated_at": "2024-11-12T21:14:58.205Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/alberto\">@Alberto</a> , as in the previous post, I’ll ask you to ensure your title complies with our question post guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">How to post in the Questions category</a></p>\n<p>I’ve updated your post title for you; next time, please make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<aside class=\"quote no-group\" data-username=\"Alberto\" data-post=\"1\" data-topic=\"1698\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/a/B7441C/48.png\" class=\"avatar\"> Alberto:</div>\n<blockquote>\n<p>PS: Is it me or preformatted text isn’t Typst?</p>\n</blockquote>\n</aside>\n<p>You can use ```typ instead of ``` for code blocks to ensure proper syntax highlighting in the forum.</p>",
      "raw": "Hey @Alberto , as in the previous post, I'll ask you to ensure your title complies with our question post guidelines: [How to post in the Questions category](https://forum.typst.app/t/how-to-post-in-the-questions-category/11)\n\nI've updated your post title for you; next time, please make sure your title is a question you’d ask to a friend about Typst. :wink:\n[quote=\"Alberto, post:1, topic:1698\"]\nPS: Is it me or preformatted text isn’t Typst?\n[/quote]\n\nYou can use \\`\\`\\`typ instead of \\`\\`\\` for code blocks to ensure proper syntax highlighting in the forum.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 32,
      "score": 26.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5565,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-12T21:20:05.404Z",
      "updated_at": "2024-11-12T21:20:05.404Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Alberto\" data-post=\"1\" data-topic=\"1698\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/a/B7441C/48.png\" class=\"avatar\"> Alberto:</div>\n<blockquote>\n<p>I had the idea that if I could somehow move every header one spot down in the hierarchy, I could redefine the first one (<code>=</code>) as my personalized chapter header.</p>\n</blockquote>\n</aside>\n<p>You can use <code>#set heading(offset: 1)</code> to “bump” all headings by one level, as follows:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let chapter = heading.with(level: 1, numbering: n =&gt; [Chapter #n.])  // &lt;--- override level calculation\n#set heading(offset: 1)  // &lt;--- heading level by default is depth (amount of '=') + offset (default zero)\n#set heading(numbering: (chapter, ..n) =&gt; numbering(\"1.\", ..n))  // &lt;--- omit chapter number from heading number\n\n#outline()\n\n#chapter[Origins]\n\n= Title\n\n== Subtitle\n\n=== Subsubtitle\n\n#chapter[Epilogue]\n\n= Title\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/d/d3b6329184e4d69fc1683898a19262e38d2e5527.png\" data-download-href=\"https://forum.typst.app/uploads/default/d3b6329184e4d69fc1683898a19262e38d2e5527\" title=\"output: chapter and bumped heading levels\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/d/d3b6329184e4d69fc1683898a19262e38d2e5527_2_555x500.png\" alt=\"output: chapter and bumped heading levels\" data-base62-sha1=\"ucT6mHeaPqB4X3lUwkPLvFNJVaf\" width=\"555\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/d/d3b6329184e4d69fc1683898a19262e38d2e5527_2_555x500.png, https://forum.typst.app/uploads/default/optimized/2X/d/d3b6329184e4d69fc1683898a19262e38d2e5527_2_832x750.png 1.5x, https://forum.typst.app/uploads/default/original/2X/d/d3b6329184e4d69fc1683898a19262e38d2e5527.png 2x\" data-dominant-color=\"F7F7F7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">output: chapter and bumped heading levels</span><span class=\"informations\">1054×949 104 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "[quote=\"Alberto, post:1, topic:1698\"]\nI had the idea that if I could somehow move every header one spot down in the hierarchy, I could redefine the first one (`=`) as my personalized chapter header.\n[/quote]\n\nYou can use `#set heading(offset: 1)` to \"bump\" all headings by one level, as follows:\n\n```typ\n#let chapter = heading.with(level: 1, numbering: n => [Chapter #n.])  // <--- override level calculation\n#set heading(offset: 1)  // <--- heading level by default is depth (amount of '=') + offset (default zero)\n#set heading(numbering: (chapter, ..n) => numbering(\"1.\", ..n))  // <--- omit chapter number from heading number\n\n#outline()\n\n#chapter[Origins]\n\n= Title\n\n== Subtitle\n\n=== Subsubtitle\n\n#chapter[Epilogue]\n\n= Title\n```\n![output: chapter and bumped heading levels|555x500](upload://ucT6mHeaPqB4X3lUwkPLvFNJVaf.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 33,
      "score": 71.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5567,
      "post_number": 4,
      "username": "Alberto",
      "name": "Alberto",
      "created_at": "2024-11-12T21:31:13.380Z",
      "updated_at": "2024-11-12T21:31:13.380Z",
      "cooked": "<p>Thank you for the information. Next time I’ll write a proper title.</p>\n<p>Your answer works, it shows in the outline</p>",
      "raw": "Thank you for the information. Next time I'll write a proper title.\n\nYour answer works, it shows in the outline",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 50.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 673
    }
  ],
  "scraped_at": "2025-06-10T09:55:01.131660"
}
{
  "topic_metadata": {
    "id": 1708,
    "title": "How to draw at the margin of a page?",
    "slug": "how-to-draw-at-the-margin-of-a-page",
    "posts_count": 6,
    "created_at": "2024-11-13T17:07:04.786Z",
    "last_posted_at": "2024-11-14T21:36:31.113Z",
    "views": 352,
    "like_count": 6,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sjfhsjfh",
    "tags": [
      "layout",
      "graphics"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 709
  },
  "posts": [
    {
      "id": 5593,
      "post_number": 1,
      "username": "Oscar",
      "name": "acsor43215",
      "created_at": "2024-11-13T17:07:04.894Z",
      "updated_at": "2024-11-13T17:13:37.722Z",
      "cooked": "<p>I’m trying to replicate a LaTeX template where the heading of each chapter has a black rectangle that stretches to the right margin, as shown in the picture below.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/50d05bae8631a5449f783b230dd08e1b49a82fb5.png\" data-download-href=\"https://forum.typst.app/uploads/default/50d05bae8631a5449f783b230dd08e1b49a82fb5\" title=\"The black rectangle on the right margin is what I want to achieve.\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/50d05bae8631a5449f783b230dd08e1b49a82fb5_2_690x307.png\" alt=\"The black rectangle on the right margin is what I want to achieve.\" data-base62-sha1=\"bwUBnrRzTkpVXX8H1ykHer8Spk9\" width=\"690\" height=\"307\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/50d05bae8631a5449f783b230dd08e1b49a82fb5_2_690x307.png, https://forum.typst.app/uploads/default/optimized/2X/5/50d05bae8631a5449f783b230dd08e1b49a82fb5_2_1035x460.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/50d05bae8631a5449f783b230dd08e1b49a82fb5.png 2x\" data-dominant-color=\"EFEFEF\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">The black rectangle on the right margin is what I want to achieve.</span><span class=\"informations\">1047×467 22.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>How can such a behavior be replicated in Typst? Here’s what I have at the moment:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">show heading.where(level: 1): x =&gt; [\n    #pagebreak(weak: true)\n    #set text(\n        size: 1.6em,\n        weight: \"regular\"\n    )\n    #set align(right)\n    #block(\n        above: 20pt,\n        below: 50pt,\n    )[\n        #smallcaps([Chapter #x.numbering]) \\\n        #text(\n            size: 1.3em\n        )[\n            *#x.body*\n        ]\n        #place(\n            dx: 75pt,\n            horizon + right,\n            rect(\n                fill: black,\n                height: 9%\n            )\n        )\n    ]\n]\n\n</code></pre>\n<p>With this code, I obtain the following output:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/7/7d4145c3796b31f3f66a4d4c08cb0c82b26c2d32.png\" data-download-href=\"https://forum.typst.app/uploads/default/7d4145c3796b31f3f66a4d4c08cb0c82b26c2d32\" title=\"What I have at the moment.\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/7/7d4145c3796b31f3f66a4d4c08cb0c82b26c2d32_2_690x213.png\" alt=\"What I have at the moment.\" data-base62-sha1=\"hS3wPtZzxlySkIm0DLjH8I1fYMa\" width=\"690\" height=\"213\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/7/7d4145c3796b31f3f66a4d4c08cb0c82b26c2d32_2_690x213.png, https://forum.typst.app/uploads/default/original/2X/7/7d4145c3796b31f3f66a4d4c08cb0c82b26c2d32.png 1.5x, https://forum.typst.app/uploads/default/original/2X/7/7d4145c3796b31f3f66a4d4c08cb0c82b26c2d32.png 2x\" data-dominant-color=\"E5E6E6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">What I have at the moment.</span><span class=\"informations\">981×304 26.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Please ignore the fact that the style of this heading does not perfectly match the one of the heading before. What concerns me in this post is just how to draw the rectangle at the side of the page. Here are the specifics of the solution I would like to find:</p>\n<ul>\n<li>No hardcoded values, like in the <code>#place</code> call above where <code>dx: 75pt</code> or <code>height: 9%</code> are used. The rectangle should adapt dynamically to the content of the heading.</li>\n<li>The height of the rectangle should <em>perfectly</em> match the height of the parent element. In the snippet above, the rectangle should have exactly the same height as the surrounding <code>#block</code>.</li>\n</ul>",
      "raw": "I'm trying to replicate a LaTeX template where the heading of each chapter has a black rectangle that stretches to the right margin, as shown in the picture below.\n\n![The black rectangle on the right margin is what I want to achieve.|690x307](upload://bwUBnrRzTkpVXX8H1ykHer8Spk9.png)\n\nHow can such a behavior be replicated in Typst? Here's what I have at the moment:\n\n```typst\nshow heading.where(level: 1): x => [\n    #pagebreak(weak: true)\n    #set text(\n        size: 1.6em,\n        weight: \"regular\"\n    )\n    #set align(right)\n    #block(\n        above: 20pt,\n        below: 50pt,\n    )[\n        #smallcaps([Chapter #x.numbering]) \\\n        #text(\n            size: 1.3em\n        )[\n            *#x.body*\n        ]\n        #place(\n            dx: 75pt,\n            horizon + right,\n            rect(\n                fill: black,\n                height: 9%\n            )\n        )\n    ]\n]\n\n```\n\nWith this code, I obtain the following output:\n\n![What I have at the moment.|690x213](upload://hS3wPtZzxlySkIm0DLjH8I1fYMa.png)\n\nPlease ignore the fact that the style of this heading does not perfectly match the one of the heading before. What concerns me in this post is just how to draw the rectangle at the side of the page. Here are the specifics of the solution I would like to find:\n\n- No hardcoded values, like in the `#place` call above where `dx: 75pt` or `height: 9%` are used. The rectangle should adapt dynamically to the content of the heading.\n- The height of the rectangle should _perfectly_ match the height of the parent element. In the snippet above, the rectangle should have exactly the same height as the surrounding `#block`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 59,
      "score": 1131.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 602
    },
    {
      "id": 5595,
      "post_number": 2,
      "username": "sjfhsjfh",
      "name": "sjfhsjfh",
      "created_at": "2024-11-13T17:41:01.449Z",
      "updated_at": "2024-11-13T17:41:01.449Z",
      "cooked": "<p>Hi Oscar, I recommend reading about <a href=\"https://typst.app/docs/reference/layout/measure/\"><code>measure</code></a> to figure out how it works. Here’s my code:</p>\n<h3><a name=\"p-5595-margin-calculation-1\" class=\"anchor\" href=\"#p-5595-margin-calculation-1\"></a>Margin calculation</h3>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">/// Reference:\n/// https://typst.app/docs/reference/layout/page/#parameters-margin\n#let calc-margin(margin, shape) = if margin == auto {\n  2.5 / 21 * calc.min(..shape)\n} else {\n  margin\n}\n</code></pre>\n<h3><a name=\"p-5595-show-rule-2\" class=\"anchor\" href=\"#p-5595-show-rule-2\"></a>Show rule</h3>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): it =&gt; {\n  pagebreak(weak: true)\n  set text(\n    size: 1.6em,\n    weight: \"regular\",\n  )\n  set align(right)\n  block(\n    above: 20pt,\n    below: 50pt,\n    context {\n      let title-content = {\n        smallcaps([Chapter #counter(heading).display(heading.numbering)])\n        linebreak()\n        text(size: 1.3em)[*#it.body*]\n      }\n      title-content\n      place(\n        dx: calc-margin(page.margin, (page.width, page.height)),\n        horizon + right,\n        rect(\n          fill: black,\n          height: measure(title-content).height,\n        ),\n      )\n    },\n  )\n}\n</code></pre>\n<p>I also modified the chapter numbering to make it work properly. Hope this helps <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hi Oscar, I recommend reading about [`measure`](https://typst.app/docs/reference/layout/measure/) to figure out how it works. Here's my code:\n\n### Margin calculation\n\n```typ\n/// Reference:\n/// https://typst.app/docs/reference/layout/page/#parameters-margin\n#let calc-margin(margin, shape) = if margin == auto {\n  2.5 / 21 * calc.min(..shape)\n} else {\n  margin\n}\n```\n\n### Show rule\n\n```typ\n#show heading.where(level: 1): it => {\n  pagebreak(weak: true)\n  set text(\n    size: 1.6em,\n    weight: \"regular\",\n  )\n  set align(right)\n  block(\n    above: 20pt,\n    below: 50pt,\n    context {\n      let title-content = {\n        smallcaps([Chapter #counter(heading).display(heading.numbering)])\n        linebreak()\n        text(size: 1.3em)[*#it.body*]\n      }\n      title-content\n      place(\n        dx: calc-margin(page.margin, (page.width, page.height)),\n        horizon + right,\n        rect(\n          fill: black,\n          height: measure(title-content).height,\n        ),\n      )\n    },\n  )\n}\n```\n\nI also modified the chapter numbering to make it work properly. Hope this helps :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 55,
      "score": 131.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 120
    },
    {
      "id": 5632,
      "post_number": 3,
      "username": "Oscar",
      "name": "acsor43215",
      "created_at": "2024-11-14T12:11:18.870Z",
      "updated_at": "2024-11-14T12:11:18.870Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/sjfhsjfh\">@sjfhsjfh</a>, thanks for your code! Yes, your snippet was actually useful. I made some modifications to suit it to a variant of the specification I gave earlier, and the result is as follows:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/3/391e9aa852fd9c372895b677d7e49894f3a2272f.png\" data-download-href=\"https://forum.typst.app/uploads/default/391e9aa852fd9c372895b677d7e49894f3a2272f\" title=\"What I get.\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/3/391e9aa852fd9c372895b677d7e49894f3a2272f_2_690x215.png\" alt=\"What I get.\" data-base62-sha1=\"89iMF0ZI9krPOvX1AmLoWOjM5ll\" width=\"690\" height=\"215\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/3/391e9aa852fd9c372895b677d7e49894f3a2272f_2_690x215.png, https://forum.typst.app/uploads/default/optimized/2X/3/391e9aa852fd9c372895b677d7e49894f3a2272f_2_1035x322.png 1.5x, https://forum.typst.app/uploads/default/original/2X/3/391e9aa852fd9c372895b677d7e49894f3a2272f.png 2x\" data-dominant-color=\"EFEFEF\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">What I get.</span><span class=\"informations\">1086×339 10.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>My only question at this point is, is there any mistake in the way the numbering style of the heading is fetched? When I pasted your snippet as-is into my code, the compiler was issuing an error saying it was receiving a <code>none</code> value instead of the numbering style (“1.” in my case).</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"sjfhsjfh\" data-post=\"2\" data-topic=\"1708\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/sjfhsjfh/48/125_2.png\" class=\"avatar\"> sjfhsjfh:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">let title-content = {\n  // The line above is the one I mean\n  smallcaps([Chapter #counter(heading).display(heading.numbering)])\n  linebreak()\n  text(size: 1.3em)[*#it.body*]\n}\n</code></pre>\n</blockquote>\n</aside>\n<p>At the end, I replaced the line</p>\n<pre><code class=\"lang-auto\">smallcaps([Chapter #counter(heading).display(heading.numbering)])\n</code></pre>\n<p>with</p>\n<pre><code class=\"lang-auto\">smallcaps([Chapter #counter(heading).display(\"1\")])\n</code></pre>\n<p>also because I wanted the “1” numbering style to be shown in the heading, and the “1.” one elsewhere in the document.</p>",
      "raw": "Hi @sjfhsjfh, thanks for your code! Yes, your snippet was actually useful. I made some modifications to suit it to a variant of the specification I gave earlier, and the result is as follows:\n\n![What I get.|690x215](upload://89iMF0ZI9krPOvX1AmLoWOjM5ll.png)\n\nMy only question at this point is, is there any mistake in the way the numbering style of the heading is fetched? When I pasted your snippet as-is into my code, the compiler was issuing an error saying it was receiving a `none` value instead of the numbering style (\"1.\" in my case).\n\n[quote=\"sjfhsjfh, post:2, topic:1708\"]\n```\nlet title-content = {\n  // The line above is the one I mean\n  smallcaps([Chapter #counter(heading).display(heading.numbering)])\n  linebreak()\n  text(size: 1.3em)[*#it.body*]\n}\n```\n[/quote]\n\nAt the end, I replaced the line\n\n```\nsmallcaps([Chapter #counter(heading).display(heading.numbering)])\n```\n\nwith\n\n```\nsmallcaps([Chapter #counter(heading).display(\"1\")])\n```\n\nalso because I wanted the \"1\" numbering style to be shown in the heading, and the \"1.\" one elsewhere in the document.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 43,
      "score": 33.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 602
    },
    {
      "id": 5633,
      "post_number": 4,
      "username": "sjfhsjfh",
      "name": "sjfhsjfh",
      "created_at": "2024-11-14T12:33:35.988Z",
      "updated_at": "2024-11-14T12:33:49.207Z",
      "cooked": "<p>I assumed that you have already set the numbering for heading in the former document like:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.\")\n</code></pre>\n<p>If you didn’t do this you will have <code>context heading.numbering</code> to be <code>none</code>. My purpose of doing this to keep consistency. However it seems that you would like to use a different pattern from the one in the document, then simply using <code>.display(\"1\")</code> would be fine.</p>",
      "raw": "I assumed that you have already set the numbering for heading in the former document like:\n\n```typ\n#set heading(numbering: \"1.\")\n```\n\nIf you didn't do this you will have `context heading.numbering` to be `none`. My purpose of doing this to keep consistency. However it seems that you would like to use a different pattern from the one in the document, then simply using `.display(\"1\")` would be fine.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 13.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 120
    },
    {
      "id": 5634,
      "post_number": 5,
      "username": "Oscar",
      "name": "acsor43215",
      "created_at": "2024-11-14T14:38:42.619Z",
      "updated_at": "2024-11-14T14:38:42.619Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"sjfhsjfh\" data-post=\"4\" data-topic=\"1708\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/sjfhsjfh/48/125_2.png\" class=\"avatar\"> sjfhsjfh:</div>\n<blockquote>\n<p>I assumed that you have already set the numbering for heading in the former document like:</p>\n</blockquote>\n</aside>\n<p>Yes, I already had that setting in my code before. It was strange for me to see that too.</p>",
      "raw": "[quote=\"sjfhsjfh, post:4, topic:1708\"]\nI assumed that you have already set the numbering for heading in the former document like:\n[/quote]\n\nYes, I already had that setting in my code before. It was strange for me to see that too.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 37,
      "score": 12.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 602
    },
    {
      "id": 5646,
      "post_number": 6,
      "username": "slowjo",
      "name": "slowjo",
      "created_at": "2024-11-14T21:36:31.113Z",
      "updated_at": "2024-11-14T21:36:31.113Z",
      "cooked": "<p>I just bumped into this a few minutes ago. I was using an outline in the document, and outlines set <code>heading.numbering</code> to <code>none</code>. You can test this easily to figure out if that is where it breaks: replace the line with</p>\n<pre><code class=\"lang-auto\"> smallcaps([Chapter #repr(heading.numbering)])\n</code></pre>\n<p>and then hunt that <code>none</code> in your document :)</p>",
      "raw": "I just bumped into this a few minutes ago. I was using an outline in the document, and outlines set `heading.numbering` to `none`. You can test this easily to figure out if that is where it breaks: replace the line with\n```typst{\n smallcaps([Chapter #repr(heading.numbering)])\n```\nand then hunt that `none` in your document :)",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 31.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 793
    }
  ],
  "scraped_at": "2025-06-10T09:55:00.412938"
}
{
  "topic_metadata": {
    "id": 1713,
    "title": "How to customize styling of `heading` and control its look in table of contents?",
    "slug": "how-to-customize-styling-of-heading-and-control-its-look-in-table-of-contents",
    "posts_count": 3,
    "created_at": "2024-11-13T20:23:59.145Z",
    "last_posted_at": "2024-11-15T19:59:12.570Z",
    "views": 188,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "jbirnick",
    "tags": [
      "outline",
      "styling"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 188
  },
  "posts": [
    {
      "id": 5604,
      "post_number": 1,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-11-13T20:23:59.265Z",
      "updated_at": "2024-12-19T04:59:57.006Z",
      "cooked": "<p>Hello!</p>\n<p>I am trying to make a custom heading style which should look something like this:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/4/42532b117bc0392f986d8dea867b65be4b48bb99.png\" data-download-href=\"https://forum.typst.app/uploads/default/42532b117bc0392f986d8dea867b65be4b48bb99\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/4/42532b117bc0392f986d8dea867b65be4b48bb99_2_690x82.png\" alt=\"image\" data-base62-sha1=\"9sJHpsHxn6fRUsWEcRSareyiUtz\" width=\"690\" height=\"82\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/4/42532b117bc0392f986d8dea867b65be4b48bb99_2_690x82.png, https://forum.typst.app/uploads/default/optimized/2X/4/42532b117bc0392f986d8dea867b65be4b48bb99_2_1035x123.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/4/42532b117bc0392f986d8dea867b65be4b48bb99_2_1380x164.png 2x\" data-dominant-color=\"FBFCFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1438×172 12.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I think the real way to do it is using:</p>\n<p><code>set heading(numbering(\"1.1 |\"))</code></p>\n<p>But I am finding that this produces:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/68823234d33f8534518f0842c5ecfa92555c7d65.png\" data-download-href=\"https://forum.typst.app/uploads/default/68823234d33f8534518f0842c5ecfa92555c7d65\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/original/2X/6/68823234d33f8534518f0842c5ecfa92555c7d65.png\" alt=\"image\" data-base62-sha1=\"eUwBfzeuxciavy4mNvVV3gmVv0h\" width=\"690\" height=\"50\" data-dominant-color=\"E9E9E9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">831×61 3.37 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Where i have increased the text size of the heading. Then I realized that my table of contents also increase in size:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/fce5a535ee2dadb08b29113910775c1845e8ea22.png\" data-download-href=\"https://forum.typst.app/uploads/default/fce5a535ee2dadb08b29113910775c1845e8ea22\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/fce5a535ee2dadb08b29113910775c1845e8ea22_2_690x432.png\" alt=\"image\" data-base62-sha1=\"A5ekNuorLpKgXuWSTWzWnrXDVqq\" width=\"690\" height=\"432\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/fce5a535ee2dadb08b29113910775c1845e8ea22_2_690x432.png, https://forum.typst.app/uploads/default/original/2X/f/fce5a535ee2dadb08b29113910775c1845e8ea22.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/fce5a535ee2dadb08b29113910775c1845e8ea22.png 2x\" data-dominant-color=\"FAF8F9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">814×510 34.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Could anyone provide me some info on:</p>\n<ol>\n<li>How to keep the outline text formatting irrelevant of the actual heading?</li>\n<li>How to produce a custom style for all top-level headers as I want?</li>\n</ol>\n<p>Kind regards</p>",
      "raw": "Hello!\n\nI am trying to make a custom heading style which should look something like this:\n\n![image|690x82](upload://9sJHpsHxn6fRUsWEcRSareyiUtz.png)\n\nI think the real way to do it is using:\n\n`set heading(numbering(\"1.1 |\"))`\n\nBut I am finding that this produces:\n\n![image|690x50](upload://eUwBfzeuxciavy4mNvVV3gmVv0h.png)\n\nWhere i have increased the text size of the heading. Then I realized that my table of contents also increase in size:\n\n![image|690x432](upload://A5ekNuorLpKgXuWSTWzWnrXDVqq.png)\n\nCould anyone provide me some info on:\n\n1. How to keep the outline text formatting irrelevant of the actual heading?\n2. How to produce a custom style for all top-level headers as I want?\n\nKind regards",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 545.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    },
    {
      "id": 5655,
      "post_number": 2,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-11-15T02:41:21.326Z",
      "updated_at": "2024-11-15T02:41:42.107Z",
      "cooked": "<p>Well how did you increase the text size? Please always share your code, otherwise we can’t fix it.</p>\n<p>The correct way to increase the size of a heading is this</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading: set text(30pt)\n</code></pre>\n<p>and this will not affect the table of contents.</p>",
      "raw": "Well how did you increase the text size? Please always share your code, otherwise we can't fix it.\n\nThe correct way to increase the size of a heading is this\n```typ\n#show heading: set text(30pt)\n```\nand this will not affect the table of contents.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 29.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 5682,
      "post_number": 3,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-11-15T19:59:12.570Z",
      "updated_at": "2024-11-15T19:59:12.570Z",
      "cooked": "<p>Perfect, this should be highlighted more clearly (or I might have overlooked it completely)</p>\n<p>You made me realize that for visuals only, of course <code>show</code> should be used</p>\n<p>Kind regards</p>",
      "raw": "Perfect, this should be highlighted more clearly (or I might have overlooked it completely)\n\nYou made me realize that for visuals only, of course `show` should be used\n\nKind regards",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 14.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    }
  ],
  "scraped_at": "2025-06-10T09:54:59.671659"
}
{
  "topic_metadata": {
    "id": 1714,
    "title": "How to make figure caption text have the same width as the figure?",
    "slug": "how-to-make-figure-caption-text-have-the-same-width-as-the-figure",
    "posts_count": 9,
    "created_at": "2024-11-13T21:49:25.504Z",
    "last_posted_at": "2025-03-18T08:20:01.515Z",
    "views": 418,
    "like_count": 7,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "slowjo",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 621
  },
  "posts": [
    {
      "id": 5605,
      "post_number": 1,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-11-13T21:49:25.703Z",
      "updated_at": "2024-12-19T05:00:29.223Z",
      "cooked": "<p>Hello!</p>\n<p>Suppose I have a figure:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/ec8f24a6a3109b6f79579fdca7243a11c0abeda8.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/ec8f24a6a3109b6f79579fdca7243a11c0abeda8\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/original/2X/e/ec8f24a6a3109b6f79579fdca7243a11c0abeda8.jpeg\" alt=\"image\" data-base62-sha1=\"xKHmGjTIPkgBmVBFAAtQz5JHaVq\" width=\"604\" height=\"500\" data-dominant-color=\"7A9CAA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">893×739 91.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>How to do this in typst?</p>\n<p>A MWE using <code>rect</code> here:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#figure(\n  rect(width:10cm, height: 5cm),\n  caption: \n    [_A coastal hydrodynamics simulation of wave impact on a light house using a particle based approach. Figure courtesy of Ihmsen et al._]\n) \n\n</code></pre>\n<p>Can I make it a default somehow?</p>\n<p>Kind regards</p>",
      "raw": "Hello!\n\nSuppose I have a figure:\n\n\n![image|604x500](upload://xKHmGjTIPkgBmVBFAAtQz5JHaVq.jpeg)\n\n\nHow to do this in typst?\n\nA MWE using `rect` here:\n\n\n```typst\n#figure(\n  rect(width:10cm, height: 5cm),\n  caption: \n    [_A coastal hydrodynamics simulation of wave impact on a light house using a particle based approach. Figure courtesy of Ihmsen et al._]\n) \n\n```\n\nCan I make it a default somehow?\n\nKind regards",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 55,
      "score": 1576.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    },
    {
      "id": 5609,
      "post_number": 2,
      "username": "slowjo",
      "name": "slowjo",
      "created_at": "2024-11-13T23:13:59.750Z",
      "updated_at": "2024-11-13T23:13:59.750Z",
      "cooked": "<p>Hi, you can use a show rule on the figure to measure its size, and use a nested show rule on the caption to restraining its size to the previously measured one.</p>\n<p>I believe this to be what you’re going for:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(width: auto, height: auto, margin: 2em)\n#show figure: it =&gt; {\n\tlet w = measure(it.body).width\n\tset par(justify: true)\n\tshow figure.caption: cap =&gt; box(width: w, cap)\n\tit\n}\n\n#figure(\n  rect(width:10cm, height: 5cm),\n  caption:\n    [_A coastal hydrodynamics simulation of wave impact on a light house using a particle based approach. Figure courtesy of Ihmsen et al._]\n)\n</code></pre>\n<p>which creates<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/1/13bb7b01facc8f60a0341ffdeb1b092cc1831f41.png\" alt=\"image\" data-base62-sha1=\"2OyKjG8k4ALUKK1Mcx37KDVyKNb\" width=\"655\" height=\"457\"></p>",
      "raw": "Hi, you can use a show rule on the figure to measure its size, and use a nested show rule on the caption to restraining its size to the previously measured one.\n\nI believe this to be what you're going for:\n```typst\n#set page(width: auto, height: auto, margin: 2em)\n#show figure: it => {\n\tlet w = measure(it.body).width\n\tset par(justify: true)\n\tshow figure.caption: cap => box(width: w, cap)\n\tit\n}\n\n#figure(\n  rect(width:10cm, height: 5cm),\n  caption:\n    [_A coastal hydrodynamics simulation of wave impact on a light house using a particle based approach. Figure courtesy of Ihmsen et al._]\n)\n```\nwhich creates\n![image|655x457](upload://2OyKjG8k4ALUKK1Mcx37KDVyKNb.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 59.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 793
    },
    {
      "id": 5610,
      "post_number": 3,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-11-13T23:23:24.906Z",
      "updated_at": "2024-11-13T23:23:37.365Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"slowjo\" data-post=\"2\" data-topic=\"1714\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/220F66/48.png\" class=\"avatar\"> slowjo:</div>\n<blockquote>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(width: auto, height: auto, margin: 2em)\n#show figure: it =&gt; {\n\tlet w = measure(it.body).width\n\tset par(justify: true)\n\tshow figure.caption: cap =&gt; box(width: w, cap)\n\tit\n}\n\n#figure(\n  rect(width:10cm, height: 5cm),\n  caption:\n    [_A coastal hydrodynamics simulation of wave impact on a light house using a particle based approach. Figure courtesy of Ihmsen et al._]\n)\n</code></pre>\n</blockquote>\n</aside>\n<p>Amazing!</p>\n<p>Just one question, if you use an actual image and set width to: <code>width: 60%</code> does the function you made also break for you? I get a width of 0pt in that case…</p>\n<p>Kind regards</p>",
      "raw": "[quote=\"slowjo, post:2, topic:1714\"]\n```typst\n#set page(width: auto, height: auto, margin: 2em)\n#show figure: it => {\n\tlet w = measure(it.body).width\n\tset par(justify: true)\n\tshow figure.caption: cap => box(width: w, cap)\n\tit\n}\n\n#figure(\n  rect(width:10cm, height: 5cm),\n  caption:\n    [_A coastal hydrodynamics simulation of wave impact on a light house using a particle based approach. Figure courtesy of Ihmsen et al._]\n)\n```\n[/quote]\n\nAmazing!\n\nJust one question, if you use an actual image and set width to: `width: 60%` does the function you made also break for you? I get a width of 0pt in that case..\n\nKind regards",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 47,
      "score": 34.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    },
    {
      "id": 5611,
      "post_number": 4,
      "username": "slowjo",
      "name": "slowjo",
      "created_at": "2024-11-13T23:40:58.511Z",
      "updated_at": "2024-11-13T23:40:58.511Z",
      "cooked": "<p>in that case you need to still wrap in in a <code>layout</code> call, to give it the context it needs</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show figure: it =&gt; layout( sz =&gt; {\n\tlet w = measure(\n\t\t\tit.body,\n\t\t\twidth: sz.width\n\t\t).width\n\tset par(justify: true)\n\tshow figure.caption: cap =&gt; box(width: w, align(left,emph(cap)))\n\tit\n})\n\n</code></pre>",
      "raw": "in that case you need to still wrap in in a `layout` call, to give it the context it needs\n```typst\n#show figure: it => layout( sz => {\n\tlet w = measure(\n\t\t\tit.body,\n\t\t\twidth: sz.width\n\t\t).width\n\tset par(justify: true)\n\tshow figure.caption: cap => box(width: w, align(left,emph(cap)))\n\tit\n})\n\n```",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 43,
      "score": 373.6,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 793
    },
    {
      "id": 5614,
      "post_number": 5,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-11-13T23:45:30.972Z",
      "updated_at": "2024-11-13T23:45:30.972Z",
      "cooked": "<p>Amazing, thanks a ton!</p>\n<p>What is it that the layout does and how do I know when to use it? I don’t think I would have realized that on my own…</p>",
      "raw": "Amazing, thanks a ton!\n\nWhat is it that the layout does and how do I know when to use it? I don't think I would have realized that on my own..",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 28.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    },
    {
      "id": 5615,
      "post_number": 6,
      "username": "slowjo",
      "name": "slowjo",
      "created_at": "2024-11-13T23:52:53.597Z",
      "updated_at": "2024-11-13T23:52:53.597Z",
      "cooked": "<p>I find typst has great <a href=\"https://typst.app/docs/reference/layout/layout/\">documentation</a>, it’s worth going through to find out what’s even possible.</p>\n<p>The <code>layout</code> function makes the dimensions of the parent container available. Setting your <code>width: 60%</code> is 60% <em>of the parent’s dimensions</em> + <code>0pt</code> of absolute size. Without the knowledge of the parent’s dimensions only the <code>0pt</code> remains, which is why the first solution broke for relative sizes.</p>",
      "raw": "I find typst has great [documentation](https://typst.app/docs/reference/layout/layout/), it's worth going through to find out what's even possible.\n\nThe `layout` function makes the dimensions of the parent container available. Setting your `width: 60%` is 60% _of the parent's dimensions_ + `0pt` of absolute size. Without the knowledge of the parent's dimensions only the `0pt` remains, which is why the first solution broke for relative sizes.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 40,
      "score": 38.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 793
    },
    {
      "id": 9932,
      "post_number": 7,
      "username": "Philipp",
      "name": "Philipp",
      "created_at": "2025-03-17T16:56:51.573Z",
      "updated_at": "2025-03-17T16:58:44.924Z",
      "cooked": "<p>The trick to wrap the caption in a box which worked in typst 0.12 seems to be broken in typst 0.13, see <a href=\"https://github.com/typst/typst/issues/5472#issuecomment-2730205275\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Paragraph justification sometimes doesn't use the full page width · Issue #5472 · typst/typst · GitHub</a></p>\n<p>I had to replace</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">show figure.caption: cap =&gt; box(width: w, cap)\n</code></pre>\n<p>with</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">show figure.caption: it =&gt; box(width: w, context[\n  #it.supplement #it.counter.display()#it.separator#it.body\n])\n</code></pre>\n<p>to get it to work again</p>",
      "raw": "The trick to wrap the caption in a box which worked in typst 0.12 seems to be broken in typst 0.13, see https://github.com/typst/typst/issues/5472#issuecomment-2730205275\n\nI had to replace\n```typ\nshow figure.caption: cap => box(width: w, cap)\n```\nwith\n```typ\nshow figure.caption: it => box(width: w, context[\n  #it.supplement #it.counter.display()#it.separator#it.body\n])\n```\nto get it to work again",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 9.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 798
    },
    {
      "id": 9938,
      "post_number": 8,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-18T07:48:54.082Z",
      "updated_at": "2025-03-18T07:48:54.082Z",
      "cooked": "<p>Can you give a small example that shows the problem with Typst 0.13? The examples from <a class=\"mention\" href=\"/u/slowjo\">@slowjo</a> seem to work fine in 0.13.1</p>",
      "raw": "Can you give a small example that shows the problem with Typst 0.13? The examples from @slowjo seem to work fine in 0.13.1",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 14.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9939,
      "post_number": 9,
      "username": "Philipp",
      "name": "Philipp",
      "created_at": "2025-03-18T08:20:01.515Z",
      "updated_at": "2025-03-18T08:25:56.903Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/sijo\">@sijo</a> My previous reply contains a link to a github issue that shows a minimized example.</p>\n<p>You will only see it if - without justification - the caption is smaller than the figure width. Then - with justification - it is not streched horizontally to the width of the figure, but only to the width of the longest line.<br>\nFor the example given above, the difference between the width of the longest line and the figure might be a few pixels only, and thus it might not be apparent. The example I linked makes it clear.</p>",
      "raw": "@sijo My previous reply contains a link to a github issue that shows a minimized example.\n\nYou will only see it if - without justification - the caption is smaller than the figure width. Then - with justification - it is not streched horizontally to the width of the figure, but only to the width of the longest line.\nFor the example given above, the difference between the width of the longest line and the figure might be a few pixels only, and thus it might not be apparent. The example I linked makes it clear.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 798
    }
  ],
  "scraped_at": "2025-06-10T09:54:58.939851"
}
{
  "topic_metadata": {
    "id": 1716,
    "title": "How to change numbering in Appendix?",
    "slug": "how-to-change-numbering-in-appendix",
    "posts_count": 7,
    "created_at": "2024-11-13T22:16:24.394Z",
    "last_posted_at": "2024-12-03T13:26:39.670Z",
    "views": 1025,
    "like_count": 7,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "slowjo",
    "tags": [
      "scripting",
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 799
  },
  "posts": [
    {
      "id": 5607,
      "post_number": 1,
      "username": "kazuyanagimoto",
      "name": "Kazuharu Yanagimoto",
      "created_at": "2024-11-13T22:16:24.774Z",
      "updated_at": "2024-11-14T19:37:52.405Z",
      "cooked": "<p>I’m writing a thesis and want to reset a numbering in Appendix.</p>\n<p>I managed to reset the numbering of the headings by</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set heading(numbering: \"A.1.1\", supplement: [Appendix])\n#counter(heading).update(0)\n#text(size: 2em)[Appendix]\n</code></pre>\n<p>I also want to reset the numbering of Figures and Tables and to use a numbering like “Table A1”, “Figure A2”. Is it possible to implement it?</p>",
      "raw": "I'm writing a thesis and want to reset a numbering in Appendix.\n\nI managed to reset the numbering of the headings by\n\n```typst\n#set heading(numbering: \"A.1.1\", supplement: [Appendix])\n#counter(heading).update(0)\n#text(size: 2em)[Appendix]\n```\n\nI also want to reset the numbering of Figures and Tables and to use a numbering like \"Table A1\", \"Figure A2\". Is it possible to implement it?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 90,
      "score": 5238.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 803
    },
    {
      "id": 5608,
      "post_number": 2,
      "username": "slowjo",
      "name": "slowjo",
      "created_at": "2024-11-13T23:03:29.835Z",
      "updated_at": "2024-11-13T23:03:29.835Z",
      "cooked": "<p>Typst currently needs a workaround for this to work, as displaying the headings somehow doesn’t correctly track the numbering that’s set.</p>\n<p>I’m in the same situation as you, and I currently got something like the following in my template:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let backmatter(content) = {\n\tset heading(numbering: \"A.1\")\n\tcounter(heading).update(0)\n\tstate(\"backmatter\").update(true)\n\tcontent\n}\n#set figure(numbering: it =&gt; {\n\t//workaround...\n\tlet appx = state(\"backmatter\", false).get()\n\tlet alph = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n\tlet hdr = counter(heading).get().at(0)\n\tif appx [#alph.at(hdr - 1).#it]\n\telse [#hdr.#it]\n})\n#show heading.where(level: 1): hdr =&gt; {\n\tcounter(figure.where(kind:image)).update(0)\n\tcounter(figure.where(kind:table)).update(0)\n\thdr\n}\n\n// Example\n#set heading(numbering: \"1.1\")\n#let testfig(caption) = {\n\tfigure(box(width:3cm, height:1cm, stroke: 1pt), caption: caption)\n}\n#set page(width: auto, height: auto, margin: 2em)\n\n= Start\nCiting the figures in order @first, @second, and @third.\n#testfig[First Box] &lt;first&gt;\n\n= Next\n#lorem(10)\n#testfig[Second Box] &lt;second&gt;\n\n#show: backmatter\n\n= Appendix\n#lorem(10)\n#testfig[Third Box] &lt;third&gt;\n</code></pre>\n<p>which produces<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/3/33f3171480662163a9c70c61e4bb76d5cf9e628c.png\" data-download-href=\"https://forum.typst.app/uploads/default/33f3171480662163a9c70c61e4bb76d5cf9e628c\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/3/33f3171480662163a9c70c61e4bb76d5cf9e628c_2_504x500.png\" alt=\"image\" data-base62-sha1=\"7pzauBljOrvCoPmwqOdr4odnkvy\" width=\"504\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/3/33f3171480662163a9c70c61e4bb76d5cf9e628c_2_504x500.png, https://forum.typst.app/uploads/default/original/2X/3/33f3171480662163a9c70c61e4bb76d5cf9e628c.png 1.5x, https://forum.typst.app/uploads/default/original/2X/3/33f3171480662163a9c70c61e4bb76d5cf9e628c.png 2x\" data-dominant-color=\"F7F7F7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">661×655 106 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Typst currently needs a workaround for this to work, as displaying the headings somehow doesn't correctly track the numbering that's set.\n\nI'm in the same situation as you, and I currently got something like the following in my template:\n\n```typst\n#let backmatter(content) = {\n\tset heading(numbering: \"A.1\")\n\tcounter(heading).update(0)\n\tstate(\"backmatter\").update(true)\n\tcontent\n}\n#set figure(numbering: it => {\n\t//workaround...\n\tlet appx = state(\"backmatter\", false).get()\n\tlet alph = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n\tlet hdr = counter(heading).get().at(0)\n\tif appx [#alph.at(hdr - 1).#it]\n\telse [#hdr.#it]\n})\n#show heading.where(level: 1): hdr => {\n\tcounter(figure.where(kind:image)).update(0)\n\tcounter(figure.where(kind:table)).update(0)\n\thdr\n}\n\n// Example\n#set heading(numbering: \"1.1\")\n#let testfig(caption) = {\n\tfigure(box(width:3cm, height:1cm, stroke: 1pt), caption: caption)\n}\n#set page(width: auto, height: auto, margin: 2em)\n\n= Start\nCiting the figures in order @first, @second, and @third.\n#testfig[First Box] <first>\n\n= Next\n#lorem(10)\n#testfig[Second Box] <second>\n\n#show: backmatter\n\n= Appendix\n#lorem(10)\n#testfig[Third Box] <third>\n```\n\nwhich produces \n![image|504x500](upload://7pzauBljOrvCoPmwqOdr4odnkvy.png)",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 3,
      "reads": 89,
      "score": 157.8,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 793
    },
    {
      "id": 5625,
      "post_number": 3,
      "username": "kazuyanagimoto",
      "name": "Kazuharu Yanagimoto",
      "created_at": "2024-11-14T09:54:05.161Z",
      "updated_at": "2024-11-14T09:54:05.161Z",
      "cooked": "<p>It works! Thank you. Hope Typst will officially support these features.</p>",
      "raw": "It works! Thank you. Hope Typst will officially support these features.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 77,
      "score": 20.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 803
    },
    {
      "id": 5640,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-14T19:38:00.748Z",
      "updated_at": "2024-11-14T19:38:00.748Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/kazuyanagimoto\">@kazuyanagimoto</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @kazuyanagimoto, welcome to the forum! I've changed your question post's title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 76,
      "score": 165.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5643,
      "post_number": 5,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-14T19:49:17.351Z",
      "updated_at": "2024-11-14T19:49:42.834Z",
      "cooked": "<p>This is the proper way to do it (as of Typst 0.11 and 0.12)! The code inside the figure numbering function is given the original location of the figure as context, meaning any counter accesses in that function (including to the heading counter) will correctly return the value at where the figure was placed, even if the numbering is used in the outline. This won’t hold if you create a new context block inside the figure numbering function (then, the context will be relative to where the <em>numbering</em> is placed, not to the figure itself), so please don’t do that.</p>\n<p>Regarding your solution, I’d note that the numbering function can be used to specify numbering formats (such as alphabetic) instead of having to implement that on your own: <a href=\"https://typst.app/docs/reference/model/numbering/\" class=\"inline-onebox\">Numbering Function – Typst Documentation</a></p>\n<p>Therefore, your figure set rule can be improved as follows (giving the same results):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set figure(numbering: n =&gt; {\n  let appx = state(\"backmatter\", false).get()\n  let hdr = counter(heading).get()\n  let format = if appx {\n    \"A.1.\"\n  } else {\n    \"1.1\"\n  }\n  // Replace 'hdr.first()' by '..hdr' to display\n  // all heading levels\n  numbering(format, hdr.first(), n)\n})\n</code></pre>",
      "raw": "This is the proper way to do it (as of Typst 0.11 and 0.12)! The code inside the figure numbering function is given the original location of the figure as context, meaning any counter accesses in that function (including to the heading counter) will correctly return the value at where the figure was placed, even if the numbering is used in the outline. This won't hold if you create a new context block inside the figure numbering function (then, the context will be relative to where the _numbering_ is placed, not to the figure itself), so please don't do that.\n\nRegarding your solution, I'd note that the numbering function can be used to specify numbering formats (such as alphabetic) instead of having to implement that on your own: https://typst.app/docs/reference/model/numbering/\n\nTherefore, your figure set rule can be improved as follows (giving the same results):\n\n```typ\n#set figure(numbering: n => {\n  let appx = state(\"backmatter\", false).get()\n  let hdr = counter(heading).get()\n  let format = if appx {\n    \"A.1.\"\n  } else {\n    \"1.1\"\n  }\n  // Replace 'hdr.first()' by '..hdr' to display\n  // all heading levels\n  numbering(format, hdr.first(), n)\n})\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 70,
      "score": 54.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5645,
      "post_number": 6,
      "username": "slowjo",
      "name": "slowjo",
      "created_at": "2024-11-14T21:15:44.086Z",
      "updated_at": "2024-11-14T21:15:44.086Z",
      "cooked": "<p>huh, yeah you’re right, reimplementing the numbering isn’t necessary, not sure anymore why I ended up doing that.<br>\nmy point about the numbering not being correctly tracked is that i’d like to be able to just use <code>counter(heading).display()</code>, and for it to use the correct <code>numbering</code> of the heading. This does however not work as I would expect.</p>\n<p>Your answer did however get me thinking, and I took some time to tinker. I finally figured out how to get this to work without having multiple “sources of truth” as to what <code>numbering</code> to use where. It also does away with having to use the “backmatter” <code>state</code>, and is therefore cleaner.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set figure(numbering: n =&gt; {\n\tlet hdr = counter(heading).get().first()\n\tlet num = query(\n\t\tselector(heading).before(here())\n\t).last().numbering\n\tnumbering(num, hdr, n)\n})\n</code></pre>\n<p>this seems to work correctly, in the figures, references, and outlines as well.</p>",
      "raw": "huh, yeah you're right, reimplementing the numbering isn't necessary, not sure anymore why I ended up doing that.\nmy point about the numbering not being correctly tracked is that i'd like to be able to just use `counter(heading).display()`, and for it to use the correct `numbering` of the heading. This does however not work as I would expect.\n\nYour answer did however get me thinking, and I took some time to tinker. I finally figured out how to get this to work without having multiple \"sources of truth\" as to what `numbering` to use where. It also does away with having to use the \"backmatter\" `state`, and is therefore cleaner.\n```typst\n#set figure(numbering: n => {\n\tlet hdr = counter(heading).get().first()\n\tlet num = query(\n\t\tselector(heading).before(here())\n\t).last().numbering\n\tnumbering(num, hdr, n)\n})\n```\nthis seems to work correctly, in the figures, references, and outlines as well.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 64,
      "score": 122.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 793
    },
    {
      "id": 6282,
      "post_number": 7,
      "username": "Waldo",
      "name": "Waldo",
      "created_at": "2024-12-03T13:26:39.670Z",
      "updated_at": "2024-12-03T14:12:10.207Z",
      "cooked": "<p>Any Idea how to make this work with images in a Grid using Subpar?</p>\n<pre><code class=\"lang-auto\">#import \"@preview/subpar:0.2.0\"\n#subpar.grid(align: top, gap: 2em,\n  figure(image(\"/Figures/andromeda.png\"), caption: [\n    An image of the andromeda galaxy.\n  ]), &lt;a&gt;,\n  figure(image(\"/Figures/andromeda.png\"), caption: [\n    A sunset illuminating the sky above a mountain range.\n  ]), &lt;b&gt;,\n  figure(image(\"/Figures/andromeda.png\"), caption: [\n    A sunset illuminating the sky above a mountain range.\n  ]), &lt;c&gt;,\n\n\n  columns: (0.33fr, 0.33fr, 0.33fr),\n  caption: [A figure composed of two sub figures.],\n  label: &lt;full&gt;,\n)\n</code></pre>\n<p>In my Appendix, this is becomes a numbered Figure X, while normal Figures use A.X</p>\n<p>Edit: I figured you can do the same in the numbering of the grid, but i’m not sure how to overwrite it globally:</p>\n<pre><code class=\"lang-auto\">#subpar.grid(numbering: n =&gt; {\n\tlet hdr = counter(heading).get().first()\n\tlet num = query(\n\t\tselector(heading).before(here())\n\t).last().numbering\n\tnumbering(num, hdr, n)\n},\n</code></pre>",
      "raw": "Any Idea how to make this work with images in a Grid using Subpar?\n\n```\n#import \"@preview/subpar:0.2.0\"\n#subpar.grid(align: top, gap: 2em,\n  figure(image(\"/Figures/andromeda.png\"), caption: [\n    An image of the andromeda galaxy.\n  ]), <a>,\n  figure(image(\"/Figures/andromeda.png\"), caption: [\n    A sunset illuminating the sky above a mountain range.\n  ]), <b>,\n  figure(image(\"/Figures/andromeda.png\"), caption: [\n    A sunset illuminating the sky above a mountain range.\n  ]), <c>,\n\n\n  columns: (0.33fr, 0.33fr, 0.33fr),\n  caption: [A figure composed of two sub figures.],\n  label: <full>,\n)\n```\n\nIn my Appendix, this is becomes a numbered Figure X, while normal Figures use A.X\n\nEdit: I figured you can do the same in the numbering of the grid, but i'm not sure how to overwrite it globally:\n\n\n```\n#subpar.grid(numbering: n => {\n\tlet hdr = counter(heading).get().first()\n\tlet num = query(\n\t\tselector(heading).before(here())\n\t).last().numbering\n\tnumbering(num, hdr, n)\n},\n```",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 53,
      "score": 25.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 880
    }
  ],
  "scraped_at": "2025-06-10T09:54:58.211631"
}
{
  "topic_metadata": {
    "id": 1722,
    "title": "How to force inner variable to resolve first?",
    "slug": "how-to-force-inner-variable-to-resolve-first",
    "posts_count": 2,
    "created_at": "2024-11-14T06:00:37.249Z",
    "last_posted_at": "2024-11-14T06:44:32.855Z",
    "views": 42,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 144
  },
  "posts": [
    {
      "id": 5621,
      "post_number": 1,
      "username": "hyoo",
      "name": "Hyunbin Yoo",
      "created_at": "2024-11-14T06:00:37.484Z",
      "updated_at": "2024-11-14T06:01:01.297Z",
      "cooked": "<p><code>inner</code> is a dictionary that resolves to text. <code>outer</code> is a function that receives two strings, <code>name</code> and <code>attitude</code>. <code>attitude</code> is one of “kind” and “rude”. However I get this error:</p>\n<blockquote>\n<p>Dictionary does not contain key “attitude” (line 6)</p>\n</blockquote>\n<p>Is this because <code>attitude</code> is being considered a key of <code>inner</code> rather than a parameter of <code>outer</code>? How can I fix my code?</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let inner = (\n  kind: \"Hello,\",\n  rude: \"What up,\"\n)\n\n#let outer(name, attitude) = inner.attitude + name\n\n#outer(\"Steve\", \"rude\")\n</code></pre>",
      "raw": "```inner``` is a dictionary that resolves to text. ```outer``` is a function that receives two strings, ```name``` and ```attitude```. ```attitude``` is one of \"kind\" and \"rude\". However I get this error:\n> Dictionary does not contain key \"attitude\" (line 6)\n\nIs this because ```attitude``` is being considered a key of ```inner``` rather than a parameter of ```outer```? How can I fix my code?\n\n\n``` typst\n#let inner = (\n  kind: \"Hello,\",\n  rude: \"What up,\"\n)\n\n#let outer(name, attitude) = inner.attitude + name\n\n#outer(\"Steve\", \"rude\")\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 34.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 806
    },
    {
      "id": 5622,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2024-11-14T06:44:32.855Z",
      "updated_at": "2024-11-14T06:44:32.855Z",
      "cooked": "<p>Hello,</p>\n<p>you are correct, if you write it like that Typst tries to access the key <code>attitude</code>. You have to use <code>at</code>: <code>inner.at(attitude)</code></p>\n<p>From the <a href=\"https://typst.app/docs/reference/foundations/dictionary/\">documentation</a>:</p>\n<blockquote>\n<p>You can access and create dictionary entries with the .at() method. If you know the key statically, you can alternatively use field access notation (.key) to access the value.</p>\n</blockquote>",
      "raw": "Hello,\n\nyou are correct, if you write it like that Typst tries to access the key `attitude`. You have to use `at`: `inner.at(attitude)`\n\nFrom the [documentation](https://typst.app/docs/reference/foundations/dictionary/):\n> You can access and create dictionary entries with the .at() method. If you know the key statically, you can alternatively use field access notation (.key) to access the value.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 19.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    }
  ],
  "scraped_at": "2025-06-10T09:54:57.473050"
}
{
  "topic_metadata": {
    "id": 1724,
    "title": "How I fill a two dimensional array with two nested loops?",
    "slug": "how-i-fill-a-two-dimensional-array-with-two-nested-loops",
    "posts_count": 3,
    "created_at": "2024-11-14T10:36:14.690Z",
    "last_posted_at": "2024-11-14T11:47:56.168Z",
    "views": 139,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "slowjo",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 184
  },
  "posts": [
    {
      "id": 5627,
      "post_number": 1,
      "username": "Flavio",
      "name": "Flavio",
      "created_at": "2024-11-14T10:36:14.849Z",
      "updated_at": "2024-11-14T11:04:27.579Z",
      "cooked": "<p>Hi,<br>\nI’m trying to fill a two dimensional array with a nested for loops.<br>\nI would like to get the following:</p>\n<p>((“0,0”,“0,1”,“0,2”),(“1,0”,“1,1”,“1,2”))</p>\n<p>My attemp is this:</p>\n<pre><code>#{\n  let i = 0\n  let j = 0\n  let col-num = 3\n  let row-num = 2\n  let values = while i &lt; row-num {\n    (while j &lt; col-num{\n      let v = str(i) + \",\" + str(j)\n      (v,)\n      j = j + 1\n    },)\n    i = i + 1\n  }\n  values\n}\n</code></pre>\n<p>And i got:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/1/14a56ad7256c399c444a0d170c85b818ca39b63f.png\" alt=\"image\" data-base62-sha1=\"2WDXaR2TfDF0ELZD8iCEE4JFNa7\" width=\"378\" height=\"44\"></p>\n<p>But I don’t find any documentation about it.<br>\nThanks a lot!</p>",
      "raw": "Hi,\nI'm trying to fill a two dimensional array with a nested for loops.\nI would like to get the following:\n\n((\"0,0\",\"0,1\",\"0,2\"),(\"1,0\",\"1,1\",\"1,2\"))\n\nMy attemp is this:\n\n    #{\n      let i = 0\n      let j = 0\n      let col-num = 3\n      let row-num = 2\n      let values = while i < row-num {\n        (while j < col-num{\n          let v = str(i) + \",\" + str(j)\n          (v,)\n          j = j + 1\n        },)\n        i = i + 1\n      }\n      values\n    }\nAnd i got:\n\n![image|378x44](upload://2WDXaR2TfDF0ELZD8iCEE4JFNa7.png)\n\nBut I don't find any documentation about it. \nThanks a lot!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 541.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 622
    },
    {
      "id": 5628,
      "post_number": 2,
      "username": "Flavio",
      "name": "Flavio",
      "created_at": "2024-11-14T11:06:53.286Z",
      "updated_at": "2024-11-14T11:07:03.006Z",
      "cooked": "<p>Found it!</p>\n<pre><code>#{\n  let i = 0\n  let col-num = 3\n  let row-num = 2\n  let values = while i &lt; row-num {\n    let j = 0\n    (while j &lt; col-num{\n      let v = str(i) + \",\" + str(j)\n      (v,)\n      j = j + 1\n    },)\n    i = i + 1\n  }\n  values\n}\n</code></pre>",
      "raw": "Found it!\n\n    #{\n      let i = 0\n      let col-num = 3\n      let row-num = 2\n      let values = while i < row-num {\n        let j = 0\n        (while j < col-num{\n          let v = str(i) + \",\" + str(j)\n          (v,)\n          j = j + 1\n        },)\n        i = i + 1\n      }\n      values\n    }",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 20.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 622
    },
    {
      "id": 5631,
      "post_number": 3,
      "username": "slowjo",
      "name": "slowjo",
      "created_at": "2024-11-14T11:47:56.168Z",
      "updated_at": "2024-11-14T11:47:56.168Z",
      "cooked": "<p>Hi, you don’t even need loops to do this, using <code>.map()</code> on arrays is pretty powerful:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#{\n\tlet col-num = 3\n\tlet row-num = 2\n   \tlet rows = array.range(row-num)\n\tlet cols = array.range(col-num)\n\n\trows.map(r =&gt; cols.map(c =&gt; str(r) + \",\" + str(c)))\n}\n</code></pre>",
      "raw": "Hi, you don't even need loops to do this, using `.map()` on arrays is pretty powerful:\n```typst\n#{\n\tlet col-num = 3\n\tlet row-num = 2\n   \tlet rows = array.range(row-num)\n\tlet cols = array.range(col-num)\n\n\trows.map(r => cols.map(c => str(r) + \",\" + str(c)))\n}\n```",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 30.4,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 793
    }
  ],
  "scraped_at": "2025-06-10T09:54:56.761883"
}
{
  "topic_metadata": {
    "id": 1728,
    "title": "Difference between inset and outset?",
    "slug": "difference-between-inset-and-outset",
    "posts_count": 2,
    "created_at": "2024-11-14T16:34:40.149Z",
    "last_posted_at": "2024-11-14T19:38:57.527Z",
    "views": 131,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "NNS",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 103
  },
  "posts": [
    {
      "id": 5636,
      "post_number": 1,
      "username": "jlb",
      "name": "Jean-Louis",
      "created_at": "2024-11-14T16:34:40.371Z",
      "updated_at": "2024-11-14T16:35:45.749Z",
      "cooked": "<p>I’m trying to understand the difference between “inset” and “outset” in a <strong>box</strong> or a <strong>block</strong> ?</p>\n<ul>\n<li>Exemple 1 : inset</li>\n</ul>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#box(fill: red, inset: (x: 10pt, y: 10pt), outset: (x: 0pt, y:0pt), stroke: 2pt)[My red box.]\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/2/2c93b985ffcc904726c96005c6cc2219ac66d66e.png\" alt=\"RedBox\" data-base62-sha1=\"6mlvsur9M4G0zd5Gjiaj2BTxFBc\" width=\"131\" height=\"56\"></p>\n<ul>\n<li>Exemple 2 : outset</li>\n</ul>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#box(fill: blue, inset: (x: 0pt, y: 0pt), outset: (x: 10pt, y:10pt), stroke: 2pt)[My blue box.]\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/6/6f427b6e254f97cceafa4ffc84c8349d709c3097.png\" alt=\"BlueBox\" data-base62-sha1=\"fSfr4ap2KjflzTf5nLJuKyvCTA3\" width=\"137\" height=\"54\"></p>\n<p>What is the difference ?</p>\n<p>Could you provide examples and explanations ?</p>\n<p>Thanks a lot.</p>",
      "raw": "I'm trying to understand the difference between \"inset\" and \"outset\" in a **box** or a **block** ?\n\n- Exemple 1 : inset\n```typ \n#box(fill: red, inset: (x: 10pt, y: 10pt), outset: (x: 0pt, y:0pt), stroke: 2pt)[My red box.]\n```\n![RedBox|131x56](upload://6mlvsur9M4G0zd5Gjiaj2BTxFBc.png)\n\n- Exemple 2 : outset\n```typ\n#box(fill: blue, inset: (x: 0pt, y: 0pt), outset: (x: 10pt, y:10pt), stroke: 2pt)[My blue box.]\n```\n![BlueBox|137x54](upload://fSfr4ap2KjflzTf5nLJuKyvCTA3.png)\n\n\n\nWhat is the difference ?\n\nCould you provide examples and explanations ?\n\nThanks a lot.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 581.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 809
    },
    {
      "id": 5641,
      "post_number": 2,
      "username": "NNS",
      "name": "Nikolai Neff-Sarnow",
      "created_at": "2024-11-14T19:38:57.527Z",
      "updated_at": "2024-11-14T19:39:39.205Z",
      "cooked": "<p>Outset does not affect layout, inset does.<br>\nsee here: <a href=\"https://typst.app/project/rMIXEST1NkwULQsCtoPR24\" class=\"inline-onebox\">Typst</a><br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/7/7c1247f05d6b550a9015a2df9920d64af4f4508f.png\" alt=\"grafik\" data-base62-sha1=\"hHAn8Fg7I9gF0UAWha8Oj6iBOwf\" width=\"510\" height=\"244\"></p>",
      "raw": "Outset does not affect layout, inset does.\nsee here: https://typst.app/project/rMIXEST1NkwULQsCtoPR24\n![grafik|510x244](upload://hHAn8Fg7I9gF0UAWha8Oj6iBOwf.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 27,
      "score": 60.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 754
    }
  ],
  "scraped_at": "2025-06-10T09:54:55.971892"
}
{
  "topic_metadata": {
    "id": 1730,
    "title": "Why is I-figured broken with custom template?",
    "slug": "why-is-i-figured-broken-with-custom-template",
    "posts_count": 11,
    "created_at": "2024-11-14T17:53:07.696Z",
    "last_posted_at": "2024-11-19T00:44:00.314Z",
    "views": 179,
    "like_count": 1,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "Flexschmex",
    "tags": [
      "scripting",
      "figures"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1242
  },
  "posts": [
    {
      "id": 5638,
      "post_number": 1,
      "username": "Flexschmex",
      "name": "Felix",
      "created_at": "2024-11-14T17:53:07.815Z",
      "updated_at": "2024-11-19T00:44:23.302Z",
      "cooked": "<p>I am currently customizing this template: <a href=\"https://typst.app/universe/package/tgm-hit-thesis/\" class=\"inline-onebox\">tgm-hit-thesis – Typst Universe</a></p>\n<p>It is using the i-figured package which is supposed to reset the figure counters on new chapters. Therefore, the first figure in chapter number X should be numbered X.1. But it is not happening and i cannot get it to work.</p>\n<p>I am really grateful for any pointers.</p>",
      "raw": "I am currently customizing this template: https://typst.app/universe/package/tgm-hit-thesis/\n\nIt is using the i-figured package which is supposed to reset the figure counters on new chapters. Therefore, the first figure in chapter number X should be numbered X.1. But it is not happening and i cannot get it to work. \n\nI am really grateful for any pointers.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 372.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 810
    },
    {
      "id": 5654,
      "post_number": 2,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-11-15T02:35:53.557Z",
      "updated_at": "2024-11-15T02:35:53.557Z",
      "cooked": "<p>I tried the template and it seems like it has section-based figure numbers already built in. So I don’t know what’s the problem and why you would even do it with a separate package then?</p>\n<p>Please also share your code.</p>",
      "raw": "I tried the template and it seems like it has section-based figure numbers already built in. So I don't know what's the problem and why you would even do it with a separate package then?\n\nPlease also share your code.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 6.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 5664,
      "post_number": 3,
      "username": "Flexschmex",
      "name": "Felix",
      "created_at": "2024-11-15T09:51:37.195Z",
      "updated_at": "2024-11-15T09:51:37.195Z",
      "cooked": "<p>Thank you for your time.<br>\nYou are right, the template has section-based figure numbers, using the i-figured package. The catch is, they don’t seem to work for me. I am not trying to include a separate package, as the package is already included in the template.</p>\n<p>Try to include two figures in two different chapters. I’d expect the figures to be labelled X.1 and Y.1, but instead they are labelled X.1 and Y.2.</p>\n<p>Please see this minimal example of the template with two figures in Chapter 4 and 5: <a href=\"https://typst.app/project/w9hlUyPNTRpuMFF8UFvd8k\" class=\"inline-onebox\">Typst</a></p>",
      "raw": "Thank you for your time.\nYou are right, the template has section-based figure numbers, using the i-figured package. The catch is, they don't seem to work for me. I am not trying to include a separate package, as the package is already included in the template.\n\nTry to include two figures in two different chapters. I'd expect the figures to be labelled X.1 and Y.1, but instead they are labelled X.1 and Y.2. \n\nPlease see this minimal example of the template with two figures in Chapter 4 and 5: https://typst.app/project/w9hlUyPNTRpuMFF8UFvd8k",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 810
    },
    {
      "id": 5690,
      "post_number": 4,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-11-15T23:11:37.498Z",
      "updated_at": "2024-11-15T23:11:37.498Z",
      "cooked": "<p>Ah indeed that’s broken. I don’t know if that’s an issue with i-figured or with the template (and I don’t have the time to go through all the code…), but you can use <a href=\"https://typst.app/universe/package/headcount/\">headcount</a> instead:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/headcount:0.1.0\": *\n\n#set heading(numbering: \"1.1\")\n\n// these two lines set up the figure numbering\n#set figure(numbering: dependent-numbering(\"1.1\"))\n#show heading: reset-counter(counter(figure.where(kind: image)), levels: 1)\n\n= First chapter\n\n#figure(\n  [This is a figure.],\n  caption: [And this is a caption.]\n)\n\n= Second chapter\n\n#figure(\n  [This is a figure in another chapter.],\n  caption: [And this is the other caption.]\n)\n</code></pre>\n<p>I guess the easiest is to write your complete own template then, which is anyways a good exercise to learn Typst. (You can of course copy some code from the given template.)</p>",
      "raw": "Ah indeed that's broken. I don't know if that's an issue with i-figured or with the template (and I don't have the time to go through all the code...), but you can use [headcount](https://typst.app/universe/package/headcount/) instead:\n\n```typ\n#import \"@preview/headcount:0.1.0\": *\n\n#set heading(numbering: \"1.1\")\n\n// these two lines set up the figure numbering\n#set figure(numbering: dependent-numbering(\"1.1\"))\n#show heading: reset-counter(counter(figure.where(kind: image)), levels: 1)\n\n= First chapter\n\n#figure(\n  [This is a figure.],\n  caption: [And this is a caption.]\n)\n\n= Second chapter\n\n#figure(\n  [This is a figure in another chapter.],\n  caption: [And this is the other caption.]\n)\n```\n\nI guess the easiest is to write your complete own template then, which is anyways a good exercise to learn Typst. (You can of course copy some code from the given template.)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 5.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 5723,
      "post_number": 5,
      "username": "Flexschmex",
      "name": "Felix",
      "created_at": "2024-11-17T15:24:26.957Z",
      "updated_at": "2024-11-17T21:39:07.495Z",
      "cooked": "<p>Hi,<br>\nthank you for your suggestion.<br>\nIn the meantime, I have manage to figure out that this block in the template messes with the figure numbers:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">  // chapters start on a right page and have very big, fancy headings\n  show heading.where(level: 1): it =&gt; {\n    set text(1.3em)\n    pagebreak(to: \"odd\")\n    v(12%)\n    if it.numbering != none [\n      #align(right, { \n        text(6em, fill: gray, style: \"normal\", { \n          counter(heading).display()\n        })\n      })\n      #parbreak()\n    ]\n    set text(1.3em)\n    v(-4cm)\n    align(right)[#text(1cm, weight: \"regular\")[#it.body]]\n    v(0.5cm)\n  }\n</code></pre>\n<p>Do you have an idea why that is and how it could be fixed? Interestingly, even doing</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">  // chapters start on a right page and have very big, fancy headings\n  show heading.where(level: 1): it =&gt; {}\n</code></pre>\n<p>is enough…</p>",
      "raw": "Hi,\nthank you for your suggestion.\nIn the meantime, I have manage to figure out that this block in the template messes with the figure numbers:\n\n```typc\n  // chapters start on a right page and have very big, fancy headings\n  show heading.where(level: 1): it => {\n    set text(1.3em)\n    pagebreak(to: \"odd\")\n    v(12%)\n    if it.numbering != none [\n      #align(right, { \n        text(6em, fill: gray, style: \"normal\", { \n          counter(heading).display()\n        })\n      })\n      #parbreak()\n    ]\n    set text(1.3em)\n    v(-4cm)\n    align(right)[#text(1cm, weight: \"regular\")[#it.body]]\n    v(0.5cm)\n  }\n```\n\nDo you have an idea why that is and how it could be fixed? Interestingly, even doing\n\n```typc\n  // chapters start on a right page and have very big, fancy headings\n  show heading.where(level: 1): it => {}\n```\nis enough...",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 810
    },
    {
      "id": 5726,
      "post_number": 6,
      "username": "Flexschmex",
      "name": "Felix",
      "created_at": "2024-11-17T16:27:39.736Z",
      "updated_at": "2024-11-17T21:38:42.380Z",
      "cooked": "<p>In the meantime, I found the solutions. Simply initializing the i-figured package AFTER the custom heading show rule did the trick. In the template, the init is done before the custom show rule, resulting in the numbering not working properly.</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">// define show rule\nshow heading.where(level: 1): it =&gt; {\n  // custom show rule\n}\n\n// init i-figured package\nshow heading: i-figured.reset-counters\nshow figure: i-figured.show-figure\nshow math.equation: i-figured.show-equation\n</code></pre>",
      "raw": "In the meantime, I found the solutions. Simply initializing the i-figured package AFTER the custom heading show rule did the trick. In the template, the init is done before the custom show rule, resulting in the numbering not working properly.\n\n```typc\n// define show rule\nshow heading.where(level: 1): it => {\n  // custom show rule\n}\n\n// init i-figured package\nshow heading: i-figured.reset-counters\nshow figure: i-figured.show-figure\nshow math.equation: i-figured.show-equation\n```",
      "reply_to_post_number": 5,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 34.4,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 810
    },
    {
      "id": 5729,
      "post_number": 7,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-11-17T17:52:17.323Z",
      "updated_at": "2024-11-18T17:23:33.132Z",
      "cooked": "<p><s>With <a href=\"https://typst.app/universe/package/headcount/\">headcount</a> the order doesn’t matter (and will never matter) <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></s></p>",
      "raw": "~~With [headcount](https://typst.app/universe/package/headcount/) the order doesn't matter (and will never matter) :wink:~~",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 5730,
      "post_number": 8,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-11-17T17:53:02.112Z",
      "updated_at": "2024-11-17T17:53:02.112Z",
      "cooked": "<p>Hi, template author here! Thanks for figuring (no pun intended) the problem out. I have applied your fix and it will be in the next release! Btw, check out the main branch, as I applied <a href=\"https://github.com/typst/typst/issues/2722#issuecomment-2214976390\">frozolotl’s emtpy page fix</a>, which gets rid of the need to manually insert <code>chapter-end</code>!</p>\n<hr>\n<p>Putting on my moderator hat: could you maybe try to revise your post’s title to be a complete question as per the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a>:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>We hope by adhering to this, we make the information in this forum easy to find in the future. Thanks!</p>",
      "raw": "Hi, template author here! Thanks for figuring (no pun intended) the problem out. I have applied your fix and it will be in the next release! Btw, check out the main branch, as I applied [frozolotl's emtpy page fix](https://github.com/typst/typst/issues/2722#issuecomment-2214976390), which gets rid of the need to manually insert `chapter-end`!\n\n---\n\nPutting on my moderator hat: could you maybe try to revise your post’s title to be a complete question as per the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11):\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nWe hope by adhering to this, we make the information in this forum easy to find in the future. Thanks!",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 29.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 5769,
      "post_number": 9,
      "username": "Flexschmex",
      "name": "Felix",
      "created_at": "2024-11-18T10:17:22.855Z",
      "updated_at": "2024-11-18T10:17:22.855Z",
      "cooked": "<p>That’s great news.</p>\n<p>I would love to edit the title, but it seems like there is no option to.</p>\n<p><a class=\"mention\" href=\"/u/jbirnick\">@jbirnick</a> I could not get headcount to work properly with the template.<br>\nI have build another example at <a href=\"https://typst.app/project/wuqi37PBGAvaDrJbPuTDvc\" class=\"inline-onebox\">Typst</a>. Setup of headcount is done in template/lib.typ in line 158. Maybe i was missing something.</p>",
      "raw": "That's great news.\n\nI would love to edit the title, but it seems like there is no option to.\n\n@jbirnick I could not get headcount to work properly with the template.\nI have build another example at https://typst.app/project/wuqi37PBGAvaDrJbPuTDvc. Setup of headcount is done in template/lib.typ in line 158. Maybe i was missing something.",
      "reply_to_post_number": 8,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 13.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 810
    },
    {
      "id": 5803,
      "post_number": 10,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-11-18T17:48:32.229Z",
      "updated_at": "2024-11-18T17:54:11.101Z",
      "cooked": "<p>Ok I was talking BS, the order does matter for headcount. To fix your template, put the</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">show heading: reset-counter(counter(figure.where(kind: image)))\n</code></pre>\n<p>after all the other <code>heading</code> show rules (in particular after your “custom heading design”).</p>\n<hr>\n<p>If you’re interested, here is an explanation. The <code>reset-counter</code> show rule is something like this</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">it =&gt; {\n  thecounter.update((0,))\n  it\n}\n</code></pre>\n<p>where <code>thecounter</code> is the counter in the argument, so in this case the counter of <code>figure</code>. So it just resets the counter of <code>figure</code> and then displays the heading as usual.</p>\n<p>Now the question is, what happens if you put <em>another</em> show rule for heading <em>below</em> the one above. This will “wrap around” the show rule above, in the sense that <code>it</code> in the new show rule is actually:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">thecounter.update((0,))\nheading(...)\n</code></pre>\n<p>So if you just reuse <code>it</code> in your new show rule, everything will still be fine. For example, this still works:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/headcount:0.1.0\": *\n\n#set heading(numbering: \"1.1\")\n#set figure(numbering: dependent-numbering(\"1.1\"))\n#show heading: reset-counter(counter(figure.where(kind: image)))\n\n// custom design\n#show heading: it =&gt; {\n  block(fill: green.lighten(20%), inset: 5pt, it)\n}\n\n= Introduction\n\n#figure([some figure], caption: [some caption])\n\n= Let's Go\n\n#figure([another figure], caption: [another caption])\n</code></pre>\n<p>The problem now comes when, in your new show rules for your custom design, you do <em>not</em> use (the full) <code>it</code>, but just for example <code>it.body</code>. For example, this doesn’t work:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/headcount:0.1.0\": *\n\n#set heading(numbering: \"1.1\")\n#set figure(numbering: dependent-numbering(\"1.1\"))\n#show heading: reset-counter(counter(figure.where(kind: image)))\n\n// custom design\n#show heading: it =&gt; [\n  #counter(heading).display() | #it.body\n]\n\n= Introduction\n\n#figure([some figure], caption: [some caption])\n\n= Let's Go\n\n#figure([another figure], caption: [another caption])\n</code></pre>\n<p>The reason is that, because your don’t use <code>it</code> as a whole, everything that’s done by previous show rules is not used, so you essentially discard all old show rules.</p>\n<p>Putting the <code>reset-counter(...)</code> show rule last fixes this, because then you first apply your custom design, and the <code>reset-counter(...)</code> show rules then makes</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">thecounter.update((0,))\nyourcustomdesign\n</code></pre>\n<p>out of this.</p>\n<p>Just for completeness, let me mention that there is a second counter package with a totally different approach, which might be of interest to you to avoid such problems: <a href=\"https://typst.app/universe/package/rich-counters/\">rich-counters</a></p>",
      "raw": "Ok I was talking BS, the order does matter for headcount. To fix your template, put the\n```typc\nshow heading: reset-counter(counter(figure.where(kind: image)))\n```\nafter all the other `heading` show rules (in particular after your \"custom heading design\").\n\n\n---\nIf you're interested, here is an explanation. The `reset-counter` show rule is something like this\n```typc\nit => {\n  thecounter.update((0,))\n  it\n}\n```\nwhere `thecounter` is the counter in the argument, so in this case the counter of `figure`. So it just resets the counter of `figure` and then displays the heading as usual.\n\nNow the question is, what happens if you put _another_ show rule for heading _below_ the one above. This will \"wrap around\" the show rule above, in the sense that `it` in the new show rule is actually:\n```typc\nthecounter.update((0,))\nheading(...)\n```\n\nSo if you just reuse `it` in your new show rule, everything will still be fine. For example, this still works:\n\n```typ\n#import \"@preview/headcount:0.1.0\": *\n\n#set heading(numbering: \"1.1\")\n#set figure(numbering: dependent-numbering(\"1.1\"))\n#show heading: reset-counter(counter(figure.where(kind: image)))\n\n// custom design\n#show heading: it => {\n  block(fill: green.lighten(20%), inset: 5pt, it)\n}\n\n= Introduction\n\n#figure([some figure], caption: [some caption])\n\n= Let's Go\n\n#figure([another figure], caption: [another caption])\n```\n\nThe problem now comes when, in your new show rules for your custom design, you do _not_ use (the full) `it`, but just for example `it.body`. For example, this doesn't work:\n```typ\n#import \"@preview/headcount:0.1.0\": *\n\n#set heading(numbering: \"1.1\")\n#set figure(numbering: dependent-numbering(\"1.1\"))\n#show heading: reset-counter(counter(figure.where(kind: image)))\n\n// custom design\n#show heading: it => [\n  #counter(heading).display() | #it.body\n]\n\n= Introduction\n\n#figure([some figure], caption: [some caption])\n\n= Let's Go\n\n#figure([another figure], caption: [another caption])\n```\nThe reason is that, because your don't use `it` as a whole, everything that's done by previous show rules is not used, so you essentially discard all old show rules.\n\nPutting the `reset-counter(...)` show rule last fixes this, because then you first apply your custom design, and the `reset-counter(...)` show rules then makes\n```typc\nthecounter.update((0,))\nyourcustomdesign\n```\nout of this.\n\nJust for completeness, let me mention that there is a second counter package with a totally different approach, which might be of interest to you to avoid such problems: [rich-counters](https://typst.app/universe/package/rich-counters/)",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 174.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 5815,
      "post_number": 11,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-19T00:44:00.314Z",
      "updated_at": "2024-11-19T00:44:00.314Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Flexschmex\" data-post=\"9\" data-topic=\"1730\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/f/611D14/48.png\" class=\"avatar\"> Flexschmex:</div>\n<blockquote>\n<p>I would love to edit the title, but it seems like there is no option to.</p>\n</blockquote>\n</aside>\n<p>Indeed, this seems related to <a href=\"https://forum.typst.app/t/allow-editing-of-old-messages/1456\" class=\"inline-onebox\">✏ Allow editing of old messages</a> - it appears new users can only change the title within 24h. We will change it for you (sorry for the trouble). But please ensure future posts’ titles are full questions. Thank you <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "[quote=\"Flexschmex, post:9, topic:1730\"]\nI would love to edit the title, but it seems like there is no option to.\n[/quote]\n\nIndeed, this seems related to https://forum.typst.app/t/allow-editing-of-old-messages/1456 - it appears new users can only change the title within 24h. We will change it for you (sorry for the trouble). But please ensure future posts' titles are full questions. Thank you :slight_smile:",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 19,
      "score": 3.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:54:55.263311"
}
{
  "topic_metadata": {
    "id": 1731,
    "title": "How Can i add multiple Cetz Plot axes?",
    "slug": "how-can-i-add-multiple-cetz-plot-axes",
    "posts_count": 4,
    "created_at": "2024-11-14T19:44:05.432Z",
    "last_posted_at": "2024-11-26T13:22:45.857Z",
    "views": 365,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "ParaN3xus",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 999
  },
  "posts": [
    {
      "id": 5642,
      "post_number": 1,
      "username": "Flavio",
      "name": "Flavio",
      "created_at": "2024-11-14T19:44:05.566Z",
      "updated_at": "2024-11-14T19:44:05.566Z",
      "cooked": "<p>Hi,<br>\nI’m trying to replicate something similiar to this chart:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/0/0b1cc74fd7ef96cb48f63ee6956a13648a3f290b.png\" data-download-href=\"https://forum.typst.app/uploads/default/0b1cc74fd7ef96cb48f63ee6956a13648a3f290b\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/0/0b1cc74fd7ef96cb48f63ee6956a13648a3f290b_2_488x500.png\" alt=\"image\" data-base62-sha1=\"1AiUpSTLU3AoPEcqxxjO5pxCovF\" width=\"488\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/0/0b1cc74fd7ef96cb48f63ee6956a13648a3f290b_2_488x500.png, https://forum.typst.app/uploads/default/optimized/2X/0/0b1cc74fd7ef96cb48f63ee6956a13648a3f290b_2_732x750.png 1.5x, https://forum.typst.app/uploads/default/original/2X/0/0b1cc74fd7ef96cb48f63ee6956a13648a3f290b.png 2x\" data-dominant-color=\"F3F4F5\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">747×765 84.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>At the moment, I’ve done this, but I don’t know if it’s possibile to add two cetz axes and create a line between them. Any idea? Thanks a lot!</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/2/24649af8ee2df078fc4400202c75d629bb0856c7.png\" alt=\"image\" data-base62-sha1=\"5bWJz3RskKZfbJsVu4jlLLx4SeX\" width=\"642\" height=\"430\"></p>",
      "raw": "Hi, \nI'm trying to replicate something similiar to this chart:\n\n![image|488x500](upload://1AiUpSTLU3AoPEcqxxjO5pxCovF.png)\n\nAt the moment, I've done this, but I don't know if it's possibile to add two cetz axes and create a line between them. Any idea? Thanks a lot!\n\n![image|642x430](upload://5bWJz3RskKZfbJsVu4jlLLx4SeX.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 55,
      "score": 1636.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 622
    },
    {
      "id": 5665,
      "post_number": 2,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-11-15T11:08:00.445Z",
      "updated_at": "2024-11-15T11:08:00.445Z",
      "cooked": "<p>Currently, CeTZ doesn’t support specify position of <code>plot</code>, so we can’t directly add two plots in a single <code>canvas</code>.</p>\n<p>But luckily, this can be done by grouping the second <code>plot</code> and setting it’s <code>origin</code> manually by <code>group</code> and <code>set-origin</code>.</p>\n<p>Here is a example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.1\"\n#import \"@preview/cetz-plot:0.1.0\"\n\n#cetz.canvas(\n  length: 72pt,\n  {\n    import cetz.draw: *\n    import cetz-plot: *\n\n    let common-x = 1\n\n    plot.plot(\n      name: \"p1\",\n      x: 4,\n      y: 4,\n      size: (4, 2),\n      asix-style: \"scientific\",\n      {\n        let f(x) = {\n          if (x &lt; -1.8) {\n            40\n          } else {\n            -0.2 * calc.pow(x + 1.8, 2) + 40\n          }\n        }\n\n        plot.add(\n          domain: (-3, 3),\n          f,\n        )\n\n        plot.add-anchor(\"p\", (common-x, f(common-x)))\n      },\n    )\n\n    group(\n      name: \"g2\",\n      {\n        set-origin((0, -2.5))\n        plot.plot(\n          name: \"plot\",\n          x: 4,\n          y: 4,\n          size: (4, 2),\n          asix-style: \"scientific\",\n          {\n\n            let f(x) = -(calc.pow(calc.e, 2 * x) - 1) / (calc.pow(calc.e, 2 * x) + 1)\n\n            plot.add(\n              domain: (-3, 3),\n              f,\n            )\n\n            plot.add-anchor(\"p\", (common-x, f(common-x)))\n          },\n        )\n      },\n    )\n\n    line(\"p1.p\", \"g2.plot.p\", stroke: (dash: \"dashed\"))\n  },\n)\n</code></pre>\n<details>\n<summary>\nPreview</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/f36a5a03d4a4364e4659d0a3951f3458a27474b3.png\" data-download-href=\"https://forum.typst.app/uploads/default/f36a5a03d4a4364e4659d0a3951f3458a27474b3\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/f36a5a03d4a4364e4659d0a3951f3458a27474b3_2_479x500.png\" alt=\"image\" data-base62-sha1=\"yJlSIM8EcNxanJTzdczubk1zogX\" width=\"479\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/f36a5a03d4a4364e4659d0a3951f3458a27474b3_2_479x500.png, https://forum.typst.app/uploads/default/optimized/2X/f/f36a5a03d4a4364e4659d0a3951f3458a27474b3_2_718x750.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/f36a5a03d4a4364e4659d0a3951f3458a27474b3.png 2x\" data-dominant-color=\"FBFBFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">950×990 59 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>",
      "raw": "Currently, CeTZ doesn't support specify position of `plot`, so we can't directly add two plots in a single `canvas`. \n\nBut luckily, this can be done by grouping the second `plot` and setting it's `origin` manually by `group` and `set-origin`.\n\nHere is a example:\n```typ\n#import \"@preview/cetz:0.3.1\"\n#import \"@preview/cetz-plot:0.1.0\"\n\n#cetz.canvas(\n  length: 72pt,\n  {\n    import cetz.draw: *\n    import cetz-plot: *\n\n    let common-x = 1\n\n    plot.plot(\n      name: \"p1\",\n      x: 4,\n      y: 4,\n      size: (4, 2),\n      asix-style: \"scientific\",\n      {\n        let f(x) = {\n          if (x < -1.8) {\n            40\n          } else {\n            -0.2 * calc.pow(x + 1.8, 2) + 40\n          }\n        }\n\n        plot.add(\n          domain: (-3, 3),\n          f,\n        )\n\n        plot.add-anchor(\"p\", (common-x, f(common-x)))\n      },\n    )\n\n    group(\n      name: \"g2\",\n      {\n        set-origin((0, -2.5))\n        plot.plot(\n          name: \"plot\",\n          x: 4,\n          y: 4,\n          size: (4, 2),\n          asix-style: \"scientific\",\n          {\n\n            let f(x) = -(calc.pow(calc.e, 2 * x) - 1) / (calc.pow(calc.e, 2 * x) + 1)\n\n            plot.add(\n              domain: (-3, 3),\n              f,\n            )\n\n            plot.add-anchor(\"p\", (common-x, f(common-x)))\n          },\n        )\n      },\n    )\n\n    line(\"p1.p\", \"g2.plot.p\", stroke: (dash: \"dashed\"))\n  },\n)\n```\n\n[details=\"Preview\"]\n![image|479x500](upload://yJlSIM8EcNxanJTzdczubk1zogX.png)\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 50,
      "score": 110.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 5673,
      "post_number": 3,
      "username": "Flavio",
      "name": "Flavio",
      "created_at": "2024-11-15T14:46:27.371Z",
      "updated_at": "2024-11-15T14:46:27.371Z",
      "cooked": "<p>Wonderful, thanks! I Will share the code of the final results later.</p>",
      "raw": "Wonderful, thanks! I Will share the code of the final results later.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 29.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 622
    },
    {
      "id": 6115,
      "post_number": 4,
      "username": "Flavio",
      "name": "Flavio",
      "created_at": "2024-11-26T13:22:45.857Z",
      "updated_at": "2024-11-26T13:27:11.147Z",
      "cooked": "<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">    #import \"@preview/cetz:0.3.1\": canvas, draw\n    #import \"@preview/cetz-plot:0.1.0\": plot\n    #import \"@preview/unify:0.6.0\": num, qty, numrange, qtyrange\n    \n    #let phase-margin(\n      xaxis: 1e-2,\n      yaxis: -40,\n      yaxis-scale: 20,\n      points: ((1e-1, 40), (1, 20), (1e1, 20), (1e2, 0), (1e3, -20), (1e4, -60)),\n      phase-yaxis: -180,\n      phase-yaxis-scale: 90,\n      phase-points: ((1e-1, 40), (1, 20), (1e1, 20), (1e2, 0), (1e3, -20), (1e4, -60)),\n      critic-pulsation: 1e-2,\n      critic-phase: -135,\n      color: red,\n    ) = {\n      figure()[\n        #set text(size: 8pt)\n        #canvas(\n          length: 1cm,\n          {\n            import draw: line, scale, content, circle\n            draw.set-style(mark: (fill: black))\n            draw.set-style(axes: (tick: (length:0, offset: -0.1cm)))\n            draw.set-style(axes: (label: (angle:0deg, offset: 1cm)))\n    \n            plot.plot(\n              size: (8, 5),\n              name: \"p1\",\n              axis-style: \"scientific\",\n              y-tick-step: none,\n              x-tick-step: none,\n              x-max: 16,\n              x-min: 0,\n              y-min: 0,\n              y-max: 16,\n              x-label: none,\n              y-label: $abs(overline(G)(j omega))_\"dB\"$,\n              x-ticks: array.range(5).map(x=&gt; (x*4,num(\"e\" + str(calc.log(xaxis) + x).replace(\"−\", \"-\")))),\n              y-ticks: array.range(5).map(x=&gt; (x*4,str(yaxis + yaxis-scale * x).replace(\"−\", \"-\"))),\n              {\n                for i in range(0, 4) {\n                  for j in range(1, 10) {\n                    plot.add(\n                      style: (stroke: (paint: black.lighten(50%), thickness: 0.25pt)),\n                      ((i * 4 + calc.log(j) * 4, 0), (i * 4 + calc.log(j) * 4, 16)),\n                    )\n                  }\n                }\n                for i in range(0, 4) {\n                  plot.add(style: (stroke: (paint: black.lighten(50%), thickness: 0.25pt)), domain: (0, 24), ((0, i * 4), (24, i * 4)))\n                  for j in range(1, 5) {\n                    plot.add(\n                      style: (stroke: (paint: black.lighten(50%), thickness: 0.5pt)),\n                      domain: (0, 24),\n                      ((0, i * 4 + j), (24, i * 4 + j)),\n                    )\n                  }\n                }\n    \n                if (points.len() &gt; 0) {\n                  plot.add(\n                    style: (stroke: (paint: color, thickness: 2pt)),\n                    points.map(p =&gt; {\n                      return ((calc.log(p.at(0) / xaxis)) * 4, ((p.at(1) - yaxis) / yaxis-scale * 4))\n                    }),\n                  )\n                }\n    \n                plot.add(\n                  style: (stroke: (dash: \"dashed\", paint: color, thickness: 1pt)),\n                    ((0,((0 - yaxis) / yaxis-scale * 4)),((calc.log(critic-pulsation / xaxis)) * 4,((0 - yaxis) / yaxis-scale * 4)))\n                )\n    \n                plot.add-anchor(\"p\", ((calc.log(critic-pulsation / xaxis)) * 4, ((0 - yaxis) / yaxis-scale * 4)))\n    \n              },\n            )\n    \n            draw.group(\n              name: \"g2\",\n              {\n                draw.set-origin((0, -6))\n                plot.plot(\n                  size: (8, 5),\n                  name: \"plot\",\n                  axis-style: \"scientific\",\n                  y-tick-step: none,\n                  x-tick-step: none,\n                  x-max: 16,\n                  x-min: 0,\n                  y-min: 0,\n                  y-max: 16,\n                  x-label: none,\n                  y-label: $angle overline(G)(j omega)$,\n                  x-ticks: array.range(5).map(x=&gt; (x*4,num(\"e\" + str(calc.log(xaxis) + x).replace(\"−\", \"-\")))),\n                  y-ticks: array.range(5).map(x=&gt; (x*4,str(phase-yaxis + phase-yaxis-scale * x).replace(\"−\", \"-\"))) + ((((critic-phase - phase-yaxis) / phase-yaxis-scale * 4),$bold(phi_c)$,),),\n                  {\n                    for i in range(0, 4) {\n                      for j in range(1, 10) {\n                        plot.add(\n                          style: (stroke: (paint: black.lighten(50%), thickness: 0.25pt)),\n                          ((i * 4 + calc.log(j) * 4, 0), (i * 4 + calc.log(j) * 4, 16)),\n                        )\n                      }\n                    }\n                    for i in range(0, 4) {\n                      plot.add(style: (stroke: (paint: black.lighten(50%), thickness: 0.25pt)), domain: (0, 24), ((0, i * 4), (24, i * 4)))\n                      for j in range(1, 5) {\n                        plot.add(\n                          style: (stroke: (paint: black.lighten(50%), thickness: 0.5pt)),\n                          domain: (0, 24),\n                          ((0, i * 4 + j), (24, i * 4 + j)),\n                        )\n                      }\n                    }\n    \n                    if (points.len() &gt; 0) {\n                      plot.add(\n                        style: (stroke: (paint: color, thickness: 2pt)),\n                        phase-points.map(p =&gt; {\n                          return ((calc.log(p.at(0) / xaxis)) * 4, ((p.at(1) - phase-yaxis) / phase-yaxis-scale * 4))\n                        }),\n                      )\n                    }\n    \n                    plot.add(\n                      style: (stroke: (dash: \"dashed\", paint: color, thickness: 1pt)),\n                        ((0,((critic-phase - phase-yaxis) / phase-yaxis-scale * 4)),((calc.log(critic-pulsation / xaxis)) * 4,((critic-phase - phase-yaxis) / phase-yaxis-scale * 4)))\n                    )\n    \n                    plot.add-anchor(\"p\", ((calc.log(critic-pulsation / xaxis)) * 4, ((critic-phase - phase-yaxis) / phase-yaxis-scale * 4)))\n    \n                  },\n                )\n              },\n            )\n            line(\"p1.p\", \"g2.plot.p\", stroke: (dash: \"dashed\",paint: color, thickness: 1pt),)\n            circle(\"p1.p\", radius: .075cm, stroke: color, fill: color)\n            circle(\"g2.plot.p\", radius: .075cm, stroke: color, fill: color)\n            content((rel: (0.15,0.15),  to: \"p1.p\"),\n            padding: .05,\n            anchor: \"south-west\",\n            $bold(omega_c)$,\n            frame: \"circle\",\n            fill: white,\n            stroke: none,\n            )\n          },\n        )\n      ]\n    }\n\n#figure()[\n  #phase-margin(xaxis: 1e-3, yaxis: -40, yaxis-scale: 20, points: ((1e-3,40),(1e-2,40),(1e-1,20),(1e-0,-20),(1e1,-60)), phase-yaxis: -180,phase-yaxis-scale:45,phase-points: ((1e-3,0),(1e-2,-45),(1e-1,-135),(1e-0,-180),(1e1,-180)), critic-pulsation: 3e-1, critic-phase: -157.5, color: rgb(\"#275caa\"))\n]\n</code></pre>",
      "raw": "```typst\n    #import \"@preview/cetz:0.3.1\": canvas, draw\n    #import \"@preview/cetz-plot:0.1.0\": plot\n    #import \"@preview/unify:0.6.0\": num, qty, numrange, qtyrange\n    \n    #let phase-margin(\n      xaxis: 1e-2,\n      yaxis: -40,\n      yaxis-scale: 20,\n      points: ((1e-1, 40), (1, 20), (1e1, 20), (1e2, 0), (1e3, -20), (1e4, -60)),\n      phase-yaxis: -180,\n      phase-yaxis-scale: 90,\n      phase-points: ((1e-1, 40), (1, 20), (1e1, 20), (1e2, 0), (1e3, -20), (1e4, -60)),\n      critic-pulsation: 1e-2,\n      critic-phase: -135,\n      color: red,\n    ) = {\n      figure()[\n        #set text(size: 8pt)\n        #canvas(\n          length: 1cm,\n          {\n            import draw: line, scale, content, circle\n            draw.set-style(mark: (fill: black))\n            draw.set-style(axes: (tick: (length:0, offset: -0.1cm)))\n            draw.set-style(axes: (label: (angle:0deg, offset: 1cm)))\n    \n            plot.plot(\n              size: (8, 5),\n              name: \"p1\",\n              axis-style: \"scientific\",\n              y-tick-step: none,\n              x-tick-step: none,\n              x-max: 16,\n              x-min: 0,\n              y-min: 0,\n              y-max: 16,\n              x-label: none,\n              y-label: $abs(overline(G)(j omega))_\"dB\"$,\n              x-ticks: array.range(5).map(x=> (x*4,num(\"e\" + str(calc.log(xaxis) + x).replace(\"−\", \"-\")))),\n              y-ticks: array.range(5).map(x=> (x*4,str(yaxis + yaxis-scale * x).replace(\"−\", \"-\"))),\n              {\n                for i in range(0, 4) {\n                  for j in range(1, 10) {\n                    plot.add(\n                      style: (stroke: (paint: black.lighten(50%), thickness: 0.25pt)),\n                      ((i * 4 + calc.log(j) * 4, 0), (i * 4 + calc.log(j) * 4, 16)),\n                    )\n                  }\n                }\n                for i in range(0, 4) {\n                  plot.add(style: (stroke: (paint: black.lighten(50%), thickness: 0.25pt)), domain: (0, 24), ((0, i * 4), (24, i * 4)))\n                  for j in range(1, 5) {\n                    plot.add(\n                      style: (stroke: (paint: black.lighten(50%), thickness: 0.5pt)),\n                      domain: (0, 24),\n                      ((0, i * 4 + j), (24, i * 4 + j)),\n                    )\n                  }\n                }\n    \n                if (points.len() > 0) {\n                  plot.add(\n                    style: (stroke: (paint: color, thickness: 2pt)),\n                    points.map(p => {\n                      return ((calc.log(p.at(0) / xaxis)) * 4, ((p.at(1) - yaxis) / yaxis-scale * 4))\n                    }),\n                  )\n                }\n    \n                plot.add(\n                  style: (stroke: (dash: \"dashed\", paint: color, thickness: 1pt)),\n                    ((0,((0 - yaxis) / yaxis-scale * 4)),((calc.log(critic-pulsation / xaxis)) * 4,((0 - yaxis) / yaxis-scale * 4)))\n                )\n    \n                plot.add-anchor(\"p\", ((calc.log(critic-pulsation / xaxis)) * 4, ((0 - yaxis) / yaxis-scale * 4)))\n    \n              },\n            )\n    \n            draw.group(\n              name: \"g2\",\n              {\n                draw.set-origin((0, -6))\n                plot.plot(\n                  size: (8, 5),\n                  name: \"plot\",\n                  axis-style: \"scientific\",\n                  y-tick-step: none,\n                  x-tick-step: none,\n                  x-max: 16,\n                  x-min: 0,\n                  y-min: 0,\n                  y-max: 16,\n                  x-label: none,\n                  y-label: $angle overline(G)(j omega)$,\n                  x-ticks: array.range(5).map(x=> (x*4,num(\"e\" + str(calc.log(xaxis) + x).replace(\"−\", \"-\")))),\n                  y-ticks: array.range(5).map(x=> (x*4,str(phase-yaxis + phase-yaxis-scale * x).replace(\"−\", \"-\"))) + ((((critic-phase - phase-yaxis) / phase-yaxis-scale * 4),$bold(phi_c)$,),),\n                  {\n                    for i in range(0, 4) {\n                      for j in range(1, 10) {\n                        plot.add(\n                          style: (stroke: (paint: black.lighten(50%), thickness: 0.25pt)),\n                          ((i * 4 + calc.log(j) * 4, 0), (i * 4 + calc.log(j) * 4, 16)),\n                        )\n                      }\n                    }\n                    for i in range(0, 4) {\n                      plot.add(style: (stroke: (paint: black.lighten(50%), thickness: 0.25pt)), domain: (0, 24), ((0, i * 4), (24, i * 4)))\n                      for j in range(1, 5) {\n                        plot.add(\n                          style: (stroke: (paint: black.lighten(50%), thickness: 0.5pt)),\n                          domain: (0, 24),\n                          ((0, i * 4 + j), (24, i * 4 + j)),\n                        )\n                      }\n                    }\n    \n                    if (points.len() > 0) {\n                      plot.add(\n                        style: (stroke: (paint: color, thickness: 2pt)),\n                        phase-points.map(p => {\n                          return ((calc.log(p.at(0) / xaxis)) * 4, ((p.at(1) - phase-yaxis) / phase-yaxis-scale * 4))\n                        }),\n                      )\n                    }\n    \n                    plot.add(\n                      style: (stroke: (dash: \"dashed\", paint: color, thickness: 1pt)),\n                        ((0,((critic-phase - phase-yaxis) / phase-yaxis-scale * 4)),((calc.log(critic-pulsation / xaxis)) * 4,((critic-phase - phase-yaxis) / phase-yaxis-scale * 4)))\n                    )\n    \n                    plot.add-anchor(\"p\", ((calc.log(critic-pulsation / xaxis)) * 4, ((critic-phase - phase-yaxis) / phase-yaxis-scale * 4)))\n    \n                  },\n                )\n              },\n            )\n            line(\"p1.p\", \"g2.plot.p\", stroke: (dash: \"dashed\",paint: color, thickness: 1pt),)\n            circle(\"p1.p\", radius: .075cm, stroke: color, fill: color)\n            circle(\"g2.plot.p\", radius: .075cm, stroke: color, fill: color)\n            content((rel: (0.15,0.15),  to: \"p1.p\"),\n            padding: .05,\n            anchor: \"south-west\",\n            $bold(omega_c)$,\n            frame: \"circle\",\n            fill: white,\n            stroke: none,\n            )\n          },\n        )\n      ]\n    }\n\n#figure()[\n  #phase-margin(xaxis: 1e-3, yaxis: -40, yaxis-scale: 20, points: ((1e-3,40),(1e-2,40),(1e-1,20),(1e-0,-20),(1e1,-60)), phase-yaxis: -180,phase-yaxis-scale:45,phase-points: ((1e-3,0),(1e-2,-45),(1e-1,-135),(1e-0,-180),(1e1,-180)), critic-pulsation: 3e-1, critic-phase: -157.5, color: rgb(\"#275caa\"))\n]\n```",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 46.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 622
    }
  ],
  "scraped_at": "2025-06-10T09:54:54.543087"
}
{
  "topic_metadata": {
    "id": 1733,
    "title": "How to find number of cited sources / number of Bibliography entries?",
    "slug": "how-to-find-number-of-cited-sources-number-of-bibliography-entries",
    "posts_count": 7,
    "created_at": "2024-11-14T21:37:02.495Z",
    "last_posted_at": "2024-11-16T09:58:24.542Z",
    "views": 191,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 7,
    "accepted_answer_username": "NNS",
    "tags": [
      "scripting",
      "literature",
      "citation"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 478
  },
  "posts": [
    {
      "id": 5647,
      "post_number": 1,
      "username": "NNS",
      "name": "Nikolai Neff-Sarnow",
      "created_at": "2024-11-14T21:37:02.651Z",
      "updated_at": "2025-02-05T14:49:20.324Z",
      "cooked": "<p>Is there a reliable way to determine the number of cited sources with a query or any other way which lets me put that number into a variable? Another way of phrasing the question would be: can I get the count of Bibliography entries?</p>\n<p>I can’t directly count them from the BibTeX or YAML files since not all entries in there might be actually cited within the document and the number absolutely has to be accurate in all cases.</p>\n<p>I’m aware of the following workaround for getting the amount of sources cited via the @-syntax:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#context query(ref.where(element:none)).len()\n</code></pre>\n<p>but this does not work for sources cited using <code>#cite()</code>. And since <code>#cite()</code> is not locateable I can’t query them.</p>\n<p>But there must be a counter which is used for displaying the bibliography entries, but I haven’t found a way to access it from within Typst. (This is where a <a href=\"https://github.com/typst/typst/issues/2728\" rel=\"noopener nofollow ugc\">list of all available elements for counters</a> might help), or is this currently not possible?</p>",
      "raw": "Is there a reliable way to determine the number of cited sources with a query or any other way which lets me put that number into a variable? Another way of phrasing the question would be: can I get the count of Bibliography entries?\n\nI can't directly count them from the BibTeX or YAML files since not all entries in there might be actually cited within the document and the number absolutely has to be accurate in all cases.\n\nI'm aware of the following workaround for getting the amount of sources cited via the @-syntax:\n```typst\n#context query(ref.where(element:none)).len()\n```\nbut this does not work for sources cited using `#cite()`. And since `#cite()` is not locateable I can't query them.\n\nBut there must be a counter which is used for displaying the bibliography entries, but I haven't found a way to access it from within Typst. (This is where a [list of all available elements for counters](https://github.com/typst/typst/issues/2728) might help), or is this currently not possible?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 591.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 754
    },
    {
      "id": 5663,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-15T07:57:25.196Z",
      "updated_at": "2024-11-15T08:01:32.369Z",
      "cooked": "<p>You can use typst’s CLI <a href=\"https://typst.app/docs/reference/introspection/query/#:~:text=Command%20line%20queries\"><code>query</code></a>:</p>\n<pre data-code-wrap=\"bash\"><code class=\"lang-bash\">typst query doc.typ ref | jq '[.[] | select(.element == null)] | unique'\n</code></pre>\n<p>This should give you all unique bibliography’s references. If you add a final <code>length</code>, it should give you the count of unique citations in the document, i.e.,</p>\n<pre data-code-wrap=\"bash\"><code class=\"lang-bash\">typst query doc.typ ref | jq '[.[] | select(.element == null)] | unique | length'\n</code></pre>\n<p>EDIT: As for <code>cite</code>, you can try a simple</p>\n<pre data-code-wrap=\"bash\"><code class=\"lang-bash\">grep \"#cite\" doc.typ\n</code></pre>",
      "raw": "You can use typst's CLI [`query`](https://typst.app/docs/reference/introspection/query/#:~:text=Command%20line%20queries):\n\n```bash\ntypst query doc.typ ref | jq '[.[] | select(.element == null)] | unique'\n```\n\nThis should give you all unique bibliography's references. If you add a final `length`, it should give you the count of unique citations in the document, i.e.,\n```bash\ntypst query doc.typ ref | jq '[.[] | select(.element == null)] | unique | length'\n```\n\nEDIT: As for `cite`, you can try a simple \n```bash\ngrep \"#cite\" doc.typ\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 11.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5670,
      "post_number": 3,
      "username": "NNS",
      "name": "Nikolai Neff-Sarnow",
      "created_at": "2024-11-15T12:23:33.812Z",
      "updated_at": "2024-11-15T12:24:23.692Z",
      "cooked": "<p>Unfortunately I can’t use external tools or the CLI. Also in my tests your query-example did not work for sources cited using <code>#cite()</code></p>",
      "raw": "Unfortunately I can't use external tools or the CLI. Also in my tests your query-example did not work for sources cited using `#cite()`",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 15.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 754
    },
    {
      "id": 5672,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-15T13:06:58.178Z",
      "updated_at": "2024-11-15T13:06:58.178Z",
      "cooked": "<p>Ah indeed, my bad I think I misread your initial post. As you rightly say so, <code>cite</code> is not locatable. I can’t think of any way to do that entirely in Typst however, that wouldn’t involved using a global show rule and parsing the entire AST.</p>",
      "raw": "Ah indeed, my bad I think I misread your initial post. As you rightly say so, `cite` is not locatable. I can't think of any way to do that entirely in Typst however, that wouldn't involved using a global show rule and parsing the entire AST.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 5.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5679,
      "post_number": 5,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-15T17:33:55.127Z",
      "updated_at": "2024-11-15T17:33:55.127Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/nns\">@NNS</a>! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @NNS! I've changed your question post's title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 95.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5695,
      "post_number": 6,
      "username": "sjfhsjfh",
      "name": "sjfhsjfh",
      "created_at": "2024-11-16T07:55:34.578Z",
      "updated_at": "2024-11-16T11:21:54.182Z",
      "cooked": "<p>Maybe try this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let citation-counter = state(\"citation-counter\", ())\n#show cite: it =&gt; {\n  it\n  bib-count.update(((..c)) =&gt; (..c, it.key))\n}\n#let count = context citation-counter.final().dedup().len()\n</code></pre>\n<p>Edit: fixed typo</p>",
      "raw": "Maybe try this:\n```typ\n#let citation-counter = state(\"citation-counter\", ())\n#show cite: it => {\n  it\n  bib-count.update(((..c)) => (..c, it.key))\n}\n#let count = context citation-counter.final().dedup().len()\n```\n\nEdit: fixed typo",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 65.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 120
    },
    {
      "id": 5696,
      "post_number": 7,
      "username": "NNS",
      "name": "Nikolai Neff-Sarnow",
      "created_at": "2024-11-16T09:58:24.542Z",
      "updated_at": "2024-11-16T09:58:24.542Z",
      "cooked": "<p>This works, but you mixed up the variable names <img src=\"https://forum.typst.app/images/emoji/apple/grinning.png?v=12\" title=\":grinning:\" class=\"emoji\" alt=\":grinning:\" loading=\"lazy\" width=\"20\" height=\"20\"> Here’s the working code for anyone else interested:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let bib-count = state(\"citation-counter\", ())\n#show cite: it =&gt; {\n  it\n  bib-count.update(((..c)) =&gt; (..c, it.key))\n}\n#let count = context bib-count.final().dedup().len()\n</code></pre>\n<p>It still feels like there should be an easier way, but for now I’m marking this as solved. Thanks again!</p>",
      "raw": "This works, but you mixed up the variable names :grinning: Here's the working code for anyone else interested:\n\n```typst\n#let bib-count = state(\"citation-counter\", ())\n#show cite: it => {\n  it\n  bib-count.update(((..c)) => (..c, it.key))\n}\n#let count = context bib-count.final().dedup().len()\n```\nIt still feels like there should be an easier way, but for now I'm marking this as solved. Thanks again!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 44.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 754
    }
  ],
  "scraped_at": "2025-06-10T09:54:53.801591"
}
{
  "topic_metadata": {
    "id": 1740,
    "title": "How to avoid pushing down math content with multi-line overbrace?",
    "slug": "how-to-avoid-pushing-down-math-content-with-multi-line-overbrace",
    "posts_count": 3,
    "created_at": "2024-11-15T11:29:47.408Z",
    "last_posted_at": "2024-11-17T18:59:17.531Z",
    "views": 93,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "ParaN3xus",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 412
  },
  "posts": [
    {
      "id": 5666,
      "post_number": 1,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-11-15T11:29:47.595Z",
      "updated_at": "2024-11-15T11:29:47.595Z",
      "cooked": "<p>I am trying to use overbraces for my equation, but a two-line annotation pushes the math content down, out of line from the rest of the equation. Example:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">$S &amp;= overbrace(beta (alpha) S I, \"one line\") - overbrace(mu (N), \"two\" \\  \"line\")$\n</code></pre>\n<p>The <code>µ(N)</code> term is out of line with the rest of the equation. This does not happen in the reverse direction with underbraces:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">$S &amp;= underbrace(beta (alpha) S I, \"one line\") - underbrace(mu (N), \"two\" \\  \"line\")$\n</code></pre>\n<p>Is this a bug or is this intentional? How can I avoid pushing annotated math terms out of the line of the equation?</p>",
      "raw": "I am trying to use overbraces for my equation, but a two-line annotation pushes the math content down, out of line from the rest of the equation. Example:\n\n```typst\n$S &= overbrace(beta (alpha) S I, \"one line\") - overbrace(mu (N), \"two\" \\  \"line\")$\n```\nThe `µ(N)` term is out of line with the rest of the equation. This does not happen in the reverse direction with underbraces:\n\n```typst\n$S &= underbrace(beta (alpha) S I, \"one line\") - underbrace(mu (N), \"two\" \\  \"line\")$\n```\nIs this a bug or is this intentional? How can I avoid pushing annotated math terms out of the line of the equation?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 235.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 177
    },
    {
      "id": 5671,
      "post_number": 2,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-11-15T12:50:23.440Z",
      "updated_at": "2024-11-15T12:50:44.672Z",
      "cooked": "<p>This may be a bug in Typst, but fortunately, in addition to reporting the bug to the developers, we can also manually adjust the equation’s baseline using <code>box</code> to achieve alignment.</p>\n<p>Here is a example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let ob(content, annotation) = {\n  let f(x) = move(math.equation(x))\n  box(\n    math.overbrace(f(content), f(math.inline(annotation))),\n    baseline: -0.0912em,\n  )\n}\n\n\n$\n  S &amp;= overbrace(beta (alpha) S I, \"one line\" ) - mu ob(mu (N), alpha) \\ \\\n  S &amp;= overbrace(beta (alpha) S I, \"one line\" ) - mu ob(mu (N), \"two\" \\ \"lines\") \\ \\ \\\n  S &amp;= overbrace(beta (alpha) S I, \"one line\" ) - mu ob(mu (N), \"and\" \\ \"three\" \\ \"lines\") \\ \\ \\\n  S &amp;= overbrace(beta (alpha) S I, \"one line\" ) - mu ob(mu (N), \"also\" \\ \"even\" \\ \"four\" \\ \"lines\") \\\n$\n</code></pre>\n<details>\n<summary>\nPreview</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/3/33171d3a447294fe42c01b46c46b9b7db2eb07b7.png\" data-download-href=\"https://forum.typst.app/uploads/default/33171d3a447294fe42c01b46c46b9b7db2eb07b7\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/3/33171d3a447294fe42c01b46c46b9b7db2eb07b7_2_380x499.png\" alt=\"image\" data-base62-sha1=\"7hXS7kqkBQBtzGbuVgl3R6DOFlt\" width=\"380\" height=\"499\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/3/33171d3a447294fe42c01b46c46b9b7db2eb07b7_2_380x499.png, https://forum.typst.app/uploads/default/original/2X/3/33171d3a447294fe42c01b46c46b9b7db2eb07b7.png 1.5x, https://forum.typst.app/uploads/default/original/2X/3/33171d3a447294fe42c01b46c46b9b7db2eb07b7.png 2x\" data-dominant-color=\"FBFBFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">508×667 32.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>More details about this solution:</p>\n<p><strong>Concept</strong>:<br>\nAs I mentioned, I manually align the formula by adjusting the <code>baseline</code> parameter of the <code>box</code>. There might be some additional techniques involved in this process.</p>\n<p><strong>About the extra <code>move</code></strong>:<br>\nThis is a rather magical technique. Someone told me that using <code>move</code> would make external elements respect the alignment of the elements inside the <code>move</code>, and this turns out to be true. After using <code>move</code>, I only need to account for the remaining offset, since the formula’s alignment has already been addressed. I’m not entirely sure why or how it works, but I guess when facing alignment issues, adding a <code>move</code> might, to some extent, help.</p>\n<p><strong>Why is the <code>baseline</code> -0.0912em?</strong><br>\nI measured it. The value is precise to four decimal places to ensure pixel-perfect alignment. Feel free to modify it if you have a more accurate value.</p>",
      "raw": "This may be a bug in Typst, but fortunately, in addition to reporting the bug to the developers, we can also manually adjust the equation's baseline using `box` to achieve alignment. \n\nHere is a example:\n```typ\n#let ob(content, annotation) = {\n  let f(x) = move(math.equation(x))\n  box(\n    math.overbrace(f(content), f(math.inline(annotation))),\n    baseline: -0.0912em,\n  )\n}\n\n\n$\n  S &= overbrace(beta (alpha) S I, \"one line\" ) - mu ob(mu (N), alpha) \\ \\\n  S &= overbrace(beta (alpha) S I, \"one line\" ) - mu ob(mu (N), \"two\" \\ \"lines\") \\ \\ \\\n  S &= overbrace(beta (alpha) S I, \"one line\" ) - mu ob(mu (N), \"and\" \\ \"three\" \\ \"lines\") \\ \\ \\\n  S &= overbrace(beta (alpha) S I, \"one line\" ) - mu ob(mu (N), \"also\" \\ \"even\" \\ \"four\" \\ \"lines\") \\\n$\n```\n\n[details=\"Preview\"]\n![image|380x499](upload://7hXS7kqkBQBtzGbuVgl3R6DOFlt.png)\n[/details]\n\nMore details about this solution:\n\n**Concept**:\nAs I mentioned, I manually align the formula by adjusting the `baseline` parameter of the `box`. There might be some additional techniques involved in this process.\n\n**About the extra `move`**:\nThis is a rather magical technique. Someone told me that using `move` would make external elements respect the alignment of the elements inside the `move`, and this turns out to be true. After using `move`, I only need to account for the remaining offset, since the formula's alignment has already been addressed. I'm not entirely sure why or how it works, but I guess when facing alignment issues, adding a `move` might, to some extent, help.\n\n**Why is the `baseline` -0.0912em?**\nI measured it. The value is precise to four decimal places to ensure pixel-perfect alignment. Feel free to modify it if you have a more accurate value.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 26,
      "score": 45.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 5738,
      "post_number": 3,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-11-17T18:59:17.531Z",
      "updated_at": "2024-11-17T18:59:17.531Z",
      "cooked": "<p>Thanks! I submitted a <a href=\"https://github.com/typst/typst/issues/5426\" rel=\"noopener nofollow ugc\">bug report</a>. Another solution offered there:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">$ S = overbrace(beta (alpha) S I, \"one line\" ) - overbrace(mu (N), vec(delim:#none, \"two\", \"lines\")) $\n</code></pre>",
      "raw": "Thanks! I submitted a [bug report](https://github.com/typst/typst/issues/5426). Another solution offered there:\n\n```typst\n$ S = overbrace(beta (alpha) S I, \"one line\" ) - overbrace(mu (N), vec(delim:#none, \"two\", \"lines\")) $\n```",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 8.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 177
    }
  ],
  "scraped_at": "2025-06-10T09:54:53.051332"
}
{
  "topic_metadata": {
    "id": 1744,
    "title": "How to set up page to have a frame?",
    "slug": "how-to-set-up-page-to-have-a-frame",
    "posts_count": 3,
    "created_at": "2024-11-15T15:25:55.292Z",
    "last_posted_at": "2024-11-15T17:32:42.871Z",
    "views": 138,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "ParaN3xus",
    "tags": [
      "layout",
      "tables"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 157
  },
  "posts": [
    {
      "id": 5675,
      "post_number": 1,
      "username": "Matvey",
      "name": "Matvey",
      "created_at": "2024-11-15T15:25:55.417Z",
      "updated_at": "2024-11-15T17:31:28.833Z",
      "cooked": "<p>Hey! Could you please help me to find out how to setup typst page to have a frame like the one in the attached image?<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/4/47d24ad67794340403ee2f1a9bc9d9f8543f4d09.png\" data-download-href=\"https://forum.typst.app/uploads/default/47d24ad67794340403ee2f1a9bc9d9f8543f4d09\" title=\"Screenshot 2024-11-15 at 18.24.20\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/4/47d24ad67794340403ee2f1a9bc9d9f8543f4d09_2_407x500.png\" alt=\"Screenshot 2024-11-15 at 18.24.20\" data-base62-sha1=\"afmrSsB0hFHY6QOJ0Zsg0zQMzgZ\" width=\"407\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/4/47d24ad67794340403ee2f1a9bc9d9f8543f4d09_2_407x500.png, https://forum.typst.app/uploads/default/optimized/2X/4/47d24ad67794340403ee2f1a9bc9d9f8543f4d09_2_610x750.png 1.5x, https://forum.typst.app/uploads/default/original/2X/4/47d24ad67794340403ee2f1a9bc9d9f8543f4d09.png 2x\" data-dominant-color=\"FBFBFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2024-11-15 at 18.24.20</span><span class=\"informations\">762×934 25.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hey! Could you please help me to find out how to setup typst page to have a frame like the one in the attached image?\n![Screenshot 2024-11-15 at 18.24.20|407x500](upload://afmrSsB0hFHY6QOJ0Zsg0zQMzgZ.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 542.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 812
    },
    {
      "id": 5676,
      "post_number": 2,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-11-15T16:18:43.350Z",
      "updated_at": "2024-11-15T16:18:55.158Z",
      "cooked": "<p>This seems like a customized <code>table</code>, so I wrote an example like:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let mypage(it) = {\n  page(\n    table(\n      columns: (auto,) * 5 + (1fr,) + (auto,),\n      rows: (1fr,) + (1.5em,) * 3,\n      align: center + horizon,\n      table.cell(colspan: 7, align: left + top, it),\n      [], [], [], [], [], table.cell(rowspan: 3)[Blah Blah], [blah],\n      [], [], [], [], [], table.cell(rowspan: 2)[#context counter(page).display()],\n      [Blah], [Blah], [Blah], [Blah], [Blah]\n    ),\n  )\n}\n\n#mypage[\n  hello\n]\n</code></pre>\n<p>You may change stroke color or other styles as you need.</p>",
      "raw": "This seems like a customized `table`, so I wrote an example like:\n```typ\n#let mypage(it) = {\n  page(\n    table(\n      columns: (auto,) * 5 + (1fr,) + (auto,),\n      rows: (1fr,) + (1.5em,) * 3,\n      align: center + horizon,\n      table.cell(colspan: 7, align: left + top, it),\n      [], [], [], [], [], table.cell(rowspan: 3)[Blah Blah], [blah],\n      [], [], [], [], [], table.cell(rowspan: 2)[#context counter(page).display()],\n      [Blah], [Blah], [Blah], [Blah], [Blah]\n    ),\n  )\n}\n\n#mypage[\n  hello\n]\n```\nYou may change stroke color or other styles as you need.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 27.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 5678,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-15T17:32:42.871Z",
      "updated_at": "2024-11-15T17:32:42.871Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/matvey\">@Matvey</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Matvey, welcome to the forum! I've changed your question post's title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 26.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:54:52.332611"
}
{
  "topic_metadata": {
    "id": 1754,
    "title": "Is it possible to use hyphenation costs without justification?",
    "slug": "is-it-possible-to-use-hyphenation-costs-without-justification",
    "posts_count": 3,
    "created_at": "2024-11-16T13:56:55.622Z",
    "last_posted_at": "2024-11-16T17:37:01.945Z",
    "views": 127,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "laurmaedje",
    "tags": [],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 156
  },
  "posts": [
    {
      "id": 5699,
      "post_number": 1,
      "username": "lkndl",
      "name": "",
      "created_at": "2024-11-16T13:56:55.781Z",
      "updated_at": "2024-11-16T13:56:55.781Z",
      "cooked": "<p>I’m writing a document without justification, and would still like to occasionally use hyphenation. I could <code>#set text(hyphenate: false)</code> and then manually insert <code>#{sym.hyph.soft}</code> wherever I want a long word to be breakable, but that’s hard to read and a lot of trouble. <a href=\"https://typst.app/docs/reference/text/text/#parameters-costs\">The docs</a> indicate that hyphenation can be tuned, but that doesn’t seem to apply for unjustified text – or am I missing something?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 200pt)\n\n#let example = [This text illustrates how enabling hyphenation can improve justification.]\n\n#set par(justify: true)\n#example\n\n#set text(hyphenate: false)\n#example\n\n#set par(justify: false)\n#set text(hyphenate: true, costs: (hyphenation: 1%))\n#example\n\n#set text(hyphenate: true, costs: (hyphenation: 100000%))\n#example\n</code></pre>",
      "raw": "I'm writing a document without justification, and would still like to occasionally use hyphenation. I could `#set text(hyphenate: false)` and then manually insert `#{sym.hyph.soft}` wherever I want a long word to be breakable, but that's hard to read and a lot of trouble. [The docs](https://typst.app/docs/reference/text/text/#parameters-costs) indicate that hyphenation can be tuned, but that doesn't seem to apply for unjustified text – or am I missing something?\n\n```typ\n#set page(width: 200pt)\n\n#let example = [This text illustrates how enabling hyphenation can improve justification.]\n\n#set par(justify: true)\n#example\n\n#set text(hyphenate: false)\n#example\n\n#set par(justify: false)\n#set text(hyphenate: true, costs: (hyphenation: 1%))\n#example\n\n#set text(hyphenate: true, costs: (hyphenation: 100000%))\n#example\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 337.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 816
    },
    {
      "id": 5701,
      "post_number": 2,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-11-16T17:03:27.407Z",
      "updated_at": "2024-11-16T17:03:27.407Z",
      "cooked": "<p>Yeah indeed. Seems like a bug to me. Maybe <a class=\"mention\" href=\"/u/pgbiel\">@PgBiel</a> knows more?</p>",
      "raw": "Yeah indeed. Seems like a bug to me. Maybe @PgBiel knows more?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 11.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 5702,
      "post_number": 3,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-11-16T17:37:01.945Z",
      "updated_at": "2024-11-16T17:37:01.945Z",
      "cooked": "<p>You can <code>set par(linebreaks: \"optimized\")</code> for unjustified text. Without it, the costs will indeed have no effect.</p>",
      "raw": "You can `set par(linebreaks: \"optimized\")` for unjustified text. Without it, the costs will indeed have no effect.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 11.4,
      "accepted_answer": true,
      "trust_level": 4,
      "user_id": 2
    }
  ],
  "scraped_at": "2025-06-10T09:54:51.612048"
}
{
  "topic_metadata": {
    "id": 1761,
    "title": "How to change figure caption justification?",
    "slug": "how-to-change-figure-caption-justification",
    "posts_count": 6,
    "created_at": "2024-11-17T09:44:39.194Z",
    "last_posted_at": "2024-11-17T22:10:10.443Z",
    "views": 526,
    "like_count": 6,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "ParaN3xus",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 279
  },
  "posts": [
    {
      "id": 5718,
      "post_number": 1,
      "username": "Rene_Skuk",
      "name": "René",
      "created_at": "2024-11-17T09:44:39.432Z",
      "updated_at": "2024-11-17T22:09:44.393Z",
      "cooked": "<p>Is there an easy way to change the justification of <em>all</em> figure captions from the (it seems) default centred justification, to left- or full-justification?</p>",
      "raw": "Is there an easy way to change the justification of _all_ figure captions from the (it seems) default centred justification, to left- or full-justification?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 2385.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 447
    },
    {
      "id": 5720,
      "post_number": 2,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-11-17T12:31:15.387Z",
      "updated_at": "2024-11-17T12:31:15.387Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure.caption: it =&gt; {\n  set align(left)\n  it\n}\n</code></pre>\n<p>and</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure.caption: it =&gt; {\n  set par(justify: true)\n  it\n}\n</code></pre>",
      "raw": "```typ\n#show figure.caption: it => {\n  set align(left)\n  it\n}\n```\nand\n```typ\n#show figure.caption: it => {\n  set par(justify: true)\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 57,
      "score": 51.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 5722,
      "post_number": 3,
      "username": "Rene_Skuk",
      "name": "René",
      "created_at": "2024-11-17T15:11:50.309Z",
      "updated_at": "2024-11-17T15:11:50.309Z",
      "cooked": "<p>Thanks! By now I had figured out that it works with</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show figure.caption: set align(left)\n</code></pre>\n<p>but could update my question because of a server maintenance.</p>\n<p>What difference does the <code>it =&gt; {}</code> operator make?</p>",
      "raw": "Thanks! By now I had figured out that it works with\n```typst\n#show figure.caption: set align(left)\n```\nbut could update my question because of a server maintenance.\n\nWhat difference does the `it => {}` operator make?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 55.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 447
    },
    {
      "id": 5725,
      "post_number": 4,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-11-17T16:25:48.780Z",
      "updated_at": "2024-11-17T16:25:48.780Z",
      "cooked": "<p>There is no difference. Actually your code is a short form of <code>show: it =&gt; { set ...; it }</code></p>",
      "raw": "There is no difference. Actually your code is a short form of `show: it => { set ...; it }`",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 51,
      "score": 20.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 5728,
      "post_number": 5,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-11-17T17:00:21.648Z",
      "updated_at": "2024-11-17T17:00:55.357Z",
      "cooked": "<p>There actually is a difference, as only when using a show-set rule, the behavior can be changed later in the document again.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure.caption: set align(left)\n...\n#show figure.caption: set align(center)\n</code></pre>\n<p>Trying to do the same in the “long form” won’t work, as the inner-most show rule (i.e. the bottom one) is applied first. Therefore, if you have something like this</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure: it =&gt; {\n  set align(left)\n  it\n}\n\n#show figure: it =&gt; {\n  set align(center)\n  it\n}\n\n#figure(...)\n</code></pre>\n<p>you can imagine it to be evaluated first to this</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure: it =&gt; {\n  set align(left)\n  it\n}\n\n#{\n  set align(center)\n  figure(...)\n}\n</code></pre>\n<p>and then to this</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#{\n  set align(center)\n  set align(left)\n  figure(...)\n}\n</code></pre>\n<p>The final alignment is now still <code>left</code>, even though it should have been overridden to <code>center</code>.</p>",
      "raw": "There actually is a difference, as only when using a show-set rule, the behavior can be changed later in the document again.\n```typ\n#show figure.caption: set align(left)\n...\n#show figure.caption: set align(center)\n```\nTrying to do the same in the \"long form\" won't work, as the inner-most show rule (i.e. the bottom one) is applied first. Therefore, if you have something like this\n```typ\n#show figure: it => {\n  set align(left)\n  it\n}\n\n#show figure: it => {\n  set align(center)\n  it\n}\n\n#figure(...)\n```\n\nyou can imagine it to be evaluated first to this\n```typ\n#show figure: it => {\n  set align(left)\n  it\n}\n\n#{\n  set align(center)\n  figure(...)\n}\n```\n\nand then to this\n```typ\n#{\n  set align(center)\n  set align(left)\n  figure(...)\n}\n```\nThe final alignment is now still `left`, even though it should have been overridden to `center`.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 5,
      "reads": 47,
      "score": 154.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 5747,
      "post_number": 6,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-17T22:10:10.443Z",
      "updated_at": "2024-11-17T22:10:10.443Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/rene_skuk\">@Rene_Skuk</a>! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>For future posts, please make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @Rene_Skuk! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nFor future posts, please make sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 34,
      "score": 61.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:54:50.691437"
}
{
  "topic_metadata": {
    "id": 1768,
    "title": "How to extend blocks to bottom of page/column?",
    "slug": "how-to-extend-blocks-to-bottom-of-page-column",
    "posts_count": 6,
    "created_at": "2024-11-17T18:50:13.736Z",
    "last_posted_at": "2024-11-18T20:30:58.152Z",
    "views": 200,
    "like_count": 5,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Xodarap",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 1174
  },
  "posts": [
    {
      "id": 5736,
      "post_number": 1,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-11-17T18:50:13.855Z",
      "updated_at": "2024-11-17T18:50:13.855Z",
      "cooked": "<p>I am making a poster, with the content presented in blocks in three columns. I would like all blocks to have alignment at the bottom of the poster. For example:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(\"presentation-4-3\", margin: 15pt)\n#set par(first-line-indent: 1em)\n#let title(txt, sup:false) = block(text(if sup {24pt} else {15pt})[*#txt*])\n#let section(txt) = block(\n  stroke: gray + 2pt,\n  fill: gray.lighten(50%),\n  radius: 5pt,\n  width: 100%,\n  inset: 10pt,\n  txt\n)\n\n#section(align(center)[#title(sup:true)[Poster Title] #title[Subtitle]])\n#columns(\n  3, \n  gutter: 15pt, \n  for i in range(5) {\n    section[\n      #title[Section #(i+1)]\n      #lorem(28*(i+1))\n      $ (-b plus.minus sqrt(b^2 - 4 a c) ) / (2a) $\n    ]\n  }\n)\n</code></pre>\n<p>Using blocks like this works great as they spill over into the next column if necessary. However, I would like all three columns to be aligned at the bottom (like they are automatically at the top), even if it means just adding whitespace at the end. Must I do this by hand (e.g., using <code>#v()</code>), or is there a way to force the blocks to fill vertical space?</p>",
      "raw": "I am making a poster, with the content presented in blocks in three columns. I would like all blocks to have alignment at the bottom of the poster. For example:\n\n```typst\n#set page(\"presentation-4-3\", margin: 15pt)\n#set par(first-line-indent: 1em)\n#let title(txt, sup:false) = block(text(if sup {24pt} else {15pt})[*#txt*])\n#let section(txt) = block(\n  stroke: gray + 2pt,\n  fill: gray.lighten(50%),\n  radius: 5pt,\n  width: 100%,\n  inset: 10pt,\n  txt\n)\n\n#section(align(center)[#title(sup:true)[Poster Title] #title[Subtitle]])\n#columns(\n  3, \n  gutter: 15pt, \n  for i in range(5) {\n    section[\n      #title[Section #(i+1)]\n      #lorem(28*(i+1))\n      $ (-b plus.minus sqrt(b^2 - 4 a c) ) / (2a) $\n    ]\n  }\n)\n```\nUsing blocks like this works great as they spill over into the next column if necessary. However, I would like all three columns to be aligned at the bottom (like they are automatically at the top), even if it means just adding whitespace at the end. Must I do this by hand (e.g., using `#v()`), or is there a way to force the blocks to fill vertical space?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 37,
      "score": 722.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 177
    },
    {
      "id": 5739,
      "post_number": 2,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-11-17T19:37:45.209Z",
      "updated_at": "2024-11-17T19:37:56.290Z",
      "cooked": "<p>Good question. Something like <code>set(page: justify: true)</code> would be cool to have vertical justification.</p>",
      "raw": "Good question. Something like `set(page: justify: true)` would be cool to have vertical justification.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 33,
      "score": 36.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 5754,
      "post_number": 3,
      "username": "Xodarap",
      "name": "Xodarap",
      "created_at": "2024-11-18T03:57:31.448Z",
      "updated_at": "2024-11-18T04:02:35.743Z",
      "cooked": "<p>Thought 1: You can surely just add <code>#v(1fr)</code> to the bottom of the blocks you want to extend ;)</p>\n<p>Thought 2: but the example you use allows breakable blocks. I don’t know how well that works together :)</p>\n<p>Thought 3: And if you manage to make your blocks non-breakable then you might want to use <a href=\"https://typst.app/docs/reference/layout/grid/\">grid</a></p>",
      "raw": "Thought 1: You can surely just add `#v(1fr)` to the bottom of the blocks you want to extend ;)\n\nThought 2: but the example you use allows breakable blocks. I don’t know how well that works together :)\n\nThought 3: And if you manage to make your blocks non-breakable then you might want to use [grid](https://typst.app/docs/reference/layout/grid/)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 20.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 797
    },
    {
      "id": 5755,
      "post_number": 4,
      "username": "Xodarap",
      "name": "Xodarap",
      "created_at": "2024-11-18T03:58:48.541Z",
      "updated_at": "2024-11-18T04:59:42.444Z",
      "cooked": "<p>You need to be somewhat more precise what you actually want. Which of the blocks should fill more vertical space? The one at the end? The block that is breaking over to the next side (I think this would be exceptionally difficult to achieve) Or some kind of space inside the blocks but (above and) below of the content so that it is the same fraction of space in every block (above and below the respective content)?</p>\n<p>And even if you have answered which of the options you want, I think it would be necessary to tell the columns where they must stop …</p>",
      "raw": "You need to be somewhat more precise what you actually want. Which of the blocks should fill more vertical space? The one at the end? The block that is breaking over to the next side (I think this would be exceptionally difficult to achieve) Or some kind of space inside the blocks but (above and) below of the content so that it is the same fraction of space in every block (above and below the respective content)?\n\nAnd even if you have answered which of the options you want, I think it would be necessary to tell the columns where they must stop ....",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 5.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 797
    },
    {
      "id": 5758,
      "post_number": 5,
      "username": "Xodarap",
      "name": "Xodarap",
      "created_at": "2024-11-18T04:30:49.144Z",
      "updated_at": "2024-11-18T04:58:15.810Z",
      "cooked": "<p>I played around a little with the columns element etc and I think that there is no somewhat sane solution to your problem. I am really hooked by your question because I think that it’s generally a desirable outcome.</p>\n<details>\n<summary>\ninitial thoughts on the concrete problem</summary>\n<p>In any way you probably want to wrap your columns inside a bigger block which takes up the whole width and height. Like this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#block(width: 100%, height: 1fr, stroke: blue,\n  columns(\n    3, \n    gutter: 15pt,\n    {\n      ...\n    }\n  )\n)\n</code></pre>\n</details>\n<p>The problem I see: What you want is some kind of <code>justify</code> but for columns instead of lines. You can imagine the three columns as three lines of written text, but instead of words they consist of blocks. What you want is, that your blocks are touching both sides, the top and the bottom. Just like the individual characters touch both sides, left and right, when you set <code>par(justify: true)</code>.</p>\n<p>iirc is the history of justifying pretty long and the techniques are very complex/sophisticated nowadays. Especially because it usually comes with hyphenation, line-wrapping and so on. In our case you would need to define what are the characters and what are break points where we could insert more whitespace and where not? Line-breaks? Do you want your lines to be have more spacing because of this? paragraph breaks? or just between blocks? (one (rather manual) solution would be to define some points inside a given bigger block which contains the three columns, and then the remaining space would be distributed between these points evenly.)</p>\n<p>On the other hand, one could argue that the machinery is already there then and especially in a framework like typst. I’d agree yes, but to be honest: I don’t have the slightest idea about all this stuff. Probably one of the maintainers could give us some insights …</p>\n<details>\n<summary>\n... not even CSS can do this (I think)</summary>\n<p>I’m really no front-end developer, but I immediately got the reference to flexbox. This is a CSS container used to layout multiple containers. And I always wondered how to do the exact same question you asked. (In this case vertically or horizontally.) I have to say that I also never really dug into it, because on websites it does not matter that much (you essentially have an infinitely long page and content changes all the time anyway). However these web-design protocols are a freaking hell and over time they implemented literally every thinkable component. How comes that they did not develop such a thing? (Maybe I just missed it, then I’d appreciate a note :))<br>\n<a href=\"https://css-tricks.com/snippets/css/a-guide-to-flexbox/\" rel=\"noopener nofollow ugc\">concise and well illustrated summary of flexbox</a></p>\n</details>",
      "raw": "I played around a little with the columns element etc and I think that there is no somewhat sane solution to your problem. I am really hooked by your question because I think that it's generally a desirable outcome.\n\n[details=\"initial thoughts on the concrete problem\"]\nIn any way you probably want to wrap your columns inside a bigger block which takes up the whole width and height. Like this:\n```typst\n#block(width: 100%, height: 1fr, stroke: blue,\n  columns(\n    3, \n    gutter: 15pt,\n    {\n      ...\n    }\n  )\n)\n```\n[/details]\n\n\nThe problem I see: What you want is some kind of `justify` but for columns instead of lines. You can imagine the three columns as three lines of written text, but instead of words they consist of blocks. What you want is, that your blocks are touching both sides, the top and the bottom. Just like the individual characters touch both sides, left and right, when you set `par(justify: true)`.\n\niirc is the history of justifying pretty long and the techniques are very complex/sophisticated nowadays. Especially because it usually comes with hyphenation, line-wrapping and so on. In our case you would need to define what are the characters and what are break points where we could insert more whitespace and where not? Line-breaks? Do you want your lines to be have more spacing because of this? paragraph breaks? or just between blocks? (one (rather manual) solution would be to define some points inside a given bigger block which contains the three columns, and then the remaining space would be distributed between these points evenly.)\n\nOn the other hand, one could argue that the machinery is already there then and especially in a framework like typst. I'd agree yes, but to be honest: I don't have the slightest idea about all this stuff. Probably one of the maintainers could give us some insights ....\n\n\n[details=\"... not even CSS can do this (I think)\"]\nI'm really no front-end developer, but I immediately got the reference to flexbox. This is a CSS container used to layout multiple containers. And I always wondered how to do the exact same question you asked. (In this case vertically or horizontally.) I have to say that I also never really dug into it, because on websites it does not matter that much (you essentially have an infinitely long page and content changes all the time anyway). However these web-design protocols are a freaking hell and over time they implemented literally every thinkable component. How comes that they did not develop such a thing? (Maybe I just missed it, then I'd appreciate a note :))\n[concise and well illustrated summary of flexbox](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 35.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 797
    },
    {
      "id": 5808,
      "post_number": 6,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-11-18T20:30:58.152Z",
      "updated_at": "2024-11-18T20:30:58.152Z",
      "cooked": "<p>I appreciate your thoughts on this <a class=\"mention\" href=\"/u/xodarap\">@Xodarap</a>! To be more explicit about what I was hoping for (though it looks like you were thinking along similar lines):</p>\n<ul>\n<li>maintain the block-breaking behavior between columns</li>\n<li>“vertically justify” the last block in each column so that their bottoms are all level with each other, even if that block breaks to the next column</li>\n<li>I’m not picky about how this vertical space is added, but it could be between paragraphs, just after the main title, or even at the bottom of the block</li>\n</ul>\n<p>I don’t know why I hadn’t thought of using <code>#v(1fr)</code>, but that is a great solution here. I added that underneath the titles of each block that was the last of the column (I preferred to have the space added there instead of between lines in a paragraph), and this worked great. However, it would be nice to have some kind of way to make the <code>#v(1fr)</code> automatically added beneath <code>title</code>s if a given <code>section</code> (referring to my example doc above) is the last one in a column. I am not sure how to detect if an object is the last item in a column, but if I did, I would include a line that says <code>if is_last() {#v(1fr)}</code> in the definition of <code>section</code>. <strong>Any suggestions on how to detect if something is the last of its kind in a column?</strong></p>\n<p>A few more thoughts:</p>\n<ul>\n<li>Given what has been said so far, as long as folks are not hoping to implement a “vertical justify” that involves changing spacing between lines, and instead just looks to change spacing between paras or at top/bottom, then implementing <code>par(justify: true)</code> might be as simple as adding <code>#v(1fr)</code> in the relevant locations during compilation.</li>\n<li>In the end, poster-making requires some manual adjustment no matter what, and I don’t expect a solution to this to make any poster look good and use space appropriately. I hope it just takes a poster that is already well-organized and then make the sections line up along their bases.</li>\n</ul>",
      "raw": "I appreciate your thoughts on this @Xodarap! To be more explicit about what I was hoping for (though it looks like you were thinking along similar lines):\n\n- maintain the block-breaking behavior between columns\n- \"vertically justify\" the last block in each column so that their bottoms are all level with each other, even if that block breaks to the next column\n- I'm not picky about how this vertical space is added, but it could be between paragraphs, just after the main title, or even at the bottom of the block\n\nI don't know why I hadn't thought of using `#v(1fr)`, but that is a great solution here. I added that underneath the titles of each block that was the last of the column (I preferred to have the space added there instead of between lines in a paragraph), and this worked great. However, it would be nice to have some kind of way to make the `#v(1fr)` automatically added beneath `title`s if a given `section` (referring to my example doc above) is the last one in a column. I am not sure how to detect if an object is the last item in a column, but if I did, I would include a line that says `if is_last() {#v(1fr)}` in the definition of `section`. __Any suggestions on how to detect if something is the last of its kind in a column?__\n\nA few more thoughts:\n- Given what has been said so far, as long as folks are not hoping to implement a \"vertical justify\" that involves changing spacing between lines, and instead just looks to change spacing between paras or at top/bottom, then implementing `par(justify: true)` might be as simple as adding `#v(1fr)` in the relevant locations during compilation.\n- In the end, poster-making requires some manual adjustment no matter what, and I don't expect a solution to this to make any poster look good and use space appropriately. I hope it just takes a poster that is already well-organized and then make the sections line up along their bases.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 14.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 177
    }
  ],
  "scraped_at": "2025-06-10T09:54:49.912002"
}
{
  "topic_metadata": {
    "id": 1769,
    "title": "How to achieve this figure in Typst from LaTeX?",
    "slug": "how-to-achieve-this-figure-in-typst-from-latex",
    "posts_count": 6,
    "created_at": "2024-11-17T21:24:19.919Z",
    "last_posted_at": "2024-11-17T22:10:28.176Z",
    "views": 428,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "graphics",
      "cetz",
      "latex-migration"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 1205
  },
  "posts": [
    {
      "id": 5741,
      "post_number": 1,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-11-17T21:24:20.051Z",
      "updated_at": "2024-11-17T21:45:56.361Z",
      "cooked": "<p>Hello!</p>\n<p>I got the following code in Typst:</p>\n<details>\n<summary>\nCode to Generate Plot</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/cetz:0.3.1\"\n#import \"@preview/cetz-plot:0.1.0\": *\n\n \n#cetz.canvas({\n    import cetz.draw: *\n\n    let style = (stroke: black, fill: rgb(0, 0, 200, 75))\n\n    let f1(x) = calc.sin(x)\n    let nonum(eq) = math.equation(block: true, numbering: none, eq)\n    let fn = (\n      (blue, nonum($ \"Cubic Spline\" $),     q =&gt; float(q &gt;= 0) * float(q &lt;= 1) * (1 - ((3/2) * q * q) + ((3/4) * q*q*q)) + float(q &gt; 1) * float(q &lt;= 2) * (1/4 * (2 - q) * (2 - q) * (2 - q))),\n      (orange, nonum($ \"Wendland Quintic\" $), q =&gt; float(q &gt;= 0) * float(q &lt;= 2) * ((1-q/2)*(1-q/2)*(1-q/2)*(1-q/2)*(2*q + 1))),\n    )\n      let fn_der = (\n      (blue, nonum($ \"Cubic Spline - dWdq\" $),     q =&gt; float(q &gt;= 0) * float(q &lt;= 1) * (-3*q + (9/4)*q*q) + float(q &gt; 1) * float(q &lt;= 2) * (-(3/4)*(q - 2)*(q - 2))),\n      (orange, nonum($ \"Wendland Quintic - dWdq\" $), q =&gt; float(q &gt;= 0) * float(q &lt;= 2) * ((5/8)*q*(q - 2)*(q - 2)*(q - 2))),\n    )\n\n    // Set-up a thin axis style\n    set-style(axes: (stroke: .5pt, tick: (stroke: .5pt), ),\n              legend: (stroke: none, orientation: ttb, item: (spacing: .3), scale: 80%))\n\n    // Draw x-line at 0, in a terrible way\n    line((0, 4.4375 ), (12, 4.4375),    mark: (end: none), name: \"long_line\")\n\n\n    // Define W(q) box\n    content(\n      (-3.35, 7),\n      (-1.25, 5),\n      box(\n        par(justify: false)[#nonum($ W(q) $)],\n        stroke: 1pt,\n        width: 100%,\n        height: 75%,\n        inset: 1em\n      )\n    )\n\n    // define dW(q)/dq box\n    content(\n      (-3.35, 1),\n      (-1.25, 3),\n      box(\n        par(justify: false)[#nonum($ (dif W(q)) / (dif q) $)],\n        stroke: 1pt,\n        width: 100%,\n        height: 75%,\n        inset: 1em\n      )\n    )\n\n\n    // Perform plot\n    plot.plot(size: (12, 8),\n      x-label: \"q\",\n      y-label: none,\n      x-tick-step: 1,\n      // x-format: plot.formats.multiple-of,\n      y-tick-step: 0.25, y-min: -1.25, y-max: 1,\n      legend: \"inner-north\",\n      {\n        let domain = (0, 3)\n\n        for ((paint, title, f)) in fn {\n          plot.add(f, style: (stroke: (paint: paint)), domain: domain, label: title)\n        }\n        for ((paint, title, f)) in fn_der {\n          plot.add(f, style: (stroke: (paint: paint, dash: \"dashed\")), domain: domain, label: title)\n        }\n        \n      })\n  })\n</code></pre>\n</details>\n<p>This gives me the following result:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/1/12e0cd9a74afee2278260d71039d1c156919b0f8.png\" alt=\"image\" data-base62-sha1=\"2H0erxibIlm9xlE1N3CU0AL2Oo0\" width=\"623\" height=\"388\"></p>\n<p>I wish to remake the following graph:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/69b481a91069002a0a08dbdb1eee215aab4f3056.png\" data-download-href=\"https://forum.typst.app/uploads/default/69b481a91069002a0a08dbdb1eee215aab4f3056\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/6/69b481a91069002a0a08dbdb1eee215aab4f3056_2_690x418.png\" alt=\"image\" data-base62-sha1=\"f56RNFrmVgb5i9hj4l8VMXAeWeq\" width=\"690\" height=\"418\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/6/69b481a91069002a0a08dbdb1eee215aab4f3056_2_690x418.png, https://forum.typst.app/uploads/default/original/2X/6/69b481a91069002a0a08dbdb1eee215aab4f3056.png 1.5x, https://forum.typst.app/uploads/default/original/2X/6/69b481a91069002a0a08dbdb1eee215aab4f3056.png 2x\" data-dominant-color=\"FAF9FA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">835×506 35.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>What I specifically want to do is at a minimum:</p>\n<ol>\n<li>Remove the square axes and use the similar visualisation</li>\n<li>I want to make xline much easier, I had to “guess” coordinates, I do not want to do so</li>\n<li>Likewise with the boxes to write W(q), dW(q)/dq etc. I had to guess coordinates, instead of being able to put it relatively to y-axis</li>\n</ol>\n<p>Hope you can help me level up my skills and achieve my goal in Typst!</p>\n<p>Kind regards</p>",
      "raw": "Hello!\n\nI got the following code in Typst:\n\n\n[details=\"Code to Generate Plot\"]\n```typst\n#import \"@preview/cetz:0.3.1\"\n#import \"@preview/cetz-plot:0.1.0\": *\n\n \n#cetz.canvas({\n    import cetz.draw: *\n\n    let style = (stroke: black, fill: rgb(0, 0, 200, 75))\n\n    let f1(x) = calc.sin(x)\n    let nonum(eq) = math.equation(block: true, numbering: none, eq)\n    let fn = (\n      (blue, nonum($ \"Cubic Spline\" $),     q => float(q >= 0) * float(q <= 1) * (1 - ((3/2) * q * q) + ((3/4) * q*q*q)) + float(q > 1) * float(q <= 2) * (1/4 * (2 - q) * (2 - q) * (2 - q))),\n      (orange, nonum($ \"Wendland Quintic\" $), q => float(q >= 0) * float(q <= 2) * ((1-q/2)*(1-q/2)*(1-q/2)*(1-q/2)*(2*q + 1))),\n    )\n      let fn_der = (\n      (blue, nonum($ \"Cubic Spline - dWdq\" $),     q => float(q >= 0) * float(q <= 1) * (-3*q + (9/4)*q*q) + float(q > 1) * float(q <= 2) * (-(3/4)*(q - 2)*(q - 2))),\n      (orange, nonum($ \"Wendland Quintic - dWdq\" $), q => float(q >= 0) * float(q <= 2) * ((5/8)*q*(q - 2)*(q - 2)*(q - 2))),\n    )\n\n    // Set-up a thin axis style\n    set-style(axes: (stroke: .5pt, tick: (stroke: .5pt), ),\n              legend: (stroke: none, orientation: ttb, item: (spacing: .3), scale: 80%))\n\n    // Draw x-line at 0, in a terrible way\n    line((0, 4.4375 ), (12, 4.4375),    mark: (end: none), name: \"long_line\")\n\n\n    // Define W(q) box\n    content(\n      (-3.35, 7),\n      (-1.25, 5),\n      box(\n        par(justify: false)[#nonum($ W(q) $)],\n        stroke: 1pt,\n        width: 100%,\n        height: 75%,\n        inset: 1em\n      )\n    )\n\n    // define dW(q)/dq box\n    content(\n      (-3.35, 1),\n      (-1.25, 3),\n      box(\n        par(justify: false)[#nonum($ (dif W(q)) / (dif q) $)],\n        stroke: 1pt,\n        width: 100%,\n        height: 75%,\n        inset: 1em\n      )\n    )\n\n\n    // Perform plot\n    plot.plot(size: (12, 8),\n      x-label: \"q\",\n      y-label: none,\n      x-tick-step: 1,\n      // x-format: plot.formats.multiple-of,\n      y-tick-step: 0.25, y-min: -1.25, y-max: 1,\n      legend: \"inner-north\",\n      {\n        let domain = (0, 3)\n\n        for ((paint, title, f)) in fn {\n          plot.add(f, style: (stroke: (paint: paint)), domain: domain, label: title)\n        }\n        for ((paint, title, f)) in fn_der {\n          plot.add(f, style: (stroke: (paint: paint, dash: \"dashed\")), domain: domain, label: title)\n        }\n        \n      })\n  })\n```\n[/details]\n\nThis gives me the following result:\n\n![image|623x388](upload://2H0erxibIlm9xlE1N3CU0AL2Oo0.png)\n\nI wish to remake the following graph:\n\n![image|690x418](upload://f56RNFrmVgb5i9hj4l8VMXAeWeq.png)\n\nWhat I specifically want to do is at a minimum:\n\n1. Remove the square axes and use the similar visualisation\n2. I want to make xline much easier, I had to \"guess\" coordinates, I do not want to do so\n3. Likewise with the boxes to write W(q), dW(q)/dq etc. I had to guess coordinates, instead of being able to put it relatively to y-axis\n\nHope you can help me level up my skills and achieve my goal in Typst!\n\nKind regards",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 80,
      "score": 1196.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    },
    {
      "id": 5742,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-11-17T21:42:58.331Z",
      "updated_at": "2024-11-17T21:42:58.331Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/ahmedsalih\">@AhmedSalih</a>, thanks for your question! A few things I noticed:</p>\n<ul>\n<li>\n<p>could you try to revise your post’s title to be a complete question as per the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a>:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>We hope by adhering to this, we make the information in this forum easy to find in the future.</p>\n</li>\n<li>\n<p>likewise, if you add tags such as <a class=\"hashtag-cooked\" href=\"/tag/graphics\" data-type=\"tag\" data-slug=\"graphics\" data-id=\"85\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>graphics</span></a>, <a class=\"hashtag-cooked\" href=\"/tag/cetz\" data-type=\"tag\" data-slug=\"cetz\" data-id=\"1\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>cetz</span></a>, <a class=\"hashtag-cooked\" href=\"/tag/latex-migration\" data-type=\"tag\" data-slug=\"latex-migration\" data-id=\"92\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>latex-migration</span></a> this will help with discoverability</p>\n</li>\n<li>\n<p>finally, if you use <code>```typ ... ```</code> for your code block, the syntax highlighting will work properly</p>\n</li>\n</ul>\n<p>Thanks!</p>",
      "raw": "Hi @AhmedSalih, thanks for your question! A few things I noticed:\n- could you try to revise your post’s title to be a complete question as per the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11):\n\n  > **Good titles are questions you would ask your friend about Typst.**\n\n  We hope by adhering to this, we make the information in this forum easy to find in the future.\n- likewise, if you add tags such as #graphics, #cetz, #latex-migration this will help with discoverability\n- finally, if you use ` ```typ ... ``` ` for your code block, the syntax highlighting will work properly\n\nThanks!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 73,
      "score": 34.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 5743,
      "post_number": 3,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-11-17T21:45:35.510Z",
      "updated_at": "2024-11-17T21:46:10.404Z",
      "cooked": "<ol>\n<li>Done</li>\n<li>Done :-)</li>\n<li>Done</li>\n</ol>",
      "raw": "1. Done\n2. Done :-)\n3. Done",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 69,
      "score": 63.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    },
    {
      "id": 5744,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-11-17T21:49:44.950Z",
      "updated_at": "2024-11-17T21:49:57.844Z",
      "cooked": "<p>Thanks!</p>\n<p>Your first requirement can be achieved with <code>plot.plot(axis-style: \"school-book\")</code>. What do you mean by “I want to make xline much easier”?</p>",
      "raw": "Thanks!\n\nYour first requirement can be achieved with `plot.plot(axis-style: \"school-book\")`. What do you mean by \"I want to make xline much easier\"?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 66,
      "score": 23.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 5745,
      "post_number": 5,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-11-17T21:52:09.327Z",
      "updated_at": "2024-11-17T21:52:30.720Z",
      "cooked": "<p>Amazing now I have:</p>\n<details>\n<summary>\nCode Update 1</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/cetz:0.3.1\"\n#import \"@preview/cetz-plot:0.1.0\": *\n\n \n#cetz.canvas({\n    import cetz.draw: *\n\n    let style = (stroke: black, fill: rgb(0, 0, 200, 75))\n\n    let f1(x) = calc.sin(x)\n    let nonum(eq) = math.equation(block: true, numbering: none, eq)\n    let fn = (\n      (blue, nonum($ \"Cubic Spline\" $),     q =&gt; float(q &gt;= 0) * float(q &lt;= 1) * (1 - ((3/2) * q * q) + ((3/4) * q*q*q)) + float(q &gt; 1) * float(q &lt;= 2) * (1/4 * (2 - q) * (2 - q) * (2 - q))),\n      (orange, nonum($ \"Wendland Quintic\" $), q =&gt; float(q &gt;= 0) * float(q &lt;= 2) * ((1-q/2)*(1-q/2)*(1-q/2)*(1-q/2)*(2*q + 1))),\n    )\n      let fn_der = (\n      (blue, nonum($ \"Cubic Spline - dWdq\" $),     q =&gt; float(q &gt;= 0) * float(q &lt;= 1) * (-3*q + (9/4)*q*q) + float(q &gt; 1) * float(q &lt;= 2) * (-(3/4)*(q - 2)*(q - 2))),\n      (orange, nonum($ \"Wendland Quintic - dWdq\" $), q =&gt; float(q &gt;= 0) * float(q &lt;= 2) * ((5/8)*q*(q - 2)*(q - 2)*(q - 2))),\n    )\n\n    // Set-up a thin axis style\n    set-style(axes: (stroke: .5pt, tick: (stroke: .5pt), ),\n              legend: (stroke: none, orientation: ttb, item: (spacing: .3), scale: 80%))\n\n    // Draw x-line at 0, in a terrible way\n    line((0, 4.4375 ), (12, 4.4375),    mark: (end: none), name: \"long_line\")\n\n\n    // Define W(q) box\n    content(\n      (-3.35, 7),\n      (-1.25, 5),\n      box(\n        par(justify: false)[#nonum($ W(q) $)],\n        stroke: 1pt,\n        width: 100%,\n        height: 75%,\n        inset: 1em\n      )\n    )\n\n    // define dW(q)/dq box\n    content(\n      (-3.35, 1),\n      (-1.25, 3),\n      box(\n        par(justify: false)[#nonum($ (dif W(q)) / (dif q) $)],\n        stroke: 1pt,\n        width: 100%,\n        height: 75%,\n        inset: 1em\n      )\n    )\n\n\n    // Perform plot\n    plot.plot(size: (12, 8),\n      x-label: \"q\",\n      y-label: none,\n      x-tick-step: 1,\n      axis-style: \"school-book\",\n      // x-format: plot.formats.multiple-of,\n      y-tick-step: 0.25, y-min: -1.25, y-max: 1,\n      legend: \"inner-north\",\n      {\n        let domain = (0, 3)\n\n        for ((paint, title, f)) in fn {\n          plot.add(f, style: (stroke: (paint: paint)), domain: domain, label: title)\n        }\n        for ((paint, title, f)) in fn_der {\n          plot.add(f, style: (stroke: (paint: paint, dash: \"dashed\")), domain: domain, label: title)\n        }\n        \n      })\n  })\n</code></pre>\n</details>\n<p>In regards to making <code>xline</code> easier, I just don’t understand how to make it use the actual plot coordinates instead of the CeTZ canvas I assume it is using? I have to put some weird coordinates in where I just really want to put in (0,0) and (3,0) tbh</p>\n<p>Image:</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/4/4e0dc4ec95c3c7ad08a30d640fee5a18374d30fa.png\" alt=\"image\" data-base62-sha1=\"b8uK4EfDDz3Dn92Z8R9i1sq5J8u\" width=\"680\" height=\"384\"></p>\n<p>Kind regards</p>",
      "raw": "Amazing now I have:\n\n\n[details=\"Code Update 1\"]\n```typst\n#import \"@preview/cetz:0.3.1\"\n#import \"@preview/cetz-plot:0.1.0\": *\n\n \n#cetz.canvas({\n    import cetz.draw: *\n\n    let style = (stroke: black, fill: rgb(0, 0, 200, 75))\n\n    let f1(x) = calc.sin(x)\n    let nonum(eq) = math.equation(block: true, numbering: none, eq)\n    let fn = (\n      (blue, nonum($ \"Cubic Spline\" $),     q => float(q >= 0) * float(q <= 1) * (1 - ((3/2) * q * q) + ((3/4) * q*q*q)) + float(q > 1) * float(q <= 2) * (1/4 * (2 - q) * (2 - q) * (2 - q))),\n      (orange, nonum($ \"Wendland Quintic\" $), q => float(q >= 0) * float(q <= 2) * ((1-q/2)*(1-q/2)*(1-q/2)*(1-q/2)*(2*q + 1))),\n    )\n      let fn_der = (\n      (blue, nonum($ \"Cubic Spline - dWdq\" $),     q => float(q >= 0) * float(q <= 1) * (-3*q + (9/4)*q*q) + float(q > 1) * float(q <= 2) * (-(3/4)*(q - 2)*(q - 2))),\n      (orange, nonum($ \"Wendland Quintic - dWdq\" $), q => float(q >= 0) * float(q <= 2) * ((5/8)*q*(q - 2)*(q - 2)*(q - 2))),\n    )\n\n    // Set-up a thin axis style\n    set-style(axes: (stroke: .5pt, tick: (stroke: .5pt), ),\n              legend: (stroke: none, orientation: ttb, item: (spacing: .3), scale: 80%))\n\n    // Draw x-line at 0, in a terrible way\n    line((0, 4.4375 ), (12, 4.4375),    mark: (end: none), name: \"long_line\")\n\n\n    // Define W(q) box\n    content(\n      (-3.35, 7),\n      (-1.25, 5),\n      box(\n        par(justify: false)[#nonum($ W(q) $)],\n        stroke: 1pt,\n        width: 100%,\n        height: 75%,\n        inset: 1em\n      )\n    )\n\n    // define dW(q)/dq box\n    content(\n      (-3.35, 1),\n      (-1.25, 3),\n      box(\n        par(justify: false)[#nonum($ (dif W(q)) / (dif q) $)],\n        stroke: 1pt,\n        width: 100%,\n        height: 75%,\n        inset: 1em\n      )\n    )\n\n\n    // Perform plot\n    plot.plot(size: (12, 8),\n      x-label: \"q\",\n      y-label: none,\n      x-tick-step: 1,\n      axis-style: \"school-book\",\n      // x-format: plot.formats.multiple-of,\n      y-tick-step: 0.25, y-min: -1.25, y-max: 1,\n      legend: \"inner-north\",\n      {\n        let domain = (0, 3)\n\n        for ((paint, title, f)) in fn {\n          plot.add(f, style: (stroke: (paint: paint)), domain: domain, label: title)\n        }\n        for ((paint, title, f)) in fn_der {\n          plot.add(f, style: (stroke: (paint: paint, dash: \"dashed\")), domain: domain, label: title)\n        }\n        \n      })\n  })\n```\n[/details]\n\nIn regards to making `xline` easier, I just don't understand how to make it use the actual plot coordinates instead of the CeTZ canvas I assume it is using? I have to put some weird coordinates in where I just really want to put in (0,0) and (3,0) tbh\n\nImage:\n\n![image|680x384](upload://b8uK4EfDDz3Dn92Z8R9i1sq5J8u.png)\n\n\nKind regards",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 65,
      "score": 48.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    },
    {
      "id": 5748,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-11-17T22:10:28.176Z",
      "updated_at": "2024-11-17T22:36:42.077Z",
      "cooked": "<p>oh, I searched the code for <code>xline</code> and missed that there was an <code>x-line</code> <img src=\"https://forum.typst.app/images/emoji/apple/stuck_out_tongue.png?v=12\" title=\":stuck_out_tongue:\" class=\"emoji\" alt=\":stuck_out_tongue:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>the plot coordinates are only defined within <code>plot</code>, but you can use <code>add-hline()</code> (see <a href=\"https://raw.githubusercontent.com/cetz-package/cetz-plot/refs/heads/stable/manual.pdf\">the manual</a> for details):</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">plot.add-hline(0, min: 0, max: 3)\n</code></pre>\n<p>That means to put the boxes aligned around the x axis, you’ll also need to somehow put them within <code>plot</code>, but there it’s a bit less obvious. cetz-plot has an <code>annotate()</code> function:</p>\n<blockquote>\n<p>An annotation is a sub-canvas that uses the plots coordinates specified by its x and y axis</p>\n</blockquote>\n<p>So you can do the following:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">plot.annotate(resize: false, {\n  let (x, y) = (-0.55, 0.5)\n  let ann(body) = block(\n    stroke: 1pt,\n    width: 15mm,\n    height: 14mm,\n    align(center+horizon, body)\n  )\n  \n  // Define W(q) box\n  content((x, y), ann(nonum($ W(q) $)))\n\n  // define dW(q)/dq box\n  content((x, -y), ann(nonum($ (dif W(q)) / (dif q) $)))\n})\n</code></pre>\n<p>And to have all the information in one post: <code>plot.plot(axis-style: \"school-book\")</code> is how you configure the axis as desired <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "oh, I searched the code for `xline` and missed that there was an `x-line` :stuck_out_tongue: \n\nthe plot coordinates are only defined within `plot`, but you can use `add-hline()` (see [the manual](https://raw.githubusercontent.com/cetz-package/cetz-plot/refs/heads/stable/manual.pdf) for details):\n```typc\nplot.add-hline(0, min: 0, max: 3)\n```\nThat means to put the boxes aligned around the x axis, you'll also need to somehow put them within `plot`, but there it's a bit less obvious. cetz-plot has an `annotate()` function:\n> An annotation is a sub-canvas that uses the plots coordinates specified by its x and y axis\n\nSo you can do the following:\n```typc\nplot.annotate(resize: false, {\n  let (x, y) = (-0.55, 0.5)\n  let ann(body) = block(\n    stroke: 1pt,\n    width: 15mm,\n    height: 14mm,\n    align(center+horizon, body)\n  )\n  \n  // Define W(q) box\n  content((x, y), ann(nonum($ W(q) $)))\n\n  // define dW(q)/dq box\n  content((x, -y), ann(nonum($ (dif W(q)) / (dif q) $)))\n})\n```\n\nAnd to have all the information in one post: `plot.plot(axis-style: \"school-book\")` is how you configure the axis as desired :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 61,
      "score": 62.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:54:49.181745"
}
{
  "topic_metadata": {
    "id": 1774,
    "title": "How to measure leading in a paragraph?",
    "slug": "how-to-measure-leading-in-a-paragraph",
    "posts_count": 4,
    "created_at": "2024-11-18T04:11:52.501Z",
    "last_posted_at": "2024-11-19T13:05:32.225Z",
    "views": 86,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "xkevio",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 211
  },
  "posts": [
    {
      "id": 5757,
      "post_number": 1,
      "username": "Evan",
      "name": "Evan",
      "created_at": "2024-11-18T04:11:52.664Z",
      "updated_at": "2024-11-18T04:11:52.664Z",
      "cooked": "<p>I’m trying to <code>place</code> a box above a line in a paragraph. The box will occupy part of the leading of the line, which is intentional, but it can also block the previous line if it’s too tall. I can fix it (e.g. by putting a box in the current line) if I can measure the leading of the current line in the paragraph. How does one do that? Thanks.</p>",
      "raw": "I'm trying to `place` a box above a line in a paragraph. The box will occupy part of the leading of the line, which is intentional, but it can also block the previous line if it's too tall. I can fix it (e.g. by putting a box in the current line) if I can measure the leading of the current line in the paragraph. How does one do that? Thanks.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 111.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 820
    },
    {
      "id": 5792,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-11-18T12:26:51.281Z",
      "updated_at": "2024-11-18T12:26:51.281Z",
      "cooked": "<p><code>#context par.leading</code> will give you the <em>current</em> value of <code>leading</code> at that exact location in the document. However, anything with <code>context</code> returns content so you can’t use this as a numerical value like <code>5 * #context par.leading</code>.</p>\n<p>Rather, any calculations and their resulting content should be done within this <code>context</code> expression, like so (see <a href=\"https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164\" class=\"inline-onebox\">Why is the value I receive from context always content?</a>):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context {\n  let leading = par.leading\n  // your place calculation\n  // return your place + box\n}\n</code></pre>",
      "raw": "`#context par.leading` will give you the *current* value of `leading` at that exact location in the document. However, anything with `context` returns content so you can't use this as a numerical value like `5 * #context par.leading`. \n\nRather, any calculations and their resulting content should be done within this `context` expression, like so (see https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164):\n\n```typ\n#context {\n  let leading = par.leading\n  // your place calculation\n  // return your place + box\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 30.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 5829,
      "post_number": 3,
      "username": "Evan",
      "name": "Evan",
      "created_at": "2024-11-19T12:20:28.004Z",
      "updated_at": "2024-11-19T12:20:28.004Z",
      "cooked": "<p>Thank you, that worked! How do I know from the document that <code>leading</code> is available as a field of <code>par</code>?</p>",
      "raw": "Thank you, that worked! How do I know from the document that `leading` is available as a field of `par`?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 820
    },
    {
      "id": 5831,
      "post_number": 4,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-11-19T13:05:32.225Z",
      "updated_at": "2024-11-19T13:05:32.225Z",
      "cooked": "<p>It should be in the docs, there you can check what fields element functions have and usually, they should then be available in a context expression: <a href=\"https://typst.app/docs/reference/model/par/\" class=\"inline-onebox\">Paragraph Function – Typst Documentation</a>.</p>",
      "raw": "It should be in the docs, there you can check what fields element functions have and usually, they should then be available in a context expression: https://typst.app/docs/reference/model/par/.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 3.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    }
  ],
  "scraped_at": "2025-06-10T09:54:48.461296"
}
{
  "topic_metadata": {
    "id": 1776,
    "title": "How do I use grid with percentage width",
    "slug": "how-do-i-use-grid-with-percentage-width",
    "posts_count": 2,
    "created_at": "2024-11-18T10:13:17.363Z",
    "last_posted_at": "2024-11-18T11:06:52.281Z",
    "views": 71,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "M4R1S",
    "tags": [],
    "category_id": 5,
    "participant_count": 1,
    "word_count": 82
  },
  "posts": [
    {
      "id": 5768,
      "post_number": 1,
      "username": "M4R1S",
      "name": "Maris Baier",
      "created_at": "2024-11-18T10:13:17.789Z",
      "updated_at": "2024-11-18T11:11:10.587Z",
      "cooked": "<p>I am trying to create two columns where one of them takes x% of the page (and the other column fills the rest) using grid:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#grid(\n    columns: (30%,70%), align: center,\n    [Content A],\n    [Content B]\n)\n</code></pre>\n<p>What I also tried was:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#grid(\n    columns: (1fr,3fr), align: center,\n    [Content A],\n    [Content B]\n)\n</code></pre>",
      "raw": "I am trying to create two columns where one of them takes x% of the page (and the other column fills the rest) using grid:\n\n```typ\n#grid(\n    columns: (30%,70%), align: center,\n    [Content A],\n    [Content B]\n)\n```\nWhat I also tried was:\n```typ\n#grid(\n    columns: (1fr,3fr), align: center,\n    [Content A],\n    [Content B]\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 200.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 643
    },
    {
      "id": 5770,
      "post_number": 2,
      "username": "M4R1S",
      "name": "Maris Baier",
      "created_at": "2024-11-18T11:06:52.281Z",
      "updated_at": "2024-11-18T11:11:19.269Z",
      "cooked": "<p>The second example created the desired result. I didn’t notice it already worked:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#grid(\n    columns: (2fr,1fr), align: center,\n    [Content A],\n    [Content B]\n)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/9/930fb1e5c7bc7c31081bb978376560112d8270fc.png\" data-download-href=\"https://forum.typst.app/uploads/default/930fb1e5c7bc7c31081bb978376560112d8270fc\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/9/930fb1e5c7bc7c31081bb978376560112d8270fc_2_690x170.png\" alt=\"image\" data-base62-sha1=\"kYXOumANN1oiAgf0PUo1YDMcaHG\" width=\"690\" height=\"170\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/9/930fb1e5c7bc7c31081bb978376560112d8270fc_2_690x170.png, https://forum.typst.app/uploads/default/original/2X/9/930fb1e5c7bc7c31081bb978376560112d8270fc.png 1.5x, https://forum.typst.app/uploads/default/original/2X/9/930fb1e5c7bc7c31081bb978376560112d8270fc.png 2x\" data-dominant-color=\"FBFBFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">847×209 14 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "The second example created the desired result. I didn't notice it already worked:\n```typ\n#grid(\n    columns: (2fr,1fr), align: center,\n    [Content A],\n    [Content B]\n)\n```\n\n![image|690x170](upload://kYXOumANN1oiAgf0PUo1YDMcaHG.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 643
    }
  ],
  "scraped_at": "2025-06-10T09:54:47.751675"
}
{
  "topic_metadata": {
    "id": 1781,
    "title": "How does one avoid caligraphic font difference between Typst and LaTeX?",
    "slug": "how-does-one-avoid-caligraphic-font-difference-between-typst-and-latex",
    "posts_count": 6,
    "created_at": "2024-11-18T16:26:12.338Z",
    "last_posted_at": "2025-05-28T14:11:28.140Z",
    "views": 714,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Eric",
    "tags": [
      "math",
      "fonts"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 643
  },
  "posts": [
    {
      "id": 5795,
      "post_number": 1,
      "username": "anormalperson8",
      "name": "",
      "created_at": "2024-11-18T16:26:12.505Z",
      "updated_at": "2024-11-18T16:30:15.023Z",
      "cooked": "<p>In LaTeX, the calligraphic font by <code>amsmath</code> creates the following:</p>\n<pre data-code-wrap=\"latex\"><code class=\"lang-latex\">\\documentclass[margin=10mm]{standalone}\n\\usepackage{amsmath}\n\n\\begin{document}\n$\\mathcal{ABCDEFGHIJKLMANOPQRSTUVWXYZ}$\n\\end{document}\n</code></pre>\n<p>gives<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/4/44379ac5c0881d81ab876897aa24bd7185331824.png\" data-download-href=\"https://forum.typst.app/uploads/default/44379ac5c0881d81ab876897aa24bd7185331824\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/4/44379ac5c0881d81ab876897aa24bd7185331824_2_690x76.png\" alt=\"image\" data-base62-sha1=\"9JtBdnfN9ATl4HPxyg7nDoNYaaw\" width=\"690\" height=\"76\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/4/44379ac5c0881d81ab876897aa24bd7185331824_2_690x76.png, https://forum.typst.app/uploads/default/optimized/2X/4/44379ac5c0881d81ab876897aa24bd7185331824_2_1035x114.png 1.5x, https://forum.typst.app/uploads/default/original/2X/4/44379ac5c0881d81ab876897aa24bd7185331824.png 2x\" data-dominant-color=\"EDEDED\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1259×139 28.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>However, the calligraphic font in Typst:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(margin: 10pt, width: auto, height: auto, background: none)\n$cal(A B C D E F G H I J K L M N O P Q R S T U V W X Y Z)$\n</code></pre>\n<p>gives<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/ec1742be09b2f2ae891981c4d608c63c42481886.png\" data-download-href=\"https://forum.typst.app/uploads/default/ec1742be09b2f2ae891981c4d608c63c42481886\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/ec1742be09b2f2ae891981c4d608c63c42481886_2_690x72.png\" alt=\"image\" data-base62-sha1=\"xGywaxKTxpgcZnnKJmt1VfjZMQ6\" width=\"690\" height=\"72\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/ec1742be09b2f2ae891981c4d608c63c42481886_2_690x72.png, https://forum.typst.app/uploads/default/optimized/2X/e/ec1742be09b2f2ae891981c4d608c63c42481886_2_1035x108.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/e/ec1742be09b2f2ae891981c4d608c63c42481886_2_1380x144.png 2x\" data-dominant-color=\"EDEDED\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1771×185 47.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nCan someone point me to a solution to get LaTeX’s version of calligraphic font (if it is possible)? Perhaps a font feature option? I don’t know where to start if I were to try and search it myself. <img src=\"https://forum.typst.app/images/emoji/apple/see_no_evil.png?v=12\" title=\":see_no_evil:\" class=\"emoji\" alt=\":see_no_evil:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Many thanks!</p>",
      "raw": "In LaTeX, the calligraphic font by `amsmath` creates the following:\n```latex\n\\documentclass[margin=10mm]{standalone}\n\\usepackage{amsmath}\n\n\\begin{document}\n$\\mathcal{ABCDEFGHIJKLMANOPQRSTUVWXYZ}$\n\\end{document}\n```\ngives\n![image|690x76](upload://9JtBdnfN9ATl4HPxyg7nDoNYaaw.png)\n\nHowever, the calligraphic font in Typst:\n```typ\n#set page(margin: 10pt, width: auto, height: auto, background: none)\n$cal(A B C D E F G H I J K L M N O P Q R S T U V W X Y Z)$\n```\ngives\n![image|690x72](upload://xGywaxKTxpgcZnnKJmt1VfjZMQ6.png)\nCan someone point me to a solution to get LaTeX's version of calligraphic font (if it is possible)? Perhaps a font feature option? I don't know where to start if I were to try and search it myself. :see_no_evil: \n\nMany thanks!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 102,
      "score": 2535.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 476
    },
    {
      "id": 5824,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2024-11-19T11:03:06.028Z",
      "updated_at": "2024-11-19T11:03:06.028Z",
      "cooked": "<p>The <a href=\"https://typst.app/docs/reference/math/variants#functions-cal\">documentation for <code>cal</code></a> shows how to enable a font option (stylistic set) to get a different style, but I don’t think this will help you.</p>\n<p>I think this is just New Computer Modern Math (used by Typst) being different from the default Latex font. If you do <code>\\usepackage{fontsetup}</code> (the more recent way to setup fonts in Latex) it will also use New Computer Modern and you’ll get the same style as Typst.</p>\n<p>To answer directly your question: you’d need to find a Truetype/OpenType font with this style for calligraphic letters. I don’t know if there’s one.</p>",
      "raw": "The [documentation for `cal`](https://typst.app/docs/reference/math/variants#functions-cal) shows how to enable a font option (stylistic set) to get a different style, but I don't think this will help you.\n\nI think this is just New Computer Modern Math (used by Typst) being different from the default Latex font. If you do `\\usepackage{fontsetup}` (the more recent way to setup fonts in Latex) it will also use New Computer Modern and you'll get the same style as Typst.\n\nTo answer directly your question: you'd need to find a Truetype/OpenType font with this style for calligraphic letters. I don't know if there's one.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 96,
      "score": 164.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 5835,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-11-19T13:57:01.610Z",
      "updated_at": "2024-11-19T15:24:04.131Z",
      "cooked": "<p>One possible font with this style of calligraphic letters would be this <a href=\"https://github.com/YuanshengZhao/Garamond-Math\" rel=\"noopener nofollow ugc\">Garamond Math</a> with stylistic set 3. To only use this font for those letters, you can define a custom function like this (using some weird hacks to circumvent a <a href=\"https://github.com/typst/typst/issues/3379\" rel=\"noopener nofollow ugc\">current limitation</a> of Typst) :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let cal(it) = math.class(\"normal\", box({\n  show math.equation: set text(font: \"Garamond-Math\", stylistic-set: 3)\n  $#math.cal(it)$\n}) + h(0pt))\n</code></pre>",
      "raw": "One possible font with this style of calligraphic letters would be this [Garamond Math](https://github.com/YuanshengZhao/Garamond-Math) with stylistic set 3. To only use this font for those letters, you can define a custom function like this (using some weird hacks to circumvent a [current limitation](https://github.com/typst/typst/issues/3379) of Typst) :\n```typ\n#let cal(it) = math.class(\"normal\", box({\n  show math.equation: set text(font: \"Garamond-Math\", stylistic-set: 3)\n  $#math.cal(it)$\n}) + h(0pt))\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 90,
      "score": 53.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 5860,
      "post_number": 4,
      "username": "pg999w",
      "name": "Peng Guanwen",
      "created_at": "2024-11-20T07:10:25.300Z",
      "updated_at": "2024-11-20T07:10:25.300Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"anormalperson8\" data-post=\"1\" data-topic=\"1781\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/a/F88938/48.png\" class=\"avatar\"> anormalperson8:</div>\n<blockquote>\n<p>In LaTeX, the calligraphic font by <code>amsmath</code> creates the following:</p>\n</blockquote>\n</aside>\n<p>The <code>\\mathcal</code> font is not provided by <code>amsmath</code>. In <em>User’s Guide for the amsmath Package</em>:</p>\n<blockquote>\n<p>The basic set of math font commands in LaTeX includes \\mathbf, \\mathrm, \\mathcal, \\mathsf, \\mathtt, \\mathit. Additional math alphabet commands such as \\mathbb for blackboard bold, \\mathfrak for Fraktur, and \\mathscr for Euler script are available through the packages amsfonts and euscript (distributed separately).</p>\n</blockquote>\n<p>The font you are using is the TFM font Computer Modern.</p>",
      "raw": "[quote=\"anormalperson8, post:1, topic:1781\"]\nIn LaTeX, the calligraphic font by `amsmath` creates the following:\n[/quote]\n\nThe `\\mathcal` font is not provided by `amsmath`. In *User’s Guide for the amsmath Package*:\n\n> The basic set of math font commands in LaTeX includes \\mathbf, \\mathrm, \\mathcal, \\mathsf, \\mathtt, \\mathit. Additional math alphabet commands such as \\mathbb for blackboard bold, \\mathfrak for Fraktur, and \\mathscr for Euler script are available through the packages amsfonts and euscript (distributed separately).\n\nThe font you are using is the TFM font Computer Modern.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 76,
      "score": 35.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 359
    },
    {
      "id": 13332,
      "post_number": 5,
      "username": "aaronmanning",
      "name": "Aaron Manning",
      "created_at": "2025-05-28T06:32:38.451Z",
      "updated_at": "2025-05-28T06:32:38.451Z",
      "cooked": "<p>This solution doesn’t work when the caligraphic fonts are used in subscripts, for instance</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$\n  sum_(i in cal(I)) x_i = 0.\n$\n</code></pre>\n<p>This renders with the <code>cal(I)</code> full size, as though it weren’t a part of the subscript.</p>\n<p>Would you happen to have a solution that works in this case too?</p>",
      "raw": "This solution doesn't work when the caligraphic fonts are used in subscripts, for instance\n\n```\n$\n  sum_(i in cal(I)) x_i = 0.\n$\n```\n\nThis renders with the `cal(I)` full size, as though it weren't a part of the subscript.\n\nWould you happen to have a solution that works in this case too?",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 11.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 557
    },
    {
      "id": 13360,
      "post_number": 6,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-05-28T14:11:28.140Z",
      "updated_at": "2025-05-28T14:15:37.121Z",
      "cooked": "<p>Right, there were some changes in 0.13 regarding how nested equations are sized in subscripts. There is an open issue about that <a href=\"https://github.com/typst/typst/issues/5929\" rel=\"noopener nofollow ugc\">here</a>. Since this also came with a change in how <code>1em</code> is resolved, we can use that to our advantage and calculate the ratio by which the text size changes in subscripts. Based on that ratio, we can then decide whether to wrap the equation in a <a href=\"https://typst.app/docs/reference/math/sizes#functions-script\"><code>script</code> or <code>sscript</code></a> call. I choose a boundary of <code>60%</code> in the hope that it works with most math fonts, but that can be adjusted.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let cal(it) = math.class(\"normal\", context {\n  show math.equation: set text(font: \"Garamond-Math\", stylistic-set: 3)\n\n  let scaling = 100% * (1em.to-absolute() / text.size)\n  let wrapper = if scaling &lt; 60% { math.sscript }\n                else if scaling &lt; 100% { math.script }\n                else { it =&gt; it }\n  \n  box(text(top-edge: \"bounds\", $wrapper(math.cal(it))$))\n})\n</code></pre>\n<p>The <code>top-edge: \"bounds\"</code> is necessary as otherwise, the box get the regular (i.e. unscaled) height leading to a misplaced subscript.</p>",
      "raw": "Right, there were some changes in 0.13 regarding how nested equations are sized in subscripts. There is an open issue about that [here](https://github.com/typst/typst/issues/5929). Since this also came with a change in how `1em` is resolved, we can use that to our advantage and calculate the ratio by which the text size changes in subscripts. Based on that ratio, we can then decide whether to wrap the equation in a [`script` or `sscript`](https://typst.app/docs/reference/math/sizes#functions-script) call. I choose a boundary of `60%` in the hope that it works with most math fonts, but that can be adjusted.\n\n```typ\n#let cal(it) = math.class(\"normal\", context {\n  show math.equation: set text(font: \"Garamond-Math\", stylistic-set: 3)\n\n  let scaling = 100% * (1em.to-absolute() / text.size)\n  let wrapper = if scaling < 60% { math.sscript }\n                else if scaling < 100% { math.script }\n                else { it => it }\n  \n  box(text(top-edge: \"bounds\", $wrapper(math.cal(it))$))\n})\n```\nThe `top-edge: \"bounds\"` is necessary as otherwise, the box get the regular (i.e. unscaled) height leading to a misplaced subscript.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:54:47.051181"
}
{
  "topic_metadata": {
    "id": 1784,
    "title": "Why do I need state for some (here some specific) show rules?",
    "slug": "why-do-i-need-state-for-some-here-some-specific-show-rules",
    "posts_count": 7,
    "created_at": "2024-11-18T18:36:38.097Z",
    "last_posted_at": "2024-11-23T11:02:02.813Z",
    "views": 186,
    "like_count": 7,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Xodarap",
    "tags": [
      "state"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 874
  },
  "posts": [
    {
      "id": 5804,
      "post_number": 1,
      "username": "Xodarap",
      "name": "Xodarap",
      "created_at": "2024-11-18T18:36:38.202Z",
      "updated_at": "2024-11-26T09:10:40.584Z",
      "cooked": "<p>As a follow up to: <a href=\"https://forum.typst.app/t/how-to-pagebreak-before-an-heading-only-if-a-certain-condition-is-achieved/1691\" class=\"inline-onebox\">How to pagebreak before an heading, only if a certain condition is achieved?</a></p>\n<p>objective: make headings appear on a new page if they would otherwise be placed in the bottom half of a page.</p>\n<p>Here again the two versions: they look pretty similar, but option 1 doesn’t work and option 2 does:</p>\n<details>\n<summary>\noption 1</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">// option 1\n#show heading.where(level: 1, outlined: true): it =&gt; {\n  context if here().position().y &gt; page.height * threshold {\n    pagebreak()\n  }\n  it\n}\n</code></pre>\n</details>\n<details>\n<summary>\noption 2</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">// option 2\n#let my-location = state(\"my-location\", (:))\n\n#show heading.where(level: 1, outlined: true): it =&gt; {\n  context my-location.update(here().position())\n  context {\n    if my-location.get().y &gt; page.height * (100% - threshold) {\n      pagebreak()\n    }\n  }\n  it\n}\n</code></pre>\n</details>\n<p>editable example: <a href=\"https://typst.app/project/rtmoSx9EXRx0piqzlu4Q6Y\" class=\"inline-onebox\">Typst</a></p>",
      "raw": "As a follow up to: https://forum.typst.app/t/how-to-pagebreak-before-an-heading-only-if-a-certain-condition-is-achieved/1691\n\nobjective: make headings appear on a new page if they would otherwise be placed in the bottom half of a page.\n\nHere again the two versions: they look pretty similar, but option 1 doesn't work and option 2 does:\n\n[details=\"option 1\"]\n```typst\n// option 1\n#show heading.where(level: 1, outlined: true): it => {\n  context if here().position().y > page.height * threshold {\n    pagebreak()\n  }\n  it\n}\n```\n[/details]\n\n\n[details=\"option 2\"]\n```typst\n// option 2\n#let my-location = state(\"my-location\", (:))\n\n#show heading.where(level: 1, outlined: true): it => {\n  context my-location.update(here().position())\n  context {\n    if my-location.get().y > page.height * (100% - threshold) {\n      pagebreak()\n    }\n  }\n  it\n}\n```\n[/details]\n\neditable example: https://typst.app/project/rtmoSx9EXRx0piqzlu4Q6Y",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 61,
      "score": 172.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 797
    },
    {
      "id": 5820,
      "post_number": 2,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-11-19T08:36:05.977Z",
      "updated_at": "2024-11-19T08:51:13.806Z",
      "cooked": "<p>The problem in option 1 is that the layout doesn’t converge. Typst makes multiple layout iterations until the layout “converges”, meaning until it doesn’t change anymore.</p>\n<p>For your example: In the first run, the y position will be zero because Typst doesn’t know yet where the heading will be placed, so no page break will be inserted. So after the first run the headings are placed “as usual”. Then it goes into the second run. Now the position will give you the “usual position”. So it detects the bad headings and inserts the appropriate page breaks. The result of this is basically the document that you want. However, the layout looks different from the previous iteration (i.e. didn’t converge yet), so we go into a third run. Now for third run, it return as positions the new positions (how you want them to be). That means no heading will be detected as a bad heading, and hence <em>no page breaks will be inserted</em>, or in other words, the page breaks will be removed again. So what gets compiled is the document from the start! In this fashion it will switch infinitely back and forth between the “usual” document and the document that you want. Hence a compiler error that the layout doesn’t converge.</p>\n<p>In your second option you managed (probably more by luck if I may say so) to bypass this problem. You can go through the different iterations by hand and check that doesn’t lead to the infinite back-and-forth. In fact, if I’m not mistaken, that’s because of a funny “back-and-forth” between the state and the iterations. The state is basically always the opposite of what you want it to be. Whatever.</p>\n<p>Let me mention another point with which you have to be careful when implementing this. If your implementation makes the fix say at the second layout iteration, that could be too early. Because the content could still change (because of many other <code>context</code> calls). That means it could still happen that an already-fixed heading will be turned bad again because say in the third iteration suddenly a lot of text appears before the heading. This makes implementing the behavior you want a little challenging, good luck. <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "The problem in option 1 is that the layout doesn't converge. Typst makes multiple layout iterations until the layout \"converges\", meaning until it doesn't change anymore.\n\nFor your example: In the first run, the y position will be zero because Typst doesn't know yet where the heading will be placed, so no page break will be inserted. So after the first run the headings are placed \"as usual\". Then it goes into the second run. Now the position will give you the \"usual position\". So it detects the bad headings and inserts the appropriate page breaks. The result of this is basically the document that you want. However, the layout looks different from the previous iteration (i.e. didn't converge yet), so we go into a third run. Now for third run, it return as positions the new positions (how you want them to be). That means no heading will be detected as a bad heading, and hence _no page breaks will be inserted_, or in other words, the page breaks will be removed again. So what gets compiled is the document from the start! In this fashion it will switch infinitely back and forth between the \"usual\" document and the document that you want. Hence a compiler error that the layout doesn't converge.\n\nIn your second option you managed (probably more by luck if I may say so) to bypass this problem. You can go through the different iterations by hand and check that doesn't lead to the infinite back-and-forth. In fact, if I'm not mistaken, that's because of a funny \"back-and-forth\" between the state and the iterations. The state is basically always the opposite of what you want it to be. Whatever.\n\nLet me mention another point with which you have to be careful when implementing this. If your implementation makes the fix say at the second layout iteration, that could be too early. Because the content could still change (because of many other `context` calls). That means it could still happen that an already-fixed heading will be turned bad again because say in the third iteration suddenly a lot of text appears before the heading. This makes implementing the behavior you want a little challenging, good luck. :smiley:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 56,
      "score": 61.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 5840,
      "post_number": 3,
      "username": "Xodarap",
      "name": "Xodarap",
      "created_at": "2024-11-19T17:41:17.340Z",
      "updated_at": "2024-11-19T17:42:18.491Z",
      "cooked": "<p>Thank you sooo much. That explains a lot.</p>\n<p>Regarding this topic the answer then is: in the example given, there is actually no evidence that using of <code>state</code> is needed or provides more possibilities since both options don’t do the trick.</p>\n<p>That is unfortunate in general xD</p>\n<p>At least it sheds some light on the hidden mechanics of typst. (There are still a lot of questions about how all these show rules work. And which are clearly nowhere stated. I’m a little sad that it is currently all just figuring out by trial and error. - and nice posts by people like <a class=\"mention\" href=\"/u/jbirnick\">@jbirnick</a> . But maybe that’s because the dev don’t want to drop too much info about this stuff because they are subject to change?)</p>",
      "raw": "Thank you sooo much. That explains a lot.\n\nRegarding this topic the answer then is: in the example given, there is actually no evidence that using of `state` is needed or provides more possibilities since both options don't do the trick.\n\nThat is unfortunate in general xD\n\nAt least it sheds some light on the hidden mechanics of typst. (There are still a lot of questions about how all these show rules work. And which are clearly nowhere stated. I'm a little sad that it is currently all just figuring out by trial and error. - and nice posts by people like @jbirnick . But maybe that's because the dev don't want to drop too much info about this stuff because they are subject to change?)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 18.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 797
    },
    {
      "id": 5843,
      "post_number": 4,
      "username": "jbirnick",
      "name": "Johann Birnick",
      "created_at": "2024-11-19T18:43:14.490Z",
      "updated_at": "2024-11-19T18:43:26.170Z",
      "cooked": "<p>Yeah the state of the docs is not optimal, the way I learned many things is by asking on the Discord. But it will improve as Typst evolves I guess. It’s a lot of work and not easy to write extensive docs.</p>\n<p>Btw this should be a solution to your problem, thanks <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> for the <code>metadata</code> inspiration:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading: it =&gt; {\n  metadata(\"originalheading\")\n  context {\n    let m = query(selector(metadata.where(value: \"originalheading\")).before(here())).last()\n    if m.location().position().y &gt; 0.5 * page.height {\n      pagebreak()\n    }\n  }\n  it\n}\n</code></pre>\n<p>It puts some <code>metadata</code> at the <em>original</em> position of the heading (that’s the important part), and then makes a decision based on that, original, position.</p>",
      "raw": "Yeah the state of the docs is not optimal, the way I learned many things is by asking on the Discord. But it will improve as Typst evolves I guess. It's a lot of work and not easy to write extensive docs.\n\nBtw this should be a solution to your problem, thanks @quachpas for the `metadata` inspiration:\n\n```typ\n#show heading: it => {\n  metadata(\"originalheading\")\n  context {\n    let m = query(selector(metadata.where(value: \"originalheading\")).before(here())).last()\n    if m.location().position().y > 0.5 * page.height {\n      pagebreak()\n    }\n  }\n  it\n}\n```\n\nIt puts some `metadata` at the _original_ position of the heading (that's the important part), and then makes a decision based on that, original, position.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 39,
      "score": 22.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 218
    },
    {
      "id": 5844,
      "post_number": 5,
      "username": "Xodarap",
      "name": "Xodarap",
      "created_at": "2024-11-19T18:48:58.588Z",
      "updated_at": "2024-11-19T18:48:58.588Z",
      "cooked": "<p>Nice. No I’m a little disappointed in myself. I tried to do the exact same as you did. Also with inspiration of <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> idea. However I didn’t manage to produce a satisfactory solution. I must have missed something …</p>\n<p>Again: thank you so much :)</p>",
      "raw": "Nice. No I'm a little disappointed in myself. I tried to do the exact same as you did. Also with inspiration of @quachpas idea. However I didn't manage to produce a satisfactory solution. I must have missed something ....\n\nAgain: thank you so much :)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 22.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 797
    },
    {
      "id": 5845,
      "post_number": 6,
      "username": "Xodarap",
      "name": "Xodarap",
      "created_at": "2024-11-19T18:55:34.518Z",
      "updated_at": "2024-11-19T18:55:34.518Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/jbirnick\">@jbirnick</a> btw you can discard the <code>selector()</code> call. <code>.where()</code> returns a selector already :)</p>",
      "raw": "@jbirnick btw you can discard the `selector()` call. `.where()` returns a selector already :)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 22.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 797
    },
    {
      "id": 6004,
      "post_number": 7,
      "username": "Xodarap",
      "name": "Xodarap",
      "created_at": "2024-11-23T11:02:02.813Z",
      "updated_at": "2024-11-23T11:02:02.813Z",
      "cooked": "<p>To finish this topic:<br>\nThe provided answer by jbirnick also is not sufficient as stated here: <a href=\"https://forum.typst.app/t/how-to-pagebreak-before-an-heading-only-if-a-certain-condition-is-achieved/1691/10\" class=\"inline-onebox\">How to pagebreak before an heading, only if a certain condition is achieved? - #10 by sjfhsjfh</a></p>\n<p>For more information visit the other topic :) (unfortunately the practical question seems not to be solveable with the current framework)</p>",
      "raw": "To finish this topic:\nThe provided answer by jbirnick also is not sufficient as stated here: https://forum.typst.app/t/how-to-pagebreak-before-an-heading-only-if-a-certain-condition-is-achieved/1691/10\n\nFor more information visit the other topic :) (unfortunately the practical question seems not to be solveable with the current framework)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 11.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 797
    }
  ],
  "scraped_at": "2025-06-10T09:54:46.322532"
}
{
  "topic_metadata": {
    "id": 1785,
    "title": "How can I see a (n.d) if no date is available in a APA 7 reference?",
    "slug": "how-can-i-see-a-n-d-if-no-date-is-available-in-a-apa-7-reference",
    "posts_count": 4,
    "created_at": "2024-11-18T20:58:03.362Z",
    "last_posted_at": "2024-11-19T17:15:37.165Z",
    "views": 106,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Eric",
    "tags": [
      "literature"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 510
  },
  "posts": [
    {
      "id": 5809,
      "post_number": 1,
      "username": "Mike_Schmid",
      "name": "",
      "created_at": "2024-11-18T20:58:03.569Z",
      "updated_at": "2025-02-05T15:02:55.427Z",
      "cooked": "<p>Hi all,</p>\n<p>I’m still strugling with the bibliography in typst. Style is APA 7 …<br>\nIf we don’t have any date we should see at least (n.d.), but we can’t see any brackets with “n.d.” inside.</p>\n<p>We still working with zotero and the sync interface.</p>\n<p>Any hints to solve this problem?</p>\n<p>thanks in advance<br>\nMike</p>",
      "raw": "Hi all,\n\nI'm still strugling with the bibliography in typst. Style is APA 7 ....\nIf we don't have any date we should see at least (n.d.), but we can't see any brackets with \"n.d.\" inside.\n\nWe still working with zotero and the sync interface.\n\nAny hints to solve this problem?\n\nthanks in advance \nMike",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 290.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 392
    },
    {
      "id": 5817,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-19T07:29:57.998Z",
      "updated_at": "2024-11-19T07:29:57.998Z",
      "cooked": "<p>Hello,<br>\ncould you export one of your references as a bibfile? If there is no date field, or it is an incorrect format, then I can see “n.d.”.<br>\nSee below, taken from <a href=\"https://github.com/typst/typst/issues/1553\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">bibliography does not deal with date entry · Issue #1553 · typst/typst · GitHub</a></p>\n<pre data-code-wrap=\"bib\"><code class=\"lang-bib\">% This file was created with Citavi 6.14.0.0\n\n@misc{Michaud.26.09.2020,\n\tauthor = {Michaud, Eric J. and Siemion, Andrew P. V. and Drew, Jamie and\n\t          Worden, S. Pete},\n\tdate = {20-20-20},\n\ttitle = {Lunar Opportunities for SETI},\n\turl = {https://arxiv.org/pdf/2009.12689},\n\tpagetotal = {7},\n\tfile = {Michaud, Siemion et al. 26.09.2020 - Lunar Opportunities for\n\t        SETI:Attachments/Michaud, Siemion et al. 26.09.2020 - Lunar\n\t        Opportunities for SETI.pdf:application/pdf},\n\tnote = {7 pages, submitted as a white paper for the National Academy of\n\t        Sciences Planetary Science and Astrobiology Decadal Survey 2023-2032},\n}\n</code></pre>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#cite(&lt;Michaud.26.09.2020&gt;)\n#bibliography(\"test.bib\", style: \"american-psychological-association\")\n</code></pre>",
      "raw": "Hello, \ncould you export one of your references as a bibfile? If there is no date field, or it is an incorrect format, then I can see \"n.d.\".\nSee below, taken from https://github.com/typst/typst/issues/1553\n```bib\n% This file was created with Citavi 6.14.0.0\n\n@misc{Michaud.26.09.2020,\n\tauthor = {Michaud, Eric J. and Siemion, Andrew P. V. and Drew, Jamie and\n\t          Worden, S. Pete},\n\tdate = {20-20-20},\n\ttitle = {Lunar Opportunities for SETI},\n\turl = {https://arxiv.org/pdf/2009.12689},\n\tpagetotal = {7},\n\tfile = {Michaud, Siemion et al. 26.09.2020 - Lunar Opportunities for\n\t        SETI:Attachments/Michaud, Siemion et al. 26.09.2020 - Lunar\n\t        Opportunities for SETI.pdf:application/pdf},\n\tnote = {7 pages, submitted as a white paper for the National Academy of\n\t        Sciences Planetary Science and Astrobiology Decadal Survey 2023-2032},\n}\n```\n```typ\n#cite(<Michaud.26.09.2020>)\n#bibliography(\"test.bib\", style: \"american-psychological-association\")\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 15.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5827,
      "post_number": 3,
      "username": "Mike_Schmid",
      "name": "",
      "created_at": "2024-11-19T11:14:41.698Z",
      "updated_at": "2025-01-06T16:54:23.851Z",
      "cooked": "<p>If I have an bib-file entry without any date, I see it correctly in the text, but not in the bibliography</p>\n<pre data-code-wrap=\"bib\"><code class=\"lang-bib\">@misc{educa_digitalisierung_nodate,\n\ttitle = {Digitalisierung in der Bildung},\n\tpublisher = {Educa},\n\tauthor = {{Educa}},\n}\n</code></pre>\n<p>My entry in the bibliography looks like:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/6/60c2636970c254b2c23f54ca5e0e05a490520d79.png\" alt=\"grafik\" data-base62-sha1=\"dNYjmebh4rpLQ6fdXm7cQpvLqIh\" width=\"437\" height=\"37\"></p>\n<p>That’s it… but as I have found about the apa style, n.d. should also be written in the bibliography …</p>\n<p>I found a workaround. I enter the 0000 date in zotero. typst intreprets this as “1AD” and with</p>\n<blockquote>\n<p>show “(1AD, )”:“(o.D.)”</p>\n</blockquote>\n<p>I change it to what I need …</p>",
      "raw": "If I have an bib-file entry without any date, I see it correctly in the text, but not in the bibliography\n\n```bib\n@misc{educa_digitalisierung_nodate,\n\ttitle = {Digitalisierung in der Bildung},\n\tpublisher = {Educa},\n\tauthor = {{Educa}},\n}\n```\n\nMy entry in the bibliography looks like:\n![grafik|437x37](upload://dNYjmebh4rpLQ6fdXm7cQpvLqIh.png)\n\nThat's it.... but as I have found about the apa style, n.d. should also be written in the bibliography ...\n\nI found a workaround. I enter the 0000 date in zotero. typst intreprets this as \"1AD\" and with\n\n> show \"(1AD, )\":\"(o.D.)\"\n\nI change it to what I need ...",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 392
    },
    {
      "id": 5839,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-11-19T17:15:37.165Z",
      "updated_at": "2024-11-19T17:18:31.179Z",
      "cooked": "<p>From what I can tell, this seems to be an issue in the APA CSL file, as the <code>date-bib</code> macro (used to display the date in the bibliography list) is basically defined like this:</p>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;macro name=\"date-bib\"&gt;\n  &lt;!-- ignoring some stuff here --&gt;\n  &lt;group&gt;\n    &lt;choose&gt;\n      &lt;!-- ignoring some other cases which display a date --&gt;\n      &lt;else&gt;\n        &lt;text term=\"no date\" form=\"short\" /&gt;\n        &lt;text variable=\"year-suffix\" prefix=\"-\" /&gt;\n      &lt;/else&gt;\n    &lt;/choose&gt;\n  &lt;/group&gt;\n&lt;/macro&gt;\n</code></pre>\n<p>The problem is that <a href=\"https://docs.citationstyles.org/en/stable/specification.html#group\" rel=\"noopener nofollow ugc\">according to the CSL spec</a>, a <code>&lt;group&gt;</code> is ignored if all of its <em>variable</em> text children are empty. This is the case for the <code>year-suffix</code> text (which is used as a suffix to distinguish between different entries, e.g. the ‘a’ in “Einstein, 1916a”), thus the full group that also contains the “no date” term is not shown.</p>\n<p>To fix this, you can download the CSL file from <a href=\"https://github.com/citation-style-language/styles/blob/master/apa.csl\" rel=\"noopener nofollow ugc\">the repository</a> and edit the <code>date-bib</code> macro so that the <code>&lt;else&gt;</code> group shown above looks like this instead:</p>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;else&gt;\n  &lt;text term=\"no date\" form=\"short\" /&gt;\n  &lt;choose&gt;\n    &lt;if variable=\"year-suffix\"&gt;\n      &lt;text variable=\"year-suffix\" prefix=\"-\" /&gt;\n    &lt;/if&gt;\n  &lt;/choose&gt;\n&lt;/else&gt;\n</code></pre>",
      "raw": "From what I can tell, this seems to be an issue in the APA CSL file, as the `date-bib` macro (used to display the date in the bibliography list) is basically defined like this:\n```xml\n<macro name=\"date-bib\">\n  <!-- ignoring some stuff here -->\n  <group>\n    <choose>\n      <!-- ignoring some other cases which display a date -->\n      <else>\n        <text term=\"no date\" form=\"short\" />\n        <text variable=\"year-suffix\" prefix=\"-\" />\n      </else>\n    </choose>\n  </group>\n</macro>\n```\nThe problem is that [according to the CSL spec](https://docs.citationstyles.org/en/stable/specification.html#group), a `<group>` is ignored if all of its _variable_ text children are empty. This is the case for the `year-suffix` text (which is used as a suffix to distinguish between different entries, e.g. the 'a' in \"Einstein, 1916a\"), thus the full group that also contains the \"no date\" term is not shown.\n\nTo fix this, you can download the CSL file from [the repository](https://github.com/citation-style-language/styles/blob/master/apa.csl) and edit the `date-bib` macro so that the `<else>` group shown above looks like this instead:\n```xml\n<else>\n  <text term=\"no date\" form=\"short\" />\n  <choose>\n    <if variable=\"year-suffix\">\n      <text variable=\"year-suffix\" prefix=\"-\" />\n    </if>\n  </choose>\n</else>\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 21,
      "score": 49.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:54:45.511312"
}
