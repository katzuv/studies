{
  "topic_metadata": {
    "id": 697,
    "title": "How to implement tab stops?",
    "slug": "how-to-implement-tab-stops",
    "posts_count": 4,
    "created_at": "2024-09-26T09:41:38.395Z",
    "last_posted_at": "2024-10-09T13:18:45.268Z",
    "views": 1443,
    "like_count": 7,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "aeberharter",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 780
  },
  "posts": [
    {
      "id": 2637,
      "post_number": 1,
      "username": "aeberharter",
      "name": "Alex",
      "created_at": "2024-09-26T09:41:38.504Z",
      "updated_at": "2024-10-02T19:38:16.754Z",
      "cooked": "<p>Many word processors support this feature and I tried to implement it in typst. It works in principle but suffers from 2 issues:</p>\n<ol>\n<li>To create a certain horizontal space a box with absolute width is created, this however only works if the box has visible content</li>\n<li>More than 4 tab stops in one line cause the failure of document convergence</li>\n</ol>\n<p>My current implementation:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let tab = context {\n  let tab_left = 2.5cm // leftmost tab stop (i.e. page margin)\n  let tab_width = 2.0cm // width of a single tab stop\n\n  let pos = here().position() // caller position\n  let column = 1 + calc.trunc( (pos.x - tab_left) / tab_width )   // column where this tab is located\n  let advance_to = tab_left + column * tab_width   // position needed for the next tab stop\n\n  // create box with the required width\n  // the box requires visible content to actually occupy the correct width\n  // for debug purposes we choose the computed column as content\n  box(width: advance_to - pos.x)[#text(size: 8pt, fill: purple)[#column]]\n}\n</code></pre>\n<p>I applied this code to the following 3 lines for testing purposes:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">One very long text #tab which covers several tab columns #tab ?\\\nHello #tab#tab World #tab#tab#tab?\\\nA #tab B #tab C #tab D #tab E #tab F #tab G\n</code></pre>\n<p>which yields the result</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/5894add6bea00c7a3c047450d3805fedddef2338.png\" data-download-href=\"https://forum.typst.app/uploads/default/5894add6bea00c7a3c047450d3805fedddef2338\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/5894add6bea00c7a3c047450d3805fedddef2338_2_690x87.png\" alt=\"image\" data-base62-sha1=\"cDCyLLeUyxRteRZrtWu33d2SQXe\" width=\"690\" height=\"87\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/5894add6bea00c7a3c047450d3805fedddef2338_2_690x87.png, https://forum.typst.app/uploads/default/optimized/1X/5894add6bea00c7a3c047450d3805fedddef2338_2_1035x130.png 1.5x, https://forum.typst.app/uploads/default/original/1X/5894add6bea00c7a3c047450d3805fedddef2338.png 2x\" data-dominant-color=\"F5F4F5\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1042×132 14.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Line 1 is correct but the 2 other lines have too many tabs and show weird behavior after column 4.<br>\nIt produces the warning</p>\n<pre><code class=\"lang-auto\">warning: layout did not converge within 5 attempts\n = hint: check if any states or queries are updating themselves\n</code></pre>\n<p>How can I solve the issues 1. and 2. ?</p>",
      "raw": "Many word processors support this feature and I tried to implement it in typst. It works in principle but suffers from 2 issues:\n\n1. To create a certain horizontal space a box with absolute width is created, this however only works if the box has visible content\n2. More than 4 tab stops in one line cause the failure of document convergence\n\nMy current implementation:\n\n```typ\n#let tab = context {\n  let tab_left = 2.5cm // leftmost tab stop (i.e. page margin)\n  let tab_width = 2.0cm // width of a single tab stop\n\n  let pos = here().position() // caller position\n  let column = 1 + calc.trunc( (pos.x - tab_left) / tab_width )   // column where this tab is located\n  let advance_to = tab_left + column * tab_width   // position needed for the next tab stop\n\n  // create box with the required width\n  // the box requires visible content to actually occupy the correct width\n  // for debug purposes we choose the computed column as content\n  box(width: advance_to - pos.x)[#text(size: 8pt, fill: purple)[#column]]\n}\n```\n\nI applied this code to the following 3 lines for testing purposes:\n```typ\nOne very long text #tab which covers several tab columns #tab ?\\\nHello #tab#tab World #tab#tab#tab?\\\nA #tab B #tab C #tab D #tab E #tab F #tab G\n```\nwhich yields the result\n\n![image](upload://cDCyLLeUyxRteRZrtWu33d2SQXe.png)\n\nLine 1 is correct but the 2 other lines have too many tabs and show weird behavior after column 4.\nIt produces the warning\n\n```\nwarning: layout did not converge within 5 attempts\n = hint: check if any states or queries are updating themselves\n```\n\nHow can I solve the issues 1. and 2. ?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 72,
      "score": 8034.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 482
    },
    {
      "id": 2660,
      "post_number": 2,
      "username": "eike",
      "name": "Eike Schulte",
      "created_at": "2024-09-26T14:38:07.522Z",
      "updated_at": "2024-09-26T15:10:21.363Z",
      "cooked": "<p>It seems to me that there might be a bit of an <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"noopener nofollow ugc\">XY problem</a> happening here. Generally, I don’t think that tab stops are a natural way of solving problems in Typst, so what are you trying to achieve?</p>\n<p>I would expect that usually, a <a href=\"https://typst.app/docs/reference/model/table/\"><code>table</code></a> or <a href=\"https://typst.app/docs/reference/layout/grid/\"><code>grid</code></a>, potentially using <code>cell</code>s with <code>colspan</code> and/or <code>rowspan</code> will be the way to go.</p>\n<p>(Still, I also find the behavior a bit puzzling and would like to understand what is going on.)</p>",
      "raw": "It seems to me that there might be a bit of an [XY problem](https://en.wikipedia.org/wiki/XY_problem) happening here. Generally, I don't think that tab stops are a natural way of solving problems in Typst, so what are you trying to achieve?\n\nI would expect that usually, a [`table`](https://typst.app/docs/reference/model/table/) or [`grid`](https://typst.app/docs/reference/layout/grid/), potentially using `cell`s with `colspan` and/or `rowspan` will be the way to go.\n\n(Still, I also find the behavior a bit puzzling and would like to understand what is going on.)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 67,
      "score": 73.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 357
    },
    {
      "id": 2661,
      "post_number": 3,
      "username": "ludwig",
      "name": "",
      "created_at": "2024-09-26T15:32:22.096Z",
      "updated_at": "2024-09-26T15:32:22.096Z",
      "cooked": "<p>I do not understand your first question, you could also use <code>box(width: advance_to - pos.x)</code>. I would however use <code>h(advance_to - pos.x)</code> instead.</p>\n<p>Regarding the second question, the problem is that each <code>#tab</code> moves the rest of the line, hence a fifth <code>#tab</code> would have already been recomputed and moved 4 times. Because of cases like <a href=\"https://typst.app/docs/reference/introspection/query/#caution\">this</a>, context queries have been set to converge within 5 attempts.</p>\n<p>I think a good implementation would be (currently) impossible to implement in typst. The following code provides only a <strong>broken</strong> solution:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let t = metadata(\"tab\")\n\n#let tabed(c) = {\n  let cs = c.children.split(metadata(\"tab\"))\n  context grid(\n    columns: (2cm,) * 8,\n    row-gutter: par.leading,\n    ..cs.fold((0, ()), ((col, arr), c) =&gt; {\n      let s = c.sum()\n      let w = int(calc.div-euclid(measure(s).width.pt(), 2cm.pt())) + 1\n      if col + w &gt; 8 {\n        let (b, t) = s.children.map(t =&gt; if t.has(\"text\") {t.text.split(\" \")} else {t}).flatten().fold(([],()), ((tmp, res), word) =&gt; {\n          if res == () {\n            let new = if tmp == [] {\n              if word == [ ] { tmp } else { word }\n            } else if word == [ ] {\n              tmp + sym.space\n            } else {\n              tmp + sym.space + word\n            }\n            if measure(new).width &gt; (8 - col) * 2cm {\n              (word, tmp)\n            } else {\n              (new, ())\n            }\n          } else {(tmp + sym.space + word, res)}\n        })\n        (calc.rem(col + w, 8), arr + (grid.cell(colspan: 8-col, t), grid.cell(colspan:  w - 8 + col, b)))\n      } else {\n        (calc.rem(col + w, 8), arr + (grid.cell(colspan: w, s),))\n      }\n    }).at(1)\n  )\n}\n</code></pre>\n<p>This code does the tabbing via a grid. One can then call</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#tabed[\n  #lorem(8)#t #lorem(7)#t A#t B#t C#t D #t E #t F #t G\n]\n</code></pre>\n<p>One apperent problem with this code are, e.g. linebreaks not working properly.</p>",
      "raw": "I do not understand your first question, you could also use `box(width: advance_to - pos.x)`. I would however use `h(advance_to - pos.x)` instead.\n\nRegarding the second question, the problem is that each `#tab` moves the rest of the line, hence a fifth `#tab` would have already been recomputed and moved 4 times. Because of cases like [this](https://typst.app/docs/reference/introspection/query/#caution), context queries have been set to converge within 5 attempts.\n\nI think a good implementation would be (currently) impossible to implement in typst. The following code provides only a **broken** solution:\n```typst\n#let t = metadata(\"tab\")\n\n#let tabed(c) = {\n  let cs = c.children.split(metadata(\"tab\"))\n  context grid(\n    columns: (2cm,) * 8,\n    row-gutter: par.leading,\n    ..cs.fold((0, ()), ((col, arr), c) => {\n      let s = c.sum()\n      let w = int(calc.div-euclid(measure(s).width.pt(), 2cm.pt())) + 1\n      if col + w > 8 {\n        let (b, t) = s.children.map(t => if t.has(\"text\") {t.text.split(\" \")} else {t}).flatten().fold(([],()), ((tmp, res), word) => {\n          if res == () {\n            let new = if tmp == [] {\n              if word == [ ] { tmp } else { word }\n            } else if word == [ ] {\n              tmp + sym.space\n            } else {\n              tmp + sym.space + word\n            }\n            if measure(new).width > (8 - col) * 2cm {\n              (word, tmp)\n            } else {\n              (new, ())\n            }\n          } else {(tmp + sym.space + word, res)}\n        })\n        (calc.rem(col + w, 8), arr + (grid.cell(colspan: 8-col, t), grid.cell(colspan:  w - 8 + col, b)))\n      } else {\n        (calc.rem(col + w, 8), arr + (grid.cell(colspan: w, s),))\n      }\n    }).at(1)\n  )\n}\n```\nThis code does the tabbing via a grid. One can then call\n```typst\n#tabed[\n  #lorem(8)#t #lorem(7)#t A#t B#t C#t D #t E #t F #t G\n]\n```\nOne apperent problem with this code are, e.g. linebreaks not working properly.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 63,
      "score": 152.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 300
    },
    {
      "id": 3614,
      "post_number": 4,
      "username": "aeberharter",
      "name": "Alex",
      "created_at": "2024-10-09T13:18:45.268Z",
      "updated_at": "2024-10-09T13:18:45.268Z",
      "cooked": "<p>Thanks for your answer. I used your nice idea with <code>metadata</code> and implemented a <code>tabed</code> environment myself. So far its working quite well.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let t = metadata(\"tab\")\n\n#let tabed(c, tab_width: 1.55cm) = context {\n  let rows = c.children.split(linebreak())\n  for (j, row) in rows.enumerate() {\n    let advance = 0.0pt\n    let num_tabs = 0\n    let cont = []\n    for child in row + (t,) { // add extra tab stop for loop logic\n      if child == t {\n        if (num_tabs == 0)  {\n          advance += measure(cont).width\n          cont // emit content\n          cont = []\n        }\n        num_tabs += 1\n      } else {\n        if (num_tabs &gt; 0) {\n          let column = calc.trunc( advance / tab_width )   // column where the first tab is located\n          let advance_by = tab_width * (column + num_tabs) - advance\n          h(advance_by) // emit space\n          advance += advance_by\n        }\n        cont += child\n        num_tabs = 0\n      }\n    }\n    if (j &lt; rows.len() - 1) {linebreak()} // emit line break\n  }\n}\n</code></pre>",
      "raw": "Thanks for your answer. I used your nice idea with `metadata` and implemented a `tabed` environment myself. So far its working quite well.\n\n```typ\n#let t = metadata(\"tab\")\n\n#let tabed(c, tab_width: 1.55cm) = context {\n  let rows = c.children.split(linebreak())\n  for (j, row) in rows.enumerate() {\n    let advance = 0.0pt\n    let num_tabs = 0\n    let cont = []\n    for child in row + (t,) { // add extra tab stop for loop logic\n      if child == t {\n        if (num_tabs == 0)  {\n          advance += measure(cont).width\n          cont // emit content\n          cont = []\n        }\n        num_tabs += 1\n      } else {\n        if (num_tabs > 0) {\n          let column = calc.trunc( advance / tab_width )   // column where the first tab is located\n          let advance_by = tab_width * (column + num_tabs) - advance\n          h(advance_by) // emit space\n          advance += advance_by\n        }\n        cont += child\n        num_tabs = 0\n      }\n    }\n    if (j < rows.len() - 1) {linebreak()} // emit line break\n  }\n}\n```",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 187.8,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 482
    }
  ],
  "scraped_at": "2025-06-10T09:58:00.664545"
}
{
  "topic_metadata": {
    "id": 703,
    "title": "How to adjust alignment within Math ($$)?",
    "slug": "how-to-adjust-alignment-within-math",
    "posts_count": 8,
    "created_at": "2024-09-26T10:45:22.411Z",
    "last_posted_at": "2024-10-01T18:47:36.867Z",
    "views": 1600,
    "like_count": 3,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "Andrew",
    "tags": [
      "layout",
      "math"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 920
  },
  "posts": [
    {
      "id": 2646,
      "post_number": 1,
      "username": "Ethan_Pixar",
      "name": "Ethan Pixar",
      "created_at": "2024-09-26T10:45:22.552Z",
      "updated_at": "2024-09-26T10:50:21.641Z",
      "cooked": "<p>As you can see in the picture, I have a system of equations and I want the same items(for example <code>y_1</code>, <code>+</code> and <code>=</code>) to be vertically aligned (so as to be viewed easy for Linear Algebra)</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">For system of linear equations, \n$ cases(\n    2y_1    &amp;+&amp; y_2     &amp;=  x_1\\\n    y_1     &amp;+&amp; 2y_2    &amp;=  x_2\\\n    -2y_1   &amp;+&amp; 3y_2    &amp;=  x_3\n) $\n\n$\n    2y_1    &amp;+&amp; y_2     &amp;=  x_1\\\n    y_1     &amp;+&amp; 2y_2    &amp;=  x_2\\\n    -2y_1   &amp;+&amp; 3y_2    &amp;=  x_3\n$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/2e6ff31eb7c5fd0fd1a3ac1acb17e4f699b3fdf1.png\" alt=\"rich text editor image\" data-base62-sha1=\"6CNOvRk85JErunMseIAjTKh8Qo1\" width=\"271\" height=\"274\"></p>\n<p>I want to use the case function, within which all the terms are aligned left (How to change?). I want the terms to be aligned to the right, just like the ones without the case function.</p>\n<p>With LaTeX, I am able to achieve this by creating an array with the <code>{lr}</code> modification,</p>\n<pre data-code-wrap=\"latex\"><code class=\"lang-latex\">$$\n\\begin{array}{lr}\n\n1                    &amp;= &amp;a_1  &amp;+&amp; a_2    &amp;+&amp; a_3    &amp;+&amp; a_4    \\\\\n1 + 2^3              &amp;= &amp;2a_1 &amp;+&amp; 2^2a_2 &amp;+&amp; 2^3a_3 &amp;+&amp; 2^4a_4 \\\\\n1 + 2^3 + 3^3        &amp;= &amp;3a_1 &amp;+&amp; 3^2a_2 &amp;+&amp; 3^3a_3 &amp;+&amp; 3^4a_4 \\\\\n1 + 2^3 + 3^3 + 4^4  &amp;= &amp;4a_1 &amp;+&amp; 4^2a_2 &amp;+&amp; 4^3a_3 &amp;+&amp; 4^4a_4\n\n\\end{array}\n$$\n</code></pre>\n<p>How to adjust alignment within Math (<code>$$</code>) anyway?</p>",
      "raw": "As you can see in the picture, I have a system of equations and I want the same items(for example `y_1`, `+` and `=`) to be vertically aligned (so as to be viewed easy for Linear Algebra)\n\n```typ\nFor system of linear equations, \n$ cases(\n    2y_1    &+& y_2     &=  x_1\\\n    y_1     &+& 2y_2    &=  x_2\\\n    -2y_1   &+& 3y_2    &=  x_3\n) $\n\n$\n    2y_1    &+& y_2     &=  x_1\\\n    y_1     &+& 2y_2    &=  x_2\\\n    -2y_1   &+& 3y_2    &=  x_3\n$\n```\n\n![rich text editor image|362x366, 75%](upload://6CNOvRk85JErunMseIAjTKh8Qo1.png)\n\nI want to use the case function, within which all the terms are aligned left (How to change?). I want the terms to be aligned to the right, just like the ones without the case function.\n\nWith LaTeX, I am able to achieve this by creating an array with the `{lr}` modification,\n\n```latex\n$$\n\\begin{array}{lr}\n\n1                    &= &a_1  &+& a_2    &+& a_3    &+& a_4    \\\\\n1 + 2^3              &= &2a_1 &+& 2^2a_2 &+& 2^3a_3 &+& 2^4a_4 \\\\\n1 + 2^3 + 3^3        &= &3a_1 &+& 3^2a_2 &+& 3^3a_3 &+& 3^4a_4 \\\\\n1 + 2^3 + 3^3 + 4^4  &= &4a_1 &+& 4^2a_2 &+& 4^3a_3 &+& 4^4a_4\n\n\\end{array}\n$$\n```\n\nHow to adjust alignment within Math (`$$`) anyway?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 72,
      "score": 7659.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 484
    },
    {
      "id": 2652,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-26T11:47:08.297Z",
      "updated_at": "2024-09-26T12:25:42.531Z",
      "cooked": "<p>Hello, how about this?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(paper: \"a6\")\n#align(left, $\n&amp; 1                   &amp;&amp;=&amp; a_1  &amp;+&amp; a_2    &amp;+&amp; a_3    &amp;+&amp; a_4    \\\n&amp; 1 + 2^3             &amp;&amp;=&amp; 2a_1 &amp;+&amp; 2^2a_2 &amp;+&amp; 2^3a_3 &amp;+&amp; 2^4a_4 \\\n&amp; 1 + 2^3 + 3^3       &amp;&amp;=&amp; 3a_1 &amp;+&amp; 3^2a_2 &amp;+&amp; 3^3a_3 &amp;+&amp; 3^4a_4 \\\n&amp; 1 + 2^3 + 3^3 + 4^4 &amp;&amp;=&amp; 4a_1 &amp;+&amp; 4^2a_2 &amp;+&amp; 4^3a_3 &amp;+&amp; 4^4a_4\n$)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/606f5c0e63ed60817bfff64bc3addc4de72ff590.png\" alt=\"image\" data-base62-sha1=\"dL6qhPFWazAF65IcOy2SkBKR3AQ\" width=\"594\" height=\"204\"></p>\n<p>This is not very different from the LaTeX code you gave. Although I do not recommend using cases for this, you can also write the following. I don’t seem to be able to right align the terms on the rhs though (if someone has an idea?)</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ \ncases(\n1                   &amp; = thin a_1  &amp;+ a_2    &amp;+ a_3    &amp;+ a_4   ,\n1 + 2^3             &amp; = thin 2a_1 &amp;+ 2^2a_2 &amp;+ 2^3a_3 &amp;+ 2^4a_4,\n1 + 2^3 + 3^3       &amp; = thin 3a_1 &amp;+ 3^2a_2 &amp;+ 3^3a_3 &amp;+ 3^4a_4,\n1 + 2^3 + 3^3 + 4^4 &amp; = thin 4a_1 &amp;+ 4^2a_2 &amp;+ 4^3a_3 &amp;+ 4^4a_4,\n)\n$\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/28f9597267776723d3c0ddc2447d105219aa0525.png\" alt=\"image\" data-base62-sha1=\"5QtkiHXNduGKpajIU75EBfu5bAF\" width=\"601\" height=\"166\"></p>\n<blockquote>\n<p>How to adjust alignment within Math ($$) anyway?</p>\n</blockquote>\n<p>From the <a href=\"https://typst.app/docs/reference/math/#alignment\">documentation</a>,</p>\n<blockquote>\n<p>When equations include multiple <em>alignment points</em> (<code>&amp;</code> ), this creates blocks of alternatingly right- and left-aligned columns.</p>\n</blockquote>\n<p>Notice that in the first solution, I used double <code>&amp;&amp;</code> before the equal sign to right-align the summation terms.</p>",
      "raw": "Hello, how about this?\n```typ\n#set page(paper: \"a6\")\n#align(left, $\n& 1                   &&=& a_1  &+& a_2    &+& a_3    &+& a_4    \\\n& 1 + 2^3             &&=& 2a_1 &+& 2^2a_2 &+& 2^3a_3 &+& 2^4a_4 \\\n& 1 + 2^3 + 3^3       &&=& 3a_1 &+& 3^2a_2 &+& 3^3a_3 &+& 3^4a_4 \\\n& 1 + 2^3 + 3^3 + 4^4 &&=& 4a_1 &+& 4^2a_2 &+& 4^3a_3 &+& 4^4a_4\n$)\n```\n![image|594x204](upload://dL6qhPFWazAF65IcOy2SkBKR3AQ.png)\n\nThis is not very different from the LaTeX code you gave. Although I do not recommend using cases for this, you can also write the following. I don't seem to be able to right align the terms on the rhs though (if someone has an idea?)\n\n```typ\n$ \ncases(\n1                   & = thin a_1  &+ a_2    &+ a_3    &+ a_4   ,\n1 + 2^3             & = thin 2a_1 &+ 2^2a_2 &+ 2^3a_3 &+ 2^4a_4,\n1 + 2^3 + 3^3       & = thin 3a_1 &+ 3^2a_2 &+ 3^3a_3 &+ 3^4a_4,\n1 + 2^3 + 3^3 + 4^4 & = thin 4a_1 &+ 4^2a_2 &+ 4^3a_3 &+ 4^4a_4,\n)\n$\n```\n![image|601x166](upload://5QtkiHXNduGKpajIU75EBfu5bAF.png)\n\n\n\n> How to adjust alignment within Math ($$) anyway?\n\nFrom the [documentation](https://typst.app/docs/reference/math/#alignment), \n> When equations include multiple *alignment points* (`&` ), this creates blocks of alternatingly right- and left-aligned columns.\n\nNotice that in the first solution, I used double `&&` before the equal sign to right-align the summation terms.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 156.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2653,
      "post_number": 3,
      "username": "Ethan_Pixar",
      "name": "Ethan Pixar",
      "created_at": "2024-09-26T12:14:06.361Z",
      "updated_at": "2024-09-26T12:14:06.361Z",
      "cooked": "<p>I tried using “&amp;&amp;” as in the document. It works for most of the case, but when the equations are inside the cases function, then “&amp;&amp;” lost its function, like these:</p>\n<pre><code class=\"lang-auto\">== 1.3\n\n$ cases(\n     2y_1 +&amp;&amp;  y_2 =&amp;&amp;    4x_1\\\n      y_1 +&amp;&amp; 2y_2 =&amp;&amp;  -12x_2\\\n    -2y_1 +&amp;&amp; 3y_2 =&amp;&amp;     x_3\n) $\n\n$\n     2y_1 +&amp;&amp;  y_2 =&amp;&amp;    4x_1\\\n      y_1 +&amp;&amp; 2y_2 =&amp;&amp;  -12x_2\\\n    -2y_1 +&amp;&amp; 3y_2 =&amp;&amp;     x_3\n$\n</code></pre>\n<p>These will give:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/4b49475aa6cff2522eeb302b01209d85254df033.png\" alt=\"Screenshot 2024-09-26 at 20.13.51\" data-base62-sha1=\"aK0OaGGrZSyCY36GXxCumNB3ANJ\" width=\"308\" height=\"280\"></p>",
      "raw": "I tried using \"&&\" as in the document. It works for most of the case, but when the equations are inside the cases function, then \"&&\" lost its function, like these:\n```\n== 1.3\n\n$ cases(\n     2y_1 +&&  y_2 =&&    4x_1\\\n      y_1 +&& 2y_2 =&&  -12x_2\\\n    -2y_1 +&& 3y_2 =&&     x_3\n) $\n\n$\n     2y_1 +&&  y_2 =&&    4x_1\\\n      y_1 +&& 2y_2 =&&  -12x_2\\\n    -2y_1 +&& 3y_2 =&&     x_3\n$\n```\nThese will give:\n![Screenshot 2024-09-26 at 20.13.51|308x280](upload://aK0OaGGrZSyCY36GXxCumNB3ANJ.png)",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 175.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 484
    },
    {
      "id": 2655,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-26T12:23:15.886Z",
      "updated_at": "2024-09-26T12:23:15.886Z",
      "cooked": "<p>The syntax of cases is rather specific, as it is for mat, vec. The behaviour of alignment points for cases is specifically written as to not alternate between left and write. I think the best you can achieve is what I showed above. Oh! and wrapping cases in align does not seem to do anything. My bad, I made a mistake when copy pasting.</p>\n<blockquote>\n<p>Cases intentionally does not alternate between left and right.</p>\n</blockquote>\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/typst/issues/1478#issuecomment-2229249197\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/issues/1478#issuecomment-2229249197\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/typst/issues/1478#issuecomment-2229249197\" target=\"_blank\" rel=\"noopener nofollow ugc\">right/left alignment of equations doesn't work in `cases` function</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2023-06-12\" data-time=\"17:41:09\" data-timezone=\"UTC\">05:41PM - 12 Jun 23 UTC</span>\n      </div>\n\n        <div class=\"date\">\n          closed <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-07-15\" data-time=\"19:40:46\" data-timezone=\"UTC\">07:40PM - 15 Jul 24 UTC</span>\n        </div>\n\n      <div class=\"user\">\n        <a href=\"https://github.com/rinmyo\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n          <img alt=\"rinmyo\" src=\"https://forum.typst.app/uploads/default/original/1X/518e2450228590f7e1c2a9c3856f5029cd46e96e.jpeg\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"E9E9E9\">\n          rinmyo\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          feature request\n        </span>\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          math\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">### Description\n\n#936 \n\n### Reproduction URL\n\nhttps://typst.app/project/r7rsce5H<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\">Brrfp4EmN81gML\n\n### Operating system\n\nWeb app\n\n### Typst version\n\n- [X] I am using the latest version of Typst</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "The syntax of cases is rather specific, as it is for mat, vec. The behaviour of alignment points for cases is specifically written as to not alternate between left and write. I think the best you can achieve is what I showed above. Oh! and wrapping cases in align does not seem to do anything. My bad, I made a mistake when copy pasting.\n\n> Cases intentionally does not alternate between left and right.\n\nhttps://github.com/typst/typst/issues/1478#issuecomment-2229249197",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 51,
      "score": 34.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2731,
      "post_number": 5,
      "username": "Ethan_Pixar",
      "name": "Ethan Pixar",
      "created_at": "2024-09-27T15:29:36.540Z",
      "updated_at": "2024-09-27T15:38:01.496Z",
      "cooked": "<p>I finally find a way to solve it (temporarily)</p>\n<pre><code class=\"lang-auto\">$ cases(\n&amp;2&amp;y_1 &amp;+ &amp;y_2 &amp;= x_1\\\n&amp; &amp;y_1 &amp;+ 2&amp;y_2 &amp;= x_2\\\n-&amp;2&amp;y_1 &amp;+ 3&amp;y_2 &amp;= x_3\n) $\n</code></pre>\n<p>This code will force any element to align vertically even in cases,</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/142efa8950cf522c3f02c9ffc0f9048f80c1d296.png\" alt=\"rich text editor image\" data-base62-sha1=\"2SycryYddSj9zCr0k7NZzCZnkns\" width=\"432\" height=\"230\"></p>",
      "raw": "I finally find a way to solve it (temporarily)\n\n```\n$ cases(\n&2&y_1 &+ &y_2 &= x_1\\\n& &y_1 &+ 2&y_2 &= x_2\\\n-&2&y_1 &+ 3&y_2 &= x_3\n) $\n```\n\nThis code will force any element to align vertically even in cases,\n\n![rich text editor image|432x230](upload://2SycryYddSj9zCr0k7NZzCZnkns.png)",
      "reply_to_post_number": 4,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 36,
      "score": 41.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 484
    },
    {
      "id": 2733,
      "post_number": 6,
      "username": "Ethan_Pixar",
      "name": "Ethan Pixar",
      "created_at": "2024-09-27T15:39:26.599Z",
      "updated_at": "2024-09-27T15:39:26.599Z",
      "cooked": "<p>Another way might be using op(); function to create a “space” operator:</p>\n<pre><code class=\"lang-auto\">$ cases(\n    &amp;1 + 2^3 + 3^3 + 4^4\n\t&amp;= 4a_1 + 4^2a_2 + 4^3a_3 + 4^4a_4\\\n\n    &amp;1 + 2^3 + 3^3\n\t&amp;= 3a_1 + 3^2a_2 + 3^3a_3 + 3^4a_4\\\n\n\t&amp;1 + 2^3\n\t&amp;= 2a_1 + 2^2a_2 + 2^3a_3 + 2^4a_4\\\n\t\n\t&amp;1\n\t&amp;=  op(\" \")a_1 +   op(\" \")op(\" \")a_2 +   op(\" \")op(\" \")a_3 +   op(\" \")op(\" \")a_4\n) $\n</code></pre>\n<p>this will make:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/e62c4e94deb765a6c72d1bee0669136a776d15e9.png\" data-download-href=\"https://forum.typst.app/uploads/default/e62c4e94deb765a6c72d1bee0669136a776d15e9\" title=\"Screenshot 2024-09-27 at 23.39.13\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/e62c4e94deb765a6c72d1bee0669136a776d15e9_2_690x219.png\" alt=\"Screenshot 2024-09-27 at 23.39.13\" data-base62-sha1=\"wQcKdpIJaxyl6JSNGCM2esGOeDL\" width=\"690\" height=\"219\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/e62c4e94deb765a6c72d1bee0669136a776d15e9_2_690x219.png, https://forum.typst.app/uploads/default/original/1X/e62c4e94deb765a6c72d1bee0669136a776d15e9.png 1.5x, https://forum.typst.app/uploads/default/original/1X/e62c4e94deb765a6c72d1bee0669136a776d15e9.png 2x\" data-dominant-color=\"F3F3F3\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2024-09-27 at 23.39.13</span><span class=\"informations\">916×292 27.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Another way might be using op(); function to create a \"space\" operator:\n```\n$ cases(\n    &1 + 2^3 + 3^3 + 4^4\n\t&= 4a_1 + 4^2a_2 + 4^3a_3 + 4^4a_4\\\n\n    &1 + 2^3 + 3^3\n\t&= 3a_1 + 3^2a_2 + 3^3a_3 + 3^4a_4\\\n\n\t&1 + 2^3\n\t&= 2a_1 + 2^2a_2 + 2^3a_3 + 2^4a_4\\\n\t\n\t&1\n\t&=  op(\" \")a_1 +   op(\" \")op(\" \")a_2 +   op(\" \")op(\" \")a_3 +   op(\" \")op(\" \")a_4\n) $\n```\n\nthis will make:\n\n![Screenshot 2024-09-27 at 23.39.13|690x219](upload://wQcKdpIJaxyl6JSNGCM2esGOeDL.png)",
      "reply_to_post_number": 5,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 36.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 484
    },
    {
      "id": 3082,
      "post_number": 7,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-01T12:44:59.591Z",
      "updated_at": "2024-10-01T12:44:59.591Z",
      "cooked": "<p>That’s great! if your current solution satisfies you, don’t hesitate to select an answer and mark the post as resolved <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\">!</p>",
      "raw": "That's great! if your current solution satisfies you, don't hesitate to select an answer and mark the post as resolved :smiley:!",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 56.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3122,
      "post_number": 8,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T18:47:36.867Z",
      "updated_at": "2024-10-01T18:47:36.867Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Ethan_Pixar\" data-post=\"5\" data-topic=\"703\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/e/EA3E47/48.png\" class=\"avatar\"> Ethan_Pixar:</div>\n<blockquote>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ cases(\n&amp;2&amp;y_1 &amp;+ &amp;y_2 &amp;= x_1\\\n&amp; &amp;y_1 &amp;+ 2&amp;y_2 &amp;= x_2\\\n-&amp;2&amp;y_1 &amp;+ 3&amp;y_2 &amp;= x_3\n) $\n</code></pre>\n</blockquote>\n</aside>\n<p>You don’t have to use the alignment point after everything, you can use only the amount that is enough for it to look good. Additionally, in <a href=\"https://typst.app/docs/reference/math/cases/\"><code>cases</code></a> you should use <code>,</code> as a case delimiter (instead of using explicit line breaks):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ cases(\n   &amp;2&amp;y_1 +  &amp;y_2 = x_1,\n   &amp; &amp;y_1 + 2&amp;y_2 = x_2,\n  -&amp;2&amp;y_1 + 3&amp;y_2 = x_3,\n) $\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/5fe59231879c84a279401a892452e09f74b581bb.png\" alt=\"image\" data-base62-sha1=\"dGldesfKvdulHbX8sAD816B8bx1\" width=\"233\" height=\"131\"></p>\n<aside class=\"quote no-group\" data-username=\"Ethan_Pixar\" data-post=\"6\" data-topic=\"703\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/e/EA3E47/48.png\" class=\"avatar\"> Ethan_Pixar:</div>\n<blockquote>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ cases(\n    &amp;1 + 2^3 + 3^3 + 4^4\n\t&amp;= 4a_1 + 4^2a_2 + 4^3a_3 + 4^4a_4\\\n\n    &amp;1 + 2^3 + 3^3\n\t&amp;= 3a_1 + 3^2a_2 + 3^3a_3 + 3^4a_4\\\n\n\t&amp;1 + 2^3\n\t&amp;= 2a_1 + 2^2a_2 + 2^3a_3 + 2^4a_4\\\n\t\n\t&amp;1\n\t&amp;=  op(\" \")a_1 +   op(\" \")op(\" \")a_2 +   op(\" \")op(\" \")a_3 +   op(\" \")op(\" \")a_4\n) $\n</code></pre>\n</blockquote>\n</aside>\n<p>I’d argue that using <code>op</code> creates unnecessary complexity in code and it’s better to insert a few alignment point in previous cases:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ cases(\n  &amp; 1 + 2^3 + 3^3 + 4^4\n  &amp; = 4 &amp; a_1 + 4^2 &amp; a_2 + 4^3 &amp; a_3 + 4^4 &amp; a_4,\n    \n  &amp; 1 + 2^3 + 3^3\n  &amp; = 3 &amp; a_1 + 3^2 &amp; a_2 + 3^3 &amp; a_3 + 3^4 &amp; a_4,\n    \n  &amp; 1 + 2^3\n  &amp; = 2 &amp; a_1 + 2^2 &amp; a_2 + 2^3 &amp; a_3 + 2^4 &amp; a_4,\n    \n  &amp; 1\n  &amp; =   &amp; a_1 +     &amp; a_2 +     &amp; a_3 +     &amp; a_4,\n) $\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/d5655d9c0823ba38a2c97b0098ef28233096ca6b.png\" alt=\"image\" data-base62-sha1=\"urMSjRwMkYV9fp9vUrs8rYfpGun\" width=\"574\" height=\"196\"></p>\n<p>Note that you can also add spaces in the code to make source more readable too.</p>",
      "raw": "[quote=\"Ethan_Pixar, post:5, topic:703\"]\n```typ\n$ cases(\n&2&y_1 &+ &y_2 &= x_1\\\n& &y_1 &+ 2&y_2 &= x_2\\\n-&2&y_1 &+ 3&y_2 &= x_3\n) $\n```\n[/quote]\n\nYou don't have to use the alignment point after everything, you can use only the amount that is enough for it to look good. Additionally, in [`cases`](https://typst.app/docs/reference/math/cases/) you should use `,` as a case delimiter (instead of using explicit line breaks):\n\n```typ\n$ cases(\n   &2&y_1 +  &y_2 = x_1,\n   & &y_1 + 2&y_2 = x_2,\n  -&2&y_1 + 3&y_2 = x_3,\n) $\n```\n\n![image|233x131](upload://dGldesfKvdulHbX8sAD816B8bx1.png)\n\n[quote=\"Ethan_Pixar, post:6, topic:703\"]\n```typ\n$ cases(\n    &1 + 2^3 + 3^3 + 4^4\n\t&= 4a_1 + 4^2a_2 + 4^3a_3 + 4^4a_4\\\n\n    &1 + 2^3 + 3^3\n\t&= 3a_1 + 3^2a_2 + 3^3a_3 + 3^4a_4\\\n\n\t&1 + 2^3\n\t&= 2a_1 + 2^2a_2 + 2^3a_3 + 2^4a_4\\\n\t\n\t&1\n\t&=  op(\" \")a_1 +   op(\" \")op(\" \")a_2 +   op(\" \")op(\" \")a_3 +   op(\" \")op(\" \")a_4\n) $\n```\n[/quote]\n\nI'd argue that using `op` creates unnecessary complexity in code and it's better to insert a few alignment point in previous cases:\n\n```typ\n$ cases(\n  & 1 + 2^3 + 3^3 + 4^4\n  & = 4 & a_1 + 4^2 & a_2 + 4^3 & a_3 + 4^4 & a_4,\n    \n  & 1 + 2^3 + 3^3\n  & = 3 & a_1 + 3^2 & a_2 + 3^3 & a_3 + 3^4 & a_4,\n    \n  & 1 + 2^3\n  & = 2 & a_1 + 2^2 & a_2 + 2^3 & a_3 + 2^4 & a_4,\n    \n  & 1\n  & =   & a_1 +     & a_2 +     & a_3 +     & a_4,\n) $\n```\n\n![image|574x196](upload://urMSjRwMkYV9fp9vUrs8rYfpGun.png)\n\nNote that you can also add spaces in the code to make source more readable too.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 2,
      "like_count": 1,
      "reads": 34,
      "score": 141.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:59.947400"
}
{
  "topic_metadata": {
    "id": 713,
    "title": "How to make a table formatting condition for just one table?",
    "slug": "how-to-make-a-table-formatting-condition-for-just-one-table",
    "posts_count": 12,
    "created_at": "2024-09-26T22:02:57.541Z",
    "last_posted_at": "2024-10-05T18:50:47.731Z",
    "views": 858,
    "like_count": 7,
    "reply_count": 10,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "tables"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1262
  },
  "posts": [
    {
      "id": 2681,
      "post_number": 1,
      "username": "Bryn",
      "name": "Bryn Humberstone",
      "created_at": "2024-09-26T22:02:57.676Z",
      "updated_at": "2024-10-10T15:17:31.847Z",
      "cooked": "<p>I have a table where I would like the header row to be bold, so before the table I have included the following command.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show table.cell.where(y: 0): strong\n</code></pre>\n<p>However, later in my document I would not like this to be the case.</p>\n<p>How can I either remove that show rule for later tables, or set it so the scope of the rule is just for a given table?</p>\n<p>I have tried a few possibilities involving a subsequent show command, but nothing has worked:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show table.cell.where(y: 0): ??? // forget about the earlier rule please...\n</code></pre>\n<p>(Note: in the documentation, they seem to have header rows where each item is individually put in bold like so: <code>table.header([], [*Area*], [*Parameters*])</code>, but to me this seems like too brittle a solution, with excessive typing in the case of tables with many columns.)</p>",
      "raw": "I have a table where I would like the header row to be bold, so before the table I have included the following command.\n\n```typ\n#show table.cell.where(y: 0): strong\n```\n\nHowever, later in my document I would not like this to be the case.\n\nHow can I either remove that show rule for later tables, or set it so the scope of the rule is just for a given table?\n\nI have tried a few possibilities involving a subsequent show command, but nothing has worked:\n```typ\n#show table.cell.where(y: 0): ??? // forget about the earlier rule please...\n```\n\n(Note: in the documentation, they seem to have header rows where each item is individually put in bold like so: `table.header([], [*Area*], [*Parameters*])`, but to me this seems like too brittle a solution, with excessive typing in the case of tables with many columns.)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 69,
      "score": 3023.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 389
    },
    {
      "id": 2683,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-26T22:14:34.380Z",
      "updated_at": "2024-10-05T18:49:03.681Z",
      "cooked": "<p>I think for now you only have 1 option: use an additional scope:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#{\n  show table.cell.where(y: 0): strong\n  table(table.header[header], [cell], [cell])\n}\n#table(table.header[header], [cell], [cell])\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/7ef540d749ad20fa744dd6ce4a8982ac97b3bb25.png\" alt=\"image\" data-base62-sha1=\"i77C4hiBn2uhiXTtOrZjivR2YIJ\" width=\"75\" height=\"165\"></p>\n<p>The second option isn’t implemented yet: <a href=\"https://github.com/typst/typst/issues/420\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Resetting `show` and `set` to its default / Revoke rules · Issue #420 · typst/typst · GitHub</a>.</p>\n<p>There is <a href=\"https://github.com/typst/typst/issues/3640#issuecomment-2395133217\" rel=\"noopener nofollow ugc\">another workaround (that has its advantages)</a> that uses a user-defined function as a wrapper for the <code>table.header</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let table-header(..headers) = {\n  table.header(..headers.pos().map(strong))\n}\n</code></pre>\n<p><s>Related issue: <a href=\"https://github.com/typst/typst/issues/4159\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Show-set rules don't seem to work for `table.cell` · Issue #4159 · typst/typst · GitHub</a> .</s></p>\n<p>Related issue: <a href=\"https://github.com/typst/typst/issues/3640\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Unable to style `table.header` and `table.footer` · Issue #3640 · typst/typst · GitHub</a>.</p>",
      "raw": "I think for now you only have 1 option: use an additional scope:\n\n```typ\n#{\n  show table.cell.where(y: 0): strong\n  table(table.header[header], [cell], [cell])\n}\n#table(table.header[header], [cell], [cell])\n```\n\n![image|75x165](upload://i77C4hiBn2uhiXTtOrZjivR2YIJ.png)\n\nThe second option isn't implemented yet: https://github.com/typst/typst/issues/420.\n\nThere is [another workaround (that has its advantages)](https://github.com/typst/typst/issues/3640#issuecomment-2395133217) that uses a user-defined function as a wrapper for the `table.header`:\n\n```typ\n#let table-header(..headers) = {\n  table.header(..headers.pos().map(strong))\n}\n```\n\n~~Related issue: https://github.com/typst/typst/issues/4159 .~~\n\nRelated issue: https://github.com/typst/typst/issues/3640.",
      "reply_to_post_number": null,
      "reply_count": 3,
      "quote_count": 0,
      "like_count": 1,
      "reads": 66,
      "score": 798.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2684,
      "post_number": 3,
      "username": "Bryn",
      "name": "Bryn Humberstone",
      "created_at": "2024-09-26T22:23:42.748Z",
      "updated_at": "2024-09-26T22:23:42.748Z",
      "cooked": "<p>Thanks! I ended up simulating this effect as my table was contained in a <code>#box</code> element, so I have</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#box(width: 80%)[\n#show table.cell.where(y: 0): strong\n#table(columns: (1fr, 1fr, 1fr, 1fr, 1fr, 1fr),\n...\n)]\n</code></pre>\n<p>But I’m guessing <code>#{</code> gives a way to introduce scope if there is not something like a <code>#box</code>?</p>\n<p>I’ll accept the solution above, but is there also a guide somewhere to the concept of scope of show rules?</p>",
      "raw": "Thanks! I ended up simulating this effect as my table was contained in a `#box` element, so I have\n\n```typ\n#box(width: 80%)[\n#show table.cell.where(y: 0): strong\n#table(columns: (1fr, 1fr, 1fr, 1fr, 1fr, 1fr),\n...\n)]\n```\n\nBut I'm guessing `#{` gives a way to introduce scope if there is not something like a `#box`? \n\nI'll accept the solution above, but is there also a guide somewhere to the concept of scope of show rules?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 58,
      "score": 16.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 389
    },
    {
      "id": 2685,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-26T22:57:38.708Z",
      "updated_at": "2024-09-26T22:57:38.708Z",
      "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"Andrew\" data-post=\"2\" data-topic=\"713\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>The second option isn’t implemented yet: <a href=\"https://github.com/typst/typst/issues/420\">Resetting <code>show</code> and <code>set</code> to its default / Revoke rules · Issue #420 · typst/typst · GitHub</a>.</p>\n</blockquote>\n</aside>\n<p>Of note, that proposal is related to the <em>opposite</em> situation: when you have a global show rule but you want to disable it for a specific scope. You’d have something like <strong>(note: hypothetical syntax)</strong></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// NOTE: Hypothetical syntax, this doesn't exist\n#let my-rule = show table: strong\n\n// NOTE: Hypothetical syntax, this doesn't exist\n#apply my-rule\n\n#table[This is strong]\n\n#[\n  // NOTE: Hypothetical syntax, this doesn't exist\n  #revoke my-rule  // disable rule temporarily\n  #table[This is not strong]\n]\n\n#table[This is strong again]\n</code></pre>\n<p>because, currently, the only way to do that is to turn that setup inside out: scope half of the document with the show rule in it, then have something outside the scope, then scope again, which is cumbersome.</p>\n<p>Here, using scopes <strong>is the intended way</strong> to temporarily <em>apply</em> the show rule:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#table[A regular table]\n\n#{\n  show table: strong\n  table[Only this is strong.]\n}\n\n#table[But this is not!]\n</code></pre>\n<aside class=\"quote no-group quote-modified\" data-username=\"Andrew\" data-post=\"2\" data-topic=\"713\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>Related issue: <a href=\"https://github.com/typst/typst/issues/4159\">Show-set rules don’t seem to work for <code>table.cell</code> · Issue #4159 · typst/typst · GitHub</a>.</p>\n</blockquote>\n</aside>\n<p>That issue is unrelated and specifically about <code>#show table.cell: set table.cell(...)</code>, which doesn’t work because table cell properties are applied before show/set rules are checked (they currently are only checked when the cells are laid out).</p>\n<p>Perhaps you meant to link to this one instead, since OP may have intended to write something like <code>#show table.header: strong</code>, which indeed currently doesn’t work:</p>\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/typst/issues/3640\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/issues/3640\" target=\"_blank\" rel=\"noopener\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/typst/issues/3640\" target=\"_blank\" rel=\"noopener\">Unable to style `table.header` and `table.footer`</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-03-12\" data-time=\"19:20:39\" data-timezone=\"UTC\">07:20PM - 12 Mar 24 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/MDLC01\" target=\"_blank\" rel=\"noopener\">\n          <img alt=\"MDLC01\" src=\"https://forum.typst.app/uploads/default/original/1X/41af6371f4684cc3047e3a64a6bad62f1de86391.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"4995B1\">\n          MDLC01\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          bug\n        </span>\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          styling\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">### Description\n\nIt is not possible to style `table.header` and `table.footer` e<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\">lements using show rules. \n\nTo reproduce:\n```typ\n#show table.header: set text(weight: \"bold\")\n#show table.footer: set text(weight: \"bold\")\n\n#table(\n  table.header[Header],\n  [Regular cell],\n  table.footer[Fotter],\n)\n```\n\n[Related discussion on Discord.](https://discord.com/channels/1054443721975922748/1182377294682128445/1217187734934917130)\n\n### Reproduction URL\n\n_No response_\n\n### Operating system\n\n_No response_\n\n### Typst version\n\n- [X] I am using the latest version of Typst</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "[quote=\"Andrew, post:2, topic:713\"]\nThe second option isn’t implemented yet: [Resetting `show` and `set` to its default / Revoke rules · Issue #420 · typst/typst · GitHub](https://github.com/typst/typst/issues/420).\n[/quote]\n\nOf note, that proposal is related to the _opposite_ situation: when you have a global show rule but you want to disable it for a specific scope. You'd have something like **(note: hypothetical syntax)**\n\n```typ\n// NOTE: Hypothetical syntax, this doesn't exist\n#let my-rule = show table: strong\n\n// NOTE: Hypothetical syntax, this doesn't exist\n#apply my-rule\n\n#table[This is strong]\n\n#[\n  // NOTE: Hypothetical syntax, this doesn't exist\n  #revoke my-rule  // disable rule temporarily\n  #table[This is not strong]\n]\n\n#table[This is strong again]\n```\n\nbecause, currently, the only way to do that is to turn that setup inside out: scope half of the document with the show rule in it, then have something outside the scope, then scope again, which is cumbersome.\n\nHere, using scopes **is the intended way** to temporarily _apply_ the show rule:\n\n```typ\n#table[A regular table]\n\n#{\n  show table: strong\n  table[Only this is strong.]\n}\n\n#table[But this is not!]\n```\n\n[quote=\"Andrew, post:2, topic:713\"]\nRelated issue: [Show-set rules don't seem to work for `table.cell` · Issue #4159 · typst/typst · GitHub](https://github.com/typst/typst/issues/4159).\n[/quote]\n\nThat issue is unrelated and specifically about `#show table.cell: set table.cell(...)`, which doesn't work because table cell properties are applied before show/set rules are checked (they currently are only checked when the cells are laid out).\n\nPerhaps you meant to link to this one instead, since OP may have intended to write something like `#show table.header: strong`, which indeed currently doesn't work:\n\nhttps://github.com/typst/typst/issues/3640",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 2,
      "reads": 53,
      "score": 270.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 2686,
      "post_number": 5,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-26T22:59:46.988Z",
      "updated_at": "2024-09-26T22:59:46.988Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Bryn\" data-post=\"3\" data-topic=\"713\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/bryn/48/513_2.png\" class=\"avatar\"> Bryn:</div>\n<blockquote>\n<p>I’ll accept the solution above, but is there also a guide somewhere to the concept of scope of show rules?</p>\n</blockquote>\n</aside>\n<p>There is more information here: <a href=\"https://typst.app/docs/reference/styling/\" class=\"inline-onebox\">Styling – Typst Documentation</a></p>",
      "raw": "[quote=\"Bryn, post:3, topic:713\"]\nI’ll accept the solution above, but is there also a guide somewhere to the concept of scope of show rules?\n[/quote]\n\nThere is more information here: https://typst.app/docs/reference/styling/",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 41,
      "score": 28.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 2720,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-27T11:53:46.812Z",
      "updated_at": "2024-09-27T11:54:22.972Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"PgBiel\" data-post=\"4\" data-topic=\"713\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/F64C96/48.png\" class=\"avatar\"> PgBiel:</div>\n<blockquote>\n<p>Of note, that proposal is related to the <em>opposite</em> situation: when you have a global show rule but you want to disable it for a specific scope.</p>\n</blockquote>\n</aside>\n<aside class=\"quote no-group\" data-username=\"Bryn\" data-post=\"1\" data-topic=\"713\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/bryn/48/513_2.png\" class=\"avatar\"> Bryn:</div>\n<blockquote>\n<p>How can I either remove that show rule for later tables</p>\n</blockquote>\n</aside>\n<p>I think it is the exact same meaning, so I think we are all on the same page. If you revoke the rule in the root scope, it will indeed remove it for later tables.</p>\n<aside class=\"quote no-group\" data-username=\"PgBiel\" data-post=\"4\" data-topic=\"713\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/F64C96/48.png\" class=\"avatar\"> PgBiel:</div>\n<blockquote>\n<p>Perhaps you meant to link to this one instead, since OP may have intended to write something like <code>#show table.header: strong</code>, which indeed currently doesn’t work:</p>\n</blockquote>\n</aside>\n<p>Yeah, but I think I saw an issue specifically showing the <code>#show table.cell.where(y: 0): strong</code> example. Or maybe it was just from <a href=\"https://typst.app/docs/guides/table-guide/#basic-tables\" class=\"inline-onebox\">Table guide – Typst Documentation</a>.</p>",
      "raw": "[quote=\"PgBiel, post:4, topic:713\"]\nOf note, that proposal is related to the *opposite* situation: when you have a global show rule but you want to disable it for a specific scope.\n[/quote]\n\n[quote=\"Bryn, post:1, topic:713\"]\nHow can I either remove that show rule for later tables\n[/quote]\n\nI think it is the exact same meaning, so I think we are all on the same page. If you revoke the rule in the root scope, it will indeed remove it for later tables.\n\n[quote=\"PgBiel, post:4, topic:713\"]\nPerhaps you meant to link to this one instead, since OP may have intended to write something like `#show table.header: strong`, which indeed currently doesn’t work:\n[/quote]\n\nYeah, but I think I saw an issue specifically showing the `#show table.cell.where(y: 0): strong` example. Or maybe it was just from https://typst.app/docs/guides/table-guide/#basic-tables.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 2,
      "like_count": 1,
      "reads": 40,
      "score": 28.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2965,
      "post_number": 7,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-29T20:46:29.126Z",
      "updated_at": "2024-09-29T20:46:29.126Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"6\" data-topic=\"713\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>I think it is the exact same meaning, so I think we are all on the same page. If you revoke the rule in the root scope, it will indeed remove it for later tables.</p>\n</blockquote>\n</aside>\n<p>Yes, what I mean is that this isn’t the purpose of the feature. What they want is to apply a show rule only for a single table. What <code>revoke</code> is for is to have a show rule which applies to <em>all</em> tables, <em>except</em> for a specific one. Right now, doing that is very cumbersome.</p>",
      "raw": "[quote=\"Andrew, post:6, topic:713\"]\nI think it is the exact same meaning, so I think we are all on the same page. If you revoke the rule in the root scope, it will indeed remove it for later tables.\n[/quote]\n\nYes, what I mean is that this isn't the purpose of the feature. What they want is to apply a show rule only for a single table. What `revoke` is for is to have a show rule which applies to _all_ tables, _except_ for a specific one. Right now, doing that is very cumbersome.",
      "reply_to_post_number": 6,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 1,
      "reads": 30,
      "score": 31.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 2975,
      "post_number": 8,
      "username": "Bryn",
      "name": "Bryn Humberstone",
      "created_at": "2024-09-29T23:08:09.093Z",
      "updated_at": "2024-09-29T23:08:50.331Z",
      "cooked": "<p>Something I would quite like, and possibly can be done within Typst, is something like in HTML how you could have different classes and then have CSS rules which match the different cases.</p>\n<p>So in CSS, you could have something like</p>\n<pre data-code-wrap=\"css\"><code class=\"lang-css\">table { /* formatting rules here for how you want tables to appear */ }\ntable.unusual_situation { /* formatting rules here for your unusual situation table */ }\n</code></pre>\n<p>Obviously this doesn’t match the show syntax of Typst, but this is the way that CSS would solve the problem.</p>",
      "raw": "Something I would quite like, and possibly can be done within Typst, is something like in HTML how you could have different classes and then have CSS rules which match the different cases. \n\nSo in CSS, you could have something like\n\n```css\ntable { /* formatting rules here for how you want tables to appear */ }\ntable.unusual_situation { /* formatting rules here for your unusual situation table */ }\n```\n\nObviously this doesn't match the show syntax of Typst, but this is the way that CSS would solve the problem.",
      "reply_to_post_number": 7,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 21.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 389
    },
    {
      "id": 3018,
      "post_number": 9,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-09-30T07:00:52.710Z",
      "updated_at": "2024-09-30T20:39:42.951Z",
      "cooked": "<p>If I’m understanding correctly, this <em>is</em> possible in Typst.  This will set one default style of table which can be overridden at any time for one specific table.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set table(gutter: 3em, columns: 2)\n\n= Table 1\n#table([a], [b], [c], [d])\n= Table 2\n#table(gutter: 0em, [a], [b], [c], [d])\n</code></pre>\n<details>\n<summary>\nRendered</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/a79cc011723c6b23bac01ae803c1dfa480966377.png\" alt=\"image\" data-base62-sha1=\"nULzynVA7R6STKHWFSrcwqQHb6L\" width=\"166\" height=\"258\"></p>\n</details>\n<p>Or this which results in the same output as above but allows saving and reusing several styles of table.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let table_wide = table.with(gutter: 3em, columns: 2)\n#let table_narrow = table.with(gutter: 1em, columns: 2)\n\n= Table 1\n#table_wide([a], [b], [c], [d])\n= Table 2\n#table_narrow(gutter: 0em, [a], [b], [c], [d])\n</code></pre>",
      "raw": "If I'm understanding correctly, this _is_ possible in Typst.  This will set one default style of table which can be overridden at any time for one specific table.\n\n```typ\n#set table(gutter: 3em, columns: 2)\n\n= Table 1\n#table([a], [b], [c], [d])\n= Table 2\n#table(gutter: 0em, [a], [b], [c], [d])\n```\n\n[details=\"Rendered\"]\n![image|166x258](upload://nULzynVA7R6STKHWFSrcwqQHb6L.png)\n[/details]\n\nOr this which results in the same output as above but allows saving and reusing several styles of table.\n```typ\n#let table_wide = table.with(gutter: 3em, columns: 2)\n#let table_narrow = table.with(gutter: 1em, columns: 2)\n\n= Table 1\n#table_wide([a], [b], [c], [d])\n= Table 2\n#table_narrow(gutter: 0em, [a], [b], [c], [d])\n```",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 145.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 3118,
      "post_number": 10,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T18:05:47.920Z",
      "updated_at": "2024-10-01T18:05:47.920Z",
      "cooked": "<p>I think this would be the initial/primary use case, but in reality you can use it however you want as long as this makes sense (or just works). You can have a single delimiter in a document, after which the rule is revoked. You can also revoke and apply the same rule multiple times. The possibilities are endless*!</p>\n<p>* — maybe</p>",
      "raw": "I think this would be the initial/primary use case, but in reality you can use it however you want as long as this makes sense (or just works). You can have a single delimiter in a document, after which the rule is revoked. You can also revoke and apply the same rule multiple times. The possibilities are endless*!\n\n\\* — maybe",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 35.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3119,
      "post_number": 11,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T18:08:34.927Z",
      "updated_at": "2024-10-01T18:08:34.927Z",
      "cooked": "<p>In addition to <a href=\"https://forum.typst.app/t/how-to-make-a-table-formatting-condition-for-just-one-table/713/9\">what is possible today</a>, when we get custom types, I think you would be able to create a custom table-wrapper type and then apply rules to it, but this is probably too soon to think of.</p>",
      "raw": "In addition to [what is possible today](https://forum.typst.app/t/how-to-make-a-table-formatting-condition-for-just-one-table/713/9), when we get custom types, I think you would be able to create a custom table-wrapper type and then apply rules to it, but this is probably too soon to think of.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 45.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3466,
      "post_number": 12,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-05T18:50:47.731Z",
      "updated_at": "2024-10-05T18:50:47.731Z",
      "cooked": "<p>I expanded my post to include a workaround, shown <a href=\"https://github.com/typst/typst/issues/3640#issuecomment-2395133217\" rel=\"noopener nofollow ugc\">here</a>. It has its own pros and cons.</p>",
      "raw": "I expanded my post to include a workaround, shown [here](https://github.com/typst/typst/issues/3640#issuecomment-2395133217). It has its own pros and cons.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 15.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:59.179160"
}
{
  "topic_metadata": {
    "id": 716,
    "title": "How to rename a specific figure kind's supplement?",
    "slug": "how-to-rename-a-specific-figure-kinds-supplement",
    "posts_count": 4,
    "created_at": "2024-09-26T23:15:49.285Z",
    "last_posted_at": "2024-09-27T00:40:15.081Z",
    "views": 362,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "figures"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 153
  },
  "posts": [
    {
      "id": 2689,
      "post_number": 1,
      "username": "benjavicente",
      "name": "Benjamín Vicente",
      "created_at": "2024-09-26T23:15:49.460Z",
      "updated_at": "2024-09-26T23:37:43.836Z",
      "cooked": "<p>For example,</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#figure(\n```tsx\nExample code\n```,\ncaption: \"Example\"\n)\n</code></pre>\n<p>Has a supplement of Listing (Listing 1: Example). How can the label of a type of figure be changed globally, and only to that specific type? For example, to be Code (Code 1: Example) if changing the listing figure type.</p>",
      "raw": "For example,\n\n```typ\n#figure(\n```tsx\nExample code\n```,\ncaption: \"Example\"\n)\n```\n\nHas a supplement of Listing (Listing 1: Example). How can the label of a type of figure be changed globally, and only to that specific type? For example, to be Code (Code 1: Example) if changing the listing figure type.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 1733.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 488
    },
    {
      "id": 2690,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-26T23:25:06.059Z",
      "updated_at": "2024-09-26T23:25:06.059Z",
      "cooked": "<p>Figures that have a <code>raw</code> element (a code block) as their body automatically have their kind set to to <code>raw</code> as well. You can thus use a show-set rule to set the supplement for all figures of this kind:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure.where(kind: raw): set figure(supplement: [Code])\n</code></pre>",
      "raw": "Figures that have a `raw` element (a code block) as their body automatically have their kind set to to `raw` as well. You can thus use a show-set rule to set the supplement for all figures of this kind:\n```typ\n#show figure.where(kind: raw): set figure(supplement: [Code])\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 41,
      "score": 58.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2692,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-09-26T23:38:22.912Z",
      "updated_at": "2024-09-26T23:38:22.912Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/benjavicente\">@benjavicente</a>, I’ve updated your post title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">How to post in the Questions category</a></p>\n<p>Please ensure your title is a Typst question you’d ask to a friend. <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @benjavicente, I’ve updated your post title to better fit our guidelines: [How to post in the Questions category](https://forum.typst.app/t/how-to-post-in-the-questions-category/11)\n\nPlease ensure your title is a Typst question you’d ask to a friend. :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 12.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 2696,
      "post_number": 4,
      "username": "benjavicente",
      "name": "Benjamín Vicente",
      "created_at": "2024-09-27T00:40:15.081Z",
      "updated_at": "2024-09-27T00:40:15.081Z",
      "cooked": "<p>Wow, that’s unexpectedly elegant. Thanks!</p>",
      "raw": "Wow, that's unexpectedly elegant. Thanks!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 7.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 488
    }
  ],
  "scraped_at": "2025-06-10T09:57:58.394404"
}
{
  "topic_metadata": {
    "id": 718,
    "title": "Any elegant way to sum up inside map function?",
    "slug": "any-elegant-way-to-sum-up-inside-map-function",
    "posts_count": 5,
    "created_at": "2024-09-26T23:41:33.457Z",
    "last_posted_at": "2024-09-27T15:23:56.162Z",
    "views": 419,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "eike",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 891
  },
  "posts": [
    {
      "id": 2693,
      "post_number": 1,
      "username": "Sacriface",
      "name": "",
      "created_at": "2024-09-26T23:41:33.715Z",
      "updated_at": "2024-09-26T23:41:33.715Z",
      "cooked": "<p>Hey! So i was trying to have a sum variable and then iterate over an array of lines and add the result of each line to the sum variable. I found out there are no global variables, but is there any way to do this elegantly without iterating twice over the lines object (which would also require e.g. the same if statement for line.type)?<br>\nSee the commented out lines for what I want to do:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let sum = 0\n\n#table(\n      columns: (auto, auto, 1fr, auto, auto),\n      align: (col, row) =&gt; (auto, auto, auto, auto, auto,).at(col),\n      inset: 7pt,\n      stroke: luma(180),\n      \n      table.header[Amount][Unit][Work Done][Unit Price][Total Price]\n      ..lines.map(line =&gt; {\n        if (line.type == lineTypes.timed) {\n          let start_time = line.details.time.at(0)\n          let end_time = line.details.time.at(1)\n          \n          let hours = (end_time.at(0) - start_time.at(0)) + (end_time.at(1) - start_time.at(1))/60\n          (\n          format(hours, 2),\n          \"hours\",\n          line.details.description, \n          eurStr(HOURLY_RATE),\n          eurStr(hours * HOURLY_RATE)\n          )\n          //sum += hours * HOURLY_RATE\n        } else if (line.type == lineTypes.special) {\n          (\n          str(line.details.amount),\n          str(line.details.unit),\n          line.details.description, \n          eurStr(line.details.pricePerUnit),\n          eurStr(line.details.amount * line.details.pricePerUnit)\n          //sum += line.details.amount * line.details.pricePerUnit\n          )\n        }\n      }).flatten(),\n      [], [], [], \"Total:\", text(size: 15pt)[#strong(eurStr(sum))]\n  )\n</code></pre>\n<p>This is what an example of the lines variable looks like:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let lineTypes = (timed: 0, special: 1)\n\n#let lines = (\n  (type: lineTypes.timed, details: (\n    date: \"20.09.2024\",\n    time: ((9, 30), (11, 23)),\n    description: \"Driving\"\n  )),\n  (type: lineTypes.special, details: (\n    amount: 1, unit: \"-\", pricePerUnit: 8.0, \n    date: \"24.06.2024\",\n    description: \"Using Car\"\n  )),\n)\n</code></pre>\n<p>Also p.s. if there’s anything ugly or bad about what I’m doing here, please tell me. I’m pretty new to typst.</p>",
      "raw": "Hey! So i was trying to have a sum variable and then iterate over an array of lines and add the result of each line to the sum variable. I found out there are no global variables, but is there any way to do this elegantly without iterating twice over the lines object (which would also require e.g. the same if statement for line.type)? \nSee the commented out lines for what I want to do:\n\n```typ\n#let sum = 0\n\n#table(\n      columns: (auto, auto, 1fr, auto, auto),\n      align: (col, row) => (auto, auto, auto, auto, auto,).at(col),\n      inset: 7pt,\n      stroke: luma(180),\n      \n      table.header[Amount][Unit][Work Done][Unit Price][Total Price]\n      ..lines.map(line => {\n        if (line.type == lineTypes.timed) {\n          let start_time = line.details.time.at(0)\n          let end_time = line.details.time.at(1)\n          \n          let hours = (end_time.at(0) - start_time.at(0)) + (end_time.at(1) - start_time.at(1))/60\n          (\n          format(hours, 2),\n          \"hours\",\n          line.details.description, \n          eurStr(HOURLY_RATE),\n          eurStr(hours * HOURLY_RATE)\n          )\n          //sum += hours * HOURLY_RATE\n        } else if (line.type == lineTypes.special) {\n          (\n          str(line.details.amount),\n          str(line.details.unit),\n          line.details.description, \n          eurStr(line.details.pricePerUnit),\n          eurStr(line.details.amount * line.details.pricePerUnit)\n          //sum += line.details.amount * line.details.pricePerUnit\n          )\n        }\n      }).flatten(),\n      [], [], [], \"Total:\", text(size: 15pt)[#strong(eurStr(sum))]\n  )\n```\nThis is what an example of the lines variable looks like:\n\n```typst\n#let lineTypes = (timed: 0, special: 1)\n\n#let lines = (\n  (type: lineTypes.timed, details: (\n    date: \"20.09.2024\",\n    time: ((9, 30), (11, 23)),\n    description: \"Driving\"\n  )),\n  (type: lineTypes.special, details: (\n    amount: 1, unit: \"-\", pricePerUnit: 8.0, \n    date: \"24.06.2024\",\n    description: \"Using Car\"\n  )),\n)\n```\n\nAlso p.s. if there's anything ugly or bad about what I'm doing here, please tell me. I'm pretty new to typst.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 53,
      "score": 1905.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 489
    },
    {
      "id": 2699,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-27T07:10:16.543Z",
      "updated_at": "2024-09-27T07:11:22.997Z",
      "cooked": "<p>Hello!<br>\nPlease make sure your code is reproducible before posting, it helps to reduce the code to a <em>minimal working example</em>. You can take a look at <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a> for other tips!</p>\n<p>For your problem, I wouldn’t actually have a “global variable” and add the total price of each line when constructing the rows. You can do it twice at nearly no cost, this would be more “elegant” than having a global variable.</p>\n<p>To actually answer your question, you can create a <a href=\"https://typst.app/docs/reference/introspection/state/\"><code>state</code></a> to keep track of the total price.</p>\n<p>Here are the relevant lines below. I showcase two ways of computing the total price: <code>sumtotalprice</code> or <code>totalprice-state.get()</code>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let totalprice-state = state(\"totalprice\", 0.0)\n#let totalprice(line) = {\n  if line.type == lineTypes.special {\n    return line.details.amount * line.details.pricePerUnit \n  }\n  return 0\n}\n#let sumtotalprice(lines) = {\n  if type(lines) == \"array\" {\n    return lines.map(line =&gt; totalprice(line)).sum()\n  }\n}\n// ...\n          str(totalprice(line)) + totalprice-state.update(it =&gt; it + totalprice(line))\n// ...\n      [], [], [], \"Total:\", text(size: 15pt)[#sumtotalprice(lines) vs #context totalprice-state.get()]\n\n</code></pre>",
      "raw": "Hello!\nPlease make sure your code is reproducible before posting, it helps to reduce the code to a *minimal working example*. You can take a look at https://forum.typst.app/t/how-to-post-in-the-questions-category/11 for other tips!\n\nFor your problem, I wouldn't actually have a \"global variable\" and add the total price of each line when constructing the rows. You can do it twice at nearly no cost, this would be more \"elegant\" than having a global variable. \n\nTo actually answer your question, you can create a [`state`](https://typst.app/docs/reference/introspection/state/) to keep track of the total price.\n\nHere are the relevant lines below. I showcase two ways of computing the total price: `sumtotalprice` or `totalprice-state.get()`.\n\n```typ\n#let totalprice-state = state(\"totalprice\", 0.0)\n#let totalprice(line) = {\n  if line.type == lineTypes.special {\n    return line.details.amount * line.details.pricePerUnit \n  }\n  return 0\n}\n#let sumtotalprice(lines) = {\n  if type(lines) == \"array\" {\n    return lines.map(line => totalprice(line)).sum()\n  }\n}\n// ...\n          str(totalprice(line)) + totalprice-state.update(it => it + totalprice(line))\n// ...\n      [], [], [], \"Total:\", text(size: 15pt)[#sumtotalprice(lines) vs #context totalprice-state.get()]\n\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 50,
      "score": 45.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2701,
      "post_number": 3,
      "username": "eike",
      "name": "Eike Schulte",
      "created_at": "2024-09-27T07:47:19.475Z",
      "updated_at": "2024-09-27T07:56:44.261Z",
      "cooked": "<p>I think there are two ways that are somewhat idiomatic. I simplified your example a bit, and will use this data:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let lines = (\n  (name: \"foo\", value: 5),\n  (name: \"bar\", value: 42),\n)\n</code></pre>\n<p>I will produce a table listing the name in upper case and the cumulative sum next to it, and a results line at the end, like so:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/cfe98e6c6d2b197d9b2a84e5d23cf9fd6c995454.png\" alt=\"grafik\" data-base62-sha1=\"tFheauXu9UN57VXLkS4SE5Uvjla\" width=\"144\" height=\"132\"></p>\n<h2><a name=\"p-2701-approach-with-for-loop-1\" class=\"anchor\" href=\"#p-2701-approach-with-for-loop-1\"></a>Approach with <code>for</code> loop</h2>\n<p><em>Global</em> variables are immutable in Typst, but <em>local</em> variables are not. So you can introduce a new scope, a variable within it, and then modify it using a <code>for</code> loop. When the body of a <code>for</code> loop returns joinable values, they will be joined automatically. Arrays are joinable, so just returning the cells for a single line at the end of the loop will work. (If you just want to return a single value in each iteration, this means that you will often have to write <code>(value,)</code> to turn it into a one-element array to get an array of results back. Here, we want to values each time, so we can just return the two-element array and skip the <code>flatten</code> at the end.)</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#table(columns: 2,\n  ..{\n    let cum-sum = 0\n    for line in lines {\n      cum-sum = cum-sum + line.value\n      ([#upper(line.name)], [#cum-sum])\n    }\n    ([Result], [#cum-sum])\n  }\n)\n</code></pre>\n<h2><a name=\"p-2701-approach-with-fold-2\" class=\"anchor\" href=\"#p-2701-approach-with-fold-2\"></a>Approach with <code>fold</code></h2>\n<p>If you want a more “functional” solution, you can use <code>fold</code> instead of <code>map</code>. <code>lines.fold</code> takes two arguments: The initial value for the <em>accumulator</em> and a <em>folding function</em>. For us, the initial value is a pair of an empty list (we will “fill” this with the cells) and <code>0</code> as the initial value of the cumulative sum. The folding function gets both the current value of the accumulator and the next element from the <code>lines</code> array. It must return the updated accumulator.</p>\n<p>I would usually recommend using the <code>for</code> loop approach, instead.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#table(columns: 2,\n  ..{\n    let (cells, sum) = lines.fold(((), 0), ((results, cum-sum), line) =&gt; {\n      let new-sum = cum-sum + line.value\n      (\n        results + ([#upper(line.name)], [#new-sum],),\n        new-sum,\n      )\n    })\n    cells\n    ([Result], [#sum])\n  }\n)\n</code></pre>",
      "raw": "I think there are two ways that are somewhat idiomatic. I simplified your example a bit, and will use this data:\n```typ\n#let lines = (\n  (name: \"foo\", value: 5),\n  (name: \"bar\", value: 42),\n)\n```\nI will produce a table listing the name in upper case and the cumulative sum next to it, and a results line at the end, like so:\n![grafik|144x132](upload://tFheauXu9UN57VXLkS4SE5Uvjla.png)\n\n## Approach with `for` loop\n\n*Global* variables are immutable in Typst, but *local* variables are not. So you can introduce a new scope, a variable within it, and then modify it using a `for` loop. When the body of a `for` loop returns joinable values, they will be joined automatically. Arrays are joinable, so just returning the cells for a single line at the end of the loop will work. (If you just want to return a single value in each iteration, this means that you will often have to write `(value,)` to turn it into a one-element array to get an array of results back. Here, we want to values each time, so we can just return the two-element array and skip the `flatten` at the end.)\n\n```typ\n#table(columns: 2,\n  ..{\n    let cum-sum = 0\n    for line in lines {\n      cum-sum = cum-sum + line.value\n      ([#upper(line.name)], [#cum-sum])\n    }\n    ([Result], [#cum-sum])\n  }\n)\n```\n\n## Approach with `fold`\n\nIf you want a more \"functional\" solution, you can use `fold` instead of `map`. `lines.fold` takes two arguments: The initial value for the *accumulator* and a *folding function*. For us, the initial value is a pair of an empty list (we will \"fill\" this with the cells) and `0` as the initial value of the cumulative sum. The folding function gets both the current value of the accumulator and the next element from the `lines` array. It must return the updated accumulator.\n\nI would usually recommend using the `for` loop approach, instead.\n\n```typ\n#table(columns: 2,\n  ..{\n    let (cells, sum) = lines.fold(((), 0), ((results, cum-sum), line) => {\n      let new-sum = cum-sum + line.value\n      (\n        results + ([#upper(line.name)], [#new-sum],),\n        new-sum,\n      )\n    })\n    cells\n    ([Result], [#sum])\n  }\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 47,
      "score": 54.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 357
    },
    {
      "id": 2712,
      "post_number": 4,
      "username": "Sacriface",
      "name": "",
      "created_at": "2024-09-27T10:14:01.617Z",
      "updated_at": "2024-09-27T10:14:01.617Z",
      "cooked": "<p>Wow, thank you both for these great answers. I will keep in mind to do a minimal example next time, sorry about that!</p>",
      "raw": "Wow, thank you both for these great answers. I will keep in mind to do a minimal example next time, sorry about that!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 7.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 489
    },
    {
      "id": 2730,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-27T15:23:56.162Z",
      "updated_at": "2024-09-27T15:23:56.162Z",
      "cooked": "<p>One thing I noticed right away is that you can use <code>upper(line.name)</code> instead of <code>[#upper(line.name)]</code>. The <a href=\"https://typst.app/docs/reference/text/upper/\"><code>upper</code></a> function return <code>str</code> for <code>str</code> input and <code>content</code> for <code>content</code> input. Table cell can be either <code>str</code> or <code>content</code>.</p>",
      "raw": "One thing I noticed right away is that you can use `upper(line.name)` instead of `[#upper(line.name)]`. The [`upper`](https://typst.app/docs/reference/text/upper/) function return `str` for `str` input and `content` for `content` input. Table cell can be either `str` or `content`.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 7.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:57.674838"
}
{
  "topic_metadata": {
    "id": 720,
    "title": "How to add indent to a list only if it's not a sublist?",
    "slug": "how-to-add-indent-to-a-list-only-if-its-not-a-sublist",
    "posts_count": 5,
    "created_at": "2024-09-27T04:37:41.039Z",
    "last_posted_at": "2025-03-28T22:19:38.792Z",
    "views": 315,
    "like_count": 10,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "JosiNeto",
    "tags": [
      "lists"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 275
  },
  "posts": [
    {
      "id": 2697,
      "post_number": 1,
      "username": "JosiNeto",
      "name": "Josí Neto",
      "created_at": "2024-09-27T04:37:41.234Z",
      "updated_at": "2024-09-27T04:37:41.234Z",
      "cooked": "<p>I need to add an <code>indent</code> to lists (ordered and unordered). This is easy, of course. The problem is: when I add it with below code, sublists are indented too, rendering them not aligned with the text of the parent item.</p>\n<p>The code to add <code>indent</code> to all lists:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set enum(\n  indent: 0.4cm,\n)\n#set list(\n  indent: 0.4cm,\n)\n</code></pre>\n<p>Is there a way to know, inside a list’s <code>show</code> rule, whether that list is a sublist?</p>",
      "raw": "I need to add an `indent` to lists (ordered and unordered). This is easy, of course. The problem is: when I add it with below code, sublists are indented too, rendering them not aligned with the text of the parent item.\n\nThe code to add `indent` to all lists:\n\n```typ\n#set enum(\n  indent: 0.4cm,\n)\n#set list(\n  indent: 0.4cm,\n)\n```\n\nIs there a way to know, inside a list's `show` rule, whether that list is a sublist?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 1279.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 376
    },
    {
      "id": 2706,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2024-09-27T08:43:39.693Z",
      "updated_at": "2024-09-27T08:43:39.693Z",
      "cooked": "<p>I think the following does what you want:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set list(indent: 0.4cm)\n#show list: it =&gt; {\n  set list(indent: 0pt)\n  it\n}\n</code></pre>",
      "raw": "I think the following does what you want:\n\n```typ\n#set list(indent: 0.4cm)\n#show list: it => {\n  set list(indent: 0pt)\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 45,
      "score": 69.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 2748,
      "post_number": 3,
      "username": "JosiNeto",
      "name": "Josí Neto",
      "created_at": "2024-09-27T18:22:17.315Z",
      "updated_at": "2024-09-27T18:24:28.365Z",
      "cooked": "<p>Thank you, your solution is very simple and works, but only to unordered lists inside unordered lists. I’ve changed it a little bit, to work in lists that mix order and unordered [sub]lists:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set enum(indent: 0.4cm)\n#show enum: it =&gt; {\n  set enum(indent: 0pt)\n  set list(indent: 0pt)\n  it\n}\n#set list(indent: 0.4cm)\n#show list: it =&gt; {\n  set enum(indent: 0pt)\n  set list(indent: 0pt)\n  it\n}\n</code></pre>",
      "raw": "Thank you, your solution is very simple and works, but only to unordered lists inside unordered lists. I've changed it a little bit, to work in lists that mix order and unordered [sub]lists:\n\n```typ\n#set enum(indent: 0.4cm)\n#show enum: it => {\n  set enum(indent: 0pt)\n  set list(indent: 0pt)\n  it\n}\n#set list(indent: 0.4cm)\n#show list: it => {\n  set enum(indent: 0pt)\n  set list(indent: 0pt)\n  it\n}\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 40,
      "score": 73.0,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 376
    },
    {
      "id": 2750,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-27T18:48:39.215Z",
      "updated_at": "2024-09-27T18:48:39.215Z",
      "cooked": "<p>Here is my version:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let custom-indent = 0.4cm\n#set enum(indent: custom-indent)\n#set list(indent: custom-indent)\n#let remove-indent(doc) = {\n  set enum(indent: 0pt)\n  set list(indent: 0pt)\n  doc\n}\n#show enum: it =&gt; { show: remove-indent; it }\n#show list: it =&gt; { show: remove-indent; it }\n</code></pre>",
      "raw": "Here is my version:\n\n```typ\n#let custom-indent = 0.4cm\n#set enum(indent: custom-indent)\n#set list(indent: custom-indent)\n#let remove-indent(doc) = {\n  set enum(indent: 0pt)\n  set list(indent: 0pt)\n  doc\n}\n#show enum: it => { show: remove-indent; it }\n#show list: it => { show: remove-indent; it }\n```",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 40,
      "score": 53.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10384,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-28T22:19:38.792Z",
      "updated_at": "2025-03-28T22:19:38.792Z",
      "cooked": "<p>Actually, the last part is very redundant:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let custom-indent = 0.4cm\n#set enum(indent: custom-indent)\n#set list(indent: custom-indent)\n#let remove-indent(body) = {\n  set enum(indent: 0pt)\n  set list(indent: 0pt)\n  body\n}\n#show enum: remove-indent\n#show list: remove-indent\n\n#lorem(15)\n- #lorem(15)\n  + #lorem(15)\n  + #lorem(15)\n+ #lorem(15)\n  - #lorem(15)\n  - #lorem(15)\n</code></pre>",
      "raw": "Actually, the last part is very redundant:\n\n```typ\n#let custom-indent = 0.4cm\n#set enum(indent: custom-indent)\n#set list(indent: custom-indent)\n#let remove-indent(body) = {\n  set enum(indent: 0pt)\n  set list(indent: 0pt)\n  body\n}\n#show enum: remove-indent\n#show list: remove-indent\n\n#lorem(15)\n- #lorem(15)\n  + #lorem(15)\n  + #lorem(15)\n+ #lorem(15)\n  - #lorem(15)\n  - #lorem(15)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 19,
      "score": 33.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:56.946483"
}
{
  "topic_metadata": {
    "id": 725,
    "title": "How to make sure heading and the first following content stay on the same page?",
    "slug": "how-to-make-sure-heading-and-the-first-following-content-stay-on-the-same-page",
    "posts_count": 4,
    "created_at": "2024-09-27T08:40:20.318Z",
    "last_posted_at": "2024-09-27T12:21:17.260Z",
    "views": 500,
    "like_count": 2,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "layout",
      "page"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 176
  },
  "posts": [
    {
      "id": 2705,
      "post_number": 1,
      "username": "Joe_Leiber",
      "name": "Joe Leiber",
      "created_at": "2024-09-27T08:40:20.434Z",
      "updated_at": "2024-09-27T09:54:14.649Z",
      "cooked": "<p>In fact, I search a way for make that heading can’t stay alone in bottom of a page. I already know the way with</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">box([ = MyTiTle\nmytext here\n])\n</code></pre>\n<p>but I search an automated way<br>\nFor example :<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/e246d08fabdda5ede89c55819e5e8f76704d93e4.png\" data-download-href=\"https://forum.typst.app/uploads/default/e246d08fabdda5ede89c55819e5e8f76704d93e4\" title=\"Capture\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/e246d08fabdda5ede89c55819e5e8f76704d93e4_2_690x353.png\" alt=\"Capture\" data-base62-sha1=\"whJCWpNiDYRyFhSzVCqSeweEYAs\" width=\"690\" height=\"353\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/e246d08fabdda5ede89c55819e5e8f76704d93e4_2_690x353.png, https://forum.typst.app/uploads/default/original/1X/e246d08fabdda5ede89c55819e5e8f76704d93e4.png 1.5x, https://forum.typst.app/uploads/default/original/1X/e246d08fabdda5ede89c55819e5e8f76704d93e4.png 2x\" data-dominant-color=\"EFEFF0\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Capture</span><span class=\"informations\">713×365 34.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "In fact, I search a way for make that heading can't stay alone in bottom of a page. I already know the way with \n```typc\nbox([ = MyTiTle\nmytext here\n])\n```\nbut I search an automated way\nFor example : \n![Capture|690x353](upload://whJCWpNiDYRyFhSzVCqSeweEYAs.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 1199.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 490
    },
    {
      "id": 2708,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2024-09-27T08:55:09.253Z",
      "updated_at": "2024-09-27T08:55:09.253Z",
      "cooked": "<p>The issue with lone heading at the bottom of the page is fixed in the next release (due “soon”). In the meantime one workaround that <a class=\"mention\" href=\"/u/pgbiel\">@PgBiel</a> suggested is something like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// Make a heading reserving some space below to avoid\n// a page break between heading and content\n#let custom-heading(it, reserve: 6em) = {\n  block(breakable: false, it + v(reserve))\n  v(-1 * reserve)\n}\n</code></pre>\n<p>which you could use with <code>#show heading: custom-heading</code>.</p>\n<p>(I couldn’t test the above since for some reason I cannot get a small example to reproduce the problem <img src=\"https://forum.typst.app/images/emoji/apple/thinking.png?v=12\" title=\":thinking:\" class=\"emoji\" alt=\":thinking:\" loading=\"lazy\" width=\"20\" height=\"20\">)</p>",
      "raw": "The issue with lone heading at the bottom of the page is fixed in the next release (due \"soon\"). In the meantime one workaround that @PgBiel suggested is something like this:\n\n```typ\n// Make a heading reserving some space below to avoid\n// a page break between heading and content\n#let custom-heading(it, reserve: 6em) = {\n  block(breakable: false, it + v(reserve))\n  v(-1 * reserve)\n}\n```\n\nwhich you could use with `#show heading: custom-heading`.\n\n(I couldn't test the above since for some reason I cannot get a small example to reproduce the problem :thinking:)",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 119.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 2709,
      "post_number": 3,
      "username": "Joe_Leiber",
      "name": "Joe Leiber",
      "created_at": "2024-09-27T09:05:42.769Z",
      "updated_at": "2024-09-27T09:05:42.769Z",
      "cooked": "<p>thanks for your help!<br>\nit work well</p>",
      "raw": "thanks for your help!\nit work well",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 44,
      "score": 73.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 490
    },
    {
      "id": 2722,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-27T12:21:17.260Z",
      "updated_at": "2024-09-27T12:21:17.260Z",
      "cooked": "<p>Related issue: <a href=\"https://github.com/typst/typst/issues/993\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Keep with the next paragraph · Issue #993 · typst/typst · GitHub</a>.<br>\nRelated PR that fixed this issue: <a href=\"https://github.com/typst/typst/pull/5017\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">New flow layout, with multi-column floats by laurmaedje · Pull Request #5017 · typst/typst · GitHub</a>.<br>\nLink to the original solution: <a href=\"https://gist.github.com/PgBiel/2976c9d0ed5638ef57633ce7233928ea\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Typst - Try to keep two things in the same page · GitHub</a>.</p>",
      "raw": "Related issue: https://github.com/typst/typst/issues/993.\nRelated PR that fixed this issue: https://github.com/typst/typst/pull/5017.\nLink to the original solution: https://gist.github.com/PgBiel/2976c9d0ed5638ef57633ce7233928ea.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 812.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:56.224465"
}
{
  "topic_metadata": {
    "id": 727,
    "title": "How do I make a honeycomb?",
    "slug": "how-do-i-make-a-honeycomb",
    "posts_count": 6,
    "created_at": "2024-09-27T11:20:46.945Z",
    "last_posted_at": "2024-09-27T20:51:37.468Z",
    "views": 194,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "Andrew",
    "tags": [
      "graphics"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 1342
  },
  "posts": [
    {
      "id": 2714,
      "post_number": 1,
      "username": "Nichlas_Hummelsberge",
      "name": "Nichlas Hummelsberger",
      "created_at": "2024-09-27T11:20:47.077Z",
      "updated_at": "2024-09-28T22:11:01.201Z",
      "cooked": "<p>Can someone guide me towards creating a honeycomb like below, where I can add labels both outside and inside the shapes? I do not need any colors or fills for the moment.</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/63038ad1e5e40d08abc4ff1a5240e9029a7f9c47.png\" alt=\"2024-09-27 13_13_53-Trav2022CharSheet.pdf - Adobe Acrobat Reader (32-bit)\" data-base62-sha1=\"e7URfoil3ubf1qICAQAZmlaBwAT\" width=\"326\" height=\"111\"></p>",
      "raw": "Can someone guide me towards creating a honeycomb like below, where I can add labels both outside and inside the shapes? I do not need any colors or fills for the moment.\n\n![2024-09-27 13_13_53-Trav2022CharSheet.pdf - Adobe Acrobat Reader (32-bit)|326x111](upload://e7URfoil3ubf1qICAQAZmlaBwAT.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 57,
      "score": 71.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 475
    },
    {
      "id": 2716,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-27T11:33:48.355Z",
      "updated_at": "2024-09-27T11:34:36.929Z",
      "cooked": "<p>Are you aware of the <a href=\"https://typst.app/docs/reference/visualize/polygon/\"><code>polygon</code></a> function and <a href=\"https://typst.app/universe/package/cetz/\">CeTZ package</a>’s <code>cetz.draw.line()</code>? It should be relatively easy to use either to draw this (CeTZ is probably a bit easier), using a bit of trigonometry. For this, you’ll also want to use the <a href=\"https://typst.app/docs/reference/foundations/calc\"><code>calc.sin()</code> and <code>calc.cos()</code></a> functions to determine coordinates.</p>\n<p>Basically:</p>\n<ul>\n<li>choose the coordinates for where to have the first hexagon’s center (<code>cx</code>, <code>cy</code>), and a “radius”</li>\n<li>the six corners are each shifted by 60°, and you get them by <code>x = cx + cos(angle)*radius</code> and <code>y = cy + sin(angle)*radius</code> (the Wikipedia article on the <a href=\"https://en.wikipedia.org/wiki/Unit_circle\">unit circle</a> may help making it more clear why this works)</li>\n<li>the next hexagon has <code>cx2 = cx1 + 1.5*radius</code>, which is pretty easy to see. <code>cy2</code> is the same as the first hexagon’s lower corners’ <code>y</code>.</li>\n<li>to place the texts, add some extra distance to the upper/lower corners, and center text at <code>cx</code>.</li>\n</ul>\n<p>I think this <em>should</em> get you going. Feel free to ask follow-up questions, and when you’re done please post your result so that others can easily reuse it :)</p>",
      "raw": "Are you aware of the [`polygon`](https://typst.app/docs/reference/visualize/polygon/) function and [CeTZ package](https://typst.app/universe/package/cetz/)'s `cetz.draw.line()`? It should be relatively easy to use either to draw this (CeTZ is probably a bit easier), using a bit of trigonometry. For this, you'll also want to use the [`calc.sin()` and `calc.cos()`](https://typst.app/docs/reference/foundations/calc) functions to determine coordinates.\n\nBasically:\n- choose the coordinates for where to have the first hexagon's center (`cx`, `cy`), and a \"radius\"\n- the six corners are each shifted by 60°, and you get them by `x = cx + cos(angle)*radius` and `y = cy + sin(angle)*radius` (the Wikipedia article on the [unit circle](https://en.wikipedia.org/wiki/Unit_circle) may help making it more clear why this works)\n- the next hexagon has `cx2 = cx1 + 1.5*radius`, which is pretty easy to see. `cy2` is the same as the first hexagon's lower corners' `y`.\n- to place the texts, add some extra distance to the upper/lower corners, and center text at `cx`.\n\nI think this _should_ get you going. Feel free to ask follow-up questions, and when you're done please post your result so that others can easily reuse it :)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 58,
      "score": 16.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2717,
      "post_number": 3,
      "username": "Nichlas_Hummelsberge",
      "name": "Nichlas Hummelsberger",
      "created_at": "2024-09-27T11:35:44.030Z",
      "updated_at": "2024-09-27T11:35:44.030Z",
      "cooked": "<p>Thank you <a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a>, I was not aware. I will try your suggestion, and return with the result.</p>",
      "raw": "Thank you @SillyFreak, I was not aware. I will try your suggestion, and return with the result.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 57,
      "score": 56.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 475
    },
    {
      "id": 2746,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-27T18:18:10.918Z",
      "updated_at": "2024-09-27T20:30:07.007Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.2.2\"\n\n#set page(height: auto, width: auto, margin: 0pt)\n\n#let background-color = gray\n#let fill-color = white\n#let stroke-color = black\n#let labels = (\"STR\", \"DEX\", \"END\", \"INT\", \"EDU\", \"SOC\")\n// #let labels = (\"STR\", \"DEX\", \"END\") // This also works!\n#let label-formatter(label) = text(font: \"Liberation Sans\", emph(strong(label)))\n\n#let d = 1.8cm // The diameter of the circumcircle of the hexagon.\n#let r = d / 2 // The radius of the circumcircle of the hexagon.\n\n// The height of one of 6 triangles inside hexagon, i.e., half-height of hexagon.\n#let h = r * calc.sqrt(3) / 2\n\n//   _____\n//  /|    \\\n// / |     \\\n//|\\ |     /\n//| \\|____/\n//|  |\n//|←→|\n// Small height (of a small triangle inside the hexagon).\n#let hh = calc.sqrt(r.cm() * r.cm() - h.cm() * h.cm()) * 1cm\n\n#let hexagon-shape = polygon.regular(\n  vertices: 6,\n  size: d,\n  fill: fill-color,\n  stroke: stroke-color,\n)\n\n#let hexagon(rel-pos, name, label-pos, label) = {\n  import cetz.draw: *\n  let rel-to = if name == 1 { () } else { str(name - 1) }\n  let position = (rel: rel-pos, to: rel-to)\n  content(position, name: str(name), hexagon-shape)\n  let text-offset = 0.2\n  let text-offset = text-offset * if label-pos == top { 1 } else { -1 }\n  let side = if label-pos == top { \"north\" } else { \"south\" }\n  content(\n    (rel: (0, text-offset), to: str(name) + \".\" + side),\n    label-formatter(label),\n  )\n}\n\n#let hexagon-right-top(name, label) = {\n  hexagon((hh + r, h), name, top, label)\n}\n\n#let hexagon-right-bottom(name, label) = {\n  hexagon((hh + r, -h), name, bottom, label)\n}\n\n#let img = cetz.canvas(background: background-color, {\n  import cetz.draw: *\n  let last = labels.len()\n  // Draw each hexagon and its label.\n  for (i, label) in labels.enumerate() {\n    if calc.odd(i + 1) {\n      hexagon-right-top(i + 1, label)\n    } else {\n      hexagon-right-bottom(i + 1, label)\n    }\n  }\n  // Draw background horizontal stripe.\n  on-layer(-1, {\n    let extend = 1\n    line(\n      (rel: (-extend, 0), to: \"1.west\"),\n      if calc.even(labels.len()) {\n        (rel: (extend, 0), to: str(last) + \".north-east\")\n      } else { () },\n      (rel: (extend, 0), to: str(last) + \".east\"),\n      if calc.odd(labels.len()) {\n        (rel: (extend, 0), to: str(last) + \".south-east\")\n      } else { () },\n      (rel: (-extend, 0), to: \"1.south-west\"),\n      close: true,\n      fill: fill-color,\n      stroke: fill-color,\n    )\n  })\n})\n\n// Add vertical padding.\n#let img = block(inset: (y: 2mm), fill: background-color, img)\n\n#img\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/8ad6469d5cdce25d8053a86f5fd23fdcc3f4c375.png\" alt=\"out\" data-base62-sha1=\"jOcYr5wkVXqQj13OmhH2SXLw1yB\" width=\"598\" height=\"193\"></p>\n<p>I tried to optimize the code, but I have very little overall cetz experience. Maybe <a class=\"mention\" href=\"/u/jwolf\">@jwolf</a> or someone else more experienced can get a cleaner/shorter solution, but <em>I think</em> the algorithm more or less will be the same.</p>",
      "raw": "```typ\n#import \"@preview/cetz:0.2.2\"\n\n#set page(height: auto, width: auto, margin: 0pt)\n\n#let background-color = gray\n#let fill-color = white\n#let stroke-color = black\n#let labels = (\"STR\", \"DEX\", \"END\", \"INT\", \"EDU\", \"SOC\")\n// #let labels = (\"STR\", \"DEX\", \"END\") // This also works!\n#let label-formatter(label) = text(font: \"Liberation Sans\", emph(strong(label)))\n\n#let d = 1.8cm // The diameter of the circumcircle of the hexagon.\n#let r = d / 2 // The radius of the circumcircle of the hexagon.\n\n// The height of one of 6 triangles inside hexagon, i.e., half-height of hexagon.\n#let h = r * calc.sqrt(3) / 2\n\n//   _____\n//  /|    \\\n// / |     \\\n//|\\ |     /\n//| \\|____/\n//|  |\n//|←→|\n// Small height (of a small triangle inside the hexagon).\n#let hh = calc.sqrt(r.cm() * r.cm() - h.cm() * h.cm()) * 1cm\n\n#let hexagon-shape = polygon.regular(\n  vertices: 6,\n  size: d,\n  fill: fill-color,\n  stroke: stroke-color,\n)\n\n#let hexagon(rel-pos, name, label-pos, label) = {\n  import cetz.draw: *\n  let rel-to = if name == 1 { () } else { str(name - 1) }\n  let position = (rel: rel-pos, to: rel-to)\n  content(position, name: str(name), hexagon-shape)\n  let text-offset = 0.2\n  let text-offset = text-offset * if label-pos == top { 1 } else { -1 }\n  let side = if label-pos == top { \"north\" } else { \"south\" }\n  content(\n    (rel: (0, text-offset), to: str(name) + \".\" + side),\n    label-formatter(label),\n  )\n}\n\n#let hexagon-right-top(name, label) = {\n  hexagon((hh + r, h), name, top, label)\n}\n\n#let hexagon-right-bottom(name, label) = {\n  hexagon((hh + r, -h), name, bottom, label)\n}\n\n#let img = cetz.canvas(background: background-color, {\n  import cetz.draw: *\n  let last = labels.len()\n  // Draw each hexagon and its label.\n  for (i, label) in labels.enumerate() {\n    if calc.odd(i + 1) {\n      hexagon-right-top(i + 1, label)\n    } else {\n      hexagon-right-bottom(i + 1, label)\n    }\n  }\n  // Draw background horizontal stripe.\n  on-layer(-1, {\n    let extend = 1\n    line(\n      (rel: (-extend, 0), to: \"1.west\"),\n      if calc.even(labels.len()) {\n        (rel: (extend, 0), to: str(last) + \".north-east\")\n      } else { () },\n      (rel: (extend, 0), to: str(last) + \".east\"),\n      if calc.odd(labels.len()) {\n        (rel: (extend, 0), to: str(last) + \".south-east\")\n      } else { () },\n      (rel: (-extend, 0), to: \"1.south-west\"),\n      close: true,\n      fill: fill-color,\n      stroke: fill-color,\n    )\n  })\n})\n\n// Add vertical padding.\n#let img = block(inset: (y: 2mm), fill: background-color, img)\n\n#img\n```\n\n![out|598x193](upload://jOcYr5wkVXqQj13OmhH2SXLw1yB.png)\n\nI tried to optimize the code, but I have very little overall cetz experience. Maybe @jwolf or someone else more experienced can get a cleaner/shorter solution, but _I think_ the algorithm more or less will be the same.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 14.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2751,
      "post_number": 5,
      "username": "Nichlas_Hummelsberge",
      "name": "Nichlas Hummelsberger",
      "created_at": "2024-09-27T19:38:00.213Z",
      "updated_at": "2024-09-27T20:21:17.302Z",
      "cooked": "<p>Thanks a lot for contributing <a class=\"mention\" href=\"/u/andrew\">@Andrew</a> your solution seems slightly simpler than the one I came up with <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>But now that I have spent all that time I’m going to post my solution anyways.</p>\n<p>First I tried the solution with sin() and cos() that <a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a> posted, but I think my math was way off because I never ended up with a real hexagon. But instead someone had posted the vertices on a webpage: (1, 0), (1/2, sqrt3 / 2), (-1/2, sqrt3 / 2), (-1, 0), (-1/2, -sqrt3 / 2), (1/2, -sqrt3 / 2)</p>\n<p>So with this I succeeded.</p>\n<h1><a name=\"p-2751-progress-1\" class=\"anchor\" href=\"#p-2751-progress-1\"></a>Progress</h1>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/b77608a42833f6ce48777337f38f140f8a540245.png\" data-download-href=\"https://forum.typst.app/uploads/default/b77608a42833f6ce48777337f38f140f8a540245\" title=\"Screenshot_20240927_212441\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/b77608a42833f6ce48777337f38f140f8a540245_2_690x334.png\" alt=\"Screenshot_20240927_212441\" data-base62-sha1=\"qaYgjUNHx19llPLclSlpAxxVQAl\" width=\"690\" height=\"334\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/b77608a42833f6ce48777337f38f140f8a540245_2_690x334.png, https://forum.typst.app/uploads/default/original/1X/b77608a42833f6ce48777337f38f140f8a540245.png 1.5x, https://forum.typst.app/uploads/default/original/1X/b77608a42833f6ce48777337f38f140f8a540245.png 2x\" data-dominant-color=\"ECEBED\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot_20240927_212441</span><span class=\"informations\">910×441 55 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/826a3faf25eec5407d20290f8762692cde95dcb9.png\" data-download-href=\"https://forum.typst.app/uploads/default/826a3faf25eec5407d20290f8762692cde95dcb9\" title=\"Screenshot_20240927_212526\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/826a3faf25eec5407d20290f8762692cde95dcb9_2_690x334.png\" alt=\"Screenshot_20240927_212526\" data-base62-sha1=\"iBHHTTKwiO6woOObylRKWCw4urn\" width=\"690\" height=\"334\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/826a3faf25eec5407d20290f8762692cde95dcb9_2_690x334.png, https://forum.typst.app/uploads/default/original/1X/826a3faf25eec5407d20290f8762692cde95dcb9.png 1.5x, https://forum.typst.app/uploads/default/original/1X/826a3faf25eec5407d20290f8762692cde95dcb9.png 2x\" data-dominant-color=\"E8E8EA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot_20240927_212526</span><span class=\"informations\">910×441 64.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/857b5091ce1d925cae88febcf3b210201d5f0386.png\" data-download-href=\"https://forum.typst.app/uploads/default/857b5091ce1d925cae88febcf3b210201d5f0386\" title=\"Screenshot_20240927_212546\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/857b5091ce1d925cae88febcf3b210201d5f0386_2_690x334.png\" alt=\"Screenshot_20240927_212546\" data-base62-sha1=\"j2PHEKsqa3PiHMZAYmi6aw30rie\" width=\"690\" height=\"334\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/857b5091ce1d925cae88febcf3b210201d5f0386_2_690x334.png, https://forum.typst.app/uploads/default/original/1X/857b5091ce1d925cae88febcf3b210201d5f0386.png 1.5x, https://forum.typst.app/uploads/default/original/1X/857b5091ce1d925cae88febcf3b210201d5f0386.png 2x\" data-dominant-color=\"EAEAEA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot_20240927_212546</span><span class=\"informations\">910×441 49.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<h1><a name=\"p-2751-and-here-is-my-code-2\" class=\"anchor\" href=\"#p-2751-and-here-is-my-code-2\"></a>And here is my code</h1>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/cetz:0.2.2\"\n\n#set page(\n  paper: \"a3\",\n  flipped: true,\n  \n)\n\n#set text(\n  font: \"IBM Plex Sans\",\n)\n\n#cetz.canvas(\n  length: 20pt,\n  {\n    import cetz.draw: *\n    // grid((-1.5,-3), (9,2), stroke: luma(240), step: .25)\n    // grid((-1.5, -3), (9, 2), stroke: luma(160), step: 5)\n    let centery = 0\n    let centerx = 0\n    let angle = 60\n    let radius = 0.1\n    // Vertices at \n    //             (1, 0)\n    //   (1/2, sqrt3 / 2)\n    //  (-1/2, sqrt3 / 2)\n    //            (-1, 0)\n    // (-1/2, -sqrt3 / 2)\n    //  (1/2, -sqrt3 / 2)\n    let hex(x, y, property, level) = {\n      let ax = 1\n      let ay = 0\n      let a = (x + ax, y + ay)\n      \n      let bx = 1 / 2\n      let by = calc.sqrt(3) / 2\n      let b = (x + bx, y + by)\n      let cx = -(1 / 2)\n      let cy = by\n      let c = (x + cx, y + cy)\n      let dx = -1\n      let dy = 0\n      let d = (x + dx, y + dy)\n      let ex = -(1 / 2)\n      let ey = -by\n      let e = (x + ex, y + ey)\n      let fx = 1 / 2\n      let fy = -by\n      let f = (x + fx, y + fy)\n        // circle(a, radius: radius, stroke: 1pt + blue)\n        // circle(b, radius: radius, stroke: blue)\n        // circle(c, radius: radius, stroke: blue)\n        // circle(d, radius: radius, stroke: purple)\n        // circle(e, radius: radius, stroke: purple)\n        // circle(f, radius: radius, stroke: purple)\n        line(a, b, c, d, e, f, stroke: 1.5pt, close: true)\n        content((x + 0,y + 0), [#level])\n        content((x + 0,y + 1.2), [#text(style: \"italic\", weight: \"bold\", [#property])])\n  }\n\n  hex(0,0, \"STR\", \"10\")\n  hex(1.5,-calc.sqrt(3)/2, \"DEX\", \"10\")\n  hex(3,0, \"END\", \"10\")\n  hex(4.5,-calc.sqrt(3)/2, \"INT\", \"10\")\n  hex(6.0,0, \"EDU\", \"10\")\n  hex(7.5,-calc.sqrt(3)/2, \"SOC\", \"10\")\n})\n</code></pre>",
      "raw": "Thanks a lot for contributing @Andrew your solution seems slightly simpler than the one I came up with :smiley:\n\nBut now that I have spent all that time I'm going to post my solution anyways.\n\nFirst I tried the solution with sin() and cos() that @SillyFreak posted, but I think my math was way off because I never ended up with a real hexagon. But instead someone had posted the vertices on a webpage: (1, 0), (1/2, sqrt3 / 2), (-1/2, sqrt3 / 2), (-1, 0), (-1/2, -sqrt3 / 2), (1/2, -sqrt3 / 2)\n\nSo with this I succeeded.\n\n# Progress\n![Screenshot_20240927_212441|690x334](upload://qaYgjUNHx19llPLclSlpAxxVQAl.png)\n\n![Screenshot_20240927_212526|690x334](upload://iBHHTTKwiO6woOObylRKWCw4urn.png)\n![Screenshot_20240927_212546|690x334](upload://j2PHEKsqa3PiHMZAYmi6aw30rie.png)\n\n# And here is my code\n\n```typst\n#import \"@preview/cetz:0.2.2\"\n\n#set page(\n  paper: \"a3\",\n  flipped: true,\n  \n)\n\n#set text(\n  font: \"IBM Plex Sans\",\n)\n\n#cetz.canvas(\n  length: 20pt,\n  {\n    import cetz.draw: *\n    // grid((-1.5,-3), (9,2), stroke: luma(240), step: .25)\n    // grid((-1.5, -3), (9, 2), stroke: luma(160), step: 5)\n    let centery = 0\n    let centerx = 0\n    let angle = 60\n    let radius = 0.1\n    // Vertices at \n    //             (1, 0)\n    //   (1/2, sqrt3 / 2)\n    //  (-1/2, sqrt3 / 2)\n    //            (-1, 0)\n    // (-1/2, -sqrt3 / 2)\n    //  (1/2, -sqrt3 / 2)\n    let hex(x, y, property, level) = {\n      let ax = 1\n      let ay = 0\n      let a = (x + ax, y + ay)\n      \n      let bx = 1 / 2\n      let by = calc.sqrt(3) / 2\n      let b = (x + bx, y + by)\n      let cx = -(1 / 2)\n      let cy = by\n      let c = (x + cx, y + cy)\n      let dx = -1\n      let dy = 0\n      let d = (x + dx, y + dy)\n      let ex = -(1 / 2)\n      let ey = -by\n      let e = (x + ex, y + ey)\n      let fx = 1 / 2\n      let fy = -by\n      let f = (x + fx, y + fy)\n        // circle(a, radius: radius, stroke: 1pt + blue)\n        // circle(b, radius: radius, stroke: blue)\n        // circle(c, radius: radius, stroke: blue)\n        // circle(d, radius: radius, stroke: purple)\n        // circle(e, radius: radius, stroke: purple)\n        // circle(f, radius: radius, stroke: purple)\n        line(a, b, c, d, e, f, stroke: 1.5pt, close: true)\n        content((x + 0,y + 0), [#level])\n        content((x + 0,y + 1.2), [#text(style: \"italic\", weight: \"bold\", [#property])])\n  }\n\n  hex(0,0, \"STR\", \"10\")\n  hex(1.5,-calc.sqrt(3)/2, \"DEX\", \"10\")\n  hex(3,0, \"END\", \"10\")\n  hex(4.5,-calc.sqrt(3)/2, \"INT\", \"10\")\n  hex(6.0,0, \"EDU\", \"10\")\n  hex(7.5,-calc.sqrt(3)/2, \"SOC\", \"10\")\n})\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 64.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 475
    },
    {
      "id": 2757,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-27T20:51:37.468Z",
      "updated_at": "2024-09-27T20:53:20.205Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Nichlas_Hummelsberge\" data-post=\"5\" data-topic=\"727\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/n/BF4705/48.png\" class=\"avatar\"> Nichlas_Hummelsberge:</div>\n<blockquote>\n<p>Thanks a lot for contributing <a class=\"mention\" href=\"/u/andrew\">@Andrew</a> your solution seems slightly simpler than the one I came up with</p>\n</blockquote>\n</aside>\n<p>You’re welcome. I can make my solution even simpler if you don’t need documentation, readability, and flexibility (but I don’t recommend it because it lacks all of that):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(height: auto, width: auto, margin: 0pt)\n\n#import \"@preview/cetz:0.2.2\"\n\n#let d = 1.8cm\n\n#let hexagon(rel-pos, name, label) = {\n  cetz.draw.content(\n    (rel: rel-pos, to: if name == 1 { () } else { str(name - 1) }),\n    name: str(name),\n    polygon.regular(vertices: 6, size: d, fill: white, stroke: black),\n  )\n  let text-offset = 0.2 * if calc.odd(name) { 1 } else { -1 }\n  let side = if calc.odd(name) { \"north\" } else { \"south\" }\n  cetz.draw.content(\n    (rel: (0, text-offset), to: str(name) + \".\" + side),\n    text(font: \"Liberation Sans\", emph(strong(label))),\n  )\n}\n\n#block(inset: (y: 2mm), fill: gray, cetz.canvas(background: gray, {\n  let r = d / 2\n  let h = r * calc.sqrt(3) / 2\n  let hh = calc.sqrt(r.cm() * r.cm() - h.cm() * h.cm()) * 1cm\n  hexagon((hh + r, h), 1)[STR]\n  hexagon((hh + r, -h), 2)[DEX]\n  hexagon((hh + r, h), 3)[END]\n  hexagon((hh + r, -h), 4)[INT]\n  hexagon((hh + r, h), 5)[EDU]\n  hexagon((hh + r, -h), 6)[SOC]\n  cetz.draw.on-layer(-1, {\n    cetz.draw.rect(\n      (rel: (-1, 0), to: \"1.west\"),\n      (rel: (1, 0), to: \"6.east\"),\n      fill: white,\n      stroke: white,\n    )\n  })\n}))\n</code></pre>\n<p>I also saw some optimizations like not needing the <code>label-pos</code> parameter and substituting <code>line()</code> with <code>rect()</code>.</p>",
      "raw": "[quote=\"Nichlas_Hummelsberge, post:5, topic:727\"]\nThanks a lot for contributing @Andrew your solution seems slightly simpler than the one I came up with\n[/quote]\n\nYou're welcome. I can make my solution even simpler if you don't need documentation, readability, and flexibility (but I don't recommend it because it lacks all of that):\n\n```typ\n#set page(height: auto, width: auto, margin: 0pt)\n\n#import \"@preview/cetz:0.2.2\"\n\n#let d = 1.8cm\n\n#let hexagon(rel-pos, name, label) = {\n  cetz.draw.content(\n    (rel: rel-pos, to: if name == 1 { () } else { str(name - 1) }),\n    name: str(name),\n    polygon.regular(vertices: 6, size: d, fill: white, stroke: black),\n  )\n  let text-offset = 0.2 * if calc.odd(name) { 1 } else { -1 }\n  let side = if calc.odd(name) { \"north\" } else { \"south\" }\n  cetz.draw.content(\n    (rel: (0, text-offset), to: str(name) + \".\" + side),\n    text(font: \"Liberation Sans\", emph(strong(label))),\n  )\n}\n\n#block(inset: (y: 2mm), fill: gray, cetz.canvas(background: gray, {\n  let r = d / 2\n  let h = r * calc.sqrt(3) / 2\n  let hh = calc.sqrt(r.cm() * r.cm() - h.cm() * h.cm()) * 1cm\n  hexagon((hh + r, h), 1)[STR]\n  hexagon((hh + r, -h), 2)[DEX]\n  hexagon((hh + r, h), 3)[END]\n  hexagon((hh + r, -h), 4)[INT]\n  hexagon((hh + r, h), 5)[EDU]\n  hexagon((hh + r, -h), 6)[SOC]\n  cetz.draw.on-layer(-1, {\n    cetz.draw.rect(\n      (rel: (-1, 0), to: \"1.west\"),\n      (rel: (1, 0), to: \"6.east\"),\n      fill: white,\n      stroke: white,\n    )\n  })\n}))\n```\n\nI also saw some optimizations like not needing the `label-pos` parameter and substituting `line()` with `rect()`.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 39,
      "score": 12.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:55.390712"
}
{
  "topic_metadata": {
    "id": 739,
    "title": "`typst compile in.typ -` writes to the file instead of stdout?",
    "slug": "typst-compile-in-typ-writes-to-the-file-instead-of-stdout",
    "posts_count": 8,
    "created_at": "2024-09-27T16:49:48.911Z",
    "last_posted_at": "2024-09-28T11:38:42.384Z",
    "views": 358,
    "like_count": 2,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "cli"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 364
  },
  "posts": [
    {
      "id": 2742,
      "post_number": 1,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2024-09-27T16:49:49.251Z",
      "updated_at": "2024-09-27T16:50:36.953Z",
      "cooked": "<p>It looks like <code>typst compile in.typ -</code> should write to stdout, but it writes to the file named <code>-</code>?</p>\n<p>I tried with typst v0.11.1 on Windows and Ubuntu. By the way, <code>typst compile - out.svg</code> works.</p>\n<p>This feature was added in PR <span class=\"hashtag-raw\">#3632</span>, and <code>Output::Stdout</code> still exists in the repo. So is it a bug, or should I somehow escape the <code>-</code> for the shell? Thanks in advance.</p>",
      "raw": "It looks like `typst compile in.typ -` should write to stdout, but it writes to the file named `-`?\n\nI tried with typst v0.11.1 on Windows and Ubuntu. By the way, `typst compile - out.svg` works.\n\nThis feature was added in PR #3632, and `Output::Stdout` still exists in the repo. So is it a bug, or should I somehow escape the `-` for the shell? Thanks in advance.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 1588.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 2743,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-27T17:00:29.204Z",
      "updated_at": "2024-09-27T17:00:29.204Z",
      "cooked": "<p>That feature was merged after the release of v0.11, and since v0.11.1 only contained bug fixes, it is also not included there.</p>",
      "raw": "That feature was merged after the release of v0.11, and since v0.11.1 only contained bug fixes, it is also not included there.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 42,
      "score": 63.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2744,
      "post_number": 3,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2024-09-27T17:02:06.784Z",
      "updated_at": "2024-09-27T17:02:06.784Z",
      "cooked": "<p>Thank you! I also found it on <a href=\"https://discord.com/channels/1054443721975922748/1088371919725793360/1229394987842670673\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Discord</a> just a few seconds ago.</p>",
      "raw": "Thank you! I also found it on https://discord.com/channels/1054443721975922748/1088371919725793360/1229394987842670673 just a few seconds ago.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 8.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 2749,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-27T18:43:22.374Z",
      "updated_at": "2024-09-27T18:43:22.374Z",
      "cooked": "<p>You can also/already use <code>typst c -f svg input.svg /dev/stdout</code> on UNIX-like OSes.</p>\n<p>The information about the <code>-</code> feature is present in the help message (<code>typst c --help</code>):</p>\n<pre><code class=\"lang-plaintext\">Usage: typst-0.11.1 compile [OPTIONS] &lt;INPUT&gt; [OUTPUT]\n\nArguments:\n  &lt;INPUT&gt;   Path to input Typst file, use `-` to read input from stdin\n  [OUTPUT]  Path to output file (PDF, PNG, or SVG)\n</code></pre>\n<p>In the current version:</p>\n<pre><code class=\"lang-plaintext\">Usage: typst compile [OPTIONS] &lt;INPUT&gt; [OUTPUT]\n\nArguments:\n  &lt;INPUT&gt;   Path to input Typst file. Use `-` to read input from stdin\n  [OUTPUT]  Path to output file (PDF, PNG or SVG). Use `-` to write output to stdout\n</code></pre>",
      "raw": "You can also/already use `typst c -f svg input.svg /dev/stdout` on UNIX-like OSes.\n\nThe information about the `-` feature is present in the help message (`typst c --help`):\n\n```plain\nUsage: typst-0.11.1 compile [OPTIONS] <INPUT> [OUTPUT]\n\nArguments:\n  <INPUT>   Path to input Typst file, use `-` to read input from stdin\n  [OUTPUT]  Path to output file (PDF, PNG, or SVG)\n```\n\nIn the current version:\n\n```plain\nUsage: typst compile [OPTIONS] <INPUT> [OUTPUT]\n\nArguments:\n  <INPUT>   Path to input Typst file. Use `-` to read input from stdin\n  [OUTPUT]  Path to output file (PDF, PNG or SVG). Use `-` to write output to stdout\n```",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 41,
      "score": 53.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2755,
      "post_number": 5,
      "username": "ilia",
      "name": "Ilia",
      "created_at": "2024-09-27T20:35:20.675Z",
      "updated_at": "2024-09-27T20:35:20.675Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"4\" data-topic=\"739\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>In the current version</p>\n</blockquote>\n</aside>\n<p>I guess you mean “on dev”?</p>",
      "raw": "[quote=\"Andrew, post:4, topic:739\"]\nIn the current version\n[/quote]\n\nI guess you mean \"on dev\"?",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 33,
      "score": 16.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 139
    },
    {
      "id": 2756,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-27T20:36:32.127Z",
      "updated_at": "2024-09-27T20:36:32.127Z",
      "cooked": "<p>Something like this.</p>",
      "raw": "Something like this.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 16.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2794,
      "post_number": 7,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2024-09-28T05:17:53.426Z",
      "updated_at": "2024-09-28T05:23:31.430Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"4\" data-topic=\"739\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p><code>/dev/stdout</code> on UNIX-like OSes.</p>\n</blockquote>\n</aside>\n<p>Yes and thanks for sharing the latest help message; but I have to use it on both Unix and Windows… Looking forward to typst v0.12!</p>\n<p>P.S. POSIX/Unix/GNU has a nice design, and apps running on Windows  (unfortunately) have to take the responsibility to implement what should be provided by/with the OS: stdin/out/err as files, <code>&amp;</code>/<code>fg</code>/<code>bg</code>, glob/shell expansion, bring your own dll, <code>$PAGER</code>, etc.</p>",
      "raw": "[quote=\"Andrew, post:4, topic:739\"]\n`/dev/stdout` on UNIX-like OSes.\n[/quote]\n\nYes and thanks for sharing the latest help message; but I have to use it on both Unix and Windows… Looking forward to typst v0.12!\n\nP.S. POSIX/Unix/GNU has a nice design, and apps running on Windows  (unfortunately) have to take the responsibility to implement what should be provided by/with the OS: stdin/out/err as files, `&`/`fg`/`bg`, glob/shell expansion, bring your own dll, `$PAGER`, etc.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 28,
      "score": 10.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 2847,
      "post_number": 8,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-28T11:38:42.384Z",
      "updated_at": "2024-09-28T11:38:42.384Z",
      "cooked": "<p>Some people say that WSL is their savior (and why they won’t switch to Linux), others say that WSL is so broken they hate using it or don’t use it at all. I don’t know if <code>/dev/stdout</code> works in WSL.</p>",
      "raw": "Some people say that WSL is their savior (and why they won't switch to Linux), others say that WSL is so broken they hate using it or don't use it at all. I don't know if `/dev/stdout` works in WSL.",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:54.625873"
}
{
  "topic_metadata": {
    "id": 757,
    "title": "How can a table be split horizontally?",
    "slug": "how-can-a-table-be-split-horizontally",
    "posts_count": 7,
    "created_at": "2024-09-28T07:53:10.315Z",
    "last_posted_at": "2024-09-28T15:13:09.245Z",
    "views": 500,
    "like_count": 6,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "layout",
      "tables"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 887
  },
  "posts": [
    {
      "id": 2832,
      "post_number": 1,
      "username": "anormalperson8",
      "name": "",
      "created_at": "2024-09-28T07:53:10.413Z",
      "updated_at": "2024-09-28T12:37:33.266Z",
      "cooked": "<p>I have a table with 2 columns but a lot of rows. This leads it to go over to the next page.</p>\n<p>Is there a way to split the table horizontally into 4 columns (preferably with header repetition)?</p>\n<p>An example of what I’m thinking of:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#align(center,\n  table(\n    align: center + horizon,\n    columns: (10%, 15%),\n    table.header(\"Left\", \"Right\"),\n    [l1], [r1],\n    [l2], [r2],\n    // And so on...\n    [l50], [r50]\n  )\n)\n</code></pre>\n<p>Hopefully achieving the same effect, automatically, as below:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#align(center,\n  table(\n    align: center + horizon,\n    columns: (10%, 15%, 10%, 15%),\n    table.header(\"Left\", \"Right\", \"Left\", \"Right\"),\n    [l1], [r1], [l26], [r26],\n    [l2], [r2], [l27], [r27],\n    // And so on...\n    [l25], [r25], [l50], [r50]\n  )\n)\n</code></pre>\n<p>Thanks!</p>",
      "raw": "I have a table with 2 columns but a lot of rows. This leads it to go over to the next page. \n\nIs there a way to split the table horizontally into 4 columns (preferably with header repetition)?\n\nAn example of what I'm thinking of:\n```typ\n#align(center,\n  table(\n    align: center + horizon,\n    columns: (10%, 15%),\n    table.header(\"Left\", \"Right\"),\n    [l1], [r1],\n    [l2], [r2],\n    // And so on...\n    [l50], [r50]\n  )\n)\n```\nHopefully achieving the same effect, automatically, as below:\n```typ\n#align(center,\n  table(\n    align: center + horizon,\n    columns: (10%, 15%, 10%, 15%),\n    table.header(\"Left\", \"Right\", \"Left\", \"Right\"),\n    [l1], [r1], [l26], [r26],\n    [l2], [r2], [l27], [r27],\n    // And so on...\n    [l25], [r25], [l50], [r50]\n  )\n)\n```\nThanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 2214.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 476
    },
    {
      "id": 2837,
      "post_number": 2,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2024-09-28T08:38:04.498Z",
      "updated_at": "2024-09-28T08:38:04.498Z",
      "cooked": "<p>Wrapping a <code>columns(2)</code> might helps.</p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/layout/columns/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/layout/columns/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/layout/columns/\" target=\"_blank\" rel=\"noopener\">Columns Function – Typst Documentation</a></h3>\n\n  <p>Documentation for the `columns` function.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/74956fa5ba6149bef8fe8faa8e8d507b8b2524ea.png\" data-download-href=\"https://forum.typst.app/uploads/default/74956fa5ba6149bef8fe8faa8e8d507b8b2524ea\" title=\"\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/74956fa5ba6149bef8fe8faa8e8d507b8b2524ea_2_690x328.png\" alt=\"\" data-base62-sha1=\"gDlydQdqPgbsENzdEx0uwqNnAlI\" width=\"690\" height=\"328\" role=\"presentation\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/74956fa5ba6149bef8fe8faa8e8d507b8b2524ea_2_690x328.png, https://forum.typst.app/uploads/default/optimized/1X/74956fa5ba6149bef8fe8faa8e8d507b8b2524ea_2_1035x492.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/74956fa5ba6149bef8fe8faa8e8d507b8b2524ea_2_1380x656.png 2x\" data-dominant-color=\"F0F0F2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\"></span><span class=\"informations\">1551×738 132 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(height: 10em, width: 20em)\n\n\n#columns(2, align(center,\n  table(\n    align: center + horizon,\n    columns: (2fr, 3fr),\n    table.header(\"Left\", \"Right\", repeat: true),\n    [l1], [r1],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l50], [r50]\n  )\n))\n</code></pre>",
      "raw": "Wrapping a `columns(2)` might helps.\nhttps://typst.app/docs/reference/layout/columns/\n\n![|690x328](upload://gDlydQdqPgbsENzdEx0uwqNnAlI.png)\n\n```typst\n#set page(height: 10em, width: 20em)\n\n\n#columns(2, align(center,\n  table(\n    align: center + horizon,\n    columns: (2fr, 3fr),\n    table.header(\"Left\", \"Right\", repeat: true),\n    [l1], [r1],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l2], [r2],\n    [l50], [r50]\n  )\n))\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 45,
      "score": 84.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 2838,
      "post_number": 3,
      "username": "anormalperson8",
      "name": "",
      "created_at": "2024-09-28T09:49:27.161Z",
      "updated_at": "2024-09-28T09:49:41.628Z",
      "cooked": "<p>Thank you! This works to a degree, but not in the way I want it to. &gt;.&lt; When I’m including the table, I want it to be evenly split (25 rows each column if there are 50). When I set <code>gutter</code> as 0, it’s also impossible to center the whole table at the center unless its width is 100%.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#columns(\n  2,\n  gutter: 0pt,\n  align(\n    center,\n    table(\n      align: center + horizon,\n      columns: (25%, 25%),\n      table.header(\"Left\", \"Right\"),\n      [l1], [r1],\n      [l2], [r2],\n      [l3], [r3],\n      [l4], [r4],\n      [l5], [r5],\n      [l6], [r6],\n      [l7], [r7],\n      [l8], [r8],\n      [l9], [r9],\n      [l10], [r10],\n      [l11], [r11],\n      [l12], [r12],\n      [l13], [r13],\n      [l14], [r14],\n      [l15], [r15],\n      [l16], [r16],\n      [l17], [r17],\n      [l18], [r18],\n      [l19], [r19],\n      [l20], [r20],\n      [l21], [r21],\n      [l22], [r22],\n      [l23], [r23],\n      [l24], [r24],\n      [l25], [r25],\n      [l26], [r26],\n      [l27], [r27],\n      [l28], [r28],\n      [l29], [r29],\n      [l30], [r30],\n      [l31], [r31],\n      [l32], [r32],\n      [l33], [r33],\n      [l34], [r34],\n      [l35], [r35],\n      [l36], [r36],\n      [l37], [r37],\n      [l38], [r38],\n      [l39], [r39],\n      [l40], [r40]\n    )\n  )\n)\n</code></pre>\n<p>gives<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/3aa59ea8326dc407d477034d7e39133e2d4c4d9d.png\" data-download-href=\"https://forum.typst.app/uploads/default/3aa59ea8326dc407d477034d7e39133e2d4c4d9d\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/3aa59ea8326dc407d477034d7e39133e2d4c4d9d_2_284x500.png\" alt=\"image\" data-base62-sha1=\"8mOwYTVIDKy3nhudi3OX7PU8dCl\" width=\"284\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/3aa59ea8326dc407d477034d7e39133e2d4c4d9d_2_284x500.png, https://forum.typst.app/uploads/default/optimized/1X/3aa59ea8326dc407d477034d7e39133e2d4c4d9d_2_426x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/3aa59ea8326dc407d477034d7e39133e2d4c4d9d_2_568x1000.png 2x\" data-dominant-color=\"F7F7F7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">878×1542 82.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Once again, thank you for your help!</p>",
      "raw": "Thank you! This works to a degree, but not in the way I want it to. >.< When I'm including the table, I want it to be evenly split (25 rows each column if there are 50). When I set `gutter` as 0, it's also impossible to center the whole table at the center unless its width is 100%.\n\n```typ\n#columns(\n  2,\n  gutter: 0pt,\n  align(\n    center,\n    table(\n      align: center + horizon,\n      columns: (25%, 25%),\n      table.header(\"Left\", \"Right\"),\n      [l1], [r1],\n      [l2], [r2],\n      [l3], [r3],\n      [l4], [r4],\n      [l5], [r5],\n      [l6], [r6],\n      [l7], [r7],\n      [l8], [r8],\n      [l9], [r9],\n      [l10], [r10],\n      [l11], [r11],\n      [l12], [r12],\n      [l13], [r13],\n      [l14], [r14],\n      [l15], [r15],\n      [l16], [r16],\n      [l17], [r17],\n      [l18], [r18],\n      [l19], [r19],\n      [l20], [r20],\n      [l21], [r21],\n      [l22], [r22],\n      [l23], [r23],\n      [l24], [r24],\n      [l25], [r25],\n      [l26], [r26],\n      [l27], [r27],\n      [l28], [r28],\n      [l29], [r29],\n      [l30], [r30],\n      [l31], [r31],\n      [l32], [r32],\n      [l33], [r33],\n      [l34], [r34],\n      [l35], [r35],\n      [l36], [r36],\n      [l37], [r37],\n      [l38], [r38],\n      [l39], [r39],\n      [l40], [r40]\n    )\n  )\n)\n```\ngives\n![image|284x500](upload://8mOwYTVIDKy3nhudi3OX7PU8dCl.png)\n\nOnce again, thank you for your help!",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 39,
      "score": 37.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 476
    },
    {
      "id": 2840,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-28T10:06:50.908Z",
      "updated_at": "2024-09-28T10:06:50.908Z",
      "cooked": "<p>There is no automatic way to balance columns currently, but you can force the table to a specific height by wrapping the whole <code>columns</code> call into a block with a fixed height (and width of 100%). You may need to play around with the value to achieve the result you are looking for.</p>",
      "raw": "There is no automatic way to balance columns currently, but you can force the table to a specific height by wrapping the whole `columns` call into a block with a fixed height (and width of 100%). You may need to play around with the value to achieve the result you are looking for.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 36,
      "score": 32.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2841,
      "post_number": 5,
      "username": "anormalperson8",
      "name": "",
      "created_at": "2024-09-28T10:56:51.598Z",
      "updated_at": "2024-09-28T10:56:59.343Z",
      "cooked": "<p>I see… thank you. :D</p>\n<p>I’ll try to do that and see if that’s faster or if copy-pasting is.</p>",
      "raw": "I see.. thank you. :D\n\nI'll try to do that and see if that's faster or if copy-pasting is.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 13.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 476
    },
    {
      "id": 2853,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-28T12:16:49.308Z",
      "updated_at": "2024-09-28T12:16:49.308Z",
      "cooked": "<p>To get back to your original approach, I cooked up something:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let repeated-table(num-repeats: 2, ..args) = {\n  let options = args.named()\n  let data = args.pos()\n\n  // STEP 1: transform table options to apply to a multiple of the original columns\n\n  let columns = options.at(\"columns\", default: ())\n  let (column-count, columns) = if type(columns) == int {\n    // for numbers, that's number of columns\n    (columns, columns * num-repeats)\n  } else if type(columns) == array and columns != () {\n    // for arrays with elements, the number of elements is number of columns\n    (columns.len(), columns * num-repeats)\n  } else {\n    // lengths, auto or an empty array mean there's one column\n    (1, (auto,) * num-repeats)\n  }\n  options.columns = columns\n\n  // TODO transform other per-column fields, such as align\n\n  // STEP 2: separate header and footer from the table body, with repeated cells\n\n  let header = if data.len() &gt; 0 and type(data.first()) == content and data.first().func() == table.header {\n    let (children, ..args) = data.remove(0).fields()\n    table.header(..args, ..children * num-repeats)\n  }\n\n  let footer = if data.len() &gt; 0 and type(data.last()) == content and data.last().func() == table.footer {\n    let (children, ..args) = data.pop().fields()\n    table.footer(..args, ..children * num-repeats)\n  }\n\n  // STEP 3: rearrange the data, so that after a number of rows the next repetition begins\n\n  // split into rows\n  let rows = data.chunks(column-count)\n  // split into repeats of rows\n  let num-rows = calc.ceil(rows.len() / num-repeats)\n  let repeats = rows.chunks(num-rows)\n  // pad the last repeat so that all have the same number of rows\n  let empty-row = (none,) * column-count\n  repeats.last() += (empty-row,) * (num-rows - repeats.last().len())\n  // join repeats into combined rows\n  let rows = array.zip(..repeats)\n  // combine into flat data\n  data = rows.flatten()\n\n  // STEP 4: re-add header and footer to the data\n\n  if header != none {\n    data.insert(0, header)\n  }\n  if footer != none {\n    data.push(footer)\n  }\n\n  // STEP 5: produce table\n  \n  table(..options, ..data)\n}\n\n#align(center,\n  repeated-table(\n    num-repeats: 3,\n    align: center + horizon,\n    columns: (10%, 15%),\n    table.header(\"Left\", \"Right\", repeat: true),\n    ..array.range(1, 29).map(n =&gt; ([l#n], [r#n])).flatten(),\n    table.footer(\"Left\", \"Right\"),\n  )\n)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/ef604db6a63b6e61f3a60a96a086242c49b3b1ee.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/ef604db6a63b6e61f3a60a96a086242c49b3b1ee\" title=\"repeated-table\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/ef604db6a63b6e61f3a60a96a086242c49b3b1ee_2_689x259.jpeg\" alt=\"repeated-table\" data-base62-sha1=\"y9CrA7xduYys5ALxZLolsWfO5pI\" width=\"689\" height=\"259\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/ef604db6a63b6e61f3a60a96a086242c49b3b1ee_2_689x259.jpeg, https://forum.typst.app/uploads/default/optimized/1X/ef604db6a63b6e61f3a60a96a086242c49b3b1ee_2_1033x388.jpeg 1.5x, https://forum.typst.app/uploads/default/optimized/1X/ef604db6a63b6e61f3a60a96a086242c49b3b1ee_2_1378x518.jpeg 2x\" data-dominant-color=\"EDEDED\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">repeated-table</span><span class=\"informations\">2480×933 138 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>It’s inferior to eventually having balanced columns, but it works right now ;) there is a big <code>TODO</code> in the code; if you use per-column <code>align</code>, you still need to fix that, but I think the principle is clear from how <code>columns</code> is transformed for this to work, and the hard part of transforming the data is done.</p>\n<p>For nicer styling, I would recommend looking at <a href=\"https://typst.app/docs/guides/table-guide/#double-stroke\">double strokes</a> in the table guide; by using the correct column gutters, you can separate the “repeats” of the table and achieve nice double strokes at the same time.</p>",
      "raw": "To get back to your original approach, I cooked up something:\n\n```typ\n#let repeated-table(num-repeats: 2, ..args) = {\n  let options = args.named()\n  let data = args.pos()\n\n  // STEP 1: transform table options to apply to a multiple of the original columns\n\n  let columns = options.at(\"columns\", default: ())\n  let (column-count, columns) = if type(columns) == int {\n    // for numbers, that's number of columns\n    (columns, columns * num-repeats)\n  } else if type(columns) == array and columns != () {\n    // for arrays with elements, the number of elements is number of columns\n    (columns.len(), columns * num-repeats)\n  } else {\n    // lengths, auto or an empty array mean there's one column\n    (1, (auto,) * num-repeats)\n  }\n  options.columns = columns\n\n  // TODO transform other per-column fields, such as align\n\n  // STEP 2: separate header and footer from the table body, with repeated cells\n\n  let header = if data.len() > 0 and type(data.first()) == content and data.first().func() == table.header {\n    let (children, ..args) = data.remove(0).fields()\n    table.header(..args, ..children * num-repeats)\n  }\n\n  let footer = if data.len() > 0 and type(data.last()) == content and data.last().func() == table.footer {\n    let (children, ..args) = data.pop().fields()\n    table.footer(..args, ..children * num-repeats)\n  }\n\n  // STEP 3: rearrange the data, so that after a number of rows the next repetition begins\n\n  // split into rows\n  let rows = data.chunks(column-count)\n  // split into repeats of rows\n  let num-rows = calc.ceil(rows.len() / num-repeats)\n  let repeats = rows.chunks(num-rows)\n  // pad the last repeat so that all have the same number of rows\n  let empty-row = (none,) * column-count\n  repeats.last() += (empty-row,) * (num-rows - repeats.last().len())\n  // join repeats into combined rows\n  let rows = array.zip(..repeats)\n  // combine into flat data\n  data = rows.flatten()\n\n  // STEP 4: re-add header and footer to the data\n\n  if header != none {\n    data.insert(0, header)\n  }\n  if footer != none {\n    data.push(footer)\n  }\n\n  // STEP 5: produce table\n  \n  table(..options, ..data)\n}\n\n#align(center,\n  repeated-table(\n    num-repeats: 3,\n    align: center + horizon,\n    columns: (10%, 15%),\n    table.header(\"Left\", \"Right\", repeat: true),\n    ..array.range(1, 29).map(n => ([l#n], [r#n])).flatten(),\n    table.footer(\"Left\", \"Right\"),\n  )\n)\n```\n![repeated-table|689x259, 100%](upload://y9CrA7xduYys5ALxZLolsWfO5pI.jpeg)\n\nIt's inferior to eventually having balanced columns, but it works right now ;) there is a big `TODO` in the code; if you use per-column `align`, you still need to fix that, but I think the principle is clear from how `columns` is transformed for this to work, and the hard part of transforming the data is done.\n\nFor nicer styling, I would recommend looking at [double strokes](https://typst.app/docs/guides/table-guide/#double-stroke) in the table guide; by using the correct column gutters, you can separate the \"repeats\" of the table and achieve nice double strokes at the same time.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 40,
      "score": 123.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2860,
      "post_number": 7,
      "username": "anormalperson8",
      "name": "",
      "created_at": "2024-09-28T15:13:09.245Z",
      "updated_at": "2024-09-28T15:13:09.245Z",
      "cooked": "<p>That is amazing, thank you very much!</p>",
      "raw": "That is amazing, thank you very much!",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 6.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 476
    }
  ],
  "scraped_at": "2025-06-10T09:57:53.904134"
}
{
  "topic_metadata": {
    "id": 769,
    "title": "How to include notes in the bibliography?",
    "slug": "how-to-include-notes-in-the-bibliography",
    "posts_count": 3,
    "created_at": "2024-09-28T11:46:49.725Z",
    "last_posted_at": "2024-09-28T12:31:50.329Z",
    "views": 555,
    "like_count": 4,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Eric",
    "tags": [
      "scripting",
      "literature"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 424
  },
  "posts": [
    {
      "id": 2850,
      "post_number": 1,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-28T11:46:49.837Z",
      "updated_at": "2025-02-05T15:13:46.859Z",
      "cooked": "<p>In Latex I heavily used <code>note: {...}</code> to create bib entries that comply with my supervisor’s  specifications.</p>\n<p>Here a couple of examples:</p>\n<pre><code class=\"lang-auto\">@book{iso27000,\n    author    = \"International Organization for Standardization (ISO)\",\n    title     = \"ISO/IEC 27000:2018: Information technology - Security techniques - Information security management systems - Overview and vocabulary\",\n    publisher = \"International Organization for Standardization (ISO)\",\n    year      = \"2018\",\n    note      = \"ICS: 01.040.35; 35.030\"\n}\n\n@article{isms_future,\n    author      = \"Edward Humphreys\",\n    title       = \"The Future Landscape of ISMS Standards\",\n    journal     = \"Datenschutz und Datensicherheit - DuD\",\n    year        = \"2018\",\n    note        = \"Bd. 42, DOI: 10.1007/s11623-018-0971-8\"\n}\n\n@book{isms_scope,\n    author    = \"Edward Humphreys\",\n    title     = \"Implementing the ISO/IEC 27001 ISMS Standard\",\n    publisher = \"Artech House\",\n    year      = \"2016\",\n    note      = \"ISBN: 978-1-60807-930-8\"\n}\n\n@book{bsig,\n    author    = \"Bundesrepublik Deutschland\",\n    title     = \"Gesetz über das Bundesamt für Sicherheit in der Informationstechnik (BSI-Gesetz - BSIG)\",\n    publisher = \"Bundesanzeiger Verlag\",\n    year      = \"2009\",\n    note      = \"Stand: 23.06.2021\"\n}\n\n@book{befragung_lf,\n    author    = \"Sebastian Arning and Benedikt Küttel\",\n    title     = \"Leitfaden für die Planung, Durchführung und Auswertung einer standardisierten Befragung\",\n    publisher = \"Landkreis Uelzen\",\n    year      = \"2017\",\n    note      = {[Online]. Verfügbar: \\url{https://www.transferagentur-niedersachsen.de/fileadmin/user_upload/Leitfaden_fuer_die_Planung__Durchfuehrung_und_Auswertung_einer_standardisierten_Befragung__Sebastian_Arning_und_Benedikt_Kuettel_.pdf}. Zugriff: 15.08.2024}\n}\n</code></pre>\n<p>Unfortunately those notes aren’t shown in the bibliography (IEEE citation style if that matters). How can I include them?</p>",
      "raw": "In Latex I heavily used ```note: {...}``` to create bib entries that comply with my supervisor's  specifications.\n\nHere a couple of examples:\n```\n@book{iso27000,\n    author    = \"International Organization for Standardization (ISO)\",\n    title     = \"ISO/IEC 27000:2018: Information technology - Security techniques - Information security management systems - Overview and vocabulary\",\n    publisher = \"International Organization for Standardization (ISO)\",\n    year      = \"2018\",\n    note      = \"ICS: 01.040.35; 35.030\"\n}\n\n@article{isms_future,\n    author      = \"Edward Humphreys\",\n    title       = \"The Future Landscape of ISMS Standards\",\n    journal     = \"Datenschutz und Datensicherheit - DuD\",\n    year        = \"2018\",\n    note        = \"Bd. 42, DOI: 10.1007/s11623-018-0971-8\"\n}\n\n@book{isms_scope,\n    author    = \"Edward Humphreys\",\n    title     = \"Implementing the ISO/IEC 27001 ISMS Standard\",\n    publisher = \"Artech House\",\n    year      = \"2016\",\n    note      = \"ISBN: 978-1-60807-930-8\"\n}\n\n@book{bsig,\n    author    = \"Bundesrepublik Deutschland\",\n    title     = \"Gesetz über das Bundesamt für Sicherheit in der Informationstechnik (BSI-Gesetz - BSIG)\",\n    publisher = \"Bundesanzeiger Verlag\",\n    year      = \"2009\",\n    note      = \"Stand: 23.06.2021\"\n}\n\n@book{befragung_lf,\n    author    = \"Sebastian Arning and Benedikt Küttel\",\n    title     = \"Leitfaden für die Planung, Durchführung und Auswertung einer standardisierten Befragung\",\n    publisher = \"Landkreis Uelzen\",\n    year      = \"2017\",\n    note      = {[Online]. Verfügbar: \\url{https://www.transferagentur-niedersachsen.de/fileadmin/user_upload/Leitfaden_fuer_die_Planung__Durchfuehrung_und_Auswertung_einer_standardisierten_Befragung__Sebastian_Arning_und_Benedikt_Kuettel_.pdf}. Zugriff: 15.08.2024}\n}\n```\n\nUnfortunately those notes aren't shown in the bibliography (IEEE citation style if that matters). How can I include them?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 55,
      "score": 2566.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2851,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-28T11:58:12.119Z",
      "updated_at": "2024-09-28T11:58:12.119Z",
      "cooked": "<p>I don’t know how exactly bibliography libraries talk to each other in Typst, but I think the reason is that <code>note</code> (and some other) field is currently ignored:</p>\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/hayagriva/issues/162\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/hayagriva/issues/162\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/typst/hayagriva</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/hayagriva/issues/162\" target=\"_blank\" rel=\"noopener nofollow ugc\">BibLaTeX note field not mapped to CSL note variable correctly</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-04-17\" data-time=\"19:08:23\" data-timezone=\"UTC\">07:08PM - 17 Apr 24 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/AbhijeetKrishnan\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n          <img alt=\"AbhijeetKrishnan\" src=\"https://forum.typst.app/uploads/default/original/1X/16e89b115a646bd8d7551028878a16e9f17085d9.jpeg\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"B14381\">\n          AbhijeetKrishnan\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          bug\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">### Description\n\nI'm trying to use a custom CSL file to display a bibliography<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\"> in Typst. However, it seems the `note` variable in CSL is not correctly populated with the `note` field of a Biblatex entry.\n\nA reproduction URL has been shared to demonstrate a MWE that exhibits this issue. The `main.typ` simply creates a bibliography with the `mwp.bib` Biblatex file and `ieee.cls` CSL file. The Biblatex file contains just one entry with a `note` field (and other dummy entries). The IEEE CSL file is sourced from [here](https://github.com/citation-style-language/styles/blob/master/ieee.csl), and contains a commented modification on lines 359 and 360, demonstrating that the `title` variable is displayed, but the `note` variable isn't.\n\nEdit: updated the project link\n\n### Reproduction URL\n\nhttps://typst.app/project/rjXQrnuitjqc0tdVdyL7qK\n\n### Operating system\n\nWeb app\n\n### Typst version\n\n- [X] I am using the latest version of Typst</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/hayagriva/issues/182\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/hayagriva/issues/182\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/typst/hayagriva</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/hayagriva/issues/182\" target=\"_blank\" rel=\"noopener nofollow ugc\">The `note` field is omitted when converting BibTeX to Hayagriva </a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-07-01\" data-time=\"19:33:57\" data-timezone=\"UTC\">07:33PM - 01 Jul 24 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/tomas-vl\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n          <img alt=\"tomas-vl\" src=\"https://forum.typst.app/uploads/default/original/1X/7320d53e379d044d555ce12312669c9e0d958715.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"848278\">\n          tomas-vl\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">Input `t.bib`:\n```\n@book{test_1,\n    note = {This is a test!}\n}\n```\nExpect<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\">ed output:\n```\ntest_1:\n  type: book\n  note: \"This is a test!\"\n```\nReal output:\n```\ntest_1:\n  type: book\n\n```\nI've notices that when converting a BibTeX file into a Hayagriva file, the `note` field is omitted. (I ran the command `hayagriva t.bib` using Hayagriva v0.5.3. This bug is also carried into Typst: CSL styles which use the `note` field cannot use it when the user is working with a BibTeX file directly.)</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/hayagriva/issues/167\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/hayagriva/issues/167\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/typst/hayagriva</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/hayagriva/issues/167\" target=\"_blank\" rel=\"noopener nofollow ugc\">`note` field has no effect</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-05-16\" data-time=\"10:26:38\" data-timezone=\"UTC\">10:26AM - 16 May 24 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/lukasjuhrich\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n          <img alt=\"lukasjuhrich\" src=\"https://forum.typst.app/uploads/default/original/1X/b0de2e9ae5d02c98bb4c96b5dbc6092d1951bc05.jpeg\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"34513C\">\n          lukasjuhrich\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">## [Repro](https://typst.app/project/rxIcN21BqJwsr3F4PiNTJ1):\n```yml\nkazda-moo<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\">re:\n  type: manuscript\n  title: The Minion Homomorphism Lattice\n  author:\n    - \"Kazda, Alexandr\"\n    - \"Moore, Matthew\"\n  date: 2019\n  note: \"unpublished draft\"\n```\n```typst\n#set page(width: auto, height: auto, margin: 1em)\nSee @kazda-moore.\n\n#cite(&lt;kazda-moore&gt;, form: \"full\")\n\n#bibliography(\"bib.yml\")\n```\nRenders:\n![image](https://github.com/typst/hayagriva/assets/10060406/e48a3665-1229-4bfd-9ce2-1617088de1c5)\n\n\n## expected\nTo have the `note` show up\n\n## Remarks\nThis is related to #91, but seems orthogonal, because in that issue the problem was that the `bibtex` note field did not even make it to the hayagriva representation. Here, i'm giving it directly via `yml`, and it still does not show up.</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>A workaround is to <a href=\"https://github.com/typst/hayagriva/issues/162#issuecomment-2114713402\" rel=\"noopener nofollow ugc\">use another field</a> until the needed is supported.</p>",
      "raw": "I don't know how exactly bibliography libraries talk to each other in Typst, but I think the reason is that `note` (and some other) field is currently ignored:\n\nhttps://github.com/typst/hayagriva/issues/162\n\nhttps://github.com/typst/hayagriva/issues/182\n\nhttps://github.com/typst/hayagriva/issues/167\n\nA workaround is to [use another field](https://github.com/typst/hayagriva/issues/162#issuecomment-2114713402) until the needed is supported.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 53,
      "score": 130.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2855,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-28T12:31:50.329Z",
      "updated_at": "2024-09-28T12:48:30.721Z",
      "cooked": "<p>I want to mention that in some of your example cases, you don’t necessarily need the <code>note</code> field at all, as other more specific fields exist:</p>\n<ul>\n<li>\n<p>Volume and DOI keys:</p>\n<pre data-code-wrap=\"txt\"><code class=\"lang-txt\">note = \"Bd. 42, DOI: 10.1007/s11623-018-0971-8\"\n-&gt; volume = \"42\", doi = \"10.1007/s11623-018-0971-8\"\n</code></pre>\n</li>\n<li>\n<p>ISBN key (unfortunately not used in the default IEEE citation style)</p>\n<pre data-code-wrap=\"txt\"><code class=\"lang-txt\">note = \"ISBN: 978-1-60807-930-8\"\n-&gt; isbn = \"978-1-60807-930-8\"\n</code></pre>\n</li>\n<li>\n<p>URL and access date keys:</p>\n<pre data-code-wrap=\"txt\"><code class=\"lang-txt\">note = {[Online]. Verfügbar: \\url{...}. Zugriff: 15.08.2024}\n-&gt; url = \"https://...\", urldate = \"2024-08-15\"\n</code></pre>\n</li>\n</ul>\n<p>Of course, this doesn’t handle all your cases, but it’s at least something.</p>\n<p>Also, the default citation style (IEEE) doesn’t handle notes and annotations at all, so you would need to either chose a different style that does, or edit the CSL file manually to add support for those fields.</p>",
      "raw": "I want to mention that in some of your example cases, you don't necessarily need the `note` field at all, as other more specific fields exist:\n\n- Volume and DOI keys:\n  ```txt\n  note = \"Bd. 42, DOI: 10.1007/s11623-018-0971-8\"\n  -> volume = \"42\", doi = \"10.1007/s11623-018-0971-8\"\n  ```\n\n- ISBN key (unfortunately not used in the default IEEE citation style)\n  ```txt\n  note = \"ISBN: 978-1-60807-930-8\"\n  -> isbn = \"978-1-60807-930-8\"\n  ```\n\n- URL and access date keys:\n  ```txt\n  note = {[Online]. Verfügbar: \\url{...}. Zugriff: 15.08.2024}\n  -> url = \"https://...\", urldate = \"2024-08-15\"\n  ```\n\nOf course, this doesn't handle all your cases, but it's at least something.\n\nAlso, the default citation style (IEEE) doesn't handle notes and annotations at all, so you would need to either chose a different style that does, or edit the CSL file manually to add support for those fields.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 47,
      "score": 279.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:57:53.134633"
}
{
  "topic_metadata": {
    "id": 775,
    "title": "How to create invisible label?",
    "slug": "how-to-create-invisible-label",
    "posts_count": 9,
    "created_at": "2024-09-28T17:02:56.703Z",
    "last_posted_at": "2024-09-29T18:17:21.519Z",
    "views": 259,
    "like_count": 5,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Andrew",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 625
  },
  "posts": [
    {
      "id": 2878,
      "post_number": 1,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-28T17:02:56.851Z",
      "updated_at": "2024-09-28T17:02:56.851Z",
      "cooked": "<p>I want to return a label from a function that doesn’t affect the page layout. I can’t just return the label directly since this causes a <code>cannot join content with label</code> error. How can I do this?</p>",
      "raw": "I want to return a label from a function that doesn't affect the page layout. I can't just return the label directly since this causes a `cannot join content with label` error. How can I do this?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 948.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 433
    },
    {
      "id": 2880,
      "post_number": 2,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-28T17:07:07.733Z",
      "updated_at": "2024-09-28T17:07:07.733Z",
      "cooked": "<p>A solution I found is to attach the label to a metadata block.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">[\n  #metadata(\"anything can go here\")\n  #label(identifier)\n]\n</code></pre>\n<p>The label is able to be linked to, and metadata doesn’t affect the layout at all.</p>",
      "raw": "A solution I found is to attach the label to a metadata block.\n\n```typ\n[\n  #metadata(\"anything can go here\")\n  #label(identifier)\n]\n```\n\nThe label is able to be linked to, and metadata doesn't affect the layout at all.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 18.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 433
    },
    {
      "id": 2881,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-28T17:09:20.509Z",
      "updated_at": "2024-09-29T00:39:37.524Z",
      "cooked": "<p>Your intentions are not clear and without a <a href=\"https://forum.typst.app/t/image-sizes-parent-container-wrongly/464/2\">MRE</a> I don’t know how you got that error.</p>\n<p>This code doesn’t give any error and it returns a label from a function:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// #let function() = &lt;a&gt;\n#let function() = {\n  return &lt;a&gt;\n}\n\n#lorem(20)\n\nReturn label: #repr(function()) #function()\n\n#lorem(20)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/065d4e68969bf48f184c32f57600b2bf4da32ad3.png\" alt=\"image\" data-base62-sha1=\"UiLTVhJoNi7geohCWe228jdWM3\" width=\"571\" height=\"118\"></p>",
      "raw": "Your intentions are not clear and without a [MRE](https://forum.typst.app/t/image-sizes-parent-container-wrongly/464/2) I don't know how you got that error.\n\nThis code doesn't give any error and it returns a label from a function:\n\n```typ\n// #let function() = <a>\n#let function() = {\n  return <a>\n}\n\n#lorem(20)\n\nReturn label: #repr(function()) #function()\n\n#lorem(20)\n```\n\n![image|571x118](upload://UiLTVhJoNi7geohCWe228jdWM3.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 41,
      "score": 58.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2882,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-28T17:12:26.470Z",
      "updated_at": "2024-09-28T17:12:26.470Z",
      "cooked": "<p>The <a href=\"https://typst.app/docs/reference/foundations/label/\">label</a> attachment is briefly explained <a href=\"https://forum.typst.app/t/how-to-make-a-custom-referenceable-lecture-element-and-include-its-date-in-the-outline/591/9\">here</a>. But this is indeed how you attach a custom-named label to a metadata element. For hard-coded label name, you can use <code>&lt;identifier&gt;</code> instead.</p>",
      "raw": "The [label](https://typst.app/docs/reference/foundations/label/) attachment is briefly explained [here](https://forum.typst.app/t/how-to-make-a-custom-referenceable-lecture-element-and-include-its-date-in-the-outline/591/9). But this is indeed how you attach a custom-named label to a metadata element. For hard-coded label name, you can use `<identifier>` instead.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 39,
      "score": 37.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2883,
      "post_number": 5,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-28T17:25:35.879Z",
      "updated_at": "2024-09-29T20:48:08.398Z",
      "cooked": "<p>Making an MRE probably would have lead me to the actual issue I was facing.</p>\n<p>I have a function that updates a shared state and returns a label. The output of update must return content, which is attempted to be concatenated with the label. Here’s an MRE for that behavior.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let s = state(\"test\", 0)\n#let fun(id) = {\n  s.update(cs =&gt; {\n    cs += 1\n  })\n  label(id)\n}\n\n#fun(\"test\")\n#link(label(\"test\"))[link]\n</code></pre>\n<p>Outputs <code>error: cannot join content with label</code>.</p>\n<p>To fix this, I just have to explicitly return the label.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let s = state(\"test\", 0)\n#let fun(id) = {\n  s.update(cs =&gt; {\n    cs += 1\n  })\n  return label(id)\n}\n\n#fun(\"test\")\n#link(label(\"test\"))[link]\n</code></pre>\n<p>Looks like I’ll just have to adjust from Rust’s implicit return convention. Thanks for your help!</p>",
      "raw": "Making an MRE probably would have lead me to the actual issue I was facing.\n\nI have a function that updates a shared state and returns a label. The output of update must return content, which is attempted to be concatenated with the label. Here's an MRE for that behavior.\n\n```typ\n#let s = state(\"test\", 0)\n#let fun(id) = {\n  s.update(cs => {\n    cs += 1\n  })\n  label(id)\n}\n\n#fun(\"test\")\n#link(label(\"test\"))[link]\n```\n\nOutputs `error: cannot join content with label`.\n\nTo fix this, I just have to explicitly return the label.\n\n```typ\n#let s = state(\"test\", 0)\n#let fun(id) = {\n  s.update(cs => {\n    cs += 1\n  })\n  return label(id)\n}\n\n#fun(\"test\")\n#link(label(\"test\"))[link]\n```\n\nLooks like I'll just have to adjust from Rust's implicit return convention. Thanks for your help!",
      "reply_to_post_number": 4,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 32.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 433
    },
    {
      "id": 2885,
      "post_number": 6,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-28T17:36:18.501Z",
      "updated_at": "2024-09-28T17:39:10.541Z",
      "cooked": "<p>You have to be careful here. With the code you have now, the state isn’t actually updated, as the state update is not returned from the function and thus not placed anywhere in the document.</p>\n<p>What you instead want to do, is attach the label to the state update. However, you can only attach labels to elements when you’re in markup mode, not in code mode, so something like this should do the trick:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let fun(id) = [\n  #s.update(cs =&gt; cs + 1)\n  #label(id)\n]\n</code></pre>",
      "raw": "You have to be careful here. With the code you have now, the state isn't actually updated, as the state update is not returned from the function and thus not placed anywhere in the document.\n\nWhat you instead want to do, is attach the label to the state update. However, you can only attach labels to elements when you're in markup mode, not in code mode, so something like this should do the trick:\n\n```typ\n#let fun(id) = [\n  #s.update(cs => cs + 1)\n  #label(id)\n]\n```",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 61.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 2886,
      "post_number": 7,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-28T17:43:36.115Z",
      "updated_at": "2024-09-28T17:43:36.115Z",
      "cooked": "<p>Ah, so update returns content that’s used to determine the value of the state at a given point in the document? That explains a lot. Thanks!</p>",
      "raw": "Ah, so update returns content that's used to determine the value of the state at a given point in the document? That explains a lot. Thanks!",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 31.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 433
    },
    {
      "id": 2905,
      "post_number": 8,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-29T00:57:34.459Z",
      "updated_at": "2024-09-29T00:57:34.459Z",
      "cooked": "<p>In addition to what <a class=\"mention\" href=\"/u/eric\">@Eric</a> said, I want to point out the use of <a href=\"https://typst.app/docs/reference/introspection/state/\"><code>state</code></a>. From your example, it is apparent that you are just counting natural numbers, therefore you should use <a href=\"https://typst.app/docs/reference/introspection/counter/\"><code>counter</code></a> instead. Also, the <code>.update()</code> method, if the function is passed, expects a new value, but you provided <code>none</code>. For <code>state</code> this will therefore set the new value to <code>none</code>, for <code>counter</code> this will give an error.</p>\n<p>Here is what you should use instead:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let c = counter(\"test\")\n#let fun(id) = [#c.step()#label(id)]\n#fun(\"test\")\n#pagebreak()\n#link(label(\"test\"))[link]\n#context c.get().first()\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/fe0553850111c69b0e1737bb2294142df4fd71fc.png\" alt=\"image\" data-base62-sha1=\"AfaGIeTA7eGnV3M6nXo0YWwtKCU\" width=\"56\" height=\"38\"></p>\n<p>Although this still looks <em>somewhat</em> strange to do without additional context/information.</p>",
      "raw": "In addition to what @Eric said, I want to point out the use of [`state`](https://typst.app/docs/reference/introspection/state/). From your example, it is apparent that you are just counting natural numbers, therefore you should use [`counter`](https://typst.app/docs/reference/introspection/counter/) instead. Also, the `.update()` method, if the function is passed, expects a new value, but you provided `none`. For `state` this will therefore set the new value to `none`, for `counter` this will give an error.\n\nHere is what you should use instead:\n\n```typ\n#let c = counter(\"test\")\n#let fun(id) = [#c.step()#label(id)]\n#fun(\"test\")\n#pagebreak()\n#link(label(\"test\"))[link]\n#context c.get().first()\n```\n\n![image|56x38](upload://AfaGIeTA7eGnV3M6nXo0YWwtKCU.png)\n\nAlthough this still looks _somewhat_ strange to do without additional context/information.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 51.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2947,
      "post_number": 9,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-29T18:17:21.519Z",
      "updated_at": "2024-09-29T18:17:21.519Z",
      "cooked": "<p>I appreciate the pointer to using counter, that simplifies some syntax. This was just a toy example, though. In truth, I was working on using a function and state to build a dictionary that contains config information about every single file I’m including.</p>",
      "raw": "I appreciate the pointer to using counter, that simplifies some syntax. This was just a toy example, though. In truth, I was working on using a function and state to build a dictionary that contains config information about every single file I'm including.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 433
    }
  ],
  "scraped_at": "2025-06-10T09:57:52.424172"
}
{
  "topic_metadata": {
    "id": 778,
    "title": "Can I attach and update state in metadata?",
    "slug": "can-i-attach-and-update-state-in-metadata",
    "posts_count": 6,
    "created_at": "2024-09-28T17:52:51.790Z",
    "last_posted_at": "2024-09-29T13:13:03.145Z",
    "views": 201,
    "like_count": 5,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "scripting",
      "state",
      "metadata"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 771
  },
  "posts": [
    {
      "id": 2887,
      "post_number": 1,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-28T17:52:51.938Z",
      "updated_at": "2024-09-28T17:52:51.938Z",
      "cooked": "<p>I have some global state that I want to be able to query. Multiple files contribute their data to this state, and each file gets its own label. So, it would be natural to put all the files’ state into their own metadata blocks, query them by label, and update them when needed.</p>\n<p>I tried the following, but the state isn’t updated.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#metadata(state(\"test\", 0)) &lt;test&gt;\n#context query(&lt;test&gt;).first().value.update(cs =&gt; {\n  cs += 1\n})\n#context query(&lt;test&gt;)\n</code></pre>\n<p>Outputs: <code>(metadata(value: state(\"test\", 0)),)</code>.</p>",
      "raw": "I have some global state that I want to be able to query. Multiple files contribute their data to this state, and each file gets its own label. So, it would be natural to put all the files' state into their own metadata blocks, query them by label, and update them when needed.\n\nI tried the following, but the state isn't updated.\n\n```typ\n#metadata(state(\"test\", 0)) <test>\n#context query(<test>).first().value.update(cs => {\n  cs += 1\n})\n#context query(<test>)\n```\n\nOutputs: `(metadata(value: state(\"test\", 0)),)`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 581.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 433
    },
    {
      "id": 2888,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-28T18:16:29.647Z",
      "updated_at": "2024-09-28T18:58:45.919Z",
      "cooked": "<p>Careful, there are a few things in your post that make me think you have the wrong mental model.</p>\n<p>first, the <code>update()</code> method. This works by returning a <em>new</em> value <em>based on</em> the previous one. However, you try to <em>modify</em> the parameter:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// BAD\n#state(\"test\", 0).update(cs =&gt; {\n  // this statement has no result, only a side effect\n  // its result is thus implicitly none\n  cs += 1\n  // the block ends here, returning the last expression's value\n  // instead of incrementing, the state is now none\n})\n\n// GOOD\n#state(\"test\", 0).update(cs =&gt; {\n  cs + 1\n  // the block ends here, returning 1\n})\n</code></pre>\n<p>second, you’re not actually retrieving the state’s current value:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// BAD: you're just looking up the metadata\n#context query(&lt;test&gt;)\n// gives (metadata(value: state(\"test\", 0)),)\n\n// BETTER: extracting the state out of the metadata\n#context query(&lt;test&gt;).first().value\n// gives state(\"test\", 0)\n\n// GOOD\n#context query(&lt;test&gt;).first().value.get()\n// gives the actual state value\n</code></pre>\n<p>the state itself is not modified by an update, thus the “BETTER” code always has a 0 inside: that’s how the state was set up. Only with <code>get()</code> do you extract the value.</p>\n<p>Finally, both states and labels have globally unique names, so putting state inside labelled metadata doesn’t bring much benefit. Also, state is <em>only</em> identified by the name:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#metadata(state(\"test\", 0)) &lt;test&gt;\n#metadata(state(\"test\", 0)) &lt;test2&gt;\n#context query(&lt;test&gt;).first().value.update(cs =&gt; cs + 1)\n\n#context query(&lt;test2&gt;).first().value.get()\n// prints 1, because the \"test\" state was updated\n</code></pre>\n<p>Thus, I’d recommend to just replace labels with state names, that makes more sense.</p>\n<p>One final note on something peculiar – consider this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#metadata(state(\"test\", 0)) &lt;test&gt;\n#metadata(state(\"test\", 1)) &lt;test2&gt;\n#context query(&lt;test&gt;).first().value.update(cs =&gt; cs + 1)\n\n#context query(&lt;test2&gt;).first().value.get()\n// prints 2, because the \"test\" state was updated from its initial value of 1\n</code></pre>\n<p>state updates affect all state “objects” of the same name, but the initial value of the <em>specific</em> object matters! It’s therefore not recommended to create multiple different states. My recommendation is to put each state in a variable and import that variable.</p>",
      "raw": "Careful, there are a few things in your post that make me think you have the wrong mental model.\n\nfirst, the `update()` method. This works by returning a _new_ value _based on_ the previous one. However, you try to _modify_ the parameter:\n\n```typ\n// BAD\n#state(\"test\", 0).update(cs => {\n  // this statement has no result, only a side effect\n  // its result is thus implicitly none\n  cs += 1\n  // the block ends here, returning the last expression's value\n  // instead of incrementing, the state is now none\n})\n\n// GOOD\n#state(\"test\", 0).update(cs => {\n  cs + 1\n  // the block ends here, returning 1\n})\n```\n\nsecond, you're not actually retrieving the state's current value:\n\n```typ\n// BAD: you're just looking up the metadata\n#context query(<test>)\n// gives (metadata(value: state(\"test\", 0)),)\n\n// BETTER: extracting the state out of the metadata\n#context query(<test>).first().value\n// gives state(\"test\", 0)\n\n// GOOD\n#context query(<test>).first().value.get()\n// gives the actual state value\n```\n\nthe state itself is not modified by an update, thus the \"BETTER\" code always has a 0 inside: that's how the state was set up. Only with `get()` do you extract the value.\n\nFinally, both states and labels have globally unique names, so putting state inside labelled metadata doesn't bring much benefit. Also, state is _only_ identified by the name:\n\n```typ\n#metadata(state(\"test\", 0)) <test>\n#metadata(state(\"test\", 0)) <test2>\n#context query(<test>).first().value.update(cs => cs + 1)\n\n#context query(<test2>).first().value.get()\n// prints 1, because the \"test\" state was updated\n```\n\nThus, I'd recommend to just replace labels with state names, that makes more sense.\n\nOne final note on something peculiar -- consider this:\n\n```typ\n#metadata(state(\"test\", 0)) <test>\n#metadata(state(\"test\", 1)) <test2>\n#context query(<test>).first().value.update(cs => cs + 1)\n\n#context query(<test2>).first().value.get()\n// prints 2, because the \"test\" state was updated from its initial value of 1\n```\n\nstate updates affect all state \"objects\" of the same name, but the initial value of the _specific_ object matters! It's therefore not recommended to create multiple different states. My recommendation is to put each state in a variable and import that variable.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 34,
      "score": 141.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2890,
      "post_number": 3,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-28T18:59:01.742Z",
      "updated_at": "2024-09-28T18:59:24.458Z",
      "cooked": "<p>Thanks for taking the time to explain all the little details.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#state(\"test\", 0).update(cs =&gt; cs += 1)\n// Wouldn't even make sense, because if we don't use a function we would do, for example:\n#state(\"test\", 0).update(1)\n</code></pre>\n<p>Is the following description of states accurate? States themselves never change, but instead we put down markers (which live in the content) that are used to compute what the value of state at a given position should be. The markers that we put down only have the name of the state and the desired operation. When we call state.get(), we’re taking that state’s initial value, applying all the markers that match its name that we’ve seen thus far, and giving the result.</p>\n<p>I have a related question, then, about another function of metadata. Since the contained state itself isn’t updated, is there a way to query the final value of a state from the CLI?</p>",
      "raw": "Thanks for taking the time to explain all the little details. \n\n```typ\n#state(\"test\", 0).update(cs => cs += 1)\n// Wouldn't even make sense, because if we don't use a function we would do, for example:\n#state(\"test\", 0).update(1)\n```\n\nIs the following description of states accurate? States themselves never change, but instead we put down markers (which live in the content) that are used to compute what the value of state at a given position should be. The markers that we put down only have the name of the state and the desired operation. When we call state.get(), we're taking that state's initial value, applying all the markers that match its name that we've seen thus far, and giving the result.\n\nI have a related question, then, about another function of metadata. Since the contained state itself isn't updated, is there a way to query the final value of a state from the CLI?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 24,
      "score": 94.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 433
    },
    {
      "id": 2891,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-28T19:02:49.509Z",
      "updated_at": "2024-09-28T19:02:49.509Z",
      "cooked": "<p>Your description is spot-on! the <code>state</code> itself is immutable, and <code>get()</code> collects all <code>update()</code> contents up to that point.</p>\n<aside class=\"quote no-group\" data-username=\"gabe\" data-post=\"3\" data-topic=\"778\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/gabe/48/620_2.png\" class=\"avatar\"> gabe:</div>\n<blockquote>\n<p>I have a related question, then, about another function of metadata. Since the contained state itself isn’t updated, is there a way to query the final value of a state from the CLI?</p>\n</blockquote>\n</aside>\n<p>I think this would make a decent question on its own that could help people in the future, would you mind opening a new question with a fitting title for it?</p>",
      "raw": "Your description is spot-on! the `state` itself is immutable, and `get()` collects all `update()` contents up to that point.\n\n[quote=\"gabe, post:3, topic:778\"]\nI have a related question, then, about another function of metadata. Since the contained state itself isn’t updated, is there a way to query the final value of a state from the CLI?\n[/quote]\n\nI think this would make a decent question on its own that could help people in the future, would you mind opening a new question with a fitting title for it?",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 24,
      "score": 34.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2893,
      "post_number": 5,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-28T19:08:47.441Z",
      "updated_at": "2024-09-28T19:08:47.441Z",
      "cooked": "<p>Great, thank you! I’ll go ahead and open a new question.</p>",
      "raw": "Great, thank you! I'll go ahead and open a new question.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 433
    },
    {
      "id": 2942,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-29T13:13:03.145Z",
      "updated_at": "2024-09-29T13:13:03.145Z",
      "cooked": "<p>I will link <a href=\"https://forum.typst.app/t/how-to-create-invisible-label/775/8\" class=\"inline-onebox\">How to create invisible label? - #8 by Andrew</a> to again mention that <code>cs =+ 1</code> will return <code>none</code> and that for integer number counting using <code>counter</code> over <code>state</code> is the preferred way. And subsequently, all counters are initialized with <code>0</code> value, and therefore you don’t need to explicitly set it in any way.</p>",
      "raw": "I will link https://forum.typst.app/t/how-to-create-invisible-label/775/8 to again mention that `cs =+ 1` will return `none` and that for integer number counting using `counter` over `state` is the preferred way. And subsequently, all counters are initialized with `0` value, and therefore you don't need to explicitly set it in any way.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 29.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:51.634512"
}
{
  "topic_metadata": {
    "id": 780,
    "title": "Can I redefine a function in a package?",
    "slug": "can-i-redefine-a-function-in-a-package",
    "posts_count": 8,
    "created_at": "2024-09-28T19:05:52.960Z",
    "last_posted_at": "2024-09-29T19:40:11.362Z",
    "views": 337,
    "like_count": 3,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Tiggax",
    "tags": [
      "scripting",
      "packages"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 362
  },
  "posts": [
    {
      "id": 2892,
      "post_number": 1,
      "username": "darsnack",
      "name": "Kyle",
      "created_at": "2024-09-28T19:05:53.107Z",
      "updated_at": "2024-09-28T22:07:11.553Z",
      "cooked": "<p>Is it possible to redefine a function within a package? I want to use the package, but this one function does not fit my needs.</p>",
      "raw": "Is it possible to redefine a function within a package? I want to use the package, but this one function does not fit my needs.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 45,
      "score": 1429.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 81
    },
    {
      "id": 2894,
      "post_number": 2,
      "username": "Tiggax",
      "name": "",
      "created_at": "2024-09-28T19:23:31.213Z",
      "updated_at": "2024-09-28T19:23:31.213Z",
      "cooked": "<p>You can rename  a specific function of a package in the import.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"foo.typ\": bar as baz\n#baz()\n</code></pre>",
      "raw": "You can rename  a specific function of a package in the import.\n```typst\n#import \"foo.typ\": bar as baz\n#baz()\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 13.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 71
    },
    {
      "id": 2897,
      "post_number": 3,
      "username": "darsnack",
      "name": "Kyle",
      "created_at": "2024-09-28T20:04:26.927Z",
      "updated_at": "2024-09-28T20:04:26.927Z",
      "cooked": "<p>In this case, I am not directly calling the function. The package is calling the function internally.</p>",
      "raw": "In this case, I am not directly calling the function. The package is calling the function internally.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 81
    },
    {
      "id": 2898,
      "post_number": 4,
      "username": "Tiggax",
      "name": "",
      "created_at": "2024-09-28T20:29:31.109Z",
      "updated_at": "2024-09-28T20:29:31.109Z",
      "cooked": "<p>In that case, AFAIK there isn’t a way to redefine it, unless you can modify the source code.</p>\n<p>What package are you using?</p>",
      "raw": "In that case, AFAIK there isn't a way to redefine it, unless you can modify the source code.\n\nWhat package are you using?",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 27.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 71
    },
    {
      "id": 2901,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-28T22:10:33.463Z",
      "updated_at": "2024-09-28T22:10:33.463Z",
      "cooked": "<p>Hi, welcome and thank you for your question! I have changed your post’s title from to “Can I redefine a function in a package?” as the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a> recommend this:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>I also added tags to make your question easier to find.</p>\n<hr>\n<p>regarding your question, unfortunately there is really no mechanism for this. The package you use would have to explicitly support “replacing” that function (it would need to be passed as a parameter to the function(s) that should use it).</p>",
      "raw": "Hi, welcome and thank you for your question! I have changed your post’s title from to “Can I redefine a function in a package?” as the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11) recommend this:\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nI also added tags to make your question easier to find.\n\n---\n\nregarding your question, unfortunately there is really no mechanism for this. The package you use would have to explicitly support \"replacing\" that function (it would need to be passed as a parameter to the function(s) that should use it).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 36,
      "score": 42.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2906,
      "post_number": 6,
      "username": "darsnack",
      "name": "Kyle",
      "created_at": "2024-09-29T00:58:20.237Z",
      "updated_at": "2024-09-29T00:58:20.237Z",
      "cooked": "<p>I am using <code>moderner-cv</code> but I want the header to include more contact info. In the end, I chose to have a local module that inherits most of the original package but uses a custom header function.</p>",
      "raw": "I am using `moderner-cv` but I want the header to include more contact info. In the end, I chose to have a local module that inherits most of the original package but uses a custom header function.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 11.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 81
    },
    {
      "id": 2922,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-29T12:45:16.803Z",
      "updated_at": "2024-09-29T12:45:16.803Z",
      "cooked": "<p>Looks like <a href=\"https://typst.app/universe/package/moderner-cv\">it</a> uses the <code>_header()</code> function for header.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let moderner-cv(\n  name: [],\n  subtitle: [CV],\n  social: (:),\n  color: moderncv-blue,\n  lang: \"en\",\n  font: (\"New Computer Modern\"),\n  show-footer: true,\n  body,\n) = [\n</code></pre>\n<p>Since it doesn’t have anything resembling a substitution feature <a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a> was talking about, your best course of action is to have a modified local copy of the original template. Or if it’s possible, you indeed can only override a few things (functions) in your own module, which results in smaller code size for your document and ability to depend on external source via <code>import \"@preview/*\"</code> (and update it if new version comes out).</p>",
      "raw": "Looks like [it](https://typst.app/universe/package/moderner-cv) uses the `_header()` function for header.\n\n```typ\n#let moderner-cv(\n  name: [],\n  subtitle: [CV],\n  social: (:),\n  color: moderncv-blue,\n  lang: \"en\",\n  font: (\"New Computer Modern\"),\n  show-footer: true,\n  body,\n) = [\n```\n\nSince it doesn't have anything resembling a substitution feature @SillyFreak was talking about, your best course of action is to have a modified local copy of the original template. Or if it's possible, you indeed can only override a few things (functions) in your own module, which results in smaller code size for your document and ability to depend on external source via `import \"@preview/*\"` (and update it if new version comes out).",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 11.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2955,
      "post_number": 8,
      "username": "ilia",
      "name": "Ilia",
      "created_at": "2024-09-29T19:40:11.362Z",
      "updated_at": "2024-09-29T19:40:11.362Z",
      "cooked": "<p>It’s also possible to ask author of this template to add an ability for adding more info in header</p>",
      "raw": "It's also possible to ask author of this template to add an ability for adding more info in header",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 21.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 139
    }
  ],
  "scraped_at": "2025-06-10T09:57:50.655704"
}
{
  "topic_metadata": {
    "id": 781,
    "title": "Is it possible to query the final value of a state from the CLI?",
    "slug": "is-it-possible-to-query-the-final-value-of-a-state-from-the-cli",
    "posts_count": 4,
    "created_at": "2024-09-28T19:23:58.054Z",
    "last_posted_at": "2024-09-29T01:22:15.971Z",
    "views": 115,
    "like_count": 5,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "laurmaedje",
    "tags": [
      "cli",
      "state",
      "query"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 303
  },
  "posts": [
    {
      "id": 2895,
      "post_number": 1,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-28T19:23:58.185Z",
      "updated_at": "2024-09-28T22:00:43.387Z",
      "cooked": "<p>I’ve found that it’s possible to query the final state using a label like so:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let s = state(\"test\", 0)\n#context [\n  #s.final()\n  &lt;test&gt;\n]\n#s.update(2)\n</code></pre>\n<p>Running <code>typst query test.typ \"&lt;test&gt;\"</code> gives:</p>\n<pre data-code-wrap=\"json\"><code class=\"lang-json\">[\n  {\n    \"func\": \"text\",\n    \"text\": \"2\",\n    \"label\": \"&lt;test&gt;\"\n  }\n]\n</code></pre>\n<p>This works, but I wonder, is there a more direct way to query this information?</p>",
      "raw": "I've found that it's possible to query the final state using a label like so:\n\n```typ\n#let s = state(\"test\", 0)\n#context [\n  #s.final()\n  <test>\n]\n#s.update(2)\n```\n\nRunning `typst query test.typ \"<test>\"` gives:\n```json\n[\n  {\n    \"func\": \"text\",\n    \"text\": \"2\",\n    \"label\": \"<test>\"\n  }\n]\n```\n\nThis works, but I wonder, is there a more direct way to query this information?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 301.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 433
    },
    {
      "id": 2896,
      "post_number": 2,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-09-28T19:29:13.512Z",
      "updated_at": "2024-09-28T19:29:13.512Z",
      "cooked": "<p>There is no more direct way</p>",
      "raw": "There is no more direct way",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 6.2,
      "accepted_answer": true,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 2900,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-28T21:59:37.719Z",
      "updated_at": "2024-09-28T21:59:37.719Z",
      "cooked": "<p>To add a bit more detail: getting the final value using a <code>context</code> and labelling it is the only way, but the way you did it, you’re robbing yourself of a bit of detail: you’re creating a text element and thus the number is converted to a string. The way that is probably a bit more common is using <code>metadata</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let s = state(\"test\", 0)\n#context [#metadata(s.final()) &lt;test&gt;]\n#s.update(2)\n</code></pre>\n<p>This way, the same query results in</p>\n<pre data-code-wrap=\"json\"><code class=\"lang-json\">[\n  {\n    \"func\": \"metadata\",\n    \"value\": 2,\n    \"label\": \"&lt;test&gt;\"\n  }\n]\n</code></pre>\n<p>The query itself can be improved a bit, as usually you only want the <code>value</code> field and your use case suggests that there’s only one <code>&lt;test&gt;</code>:</p>\n<pre data-code-wrap=\"sh\"><code class=\"lang-sh\">typst query experiment/test.typ --field value --one \"&lt;test&gt;\"\n</code></pre>\n<p>Which simply results in the number (and valid JSON) <code>2</code>.</p>",
      "raw": "To add a bit more detail: getting the final value using a `context` and labelling it is the only way, but the way you did it, you're robbing yourself of a bit of detail: you're creating a text element and thus the number is converted to a string. The way that is probably a bit more common is using `metadata`:\n```typ\n#let s = state(\"test\", 0)\n#context [#metadata(s.final()) <test>]\n#s.update(2)\n```\nThis way, the same query results in\n```json\n[\n  {\n    \"func\": \"metadata\",\n    \"value\": 2,\n    \"label\": \"<test>\"\n  }\n]\n```\nThe query itself can be improved a bit, as usually you only want the `value` field and your use case suggests that there's only one `<test>`:\n```sh\ntypst query experiment/test.typ --field value --one \"<test>\"\n```\nWhich simply results in the number (and valid JSON) `2`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 29,
      "score": 70.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2908,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-29T01:22:15.971Z",
      "updated_at": "2024-09-29T01:22:15.971Z",
      "cooked": "<p>What hasn’t been pointed out yet is that 2 approaches give a different in-document output:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let c = counter(\"test\")\n|#context [#c.final().first()&lt;test&gt;]|\n|#context [#metadata(c.final().first())&lt;test&gt;]|\n#c.update(2)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/0331374b0c6c204db1411a706bbb81874aaeb838.png\" alt=\"image\" data-base62-sha1=\"seSnSR0xtwZ4AN78j0BRcKS0Eo\" width=\"65\" height=\"37\"></p>\n<p>So depending on your goal, you might want to use one or the other variant. Or if you want to get number type + print it:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let c = counter(\"test\")\n|#context { let n = c.final().first(); [#n#metadata(n)&lt;test&gt;] }|\n#c.update(2)\n</code></pre>\n<p>BTW, for natural number counting you should use <a href=\"https://typst.app/docs/reference/introspection/counter/\"><code>counter</code></a> instead.</p>",
      "raw": "What hasn't been pointed out yet is that 2 approaches give a different in-document output:\n\n```typ\n#let c = counter(\"test\")\n|#context [#c.final().first()<test>]|\n|#context [#metadata(c.final().first())<test>]|\n#c.update(2)\n```\n\n![image|65x37](upload://seSnSR0xtwZ4AN78j0BRcKS0Eo.png)\n\nSo depending on your goal, you might want to use one or the other variant. Or if you want to get number type + print it:\n\n```typ\n#let c = counter(\"test\")\n|#context { let n = c.final().first(); [#n#metadata(n)<test>] }|\n#c.update(2)\n```\n\nBTW, for natural number counting you should use [`counter`](https://typst.app/docs/reference/introspection/counter/) instead.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 29,
      "score": 65.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:49.914127"
}
{
  "topic_metadata": {
    "id": 789,
    "title": "Multi-paragraph footnotes: How to decrease gap between multiple paragraphs of the same footnote?",
    "slug": "multi-paragraph-footnotes-how-to-decrease-gap-between-multiple-paragraphs-of-the-same-footnote",
    "posts_count": 8,
    "created_at": "2024-09-29T17:48:16.368Z",
    "last_posted_at": "2024-09-30T08:06:18.737Z",
    "views": 167,
    "like_count": 6,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 7,
    "accepted_answer_username": "Adrian_Weitkemper",
    "tags": [],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 538
  },
  "posts": [
    {
      "id": 2946,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-09-29T17:48:16.508Z",
      "updated_at": "2024-09-29T17:53:42.194Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let leading_and_spacing = 1em\n#set par(first-line-indent: 1em, justify: true, leading: leading_and_spacing)\n#show par: set block(spacing: leading_and_spacing)\n\n// --\n\n#let fn1 = footnote[\n  #lorem(25)\n\n  #lorem(25)\n]\n\n#lorem(25)#fn1\n\n#lorem(25)\n</code></pre>\n<p>Currently, the leading of footnote paragraphs is larger than their spacing. How to decrease their leading so that it will be the same as their spacing?</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/960f8aae55edd83d512c06fc3fa640d9bddf55d9.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/960f8aae55edd83d512c06fc3fa640d9bddf55d9\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/960f8aae55edd83d512c06fc3fa640d9bddf55d9_2_517x366.jpeg\" alt=\"image\" data-base62-sha1=\"lpuUWVgWNWKomNyrbnBetJAONnP\" width=\"517\" height=\"366\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/960f8aae55edd83d512c06fc3fa640d9bddf55d9_2_517x366.jpeg, https://forum.typst.app/uploads/default/optimized/1X/960f8aae55edd83d512c06fc3fa640d9bddf55d9_2_775x549.jpeg 1.5x, https://forum.typst.app/uploads/default/original/1X/960f8aae55edd83d512c06fc3fa640d9bddf55d9.jpeg 2x\" data-dominant-color=\"E7E7E7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1020×724 118 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "```typ\n#let leading_and_spacing = 1em\n#set par(first-line-indent: 1em, justify: true, leading: leading_and_spacing)\n#show par: set block(spacing: leading_and_spacing)\n\n// --\n\n#let fn1 = footnote[\n  #lorem(25)\n\n  #lorem(25)\n]\n\n#lorem(25)#fn1\n\n#lorem(25)\n```\n\nCurrently, the leading of footnote paragraphs is larger than their spacing. How to decrease their leading so that it will be the same as their spacing?\n\n![image|690x489, 75%](upload://lpuUWVgWNWKomNyrbnBetJAONnP.jpeg)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 457.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 2949,
      "post_number": 2,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2024-09-29T18:38:32.195Z",
      "updated_at": "2024-09-29T19:52:59.617Z",
      "cooked": "<p>You can change the gap between footnotes using the “gap” parameter of footnote.entry like this: <code>#set footnote.entry(gap: 0.8em)</code><br>\nfull example (from the documentation):</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set footnote.entry(gap: 0.8em)\n\nFootnotes:\n#footnote[Spaced],\n#footnote[Apart]\n\n</code></pre>\n<p>(details in the <a href=\"https://typst.app/docs/reference/model/footnote/#definitions-entry-gap\">documentation</a> under “gap”)<br>\nHope this helps</p>",
      "raw": "You can change the gap between footnotes using the \"gap\" parameter of footnote.entry like this: ```#set footnote.entry(gap: 0.8em)```\nfull example (from the documentation): \n```typst\n#set footnote.entry(gap: 0.8em)\n\nFootnotes:\n#footnote[Spaced],\n#footnote[Apart]\n\n```\n(details in the [documentation](https://typst.app/docs/reference/model/footnote/#definitions-entry-gap) under \"gap\")\nHope this helps",
      "reply_to_post_number": null,
      "reply_count": 3,
      "quote_count": 0,
      "like_count": 2,
      "reads": 38,
      "score": 52.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 2953,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-29T19:28:45.438Z",
      "updated_at": "2024-09-29T19:28:45.438Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Adrian_Weitkemper\" data-post=\"2\" data-topic=\"789\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/a/F7602B/48.png\" class=\"avatar\"> Adrian_Weitkemper:</div>\n<blockquote>\n<p>(details in the <a href=\"https://typst.app/docs/reference/model\">documentation</a> under Reference → Model → Footnote (–&gt; Definitions → gap)</p>\n</blockquote>\n</aside>\n<p>BTW, you can link directly to the <a href=\"https://typst.app/docs/reference/model/footnote/\">footnote page</a>, or directly to the <a href=\"https://typst.app/docs/reference/model/footnote/#definitions-entry\">element</a> or directly to the <a href=\"https://typst.app/docs/reference/model/footnote/#definitions-entry-gap\">parameter</a>.</p>",
      "raw": "[quote=\"Adrian_Weitkemper, post:2, topic:789\"]\n(details in the [documentation](https://typst.app/docs/reference/model) under Reference → Model → Footnote (–> Definitions → gap)\n[/quote]\n\nBTW, you can link directly to the [footnote page](https://typst.app/docs/reference/model/footnote/), or directly to the [element](https://typst.app/docs/reference/model/footnote/#definitions-entry) or directly to the [parameter](https://typst.app/docs/reference/model/footnote/#definitions-entry-gap).",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 35,
      "score": 32.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2966,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-29T21:22:48.089Z",
      "updated_at": "2024-09-29T21:22:48.089Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Adrian_Weitkemper\" data-post=\"2\" data-topic=\"789\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/a/F7602B/48.png\" class=\"avatar\"> Adrian_Weitkemper:</div>\n<blockquote>\n<p>You can change the gap between footnotes using the “gap” parameter of footnote.entry like this: <code>#set footnote.entry(gap: 0.8em)</code></p>\n</blockquote>\n</aside>\n<p><a class=\"mention\" href=\"/u/jsx97\">@jsx97</a> I’m a bit confused that this solves your problem: this affects the gap between <em>different</em> footnotes, not between paragraphs of the same footnote. Isn’t that what you actually wanted?</p>",
      "raw": "[quote=\"Adrian_Weitkemper, post:2, topic:789\"]\nYou can change the gap between footnotes using the “gap” parameter of footnote.entry like this: `#set footnote.entry(gap: 0.8em)`\n[/quote]\n\n@jsx97 I'm a bit confused that this solves your problem: this affects the gap between _different_ footnotes, not between paragraphs of the same footnote. Isn't that what you actually wanted?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 32,
      "score": 26.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 2973,
      "post_number": 5,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-09-29T22:32:41.769Z",
      "updated_at": "2024-09-29T22:39:16.433Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a> My bad, sorry. Yes, this is not even a workaround.</p>",
      "raw": "@SillyFreak My bad, sorry. Yes, this is not even a workaround.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 6.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 2974,
      "post_number": 6,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-09-29T22:52:36.467Z",
      "updated_at": "2024-09-29T22:52:36.467Z",
      "cooked": "<p>Hello, Adrian. Thanks for this suggestion, though this is not really what I’m trying to achieve. Look at the followig example, for example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let leading_and_spacing = 1em\n#set par(first-line-indent: 1em, leading: leading_and_spacing)\n#show par: set block(spacing: leading_and_spacing)\n#set footnote.entry(gap: leading_and_spacing)\n\n#let fn1 = footnote[\n  #lorem(25)\n\n  #lorem(25)\n]\n\n#let fn2 = footnote[\n  #lorem(25)\n\n  #lorem(25)\n]\n\n#lorem(25)#fn1 #lorem(25)#fn2\n</code></pre>\n<p>And here is the output I’m trying to achieve, either version:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/16ba4149d3fb480a061559c3f131234b20b9486e.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/16ba4149d3fb480a061559c3f131234b20b9486e\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/16ba4149d3fb480a061559c3f131234b20b9486e_2_690x224.jpeg\" alt=\"image\" data-base62-sha1=\"3f3ylfYKXpCuMQfYBE803uURJbU\" width=\"690\" height=\"224\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/16ba4149d3fb480a061559c3f131234b20b9486e_2_690x224.jpeg, https://forum.typst.app/uploads/default/optimized/1X/16ba4149d3fb480a061559c3f131234b20b9486e_2_1035x336.jpeg 1.5x, https://forum.typst.app/uploads/default/optimized/1X/16ba4149d3fb480a061559c3f131234b20b9486e_2_1380x448.jpeg 2x\" data-dominant-color=\"E0E0E0\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1774×578 177 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hello, Adrian. Thanks for this suggestion, though this is not really what I'm trying to achieve. Look at the followig example, for example:\n\n```typ\n#let leading_and_spacing = 1em\n#set par(first-line-indent: 1em, leading: leading_and_spacing)\n#show par: set block(spacing: leading_and_spacing)\n#set footnote.entry(gap: leading_and_spacing)\n\n#let fn1 = footnote[\n  #lorem(25)\n\n  #lorem(25)\n]\n\n#let fn2 = footnote[\n  #lorem(25)\n\n  #lorem(25)\n]\n\n#lorem(25)#fn1 #lorem(25)#fn2\n```\n\nAnd here is the output I'm trying to achieve, either version:\n\n![image|690x224](upload://3f3ylfYKXpCuMQfYBE803uURJbU.jpeg)",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 15.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 2999,
      "post_number": 7,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2024-09-30T06:22:38.732Z",
      "updated_at": "2024-09-30T06:24:28.683Z",
      "cooked": "<p>Yeah, sry, my bad. I think the following should be what you want to achieve:<br>\nYou can use</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show footnote.entry: it =&gt; [#show par: set block(spacing: 0.15cm)\n#it\n]\n</code></pre>\n<p>to change the content of each footnote entry. So you basically have the body of the footnote (called “it”) as an parameter. Then you can achieve the spacing by first applying <code>#show par: set block(spacing: 0.15cm)</code>. Then you use <code>#it</code> to still have the content you wrote into the body of the footnote in it. It is important that the <code>#it</code> is in a new line, but you could also use ; instead.<br>\nAgain, sry for the misunderstanding. Hope this is what you are looking for <img src=\"https://forum.typst.app/images/emoji/apple/blush.png?v=12\" title=\":blush:\" class=\"emoji\" alt=\":blush:\" loading=\"lazy\" width=\"20\" height=\"20\"><br>\nFeel free to ask further questions if needed <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Yeah, sry, my bad. I think the following should be what you want to achieve: \nYou can use \n```typst\n#show footnote.entry: it => [#show par: set block(spacing: 0.15cm)\n#it\n]\n```\nto change the content of each footnote entry. So you basically have the body of the footnote (called \"it\") as an parameter. Then you can achieve the spacing by first applying `#show par: set block(spacing: 0.15cm)`. Then you use `#it` to still have the content you wrote into the body of the footnote in it. It is important that the `#it` is in a new line, but you could also use ; instead.\nAgain, sry for the misunderstanding. Hope this is what you are looking for :blush:\nFeel free to ask further questions if needed :slight_smile:",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 35.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 277
    },
    {
      "id": 3021,
      "post_number": 8,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-09-30T08:06:18.737Z",
      "updated_at": "2024-09-30T09:37:14.847Z",
      "cooked": "<p>Thanks a lot, this works as expected. It seems that by separating them with a semicolon, I can move <code>#it</code> on the same line with <code>#show</code>. Also, it seems that by replacing square brackets with figure ones, I can remove <code>#</code>:</p>\n<ul>\n<li><code>#show footnote.entry: it =&gt; [#show par: set block(spacing: 0.15cm); #it]</code></li>\n<li><code>#show footnote.entry: it =&gt; {show par: set block(spacing: 0.15cm); it}</code></li>\n</ul>",
      "raw": "Thanks a lot, this works as expected. It seems that by separating them with a semicolon, I can move `#it` on the same line with `#show`. Also, it seems that by replacing square brackets with figure ones, I can remove `#`:\n\n- `#show footnote.entry: it => [#show par: set block(spacing: 0.15cm); #it]`\n- `#show footnote.entry: it => {show par: set block(spacing: 0.15cm); it}`",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 20.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    }
  ],
  "scraped_at": "2025-06-10T09:57:49.191203"
}
{
  "topic_metadata": {
    "id": 799,
    "title": "How does the counter update function works?",
    "slug": "how-does-the-counter-update-function-works",
    "posts_count": 3,
    "created_at": "2024-09-29T21:30:51.464Z",
    "last_posted_at": "2024-09-30T19:26:41.631Z",
    "views": 189,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "counter"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 412
  },
  "posts": [
    {
      "id": 2968,
      "post_number": 1,
      "username": "Allon",
      "name": "Allon",
      "created_at": "2024-09-29T21:30:51.588Z",
      "updated_at": "2024-09-29T21:42:44.929Z",
      "cooked": "<p>Hi,<br>\nI used counter update to reset its value to 0 but it does not work. I am quite sure I am missing something. Could you tell me what I need to add to get the counter back to zero when I call the mainFormatQuestions function</p>\n<p>Thanks in advance,</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let mainFormatQuestions(arr_input) = {\n  let c = counter(\"question\")\n  c.update(0)\n  let formatQuestion(it) = block[\n    #c.step()\n    *Question #context c.display():*\n    #it  \n  ]\n  let arr_output = arr_input.map(i =&gt; formatQuestion(i))\n  return(arr_output)\n}\n\n#let myArray = (  \n  [3 x 5 = .........],\n  [3 x 7 = .........]\n)\n\n#table(columns: (1fr, 1fr, 1fr),\n  inset: 10pt,\n  align: left,  \n  ..mainFormatQuestions(myArray)\n)\n</code></pre>",
      "raw": "Hi,\nI used counter update to reset its value to 0 but it does not work. I am quite sure I am missing something. Could you tell me what I need to add to get the counter back to zero when I call the mainFormatQuestions function\n\nThanks in advance,\n\n```typ\n#let mainFormatQuestions(arr_input) = {\n  let c = counter(\"question\")\n  c.update(0)\n  let formatQuestion(it) = block[\n    #c.step()\n    *Question #context c.display():*\n    #it  \n  ]\n  let arr_output = arr_input.map(i => formatQuestion(i))\n  return(arr_output)\n}\n\n#let myArray = (  \n  [3 x 5 = .........],\n  [3 x 7 = .........]\n)\n\n#table(columns: (1fr, 1fr, 1fr),\n  inset: 10pt,\n  align: left,  \n  ..mainFormatQuestions(myArray)\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 627.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 367
    },
    {
      "id": 2971,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-29T22:04:31.666Z",
      "updated_at": "2024-09-29T22:05:16.590Z",
      "cooked": "<p>User <a class=\"mention\" href=\"/u/gabe\">@gabe</a> gave a good summary about how state works, and the situation for counter is the same:</p>\n<aside class=\"quote no-group\" data-username=\"gabe\" data-post=\"3\" data-topic=\"778\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/gabe/48/620_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/can-i-attach-and-update-state-in-metadata/778/3\">Can I attach and update state in metadata?</a></div>\n<blockquote>\n<p>States themselves never change, but instead <strong>we put down markers (which live in the content)</strong> that are used to compute what the value of state at a given position should be. The markers that we put down only have the name of the state and the desired operation. When we call state.get(), <strong>we’re taking that state’s initial value, applying all the markers that match its name that we’ve seen thus far, and giving the result</strong>.</p>\n</blockquote>\n</aside>\n<p>(Emphasis mine) The problem why your code doesn’t work is that, due to the explicit return, the <code>update</code> is not put into the content of your document. Basically, there are two ways how a function’s return value may form:</p>\n<ul>\n<li>if the function reaches a <code>return</code>, the value of that statement is returned</li>\n<li>otherwise, all values that were encountered are “joined”. For example, a function with body <code>{ [foo]; [bar] }</code> has as its result <code>[foo]+[bar] = [foobar]</code>.</li>\n</ul>\n<p>For the update to do anything, your result would need to include the <code>update()</code> content, and that update content needs to end up in the document.</p>\n<p>In your case, a fix that doesn’t interfere with the structure of your code too much would be to return the update and the array, so that your function would be called like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let (update, questions) = mainFormatQuestions(myArray)\n#update\n#table(columns: (1fr, 1fr, 1fr),\n  inset: 10pt,\n  align: left,  \n  ..questions\n)\n</code></pre>\n<p>Another option would be to do the whole table, not just constructing the array:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#questions-table(myArray)\n</code></pre>\n<p>Since <code>questions-table()</code> returns <code>content</code> and not an array, you could include the initial update in there.</p>",
      "raw": "User @gabe gave a good summary about how state works, and the situation for counter is the same:\n\n[quote=\"gabe, post:3, topic:778\"]\nStates themselves never change, but instead **we put down markers (which live in the content)** that are used to compute what the value of state at a given position should be. The markers that we put down only have the name of the state and the desired operation. When we call state.get(), **we’re taking that state’s initial value, applying all the markers that match its name that we’ve seen thus far, and giving the result**.\n[/quote]\n\n(Emphasis mine) The problem why your code doesn't work is that, due to the explicit return, the `update` is not put into the content of your document. Basically, there are two ways how a function's return value may form:\n- if the function reaches a `return`, the value of that statement is returned\n- otherwise, all values that were encountered are \"joined\". For example, a function with body `{ [foo]; [bar] }` has as its result `[foo]+[bar] = [foobar]`.\n\nFor the update to do anything, your result would need to include the `update()` content, and that update content needs to end up in the document.\n\nIn your case, a fix that doesn't interfere with the structure of your code too much would be to return the update and the array, so that your function would be called like this:\n```typ\n#let (update, questions) = mainFormatQuestions(myArray)\n#update\n#table(columns: (1fr, 1fr, 1fr),\n  inset: 10pt,\n  align: left,  \n  ..questions\n)\n```\nAnother option would be to do the whole table, not just constructing the array:\n```typ\n#questions-table(myArray)\n```\nSince `questions-table()` returns `content` and not an array, you could include the initial update in there.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 39,
      "score": 42.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3044,
      "post_number": 3,
      "username": "Allon",
      "name": "Allon",
      "created_at": "2024-09-30T19:26:41.631Z",
      "updated_at": "2024-09-30T19:26:41.631Z",
      "cooked": "<p>Hi,<br>\nI used the second solution, it is even clearer for the user. Thanks a lot for your help !</p>",
      "raw": "Hi,\nI used the second solution, it is even clearer for the user. Thanks a lot for your help !",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 4.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 367
    }
  ],
  "scraped_at": "2025-06-10T09:57:48.464755"
}
{
  "topic_metadata": {
    "id": 801,
    "title": "How to make backlinks?",
    "slug": "how-to-make-backlinks",
    "posts_count": 6,
    "created_at": "2024-09-29T22:31:59.870Z",
    "last_posted_at": "2024-10-01T06:02:27.212Z",
    "views": 183,
    "like_count": 3,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "gabe",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 525
  },
  "posts": [
    {
      "id": 2972,
      "post_number": 1,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-29T22:32:00.008Z",
      "updated_at": "2024-09-29T22:32:00.008Z",
      "cooked": "<p>I’m trying to make backlinks. Ideally I would just query every link in the document and filter based on the target, but links are not locatable yet. So, the approach I’ve taken is to create a label on every link. To ensure that multiple labels are not created with the same name, I increment a counter which is used in their naming.</p>\n<p>This is my attempt.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let prefix = \"test:\"\n\n#let generate(it) = {\n  if type(it.dest) != label {\n    return it\n  }\n\n  let target = str(it.dest)\n  let backlink_count = counter(prefix + target)\n  context {\n    let here = label(\n      prefix + target + \":\" + str(backlink_count.get().first())\n    )\n    return [\n      #it\n      #here\n\n      #backlink_count.step()\n    ]\n  }\n}\n\n#let get(lab) = {\n  let target = str(lab)\n  let backlink_count = counter(prefix + target).final().first()\n\n  return range(backlink_count).map(\n    i =&gt; label(prefix + target + \":\" + str(i))\n  )\n}\n\n#show link: generate\n\nTest &lt;label1&gt;\n\n#link(&lt;label1&gt;)[Go to label1]\n\n#context link(get(&lt;label1&gt;).first())[Backlink] // This errors\n</code></pre>\n<p>This errors with <code>label `&lt;test:label1:0&gt;` does not exist in the document</code>. Why? Can I fix this?</p>",
      "raw": "I'm trying to make backlinks. Ideally I would just query every link in the document and filter based on the target, but links are not locatable yet. So, the approach I've taken is to create a label on every link. To ensure that multiple labels are not created with the same name, I increment a counter which is used in their naming. \n\nThis is my attempt.\n\n```typ\n#let prefix = \"test:\"\n\n#let generate(it) = {\n  if type(it.dest) != label {\n    return it\n  }\n\n  let target = str(it.dest)\n  let backlink_count = counter(prefix + target)\n  context {\n    let here = label(\n      prefix + target + \":\" + str(backlink_count.get().first())\n    )\n    return [\n      #it\n      #here\n\n      #backlink_count.step()\n    ]\n  }\n}\n\n#let get(lab) = {\n  let target = str(lab)\n  let backlink_count = counter(prefix + target).final().first()\n\n  return range(backlink_count).map(\n    i => label(prefix + target + \":\" + str(i))\n  )\n}\n\n#show link: generate\n\nTest <label1>\n\n#link(<label1>)[Go to label1]\n\n#context link(get(<label1>).first())[Backlink] // This errors\n```\n\nThis errors with ```label `<test:label1:0>` does not exist in the document```. Why? Can I fix this?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 437.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 433
    },
    {
      "id": 3020,
      "post_number": 2,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-09-30T07:36:50.512Z",
      "updated_at": "2024-09-30T07:36:50.512Z",
      "cooked": "<p>If you only use it to query the links, it’s fine to have multiple elements with the same label. So using just one label would probably suffice here.</p>",
      "raw": "If you only use it to query the links, it's fine to have multiple elements with the same label. So using just one label would probably suffice here.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 32.6,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 3029,
      "post_number": 3,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-30T15:38:52.109Z",
      "updated_at": "2024-09-30T15:38:52.109Z",
      "cooked": "<p>That’s great to know. Assuming the query returns the elements, I could then get their locations and link to those.</p>\n<p>For some reason, though, the query here returns an empty array.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let prefix = \"test:\"\n\n#let generate(it) = {\n  if type(it.dest) != label {\n    return it\n  }\n\n  return [\n    #it\n    #label(prefix + str(it.dest))\n  ]\n}\n\n#let get(lab) = {\n  query(label(prefix + str(lab)))\n}\n\n#show link: generate\n\nTarget &lt;link0&gt;\n\n#link(&lt;link0&gt;)[Backlink]\n\n#context get(&lt;link0&gt;)\n</code></pre>",
      "raw": "That's great to know. Assuming the query returns the elements, I could then get their locations and link to those.\n\nFor some reason, though, the query here returns an empty array.\n\n```typ\n#let prefix = \"test:\"\n\n#let generate(it) = {\n  if type(it.dest) != label {\n    return it\n  }\n\n  return [\n    #it\n    #label(prefix + str(it.dest))\n  ]\n}\n\n#let get(lab) = {\n  query(label(prefix + str(lab)))\n}\n\n#show link: generate\n\nTarget <link0>\n\n#link(<link0>)[Backlink]\n\n#context get(<link0>)\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 10.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 433
    },
    {
      "id": 3031,
      "post_number": 4,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-09-30T16:24:45.559Z",
      "updated_at": "2024-09-30T16:24:45.559Z",
      "cooked": "<p>You’ve queried for <code>&lt;test:link0&gt;</code> here instead of <code>link0</code>, which causes the result to be empty.</p>\n<p>Aside from that, attaching a label to <code>it</code> in a show rule sadly doesn’t work. The element is already “finalized” so to speak before the show rule runs. If you need to do it in a show rule, you can add the label to some <a href=\"https://typst.app/docs/reference/introspection/metadata/\"><code>metadata</code></a> that you generate in the show rule instead.</p>",
      "raw": "You've queried for `<test:link0>` here instead of `link0`, which causes the result to be empty. \n\nAside from that, attaching a label to `it` in a show rule sadly doesn't work. The element is already \"finalized\" so to speak before the show rule runs. If you need to do it in a show rule, you can add the label to some [`metadata`](https://typst.app/docs/reference/introspection/metadata/) that you generate in the show rule instead.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 24.6,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 3043,
      "post_number": 5,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-30T18:52:45.600Z",
      "updated_at": "2024-09-30T18:52:45.600Z",
      "cooked": "<p>Querying for <code>&lt;test:link0&gt;</code> is intended since I want to query the links, not the targets.</p>\n<p>Adding a metadata to the show rule produces results! The query works as intended and allows me to get the location of the metadata.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let prefix = \"test:\"\n\n#let generate(it) = {\n  if type(it.dest) != label {\n    return it\n  }\n\n  let target = str(it.dest)\n  return [\n    #it\n    #metadata(target)\n    #label(prefix + target)\n  ]\n}\n\n#let get(target) = {\n  query(label(prefix + str(target)))\n}\n\n#show link: generate\n\nTarget &lt;link0&gt;\n\n#context get(&lt;link0&gt;).map(x =&gt; link(x.location())[backlink]).first()\n\n#pagebreak()\n\n#link(&lt;link0&gt;)[Link]\n</code></pre>\n<p>You say that the link element is already “finalized”, so adding a label doesn’t work. Does that mean that labels aren’t content elements? Are they just applied as a property to whatever comes before it?</p>",
      "raw": "Querying for `<test:link0>` is intended since I want to query the links, not the targets.\n\nAdding a metadata to the show rule produces results! The query works as intended and allows me to get the location of the metadata.\n\n```typ\n#let prefix = \"test:\"\n\n#let generate(it) = {\n  if type(it.dest) != label {\n    return it\n  }\n\n  let target = str(it.dest)\n  return [\n    #it\n    #metadata(target)\n    #label(prefix + target)\n  ]\n}\n\n#let get(target) = {\n  query(label(prefix + str(target)))\n}\n\n#show link: generate\n\nTarget <link0>\n\n#context get(<link0>).map(x => link(x.location())[backlink]).first()\n\n#pagebreak()\n\n#link(<link0>)[Link]\n```\n\nYou say that the link element is already \"finalized\", so adding a label doesn't work. Does that mean that labels aren't content elements? Are they just applied as a property to whatever comes before it?",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 29.6,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 433
    },
    {
      "id": 3054,
      "post_number": 6,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-01T06:02:27.212Z",
      "updated_at": "2024-10-01T06:02:27.212Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"gabe\" data-post=\"5\" data-topic=\"801\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/gabe/48/620_2.png\" class=\"avatar\"> gabe:</div>\n<blockquote>\n<p>You say that the link element is already “finalized”, so adding a label doesn’t work. Does that mean that labels aren’t content elements? Are they just applied as a property to whatever comes before it?</p>\n</blockquote>\n</aside>\n<p>That’s exactly right.</p>",
      "raw": "[quote=\"gabe, post:5, topic:801\"]\nYou say that the link element is already “finalized”, so adding a label doesn’t work. Does that mean that labels aren’t content elements? Are they just applied as a property to whatever comes before it?\n[/quote]\n\nThat's exactly right.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 20,
      "score": 19.0,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    }
  ],
  "scraped_at": "2025-06-10T09:57:47.714419"
}
{
  "topic_metadata": {
    "id": 815,
    "title": "How to fill a 2-column-table with key value pairs of an array?",
    "slug": "how-to-fill-a-2-column-table-with-key-value-pairs-of-an-array",
    "posts_count": 5,
    "created_at": "2024-09-30T14:35:03.396Z",
    "last_posted_at": "2024-10-05T08:49:11.748Z",
    "views": 336,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "scripting",
      "tables"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 561
  },
  "posts": [
    {
      "id": 3028,
      "post_number": 1,
      "username": "Friedrich_Kirch",
      "name": "Friedrich Kirch",
      "created_at": "2024-09-30T14:35:03.989Z",
      "updated_at": "2024-10-02T19:37:14.546Z",
      "cooked": "<p>Hi, I want to write a function, which gets an array of key value pairs and these pairs must be displayed in a table. Can anybody give me an example?</p>\n<p>I tried this, but it doesnt work:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let mainline(..moves) = {\n  align(center)[\n  #table(\n  columns: (2.6cm, 2.6cm),\n  stroke: none,\n  align: (left, right),\n\n// ??????? What to write here ??????????????// \n\n//  [*1.e2-e4*], [*e7-e5*],\n//  [*2.Sg1-f3*], [*f7-f5*],\n//  [*3.Sf3xe5*],\n  )// table\n] \n} // mainline\n\n\n#mainline(\n  (\n    (\"1.e2-e4\", \"e7-e5\"), \n    (\"2.Sg1-f3\", \"f7-f5\"), \n  ),\n)\n</code></pre>",
      "raw": "Hi, I want to write a function, which gets an array of key value pairs and these pairs must be displayed in a table. Can anybody give me an example?\n\nI tried this, but it doesnt work:\n```typ\n#let mainline(..moves) = {\n  align(center)[\n  #table(\n  columns: (2.6cm, 2.6cm),\n  stroke: none,\n  align: (left, right),\n\n// ??????? What to write here ??????????????// \n\n//  [*1.e2-e4*], [*e7-e5*],\n//  [*2.Sg1-f3*], [*f7-f5*],\n//  [*3.Sf3xe5*],\n  )// table\n] \n} // mainline\n\n\n#mainline(\n  (\n    (\"1.e2-e4\", \"e7-e5\"), \n    (\"2.Sg1-f3\", \"f7-f5\"), \n  ),\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 1423.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 507
    },
    {
      "id": 3030,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-30T15:39:13.023Z",
      "updated_at": "2024-09-30T15:39:42.799Z",
      "cooked": "<p>Hi Friedrich, and welcome to the forum!</p>\n<p>The table function takes a variable amount of entries as its arguments, which are then laid out row by row. To pass the data as a list of tuples (like you currently do), you can use the <a href=\"https://typst.app/docs/reference/foundations/array/#definitions-flatten\"><code>flatten</code></a> method to convert that list to a one-dimensional array, where the tuple structure is removed.</p>\n<p>Now, since the table function does not take an array as its argument, but a variable amount of values (as in <code>#table(first, second, third, ...)</code>, you can use the <a href=\"https://typst.app/docs/reference/foundations/arguments/#spreading\">spreading operator</a> <code>..</code>, which spreads the contents of the array into the arguments of a function call.</p>\n<p>The <code>moves</code> argument of the <code>mainline</code> function is of type <a href=\"https://typst.app/docs/reference/foundations/arguments/\"><code>arguments</code></a>, which can contain both named and positional arguments. As we only care about the positional ones, you can use the <code>pos</code> function to get them as an array.</p>\n<p>In total, you only need to add a very small piece to what you already have:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let mainline(..moves) = align(center, table(\n  columns: (2.6cm, 2.6cm),\n  stroke: none,\n  align: (left, right),\n  ..moves.pos().flatten()\n))\n</code></pre>\n<p>I also removed a bit of nesting to avoid unnecessary swapping between content mode and code mode. This doesn’t mean that there was anything wrong with it, it’s mostly just personal preference.</p>",
      "raw": "Hi Friedrich, and welcome to the forum!\n\nThe table function takes a variable amount of entries as its arguments, which are then laid out row by row. To pass the data as a list of tuples (like you currently do), you can use the [`flatten`](https://typst.app/docs/reference/foundations/array/#definitions-flatten) method to convert that list to a one-dimensional array, where the tuple structure is removed.\n\nNow, since the table function does not take an array as its argument, but a variable amount of values (as in `#table(first, second, third, ...)`, you can use the [spreading operator](https://typst.app/docs/reference/foundations/arguments/#spreading) `..`, which spreads the contents of the array into the arguments of a function call.\n\nThe `moves` argument of the `mainline` function is of type [`arguments`](https://typst.app/docs/reference/foundations/arguments/), which can contain both named and positional arguments. As we only care about the positional ones, you can use the `pos` function to get them as an array.\n\nIn total, you only need to add a very small piece to what you already have:\n```typ\n#let mainline(..moves) = align(center, table(\n  columns: (2.6cm, 2.6cm),\n  stroke: none,\n  align: (left, right),\n  ..moves.pos().flatten()\n))\n```\n\nI also removed a bit of nesting to avoid unnecessary swapping between content mode and code mode. This doesn't mean that there was anything wrong with it, it's mostly just personal preference.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 41,
      "score": 68.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 3032,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-30T16:41:54.146Z",
      "updated_at": "2024-09-30T16:41:54.146Z",
      "cooked": "<p>as a minor note, the <code>moves.pos()</code> for the given input results in</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">(\n  (\n    (\"1.e2-e4\", \"e7-e5\"), \n    (\"2.Sg1-f3\", \"f7-f5\"), \n  ),\n)\n</code></pre>\n<p>(an array of all parameters: there was only one parameter, and that parameter is an array containing arrays of two moves each) – since <code>flatten()</code> gets rid of arrays recursively, this extra layer made no difference for the table.</p>\n<p>I suggest additionally doing one of two changes:</p>\n<ol>\n<li>instead of <code>..moves</code>, write <code>moves</code> so that the single parameter (still an array) is processed directly.</li>\n<li>instead of passing an array of arrays, directly pass multiple arrays of moves:<pre><code class=\"lang-auto\">#mainline(\n  (\"1.e2-e4\", \"e7-e5\"), \n  (\"2.Sg1-f3\", \"f7-f5\"), \n)\n</code></pre>\n</li>\n</ol>\n<p>In either case, the parameter (<code>moves</code> or <code>moves.pos()</code>) is the following:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">(\n  (\"1.e2-e4\", \"e7-e5\"), \n  (\"2.Sg1-f3\", \"f7-f5\"), \n)\n</code></pre>\n<p>Which is probably what you actually wanted to work with</p>",
      "raw": "as a minor note, the `moves.pos()` for the given input results in\n```typc\n(\n  (\n    (\"1.e2-e4\", \"e7-e5\"), \n    (\"2.Sg1-f3\", \"f7-f5\"), \n  ),\n)\n```\n(an array of all parameters: there was only one parameter, and that parameter is an array containing arrays of two moves each) -- since `flatten()` gets rid of arrays recursively, this extra layer made no difference for the table.\n\nI suggest additionally doing one of two changes:\n\n1) instead of `..moves`, write `moves` so that the single parameter (still an array) is processed directly.\n2) instead of passing an array of arrays, directly pass multiple arrays of moves:\n   ```\n   #mainline(\n     (\"1.e2-e4\", \"e7-e5\"), \n     (\"2.Sg1-f3\", \"f7-f5\"), \n   )\n   ```\n\nIn either case, the parameter (`moves` or `moves.pos()`) is the following:\n```typc\n(\n  (\"1.e2-e4\", \"e7-e5\"), \n  (\"2.Sg1-f3\", \"f7-f5\"), \n)\n```\nWhich is probably what you actually wanted to work with",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 33.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3057,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T06:30:46.703Z",
      "updated_at": "2024-10-01T06:30:46.703Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Eric\" data-post=\"2\" data-topic=\"815\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/eric/48/87_2.png\" class=\"avatar\"> Eric:</div>\n<blockquote>\n<p>The table function takes a variable amount of entries as its arguments, which are then laid out row by row.</p>\n</blockquote>\n</aside>\n<p>To be more clear, I would say it lays them from left to right and then from top to bottom.</p>",
      "raw": "[quote=\"Eric, post:2, topic:815\"]\nThe table function takes a variable amount of entries as its arguments, which are then laid out row by row.\n[/quote]\n\nTo be more clear, I would say it lays them from left to right and then from top to bottom.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 32,
      "score": 6.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3438,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-05T08:49:11.748Z",
      "updated_at": "2024-10-10T14:45:39.108Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/friedrich_kirch\">@Friedrich_Kirch</a>, don’t forget to tick one of the responses if you got a satisfying answer. The answer you choose should usually be the response that you found most correct/helpful/comprehensive for the question you asked.</p>\n<p>Edit: I have marked a response as the solution.</p>",
      "raw": "Hi @Friedrich_Kirch, don’t forget to tick one of the responses if you got a satisfying answer. The answer you choose should usually be the response that you found most correct/helpful/comprehensive for the question you asked.\n\nEdit: I have marked a response as the solution.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 9.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:57:46.973772"
}
{
  "topic_metadata": {
    "id": 816,
    "title": "When will PDF/A export be available?",
    "slug": "when-will-pdf-a-export-be-available",
    "posts_count": 20,
    "created_at": "2024-09-30T16:46:51.737Z",
    "last_posted_at": "2024-10-10T09:10:01.711Z",
    "views": 1014,
    "like_count": 7,
    "reply_count": 13,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [],
    "category_id": 5,
    "participant_count": 7,
    "word_count": 1398
  },
  "posts": [
    {
      "id": 3033,
      "post_number": 1,
      "username": "fdekerm",
      "name": "François de Kermenguy",
      "created_at": "2024-09-30T16:46:51.860Z",
      "updated_at": "2024-09-30T16:46:51.860Z",
      "cooked": "<p>Hello,<br>\nI would like to know if a date is planned for PDF/A export in Typst ?<br>\nThanks!<br>\nfdekerm</p>",
      "raw": "Hello,\nI would like to know if a date is planned for PDF/A export in Typst ?\nThanks!\nfdekerm",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 95,
      "score": 2779.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 3035,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-30T16:57:17.061Z",
      "updated_at": "2024-10-12T20:06:36.552Z",
      "cooked": "<p>Looking through recent Discord discussion:</p>\n<blockquote>\n<p>We are looking to release 0.12 soon with PDF/A support and build on that for 0.13, which is the target for tagged PDF, not neccessarily PDF/UA-1. Note that /UA-1 compliance cannot be achieved fully automatically, we need some input from the users as e.g. what do your pictures show, what role a figure plays, and more.<br>\n– <a class=\"mention\" href=\"/u/reknih\">@reknih</a>, <span class=\"discourse-local-date\" data-date=\"2024-09-14\" data-email-preview=\"2024-09-13T22:00:00Z UTC\" data-timezone=\"Europe/Vienna\">2024-09-13T22:00:00Z</span>; <a href=\"https://discord.com/channels/1054443721975922748/1284462369011007539/1284483022934114356\">on Discord</a></p>\n</blockquote>\n<p>And there is a freshly open PR: <a href=\"https://github.com/typst/typst/pull/5075\" class=\"inline-onebox\">Minimal PDF/A support by laurmaedje · Pull Request #5075 · typst/typst · GitHub</a></p>\n<p>So apparently it’s not going to be too long!</p>\n<p><strong>EDIT:</strong> as this is the accepted answer, I want to mention that the rest of the thread has a lot of discussion on various subsets of PDF/A. The standard that has been implemented in the PR is PDF/A-2b, but there are more restricting subsets of PDF as well.</p>",
      "raw": "Looking through recent Discord discussion:\n\n> We are looking to release 0.12 soon with PDF/A support and build on that for 0.13, which is the target for tagged PDF, not neccessarily PDF/UA-1. Note that /UA-1 compliance cannot be achieved fully automatically, we need some input from the users as e.g. what do your pictures show, what role a figure plays, and more.\n-- @reknih, [date=2024-09-14 timezone=\"Europe/Vienna\"]; [on Discord](https://discord.com/channels/1054443721975922748/1284462369011007539/1284483022934114356)\n\nAnd there is a freshly open PR: https://github.com/typst/typst/pull/5075\n\nSo apparently it's not going to be too long!\n\n**EDIT:** as this is the accepted answer, I want to mention that the rest of the thread has a lot of discussion on various subsets of PDF/A. The standard that has been implemented in the PR is PDF/A-2b, but there are more restricting subsets of PDF as well.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 95,
      "score": 214.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3036,
      "post_number": 3,
      "username": "fdekerm",
      "name": "François de Kermenguy",
      "created_at": "2024-09-30T17:09:46.418Z",
      "updated_at": "2024-09-30T17:09:46.418Z",
      "cooked": "<p>Great! I <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">  hope it happens soon, I wrote my thesis in Typst and my university only asks for PDF/A files …</p>",
      "raw": "Great! I :slight_smile:  hope it happens soon, I wrote my thesis in Typst and my university only asks for PDF/A files ...",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 92,
      "score": 38.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 3038,
      "post_number": 4,
      "username": "LaurenzV",
      "name": "",
      "created_at": "2024-09-30T17:25:30.568Z",
      "updated_at": "2024-09-30T17:25:30.568Z",
      "cooked": "<p>If it’s really urgent, there are other tools you can use to convert a PDF to PDF/A, though (for example ghostscript).</p>",
      "raw": "If it's really urgent, there are other tools you can use to convert a PDF to PDF/A, though (for example ghostscript).",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 88,
      "score": 52.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 4
    },
    {
      "id": 3067,
      "post_number": 5,
      "username": "fdekerm",
      "name": "François de Kermenguy",
      "created_at": "2024-10-01T10:33:09.205Z",
      "updated_at": "2024-10-01T10:33:26.852Z",
      "cooked": "<p>I’ve tried, but with the command found here (<a href=\"https://stackoverflow.com/questions/1659147/how-to-use-ghostscript-to-convert-pdf-to-pdf-a-or-pdf-x\" rel=\"noopener nofollow ugc\">convert-pdf-to-pdf-a-or-pdf-x</a>), ghostscript generated a 160MB file (compared with 36MB for the original) in which the text is no longer selectable (as if each page were an image).</p>",
      "raw": "I've tried, but with the command found here ([convert-pdf-to-pdf-a-or-pdf-x](https://stackoverflow.com/questions/1659147/how-to-use-ghostscript-to-convert-pdf-to-pdf-a-or-pdf-x)), ghostscript generated a 160MB file (compared with 36MB for the original) in which the text is no longer selectable (as if each page were an image).",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 85,
      "score": 37.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 3105,
      "post_number": 6,
      "username": "LaurenzV",
      "name": "",
      "created_at": "2024-10-01T16:18:54.767Z",
      "updated_at": "2024-10-01T16:18:54.767Z",
      "cooked": "<p>Oh hmm… No idea why that happens, not familiar enough with ghostscript. :/ It worked fine with the simple document I tried.</p>",
      "raw": "Oh hmm... No idea why that happens, not familiar enough with ghostscript. :/ It worked fine with the simple document I tried.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 81,
      "score": 61.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 4
    },
    {
      "id": 3160,
      "post_number": 7,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-02T06:11:10.864Z",
      "updated_at": "2024-10-02T06:11:10.864Z",
      "cooked": "<p>Could you tell us which version of ghostscript you are using? Also, do note that any transparency layer will be rendered as images in PDF/A-1.</p>\n<p><a href=\"https://en.wikipedia.org/wiki/PDF/A#:~:text=The%20use%20of%20transparency%20is%20forbidden%20in%20PDF/A%2D1.\" rel=\"noopener nofollow ugc\">The use of transparency is forbidden in PDF/A-1.</a></p>\n<p>You may try using <code>-dPDFA=2</code> for PDF/A-2 or 3 for PDF/A-3. Transparency is a feature of PDF/A-2.</p>",
      "raw": "Could you tell us which version of ghostscript you are using? Also, do note that any transparency layer will be rendered as images in PDF/A-1.\n\n[The use of transparency is forbidden in PDF/A-1.](https://en.wikipedia.org/wiki/PDF/A#:~:text=The%20use%20of%20transparency%20is%20forbidden%20in%20PDF/A%2D1.)\n\nYou may try using `-dPDFA=2` for PDF/A-2 or 3 for PDF/A-3. Transparency is a feature of PDF/A-2.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 75,
      "score": 40.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3575,
      "post_number": 8,
      "username": "fdekerm",
      "name": "François de Kermenguy",
      "created_at": "2024-10-08T18:15:38.486Z",
      "updated_at": "2024-10-08T18:15:38.486Z",
      "cooked": "<p>Thanks for the answer, indeed it works with -dPDFA = 2. I’m using version 9.55.0.<br>\nHowever, I have another error:</p>\n<pre><code class=\"lang-auto\">GPL Ghostscript 9.55.0: Text string detected in DOCINFO cannot be represented in XMP for PDF/A1, discarding DOCINFO\nGPL Ghostscript 9.55.0: Text string detected in DOCINFO cannot be represented in XMP for PDF/A1, discarding DOCINFO\n</code></pre>\n<p>The output is therefore not in PDF/A format at all. I tried to directly generate the PDF in PDF/A with Typst 0.12-rc1, but still got the same warning.</p>\n<p>Note also that the PDF/A generated directly with Typst 1.12 (<code> typst compile --pdf-standard a-2b main.typ</code>) is not recognized as valid by my university’s submission software.</p>",
      "raw": "Thanks for the answer, indeed it works with -dPDFA = 2. I'm using version 9.55.0. \nHowever, I have another error:\n\n```\nGPL Ghostscript 9.55.0: Text string detected in DOCINFO cannot be represented in XMP for PDF/A1, discarding DOCINFO\nGPL Ghostscript 9.55.0: Text string detected in DOCINFO cannot be represented in XMP for PDF/A1, discarding DOCINFO\n```\n\nThe output is therefore not in PDF/A format at all. I tried to directly generate the PDF in PDF/A with Typst 0.12-rc1, but still got the same warning. \n\nNote also that the PDF/A generated directly with Typst 1.12 (` typst compile --pdf-standard a-2b main.typ`) is not recognized as valid by my university's submission software.",
      "reply_to_post_number": 7,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 65,
      "score": 23.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 3578,
      "post_number": 9,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-08T18:39:00.458Z",
      "updated_at": "2024-10-08T18:39:00.458Z",
      "cooked": "<p>Do you know which exact standard your university requires? It could be something beyond A-2b.</p>\n<p>Other than that, it would be interesting to know whether your document fails validation with verapdf. This is a command line Java application that can produce conformance reports for PDF/A files. If you want, you or we can try that (the latter of course only if you can share the document).</p>",
      "raw": "Do you know which exact standard your university requires? It could be something beyond A-2b. \n\nOther than that, it would be interesting to know whether your document fails validation with verapdf. This is a command line Java application that can produce conformance reports for PDF/A files. If you want, you or we can try that (the latter of course only if you can share the document).",
      "reply_to_post_number": 8,
      "reply_count": 3,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 27.0,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 3580,
      "post_number": 10,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-08T20:20:32.634Z",
      "updated_at": "2024-10-08T20:20:32.634Z",
      "cooked": "<p>Would you be able to give us the full command? Looking at the error, I’d say you should probably remove <code>-dPDFACompatibilityPolicy=1</code> from the arguments.</p>",
      "raw": "Would you be able to give us the full command? Looking at the error, I'd say you should probably remove `-dPDFACompatibilityPolicy=1` from the arguments.",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 57,
      "score": 16.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3600,
      "post_number": 11,
      "username": "fdekerm",
      "name": "François de Kermenguy",
      "created_at": "2024-10-09T07:27:04.030Z",
      "updated_at": "2024-10-09T07:27:32.094Z",
      "cooked": "<p>Thanks for the advice!<br>\nI installed it and the pdf passed the PDF/A-2B validation profile:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/0b14321f5c915f72ed35ef80f5395bddf82aea61.png\" data-download-href=\"https://forum.typst.app/uploads/default/0b14321f5c915f72ed35ef80f5395bddf82aea61\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/0b14321f5c915f72ed35ef80f5395bddf82aea61_2_485x500.png\" alt=\"image\" data-base62-sha1=\"1A0wktXZqkqL4g1u5V413QgW0Tv\" width=\"485\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/0b14321f5c915f72ed35ef80f5395bddf82aea61_2_485x500.png, https://forum.typst.app/uploads/default/original/1X/0b14321f5c915f72ed35ef80f5395bddf82aea61.png 1.5x, https://forum.typst.app/uploads/default/original/1X/0b14321f5c915f72ed35ef80f5395bddf82aea61.png 2x\" data-dominant-color=\"EEE6E8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">685×705 74.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Maybe it comes from my university, I will ask them <img src=\"https://forum.typst.app/images/emoji/apple/thinking.png?v=12\" title=\":thinking:\" class=\"emoji\" alt=\":thinking:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Thanks for the advice!\nI installed it and the pdf passed the PDF/A-2B validation profile:\n![image|485x500](upload://1A0wktXZqkqL4g1u5V413QgW0Tv.png)\n\nMaybe it comes from my university, I will ask them :thinking:",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 55,
      "score": 26.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 3601,
      "post_number": 12,
      "username": "fdekerm",
      "name": "François de Kermenguy",
      "created_at": "2024-10-09T07:36:48.035Z",
      "updated_at": "2024-10-09T07:36:48.035Z",
      "cooked": "<p>The command was</p>\n<p><code>gs -dPDFA=2 -dBATCH -dNOPAUSE -sProcessColorModel=DeviceRGB -sDEVICE=pdfwrite -dPDFACompatibilityPolicy=1 -sOutputFile=output.pdf PhD_manuscript.pdf</code></p>\n<p>When <code>-dPDFA=1</code>, all pages was converted to images.<br>\nWhen <code>-dPDFA=2</code> AND <code>-dPDFACompatibilityPolicy=2</code>, I have to following error and the document is no longer generated:</p>\n<p><code>GPL Ghostscript 9.55.0: Text string detected in DOCINFO cannot be represented in XMP for PDF/A1, aborting conversion. GPL Ghostscript 9.55.0: Unrecoverable error, exit code 255 GPL Ghostscript 9.55.0: ERROR: A pdfmark destination page 215 points beyond the last page 1.</code></p>",
      "raw": "The command was\n\n`gs -dPDFA=2 -dBATCH -dNOPAUSE -sProcessColorModel=DeviceRGB -sDEVICE=pdfwrite -dPDFACompatibilityPolicy=1 -sOutputFile=output.pdf PhD_manuscript.pdf`\n\nWhen `-dPDFA=1`, all pages was converted to images. \nWhen `-dPDFA=2` AND `-dPDFACompatibilityPolicy=2`, I have to following error and the document is no longer generated: \n\n`GPL Ghostscript 9.55.0: Text string detected in DOCINFO cannot be represented in XMP for PDF/A1, aborting conversion.\nGPL Ghostscript 9.55.0: Unrecoverable error, exit code 255\nGPL Ghostscript 9.55.0: ERROR: A pdfmark destination page 215 points beyond the last page 1.`",
      "reply_to_post_number": 10,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 56,
      "score": 26.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    },
    {
      "id": 3602,
      "post_number": 13,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-09T07:41:15.882Z",
      "updated_at": "2024-10-09T07:44:35.144Z",
      "cooked": "<p>What about <code>-dPDFA=2 -dPDFACompatibilityPolicy=1</code>, or only <code>-dPDFA=2</code>?</p>\n<p>From what I understand the value of <code>PDFA</code> and <code>PDFACompatibilityPolicy</code> have nothing to do with each other. PDFACompatibilityPolicy is simply telling ghostscript how to behave in case of PDFA violations.</p>\n<p>See <a href=\"https://mostafaznv.gitbook.io/pdf-optimizer/advanced-usage/configuring-ghostscript/pdfacompatibilitypolicy\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">PDFACompatibilityPolicy | PDF Optimizer</a></p>\n<blockquote>\n<ul>\n<li><strong>0:</strong> (default) Include the feature or operation in the output file, the file will not be PDF/A compliant.</li>\n<li><strong>1:</strong> The feature or operation is ignored, the resulting PDF file will be PDF/A compliant. A warning will be emitted for every elided feature.</li>\n<li><strong>2:</strong> Processing of the file is aborted with an error, the exact error may vary depending on the nature of the PDF/A incompatibility.</li>\n</ul>\n</blockquote>",
      "raw": "What about `-dPDFA=2 -dPDFACompatibilityPolicy=1`, or only `-dPDFA=2`?\n\nFrom what I understand the value of `PDFA` and `PDFACompatibilityPolicy` have nothing to do with each other. PDFACompatibilityPolicy is simply telling ghostscript how to behave in case of PDFA violations.\n\nSee https://mostafaznv.gitbook.io/pdf-optimizer/advanced-usage/configuring-ghostscript/pdfacompatibilitypolicy\n> - **0:** (default) Include the feature or operation in the output file, the file will not be PDF/A compliant.\n> - **1:** The feature or operation is ignored, the resulting PDF file will be PDF/A compliant. A warning will be emitted for every elided feature. \n> - **2:** Processing of the file is aborted with an error, the exact error may vary depending on the nature of the PDF/A incompatibility.",
      "reply_to_post_number": 12,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 56,
      "score": 56.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3603,
      "post_number": 14,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-09T08:07:51.613Z",
      "updated_at": "2024-10-09T08:08:23.633Z",
      "cooked": "<p>Aside from installing veraPDF, you can validate PDFs compliance with:</p>\n<ul>\n<li>the online veraPDF demo: <a href=\"https://demo.verapdf.org/\" rel=\"noopener nofollow ugc\">https://demo.verapdf.org/</a></li>\n<li>(offline) the docker image: <a href=\"https://hub.docker.com/r/verapdf/rest\" rel=\"noopener nofollow ugc\">https://hub.docker.com/r/verapdf/rest</a></li>\n<li>Online alternative with a french institution: <a href=\"https://facile.cines.fr/\" rel=\"noopener nofollow ugc\">https://facile.cines.fr/</a></li>\n</ul>\n<p>The last one is actually used to validate &gt;=PDF 1.4 compliance for all french PhD theses.</p>",
      "raw": "Aside from installing veraPDF, you can validate PDFs compliance with:\n- the online veraPDF demo: https://demo.verapdf.org/\n- (offline) the docker image: https://hub.docker.com/r/verapdf/rest\n- Online alternative with a french institution: https://facile.cines.fr/\n\nThe last one is actually used to validate >=PDF 1.4 compliance for all french PhD theses.",
      "reply_to_post_number": 9,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 57,
      "score": 41.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3605,
      "post_number": 15,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-09T10:28:07.951Z",
      "updated_at": "2024-10-09T10:28:07.951Z",
      "cooked": "<p>Didn’t know about the online VeraPDF thing. That’s good to know!</p>",
      "raw": "Didn't know about the online VeraPDF thing. That's good to know!",
      "reply_to_post_number": 14,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 53,
      "score": 30.6,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 3618,
      "post_number": 16,
      "username": "Robert-qw",
      "name": "Robert",
      "created_at": "2024-10-09T15:12:50.291Z",
      "updated_at": "2024-10-09T15:12:50.291Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"laurmaedje\" data-post=\"9\" data-topic=\"816\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/laurmaedje/48/14_2.png\" class=\"avatar\"> laurmaedje:</div>\n<blockquote>\n<p>Do you know which exact standard your university requires? It could be something beyond A-2b.</p>\n</blockquote>\n</aside>\n<p>not the OP here, but many institutions and companies require A-1b (I guess because it’s the most restrictive). Archivists, libraries, contracts, digital signed papers … It would be awesome if you could support A-1b</p>\n<p>here two example pages, that explain their requests (in german):</p><aside class=\"onebox pdf\" data-onebox-src=\"https://www.landesarchiv-bw.de/sixcms/media.php/120/PDF_richtlinie_mit_erlaeuterungen_2.pdf\">\n  <header class=\"source\">\n\n      <a href=\"https://www.landesarchiv-bw.de/sixcms/media.php/120/PDF_richtlinie_mit_erlaeuterungen_2.pdf\" target=\"_blank\" rel=\"noopener nofollow ugc\">landesarchiv-bw.de</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <a href=\"https://www.landesarchiv-bw.de/sixcms/media.php/120/PDF_richtlinie_mit_erlaeuterungen_2.pdf\" target=\"_blank\" rel=\"noopener nofollow ugc\"><span class=\"pdf-onebox-logo\"></span></a>\n\n<h3><a href=\"https://www.landesarchiv-bw.de/sixcms/media.php/120/PDF_richtlinie_mit_erlaeuterungen_2.pdf\" target=\"_blank\" rel=\"noopener nofollow ugc\">PDF_richtlinie_mit_erlaeuterungen_2.pdf</a></h3>\n\n  <p class=\"filesize\">380.69 KB</p>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://www.egovernment.de/was-sie-schon-immer-ueber-pdfa-wissen-wollten--a-188176/?p=3\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/48e5e4e7c7851e3dd20f85d1af99fb732107c709.png\" class=\"site-icon\" data-dominant-color=\"BECED7\" width=\"192\" height=\"192\">\n\n      <a href=\"https://www.egovernment.de/was-sie-schon-immer-ueber-pdfa-wissen-wollten--a-188176/?p=3\" target=\"_blank\" rel=\"noopener nofollow ugc\">eGovernment</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:363/500;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/2e5af3ba3259ec71cbcce7ca8389f5765748b95f_2_363x500.png\" class=\"thumbnail\" data-dominant-color=\"8A6456\" width=\"363\" height=\"500\"></div>\n\n<h3><a href=\"https://www.egovernment.de/was-sie-schon-immer-ueber-pdfa-wissen-wollten--a-188176/?p=3\" target=\"_blank\" rel=\"noopener nofollow ugc\">Was Sie schon immer über PDF/A wissen wollten ...</a></h3>\n\n  <p>Seit dem 1. Oktober 2005 ist PDF/A das ISO-standardi-sierte Format für die Langzeitarchivierung von PDF-Dokumenten. Es sorgt nicht nur für die langfristige Lesbarkeit von Dokumenten, sondern ist der Schlüssel für viele Herausforderungen in den...</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "[quote=\"laurmaedje, post:9, topic:816\"]\nDo you know which exact standard your university requires? It could be something beyond A-2b.\n[/quote]\n\nnot the OP here, but many institutions and companies require A-1b (I guess because it's the most restrictive). Archivists, libraries, contracts, digital signed papers ... It would be awesome if you could support A-1b\n\nhere two example pages, that explain their requests (in german):\nhttps://www.landesarchiv-bw.de/sixcms/media.php/120/PDF_richtlinie_mit_erlaeuterungen_2.pdf\nhttps://www.egovernment.de/was-sie-schon-immer-ueber-pdfa-wissen-wollten--a-188176/?p=3",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 53,
      "score": 10.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 552
    },
    {
      "id": 3627,
      "post_number": 17,
      "username": "Enivex",
      "name": "Enivex",
      "created_at": "2024-10-09T21:49:28.962Z",
      "updated_at": "2024-10-09T21:49:28.962Z",
      "cooked": "<p>PDF/A-1b is almost 20 years old. Even PDF/A-2b is 13 years old. Demanding PDF/A-1b seems unreasonably restrictive.</p>\n<p>If they truly require PDF/A-1b there are tools that can do the conversion for you.</p>",
      "raw": "PDF/A-1b is almost 20 years old. Even PDF/A-2b is 13 years old. Demanding PDF/A-1b seems unreasonably restrictive.\n\nIf they truly require PDF/A-1b there are tools that can do the conversion for you.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 19.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 5
    },
    {
      "id": 3629,
      "post_number": 18,
      "username": "Robert-qw",
      "name": "Robert",
      "created_at": "2024-10-09T22:32:22.145Z",
      "updated_at": "2024-10-09T22:32:22.145Z",
      "cooked": "<p>no, unfortunatly there are no tools, that can do that. ghostscript sometime can do. but it’s a hit and miss. but if you have some tipps, let’s try it…</p>",
      "raw": "no, unfortunatly there are no tools, that can do that. ghostscript sometime can do. but it's a hit and miss. but if you have some tipps, let's try it...",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 47,
      "score": 29.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 552
    },
    {
      "id": 3639,
      "post_number": 19,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-10T06:24:31.554Z",
      "updated_at": "2024-10-10T06:25:35.945Z",
      "cooked": "<p>I think you could create a new topic with the question “How do I convert my PDF to PDF/A-1b?” if you need help converting your document to PDF/A-1b, or directly create an issue on <a href=\"https://github.com/typst/typst/issues\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Issues · typst/typst · GitHub</a> with a feature request for PDF/A-1 support to discuss that particular bit.</p>\n<aside class=\"quote no-group\" data-username=\"Enivex\" data-post=\"17\" data-topic=\"816\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/e/19798D/48.png\" class=\"avatar\"> Enivex:</div>\n<blockquote>\n<p>PDF/A-1b is almost 20 years old. Even PDF/A-2b is 13 years old. Demanding PDF/A-1b seems unreasonably restrictive.</p>\n</blockquote>\n</aside>\n<p>Technically speaking, there is no requirement to “upgrade” from PDF/A-1 to PDF/A-2 as there is no succession. PDF/A-2 does not replace or supersede PDF/A-1. I can find well-known institutions asking specifically for PDF/A-1:</p>\n<ul>\n<li>MIT: <a href=\"https://libguides.mit.edu/mit-thesis-faq/pdfa\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Saving Your Thesis as a PDF/A-1 - MIT Thesis FAQ - LibGuides at MIT Libraries</a></li>\n<li>Warwick College: <a href=\"https://warwick.ac.uk/services/dc/submission/finalthesissubmission/pdfa/\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">PDF/A format for final thesis</a></li>\n<li>Memorial University: <a href=\"https://www.mun.ca/math/graduate-students/thesis-help/\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Thesis Help | Mathematics and Statistics | Memorial University of Newfoundland</a></li>\n</ul>\n<p>In any case, I feel like this topic disgressed too much probably. As said above, it might be good to split it.</p>",
      "raw": "I think you could create a new topic with the question \"How do I convert my PDF to PDF/A-1b?\" if you need help converting your document to PDF/A-1b, or directly create an issue on https://github.com/typst/typst/issues with a feature request for PDF/A-1 support to discuss that particular bit.\n\n[quote=\"Enivex, post:17, topic:816\"]\nPDF/A-1b is almost 20 years old. Even PDF/A-2b is 13 years old. Demanding PDF/A-1b seems unreasonably restrictive.\n[/quote]\nTechnically speaking, there is no requirement to \"upgrade\" from PDF/A-1 to PDF/A-2 as there is no succession. PDF/A-2 does not replace or supersede PDF/A-1. I can find well-known institutions asking specifically for PDF/A-1:\n- MIT: https://libguides.mit.edu/mit-thesis-faq/pdfa\n- Warwick College: https://warwick.ac.uk/services/dc/submission/finalthesissubmission/pdfa/\n- Memorial University: https://www.mun.ca/math/graduate-students/thesis-help/\n\nIn any case, I feel like this topic disgressed too much probably. As said above, it might be good to split it.",
      "reply_to_post_number": 17,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 48,
      "score": 259.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3642,
      "post_number": 20,
      "username": "fdekerm",
      "name": "François de Kermenguy",
      "created_at": "2024-10-10T09:10:01.711Z",
      "updated_at": "2024-10-10T09:10:01.711Z",
      "cooked": "<p>Thank you all for your replies!<br>\nIndeed, the university did ask for a file in PDF/A-1b format (but without explicitly mentioning it anywhere <img src=\"https://forum.typst.app/images/emoji/apple/grinning.png?v=12\" title=\":grinning:\" class=\"emoji\" alt=\":grinning:\" loading=\"lazy\" width=\"20\" height=\"20\">). I ended up (<img src=\"https://forum.typst.app/images/emoji/apple/dizzy_face.png?v=12\" title=\":dizzy_face:\" class=\"emoji\" alt=\":dizzy_face:\" loading=\"lazy\" width=\"20\" height=\"20\">) using the trial version of Adobe Acrobat Pro to convert the 2b file into 1b. Unfortunately, some artifacts appeared. Nothing too serious, but quite frustrating when you’ve spent so much time adjusting everything.<br>\nI admit that this is the first real hitch I’ve encountered with Typst so far. I don’t know how widespread the 1b standard is, but until it’s possible to export natively in 1b, I’ll find it hard to recommend Typst to other PhD students in my team (which I’ve done regularly up to now).<br>\nThanks again for your amazing help !</p>",
      "raw": "Thank you all for your replies!\nIndeed, the university did ask for a file in PDF/A-1b format (but without explicitly mentioning it anywhere 😀). I ended up (😵) using the trial version of Adobe Acrobat Pro to convert the 2b file into 1b. Unfortunately, some artifacts appeared. Nothing too serious, but quite frustrating when you've spent so much time adjusting everything.\nI admit that this is the first real hitch I've encountered with Typst so far. I don't know how widespread the 1b standard is, but until it's possible to export natively in 1b, I'll find it hard to recommend Typst to other PhD students in my team (which I've done regularly up to now).\nThanks again for your amazing help !",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 44,
      "score": 113.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 136
    }
  ],
  "scraped_at": "2025-06-10T09:57:46.254612"
}
{
  "topic_metadata": {
    "id": 818,
    "title": "How can I remove parens around specific citations?",
    "slug": "how-can-i-remove-parens-around-specific-citations",
    "posts_count": 14,
    "created_at": "2024-09-30T17:23:27.333Z",
    "last_posted_at": "2024-10-02T15:50:42.220Z",
    "views": 263,
    "like_count": 12,
    "reply_count": 11,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "xkevio",
    "tags": [
      "citation"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 692
  },
  "posts": [
    {
      "id": 3037,
      "post_number": 1,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-09-30T17:23:27.453Z",
      "updated_at": "2024-10-03T19:19:53.594Z",
      "cooked": "<p>I’ve got a document using <a href=\"https://github.com/citation-style-language/styles/blob/master/biological-psychiatry.csl\" rel=\"noopener nofollow ugc\">this citation style</a>, which has references in parentheses. eg:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/d76329359f5b1b12bf7dadd33a802812d6c9328d.png\" data-download-href=\"https://forum.typst.app/uploads/default/d76329359f5b1b12bf7dadd33a802812d6c9328d\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/d76329359f5b1b12bf7dadd33a802812d6c9328d_2_690x58.png\" alt=\"image\" data-base62-sha1=\"uJp6FrfJqZgi5srxu8dskDjW08t\" width=\"690\" height=\"58\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/d76329359f5b1b12bf7dadd33a802812d6c9328d_2_690x58.png, https://forum.typst.app/uploads/default/optimized/1X/d76329359f5b1b12bf7dadd33a802812d6c9328d_2_1035x87.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/d76329359f5b1b12bf7dadd33a802812d6c9328d_2_1380x116.png 2x\" data-dominant-color=\"DDDDDD\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1491×126 43.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>But sometimes, when citations are within existing parentheses, I’d prefer to not add additional parentheses, eg</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/cb109ecda83a191c8326c22f468c42be03264d17.png\" data-download-href=\"https://forum.typst.app/uploads/default/cb109ecda83a191c8326c22f468c42be03264d17\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/cb109ecda83a191c8326c22f468c42be03264d17_2_690x62.png\" alt=\"image\" data-base62-sha1=\"sYoxc171zAsaHgpDYl4vK0TixYH\" width=\"690\" height=\"62\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/cb109ecda83a191c8326c22f468c42be03264d17_2_690x62.png, https://forum.typst.app/uploads/default/optimized/1X/cb109ecda83a191c8326c22f468c42be03264d17_2_1035x93.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/cb109ecda83a191c8326c22f468c42be03264d17_2_1380x124.png 2x\" data-dominant-color=\"DDDBDB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1470×133 51.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Is there a way to accomplish this? I thought there might be a way to hijack the <code>supplement</code> argument to put the other text (eg “as reviewed in”), but couldn’t figure it out.</p>",
      "raw": "I've got a document using [this citation style](https://github.com/citation-style-language/styles/blob/master/biological-psychiatry.csl), which has references in parentheses. eg:\n\n![image|690x58](upload://uJp6FrfJqZgi5srxu8dskDjW08t.png)\n\nBut sometimes, when citations are within existing parentheses, I'd prefer to not add additional parentheses, eg\n\n![image|690x62](upload://sYoxc171zAsaHgpDYl4vK0TixYH.png)\n\nIs there a way to accomplish this? I thought there might be a way to hijack the `supplement` argument to put the other text (eg \"as reviewed in\"), but couldn't figure it out.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 719.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3039,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-09-30T17:31:08.050Z",
      "updated_at": "2024-09-30T17:31:08.050Z",
      "cooked": "<p>Usually one the <code>form</code> parameters of <code>#cite()</code> could achieve this but it seems not with this particular style. The easiest way right now then would be wrapping the normal citation in a function and remove the parentheses with a regex.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let no-paren-cite(label) = {\n  show regex(\"\\(|\\)\"): none\n  cite(label, form: \"normal\") \n}\n\nSee @xyz (reviewed in #no-paren-cite(&lt;abc&gt;)\n#no-paren-cite(&lt;def&gt;))\n</code></pre>",
      "raw": "Usually one the `form` parameters of `#cite()` could achieve this but it seems not with this particular style. The easiest way right now then would be wrapping the normal citation in a function and remove the parentheses with a regex.\n\n```typ\n#let no-paren-cite(label) = {\n  show regex(\"\\(|\\)\"): none\n  cite(label, form: \"normal\") \n}\n\nSee @xyz (reviewed in #no-paren-cite(<abc>)\n#no-paren-cite(<def>))\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 49,
      "score": 59.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3101,
      "post_number": 3,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-10-01T15:17:02.912Z",
      "updated_at": "2024-10-01T15:17:02.912Z",
      "cooked": "<p>Ooh, clever idea, but it doesn’t seem to work. I wonder if the outer parens are getting added after the regex processing (I’m on the development version if that matters - I need the new line numbers functionality).</p>\n<p>I also tried</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let no-paren-cite(cites) = {\n  show regex(\"\\(|\\)\"): none\n  for c in cites {\n    cite(c, form: \"normal\")\n  }\n}\n</code></pre>\n<p>and then cited as <code>no-paren-cite((&lt;abc&gt;, &lt;def&gt;))</code><br>\njust to see if it was something about the combination, but I’m still getting the same result.</p>",
      "raw": "Ooh, clever idea, but it doesn't seem to work. I wonder if the outer parens are getting added after the regex processing (I'm on the development version if that matters - I need the new line numbers functionality).\n\nI also tried\n\n```typst\n#let no-paren-cite(cites) = {\n  show regex(\"\\(|\\)\"): none\n  for c in cites {\n    cite(c, form: \"normal\")\n  }\n}\n```\nand then cited as `no-paren-cite((<abc>, <def>))`\njust to see if it was something about the combination, but I'm still getting the same result.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3103,
      "post_number": 4,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-10-01T15:33:26.566Z",
      "updated_at": "2024-10-02T12:44:17.597Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"kescobo\" data-post=\"3\" data-topic=\"818\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/k/19798D/48.png\" class=\"avatar\"> kescobo:</div>\n<blockquote>\n<p>I’m on the development version if that matters</p>\n</blockquote>\n</aside>\n<p>Hmm - actually this does seem to matter. I just tried it on <s>0.10.1</s> 0.11.1 and it works (both your version and my loop).</p>\n<p>Edit: On the development version, even putting <code>#show regex(\"\\(|\\)\"): none</code> outside a function removes all of the manually entered parens, but all of the citation parens remain intact.</p>",
      "raw": "[quote=\"kescobo, post:3, topic:818\"]\nI’m on the development version if that matters\n[/quote]\n\nHmm - actually this does seem to matter. I just tried it on ~~0.10.1~~ 0.11.1 and it works (both your version and my loop).\n\nEdit: On the development version, even putting `#show regex(\"\\(|\\)\"): none` outside a function removes all of the manually entered parens, but all of the citation parens remain intact.",
      "reply_to_post_number": 3,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 0,
      "reads": 40,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3106,
      "post_number": 5,
      "username": "Sinthoras",
      "name": "",
      "created_at": "2024-10-01T16:19:29.069Z",
      "updated_at": "2024-10-01T16:19:29.069Z",
      "cooked": "<p>Is this a known issue?</p>",
      "raw": "Is this a known issue?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 13.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 511
    },
    {
      "id": 3109,
      "post_number": 6,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-01T16:37:16.760Z",
      "updated_at": "2024-10-01T16:37:16.760Z",
      "cooked": "<p>Yeah I could’ve told you that it’s a new issue since I tested it before answering ^^ It is suspicious though and a million things could be the reason for it. New text show rules, internal layout reworks and citation group changes — probably best to create an issue.</p>",
      "raw": "Yeah I could've told you that it's a new issue since I tested it before answering ^^ It is suspicious though and a million things could be the reason for it. New text show rules, internal layout reworks and citation group changes — probably best to create an issue.",
      "reply_to_post_number": 4,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 43.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3110,
      "post_number": 7,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-01T16:47:42.316Z",
      "updated_at": "2024-10-01T16:47:42.316Z",
      "cooked": "<p>Looks like a bug with the new text show rule processing. Minimized:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show \"[\": none\n@netwok A\n#bibliography(\"works.bib\")\n</code></pre>",
      "raw": "Looks like a bug with the new text show rule processing. Minimized:\n```typ\n#show \"[\": none\n@netwok A\n#bibliography(\"works.bib\")\n```",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 37,
      "score": 52.4,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 3111,
      "post_number": 8,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-01T16:49:28.869Z",
      "updated_at": "2024-10-01T16:49:28.869Z",
      "cooked": "<p>I’ve opened <a href=\"https://github.com/typst/typst/issues/5090\" class=\"inline-onebox\">Text show rules on citations are broken · Issue #5090 · typst/typst · GitHub</a></p>",
      "raw": "I've opened https://github.com/typst/typst/issues/5090",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 36,
      "score": 47.2,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 3115,
      "post_number": 9,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-10-01T17:45:43.673Z",
      "updated_at": "2024-10-01T17:45:43.673Z",
      "cooked": "<p>Amazing, thanks! This is an initial submission, so i think I can live with the doubled up parentheses while this gets worked out. Thank you!</p>\n<aside class=\"quote no-group\" data-username=\"xkevio\" data-post=\"6\" data-topic=\"818\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/xkevio/48/37_2.png\" class=\"avatar\"> xkevio:</div>\n<blockquote>\n<p>Yeah I could’ve told you that it’s a new issue since I tested it before answering ^^</p>\n</blockquote>\n</aside>\n<p>That’s probably me projecting - I have not infrequently answered questions on similar forums, certain I know how something should behave and being wrong about it <img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\">. Appreciate the help!</p>",
      "raw": "Amazing, thanks! This is an initial submission, so i think I can live with the doubled up parentheses while this gets worked out. Thank you!\n\n[quote=\"xkevio, post:6, topic:818\"]\nYeah I could’ve told you that it’s a new issue since I tested it before answering ^^\n[/quote]\n\nThat's probably me projecting - I have not infrequently answered questions on similar forums, certain I know how something should behave and being wrong about it :smile:. Appreciate the help!",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 33,
      "score": 31.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3138,
      "post_number": 10,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T20:58:30.186Z",
      "updated_at": "2024-10-01T20:58:30.186Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"kescobo\" data-post=\"4\" data-topic=\"818\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/k/19798D/48.png\" class=\"avatar\"> kescobo:</div>\n<blockquote>\n<p>I just tried it on 0.10.1</p>\n</blockquote>\n</aside>\n<p>Typst doesn’t have a 0.10.1 version, only 0.10, 0.11, 0.11.1. This is probably a typo for 0.11.1.</p>",
      "raw": "[quote=\"kescobo, post:4, topic:818\"]\nI just tried it on 0.10.1\n[/quote]\n\nTypst doesn't have a 0.10.1 version, only 0.10, 0.11, 0.11.1. This is probably a typo for 0.11.1.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 33,
      "score": 26.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3204,
      "post_number": 11,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-02T12:11:18.479Z",
      "updated_at": "2024-10-02T12:11:18.479Z",
      "cooked": "<p>There is now a fix for this issue in the most recent development version.</p>",
      "raw": "There is now a fix for this issue in the most recent development version.",
      "reply_to_post_number": 9,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 28,
      "score": 45.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3208,
      "post_number": 12,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-10-02T12:45:01.257Z",
      "updated_at": "2024-10-03T19:18:18.762Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"10\" data-topic=\"818\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>This is probably a typo for 0.11.1.</p>\n</blockquote>\n</aside>\n<p>Correct, edited.</p>\n<aside class=\"quote no-group\" data-username=\"xkevio\" data-post=\"11\" data-topic=\"818\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/xkevio/48/37_2.png\" class=\"avatar\"> xkevio:</div>\n<blockquote>\n<p>There is now a fix</p>\n</blockquote>\n</aside>\n<p>Amazing, thanks for the rapid response everyone!</p>\n<p>Edit: confirming that <a class=\"mention\" href=\"/u/xkevio\">@xkevio</a> 's original answer now works on the latest development version <img src=\"https://forum.typst.app/images/emoji/apple/pray.png?v=12\" title=\":pray:\" class=\"emoji\" alt=\":pray:\" loading=\"lazy\" width=\"20\" height=\"20\">. There doesn’t seem to be a way to mark an answer as <code>answer</code> like there is on some discourse forums - is that because I asked in <a class=\"hashtag-cooked\" href=\"/c/general/4\" data-type=\"category\" data-slug=\"general\" data-id=\"4\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>General</span></a> instead of <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a>, or is that feature just not enabled?</p>",
      "raw": "[quote=\"Andrew, post:10, topic:818\"]\nThis is probably a typo for 0.11.1.\n[/quote]\n\nCorrect, edited. \n\n[quote=\"xkevio, post:11, topic:818\"]\nThere is now a fix\n[/quote]\n\nAmazing, thanks for the rapid response everyone!\n\nEdit: confirming that @xkevio 's original answer now works on the latest development version :pray:. There doesn't seem to be a way to mark an answer as `answer` like there is on some discourse forums - is that because I asked in #general instead of #questions, or is that feature just not enabled?",
      "reply_to_post_number": 10,
      "reply_count": 2,
      "quote_count": 2,
      "like_count": 0,
      "reads": 28,
      "score": 15.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3231,
      "post_number": 13,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-02T15:43:35.757Z",
      "updated_at": "2024-10-02T15:43:35.757Z",
      "cooked": "<p>There should be a way to mark an answer as a Solution as you can see in the Questions category but yeah maybe it’s because of the category this is in — this thread should probably be moved anyway.</p>",
      "raw": "There should be a way to mark an answer as a Solution as you can see in the Questions category but yeah maybe it's because of the category this is in — this thread should probably be moved anyway.",
      "reply_to_post_number": 12,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 19.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3234,
      "post_number": 14,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T15:50:42.220Z",
      "updated_at": "2024-10-02T15:50:42.220Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"kescobo\" data-post=\"12\" data-topic=\"818\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/k/19798D/48.png\" class=\"avatar\"> kescobo:</div>\n<blockquote>\n<p>is that because I asked in <a class=\"hashtag-cooked\" href=\"/c/general/4\" data-type=\"category\" data-slug=\"general\" data-id=\"4\" data-ref=\"general::category\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>General</span></a> instead of <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\" data-ref=\"questions::category\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a>, or is that feature just not enabled?</p>\n</blockquote>\n</aside>\n<p>Because the topic is in the <a class=\"hashtag-cooked\" href=\"/c/general/4\" data-type=\"category\" data-slug=\"general\" data-id=\"4\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>General</span></a> category.</p>",
      "raw": "[quote=\"kescobo, post:12, topic:818\"]\nis that because I asked in #general::category instead of #questions::category, or is that feature just not enabled?\n[/quote]\n\nBecause the topic is in the #general category.",
      "reply_to_post_number": 12,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 26,
      "score": 20.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:45.415084"
}
{
  "topic_metadata": {
    "id": 821,
    "title": "How can I access shadowed functions?",
    "slug": "how-can-i-access-shadowed-functions",
    "posts_count": 4,
    "created_at": "2024-09-30T20:01:56.520Z",
    "last_posted_at": "2024-10-01T17:58:33.015Z",
    "views": 103,
    "like_count": 5,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Eric",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 193
  },
  "posts": [
    {
      "id": 3045,
      "post_number": 1,
      "username": "gabe",
      "name": "",
      "created_at": "2024-09-30T20:01:56.633Z",
      "updated_at": "2024-09-30T20:01:56.633Z",
      "cooked": "<p>For example,</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let query(target) = {\n  let quarry = // assume something interesting is done\n  query(quarry) // I want to run super.query\n}\n</code></pre>\n<p>I tried super.query but that wasn’t it.</p>",
      "raw": "For example,\n\n```typ\n#let query(target) = {\n  let quarry = // assume something interesting is done\n  query(quarry) // I want to run super.query\n}\n```\n\nI tried super.query but that wasn't it.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 215.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 433
    },
    {
      "id": 3046,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-30T20:11:03.852Z",
      "updated_at": "2024-09-30T20:11:03.852Z",
      "cooked": "<p>you can assign the original function to a different name before shadowing it. I prefer an underscore as a prefix, as it is otherwise discouraged by Typst naming conventions:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let _query = query\n#let query(target) = {\n  let quarry = // assume something interesting is done\n  _query(quarry)\n}\n</code></pre>",
      "raw": "you can assign the original function to a different name before shadowing it. I prefer an underscore as a prefix, as it is otherwise discouraged by Typst naming conventions:\n```typ\n#let _query = query\n#let query(target) = {\n  let quarry = // assume something interesting is done\n  _query(quarry)\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 25.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3047,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-09-30T20:24:53.040Z",
      "updated_at": "2024-09-30T20:25:33.685Z",
      "cooked": "<p>There actually is another way, though I would prefer the solution of <a class=\"mention\" href=\"/u/sillyfreak\">@SillyFreak</a>. If you define your function in a variable as an <a href=\"https://typst.app/docs/reference/foundations/function/#unnamed\">unnamed function</a>, you can still access the original function inside:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let query = target =&gt; {\n  let quarry = // assume something interesting is done\n  query(quarry)\n}\n</code></pre>\n<p>Also, for completeness, starting with (the soon to be released) version 0.12, you will no longer need to store the original function yourself, as it will be available under the <code>std</code> namespace as <code>std.query</code>.</p>",
      "raw": "There actually is another way, though I would prefer the solution of @SillyFreak. If you define your function in a variable as an [unnamed function](https://typst.app/docs/reference/foundations/function/#unnamed), you can still access the original function inside:\n```typ\n#let query = target => {\n  let quarry = // assume something interesting is done\n  query(quarry)\n}\n```\n\nAlso, for completeness, starting with (the soon to be released) version 0.12, you will no longer need to store the original function yourself, as it will be available under the `std` namespace as `std.query`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 28,
      "score": 90.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 3117,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T17:58:33.015Z",
      "updated_at": "2024-10-01T17:58:59.825Z",
      "cooked": "<p>I can offer another naming scheme I use that is more descriptive: <code>query-old</code> (this also follows the kebab case convention). But yeah, soon this will be irrelevant.</p>",
      "raw": "I can offer another naming scheme I use that is more descriptive: `query-old` (this also follows the kebab case convention). But yeah, soon this will be irrelevant.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:44.604139"
}
