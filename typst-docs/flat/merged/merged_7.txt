{
  "topic_metadata": {
    "id": 1536,
    "title": "How can I create latex-like subequations?",
    "slug": "how-can-i-create-latex-like-subequations",
    "posts_count": 2,
    "created_at": "2024-11-04T17:00:59.898Z",
    "last_posted_at": "2024-12-10T07:32:38.584Z",
    "views": 233,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "math",
      "latex-migration"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 240
  },
  "posts": [
    {
      "id": 5129,
      "post_number": 1,
      "username": "cgahr",
      "name": "Constantin Gahr",
      "created_at": "2024-11-04T17:01:00.142Z",
      "updated_at": "2024-12-15T10:31:23.415Z",
      "cooked": "<p>I want to create latex like subequations. Using the following code</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let subequation(..it) = (\n  figure(\n    {\n      context {\n        let n = counter(math.equation).at(here()).first()\n\n        let c = counter(\"subequation\")\n        c.update((\n          counter(heading).get().first(),\n          n + 1,\n          0,\n        ))\n\n        set math.equation(numbering: n =&gt; {\n          numbering(\"(1.1a)\", ..c.get())\n        })\n        for i in it.pos() {\n          c.step(level: 3)\n          block[ #i ]\n        }\n        counter(math.equation).update(n + 1)\n      }\n    },\n    supplement: \"Equation\",\n    kind: \"subequation\",\n  )\n)\n\n#show figure.where(kind: \"subequation\"): set figure(numbering: n =&gt; numbering(\n  \"(1.1)\",\n  ..(counter(heading).get().first(), counter(math.equation).get().first() + 1),\n))\n\n\n\n#subequation([$ a $ &lt;a&gt;], [ $ b $ &lt;b&gt;]) &lt;both&gt;\n@label3 consists of @label and @label2\n</code></pre>\n<p>I’m getting quite close. The label works properly, i.e. <code>@a</code> references equation (1.23a). I can’t, however, reference both equations at once using the <code>@both</code> label. I understand why, but like to find a workaround anyways.</p>\n<p>Any ideas?</p>\n<p>EDIT: I updated my code. Now both correctly references (1.23). Maybe somebody has us for the example.</p>\n<p>What does not work, however, is alignment using <code>&amp;</code>…</p>",
      "raw": "I want to create latex like subequations. Using the following code\n```typst\n#let subequation(..it) = (\n  figure(\n    {\n      context {\n        let n = counter(math.equation).at(here()).first()\n\n        let c = counter(\"subequation\")\n        c.update((\n          counter(heading).get().first(),\n          n + 1,\n          0,\n        ))\n\n        set math.equation(numbering: n => {\n          numbering(\"(1.1a)\", ..c.get())\n        })\n        for i in it.pos() {\n          c.step(level: 3)\n          block[ #i ]\n        }\n        counter(math.equation).update(n + 1)\n      }\n    },\n    supplement: \"Equation\",\n    kind: \"subequation\",\n  )\n)\n\n#show figure.where(kind: \"subequation\"): set figure(numbering: n => numbering(\n  \"(1.1)\",\n  ..(counter(heading).get().first(), counter(math.equation).get().first() + 1),\n))\n\n\n\n#subequation([$ a $ <a>], [ $ b $ <b>]) <both>\n@label3 consists of @label and @label2\n```\nI'm getting quite close. The label works properly, i.e. `@a` references equation (1.23a). I can't, however, reference both equations at once using the `@both` label. I understand why, but like to find a workaround anyways.\n\nAny ideas?\n\nEDIT: I updated my code. Now both correctly references (1.23). Maybe somebody has us for the example.\n\nWhat does not work, however, is alignment using `&`...",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 569.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 740
    },
    {
      "id": 6453,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-12-10T07:32:38.584Z",
      "updated_at": "2024-12-10T07:32:38.584Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/cgahr\">@cgahr</a>,<br>\nif you are interested other users have discussed this issue at length:</p>\n<ul>\n<li><a href=\"https://forum.typst.app/t/how-can-i-set-numbering-for-sub-equations/1603\" class=\"inline-onebox\">How can I set numbering for sub-equations?</a></li>\n<li><a href=\"https://forum.typst.app/t/how-to-implement-sub-numbering-for-custom-figures-and-equations/1978\" class=\"inline-onebox\">How to implement sub-numbering for custom figures and equations?</a></li>\n</ul>\n<p>There is a package called <a href=\"https://typst.app/universe/package/equate/\">equate</a>.</p>\n<p>Related:</p>\n<ul>\n<li><a href=\"https://forum.typst.app/t/how-can-i-number-equations-within-sections/1936\" class=\"inline-onebox\">How can I number equations within sections?</a></li>\n</ul>",
      "raw": "Hello @cgahr,\nif you are interested other users have discussed this issue at length:\n- https://forum.typst.app/t/how-can-i-set-numbering-for-sub-equations/1603\n- https://forum.typst.app/t/how-to-implement-sub-numbering-for-custom-figures-and-equations/1978\n\nThere is a package called [equate](https://typst.app/universe/package/equate/). \n\nRelated:\n- https://forum.typst.app/t/how-can-i-number-equations-within-sections/1936",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 20.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:55:31.731959"
}
{
  "topic_metadata": {
    "id": 1540,
    "title": "Are there equivalent to the LaTeX microtype package and the memoir document class?",
    "slug": "are-there-equivalent-to-the-latex-microtype-package-and-the-memoir-document-class",
    "posts_count": 6,
    "created_at": "2024-11-04T20:34:31.643Z",
    "last_posted_at": "2025-04-14T06:58:55.597Z",
    "views": 583,
    "like_count": 5,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 480
  },
  "posts": [
    {
      "id": 5138,
      "post_number": 1,
      "username": "untouched_coliseum",
      "name": "untouched_coliseum",
      "created_at": "2024-11-04T20:34:32.081Z",
      "updated_at": "2024-12-07T08:07:28.317Z",
      "cooked": "<p>Are there plans to create a <code>microtype</code> type package for typst? How does the current state of typst’s typography compare to LaTeX + microtype?</p>\n<p>Is there a <code>memoir</code> class available for typst?</p>",
      "raw": "Are there plans to create a `microtype` type package for typst? How does the current state of typst's typography compare to LaTeX + microtype?  \n\nIs there a `memoir` class available for typst?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 74,
      "score": 1669.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 742
    },
    {
      "id": 5152,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-05T08:10:30.908Z",
      "updated_at": "2024-11-05T08:10:30.908Z",
      "cooked": "<p>Hello and welcome <a class=\"mention\" href=\"/u/untouched_coliseum\">@untouched_coliseum</a>!</p>\n<p>Looking at <a href=\"https://texlive.mycozy.space/macros/latex/contrib/microtype/microtype.pdf\" rel=\"noopener nofollow ugc\">microtype’s</a> features, it seems it is already available in Typst in most parts:</p>\n<ul>\n<li><em>Protrusion</em> should be font hanging, moving glyphs into the margin, see <a href=\"https://typst.app/docs/reference/text/text/#:~:text=overhang,-bool\"><code>text(overhang)</code></a>.</li>\n<li><em>Expansion</em> sounds like <a href=\"https://typst.app/docs/reference/text/text/#:~:text=stretch,-ratio\"><code>text(stretch)</code></a>?</li>\n<li><em>Tracking</em>, see <a href=\"https://typst.app/docs/reference/text/text/#parameters-tracking:~:text=tracking,-length\"><code>text(tracking)</code></a>,</li>\n<li><em>Spacing</em>, see <a href=\"https://typst.app/docs/reference/text/text/#:~:text=spacing,-relative\"><code>text(spacing)</code></a>, <a href=\"https://typst.app/docs/reference/text/text/#:~:text=cjk%2Dlatin%2Dspacing,-none\"><code>text(cjk-latin-spacing)</code></a>,</li>\n<li><em>kerning</em>, see <a href=\"https://typst.app/docs/reference/text/text/#parameters-tracking:~:text=kerning,-bool\"><code>text(kerning)</code></a>,</li>\n<li><em>ligatures</em>, see <a href=\"https://typst.app/docs/reference/text/text/#parameters-tracking:~:text=Whether%20standard%20ligatures%20are%20active\"><code>text(ligatures)</code></a>, <a href=\"https://typst.app/docs/reference/text/text/#parameters-tracking:~:text=discretionary%2Dligatures,-bool\"><code>text(discretionary-ligatures)</code></a>, <a href=\"https://typst.app/docs/reference/text/text/#parameters-tracking:~:text=Default%3A%20false-,historical%2Dligatures,-bool\"><code>text(historical-ligatures)</code></a></li>\n</ul>\n<p>I don’t think control is as precise as it is in microtype, but most usecases should be satisfied with this amount of customization. I’m not even sure a package would be the right tool to modify typography at this level… In any case, don’t hesitate to go through each argument in text, it’s pretty long, but also pretty exhaustive.</p>\n<p>As for the <code>memoir</code> template, I can’t say I have seen a typst template named “memoir”, but there are plenty of thesis templates.<br>\nYou can look at officially affiliated templates for example <a href=\"https://typst.app/universe/search?q=&amp;kind=templates&amp;official=true&amp;featured=false\">here</a>.</p>",
      "raw": "Hello and welcome @untouched_coliseum!\n\nLooking at [microtype's](https://texlive.mycozy.space/macros/latex/contrib/microtype/microtype.pdf) features, it seems it is already available in Typst in most parts:\n- *Protrusion* should be font hanging, moving glyphs into the margin, see [`text(overhang)`](https://typst.app/docs/reference/text/text/#:~:text=overhang,-bool).\n- *Expansion* sounds like [`text(stretch)`](https://typst.app/docs/reference/text/text/#:~:text=stretch,-ratio)?\n- *Tracking*, see [`text(tracking)`](https://typst.app/docs/reference/text/text/#parameters-tracking:~:text=tracking,-length), \n- *Spacing*, see [`text(spacing)`](https://typst.app/docs/reference/text/text/#:~:text=spacing,-relative), [`text(cjk-latin-spacing)`](https://typst.app/docs/reference/text/text/#:~:text=cjk%2Dlatin%2Dspacing,-none), \n- *kerning*, see [`text(kerning)`](https://typst.app/docs/reference/text/text/#parameters-tracking:~:text=kerning,-bool), \n- *ligatures*, see [`text(ligatures)`](https://typst.app/docs/reference/text/text/#parameters-tracking:~:text=Whether%20standard%20ligatures%20are%20active), [`text(discretionary-ligatures)`](https://typst.app/docs/reference/text/text/#parameters-tracking:~:text=discretionary%2Dligatures,-bool), [`text(historical-ligatures)`](https://typst.app/docs/reference/text/text/#parameters-tracking:~:text=Default%3A%20false-,historical%2Dligatures,-bool)\n\nI don't think control is as precise as it is in microtype, but most usecases should be satisfied with this amount of customization. I'm not even sure a package would be the right tool to modify typography at this level... In any case, don't hesitate to go through each argument in text, it's pretty long, but also pretty exhaustive.\n\nAs for the `memoir` template, I can't say I have seen a typst template named \"memoir\", but there are plenty of thesis templates.\nYou can look at officially affiliated templates for example [here](https://typst.app/universe/search?q=&kind=templates&official=true&featured=false).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 72,
      "score": 144.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 6376,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-12-06T07:57:07.462Z",
      "updated_at": "2024-12-06T07:57:07.462Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/untouched_coliseum\">@untouched_coliseum</a>, I have changed your post title to<br>\n“Are there equivalent to the LaTeX microtype package and the memoir document class?”, tell me if you think that’s incorrect!</p>",
      "raw": "Hello @untouched_coliseum, I have changed your post title to\n\"Are there equivalent to the LaTeX microtype package and the memoir document class?\", tell me if you think that's incorrect!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 55,
      "score": 71.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 7942,
      "post_number": 5,
      "username": "Gael",
      "name": "Gael",
      "created_at": "2025-01-27T22:04:07.590Z",
      "updated_at": "2025-01-27T22:13:32.701Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/quachpas\">@quachpas</a>, you showed that Typst has all the primitives to do what is required but what <em>expansion</em> <s>and <em>tracking</em></s> are about in the context of <code>microtype</code> performing tiny per-paragraph alterations that are hardly noticeable by eye but makes spacing more even overall.</p>\n<p><em>Edit: I was wrong about tracking.</em></p>",
      "raw": "@quachpas, you showed that Typst has all the primitives to do what is required but what *expansion* ~~and *tracking*~~ are about in the context of `microtype` performing tiny per-paragraph alterations that are hardly noticeable by eye but makes spacing more even overall.\n\n*Edit: I was wrong about tracking.*",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 76.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1102
    },
    {
      "id": 7947,
      "post_number": 6,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-01-28T06:24:47.685Z",
      "updated_at": "2025-01-28T06:24:47.685Z",
      "cooked": "<p>You’re quite right. The stretch parameter in Typst is completely manual unlike microtype’s feature <code>expansion</code>, where like you said the package does automatic expansion (pdfTeX&gt;1.20).<br>\nI don’t think it would be possible to implement that kind of customization within Typst itself (I might be wrong, some people are creating crazy packages everyday…)</p>",
      "raw": "You're quite right. The stretch parameter in Typst is completely manual unlike microtype's feature `expansion`, where like you said the package does automatic expansion (pdfTeX>1.20).\nI don't think it would be possible to implement that kind of customization within Typst itself (I might be wrong, some people are creating crazy packages everyday...)",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 66.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 11054,
      "post_number": 7,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-04-14T06:58:55.597Z",
      "updated_at": "2025-04-14T06:58:55.597Z",
      "cooked": "<p>I saw the following PR which implements some more exciting microtype features <a href=\"https://github.com/typst/typst/pull/6161\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Add microtypography in paragraph justification by diquah · Pull Request #6161 · typst/typst · GitHub</a></p>",
      "raw": "I saw the following PR which implements some more exciting microtype features https://github.com/typst/typst/pull/6161",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 24.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 1272
    }
  ],
  "scraped_at": "2025-06-10T09:55:30.682707"
}
{
  "topic_metadata": {
    "id": 1544,
    "title": "How I can ensure that my custom titleblock in my template isn't hyphenated?",
    "slug": "how-i-can-ensure-that-my-custom-titleblock-in-my-template-isnt-hyphenated",
    "posts_count": 7,
    "created_at": "2024-11-05T01:13:59.491Z",
    "last_posted_at": "2024-11-07T12:21:28.696Z",
    "views": 269,
    "like_count": 1,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "quachpas",
    "tags": [
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 864
  },
  "posts": [
    {
      "id": 5142,
      "post_number": 1,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-05T01:13:59.583Z",
      "updated_at": "2024-11-05T19:46:00.347Z",
      "cooked": "<p>I want to have a long main title in my template, how I can ensure that the words aren’t hyphenated, instead they are moved to the new line?</p>",
      "raw": "I want to have a long main title in my template, how I can ensure that the words aren't hyphenated, instead they are moved to the new line?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 843.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5145,
      "post_number": 2,
      "username": "Anemona-Anonima",
      "name": "Esteban Muñoz",
      "created_at": "2024-11-05T03:59:49.204Z",
      "updated_at": "2024-11-05T03:59:49.204Z",
      "cooked": "<p>Headings are not hyphenated by default. If for some reason they are hyphenated in your template you can deactivate it with a show rule.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= urbane Stoicos irridente, statua est in quo a nobis philosophia defensa et collaudata\n\n#show heading: set text(hyphenate: true)\n\n= urbane Stoicos irridente, statua est in quo a nobis philosophia defensa et collaudata\n\n#show heading: set text(hyphenate: false)\n\n= urbane Stoicos irridente, statua est in quo a nobis philosophia defensa et collaudata\n</code></pre>\n<details>\n<summary>\nResult</summary>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/3/372a8e327e8d34c5942348c606e0edad70cd0ec3.png\" alt=\"non-hyphenated-heading\" data-base62-sha1=\"7S1r09jbxc6Sxh1fkM27IQjH3Vh\" width=\"595\" height=\"149\"></p>\n</details>",
      "raw": "Headings are not hyphenated by default. If for some reason they are hyphenated in your template you can deactivate it with a show rule.\n\n```typ\n= urbane Stoicos irridente, statua est in quo a nobis philosophia defensa et collaudata\n\n#show heading: set text(hyphenate: true)\n\n= urbane Stoicos irridente, statua est in quo a nobis philosophia defensa et collaudata\n\n#show heading: set text(hyphenate: false)\n\n= urbane Stoicos irridente, statua est in quo a nobis philosophia defensa et collaudata\n```\n\n\n[details=\"Result\"]\n![non-hyphenated-heading|595x149](upload://7S1r09jbxc6Sxh1fkM27IQjH3Vh.png)\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 42,
      "score": 43.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 41
    },
    {
      "id": 5165,
      "post_number": 3,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-05T16:03:23.067Z",
      "updated_at": "2024-11-05T16:07:07.983Z",
      "cooked": "<p>thanks, I should phrase my question differently - how I can ensure that my custom titleblock isn’t hyphenated (or is less prone to hyphenation when the line below has enough free space)?</p>\n<p>The block in the template is defined as below</p>\n<pre><code class=\"lang-auto\"> /* Content front matter */\n\n  let titleblock(\n    body, \n    width: 100%, \n    size: 1.5em, \n    weight: \"bold\", \n    above: 1em, \n    below: 0em\n  ) = [\n    #align(center)[\n      #block(width: width, above: above, below: below)[\n        #text(weight: weight, size: size)[#body]\n      ]\n    ]\n  ]\n\n  if title != none {\n    titleblock(title)\n  }\n</code></pre>\n<p>I am struggling with long  titles, for example:<br>\n<code>title: Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit...</code><br>\ngives me hyphenation in the middle of the `dolor``</p>",
      "raw": "thanks, I should phrase my question differently - how I can ensure that my custom titleblock isn't hyphenated (or is less prone to hyphenation when the line below has enough free space)?\n\nThe block in the template is defined as below\n```\n /* Content front matter */\n\n  let titleblock(\n    body, \n    width: 100%, \n    size: 1.5em, \n    weight: \"bold\", \n    above: 1em, \n    below: 0em\n  ) = [\n    #align(center)[\n      #block(width: width, above: above, below: below)[\n        #text(weight: weight, size: size)[#body]\n      ]\n    ]\n  ]\n\n  if title != none {\n    titleblock(title)\n  }\n````\n I am struggling with long  titles, for example: \n```title: Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit...``` \ngives me hyphenation in the middle of the `dolor``",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 27.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5198,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-06T08:59:56.650Z",
      "updated_at": "2024-11-06T08:59:56.650Z",
      "cooked": "<p>Hello! which version of typst are you using? You can find that out by typing <code>typst --version</code>, or check in the webapp in the project settings.<br>\nI am unable to reproduce your issue.</p>",
      "raw": "Hello! which version of typst are you using? You can find that out by typing `typst --version`, or check in the webapp in the project settings.\nI am unable to reproduce your issue.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 11.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5236,
      "post_number": 5,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-06T20:02:45.323Z",
      "updated_at": "2024-11-09T05:48:43.386Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/quachpas\">@quachpas</a> this was on <code>0.11</code>, on <code>0.12</code> dolor is not hyphenated, but when  I replace it with <code>dolordolor</code> it is, I think there is some other customization within  the code that might cause this behaviour  (I took typst code  from existing template and modified it  for Minimum Reproducible Example)</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// Paragraph and text settings that affect title area\n#set par(justify: true, leading: 0.6em, spacing: 1em, first-line-indent: 0cm)\n\n#set text(font: (\"Times New Roman\", \"Arial\"), size: 11pt, lang: \"en\", region: \"US\")\n\n// Title block function\n#let titleblock(body, width: 100%, size: 1.5em, weight: \"bold\", above: 1em, below: 0em) = [\n  #align(center)[\n    #block(width: width, above: above, below: below)[\n      #text(weight: weight, size: size)[#body]\n    ]\n  ]\n]\n\n// Main document function\n#let preprint(\n  title: none,\n  running-head: none,\n  authors: (),\n  affiliations: none,\n  abstract: none,\n  keywords: none,\n  wordcount: none,\n  authornote: none,\n  citation: none,\n  date: none,\n  branding: none,\n  leading: 0.6em,\n  spacing: 1em,\n  first-line-indent: 0cm,\n  linkcolor: black,\n  margin: (x: 3.2cm, y: 3cm),\n  paper: \"a4\",\n  lang: \"en\",\n  region: \"US\",\n  font: (\"Times New Roman\", \"Arial\"),\n  fontsize: 11pt,\n) = {\n  // Set link colors for DOIs etc.\n  show link: set text(fill: linkcolor)\n  show cite: set text(fill: linkcolor)\n\n  // Format author strings\n  let author_strings = ()\n  if authors != none {\n    for a in authors {\n      let author_string = [\n        #box[#a.name]#if authors.len() &gt; 1 [#super[#a.affiliation]]#if a.keys().contains(\"email\") { [\\*] }\n        #if a.keys().contains(\"orcid\") {\n          box(height: 1em, link(a.orcid, figure(image(\"orcid.svg\", height: 0.9em))))\n        }\n      ]\n      if a.keys().contains(\"corresponding\") {\n        authornote = [\\*Send correspondence to: #a.name, #a.email.\\ #authornote]\n      }\n      author_strings.push(author_string)\n    }\n  }\n\n  // Page settings for title page\n  set page(paper: paper, margin: margin, numbering: \"1\", header-ascent: 50%, header: locate(loc =&gt; {\n    if [#loc.page()] == [1] {\n      set align(right)\n      set text(size: 0.85em)\n      box(inset: 0.2em, [\n        #date\n        #if citation != none {\n          linebreak()\n          link(\"https://doi.org/\" + citation.doi, \"https://doi.org/\" + citation.doi)\n        }\n      ])\n    } else {\n      grid(columns: (1fr, 1fr), align(left)[#running-head], align(right)[#counter(page).display()])\n    }\n  }), footer-descent: 24pt, footer: locate(loc =&gt; {\n    if [#loc.page()] == [1] {\n      [#text(size: 0.85em)[#authornote]]\n    } else {\n      []\n    }\n  }))\n\n  // Paragraph settings\n  set par(justify: true, leading: leading, first-line-indent: first-line-indent)\n\n  if sys.version &gt;= version(0, 12, 0) {\n    set par(spacing: spacing)\n  } else {\n    show par: set block(spacing: spacing)\n  }\n\n  // Text settings\n  set text(lang: lang, region: region, font: font, size: fontsize)\n\n  // Apply title\n  if title != none {\n    titleblock(title)\n  }\n\n  // Apply authors\n  if authors != none {\n    titleblock(weight: \"regular\", size: 1.25em, [#author_strings.join(\", \", last: \" &amp; \")])\n  }\n\n  // Apply affiliations\n  if affiliations != none {\n    titleblock(weight: \"regular\", size: 1.1em, below: 2em, for a in affiliations [\n      #if authors.len() &gt; 1 [#super[#a.id]]#a.name#if a.keys().contains(\"department\") [, #a.department] \\\n    ])\n  }\n\n  // Add vertical space after front matter\n  v(2em)\n}\n\n// Example usage\n#show: doc =&gt; preprint(\n  title: [Neque porro quisquam est qui dolorem ipsum quia dolordolor sit amet, consectetur, adipisci velit],\n  running-head: [Running head],\n  authors: (\n    (name: [Author Author], affiliation: [1], corresponding: true, email: [authoremail]),\n    (name: [Author Author], affiliation: [1]),\n    (name: [Author Author], affiliation: [1]),\n    (name: [Author Author], affiliation: [1]),\n    (name: [Author Author], affiliation: [1]),\n  ),\n  affiliations: ((id: \"1\", name: \"Test University\"),),\n  authornote: [This is an example author note.],\n  date: [2024-11-06],\n  linkcolor: blue,\n  font: (\"Libertinus Serif\",),\n  fontsize: 10.5pt,\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/1/1e00f32ba31b2cab332271fb3917bee17a8dae35.png\" alt=\"image\" data-base62-sha1=\"4hqmgT0nFWTOeGOGKFeg7dlgkAZ\" width=\"638\" height=\"191\"></p>\n<p>It also gives me spaces after author names and before commas when there is no orcid included, how can I fix it?</p>",
      "raw": "Hi @quachpas this was on `0.11`, on `0.12` dolor is not hyphenated, but when  I replace it with `dolordolor` it is, I think there is some other customization within  the code that might cause this behaviour  (I took typst code  from existing template and modified it  for Minimum Reproducible Example)\n\n```typ\n// Paragraph and text settings that affect title area\n#set par(justify: true, leading: 0.6em, spacing: 1em, first-line-indent: 0cm)\n\n#set text(font: (\"Times New Roman\", \"Arial\"), size: 11pt, lang: \"en\", region: \"US\")\n\n// Title block function\n#let titleblock(body, width: 100%, size: 1.5em, weight: \"bold\", above: 1em, below: 0em) = [\n  #align(center)[\n    #block(width: width, above: above, below: below)[\n      #text(weight: weight, size: size)[#body]\n    ]\n  ]\n]\n\n// Main document function\n#let preprint(\n  title: none,\n  running-head: none,\n  authors: (),\n  affiliations: none,\n  abstract: none,\n  keywords: none,\n  wordcount: none,\n  authornote: none,\n  citation: none,\n  date: none,\n  branding: none,\n  leading: 0.6em,\n  spacing: 1em,\n  first-line-indent: 0cm,\n  linkcolor: black,\n  margin: (x: 3.2cm, y: 3cm),\n  paper: \"a4\",\n  lang: \"en\",\n  region: \"US\",\n  font: (\"Times New Roman\", \"Arial\"),\n  fontsize: 11pt,\n) = {\n  // Set link colors for DOIs etc.\n  show link: set text(fill: linkcolor)\n  show cite: set text(fill: linkcolor)\n\n  // Format author strings\n  let author_strings = ()\n  if authors != none {\n    for a in authors {\n      let author_string = [\n        #box[#a.name]#if authors.len() > 1 [#super[#a.affiliation]]#if a.keys().contains(\"email\") { [\\*] }\n        #if a.keys().contains(\"orcid\") {\n          box(height: 1em, link(a.orcid, figure(image(\"orcid.svg\", height: 0.9em))))\n        }\n      ]\n      if a.keys().contains(\"corresponding\") {\n        authornote = [\\*Send correspondence to: #a.name, #a.email.\\ #authornote]\n      }\n      author_strings.push(author_string)\n    }\n  }\n\n  // Page settings for title page\n  set page(paper: paper, margin: margin, numbering: \"1\", header-ascent: 50%, header: locate(loc => {\n    if [#loc.page()] == [1] {\n      set align(right)\n      set text(size: 0.85em)\n      box(inset: 0.2em, [\n        #date\n        #if citation != none {\n          linebreak()\n          link(\"https://doi.org/\" + citation.doi, \"https://doi.org/\" + citation.doi)\n        }\n      ])\n    } else {\n      grid(columns: (1fr, 1fr), align(left)[#running-head], align(right)[#counter(page).display()])\n    }\n  }), footer-descent: 24pt, footer: locate(loc => {\n    if [#loc.page()] == [1] {\n      [#text(size: 0.85em)[#authornote]]\n    } else {\n      []\n    }\n  }))\n\n  // Paragraph settings\n  set par(justify: true, leading: leading, first-line-indent: first-line-indent)\n\n  if sys.version >= version(0, 12, 0) {\n    set par(spacing: spacing)\n  } else {\n    show par: set block(spacing: spacing)\n  }\n\n  // Text settings\n  set text(lang: lang, region: region, font: font, size: fontsize)\n\n  // Apply title\n  if title != none {\n    titleblock(title)\n  }\n\n  // Apply authors\n  if authors != none {\n    titleblock(weight: \"regular\", size: 1.25em, [#author_strings.join(\", \", last: \" & \")])\n  }\n\n  // Apply affiliations\n  if affiliations != none {\n    titleblock(weight: \"regular\", size: 1.1em, below: 2em, for a in affiliations [\n      #if authors.len() > 1 [#super[#a.id]]#a.name#if a.keys().contains(\"department\") [, #a.department] \\\n    ])\n  }\n\n  // Add vertical space after front matter\n  v(2em)\n}\n\n// Example usage\n#show: doc => preprint(\n  title: [Neque porro quisquam est qui dolorem ipsum quia dolordolor sit amet, consectetur, adipisci velit],\n  running-head: [Running head],\n  authors: (\n    (name: [Author Author], affiliation: [1], corresponding: true, email: [authoremail]),\n    (name: [Author Author], affiliation: [1]),\n    (name: [Author Author], affiliation: [1]),\n    (name: [Author Author], affiliation: [1]),\n    (name: [Author Author], affiliation: [1]),\n  ),\n  affiliations: ((id: \"1\", name: \"Test University\"),),\n  authornote: [This is an example author note.],\n  date: [2024-11-06],\n  linkcolor: blue,\n  font: (\"Libertinus Serif\",),\n  fontsize: 10.5pt,\n)\n```\n![image|638x191](upload://4hqmgT0nFWTOeGOGKFeg7dlgkAZ.png)\n\nIt also gives me spaces after author names and before commas when there is no orcid included, how can I fix it?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 16.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5251,
      "post_number": 6,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-07T08:36:47.894Z",
      "updated_at": "2024-11-07T08:36:47.894Z",
      "cooked": "<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/text/text/#parameters-hyphenate\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/text/text/#parameters-hyphenate\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/text/text/#parameters-hyphenate\" target=\"_blank\" rel=\"noopener\">Text Function – Typst Documentation</a></h3>\n\n  <p>Documentation for the `text` function.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Add <code>hyphenate: false</code>!</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#text(weight: weight, size: size, hyphenate: false)[#body]\n</code></pre>\n<p>Also, don’t hesitate to add “typ” to your blocks, so it highlights the code, i.e. <code> ```typ</code>.</p>",
      "raw": "https://typst.app/docs/reference/text/text/#parameters-hyphenate\n\nAdd `hyphenate: false`! \n\n```typ\n#text(weight: weight, size: size, hyphenate: false)[#body]\n```\n\nAlso, don't hesitate to add \"typ\" to your blocks, so it highlights the code, i.e. ` ```typ`.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 15.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5255,
      "post_number": 7,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-07T12:21:28.696Z",
      "updated_at": "2024-11-07T12:21:28.696Z",
      "cooked": "<p>thanks! I was trying to add  something like it before, but maybe I used wrong syntax</p>",
      "raw": "thanks! I was trying to add  something like it before, but maybe I used wrong syntax",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    }
  ],
  "scraped_at": "2025-06-10T09:55:29.892898"
}
{
  "topic_metadata": {
    "id": 1549,
    "title": "How do I reference plain text with tags to be used later in the document?",
    "slug": "how-do-i-reference-plain-text-with-tags-to-be-used-later-in-the-document",
    "posts_count": 2,
    "created_at": "2024-11-05T10:39:10.684Z",
    "last_posted_at": "2025-03-05T08:13:11.054Z",
    "views": 297,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Adrian_Weitkemper",
    "tags": [
      "referencing"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 401
  },
  "posts": [
    {
      "id": 5154,
      "post_number": 1,
      "username": "YellowSeas",
      "name": "John Joy",
      "created_at": "2024-11-05T10:39:10.772Z",
      "updated_at": "2025-03-08T20:28:35.941Z",
      "cooked": "<p>Good day!</p>\n<p>I’ve been using Typst for the past couple weeks for creating template reports and have been loving it since!</p>\n<p>I’m trying to tackle a scenario where I have a text listed in a table, and I want that exact text to be referenced below, perhaps as a heading or text. Below is an example code of what I am trying to achieve.</p>\n<pre><code class=\"lang-auto\">The below @tab:SimulationsPerformed describes the scenarios run as per the requirements:\n#figure(\n  caption: \"Simulations performed\",\n  table(\n    columns:(15%,35%,50%), \n    table.header([*CASE*],[*VALUES*],[*REMARKS*]),\n    [A.1 &lt;0.9Case&gt;],[0.9],[All units in operation],\n    [A.2],[1],[All units in operation],\n    [A.3],[1.1],[All units in operation],\n    )\n  )&lt;tab:SimulationsPerformed&gt;\n\nAs per @0.9Case, blah blah blah.\nOr I want a heading from the referenced text.\n=== @0.9Case\n</code></pre>\n<p>Hope you case see here from the example that, I want the text “A.1” to be referenceable as text or to be part of a heading.<br>\nCurrently with the above example, I’m getting an error at the referencing point as  “cannot reference text”.</p>\n<p>I’ve checked the Typst documentation and it seems like only headings, equations, etc. can be referenced, and that too by the heading/eqn. number?</p>\n<p>I would appreciate any inputs to help out here.</p>\n<p>Thank you in advance!</p>",
      "raw": "Good day!\n\nI've been using Typst for the past couple weeks for creating template reports and have been loving it since!\n\nI'm trying to tackle a scenario where I have a text listed in a table, and I want that exact text to be referenced below, perhaps as a heading or text. Below is an example code of what I am trying to achieve.\n\n```\nThe below @tab:SimulationsPerformed describes the scenarios run as per the requirements:\n#figure(\n  caption: \"Simulations performed\",\n  table(\n    columns:(15%,35%,50%), \n    table.header([*CASE*],[*VALUES*],[*REMARKS*]),\n    [A.1 <0.9Case>],[0.9],[All units in operation],\n    [A.2],[1],[All units in operation],\n    [A.3],[1.1],[All units in operation],\n    )\n  )<tab:SimulationsPerformed>\n\nAs per @0.9Case, blah blah blah.\nOr I want a heading from the referenced text.\n=== @0.9Case\n```\nHope you case see here from the example that, I want the text \"A.1\" to be referenceable as text or to be part of a heading.\nCurrently with the above example, I'm getting an error at the referencing point as  \"cannot reference text\".\n\nI've checked the Typst documentation and it seems like only headings, equations, etc. can be referenced, and that too by the heading/eqn. number?\n\nI would appreciate any inputs to help out here.\n\nThank you in advance!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 49,
      "score": 1059.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 645
    },
    {
      "id": 9394,
      "post_number": 3,
      "username": "Adrian_Weitkemper",
      "name": "Adron",
      "created_at": "2025-03-05T08:13:11.054Z",
      "updated_at": "2025-03-08T18:00:42.836Z",
      "cooked": "<p>Hi there! In the documentation it also says</p>\n<blockquote>\n<p>To create a custom referenceable element like a theorem, you can create a figure of a custom <a href=\"https://typst.app/docs/reference/model/figure/#parameters-kind\"><code>kind</code></a> and write a show rule for it. In the future, there might be a more direct way to define a custom referenceable element.</p>\n</blockquote>\n<p>So instead of <code>[A.1] &lt;0.9Case&gt;</code> you can write <code>#figure(kind: \"table\", supplement: \"value\")[A.1] &lt;0.9Case&gt;]</code>. The kind is important for the counting. Image, table, heading are examples for pre-implemented kinds I think. The supplement is the text that is displayed at the reference. In my example it would say <code>value 1</code>, <code>value 2</code>, and so on.<br>\nIf you would like to have just the value shown as text, you could use the <a href=\"https://typst.app/docs/reference/model/link/\">link function</a>:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">As per #link(&lt;0.9Case&gt;)[0.9], blah blah blah.\nOr I want a heading from the referenced text.\n=== #link(&lt;0.9Case&gt;)[0.9]\n</code></pre>\n<p>If you have further questions don’t hesitate to ask again <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hi there! In the documentation it also says\n\n> To create a custom referenceable element like a theorem, you can create a figure of a custom [`kind`](https://typst.app/docs/reference/model/figure/#parameters-kind) and write a show rule for it. In the future, there might be a more direct way to define a custom referenceable element.\n\nSo instead of `[A.1] <0.9Case>` you can write `#figure(kind: \"table\", supplement: \"value\")[A.1] <0.9Case>]`. The kind is important for the counting. Image, table, heading are examples for pre-implemented kinds I think. The supplement is the text that is displayed at the reference. In my example it would say `value 1`, `value 2`, and so on. \nIf you would like to have just the value shown as text, you could use the [link function](https://typst.app/docs/reference/model/link/): \n```typst\nAs per #link(<0.9Case>)[0.9], blah blah blah.\nOr I want a heading from the referenced text.\n=== #link(<0.9Case>)[0.9]\n```\nIf you have further questions don't hesitate to ask again :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 10.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 277
    }
  ],
  "scraped_at": "2025-06-10T09:55:29.192282"
}
{
  "topic_metadata": {
    "id": 155,
    "title": "Is there a way to retrieve the current file name, list files, etc. within Typst?",
    "slug": "is-there-a-way-to-retrieve-the-current-file-name-list-files-etc-within-typst",
    "posts_count": 3,
    "created_at": "2024-09-15T07:53:49.285Z",
    "last_posted_at": "2024-09-15T10:00:41.608Z",
    "views": 925,
    "like_count": 1,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Tinger",
    "tags": [
      "scripting",
      "data-loading"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 385
  },
  "posts": [
    {
      "id": 642,
      "post_number": 1,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-15T07:53:49.393Z",
      "updated_at": "2024-09-15T15:54:07.518Z",
      "cooked": "<p>For example, some documents may be supposed to have the file name in the footer. Other documents may want to include all chapters or other contents that are defined as <code>*.typ</code> files in a specific directory.</p>\n<p>Can one write something like this?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(\n  footer: [#sys.filename],\n)\n\n#for chapter in sys.list-files(\"chapters/*.typ\").sorted() {\n  include chapter\n}\n</code></pre>\n<p>These specific commands don’t work, but is there something equivalent?</p>",
      "raw": "For example, some documents may be supposed to have the file name in the footer. Other documents may want to include all chapters or other contents that are defined as `*.typ` files in a specific directory.\n\nCan one write something like this?\n\n```typ\n#set page(\n  footer: [#sys.filename],\n)\n\n#for chapter in sys.list-files(\"chapters/*.typ\").sorted() {\n  include chapter\n}\n```\n\nThese specific commands don't work, but is there something equivalent?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 92,
      "score": 4483.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 647,
      "post_number": 2,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-09-15T08:37:48.518Z",
      "updated_at": "2024-09-15T08:38:33.730Z",
      "cooked": "<p>Not at the moment.</p>\n<p>There is <a href=\"https://github.com/typst/typst/issues/2123\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Directory walking · Issue #2123 · typst/typst · GitHub</a> for reading/walking directories, it seems that this is delayed until the <code>path</code> type is added, which ties into <code>resources</code> (fonts, images, supplementary files) as a whole.</p>\n<p>I couldn’t find anything regarding retrieving the file name, but I remember it being requested and closed as not planned I believe.</p>\n<p>It’s possible to work around the directory walking case by passing the directories to Typst using <code>sys.inputs</code>. But this is currently limited to the CLI and will not respond to any changes on <code>typst watch</code>. Assuming a <code>sh</code> compatible shell:</p>\n<pre data-code-wrap=\"bash\"><code class=\"lang-bash\">chapters='[\"chapter1.typ\", \"chapter2.typ\"]'\ntypst compile --input \"chapters=$chapters\" main.typ main.pdf\n</code></pre>\n<p>Then one can walk the directory contents like so:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#for chapter in json.decode(sys.inputs.chapter) {\n  include chapter\n}\n</code></pre>\n<p>I’ve chosen <code>json</code> as the intermediate format here, as it’s supported as an output format by many CLI tools. One could use a script to automatically pass the right files to inputs automatically.</p>\n<p>For example in <code>nu</code> this would look like:</p>\n<pre data-code-wrap=\"nu\"><code class=\"lang-nu\">let chapters = (ls | get name | to json)\ntypst compile --input $\"chapters=(chapters)\" main.typ main.pdf\n</code></pre>",
      "raw": "Not at the moment. \n\nThere is https://github.com/typst/typst/issues/2123 for reading/walking directories, it seems that this is delayed until the `path` type is added, which ties into `resources` (fonts, images, supplementary files) as a whole.\n\nI couldn't find anything regarding retrieving the file name, but I remember it being requested and closed as not planned I believe.\n\nIt's possible to work around the directory walking case by passing the directories to Typst using `sys.inputs`. But this is currently limited to the CLI and will not respond to any changes on `typst watch`. Assuming a `sh` compatible shell:\n```bash\nchapters='[\"chapter1.typ\", \"chapter2.typ\"]'\ntypst compile --input \"chapters=$chapters\" main.typ main.pdf\n```\n\nThen one can walk the directory contents like so:\n```typ\n#for chapter in json.decode(sys.inputs.chapter) {\n  include chapter\n}\n```\n\nI've chosen `json` as the intermediate format here, as it's supported as an output format by many CLI tools. One could use a script to automatically pass the right files to inputs automatically.\n\nFor example in `nu` this would look like:\n```nu\nlet chapters = (ls | get name | to json)\ntypst compile --input $\"chapters=(chapters)\" main.typ main.pdf\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 91,
      "score": 248.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 658,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-15T10:00:41.608Z",
      "updated_at": "2024-09-15T10:00:41.608Z",
      "cooked": "<p>In addition to what <a class=\"mention\" href=\"/u/tinger\">@Tinger</a> wrote, one consideration is that Typst tries to not depend on one specific execution environment: the current file name or directory will exist when compiling via the command line, but not (or in the same way) in the web app, for example. A document that depends on this would not be as “portable”.</p>\n<p>Using <code>--input</code> requires a bit more effort, but the <code>sys.inputs</code> dictionary is accessible no matter the environment, and can be filled with a path even if the environment has no input file path at all.</p>\n<p>Any future improvement in this area will make sure that it applies not just to one of Typst’s execution environments.</p>",
      "raw": "In addition to what @Tinger wrote, one consideration is that Typst tries to not depend on one specific execution environment: the current file name or directory will exist when compiling via the command line, but not (or in the same way) in the web app, for example. A document that depends on this would not be as \"portable\".\n\nUsing `--input` requires a bit more effort, but the `sys.inputs` dictionary is accessible no matter the environment, and can be filled with a path even if the environment has no input file path at all.\n\nAny future improvement in this area will make sure that it applies not just to one of Typst's execution environments.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 84,
      "score": 26.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:58:59.475446"
}
{
  "topic_metadata": {
    "id": 1554,
    "title": "How should i do, can change lib's component func by lib's input?",
    "slug": "how-should-i-do-can-change-libs-component-func-by-libs-input",
    "posts_count": 2,
    "created_at": "2024-11-05T13:02:00.418Z",
    "last_posted_at": "2024-11-05T13:41:18.661Z",
    "views": 53,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sjfhsjfh",
    "tags": [
      "packages"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 334
  },
  "posts": [
    {
      "id": 5161,
      "post_number": 1,
      "username": "Jihan",
      "name": "Jihan",
      "created_at": "2024-11-05T13:02:00.557Z",
      "updated_at": "2024-11-05T13:02:00.557Z",
      "cooked": "<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">/*****************\n*      lib       *\n*****************/\n#let mylib(fill: none, body) = {\n  body\n}\n\n#let lib-component-func(content) = {\n  // this box's fill will changed by mylib input\n  box()[#content]\n}\n\n/*****************\n*      User      *\n*****************/\n// case1: draw a red box\n#show: mylib.with(fill: red)\n#lib-component-func(\"hello\")\n\n// case2: draw a green box\n#show: mylib.with(fill: green)\n#lib-component-func(\"world\")\n</code></pre>",
      "raw": "```typst\n/*****************\n*      lib       *\n*****************/\n#let mylib(fill: none, body) = {\n  body\n}\n\n#let lib-component-func(content) = {\n  // this box's fill will changed by mylib input\n  box()[#content]\n}\n\n/*****************\n*      User      *\n*****************/\n// case1: draw a red box\n#show: mylib.with(fill: red)\n#lib-component-func(\"hello\")\n\n// case2: draw a green box\n#show: mylib.with(fill: green)\n#lib-component-func(\"world\")\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 119.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 316
    },
    {
      "id": 5162,
      "post_number": 2,
      "username": "sjfhsjfh",
      "name": "sjfhsjfh",
      "created_at": "2024-11-05T13:41:18.661Z",
      "updated_at": "2024-11-05T13:41:18.661Z",
      "cooked": "<p>The basic idea here is that everything in the function is definite (for the same input the function should generate the same result). So there are 2 ways to achieve this:</p>\n<ul>\n<li>Use a context block (The function generates the same context content, the color is determined after it is inserted into the document according to the “context”)</li>\n<li><strong>(Recommended)</strong> Let users customize the function by themselves (The function accepts a <code>color</code> parameter and the user can set it easily)</li>\n</ul>\n<h3><a name=\"p-5162-context-solution-1\" class=\"anchor\" href=\"#p-5162-context-solution-1\"></a>Context solution</h3>\n<p>If you wrap it with a context block:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let global-color = state(\"my-box-color\", blue.lighten(40%))\n#let set-color(c) = global-color.update(c)\n#let smart-box(cont) = context {\n  box(cont, fill: global-color.get())\n}\n</code></pre>\n<p>And make sure to add the <code>global-color.update</code> content into the document in your main <code>show</code> function to make sure the state updates correctly.</p>\n<h2><a name=\"p-5162-with-solution-2\" class=\"anchor\" href=\"#p-5162-with-solution-2\"></a><code>.with</code> solution</h2>\n<p>Using context immoderately would cause disasters, for example, if you would like to modify the <code>smart-box</code> above, you may find that the type of its return value has been <code>content</code>, which is hard to customize further.</p>\n<p>I would like to define a function like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let stupid-box(cont, fill: blue.lighten(40%)) = box(cont, fill: fill)\n</code></pre>\n<p>And in the main file add the following code:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"somewhere/lib.typ\": stupid-box\n#let my-box = stupid-box.with(fill: red)\n</code></pre>\n<p>which is much more simple and steerable.</p>\n<h2><a name=\"p-5162-conclusion-3\" class=\"anchor\" href=\"#p-5162-conclusion-3\"></a>Conclusion</h2>\n<p><code>state</code> and <code>context</code> allow you to make it work like a “global variable”, but this usually get into a mess when the global context become more and more complicated. Using the recommended way would make sure users know what they are getting from the function.</p>",
      "raw": "The basic idea here is that everything in the function is definite (for the same input the function should generate the same result). So there are 2 ways to achieve this:\n\n- Use a context block (The function generates the same context content, the color is determined after it is inserted into the document according to the \"context\")\n- **(Recommended)** Let users customize the function by themselves (The function accepts a `color` parameter and the user can set it easily)\n\n### Context solution\n\nIf you wrap it with a context block:\n\n```typ\n#let global-color = state(\"my-box-color\", blue.lighten(40%))\n#let set-color(c) = global-color.update(c)\n#let smart-box(cont) = context {\n  box(cont, fill: global-color.get())\n}\n```\n\nAnd make sure to add the `global-color.update` content into the document in your main `show` function to make sure the state updates correctly.\n\n\n## `.with` solution\n\nUsing context immoderately would cause disasters, for example, if you would like to modify the `smart-box` above, you may find that the type of its return value has been `content`, which is hard to customize further.\n\nI would like to define a function like this:\n\n```typ\n#let stupid-box(cont, fill: blue.lighten(40%)) = box(cont, fill: fill)\n```\n\nAnd in the main file add the following code:\n\n```typ\n#import \"somewhere/lib.typ\": stupid-box\n#let my-box = stupid-box.with(fill: red)\n```\n\nwhich is much more simple and steerable.\n\n## Conclusion\n\n`state` and `context` allow you to make it work like a \"global variable\", but this usually get into a mess when the global context become more and more complicated. Using the recommended way would make sure users know what they are getting from the function.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 18,
      "score": 108.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 120
    }
  ],
  "scraped_at": "2025-06-10T09:55:28.471827"
}
{
  "topic_metadata": {
    "id": 1558,
    "title": "Is there a good way to make circuits in Typst?",
    "slug": "is-there-a-good-way-to-make-circuits-in-typst",
    "posts_count": 12,
    "created_at": "2024-11-05T17:03:55.638Z",
    "last_posted_at": "2025-05-27T07:43:42.892Z",
    "views": 944,
    "like_count": 32,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 13,
    "accepted_answer_username": "grangelouis",
    "tags": [
      "packages",
      "graphics",
      "figures"
    ],
    "category_id": 5,
    "participant_count": 6,
    "word_count": 1207
  },
  "posts": [
    {
      "id": 5167,
      "post_number": 1,
      "username": "Torfi_Thorgrimsson",
      "name": "Torfi Þorgrímsson",
      "created_at": "2024-11-05T17:03:55.772Z",
      "updated_at": "2024-11-05T17:03:55.772Z",
      "cooked": "<p>Hi, I’m very new to Typst and I’m a bit confused.</p>\n<p>I ask this question because circuiteria doesn’t have any premade components for things like transistors or op-amps, and cirCeTZ seems to be dead for about a year now and I can’t get it to work.</p>\n<p>Is there just not currently an easy way to make circuit figures in Typst?</p>\n<p>Thank you for your patience.</p>",
      "raw": "Hi, I'm very new to Typst and I'm a bit confused.\n\nI ask this question because circuiteria doesn't have any premade components for things like transistors or op-amps, and cirCeTZ seems to be dead for about a year now and I can't get it to work.\n\nIs there just not currently an easy way to make circuit figures in Typst?\n\nThank you for your patience.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 101,
      "score": 3340.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 749
    },
    {
      "id": 5173,
      "post_number": 2,
      "username": "infinitymdm",
      "name": "Marcus Mellor",
      "created_at": "2024-11-05T19:18:27.258Z",
      "updated_at": "2024-11-05T19:18:27.258Z",
      "cooked": "<p>I’m also interested in this question. I’ve been using <a href=\"http://diagrams.net\" rel=\"noopener nofollow ugc\">diagrams.net</a> for circuit drawings, with the occasional use of xdot or Visio. I just export to png then include in my Typst source as images.</p>\n<p>If you only need a couple of new components, I’d suggest adding them to circuiteria yourself and submitting a PR. Diagram elements are here in the circuiteria repo: <a href=\"https://git.kb28.ch/HEL/circuiteria/src/branch/main/src/elements\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">circuiteria/elements at main - circuiteria - HERDAC</a>.</p>\n<p>That said, circuiteria seems to be intended more for logic-level abstraction. I don’t see any alternatives that provide transistor-level detail; you may have to do this on your own with CeTZ.</p>",
      "raw": "I'm also interested in this question. I've been using diagrams.net for circuit drawings, with the occasional use of xdot or Visio. I just export to png then include in my Typst source as images.\n\nIf you only need a couple of new components, I'd suggest adding them to circuiteria yourself and submitting a PR. Diagram elements are here in the circuiteria repo: https://git.kb28.ch/HEL/circuiteria/src/branch/main/src/elements. \n\nThat said, circuiteria seems to be intended more for logic-level abstraction. I don't see any alternatives that provide transistor-level detail; you may have to do this on your own with CeTZ.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 100,
      "score": 110.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 408
    },
    {
      "id": 5212,
      "post_number": 3,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2024-11-06T15:04:01.129Z",
      "updated_at": "2024-11-06T15:04:01.129Z",
      "cooked": "<p>I’ve actually been looking for a package like this myself, specifically for creating circuit diagrams with components like resistors, capacitors, and so on, but I haven’t found anything that fully meets the need. I’d be interested in collaborating to develop such a package if others are also keen to explore it.</p>\n<p>Maybe we could brainstorm on how to implement it, possibly drawing some inspiration from how similar packages work in LaTeX, or even consider a fresh approach that fits Typst’s unique style and syntax. Let me know if anyone’s interested in working together to make this happen!</p>",
      "raw": "I’ve actually been looking for a package like this myself, specifically for creating circuit diagrams with components like resistors, capacitors, and so on, but I haven’t found anything that fully meets the need. I’d be interested in collaborating to develop such a package if others are also keen to explore it.\n\nMaybe we could brainstorm on how to implement it, possibly drawing some inspiration from how similar packages work in LaTeX, or even consider a fresh approach that fits Typst’s unique style and syntax. Let me know if anyone’s interested in working together to make this happen!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 93,
      "score": 178.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 5238,
      "post_number": 4,
      "username": "Torfi_Thorgrimsson",
      "name": "Torfi Þorgrímsson",
      "created_at": "2024-11-06T21:22:24.473Z",
      "updated_at": "2024-11-06T21:43:11.172Z",
      "cooked": "<p>Minor update!<br>\nIt turns out that the <a href=\"https://github.com/fenjalien/cirCeTZ/tree/dev\" rel=\"noopener nofollow ugc\">dev branch of cirCeTZ</a> does still work, though there are some deprecation warnings.</p>\n<p>All you need to do is put the repository in your packages directory:</p>\n<ul>\n<li><code>$XDG_DATA_HOME</code> or <code>~/.local/share</code> on Linux</li>\n<li><code>~/Library/Application Support</code> on macOS</li>\n<li><code>%LOCALAPPDATA%</code> on Windows</li>\n</ul>\n<p>With this directory format <code>typst/packages/local/cirCeTZ/0.0.1</code><br>\nSuch that the <code>typst.toml</code> file is in <code>0.0.1</code></p>\n<p>Then you import it with</p>\n<pre><code>#import \"@local/cirCeTZ:0.0.1\": cetz, components\n</code></pre>\n<p>It is <em>completely</em> undocumented but inside the tests folder there are some <a href=\"https://github.com/fenjalien/cirCeTZ/tree/dev/tests\" rel=\"noopener nofollow ugc\">tutorials</a> which are <em>so far</em> pretty simple and informative, especially if you’re familiar with CircuiTikZ. Though keep in mind that you always replace <code>\"/src/lib.typ\"</code> with <code>\"@local/cirCeTZ:0.0.1\"</code></p>",
      "raw": "Minor update!\nIt turns out that the [dev branch of cirCeTZ](https://github.com/fenjalien/cirCeTZ/tree/dev) does still work, though there are some deprecation warnings.\n\nAll you need to do is put the repository in your packages directory:\n\n*  `$XDG_DATA_HOME` or `~/.local/share` on Linux\n* `~/Library/Application Support` on macOS\n* `%LOCALAPPDATA%` on Windows\n\nWith this directory format `typst/packages/local/cirCeTZ/0.0.1`\nSuch that the `typst.toml` file is in `0.0.1`\n\nThen you import it with \n\n    #import \"@local/cirCeTZ:0.0.1\": cetz, components\n\nIt is *completely* undocumented but inside the tests folder there are some [tutorials](https://github.com/fenjalien/cirCeTZ/tree/dev/tests) which are _so far_ pretty simple and informative, especially if you're familiar with CircuiTikZ. Though keep in mind that you always replace `\"/src/lib.typ\"` with `\"@local/cirCeTZ:0.0.1\"`",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 86,
      "score": 102.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 749
    },
    {
      "id": 5239,
      "post_number": 5,
      "username": "Torfi_Thorgrimsson",
      "name": "Torfi Þorgrímsson",
      "created_at": "2024-11-06T21:39:20.141Z",
      "updated_at": "2024-11-06T21:39:20.141Z",
      "cooked": "<p>I’d be very interested in working on a package like this!<br>\nThough developing a new one from scratch seems daunting! Especially since I’m no artist. Since cirCeTZ seems to still work what do you think of reviving that? Since there has already been a lot of work done there.</p>\n<p>If you have some ideas on how the syntax/API can be improved then we could overhaul cirCeTZ and cannibalize it.</p>\n<p>If you’re open to reviving cirCeTZ then the first thing we need to do is update it to modern the CeTZ API to get rid of the warnings and document it as we read  through the code base.</p>",
      "raw": "I'd be very interested in working on a package like this!\nThough developing a new one from scratch seems daunting! Especially since I'm no artist. Since cirCeTZ seems to still work what do you think of reviving that? Since there has already been a lot of work done there.\n\nIf you have some ideas on how the syntax/API can be improved then we could overhaul cirCeTZ and cannibalize it.\n\nIf you're open to reviving cirCeTZ then the first thing we need to do is update it to modern the CeTZ API to get rid of the warnings and document it as we read  through the code base.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 83,
      "score": 61.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 749
    },
    {
      "id": 5378,
      "post_number": 6,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2024-11-09T12:43:59.998Z",
      "updated_at": "2024-11-09T12:43:59.998Z",
      "cooked": "<p>I think that’s a great idea! Starting with a fork of cirCeTZ sounds like a solid approach. We can then work together to optimize the code, remove deprecated warnings, and gradually add more elements. Let’s set up the fork and start by familiarizing ourselves with the code base—then we can discuss potential improvements and additions as we go along. Excited to dive in with you! By the way, what’s your GitHub account name?</p>",
      "raw": "I think that’s a great idea! Starting with a fork of cirCeTZ sounds like a solid approach. We can then work together to optimize the code, remove deprecated warnings, and gradually add more elements. Let’s set up the fork and start by familiarizing ourselves with the code base—then we can discuss potential improvements and additions as we go along. Excited to dive in with you! By the way, what’s your GitHub account name?",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 77,
      "score": 30.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 5409,
      "post_number": 7,
      "username": "LordBaryhobal",
      "name": "Baryhobal",
      "created_at": "2024-11-09T21:08:05.388Z",
      "updated_at": "2024-11-09T21:08:05.388Z",
      "cooked": "<p>Indeed, circuiteria was first created for logic-block circuits, as it was something useful for me in a System Designs course (see <a href=\"https://forum.typst.app/t/circuiteria-0-1-0-drawing-block-circuits-with-typst-made-easy-using-cetz/1092/3\" class=\"inline-onebox\">Circuiteria:0.1.0 - Drawing block circuits with Typst made easy, using CeTZ - #3 by LordBaryhobal</a>)<br>\nAs I said in that post, I am open to adding this sort of elements to the package as this is something that is indeed currently somewhat lacking in the Typst universe<br>\nFeel free to contribute to the package if you can (and if you can understand what I’ve written <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">) I will also try to look into implementing this but this is not a promise</p>",
      "raw": "Indeed, circuiteria was first created for logic-block circuits, as it was something useful for me in a System Designs course (see https://forum.typst.app/t/circuiteria-0-1-0-drawing-block-circuits-with-typst-made-easy-using-cetz/1092/3?u=lordbaryhobal)\nAs I said in that post, I am open to adding this sort of elements to the package as this is something that is indeed currently somewhat lacking in the Typst universe\nFeel free to contribute to the package if you can (and if you can understand what I've written :sweat_smile:) I will also try to look into implementing this but this is not a promise",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 72,
      "score": 139.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 585
    },
    {
      "id": 5410,
      "post_number": 8,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2024-11-09T21:17:35.533Z",
      "updated_at": "2024-11-09T21:17:35.533Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"LordBaryhobal\" data-post=\"7\" data-topic=\"1558\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/lordbaryhobal/48/855_2.png\" class=\"avatar\"> LordBaryhobal:</div>\n<blockquote>\n<p>Feel free to contribute to the package if you can (and if you can understand what I’ve written <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">) I will also try to look into implementing this but this is not a promise</p>\n</blockquote>\n</aside>\n<p>That sounds like a better idea! Expanding Circuiteria seems like a great way to bring more comprehensive circuit elements into Typst. It would be really helpful if you could add one more traditional element, like a resistor, to set a foundation. From there, I’d be glad to contribute by adding additional components. Thanks for being open to collaboration—I’m looking forward to building on what you’ve created!</p>",
      "raw": "[quote=\"LordBaryhobal, post:7, topic:1558, full:false\"]\nFeel free to contribute to the package if you can (and if you can understand what I’ve written :sweat_smile:) I will also try to look into implementing this but this is not a promise\n[/quote]\n\nThat sounds like a better idea! Expanding Circuiteria seems like a great way to bring more comprehensive circuit elements into Typst. It would be really helpful if you could add one more traditional element, like a resistor, to set a foundation. From there, I’d be glad to contribute by adding additional components. Thanks for being open to collaboration—I’m looking forward to building on what you’ve created!",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 73,
      "score": 39.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 5411,
      "post_number": 9,
      "username": "LordBaryhobal",
      "name": "Baryhobal",
      "created_at": "2024-11-09T21:21:43.338Z",
      "updated_at": "2024-11-09T21:21:43.338Z",
      "cooked": "<p>I have actually started implementing resistors and capacitors. I’ll try to commit and push what I have asap</p>",
      "raw": "I have actually started implementing resistors and capacitors. I'll try to commit and push what I have asap",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 74,
      "score": 69.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 585
    },
    {
      "id": 5412,
      "post_number": 10,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2024-11-09T21:25:46.949Z",
      "updated_at": "2024-11-09T21:25:46.949Z",
      "cooked": "<p>Sounds great, thanks for jumping on that! Looking forward to seeing your updates!</p>",
      "raw": "Sounds great, thanks for jumping on that! Looking forward to seeing your updates!",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 71,
      "score": 34.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 5648,
      "post_number": 11,
      "username": "fenjalien",
      "name": "fenjalien",
      "created_at": "2024-11-14T22:02:42.379Z",
      "updated_at": "2024-11-14T22:02:42.379Z",
      "cooked": "<p>Hi, owner of cirCeTZ here. I haven’t deliberately abandoned development, a lot of life stuff has hit me over the past year and I’ve been working on slightly bigger projects (e.g. CeTZ) with what little energy I actually have to spare.</p>\n<p>CirCeTZ ideally should be an accurate port of circuiTikZ, you should be able to replicate one in the other with minimal changes to the options/styling. I don’t remember what state I’ve left it in but I think most of the infrastructure is there. What burnt me out was having to read the circuitikz source code to figure out all the details for each component (just thinking about it is giving me a headache). The alternative would be paying some 600 euro to access the only maintained standard <a href=\"https://std.iec.ch/iec60617\" rel=\"noopener nofollow ugc\">IEC 60617</a>, which might possibly lead to a few licensing issues.</p>\n<p>That being said if someone is happy to pick up the tedious work of making the components (or at least figuring out all the details and noting them down far away from any tex code). I’ll be happy to setup PR templates for components and further improve the structure.</p>\n<p>I’m sad I didn’t see this sooner, so if you have any further questions or just want to talk it’ll be better if you ping me on discord <code>@fenjalien</code>. Either dms or we can setup a thread in the cetz universe.</p>\n<p>Thanks for the interest though :)</p>",
      "raw": "Hi, owner of cirCeTZ here. I haven't deliberately abandoned development, a lot of life stuff has hit me over the past year and I've been working on slightly bigger projects (e.g. CeTZ) with what little energy I actually have to spare.\n\nCirCeTZ ideally should be an accurate port of circuiTikZ, you should be able to replicate one in the other with minimal changes to the options/styling. I don't remember what state I've left it in but I think most of the infrastructure is there. What burnt me out was having to read the circuitikz source code to figure out all the details for each component (just thinking about it is giving me a headache). The alternative would be paying some 600 euro to access the only maintained standard [IEC 60617](https://std.iec.ch/iec60617), which might possibly lead to a few licensing issues.\n\nThat being said if someone is happy to pick up the tedious work of making the components (or at least figuring out all the details and noting them down far away from any tex code). I'll be happy to setup PR templates for components and further improve the structure.\n\nI'm sad I didn't see this sooner, so if you have any further questions or just want to talk it'll be better if you ping me on discord `@fenjalien`. Either dms or we can setup a thread in the cetz universe.\n\nThanks for the interest though :)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 9,
      "reads": 72,
      "score": 294.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 198
    },
    {
      "id": 13228,
      "post_number": 13,
      "username": "grangelouis",
      "name": "Louis Grange",
      "created_at": "2025-05-27T07:43:42.892Z",
      "updated_at": "2025-05-27T07:43:42.892Z",
      "cooked": "<p>Hi everyone <img src=\"https://forum.typst.app/images/emoji/apple/wave.png?v=12\" title=\":wave:\" class=\"emoji\" alt=\":wave:\" loading=\"lazy\" width=\"20\" height=\"20\">,</p>\n<p>I just released <em>zap</em>, a new Typst Universe library I’m developing to draw electrical circuits — including resistors, capacitors, transistors, sources, LEDs, and more!</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#import \"@preview/zap:0.2.0\"\n\n#zap.canvas({\n    import zap: *\n    \n    isource(\"i1\", (0,0), (5,0))\n    // ... your amazing circuit here\n})\n</code></pre>\n<p>Feel free to check out the project on <a href=\"https://github.com/l0uisgrange/zap\" rel=\"noopener nofollow ugc\">GitHub</a>. You’re welcome to start <a href=\"https://github.com/l0uisgrange/zap/discussions\" rel=\"noopener nofollow ugc\">discussions</a>, report issues, show off your amazing circuits or share any feedback!</p>\n<p>See you soon!</p>",
      "raw": "Hi everyone :wave:,\n\nI just released *zap*, a new Typst Universe library I’m developing to draw electrical circuits — including resistors, capacitors, transistors, sources, LEDs, and more!\n\n```typst\n#import \"@preview/zap:0.2.0\"\n\n#zap.canvas({\n    import zap: *\n    \n    isource(\"i1\", (0,0), (5,0))\n    // ... your amazing circuit here\n})\n```\n\nFeel free to check out the project on [GitHub](https://github.com/l0uisgrange/zap). You’re welcome to start [discussions](https://github.com/l0uisgrange/zap/discussions), report issues, show off your amazing circuits or share any feedback!\n\nSee you soon!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 9,
      "reads": 28,
      "score": 170.6,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1520
    }
  ],
  "scraped_at": "2025-06-10T09:55:27.749086"
}
{
  "topic_metadata": {
    "id": 1563,
    "title": "How to create a table of sign?",
    "slug": "how-to-create-a-table-of-sign",
    "posts_count": 3,
    "created_at": "2024-11-05T22:14:50.668Z",
    "last_posted_at": "2024-11-06T06:15:08.654Z",
    "views": 98,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "math",
      "tables"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 380
  },
  "posts": [
    {
      "id": 5178,
      "post_number": 1,
      "username": "nemolivier",
      "name": "nemolivier",
      "created_at": "2024-11-05T22:14:50.778Z",
      "updated_at": "2024-11-06T03:02:27.505Z",
      "cooked": "<p>Hello,<br>\nI try to help my son creating a clean doc for his math homework. We needs to create a <em>table of signs</em> (direct translation from french, sorry, it may be the reason why I struggle to find solution here or on google).<br>\nIt looks like this :<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/3/30daec21d792767429e0bc9a75e0ecd099e410db.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/30daec21d792767429e0bc9a75e0ecd099e410db\" title=\"PXL_20241105_215805654\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/3/30daec21d792767429e0bc9a75e0ecd099e410db_2_690x210.jpeg\" alt=\"PXL_20241105_215805654\" data-base62-sha1=\"6YbXnaSMYyPGR2wtb55pngHV4HV\" width=\"690\" height=\"210\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/3/30daec21d792767429e0bc9a75e0ecd099e410db_2_690x210.jpeg, https://forum.typst.app/uploads/default/optimized/2X/3/30daec21d792767429e0bc9a75e0ecd099e410db_2_1035x315.jpeg 1.5x, https://forum.typst.app/uploads/default/optimized/2X/3/30daec21d792767429e0bc9a75e0ecd099e410db_2_1380x420.jpeg 2x\" data-dominant-color=\"AA9E97\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">PXL_20241105_215805654</span><span class=\"informations\">3456×1052 361 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nThe solution may be using a complicated <code>table.cell(colspan:)</code> structure, but I wonder if there’s a more elegant solution.<br>\nAlso, I can’t find a solution for the « 0 » across the vertical lines…<br>\nThank’s a lot,<br>\nOlivier.</p>",
      "raw": "Hello,\nI try to help my son creating a clean doc for his math homework. We needs to create a *table of signs* (direct translation from french, sorry, it may be the reason why I struggle to find solution here or on google). \nIt looks like this : \n![PXL_20241105_215805654|690x210](upload://6YbXnaSMYyPGR2wtb55pngHV4HV.jpeg)\nThe solution may be using a complicated `table.cell(colspan:)` structure, but I wonder if there’s a more elegant solution. \nAlso, I can’t find a solution for the « 0 » across the vertical lines…\nThank’s a lot,\nOlivier.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 187.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 752
    },
    {
      "id": 5184,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-06T02:52:52.989Z",
      "updated_at": "2024-11-06T02:56:55.562Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/nemolivier\">@nemolivier</a>, welcome to the forum! I’ve updated your post title to better suit our question post guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your post title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<hr>\n<p>Here’s an example based on something I’ve made before. Note that we use 0pt columns for the interval limits. Feel free to customize and use it as much as you want:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show table.cell: it =&gt; {\n  if it.x &gt; 0 and it.y &gt; 0 {\n    show \"+\": set text(green.darken(5%))\n    show $-$.body.text: set text(red.darken(15%))\n    show \"0\": set text(gray)\n    it\n  } else {\n    set text(blue.darken(20%))\n    it\n  }\n}\n\n#table(\n  columns: (auto, auto, 0pt, auto, 0pt, auto, 0pt, auto),\n  align: (x, y) =&gt; if y == 0 { center + bottom } else { center },\n  stroke: (x, y) =&gt; (\n    // Dash stroke inside\n    right: if x &gt; 0 and y &gt; 0 { (paint: black, dash: \"dotted\") },\n    // Left border\n    left: if y &gt; 0 and x == 1 { black },\n    // Top border\n    top: if x &gt; 0 and y == 1 { black },\n    rest: none),\n  $x$, [], $-oo$, [], $5$, [], $10$, [],\n\n  // Right border\n  table.vline(start: 1, stroke: (dash: none)),\n\n  $f$, $-$, [], $+$, [], $-$, [], $+$,\n  $g$, $+$, [0], $+$, [], $+$, [], $+$,\n  $h$, $-$, [], $+$, [], $-$, [], $+$,\n  $m$, $+$, [], $+$, [], $+$, [], $+$,\n\n  // Have to place bottom border manually\n  // to avoid having to somehow fetch the amount of rows\n  table.hline(start: 1, stroke: (dash: none))\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/7/7394e40573feeecd54c5cd175d183582f8f7595f.png\" alt=\"output: sign table\" data-base62-sha1=\"gutUayGbmm0tNfQsPMZrqOkD7uT\" width=\"598\" height=\"479\"></p>",
      "raw": "Hey @nemolivier, welcome to the forum! I've updated your post title to better suit our question post guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your post title is a question you'd ask to a friend about Typst. :wink:\n\n---\n\nHere's an example based on something I've made before. Note that we use 0pt columns for the interval limits. Feel free to customize and use it as much as you want:\n\n```typ\n#show table.cell: it => {\n  if it.x > 0 and it.y > 0 {\n    show \"+\": set text(green.darken(5%))\n    show $-$.body.text: set text(red.darken(15%))\n    show \"0\": set text(gray)\n    it\n  } else {\n    set text(blue.darken(20%))\n    it\n  }\n}\n\n#table(\n  columns: (auto, auto, 0pt, auto, 0pt, auto, 0pt, auto),\n  align: (x, y) => if y == 0 { center + bottom } else { center },\n  stroke: (x, y) => (\n    // Dash stroke inside\n    right: if x > 0 and y > 0 { (paint: black, dash: \"dotted\") },\n    // Left border\n    left: if y > 0 and x == 1 { black },\n    // Top border\n    top: if x > 0 and y == 1 { black },\n    rest: none),\n  $x$, [], $-oo$, [], $5$, [], $10$, [],\n\n  // Right border\n  table.vline(start: 1, stroke: (dash: none)),\n\n  $f$, $-$, [], $+$, [], $-$, [], $+$,\n  $g$, $+$, [0], $+$, [], $+$, [], $+$,\n  $h$, $-$, [], $+$, [], $-$, [], $+$,\n  $m$, $+$, [], $+$, [], $+$, [], $+$,\n\n  // Have to place bottom border manually\n  // to avoid having to somehow fetch the amount of rows\n  table.hline(start: 1, stroke: (dash: none))\n)\n```\n\n![output: sign table|598x479](upload://gutUayGbmm0tNfQsPMZrqOkD7uT.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 27.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5189,
      "post_number": 3,
      "username": "nemolivier",
      "name": "nemolivier",
      "created_at": "2024-11-06T06:15:08.654Z",
      "updated_at": "2024-11-06T06:15:08.654Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/pgbiel\">@PgBiel</a> ,<br>\nMany thanks for the quick and gentle answer.<br>\n(I <em>do</em> have read the guideline, sorry it was not enough).<br>\nYour answer is very complete and helpful (0 pt columns, I like that <img src=\"https://forum.typst.app/images/emoji/apple/grinning.png?v=12\" title=\":grinning:\" class=\"emoji\" alt=\":grinning:\" loading=\"lazy\" width=\"20\" height=\"20\">), I’m going to take time to understand all this (and making my son understand it too !!)<br>\nHope this help other people.<br>\nRegards,<br>\nOlivier.</p>",
      "raw": "Hello @PgBiel ,\nMany thanks for the quick and gentle answer.\n(I *do* have read the guideline, sorry it was not enough).\nYour answer is very complete and helpful (0 pt columns, I like that :grinning:), I'm going to take time to understand all this (and making my son understand it too !!)\nHope this help other people.\nRegards,\nOlivier.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 51.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 752
    }
  ],
  "scraped_at": "2025-06-10T09:55:26.973607"
}
{
  "topic_metadata": {
    "id": 1564,
    "title": "How to put first-order headings start on odd-numbered pages?",
    "slug": "how-to-put-first-order-headings-start-on-odd-numbered-pages",
    "posts_count": 2,
    "created_at": "2024-11-05T22:19:58.262Z",
    "last_posted_at": "2024-11-06T00:28:07.345Z",
    "views": 150,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 181
  },
  "posts": [
    {
      "id": 5179,
      "post_number": 1,
      "username": "Olaf",
      "name": "Olaf",
      "created_at": "2024-11-05T22:19:58.381Z",
      "updated_at": "2024-11-05T22:19:58.381Z",
      "cooked": "<p>I would like the first-order headings to start on a new page. If the new page is an even page, then a blank page should be inserted. The first-order headings should therefore always be on an odd-numbered page. In addition, I would like to have a vertical space above and below the heading.</p>",
      "raw": "I would like the first-order headings to start on a new page. If the new page is an even page, then a blank page should be inserted. The first-order headings should therefore always be on an odd-numbered page. In addition, I would like to have a vertical space above and below the heading.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 487.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 418
    },
    {
      "id": 5183,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-11-06T00:28:07.345Z",
      "updated_at": "2024-11-06T00:28:07.345Z",
      "cooked": "<p>You just need to put a weak page break before the heading in a show rule. This will insert a blank page, only if the current page even or not empty. For spacing above the heading, you can wrap it in a a <a href=\"https://typst.app/docs/reference/layout/pad/\">padding</a> element. For spacing below, you can either also put it in the padding, or use a separate show-set rule to set the block spacing. I would prefer the latter to ensure that it correctly interacts with other potential spacings between heading and content, but both are probably fine:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): set block(below: 1cm)\n#show heading.where(level: 1): it =&gt; {\n  pagebreak(to: \"odd\", weak: true)\n  pad(top: 2cm, it)\n}\n</code></pre>",
      "raw": "You just need to put a weak page break before the heading in a show rule. This will insert a blank page, only if the current page even or not empty. For spacing above the heading, you can wrap it in a a [padding](https://typst.app/docs/reference/layout/pad/) element. For spacing below, you can either also put it in the padding, or use a separate show-set rule to set the block spacing. I would prefer the latter to ensure that it correctly interacts with other potential spacings between heading and content, but both are probably fine:\n\n```typ\n#show heading.where(level: 1): set block(below: 1cm)\n#show heading.where(level: 1): it => {\n  pagebreak(to: \"odd\", weak: true)\n  pad(top: 2cm, it)\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 32.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:55:26.220957"
}
{
  "topic_metadata": {
    "id": 1567,
    "title": "How I can indent only text in paragraph in the body via definition in my template?",
    "slug": "how-i-can-indent-only-text-in-paragraph-in-the-body-via-definition-in-my-template",
    "posts_count": 5,
    "created_at": "2024-11-06T00:24:59.799Z",
    "last_posted_at": "2024-11-08T01:43:24.436Z",
    "views": 248,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 240
  },
  "posts": [
    {
      "id": 5182,
      "post_number": 1,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-06T00:25:00.114Z",
      "updated_at": "2024-11-06T23:53:50.329Z",
      "cooked": "<p>I know this setting</p>\n<pre><code class=\"lang-auto\">#set par( hanging-indent:-1em )\n</code></pre>\n<p>but it also influences the headers and table of content among other things.<br>\nHow can I limit the scope to change to apply to only the text inside paragraphs in the body of document? (I am working on template)</p>",
      "raw": "I know this setting\n```\n#set par( hanging-indent:-1em )\n```\n but it also influences the headers and table of content among other things.\nHow can I limit the scope to change to apply to only the text inside paragraphs in the body of document? (I am working on template)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 1017.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5243,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-06T23:57:08.430Z",
      "updated_at": "2024-11-06T23:57:08.430Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/danborek\">@danborek</a> , please make sure to post to the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category next time <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"> (Also, by the way, you can write ```typ to highlight your codeblock with Typst’s syntax as I do below)</p>\n<hr>\n<p>To achieve what you need, currently, you’ll have to manually undo the setting as such:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set par(hanging-indent: -1em)\n#show outline: set par(hanging-indent: 0pt)\n#show raw.where(block: true): set par(hanging-indent: 0pt)\n// When changing the header:\n#set page(header: [\n  #set par(hanging-indent: 0pt)\n  // header contents here\n])\n</code></pre>",
      "raw": "Hey @danborek , please make sure to post to the #questions category next time :slight_smile: (Also, by the way, you can write \\`\\`\\`typ to highlight your codeblock with Typst's syntax as I do below)\n\n---\n\nTo achieve what you need, currently, you'll have to manually undo the setting as such:\n\n```typ\n#set par(hanging-indent: -1em)\n#show outline: set par(hanging-indent: 0pt)\n#show raw.where(block: true): set par(hanging-indent: 0pt)\n// When changing the header:\n#set page(header: [\n  #set par(hanging-indent: 0pt)\n  // header contents here\n])\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 26.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5289,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-08T01:29:43.258Z",
      "updated_at": "2024-11-08T01:29:43.258Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/danborek\">@danborek</a> , make sure to mark my answer as a solution (the <img src=\"https://forum.typst.app/images/emoji/apple/white_check_mark.png?v=12\" title=\":white_check_mark:\" class=\"emoji\" alt=\":white_check_mark:\" loading=\"lazy\" width=\"20\" height=\"20\"> button) if it solved your problem, otherwise feel free to ask further questions. Thank you!</p>",
      "raw": "Hey @danborek , make sure to mark my answer as a solution (the :white_check_mark: button) if it solved your problem, otherwise feel free to ask further questions. Thank you!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 24.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5290,
      "post_number": 4,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-08T01:40:35.476Z",
      "updated_at": "2024-11-08T01:40:35.476Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/pgbiel\">@PgBiel</a> it helped me a lot to understand better the problem, but  I weren’t able to fully  test and implement it yet;<br>\nI suppose I need to do same for headings ?</p>",
      "raw": "Hi @PgBiel it helped me a lot to understand better the problem, but  I weren't able to fully  test and implement it yet; \nI suppose I need to do same for headings ?",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5291,
      "post_number": 5,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-08T01:43:24.436Z",
      "updated_at": "2024-11-08T01:43:24.436Z",
      "cooked": "<p>Yes. To avoid writing too many identical show-set rules, you can use <code>selector.or</code> like so:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show selector.or(\n   outline,\n   raw.where(block: true),\n   heading\n): set par(hanging-indent: 0pt)\n\n// Will still need to do it manually for the page header\n</code></pre>",
      "raw": "Yes. To avoid writing too many identical show-set rules, you can use `selector.or` like so:\n\n```typ\n#show selector.or(\n   outline,\n   raw.where(block: true),\n   heading\n): set par(hanging-indent: 0pt)\n\n// Will still need to do it manually for the page header\n```",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 4.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:55:25.493581"
}
{
  "topic_metadata": {
    "id": 1568,
    "title": "How to use #pause with columns in Touying?",
    "slug": "how-to-use-pause-with-columns-in-touying",
    "posts_count": 4,
    "created_at": "2024-11-06T03:10:42.997Z",
    "last_posted_at": "2024-11-06T23:52:05.774Z",
    "views": 298,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "OrangeX4",
    "tags": [
      "touying"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 145
  },
  "posts": [
    {
      "id": 5185,
      "post_number": 1,
      "username": "Bo_Johnson",
      "name": "Bo Johnson",
      "created_at": "2024-11-06T03:10:43.156Z",
      "updated_at": "2024-11-06T23:51:25.697Z",
      "cooked": "<p>Is there currently a way to have 2+ columns on a Touying slide and have <code>#pause</code> be column dependent? Currently having 2 columns, using <code>#pause</code> on one side will push everything on the other side to a new slide. I’d like to have <code>#pause</code> work on only one column, for example on a slide with text on one side and a figure on the other and using <code>#pause</code> on the text but not affecting the figure.</p>",
      "raw": "Is there currently a way to have 2+ columns on a Touying slide and have `#pause` be column dependent? Currently having 2 columns, using `#pause` on one side will push everything on the other side to a new slide. I'd like to have `#pause` work on only one column, for example on a slide with text on one side and a figure on the other and using `#pause` on the text but not affecting the figure.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 1308.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 730
    },
    {
      "id": 5208,
      "post_number": 2,
      "username": "OrangeX4",
      "name": "OrangeX4",
      "created_at": "2024-11-06T11:41:25.128Z",
      "updated_at": "2024-11-06T11:41:25.128Z",
      "cooked": "<p>Add <code>#meanwhile</code> at the beginning of the second column, for example</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#slide[\n  one #pause two\n][\n  #meanwhile\n  image\n]\n</code></pre>",
      "raw": "Add `#meanwhile` at the beginning of the second column, for example\n\n```typ\n#slide[\n  one #pause two\n][\n  #meanwhile\n  image\n]\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 39,
      "score": 197.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 18
    },
    {
      "id": 5211,
      "post_number": 3,
      "username": "Bo_Johnson",
      "name": "Bo Johnson",
      "created_at": "2024-11-06T14:31:47.323Z",
      "updated_at": "2024-11-06T14:31:47.323Z",
      "cooked": "<p>Thank you! That was it.</p>",
      "raw": "Thank you! That was it.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 12.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 730
    },
    {
      "id": 5242,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-06T23:52:05.774Z",
      "updated_at": "2024-11-06T23:52:05.774Z",
      "cooked": "<p>Welcome to the forum <a class=\"mention\" href=\"/u/bo_johnson\">@Bo_Johnson</a> ! For future questions, please use the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category. In addition, I’ve updated your post title to be a question, as suggested by our question post guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>",
      "raw": "Welcome to the forum @Bo_Johnson ! For future questions, please use the #questions category. In addition, I've updated your post title to be a question, as suggested by our question post guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 28,
      "score": 35.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:55:24.781519"
}
{
  "topic_metadata": {
    "id": 1578,
    "title": "Can you access the physical page count?",
    "slug": "can-you-access-the-physical-page-count",
    "posts_count": 4,
    "created_at": "2024-11-06T18:08:57.650Z",
    "last_posted_at": "2024-11-06T22:20:52.148Z",
    "views": 168,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "scripting",
      "counter"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 189
  },
  "posts": [
    {
      "id": 5217,
      "post_number": 1,
      "username": "NNS",
      "name": "Nikolai Neff-Sarnow",
      "created_at": "2024-11-06T18:08:57.750Z",
      "updated_at": "2024-11-06T18:08:57.750Z",
      "cooked": "<p>Hi,<br>\nis there a way to retrieve the physical number of pages from within Typst, even if the logical number might have changed, e.g. due to a reset of the respective page counter?<br>\nI’d like to use different pagenumbers starting with a new count for the annex, which prevents me from simply doing</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#context counter(page).get().last() \n</code></pre>\n<p>to get the total amount.</p>",
      "raw": "Hi, \nis there a way to retrieve the physical number of pages from within Typst, even if the logical number might have changed, e.g. due to a reset of the respective page counter?\nI'd like to use different pagenumbers starting with a new count for the annex, which prevents me from simply doing \n```typst\n#context counter(page).get().last() \n``` \nto get the total amount.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 552.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 754
    },
    {
      "id": 5233,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-11-06T18:18:52.407Z",
      "updated_at": "2024-11-06T18:32:15.414Z",
      "cooked": "<p>One possibility would be to add an empty element at the end of the document, which you can query and get the location from.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">Total Pages: #context query(&lt;end&gt;).first().location().page()\n\n... // All your content, including appendix\n\n#[] &lt;end&gt;\n</code></pre>\n<p>You can of course also put that empty element in a show-all rule, so you don’t need to add additional boilerplate at the end of the document, when the rest of the document setup is somewhere else:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show: it =&gt; it + [#[] &lt;end&gt;]\n</code></pre>",
      "raw": "One possibility would be to add an empty element at the end of the document, which you can query and get the location from.\n\n```typ\nTotal Pages: #context query(<end>).first().location().page()\n\n... // All your content, including appendix\n\n#[] <end>\n```\n\nYou can of course also put that empty element in a show-all rule, so you don't need to add additional boilerplate at the end of the document, when the rest of the document setup is somewhere else:\n\n```typ\n#show: it => it + [#[] <end>]\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 39,
      "score": 47.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 5234,
      "post_number": 3,
      "username": "NNS",
      "name": "Nikolai Neff-Sarnow",
      "created_at": "2024-11-06T19:29:43.299Z",
      "updated_at": "2024-11-06T19:30:53.443Z",
      "cooked": "<p>Thanks, i was unaware that the <code>page</code> returned by <code>location()</code> is the physical page. This is exactly what I need, albeit it feels somewhat hacky.</p>",
      "raw": "Thanks, i was unaware that the `page` returned by `location()` is the physical page. This is exactly what I need, albeit it feels somewhat hacky.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 17.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 754
    },
    {
      "id": 5240,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-06T22:20:52.148Z",
      "updated_at": "2024-11-06T22:20:52.148Z",
      "cooked": "<p>By the way <code>#context locate(&lt;end&gt;).page()</code> is short, sweet and does the same <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "By the way `#context locate(<end>).page()` is short, sweet and does the same :slight_smile:",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 30,
      "score": 41.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:55:24.032111"
}
{
  "topic_metadata": {
    "id": 1579,
    "title": "How to number only the first and second order headings?",
    "slug": "how-to-number-only-the-first-and-second-order-headings",
    "posts_count": 2,
    "created_at": "2024-11-06T19:44:50.597Z",
    "last_posted_at": "2024-11-06T23:07:05.780Z",
    "views": 160,
    "like_count": 1,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "PgBiel",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 121
  },
  "posts": [
    {
      "id": 5235,
      "post_number": 1,
      "username": "Olaf",
      "name": "Olaf",
      "created_at": "2024-11-06T19:44:50.786Z",
      "updated_at": "2024-11-06T19:45:13.971Z",
      "cooked": "<p>If I have the following type document:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(numbering: \"1.1\")\n\n= Heading 1\n\n== Heading 2\n\n=== Heading 3\n</code></pre>\n<p>I get the following PDF:</p>\n<pre><code class=\"lang-plaintext\">1. Heading 1\n1.1 Heading 2\n1.1.1 Heading 3\n</code></pre>\n<p>However, I would like only the first and second order headings to be numbered, but not the subordinate headings:</p>\n<pre><code class=\"lang-plaintext\">1. Heading 1\n1.1 Heading 2\nHeading 3\n</code></pre>",
      "raw": "If I have the following type document:\n\n```typ\n#set heading(numbering: \"1.1\")\n\n= Heading 1\n\n== Heading 2\n\n=== Heading 3\n```\n\nI get the following PDF:\n\n```plain\n1. Heading 1\n1.1 Heading 2\n1.1.1 Heading 3\n```\n\nHowever, I would like only the first and second order headings to be numbered, but not the subordinate headings:\n\n```plain\n1. Heading 1\n1.1 Heading 2\nHeading 3\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 575.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 418
    },
    {
      "id": 5241,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-06T23:07:05.780Z",
      "updated_at": "2024-11-06T23:07:05.780Z",
      "cooked": "<p>You can use show-set rules to filter them:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): set heading(numbering: \"1.1\")\n#show heading.where(level: 2): set heading(numbering: \"1.1\")\n// For higher levels\n#set heading(numbering: none)\n\n= Level 1\n== Level 2\n=== Level 3\n==== Level 4\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/f9aa1dd0c6be8119b5166dbc4b653f58aa99ca5b.png\" data-download-href=\"https://forum.typst.app/uploads/default/f9aa1dd0c6be8119b5166dbc4b653f58aa99ca5b\" title=\"output: levels 3+ with no numbering\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/f9aa1dd0c6be8119b5166dbc4b653f58aa99ca5b_2_690x230.png\" alt=\"output: levels 3+ with no numbering\" data-base62-sha1=\"zCDmvkYWOLrJ9mYAPrgdvilzEev\" width=\"690\" height=\"230\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/f9aa1dd0c6be8119b5166dbc4b653f58aa99ca5b_2_690x230.png, https://forum.typst.app/uploads/default/optimized/2X/f/f9aa1dd0c6be8119b5166dbc4b653f58aa99ca5b_2_1035x345.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/f/f9aa1dd0c6be8119b5166dbc4b653f58aa99ca5b_2_1380x460.png 2x\" data-dominant-color=\"FCFCFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">output: levels 3+ with no numbering</span><span class=\"informations\">1500×501 30 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "You can use show-set rules to filter them:\n```typ\n#show heading.where(level: 1): set heading(numbering: \"1.1\")\n#show heading.where(level: 2): set heading(numbering: \"1.1\")\n// For higher levels\n#set heading(numbering: none)\n\n= Level 1\n== Level 2\n=== Level 3\n==== Level 4\n```\n![output: levels 3+ with no numbering|690x230](upload://zCDmvkYWOLrJ9mYAPrgdvilzEev.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 64.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:55:23.252065"
}
{
  "topic_metadata": {
    "id": 1589,
    "title": "How to suppress space between affiliation superscript name and comma in custom template?",
    "slug": "how-to-suppress-space-between-affiliation-superscript-name-and-comma-in-custom-template",
    "posts_count": 10,
    "created_at": "2024-11-07T12:31:19.406Z",
    "last_posted_at": "2024-11-08T23:34:23.499Z",
    "views": 122,
    "like_count": 3,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "flokl",
    "tags": [
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 857
  },
  "posts": [
    {
      "id": 5256,
      "post_number": 1,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-07T12:31:19.546Z",
      "updated_at": "2024-11-08T23:34:00.705Z",
      "cooked": "<p>I am using typst 0.11 (template need to work where I cannot update dist just now)<br>\nI have following code</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let titleblock(body, size: 1.2em) = [\n  #align(center)[\n    #text(size: size)[#body]\n  ]\n]\n\n#let minimal-preprint(\n  title: none,\n  authors: (),\n  affiliations: none,\n) = {\n  // Format author strings\n  let author_strings = ()\n  \n  if authors != none {\n    for a in authors {\n      // Create basic author string with name and affiliation\n      let author_string = [\n        #box[#a.name]\n        #if authors.len() &gt; 1 [#super[#a.affiliation]]\n        #if a.keys().contains(\"email\") { [\\*] }\n      ]\n      author_strings.push(author_string)\n    }\n  }\n\n  // Display title\n  if title != none {\n    titleblock(title)\n  }\n\n  // Display authors with formatting\n  if authors != none {\n    titleblock(\n      [#author_strings.join(\", \", last: \" &amp; \")],\n      size: 1em\n    )\n  }\n\n  // Display affiliations\n  if affiliations != none {\n    titleblock(\n      for a in affiliations [\n        #if authors.len() &gt; 1 [#super[#a.id]]#a.name \\\n      ],\n      size: 0.9em\n    )\n  }\n}\n\n// Example usage\n#show: doc =&gt; minimal-preprint(\n  title: [Sample Paper Title],\n  authors: (\n    (name: [John Smith], affiliation: [1] ),\n    (name: [Jane Doe], affiliation: [1]),\n    (name: [Jane Doe], affiliation: [1], email: [john@example.com])\n  ),\n  affiliations: ((id: \"1\", name: \"Example University\"),),\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/4/481517e8f5e7acb1d542ec9363484495cde3f7ef.png\" alt=\"image\" data-base62-sha1=\"ahFzm7kha2Fb11ZqMWSKJIzLx83\" width=\"433\" height=\"174\"></p>\n<p>It give me too much space after superscript with affiliation (before comma), how I can fix it?</p>",
      "raw": "I am using typst 0.11 (template need to work where I cannot update dist just now)\nI have following code \n\n```typst\n#let titleblock(body, size: 1.2em) = [\n  #align(center)[\n    #text(size: size)[#body]\n  ]\n]\n\n#let minimal-preprint(\n  title: none,\n  authors: (),\n  affiliations: none,\n) = {\n  // Format author strings\n  let author_strings = ()\n  \n  if authors != none {\n    for a in authors {\n      // Create basic author string with name and affiliation\n      let author_string = [\n        #box[#a.name]\n        #if authors.len() > 1 [#super[#a.affiliation]]\n        #if a.keys().contains(\"email\") { [\\*] }\n      ]\n      author_strings.push(author_string)\n    }\n  }\n\n  // Display title\n  if title != none {\n    titleblock(title)\n  }\n\n  // Display authors with formatting\n  if authors != none {\n    titleblock(\n      [#author_strings.join(\", \", last: \" & \")],\n      size: 1em\n    )\n  }\n\n  // Display affiliations\n  if affiliations != none {\n    titleblock(\n      for a in affiliations [\n        #if authors.len() > 1 [#super[#a.id]]#a.name \\\n      ],\n      size: 0.9em\n    )\n  }\n}\n\n// Example usage\n#show: doc => minimal-preprint(\n  title: [Sample Paper Title],\n  authors: (\n    (name: [John Smith], affiliation: [1] ),\n    (name: [Jane Doe], affiliation: [1]),\n    (name: [Jane Doe], affiliation: [1], email: [john@example.com])\n  ),\n  affiliations: ((id: \"1\", name: \"Example University\"),),\n)\n```\n\n![image|433x174](upload://ahFzm7kha2Fb11ZqMWSKJIzLx83.png)\n\nIt give me too much space after superscript with affiliation (before comma), how I can fix it?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 479.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5257,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-07T12:52:10.750Z",
      "updated_at": "2024-11-07T12:52:34.407Z",
      "cooked": "<p>In constructing <code>author_string</code>, you are adding spaces.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let author_string = [\n        #box[#a.name]\n        #if authors.len() &gt; 1 [#super[#a.affiliation]]\n        #if a.keys().contains(\"email\") { [\\*] }\n      ]\n</code></pre>\n<p>Probably should be something like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">      // Create basic author string with name and affiliation\n      #let author_affiliation = if a.keys().contains(\"email\") [\n        #a.affiliation\\*\n      ] else {\n        a.affiliation\n      }\n      #let author_string = [\n        #box[\n          #if authors.len() &gt; 1 {\n            a.name\n            super(author_affiliation)\n          } else {\n            a.name\n          }\n        ]\n      ]\n</code></pre>",
      "raw": "In constructing `author_string`, you are adding spaces.\n```typ\n#let author_string = [\n        #box[#a.name]\n        #if authors.len() > 1 [#super[#a.affiliation]]\n        #if a.keys().contains(\"email\") { [\\*] }\n      ]\n```\nProbably should be something like\n```typ\n      // Create basic author string with name and affiliation\n      #let author_affiliation = if a.keys().contains(\"email\") [\n        #a.affiliation\\*\n      ] else {\n        a.affiliation\n      }\n      #let author_string = [\n        #box[\n          #if authors.len() > 1 {\n            a.name\n            super(author_affiliation)\n          } else {\n            a.name\n          }\n        ]\n      ]\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 14.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5259,
      "post_number": 3,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-07T13:28:34.022Z",
      "updated_at": "2024-11-07T13:28:34.022Z",
      "cooked": "<p>I changed it to</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let titleblock(body, size: 1.2em) = [\n  #align(center)[\n    #text(size: size)[#body]\n  ]\n]\n\n#let minimal-preprint(\n  title: none,\n  authors: (),\n  affiliations: none,\n) = {\n  // Format author strings\n  let author_strings = ()\n  \n  if authors != none {\n    for a in authors {\n      // Create basic author string with name and affiliation\n      let author_affiliation = if a.keys().contains(\"email\") [\n        #a.affiliation\\*\n      ] else {\n        a.affiliation\n      }\n      let author_string = [\n        #box[\n          #if authors.len() &gt; 1 {\n            a.name\n            super(author_affiliation)\n          } else {\n            a.name\n          }\n        ]\n      ]\n      author_strings.push(author_string)\n    }\n  }\n\n  // Display title\n  if title != none {\n    titleblock(title)\n  }\n\n  // Display authors with formatting\n  if authors != none {\n    titleblock(\n      [#author_strings.join(\", \", last: \" &amp; \")],\n      size: 1em\n    )\n  }\n\n  // Display affiliations\n  if affiliations != none {\n    titleblock(\n      for a in affiliations [\n        #if authors.len() &gt; 1 [#super[#a.id]]#a.name \\\n      ],\n      size: 0.9em\n    )\n  }\n}\n\n// Example usage\n#show: doc =&gt; minimal-preprint(\n  title: [Sample Paper Title],\n  authors: (\n    (name: [John Smith], affiliation: [1] ),\n    (name: [Jane Doe], affiliation: [1]),\n    (name: [Jane Doe], affiliation: [1], email: [john@example.com])\n  ),\n  affiliations: ((id: \"1\", name: \"Example University\"),),\n)\n</code></pre>\n<p>but the result is the same</p>",
      "raw": "I changed it to \n```typst\n#let titleblock(body, size: 1.2em) = [\n  #align(center)[\n    #text(size: size)[#body]\n  ]\n]\n\n#let minimal-preprint(\n  title: none,\n  authors: (),\n  affiliations: none,\n) = {\n  // Format author strings\n  let author_strings = ()\n  \n  if authors != none {\n    for a in authors {\n      // Create basic author string with name and affiliation\n      let author_affiliation = if a.keys().contains(\"email\") [\n        #a.affiliation\\*\n      ] else {\n        a.affiliation\n      }\n      let author_string = [\n        #box[\n          #if authors.len() > 1 {\n            a.name\n            super(author_affiliation)\n          } else {\n            a.name\n          }\n        ]\n      ]\n      author_strings.push(author_string)\n    }\n  }\n\n  // Display title\n  if title != none {\n    titleblock(title)\n  }\n\n  // Display authors with formatting\n  if authors != none {\n    titleblock(\n      [#author_strings.join(\", \", last: \" & \")],\n      size: 1em\n    )\n  }\n\n  // Display affiliations\n  if affiliations != none {\n    titleblock(\n      for a in affiliations [\n        #if authors.len() > 1 [#super[#a.id]]#a.name \\\n      ],\n      size: 0.9em\n    )\n  }\n}\n\n// Example usage\n#show: doc => minimal-preprint(\n  title: [Sample Paper Title],\n  authors: (\n    (name: [John Smith], affiliation: [1] ),\n    (name: [Jane Doe], affiliation: [1]),\n    (name: [Jane Doe], affiliation: [1], email: [john@example.com])\n  ),\n  affiliations: ((id: \"1\", name: \"Example University\"),),\n)\n``` \nbut the result is the same",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 8.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5260,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-07T13:29:49.293Z",
      "updated_at": "2024-11-07T13:29:49.293Z",
      "cooked": "<p>with this code my output is<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/3/39ae7447518caa5d026830024b8cacf40498b27e.png\" data-download-href=\"https://forum.typst.app/uploads/default/39ae7447518caa5d026830024b8cacf40498b27e\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/3/39ae7447518caa5d026830024b8cacf40498b27e_2_690x278.png\" alt=\"image\" data-base62-sha1=\"8egYTKaldrJg8n11DLDneXefUaG\" width=\"690\" height=\"278\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/3/39ae7447518caa5d026830024b8cacf40498b27e_2_690x278.png, https://forum.typst.app/uploads/default/original/2X/3/39ae7447518caa5d026830024b8cacf40498b27e.png 1.5x, https://forum.typst.app/uploads/default/original/2X/3/39ae7447518caa5d026830024b8cacf40498b27e.png 2x\" data-dominant-color=\"F3F3F3\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">818×330 28.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "with this code my output is \n![image|690x278](upload://8egYTKaldrJg8n11DLDneXefUaG.png)",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 8.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5261,
      "post_number": 5,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-07T13:36:44.976Z",
      "updated_at": "2024-11-07T13:39:25.340Z",
      "cooked": "<p>Yes, I would rather to have something more similar to superscript and comma  in the normal text<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/9/94fa960c3ec1502e05de1894b8b0b43cb9201dac.png\" alt=\"image\" data-base62-sha1=\"lfVxIPNuHhtxS5y9Z4gLIpyfSMI\" width=\"358\" height=\"80\"><br>\n(with maybe bigger space after the comma as it is now in the first example, I want to suppress the space before the comma , <code>#author_strings.join(\", \", last: \" &amp; \")</code> seems to be ok</p>\n<p>I apologize for my messy example, it was confusing (I made code example by removing ORICID part , that introduced innecesary  space before superscript), the problem for me is the  space after superscript</p>",
      "raw": "Yes, I would rather to have something more similar to superscript and comma  in the normal text \n![image|358x80](upload://lfVxIPNuHhtxS5y9Z4gLIpyfSMI.png)\n(with maybe bigger space after the comma as it is now in the first example, I want to suppress the space before the comma , `#author_strings.join(\", \", last: \" & \")` seems to be ok\n\nI apologize for my messy example, it was confusing (I made code example by removing ORICID part , that introduced innecesary  space before superscript), the problem for me is the  space after superscript",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 18,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5263,
      "post_number": 6,
      "username": "flokl",
      "name": "",
      "created_at": "2024-11-07T14:43:42.456Z",
      "updated_at": "2024-11-07T15:44:16.010Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/danborek\">@danborek</a>,<br>\nI marked the lines where you have the problem:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">      let author_string = [ // &lt;-- Here\n        #box[\n          #if authors.len() &gt; 1 {\n            a.name\n            super(author_affiliation)\n          } else {\n            a.name\n          }\n        ]\n      ] // &lt;-- And here is your problem\n</code></pre>\n<p>To demonstrate your problem I created a minimal example.</p>\n<details>\n<summary>\nExample</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#repr(\n[// &lt;-- Here\n  #box()[test]\n]// &lt;-- And here\n)\n</code></pre>\n<p>Which results in the following:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/1/116ccb61b97ceac8d5c921ed3c08f4a94de9d19d.png\" alt=\"test\" data-base62-sha1=\"2u9cTKQMTN3CetRm7TzQWu8synz\" width=\"296\" height=\"149\"><br>\nNotice the single space content <code>[ ]</code> before and after the block.</p>\n</details>\n<p>To fix it in your example you can either replace the square brackets with curly braces and remove the hash symbol of the block or simply remove the brackets and start with the block directly after the equal, like you did five lines above with the <code>if</code>.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">let author_string = box[\n  #if authors.len() &gt; 1 {\n    a.name\n    super(author_affiliation)\n  } else {\n    a.name\n  }\n]\n</code></pre>\n<p>I would generally recommend to use curly braces while scripting and use square brackets only when they make sense.</p>\n<p>Edit: I just noticed you don’t even need the box.<br>\nEdit Edit: added the box back in to keep the name and affiliation together.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">let author_string = if authors.len() &gt; 1 {\n  box(a.name + super(author_affiliation))\n} else {\n  a.name\n}\n</code></pre>",
      "raw": "Hi @danborek,\nI marked the lines where you have the problem:\n\n```typst\n      let author_string = [ // <-- Here\n        #box[\n          #if authors.len() > 1 {\n            a.name\n            super(author_affiliation)\n          } else {\n            a.name\n          }\n        ]\n      ] // <-- And here is your problem\n```\n\nTo demonstrate your problem I created a minimal example.\n[details=\"Example\"]\n```typst\n#repr(\n[// <-- Here\n  #box()[test]\n]// <-- And here\n)\n```\nWhich results in the following:\n![test|296x149](upload://2u9cTKQMTN3CetRm7TzQWu8synz.png)\nNotice the single space content `[ ]` before and after the block.\n[/details]\nTo fix it in your example you can either replace the square brackets with curly braces and remove the hash symbol of the block or simply remove the brackets and start with the block directly after the equal, like you did five lines above with the `if`.\n\n```typst\nlet author_string = box[\n  #if authors.len() > 1 {\n    a.name\n    super(author_affiliation)\n  } else {\n    a.name\n  }\n]\n```\nI would generally recommend to use curly braces while scripting and use square brackets only when they make sense.\n\nEdit: I just noticed you don't even need the box.\nEdit Edit: added the box back in to keep the name and affiliation together.\n```typst\nlet author_string = if authors.len() > 1 {\n  box(a.name + super(author_affiliation))\n} else {\n  a.name\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 18,
      "score": 93.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 5265,
      "post_number": 7,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-07T15:39:02.403Z",
      "updated_at": "2024-11-07T15:40:29.095Z",
      "cooked": "<p>thank you, It your pointing to <span class=\"chcklst-box fa fa-square-o fa-fw\"></span> solves my problem spaces, I want iteratively add authors</p>\n<pre><code class=\"lang-auto\">    for a in authors {\n      let author_string = {\n        a.name\n        if authors.len() &gt; 1 {super(a.affiliation)}\n        if a.keys().contains(\"email\") {[\\*]}\n}}\n\n</code></pre>\n<p>the last thing I want to ensure is that the author names or its affiliation will not be split between lines,  does {} around authore_string will have the same properties as <code>box[]</code>?</p>",
      "raw": "thank you, It your pointing to [] solves my problem spaces, I want iteratively add authors\n\n```\n    for a in authors {\n      let author_string = {\n        a.name\n        if authors.len() > 1 {super(a.affiliation)}\n        if a.keys().contains(\"email\") {[\\*]}\n}}\n\n````\nthe last thing I want to ensure is that the author names or its affiliation will not be split between lines,  does {} around authore_string will have the same properties as `box[]`?",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 2.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5266,
      "post_number": 8,
      "username": "flokl",
      "name": "",
      "created_at": "2024-11-07T15:40:23.926Z",
      "updated_at": "2024-11-07T15:45:14.295Z",
      "cooked": "<p>Ahh true I didn’t think about that, you have to keep the box.<br>\n(I added it bsck in the example above)</p>",
      "raw": "Ahh true I didn't think about that, you have to keep the box.\n(I added it bsck in the example above)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 7.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 5267,
      "post_number": 9,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-07T15:50:45.972Z",
      "updated_at": "2024-11-07T15:53:52.649Z",
      "cooked": "<p>My final  (simplified) solution is</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">let author_strings = ()\n    for a in authors {\n      let author_string = box[#{\n        a.name\n        if authors.len() &gt; 1 {super(a.affiliation)}\n        if a.keys().contains(\"email\") {[\\*]}\n    }\n   ]\n  author_strings.push(author_string)\n  }\n\n</code></pre>",
      "raw": "My final  (simplified) solution is \n```typst\nlet author_strings = ()\n    for a in authors {\n      let author_string = box[#{\n        a.name\n        if authors.len() > 1 {super(a.affiliation)}\n        if a.keys().contains(\"email\") {[\\*]}\n    }\n   ]\n  author_strings.push(author_string)\n  }\n\n````",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 2.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5365,
      "post_number": 10,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-08T23:34:23.499Z",
      "updated_at": "2024-11-08T23:34:23.499Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/danborek\">@danborek</a> ! I’ve updated your post title to better suit our question guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Please make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @danborek ! I've updated your post title to better suit our question guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nPlease make sure your title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 13,
      "score": 22.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:55:22.542009"
}
{
  "topic_metadata": {
    "id": 1595,
    "title": "How to Left-align Text using Math Mode's Alignment Operator?",
    "slug": "how-to-left-align-text-using-math-modes-alignment-operator",
    "posts_count": 5,
    "created_at": "2024-11-07T18:17:41.163Z",
    "last_posted_at": "2024-11-08T07:59:52.050Z",
    "views": 272,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Bolt",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 458
  },
  "posts": [
    {
      "id": 5274,
      "post_number": 1,
      "username": "Hasan",
      "name": "Hasan",
      "created_at": "2024-11-07T18:17:41.284Z",
      "updated_at": "2024-11-08T01:47:32.523Z",
      "cooked": "<p>I have a problem when using math mode’s alignment operator. It always right align text. See this example:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(height: auto, width: auto, margin: 20pt)\n\n$\n&amp;not exists x exists y (Q(x, y) &lt;--&gt; Q(y, x)) #h(160pt) &amp;\"Original\" \\\nequiv &amp;forall x not exists y (Q(x,y) &lt;--&gt; Q(y, x)) &amp;\"De Morgan's Law\" \\\nequiv &amp;forall x forall y space not (Q(x,y) &lt;--&gt; Q(y, x)) &amp;\"De Morgan's Law\" \\\nequiv &amp;forall x forall y space ((Q(x,y) and not Q(y,x)) or (not Q(x,y) and Q(y, x))) &amp;\"By (1)\"\n$\n</code></pre>\n<p>The output is:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/b/b681e2a946f8e47c875fe9e60bd7603fc63abfdb.png\" data-download-href=\"https://forum.typst.app/uploads/default/b681e2a946f8e47c875fe9e60bd7603fc63abfdb\" title=\"1000320756\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/b/b681e2a946f8e47c875fe9e60bd7603fc63abfdb_2_690x170.png\" alt=\"1000320756\" data-base62-sha1=\"q2xb1sgzNaWcQrjVzsASrG2iiTN\" width=\"690\" height=\"170\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/b/b681e2a946f8e47c875fe9e60bd7603fc63abfdb_2_690x170.png, https://forum.typst.app/uploads/default/optimized/2X/b/b681e2a946f8e47c875fe9e60bd7603fc63abfdb_2_1035x255.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/b/b681e2a946f8e47c875fe9e60bd7603fc63abfdb_2_1380x340.png 2x\" data-dominant-color=\"F7F7F7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">1000320756</span><span class=\"informations\">1780×439 162 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>However, my intended output is to look more like the traditional math example solutions e.g.<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/a/a6c9b015c38a3553bf39be48c6844247b9b786b2.png\" data-download-href=\"https://forum.typst.app/uploads/default/a6c9b015c38a3553bf39be48c6844247b9b786b2\" title=\"1000320754\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/a/a6c9b015c38a3553bf39be48c6844247b9b786b2_2_690x188.png\" alt=\"1000320754\" data-base62-sha1=\"nNtncJRc9P1IOtOS6I46JsnELNE\" width=\"690\" height=\"188\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/a/a6c9b015c38a3553bf39be48c6844247b9b786b2_2_690x188.png, https://forum.typst.app/uploads/default/optimized/2X/a/a6c9b015c38a3553bf39be48c6844247b9b786b2_2_1035x282.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/a/a6c9b015c38a3553bf39be48c6844247b9b786b2_2_1380x376.png 2x\" data-dominant-color=\"F8F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">1000320754</span><span class=\"informations\">1833×500 163 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I am aware that this is achievable using a grid, but I think this use case is very common that I might be missing out on something. If there’s a better method to do this quick and easy please let me know.</p>\n<p>Thank you for your time!</p>",
      "raw": "I have a problem when using math mode's alignment operator. It always right align text. See this example: \n```typst\n#set page(height: auto, width: auto, margin: 20pt)\n\n$\n&not exists x exists y (Q(x, y) <--> Q(y, x)) #h(160pt) &\"Original\" \\\nequiv &forall x not exists y (Q(x,y) <--> Q(y, x)) &\"De Morgan's Law\" \\\nequiv &forall x forall y space not (Q(x,y) <--> Q(y, x)) &\"De Morgan's Law\" \\\nequiv &forall x forall y space ((Q(x,y) and not Q(y,x)) or (not Q(x,y) and Q(y, x))) &\"By (1)\"\n$\n```\n\nThe output is: \n![1000320756|690x170](upload://q2xb1sgzNaWcQrjVzsASrG2iiTN.png)\n\nHowever, my intended output is to look more like the traditional math example solutions e.g.\n![1000320754|690x188](upload://nNtncJRc9P1IOtOS6I46JsnELNE.png)\n\nI am aware that this is achievable using a grid, but I think this use case is very common that I might be missing out on something. If there's a better method to do this quick and easy please let me know.\n\nThank you for your time!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 1330.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 766
    },
    {
      "id": 5276,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-11-07T18:39:41.133Z",
      "updated_at": "2024-11-07T18:41:22.769Z",
      "cooked": "<p>The alignment alternates between right and left with every alignment point, thus in your example, the alignments are</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$\n/*\nRight &amp; Left                    &amp;             Right\n*/\n      &amp;not exists ... #h(160pt) &amp;        \"Original\" \\\nequiv &amp;forall x ...             &amp; \"De Morgan's Law\" \\\nequiv &amp;forall x ...             &amp; \"De Morgan's Law\" \\\nequiv &amp;forall x ...             &amp;          \"By (1)\"\n$\n</code></pre>\n<p>You can simply put two of these alignment points together (<code>&amp;&amp;</code>) to skip one alternation and use the other alignment.</p>",
      "raw": "The alignment alternates between right and left with every alignment point, thus in your example, the alignments are\n```typ\n$\n/*\nRight & Left                    &             Right\n*/\n      &not exists ... #h(160pt) &        \"Original\" \\\nequiv &forall x ...             & \"De Morgan's Law\" \\\nequiv &forall x ...             & \"De Morgan's Law\" \\\nequiv &forall x ...             &          \"By (1)\"\n$\n```\n\nYou can simply put two of these alignment points together (`&&`) to skip one alternation and use the other alignment.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 45.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 5277,
      "post_number": 3,
      "username": "Bolt",
      "name": "",
      "created_at": "2024-11-07T18:41:28.066Z",
      "updated_at": "2024-11-07T18:41:28.066Z",
      "cooked": "<p>Alignment markers alternate alignment between left and right, which is why the the part before the first <code>&amp;</code> is right aligned, and the part between the first and second <code>&amp;</code> is left aligned. You can achieve the behavior you want by doubling up to <code>&amp;&amp;</code> so that it toggles twice, cancelling each other out, turning <code>right &amp; left &amp; right</code> into <code>right &amp; left &amp;&amp; left</code>.</p>\n<p>For your case this would be:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(height: auto, width: auto, margin: 20pt)\n\n$\n&amp;not exists x exists y (Q(x, y) &lt;--&gt; Q(y, x)) #h(160pt) &amp;&amp;\"Original\" \\\nequiv &amp;forall x not exists y (Q(x,y) &lt;--&gt; Q(y, x)) &amp;&amp;\"De Morgan's Law\" \\\nequiv &amp;forall x forall y space not (Q(x,y) &lt;--&gt; Q(y, x)) &amp;&amp;\"De Morgan's Law\" \\\nequiv &amp;forall x forall y space ((Q(x,y) and not Q(y,x)) or (not Q(x,y) and Q(y, x))) &amp;&amp;\"By (1)\"\n$\n</code></pre>",
      "raw": "Alignment markers alternate alignment between left and right, which is why the the part before the first `&` is right aligned, and the part between the first and second `&` is left aligned. You can achieve the behavior you want by doubling up to `&&` so that it toggles twice, cancelling each other out, turning `right & left & right` into `right & left && left`.\n\nFor your case this would be:\n```typ\n#set page(height: auto, width: auto, margin: 20pt)\n\n$\n&not exists x exists y (Q(x, y) <--> Q(y, x)) #h(160pt) &&\"Original\" \\\nequiv &forall x not exists y (Q(x,y) <--> Q(y, x)) &&\"De Morgan's Law\" \\\nequiv &forall x forall y space not (Q(x,y) <--> Q(y, x)) &&\"De Morgan's Law\" \\\nequiv &forall x forall y space ((Q(x,y) and not Q(y,x)) or (not Q(x,y) and Q(y, x))) &&\"By (1)\"\n$\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 24.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 737
    },
    {
      "id": 5293,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-08T01:48:22.552Z",
      "updated_at": "2024-11-08T01:48:22.552Z",
      "cooked": "<p>Welcome to the forum <a class=\"mention\" href=\"/u/hasan\">@Hasan</a>! I’ve updated your post title to better suit our question guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Welcome to the forum @Hasan! I've updated your post title to better suit our question guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 14.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5302,
      "post_number": 5,
      "username": "Hasan",
      "name": "Hasan",
      "created_at": "2024-11-08T07:59:52.050Z",
      "updated_at": "2024-11-08T07:59:52.050Z",
      "cooked": "<p>Thank you both <a class=\"mention\" href=\"/u/eric\">@Eric</a> <a class=\"mention\" href=\"/u/bolt\">@Bolt</a>. I hope I asked earlier for help instead of using grid all these weeks lol. It works very well.</p>",
      "raw": "Thank you both @Eric @Bolt. I hope I asked earlier for help instead of using grid all these weeks lol. It works very well.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 766
    }
  ],
  "scraped_at": "2025-06-10T09:55:21.811811"
}
{
  "topic_metadata": {
    "id": 1597,
    "title": "Citation style APA 7th edition: how to change & to 'und' in running text?",
    "slug": "citation-style-apa-7th-edition-how-to-change-to-und-in-running-text",
    "posts_count": 5,
    "created_at": "2024-11-07T20:01:22.824Z",
    "last_posted_at": "2024-11-08T10:36:28.153Z",
    "views": 306,
    "like_count": 5,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "flokl",
    "tags": [
      "citation"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 316
  },
  "posts": [
    {
      "id": 5278,
      "post_number": 1,
      "username": "Mike_Schmid",
      "name": "",
      "created_at": "2024-11-07T20:01:22.951Z",
      "updated_at": "2024-11-08T01:45:17.385Z",
      "cooked": "<p>Hi to everybody</p>\n<p>We writing our thesis with typst and just now I figured out a problem with the citation in the running text.<br>\nHow can I replace the &amp; with ‘and’ in a citation in APA style in the body text? For example, “Muller &amp; Openheimer” appears instead of “Muller and Openheimer” in the running text of typst. If I read the APA specs the ‘and’ is the correct way and only in parenthesis it’s the ‘&amp;’ sign.</p>\n<p>Thanks for any help<br>\nregards<br>\nMike</p>",
      "raw": "Hi to everybody\n\nWe writing our thesis with typst and just now I figured out a problem with the citation in the running text.\nHow can I replace the & with 'and' in a citation in APA style in the body text? For example, “Muller & Openheimer” appears instead of “Muller and Openheimer” in the running text of typst. If I read the APA specs the 'and' is the correct way and only in parenthesis it's the '&' sign.\n\nThanks for any help \nregards\nMike",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 37,
      "score": 1567.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 392
    },
    {
      "id": 5280,
      "post_number": 2,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-07T20:48:32.486Z",
      "updated_at": "2024-11-07T20:56:17.519Z",
      "cooked": "<p>Use any cls you wish <a href=\"https://www.zotero.org/styles?q=apa\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Zotero Style Repository</a>, download and use it with  <code>bibliography-style: \"apa-no-ampersand.csl\"</code> within your document definitionj  or <code>#set bibliography(style: \"apa-no-ampersand.csl\")</code>  before <code>#bibliography(\"references.bib\")</code> in your body , here are the references <a href=\"https://typst.app/docs/reference/model/bibliography/\" class=\"inline-onebox\">Bibliography Function – Typst Documentation</a></p>\n<p>Custom cls will  only work for 0.12</p>",
      "raw": "Use any cls you wish https://www.zotero.org/styles?q=apa, download and use it with  `bibliography-style: \"apa-no-ampersand.csl\"` within your document definitionj  or `#set bibliography(style: \"apa-no-ampersand.csl\")`  before `#bibliography(\"references.bib\")` in your body , here are the references https://typst.app/docs/reference/model/bibliography/\n\nCustom cls will  only work for 0.12",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 36,
      "score": 42.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5282,
      "post_number": 3,
      "username": "flokl",
      "name": "",
      "created_at": "2024-11-07T21:24:42.499Z",
      "updated_at": "2024-11-07T21:28:32.763Z",
      "cooked": "<p>Hi,</p>\n<p>Typst uses Hayagriva for citation stuff, which relies on the Citation Style Language (CSL) citation styles from <a href=\"https://github.com/citation-style-language/styles\" rel=\"noopener nofollow ugc\">here</a>.<br>\nThere is a open issue about your problem <a href=\"https://github.com/typst/hayagriva/issues/188\" rel=\"noopener nofollow ugc\">here</a> for Typst/Hayagriva and <a href=\"https://github.com/citation-style-language/styles/issues/3748#issuecomment-430869860\" rel=\"noopener nofollow ugc\">here</a> for CSL (I didn’t check if the problem is with CSL or Hayagriva).<br>\nAnyway, <a class=\"mention\" href=\"/u/danborek\">@danborek</a> answer works, but with it the ampersand gets changed to ‘<code>and</code>’ in both narrative and parenthetical citations. In the comments on the Typst/Hayagriva issue, the user poopsicles added a workaround which changes it only for narrative citations.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show cite.where(form: \"prose\"): it =&gt; {\n  show \"&amp;\": \"and\"\n  it\n}\n</code></pre>",
      "raw": "Hi, \n\nTypst uses Hayagriva for citation stuff, which relies on the Citation Style Language (CSL) citation styles from [here](https://github.com/citation-style-language/styles). \nThere is a open issue about your problem [here](https://github.com/typst/hayagriva/issues/188) for Typst/Hayagriva and [here](https://github.com/citation-style-language/styles/issues/3748#issuecomment-430869860) for CSL (I didn't check if the problem is with CSL or Hayagriva). \nAnyway, @danborek answer works, but with it the ampersand gets changed to '`and`' in both narrative and parenthetical citations. In the comments on the Typst/Hayagriva issue, the user poopsicles added a workaround which changes it only for narrative citations.\n```typst\n#show cite.where(form: \"prose\"): it => {\n  show \"&\": \"and\"\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 32.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 5292,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-08T01:46:07.462Z",
      "updated_at": "2024-11-08T01:46:07.462Z",
      "cooked": "<p>Welcome to the forum <a class=\"mention\" href=\"/u/mike_schmid\">@Mike_Schmid</a> ! Please post questions in <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> in the future, and make sure your title contains a question, per our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>. Thanks! <img src=\"https://forum.typst.app/uploads/default/original/1X/274f848b78859852628e9efdb7d0aefa6c38bb26.png?v=12\" title=\":typstguy:\" class=\"emoji emoji-custom\" alt=\":typstguy:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Welcome to the forum @Mike_Schmid ! Please post questions in #questions in the future, and make sure your title contains a question, per our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11. Thanks! :typstguy:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 16.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5308,
      "post_number": 5,
      "username": "Mike_Schmid",
      "name": "",
      "created_at": "2024-11-08T10:36:28.153Z",
      "updated_at": "2024-11-08T10:36:28.153Z",
      "cooked": "<p>Thank you very much for this very precisely solution…</p>\n<p>regards<br>\nMike</p>",
      "raw": "Thank you very much for this very precisely solution...\n\nregards\nMike",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 27,
      "score": 35.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 392
    }
  ],
  "scraped_at": "2025-06-10T09:55:21.096403"
}
{
  "topic_metadata": {
    "id": 1598,
    "title": "Why my set and show rules in might be ignored when using if condition? (scope issue)",
    "slug": "why-my-set-and-show-rules-in-might-be-ignored-when-using-if-condition-scope-issue",
    "posts_count": 4,
    "created_at": "2024-11-07T20:17:35.565Z",
    "last_posted_at": "2024-11-08T06:34:22.096Z",
    "views": 253,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "scripting",
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 461
  },
  "posts": [
    {
      "id": 5279,
      "post_number": 1,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-07T20:17:35.734Z",
      "updated_at": "2024-11-10T15:41:02.328Z",
      "cooked": "<p>I  have a template which I need to use different code to achieve the same behaviour in different  versions</p>\n<p>here my bib file</p>\n<pre><code class=\"lang-auto\">@article{test2024,\n  title     = {Recent Advances in Something Important},\n  author    = {Test, John A. and Example, Jane B.},\n  journal   = {Journal of Important Things},\n  year      = {2024},\n  volume    = {42},\n  number    = {1},\n  pages     = {123--145},\n  publisher = {Academic Publishers}\n}\n\n@book{test1999,\n  title     = {Classic Book on Important Topics},\n  author    = {Test, Robert C.},\n  year      = {1999},\n  publisher = {Classic Publishing House},\n  address   = {New York},\n  edition   = {2nd}\n}\n</code></pre>\n<p>Code that should work</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let spacing = 0.65em\n\n#set page(\n  paper: \"a4\",\n  margin: (x: 2.5cm, y: 2.5cm),\n)\n\n#set heading(numbering: \"1.\")\n\n// Bibliography settings\n#set bibliography(\n  title: \"References\",\n  style: \"ieee\",\n)\n\n// Configure bibliography spacing based on Typst version\n#if sys.version &gt;= version(0, 12, 0) {\n  show bibliography: set par(spacing: spacing, leading: spacing)\n} else {\n  show bibliography: set block(spacing: spacing)\n}\n\n\n\n= Introduction\n\nThis is a sample document demonstrating bibliography settings in Typst. Here's a citation to a something @test2024 and another reference @test1999.\n\nSome more text here to show the spacing...\n\n= Conclusion\n\nThe bibliography will appear below with custom spacing and styling.\n\n// Define bibliography data in YAML format\n\n\n\n#bibliography(\"bibliography.bib\")\n\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/3/34e693cf36317b5e9a2ba1355e5eb85337936e5d.png\" data-download-href=\"https://forum.typst.app/uploads/default/34e693cf36317b5e9a2ba1355e5eb85337936e5d\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/3/34e693cf36317b5e9a2ba1355e5eb85337936e5d_2_690x147.png\" alt=\"image\" data-base62-sha1=\"7xYPY7YaDZwlovOD1LickHn2qcd\" width=\"690\" height=\"147\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/3/34e693cf36317b5e9a2ba1355e5eb85337936e5d_2_690x147.png, https://forum.typst.app/uploads/default/original/2X/3/34e693cf36317b5e9a2ba1355e5eb85337936e5d.png 1.5x, https://forum.typst.app/uploads/default/original/2X/3/34e693cf36317b5e9a2ba1355e5eb85337936e5d.png 2x\" data-dominant-color=\"F4F4F4\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">735×157 27 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>but it work only if I apply it directly outside of  <span class=\"hashtag-raw\">#if</span> -   is this issue  of scope of <code>#if</code>?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show bibliography: set par(spacing: spacing, leading: spacing)\n\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/0/0a18594641db493960b80912d80f01faca476fe1.png\" data-download-href=\"https://forum.typst.app/uploads/default/0a18594641db493960b80912d80f01faca476fe1\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/0/0a18594641db493960b80912d80f01faca476fe1_2_690x152.png\" alt=\"image\" data-base62-sha1=\"1riWnz2IqbmOoupYJ8ZbIYI4SuB\" width=\"690\" height=\"152\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/0/0a18594641db493960b80912d80f01faca476fe1_2_690x152.png, https://forum.typst.app/uploads/default/original/2X/0/0a18594641db493960b80912d80f01faca476fe1.png 1.5x, https://forum.typst.app/uploads/default/original/2X/0/0a18594641db493960b80912d80f01faca476fe1.png 2x\" data-dominant-color=\"F3F3F3\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">715×158 26.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I was able to solve similar problem with using if clause options, but I am not so sure anymore :(</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">  // Set space between paragraphs\n  if sys.version &gt;= version(0,12,0) {\n    set par(spacing: spacing)\n  } else {\n    show par: set block(spacing: spacing)\n  }\n\n</code></pre>",
      "raw": "I  have a template which I need to use different code to achieve the same behaviour in different  versions\n\nhere my bib file\n```\n@article{test2024,\n  title     = {Recent Advances in Something Important},\n  author    = {Test, John A. and Example, Jane B.},\n  journal   = {Journal of Important Things},\n  year      = {2024},\n  volume    = {42},\n  number    = {1},\n  pages     = {123--145},\n  publisher = {Academic Publishers}\n}\n\n@book{test1999,\n  title     = {Classic Book on Important Topics},\n  author    = {Test, Robert C.},\n  year      = {1999},\n  publisher = {Classic Publishing House},\n  address   = {New York},\n  edition   = {2nd}\n}\n``` \n\nCode that should work \n```typ\n#let spacing = 0.65em\n\n#set page(\n  paper: \"a4\",\n  margin: (x: 2.5cm, y: 2.5cm),\n)\n\n#set heading(numbering: \"1.\")\n\n// Bibliography settings\n#set bibliography(\n  title: \"References\",\n  style: \"ieee\",\n)\n\n// Configure bibliography spacing based on Typst version\n#if sys.version >= version(0, 12, 0) {\n  show bibliography: set par(spacing: spacing, leading: spacing)\n} else {\n  show bibliography: set block(spacing: spacing)\n}\n\n\n\n= Introduction\n\nThis is a sample document demonstrating bibliography settings in Typst. Here's a citation to a something @test2024 and another reference @test1999.\n\nSome more text here to show the spacing...\n\n= Conclusion\n\nThe bibliography will appear below with custom spacing and styling.\n\n// Define bibliography data in YAML format\n\n\n\n#bibliography(\"bibliography.bib\")\n\n```\n![image|690x147](upload://7xYPY7YaDZwlovOD1LickHn2qcd.png)\n\nbut it work only if I apply it directly outside of  #if -   is this issue  of scope of `#if`?\n```typ\n#show bibliography: set par(spacing: spacing, leading: spacing)\n\n```\n![image|690x152](upload://1riWnz2IqbmOoupYJ8ZbIYI4SuB.png)\n\nI was able to solve similar problem with using if clause options, but I am not so sure anymore :(  \n```typc\n  // Set space between paragraphs\n  if sys.version >= version(0,12,0) {\n    set par(spacing: spacing)\n  } else {\n    show par: set block(spacing: spacing)\n  }\n\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 981.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5283,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2024-11-07T21:48:53.812Z",
      "updated_at": "2024-11-08T06:34:55.521Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/danborek\">@danborek</a>,</p>\n<p>you are correct, it is a scope issue. Set and show rules are scoped and only apply inside the scope, in your case inside the <code>if</code>.</p>\n<p>You can avoid the scope issue by using <code>set-if</code> rules.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show bibliography: set par(spacing: spacing, leading: spacing) if sys.version &gt;= version(0, 12, 0)\n#show bibliography: set block(spacing: spacing) if sys.version &lt; version(0, 12, 0)\n</code></pre>\n<p>Or the other option would be this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show bibliography: it =&gt; {\n  if sys.version &gt;= version(0, 12, 0) {\n    set par(spacing: spacing, leading: spacing)\n    it\n  } else {\n    set block(spacing: spacing)\n    it\n  }\n}\n</code></pre>",
      "raw": "Hi @danborek, \n\nyou are correct, it is a scope issue. Set and show rules are scoped and only apply inside the scope, in your case inside the `if`.\n\nYou can avoid the scope issue by using `set-if` rules.\n```typst\n#show bibliography: set par(spacing: spacing, leading: spacing) if sys.version >= version(0, 12, 0)\n#show bibliography: set block(spacing: spacing) if sys.version < version(0, 12, 0)\n```\nOr the other option would be this:\n```typst\n#show bibliography: it => {\n  if sys.version >= version(0, 12, 0) {\n    set par(spacing: spacing, leading: spacing)\n    it\n  } else {\n    set block(spacing: spacing)\n    it\n  }\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 25.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 5285,
      "post_number": 3,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-07T23:11:26.756Z",
      "updated_at": "2024-11-07T23:12:35.982Z",
      "cooked": "<p>Thanks <span class=\"mention\">@floki</span>!</p>\n<blockquote>\n<p>not so nice option would be this:</p>\n</blockquote>\n<p>Is this rather esthetic preference  about code or is there something about  the  use of <code>it</code> in <code>typst</code> that I should be  careful over and not to overuse it?<br>\nAs I am doing mostly Python recently, my first idea would be to use 2nd pattern as this more reflect my thinking (in pseudocode)</p>",
      "raw": "Thanks @floki!\n\n> not so nice option would be this:\n\nIs this rather esthetic preference  about code or is there something about  the  use of `it` in `typst` that I should be  careful over and not to overuse it?\nAs I am doing mostly Python recently, my first idea would be to use 2nd pattern as this more reflect my thinking (in pseudocode)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 25.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5297,
      "post_number": 4,
      "username": "flokl",
      "name": "",
      "created_at": "2024-11-08T06:34:22.096Z",
      "updated_at": "2024-11-08T06:35:37.720Z",
      "cooked": "<p>I don’t know why I added “not so nice” to the answer, the first option is just my preference. I edited the answer to not confuse anyone else.</p>",
      "raw": "I don't know why I added \"not so nice\" to the answer, the first option is just my preference. I edited the answer to not confuse anyone else.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 19.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    }
  ],
  "scraped_at": "2025-06-10T09:55:20.372396"
}
{
  "topic_metadata": {
    "id": 160,
    "title": "Can I configure my document (e.g. draft/release version, color theme) when creating a PDF without modifying the Typst file directly?",
    "slug": "can-i-configure-my-document-e-g-draft-release-version-color-theme-when-creating-a-pdf-without-modifying-the-typst-file-directly",
    "posts_count": 3,
    "created_at": "2024-09-15T09:09:22.733Z",
    "last_posted_at": "2024-09-15T09:26:00.364Z",
    "views": 787,
    "like_count": 8,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "scripting",
      "data-loading"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 407
  },
  "posts": [
    {
      "id": 649,
      "post_number": 1,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-15T09:09:22.843Z",
      "updated_at": "2024-09-19T07:14:44.885Z",
      "cooked": "<p>Basically, are there ways to to create multiple structurally similar PDFs from the same Typst document, by configuring it in some way? Use cases that come to mind:</p>\n<ul>\n<li>draft version (with watermark, comments, …) vs. release version</li>\n<li>different themes, e.g. light/dark, serif/sans</li>\n<li>exam and solution sheets</li>\n<li>slides, handout, and speaker notes</li>\n<li>rendering different data, serial letter style</li>\n</ul>\n<p>Is there a mechanism that lets one achieve that without having to modify the input Typst document itself?</p>",
      "raw": "Basically, are there ways to to create multiple structurally similar PDFs from the same Typst document, by configuring it in some way? Use cases that come to mind:\n\n- draft version (with watermark, comments, ...) vs. release version\n- different themes, e.g. light/dark, serif/sans\n- exam and solution sheets\n- slides, handout, and speaker notes\n- rendering different data, serial letter style\n\nIs there a mechanism that lets one achieve that without having to modify the input Typst document itself?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 100,
      "score": 1135.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 653,
      "post_number": 2,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-09-15T09:25:12.850Z",
      "updated_at": "2024-09-15T09:25:12.850Z",
      "cooked": "<p>You can use <code>system.inputs</code> (<a href=\"https://typst.app/docs/reference/foundations/sys\" class=\"inline-onebox\">System Functions – Typst Documentation</a>) to get the command-line inputs at compile time, and then check for the presence of specific inputs to define the document style in different ways.</p>",
      "raw": "You can use `system.inputs` (https://typst.app/docs/reference/foundations/sys) to get the command-line inputs at compile time, and then check for the presence of specific inputs to define the document style in different ways.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 99,
      "score": 64.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 654,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-15T09:26:00.364Z",
      "updated_at": "2024-09-15T09:29:42.656Z",
      "cooked": "<p>There absolutely is: the <a href=\"https://typst.app/docs/reference/foundations/sys\"><code>sys.inputs</code></a> dictionary contains values that have been set from the command line, via the <code>--input key=value</code> syntax. To my knowledge, the web app currently doesn’t have a way to put values into that dictionary, so be aware of that.</p>\n<p>It’s often useful to have <strong>default values</strong> for these parameters, and <strong>check whether values are valid</strong>. Let’s say you want to assume <code>--input theme=light</code> and <code>--input solutions=false</code>, you could process the <code>sys.inputs</code> dictionary like this:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">let theme = {\n  let valid-values = (\"light\", \"dark\")\n  let value = sys.inputs.at(\"theme\", default: \"light\")\n  assert(value in valid-values, message: \"`--input theme` must be light or dark\")\n  value\n}\n\nlet solutions = {\n  let valid-values = (\"true\": true, \"false\": false)\n  let value = sys.inputs.at(\"solutions\", default: \"false\")\n  assert(value in valid-values, message: \"`--input solutions` must be true or false\")\n  valid-values.at(value)\n}\n</code></pre>\n<p>Using this code, <code>theme</code> will be a string value (default <code>\"light\"</code>) and <code>solutions</code> will be a boolean value (default <code>false</code>).</p>\n<p>For more complex data input needs, using one of the <a href=\"https://typst.app/docs/reference/data-loading/\">data loading</a> functions is probably the best idea:</p>\n<ul>\n<li>directly in the command line: <code>--input 'data={\"some-num\": 1, \"some-bool\": true}'</code><br>\nthen read via <code>json.decode(sys.inputs.data)</code></li>\n<li>in a separate file: <code>--input 'file=data.json'</code><br>\nthen read via <code>json(sys.inputs.file)</code><br>\nFor this to work, the file must be accessible to Typst, i.e. it must be in the Typst <em>root directory</em>. By default, that is the directory where the main Typst file you’re processing is located.</li>\n</ul>\n<p>(JSON is of course just one option for a data format that can be read like this.)</p>",
      "raw": "There absolutely is: the [`sys.inputs`](https://typst.app/docs/reference/foundations/sys) dictionary contains values that have been set from the command line, via the `--input key=value` syntax. To my knowledge, the web app currently doesn't have a way to put values into that dictionary, so be aware of that.\n\nIt's often useful to have **default values** for these parameters, and **check whether values are valid**. Let's say you want to assume `--input theme=light` and `--input solutions=false`, you could process the `sys.inputs` dictionary like this:\n\n```typc\nlet theme = {\n  let valid-values = (\"light\", \"dark\")\n  let value = sys.inputs.at(\"theme\", default: \"light\")\n  assert(value in valid-values, message: \"`--input theme` must be light or dark\")\n  value\n}\n\nlet solutions = {\n  let valid-values = (\"true\": true, \"false\": false)\n  let value = sys.inputs.at(\"solutions\", default: \"false\")\n  assert(value in valid-values, message: \"`--input solutions` must be true or false\")\n  valid-values.at(value)\n}\n```\n\nUsing this code, `theme` will be a string value (default `\"light\"`) and `solutions` will be a boolean value (default `false`).\n\nFor more complex data input needs, using one of the [data loading](https://typst.app/docs/reference/data-loading/) functions is probably the best idea:\n- directly in the command line: `--input 'data={\"some-num\": 1, \"some-bool\": true}'`\n  then read via `json.decode(sys.inputs.data)`\n- in a separate file: `--input 'file=data.json'`\n  then read via `json(sys.inputs.file)`\n  For this to work, the file must be accessible to Typst, i.e. it must be in the Typst _root directory_. By default, that is the directory where the main Typst file you're processing is located.\n\n(JSON is of course just one option for a data format that can be read like this.)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 6,
      "reads": 97,
      "score": 699.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:58:58.735706"
}
{
  "topic_metadata": {
    "id": 1601,
    "title": "Is there a shorthand for Hardy's asymptotic notation symbol ≍?",
    "slug": "is-there-a-shorthand-for-hardys-asymptotic-notation-symbol",
    "posts_count": 3,
    "created_at": "2024-11-08T04:00:52.591Z",
    "last_posted_at": "2024-11-08T23:20:07.797Z",
    "views": 111,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "math",
      "symbols"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 134
  },
  "posts": [
    {
      "id": 5296,
      "post_number": 1,
      "username": "aaronmanning",
      "name": "Aaron Manning",
      "created_at": "2024-11-08T04:00:52.716Z",
      "updated_at": "2024-11-08T23:19:24.491Z",
      "cooked": "<p>Does anyone know if there is a shorthand in the symbols namespace for Hardy’s asymptotic notation?</p>\n<ul>\n<li>Unicode character: ≍</li>\n<li>LaTeX Command: \\asymp</li>\n</ul>\n<p>I can’t seem to find it. If not, it might be a worthwhile thing to add, as it is provided by LaTeX and frequently used in number theory and combinatorics.</p>",
      "raw": "Does anyone know if there is a shorthand in the symbols namespace for Hardy's asymptotic notation?\n\n- Unicode character: ≍\n- LaTeX Command: \\asymp\n\nI can't seem to find it. If not, it might be a worthwhile thing to add, as it is provided by LaTeX and frequently used in number theory and combinatorics.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 306.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 557
    },
    {
      "id": 5301,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-08T07:48:45.487Z",
      "updated_at": "2024-11-08T08:32:47.532Z",
      "cooked": "<p>Hello and welcome! I don’t think so.<br>\nUntil it comes, you can use</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let hd = \"\\u{224D}\"\n#let nhd = \"\\u{226D}\"\n$\n  hd\\\n  nhd\n$\n</code></pre>\n<p>EDIT: opened a PR <a href=\"https://github.com/typst/typst/pull/5391\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Add eq.equiv ≍ U+224D (equivalent to) and eq.nequiv ≭ U+226D (not equivalent to) to symbols by quachpas · Pull Request #5391 · typst/typst · GitHub</a></p>",
      "raw": "Hello and welcome! I don't think so.\nUntil it comes, you can use \n```typ\n#let hd = \"\\u{224D}\"\n#let nhd = \"\\u{226D}\"\n$\n  hd\\\n  nhd\n$\n```\n\nEDIT: opened a PR https://github.com/typst/typst/pull/5391",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 35.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5360,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-08T23:20:07.797Z",
      "updated_at": "2024-11-08T23:20:07.797Z",
      "cooked": "<p>Welcome to the forum <a class=\"mention\" href=\"/u/aaronmanning\">@aaronmanning</a> ! I’ve updated your post title to better suit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Welcome to the forum @aaronmanning ! I've updated your post title to better suit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:55:19.671412"
}
{
  "topic_metadata": {
    "id": 1605,
    "title": "How to share bibliography in a multi-file setup?",
    "slug": "how-to-share-bibliography-in-a-multi-file-setup",
    "posts_count": 11,
    "created_at": "2024-11-08T08:23:04.391Z",
    "last_posted_at": "2025-02-12T10:22:42.934Z",
    "views": 699,
    "like_count": 5,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 9,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "scripting",
      "literature"
    ],
    "category_id": 5,
    "participant_count": 6,
    "word_count": 971
  },
  "posts": [
    {
      "id": 5304,
      "post_number": 1,
      "username": "Daniel_Nief",
      "name": "Daniel Nief",
      "created_at": "2024-11-08T08:23:04.515Z",
      "updated_at": "2025-02-05T15:05:52.233Z",
      "cooked": "<p>In my setup where I include my chapters into separate typ files and include them in my main file, I can create the bibliography in the main file and it detects all references across the included subfiles. However when previewing the parts, the referenced citation can’t be found, throwing an error and file preview is disabled. I can’t import the same bibliography either, since only one is supported. It has to be shared somehow but I don’t know how.</p>",
      "raw": "In my setup where I include my chapters into separate typ files and include them in my main file, I can create the bibliography in the main file and it detects all references across the included subfiles. However when previewing the parts, the referenced citation can't be found, throwing an error and file preview is disabled. I can't import the same bibliography either, since only one is supported. It has to be shared somehow but I don't know how.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 79,
      "score": 2985.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 768
    },
    {
      "id": 5309,
      "post_number": 2,
      "username": "danborek",
      "name": "danborek",
      "created_at": "2024-11-08T13:19:23.948Z",
      "updated_at": "2024-11-08T13:19:23.948Z",
      "cooked": "<p>there was an workaround, but it stopped working in 0.12<br>\n<a href=\"https://github.com/typst/typst/issues/1097\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Multiple bibliographies · Issue #1097 · typst/typst · GitHub</a></p>",
      "raw": "there was an workaround, but it stopped working in 0.12\n https://github.com/typst/typst/issues/1097",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 79,
      "score": 35.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 410
    },
    {
      "id": 5311,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-08T13:44:31.589Z",
      "updated_at": "2024-11-08T13:44:31.589Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/daniel_nief\">@Daniel_Nief</a>, have you looked at</p>\n<ul>\n<li><a href=\"https://forum.typst.app/t/why-cant-i-use-a-function-in-a-chapter-even-though-i-imported-it-at-the-start-of-my-main-file/196/7\" class=\"inline-onebox\">Why can't I use a function in a chapter even though I imported it at the start of my main file? - #7 by PgBiel</a></li>\n<li><a href=\"https://forum.typst.app/t/best-practices-for-working-with-longer-documents/1228\" class=\"inline-onebox\">Best practices for working with longer documents</a></li>\n</ul>\n<p>I think it might help you!</p>\n<p>In any case, if you could tell us more about how you “preview the parts”, we could help you more.</p>",
      "raw": "Hello @Daniel_Nief, have you looked at \n- https://forum.typst.app/t/why-cant-i-use-a-function-in-a-chapter-even-though-i-imported-it-at-the-start-of-my-main-file/196/7\n- https://forum.typst.app/t/best-practices-for-working-with-longer-documents/1228\n\n\nI think it might help you! \n\nIn any case, if you could tell us more about how you \"preview the parts\", we could help you more.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 78,
      "score": 90.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5968,
      "post_number": 4,
      "username": "Daniel_Nief",
      "name": "Daniel Nief",
      "created_at": "2024-11-21T15:42:18.561Z",
      "updated_at": "2025-01-03T18:54:18.797Z",
      "cooked": "<p>Those are some interesting sources but it didn’t quite solve the problem.<br>\nImporting the bibliography directly into the parts will lead to multiple bibliographies, which his not allowed.</p>\n<p>Here’s my setup:</p>\n<ul>\n<li>main.typ</li>\n<li>template.typ</li>\n<li>parts/\n<ul>\n<li>part1.typ</li>\n<li>part1.typ</li>\n</ul>\n</li>\n</ul>\n<p><strong>main.typ:</strong></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"styles.typ\" : *\n#show: layout\n...\n@source\n#include \"parts/part1.typ\"\n#include \"parts/part2.typ\"\n#bibliography(\"references.yml\")\n</code></pre>\n<p><strong>part1.typ &amp; part2.typ:</strong></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"styles.typ\" : *\n#show: layout\n@source\n...\n</code></pre>\n<p>In my references if have a source, it can be accessed using the label <code>&lt;source&gt;</code> or <code>@source</code>. But only if there’s a bibliography present in the file.<br>\nSo when I cite <code>@source1</code> in main.typ, it works. When I cite  <code>@source</code> in main.typ, I can preview main.typ because it knows the bibliography, I can’t preview part1.typ because it doesn’t recognize the label, because there’s no bibliography in part1.typ</p>\n<p>Now if I store the bibliography in a variable and add it to main.typ and part1.typ, this will generate two bibliography objects, throwing the error that I can’t have two bibliographies.</p>\n<p>I’ve seen the workaround of overwriting the labels at the beginning of the parts, but it’s a workaround, not a solution, it won’t show the source in the bibliography of main.typ with the workaround in place.</p>",
      "raw": "Those are some interesting sources but it didn't quite solve the problem. \nImporting the bibliography directly into the parts will lead to multiple bibliographies, which his not allowed.\n\nHere's my setup:\n* main.typ\n* template.typ\n* parts/\n  * part1.typ\n  * part1.typ\n\n**main.typ:**\n\n  ```typ\n  #import \"styles.typ\" : *\n  #show: layout\n  ...\n  @source\n  #include \"parts/part1.typ\"\n  #include \"parts/part2.typ\"\n  #bibliography(\"references.yml\")\n  ```\n\n**part1.typ & part2.typ:**\n  ```typ\n  #import \"styles.typ\" : *\n  #show: layout\n  @source\n  ...\n  ```\n\nIn my references if have a source, it can be accessed using the label `<source>` or `@source`. But only if there's a bibliography present in the file.\nSo when I cite `@source1` in main.typ, it works. When I cite  `@source` in main.typ, I can preview main.typ because it knows the bibliography, I can't preview part1.typ because it doesn't recognize the label, because there's no bibliography in part1.typ\n\nNow if I store the bibliography in a variable and add it to main.typ and part1.typ, this will generate two bibliography objects, throwing the error that I can't have two bibliographies.\n\nI've seen the workaround of overwriting the labels at the beginning of the parts, but it's a workaround, not a solution, it won't show the source in the bibliography of main.typ with the workaround in place.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 69,
      "score": 43.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 768
    },
    {
      "id": 5969,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-21T15:45:07.601Z",
      "updated_at": "2024-11-21T15:45:07.601Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Daniel_Nief\" data-post=\"4\" data-topic=\"1605\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/d/C2387F/48.png\" class=\"avatar\"> Daniel_Nief:</div>\n<blockquote>\n<p>I can’t preview part1.typ because it doesn’t recognize the label, because there’s no bibliography in part1.typ</p>\n</blockquote>\n</aside>\n<p>I’m wondering what your use case would be to individually preview each part of your document? Is the compile time an issue?</p>",
      "raw": "[quote=\"Daniel_Nief, post:4, topic:1605\"]\nI can’t preview part1.typ because it doesn’t recognize the label, because there’s no bibliography in part1.typ\n[/quote]\n\nI'm wondering what your use case would be to individually preview each part of your document? Is the compile time an issue?",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 58,
      "score": 36.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5970,
      "post_number": 6,
      "username": "Daniel_Nief",
      "name": "Daniel Nief",
      "created_at": "2024-11-21T15:48:05.677Z",
      "updated_at": "2024-11-21T15:48:05.677Z",
      "cooked": "<p>Well previewing main.typ would suffice, it really is nice, compared to other tools. There’s just little icks caused by the missing references like VS Code marking pages red adding to it.</p>\n<p>Not a real problem but would be nice to have a consistent fix.</p>",
      "raw": "Well previewing main.typ would suffice, it really is nice, compared to other tools. There's just little icks caused by the missing references like VS Code marking pages red adding to it.\n\nNot a real problem but would be nice to have a consistent fix.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 56,
      "score": 26.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 768
    },
    {
      "id": 5971,
      "post_number": 7,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-21T15:52:58.716Z",
      "updated_at": "2024-11-21T15:52:58.716Z",
      "cooked": "<p>What I suggest is to setup a conditional bibliography command. See <a href=\"https://forum.typst.app/t/can-i-configure-my-document-e-g-draft-release-version-color-theme-when-creating-a-pdf-without-modifying-the-typst-file-directly/160\" class=\"inline-onebox\">Can I configure my document (e.g. draft/release version, color theme) when creating a PDF without modifying the Typst file directly?</a>, so it will only import the references in the subfiles when you are in “subfile mode”.</p>\n<p>In any case, I am curious about your issues with missing references, could you give more details?</p>",
      "raw": "What I suggest is to setup a conditional bibliography command. See https://forum.typst.app/t/can-i-configure-my-document-e-g-draft-release-version-color-theme-when-creating-a-pdf-without-modifying-the-typst-file-directly/160, so it will only import the references in the subfiles when you are in \"subfile mode\".\n\nIn any case, I am curious about your issues with missing references, could you give more details?",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 58,
      "score": 46.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5973,
      "post_number": 8,
      "username": "Daniel_Nief",
      "name": "Daniel Nief",
      "created_at": "2024-11-21T17:05:21.722Z",
      "updated_at": "2024-11-21T17:05:21.722Z",
      "cooked": "<p>There’s actually not much more to it other than VS Code error detection and the subfile not being able to compile. I’ll just preview main.typ from now on and/or use the dummy workaround for now. There’s not much configuration needed for it so…</p>",
      "raw": "There's actually not much more to it other than VS Code error detection and the subfile not being able to compile. I'll just preview main.typ from now on and/or use the dummy workaround for now. There's not much configuration needed for it so...",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 35.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 768
    },
    {
      "id": 5980,
      "post_number": 9,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-22T04:33:55.903Z",
      "updated_at": "2024-11-22T04:35:48.288Z",
      "cooked": "<p>This is a pretty well-known request: <a href=\"https://github.com/typst/typst/issues/4035\" class=\"inline-onebox\">Downgrade missing references from errors to warning · Issue #4035 · typst/typst · GitHub</a></p>\n<p>The main problem is that Typst can’t figure out what to reference if there’s no bibliography. What is being requested in the issue is the ability to ignore missing references so you can get an idea of how the file looks like (but it of course won’t be fully accurate). While that’s not implemented, you’ll have to resort to workarounds.</p>\n<p>Here’s one potential way to do it: a common <code>load-bib</code> function which does not render duplicate bibliographies, but gives priority to the bibliography loaded with <code>load-bib(main: true)</code> in the main file:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// bib.typ\n#let load-bib(main: false) = {\n  counter(\"bibs\").step()\n\n  context if main {\n    [#bibliography(\"bib.yml\") &lt;main-bib&gt;]\n  } else if query(&lt;main-bib&gt;) == () and counter(\"bibs\").get().first() == 1 {\n    // This is the first bibliography, and there is no main bibliography\n    bibliography(\"bib.yml\")\n  }\n}\n</code></pre>\n<p>You can use this in non-main files as follows:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// NON-MAIN FILE\n\n// Assuming bib.typ is at the root of the project\n// so we don't have to specify full relative paths each time\n#import \"/bib.typ\": load-bib\n\n// ...File contents...\n\n#load-bib()\n</code></pre>\n<p>And in the main file as follows:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// MAIN FILE\n\n#import \"/bib.typ\": load-bib\n\n#include \"some-non-main-file.typ\"\n\n// ...File contents...\n\n// 'main: true' to indicate this bibliography\n// must be prioritized\n#load-bib(main: true)\n</code></pre>\n<p>Since only the first bibliography is loaded (or the main bibliography, if there is one), this also supports <code>#include</code> between auxiliary (non-main) files!</p>\n<p>You can also use <code>hide(bibliography(\"bib.yml\"))</code> in the <code>else</code> of the function if you’d like to turn the bibliography invisible when compiling a non-main file.</p>",
      "raw": "This is a pretty well-known request: https://github.com/typst/typst/issues/4035\n\nThe main problem is that Typst can't figure out what to reference if there's no bibliography. What is being requested in the issue is the ability to ignore missing references so you can get an idea of how the file looks like (but it of course won't be fully accurate). While that's not implemented, you'll have to resort to workarounds.\n\nHere's one potential way to do it: a common `load-bib` function which does not render duplicate bibliographies, but gives priority to the bibliography loaded with `load-bib(main: true)` in the main file:\n\n```typ\n// bib.typ\n#let load-bib(main: false) = {\n  counter(\"bibs\").step()\n\n  context if main {\n    [#bibliography(\"bib.yml\") <main-bib>]\n  } else if query(<main-bib>) == () and counter(\"bibs\").get().first() == 1 {\n    // This is the first bibliography, and there is no main bibliography\n    bibliography(\"bib.yml\")\n  }\n}\n```\n\nYou can use this in non-main files as follows:\n\n```typ\n// NON-MAIN FILE\n\n// Assuming bib.typ is at the root of the project\n// so we don't have to specify full relative paths each time\n#import \"/bib.typ\": load-bib\n\n// ...File contents...\n\n#load-bib()\n```\n\nAnd in the main file as follows:\n\n```typ\n// MAIN FILE\n\n#import \"/bib.typ\": load-bib\n\n#include \"some-non-main-file.typ\"\n\n// ...File contents...\n\n// 'main: true' to indicate this bibliography\n// must be prioritized\n#load-bib(main: true)\n```\n\nSince only the first bibliography is loaded (or the main bibliography, if there is one), this also supports `#include` between auxiliary (non-main) files!\n\nYou can also use `hide(bibliography(\"bib.yml\"))` in the `else` of the function if you'd like to turn the bibliography invisible when compiling a non-main file.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 54,
      "score": 225.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 6936,
      "post_number": 10,
      "username": "Paul",
      "name": "Paul",
      "created_at": "2024-12-26T17:03:42.055Z",
      "updated_at": "2024-12-26T17:03:42.055Z",
      "cooked": "<p>One other way to permit multiple bibliography is to completely override the <code>bibliography</code> and <code>cite</code> function. This permits to have some multiple files with different bibliography. This is addressed by this package I think : <a href=\"https://github.com/pauladam94/multi-bib/tree/main\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">GitHub - pauladam94/multi-bib: Typst multiple bibliographie using same citation an bibliographie syntax.</a>.</p>",
      "raw": "One other way to permit multiple bibliography is to completely override the `bibliography` and `cite` function. This permits to have some multiple files with different bibliography. This is addressed by this package I think : https://github.com/pauladam94/multi-bib/tree/main.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 57.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 564
    },
    {
      "id": 8502,
      "post_number": 11,
      "username": "YossiYanou",
      "name": "Yossi Yanou",
      "created_at": "2025-02-12T10:22:42.934Z",
      "updated_at": "2025-02-12T10:22:42.934Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/daniel_nief\">@Daniel_Nief</a> I believe this is what you’re looking for (Tinymist Extension):</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/51e8eae5a7f4aec83fb74dab603b29d76b410596.png\" data-download-href=\"https://forum.typst.app/uploads/default/51e8eae5a7f4aec83fb74dab603b29d76b410596\" title=\"Screenshot 2025-02-12 at 11.21.07\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/51e8eae5a7f4aec83fb74dab603b29d76b410596_2_690x213.png\" alt=\"Screenshot 2025-02-12 at 11.21.07\" data-base62-sha1=\"bGBHjLNwos5zh7hVjEpGRb2yx4G\" width=\"690\" height=\"213\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/51e8eae5a7f4aec83fb74dab603b29d76b410596_2_690x213.png, https://forum.typst.app/uploads/default/optimized/2X/5/51e8eae5a7f4aec83fb74dab603b29d76b410596_2_1035x319.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/5/51e8eae5a7f4aec83fb74dab603b29d76b410596_2_1380x426.png 2x\" data-dominant-color=\"1A1D23\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-02-12 at 11.21.07</span><span class=\"informations\">1742×540 117 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "@Daniel_Nief I believe this is what you're looking for (Tinymist Extension):\n\n![Screenshot 2025-02-12 at 11.21.07|690x213](upload://bGBHjLNwos5zh7hVjEpGRb2yx4G.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 15.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1183
    }
  ],
  "scraped_at": "2025-06-10T09:55:18.973865"
}
{
  "topic_metadata": {
    "id": 1607,
    "title": "How to call external applications?",
    "slug": "how-to-call-external-applications",
    "posts_count": 3,
    "created_at": "2024-11-08T13:57:57.812Z",
    "last_posted_at": "2024-11-08T23:30:22.498Z",
    "views": 330,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 449
  },
  "posts": [
    {
      "id": 5312,
      "post_number": 1,
      "username": "curious-m",
      "name": "curious-m",
      "created_at": "2024-11-08T13:57:58.021Z",
      "updated_at": "2024-11-08T23:20:27.804Z",
      "cooked": "<p>I consider installing a typest instance on my private server.<br>\nIs it possible to enable the interaction with other programs, ideally establishing socks connections to running deamons or making calls to an REST API or even call (whitelisted) programs on the server.</p>\n<p>While I understand that enabling such things (especially the last option) on a public server might lead to sever security issues, it would be great for many of my possible usecases, such as automatic report generation.</p>\n<p>Currently I mainly use knitr/overleaf or jupyter for such usecases. I guess, for those applications it is easier, as they compile everything at once. So for typest some mechanism would be necessary, to control possibly necessary reloads.</p>\n<p>The alternative, running scripts, creating outputs which I eventually import and display in typest just doesn’t feel to appealing.</p>",
      "raw": "I consider installing a typest instance on my private server.\nIs it possible to enable the interaction with other programs, ideally establishing socks connections to running deamons or making calls to an REST API or even call (whitelisted) programs on the server.\n\nWhile I understand that enabling such things (especially the last option) on a public server might lead to sever security issues, it would be great for many of my possible usecases, such as automatic report generation.\n\nCurrently I mainly use knitr/overleaf or jupyter for such usecases. I guess, for those applications it is easier, as they compile everything at once. So for typest some mechanism would be necessary, to control possibly necessary reloads.\n\nThe alternative, running scripts, creating outputs which I eventually import and display in typest just doesn't feel to appealing.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 1141.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 769
    },
    {
      "id": 5361,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-08T23:29:53.551Z",
      "updated_at": "2024-11-08T23:29:53.551Z",
      "cooked": "<p>Welcome to the forum <a class=\"mention\" href=\"/u/curious-m\">@curious-m</a> ! I’ve updated your post title to better suit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Welcome to the forum @curious-m ! I've updated your post title to better suit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 25.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5362,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-08T23:30:22.498Z",
      "updated_at": "2024-11-08T23:30:22.498Z",
      "cooked": "<p>There has been extensive discussion about this in the past, but this functionality (often referred to as “shell escape” in reference to LaTeX’s equivalent functionality) unfortunately isn’t really compatible with several of Typst’s aspects, including portability (being able to compile the same document in different environments), purity (function calls in Typst must always produce the same result to make memoization possible), security (compiling a Typst document must not produce unexpected side-effects in your system) and others.</p>\n<p>However, you can still run non-Typst code within a Typst document through the usage of WASM plugins, which <em>are</em> portable. This allows you to run anything that can compile to WASM, including even languages like Python (<a href=\"https://typst.app/universe/package/pyrunner\" class=\"inline-onebox\">pyrunner – Typst Universe</a>) or JavaScript (<a href=\"https://typst.app/universe/package/jogs\" class=\"inline-onebox\">jogs – Typst Universe</a>). As a fun fact, this also made it possible to bring some tools from the JS ecosystem to Typst, such as charts with <code>echarts</code>: <a href=\"https://typst.app/universe/package/echarm\" class=\"inline-onebox\">echarm – Typst Universe</a></p>\n<p>For more information on how to create a plugin (if you’re a developer), you can check out this page: <a href=\"https://typst.app/docs/reference/foundations/plugin/\" class=\"inline-onebox\">Plugin Type – Typst Documentation</a></p>\n<p>Now, if you really do need to run an external command (because, say, your program can’t easily be compiled to WebAssembly), it will be necessary to run the command before compiling and using its output. However, you can make this process easier, and even determine which command to run from inside the Typst document, thanks to <code>typst query</code>, which allows fetching information from the document. Check out this package which may help: <a href=\"https://typst.app/universe/package/prequery\" class=\"inline-onebox\">prequery – Typst Universe</a></p>",
      "raw": "There has been extensive discussion about this in the past, but this functionality (often referred to as \"shell escape\" in reference to LaTeX's equivalent functionality) unfortunately isn't really compatible with several of Typst's aspects, including portability (being able to compile the same document in different environments), purity (function calls in Typst must always produce the same result to make memoization possible), security (compiling a Typst document must not produce unexpected side-effects in your system) and others.\n\nHowever, you can still run non-Typst code within a Typst document through the usage of WASM plugins, which _are_ portable. This allows you to run anything that can compile to WASM, including even languages like Python (https://typst.app/universe/package/pyrunner) or JavaScript (https://typst.app/universe/package/jogs). As a fun fact, this also made it possible to bring some tools from the JS ecosystem to Typst, such as charts with `echarts`: https://typst.app/universe/package/echarm\n\nFor more information on how to create a plugin (if you're a developer), you can check out this page: https://typst.app/docs/reference/foundations/plugin/\n\nNow, if you really do need to run an external command (because, say, your program can't easily be compiled to WebAssembly), it will be necessary to run the command before compiling and using its output. However, you can make this process easier, and even determine which command to run from inside the Typst document, thanks to `typst query`, which allows fetching information from the document. Check out this package which may help: https://typst.app/universe/package/prequery",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 26,
      "score": 270.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:55:18.241965"
}
{
  "topic_metadata": {
    "id": 1608,
    "title": "How can I align multiple terms in a multi-line block equation?",
    "slug": "how-can-i-align-multiple-terms-in-a-multi-line-block-equation",
    "posts_count": 5,
    "created_at": "2024-11-08T14:03:53.975Z",
    "last_posted_at": "2024-11-08T17:47:15.976Z",
    "views": 696,
    "like_count": 7,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Eric",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 911
  },
  "posts": [
    {
      "id": 5313,
      "post_number": 1,
      "username": "lampert",
      "name": "Joshua Lampert",
      "created_at": "2024-11-08T14:03:54.119Z",
      "updated_at": "2024-11-08T14:28:54.671Z",
      "cooked": "<p>I would like to have a multi-line equation, where the different terms in each equation of the different lines are aligned centrally, such that I can relate them to each other with <code>underbrace</code> and <code>overbrace</code>. The result should look like similar to this:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/9/9404f8730487f1d793aef5c6a36d0e7558ecbec5.png\" data-download-href=\"https://forum.typst.app/uploads/default/9404f8730487f1d793aef5c6a36d0e7558ecbec5\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/9/9404f8730487f1d793aef5c6a36d0e7558ecbec5_2_690x166.png\" alt=\"image\" data-base62-sha1=\"l7rjwpLjKIAE3hTcRQYgg4sosV7\" width=\"690\" height=\"166\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/9/9404f8730487f1d793aef5c6a36d0e7558ecbec5_2_690x166.png, https://forum.typst.app/uploads/default/optimized/2X/9/9404f8730487f1d793aef5c6a36d0e7558ecbec5_2_1035x249.png 1.5x, https://forum.typst.app/uploads/default/original/2X/9/9404f8730487f1d793aef5c6a36d0e7558ecbec5.png 2x\" data-dominant-color=\"F1F1F1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1068×258 23.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>which I created in LaTeX with</p>\n<pre><code class=\"lang-auto\">\\begin{equation*}\n\t\\begin{array}{ccccccc}\n\t\t\\underbrace{\\bm u^TPD\\bm v}_{\\vapprox} &amp;+&amp; \\underbrace{\\bm u^TD^TP\\bm v}_{\\vapprox} &amp;=&amp; \\underbrace{\\bm u^T\\bm e_R\\bm e_R^T\\bm v}_{\\veq} &amp;-&amp; \\underbrace{\\bm u^T\\bm e_L\\bm e_L^T\\bm v}_{\\veq}\\\\\n\t\t\\overbrace{\\displaystyle\\int_{x_L}^{x_R} uv_x\\tr dx} &amp;+&amp; \\overbrace{\\displaystyle\\int_{x_L}^{x_R} u_xv\\tr dx} &amp;=&amp; \\overbrace{u(x_R)v(x_R)} &amp;-&amp; \\overbrace{u(x_L)v(x_L)}\n\t\\end{array}\n\\end{equation*}\n</code></pre>\n<p>I tried two options, which are both not satisfying to me:</p>\n<ol>\n<li>using alignment points <code>&amp;</code>, but this does not center the terms,</li>\n<li>put everything in a matrix with no delimiter, but this feels a bit hacky and the integrals are too small like they are in inline equations.</li>\n</ol>\n<p>Code for first option:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$ underbrace(bold(u)^T P D bold(v), vapprox) &amp;+&amp; underbrace(bold(u)^T D^T P bold(v), vapprox) &amp;=&amp;\n  underbrace(bold(u)^T bold(e)_R bold(e)_R^T bold(v), veq) &amp;-&amp; underbrace(bold(u)^T bold(e)_L bold(e)_L^T bold(v), veq) \\\n  overbrace(integral_(x_L)^(x_R) u v_x dif x) &amp;+&amp; overbrace(integral_(x_L)^(x_R) u_x v dif x) &amp;=&amp;\n  overbrace(u(x_R) v(x_R)) &amp;-&amp; overbrace(u(x_L) v(x_L)) $\n</code></pre>\n<p>Code for second option:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set math.mat(delim: none)\n$ mat(\n    underbrace(bold(u)^T P D bold(v), vapprox), +, underbrace(bold(u)^T D^T P bold(v), vapprox), =, underbrace(bold(u)^T bold(e)_R bold(e)_R^T bold(v), veq), -, underbrace(bold(u)^T bold(e)_L bold(e)_L^T bold(v), veq) ;\n    overbrace(integral_(x_L)^(x_R) u v_x dif x), +, overbrace(integral_(x_L)^(x_R) u_x v dif x), =, overbrace(u(x_R) v(x_R)), -, overbrace(u(x_L) v(x_L))\n) $,\n</code></pre>\n<p>where both of these use</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let vapprox = (rotate(90deg)[$approx$])\n#let veq = (rotate(90deg)[$=$])\n</code></pre>\n<p>See also this document: <a href=\"https://typst.app/project/rOQLu8z7tgsvdfAwf8MAst\">https://typst.app/project/rOQLu8z7tgsvdfAwf8MAst</a><br>\nWhat would be the best way to achieve this?</p>",
      "raw": "I would like to have a multi-line equation, where the different terms in each equation of the different lines are aligned centrally, such that I can relate them to each other with `underbrace` and `overbrace`. The result should look like similar to this:\n![image|690x166](upload://l7rjwpLjKIAE3hTcRQYgg4sosV7.png)\n\nwhich I created in LaTeX with\n```\n\\begin{equation*}\n\t\\begin{array}{ccccccc}\n\t\t\\underbrace{\\bm u^TPD\\bm v}_{\\vapprox} &+& \\underbrace{\\bm u^TD^TP\\bm v}_{\\vapprox} &=& \\underbrace{\\bm u^T\\bm e_R\\bm e_R^T\\bm v}_{\\veq} &-& \\underbrace{\\bm u^T\\bm e_L\\bm e_L^T\\bm v}_{\\veq}\\\\\n\t\t\\overbrace{\\displaystyle\\int_{x_L}^{x_R} uv_x\\tr dx} &+& \\overbrace{\\displaystyle\\int_{x_L}^{x_R} u_xv\\tr dx} &=& \\overbrace{u(x_R)v(x_R)} &-& \\overbrace{u(x_L)v(x_L)}\n\t\\end{array}\n\\end{equation*}\n```\nI tried two options, which are both not satisfying to me:\n1. using alignment points `&`, but this does not center the terms,\n2. put everything in a matrix with no delimiter, but this feels a bit hacky and the integrals are too small like they are in inline equations.\n\nCode for first option:\n```typ\n$ underbrace(bold(u)^T P D bold(v), vapprox) &+& underbrace(bold(u)^T D^T P bold(v), vapprox) &=&\n  underbrace(bold(u)^T bold(e)_R bold(e)_R^T bold(v), veq) &-& underbrace(bold(u)^T bold(e)_L bold(e)_L^T bold(v), veq) \\\n  overbrace(integral_(x_L)^(x_R) u v_x dif x) &+& overbrace(integral_(x_L)^(x_R) u_x v dif x) &=&\n  overbrace(u(x_R) v(x_R)) &-& overbrace(u(x_L) v(x_L)) $\n```\nCode for second option:\n```typ\n#set math.mat(delim: none)\n$ mat(\n    underbrace(bold(u)^T P D bold(v), vapprox), +, underbrace(bold(u)^T D^T P bold(v), vapprox), =, underbrace(bold(u)^T bold(e)_R bold(e)_R^T bold(v), veq), -, underbrace(bold(u)^T bold(e)_L bold(e)_L^T bold(v), veq) ;\n    overbrace(integral_(x_L)^(x_R) u v_x dif x), +, overbrace(integral_(x_L)^(x_R) u_x v dif x), =, overbrace(u(x_R) v(x_R)), -, overbrace(u(x_L) v(x_L))\n) $,\n```\nwhere both of these use\n```typ\n#let vapprox = (rotate(90deg)[$approx$])\n#let veq = (rotate(90deg)[$=$])\n```\nSee also this document: https://typst.app/project/rOQLu8z7tgsvdfAwf8MAst\nWhat would be the best way to achieve this?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 48,
      "score": 3299.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 667
    },
    {
      "id": 5314,
      "post_number": 2,
      "username": "lampert",
      "name": "Joshua Lampert",
      "created_at": "2024-11-08T14:21:06.117Z",
      "updated_at": "2024-11-08T14:21:06.117Z",
      "cooked": "<p>Of course I could use <code>display</code> in the second option to enlarge the integrals and this already comes close to what I want, but I am still wondering if there is a better option without <code>mat</code>.</p>",
      "raw": "Of course I could use `display` in the second option to enlarge the integrals and this already comes close to what I want, but I am still wondering if there is a better option without `mat`.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 28.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 667
    },
    {
      "id": 5315,
      "post_number": 3,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-08T14:25:10.826Z",
      "updated_at": "2024-11-08T14:25:35.539Z",
      "cooked": "<p>I think you can use a grid for that!</p>",
      "raw": "I think you can use a grid for that!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 33.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5316,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-11-08T15:20:39.238Z",
      "updated_at": "2024-11-08T15:20:39.238Z",
      "cooked": "<p>Using a grid will probably lead to misaligned baselines. I may have overdone it a bit, but here is a function for math-grids with custom gutter and alignments. It even allows passing arrays for alignments (like in default grids), and overriding the alignment of specific cells by wrapping them with the standard <code>align</code> element. <img src=\"https://forum.typst.app/images/emoji/apple/grin.png?v=12\" title=\":grin:\" class=\"emoji\" alt=\":grin:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<details>\n<summary>\nFunction Definition</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let mgrid(align: center, gutter: 1em, eq) = context {\n  if eq.func() != [].func() {\n    // Body is just a single element, so leave it as is.\n    return eq\n  }\n\n  // Split body at linebreaks and alignment points.\n  let lines = eq.children.split(linebreak()).map(line =&gt; line.split($&amp;$.body).map(array.join))\n\n  // Calculate width of each column.\n  let widths = ()\n  for line in lines {\n    for (i, part) in line.enumerate() {\n      let width = measure(math.equation(block: true, numbering: none, part)).width\n      if i &gt;= widths.len() {\n        widths.push(width)\n      } else {\n        widths.at(i) = calc.max(widths.at(i), width)\n      }\n    }\n  }\n\n  // Resolve alignment for each column.\n  let aligns = range(widths.len()).map(i =&gt; {\n    if type(align) == alignment { align }\n    else if type(align) == array { align.at(calc.rem(i, align.len())) }\n    else { panic(\"expected alignment or array as 'align'\") }\n  })\n\n  // Try to flatten sequence elements (to allow access to an underlying align\n  // element for overriding the alignment of single parts).\n  let flatten(seq) = {\n    if type(seq) != content or seq.func() != [].func() {\n      return seq\n    }\n    let children = seq.children.filter(c =&gt; c != [ ])\n    if children.len() == 1 { children.first() } else { seq }\n  }\n\n  // Display parts centered in each column and add gutter.\n  let layout-line(line) = {\n    if line.len() &lt; widths.len() {\n      line += (none,) * (widths.len() - line.len())\n    }\n    \n    line.zip(widths, aligns).map(((part, width, align)) =&gt; {\n      let part = flatten(part)\n      let part-width = measure(math.equation(block: true, numbering: none, part)).width\n      let delta = width - part-width\n\n      // Check if alignment is overridden.\n      if type(part) == content and part.func() == std.align {\n        align = part.alignment.x\n      }\n      \n      let (start, end) = if align == center {( h(delta/2), h(delta/2) )}\n                         else if align == left {( none, h(delta) )}\n                         else if align == right {( h(delta), none )}\n\n      start + part + end\n    }).join(h(gutter))\n  }\n\n  lines.map(layout-line).join(linebreak())\n}\n</code></pre>\n</details>\n<p>For your case, the use then looks like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// Use display math here so that the bounds are correct.\n#let vapprox = rotate(90deg, $ approx $)\n#let veq = rotate(90deg, $ = $)\n\n$ mgrid(gutter: #1em,\n    underbrace(bold(u)^T P D bold(v))\n      &amp; + &amp; underbrace(bold(u)^T D^T P bold(v))\n      &amp; = &amp; underbrace(bold(u)^T bold(e)_R bold(e)_R^T bold(v))\n      &amp; - &amp; underbrace(bold(u)^T bold(e)_L bold(e)_L^T bold(v)) \\\n\n    vapprox &amp;&amp; vapprox &amp;&amp; veq &amp;&amp; veq \\\n  \n    overbrace(integral_(x_L)^(x_R) u v_x dif x)\n      &amp; + &amp; overbrace(integral_(x_L)^(x_R) u_x v dif x)\n      &amp; = &amp; overbrace(u(x_R) v(x_R))\n      &amp; - &amp; overbrace(u(x_L) v(x_L)) \\\n) $\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/0/02f025c5f68f39297badf9566695c1057d1544ef.png\" alt=\"Output of the above code.\" data-base62-sha1=\"pZt3FQZIYmbsVqlpBAxcSgEjpl\" width=\"542\" height=\"146\"></p>",
      "raw": "Using a grid will probably lead to misaligned baselines. I may have overdone it a bit, but here is a function for math-grids with custom gutter and alignments. It even allows passing arrays for alignments (like in default grids), and overriding the alignment of specific cells by wrapping them with the standard `align` element. :grin: \n\n[details=\"Function Definition\"]\n\n```typ\n#let mgrid(align: center, gutter: 1em, eq) = context {\n  if eq.func() != [].func() {\n    // Body is just a single element, so leave it as is.\n    return eq\n  }\n\n  // Split body at linebreaks and alignment points.\n  let lines = eq.children.split(linebreak()).map(line => line.split($&$.body).map(array.join))\n\n  // Calculate width of each column.\n  let widths = ()\n  for line in lines {\n    for (i, part) in line.enumerate() {\n      let width = measure(math.equation(block: true, numbering: none, part)).width\n      if i >= widths.len() {\n        widths.push(width)\n      } else {\n        widths.at(i) = calc.max(widths.at(i), width)\n      }\n    }\n  }\n\n  // Resolve alignment for each column.\n  let aligns = range(widths.len()).map(i => {\n    if type(align) == alignment { align }\n    else if type(align) == array { align.at(calc.rem(i, align.len())) }\n    else { panic(\"expected alignment or array as 'align'\") }\n  })\n\n  // Try to flatten sequence elements (to allow access to an underlying align\n  // element for overriding the alignment of single parts).\n  let flatten(seq) = {\n    if type(seq) != content or seq.func() != [].func() {\n      return seq\n    }\n    let children = seq.children.filter(c => c != [ ])\n    if children.len() == 1 { children.first() } else { seq }\n  }\n\n  // Display parts centered in each column and add gutter.\n  let layout-line(line) = {\n    if line.len() < widths.len() {\n      line += (none,) * (widths.len() - line.len())\n    }\n    \n    line.zip(widths, aligns).map(((part, width, align)) => {\n      let part = flatten(part)\n      let part-width = measure(math.equation(block: true, numbering: none, part)).width\n      let delta = width - part-width\n\n      // Check if alignment is overridden.\n      if type(part) == content and part.func() == std.align {\n        align = part.alignment.x\n      }\n      \n      let (start, end) = if align == center {( h(delta/2), h(delta/2) )}\n                         else if align == left {( none, h(delta) )}\n                         else if align == right {( h(delta), none )}\n\n      start + part + end\n    }).join(h(gutter))\n  }\n\n  lines.map(layout-line).join(linebreak())\n}\n```\n\n[/details]\n\nFor your case, the use then looks like this:\n\n```typ\n// Use display math here so that the bounds are correct.\n#let vapprox = rotate(90deg, $ approx $)\n#let veq = rotate(90deg, $ = $)\n\n$ mgrid(gutter: #1em,\n    underbrace(bold(u)^T P D bold(v))\n      & + & underbrace(bold(u)^T D^T P bold(v))\n      & = & underbrace(bold(u)^T bold(e)_R bold(e)_R^T bold(v))\n      & - & underbrace(bold(u)^T bold(e)_L bold(e)_L^T bold(v)) \\\n\n    vapprox && vapprox && veq && veq \\\n  \n    overbrace(integral_(x_L)^(x_R) u v_x dif x)\n      & + & overbrace(integral_(x_L)^(x_R) u_x v dif x)\n      & = & overbrace(u(x_R) v(x_R))\n      & - & overbrace(u(x_L) v(x_L)) \\\n) $\n```\n\n![Output of the above code.|678x183, 80%](upload://pZt3FQZIYmbsVqlpBAxcSgEjpl.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 6,
      "reads": 44,
      "score": 178.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 5319,
      "post_number": 5,
      "username": "lampert",
      "name": "Joshua Lampert",
      "created_at": "2024-11-08T17:47:15.976Z",
      "updated_at": "2024-11-08T17:47:15.976Z",
      "cooked": "<p>Wow, that’s pretty awesome <a class=\"mention\" href=\"/u/eric\">@Eric</a>. This is a function I will likely use more often in the future. Really helpful. Thanks a lot for your effort <a class=\"mention\" href=\"/u/eric\">@Eric</a>!</p>",
      "raw": "Wow, that's pretty awesome @Eric. This is a function I will likely use more often in the future. Really helpful. Thanks a lot for your effort @Eric!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 26.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 667
    }
  ],
  "scraped_at": "2025-06-10T09:55:17.523006"
}
